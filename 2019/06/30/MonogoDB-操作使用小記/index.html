<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-tw">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="monogodb,">










<meta name="description" content="最近專案有用到這個有看到使用Robo 3T但對這一塊不是很了解這邊主要是紀錄如何操作 MonogoDB不會記載 MonogoDB 詳細知識">
<meta name="keywords" content="monogodb">
<meta property="og:type" content="article">
<meta property="og:title" content="MonogoDB 操作使用小記">
<meta property="og:url" content="https://malagege.github.io/blog/2019/06/30/MonogoDB-操作使用小記/index.html">
<meta property="og:site_name" content="程式狂想筆記">
<meta property="og:description" content="最近專案有用到這個有看到使用Robo 3T但對這一塊不是很了解這邊主要是紀錄如何操作 MonogoDB不會記載 MonogoDB 詳細知識">
<meta property="og:locale" content="zh-tw">
<meta property="og:updated_time" content="2019-06-30T09:02:16.206Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MonogoDB 操作使用小記">
<meta name="twitter:description" content="最近專案有用到這個有看到使用Robo 3T但對這一塊不是很了解這邊主要是紀錄如何操作 MonogoDB不會記載 MonogoDB 詳細知識">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://malagege.github.io/blog/2019/06/30/MonogoDB-操作使用小記/">





  <title>MonogoDB 操作使用小記 | 程式狂想筆記</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-105195903-2', 'auto');
  ga('send', 'pageview');
</script>






  <!-- Google AdSense start -->
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1439458814178865",
    enable_page_level_ads: true
  });
</script>

  <!-- Google AdSense end -->
</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-tw">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">程式狂想筆記</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一個攻城師奮鬥史</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            標籤
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分類
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-links">
          <a href="/blog/links/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-link"></i> <br>
            
            好站連結
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            檢索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://malagege.github.io/blog/blog/2019/06/30/MonogoDB-操作使用小記/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="malagege">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程式狂想筆記">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MonogoDB 操作使用小記</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2019-06-30T13:13:03+08:00">
                2019-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分類於</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/MongoDB/" itemprop="url" rel="index">
                    <span itemprop="name">MongoDB</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2019/06/30/MonogoDB-操作使用小記/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/06/30/MonogoDB-操作使用小記/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
        <div align="center">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-1439458814178865" data-ad-slot="2236653478"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

        <p>最近專案有用到這個<br>有看到使用<code>Robo 3T</code><br>但對這一塊不是很了解<br>這邊主要是紀錄如何<code>操作 MonogoDB</code><br>不會記載 MonogoDB 詳細知識</p>
<a id="more"></a>
<h2 id="有哪幾種-NoSQL-4-種"><a href="#有哪幾種-NoSQL-4-種" class="headerlink" title="有哪幾種 NoSQL?(4 種)"></a>有哪幾種 NoSQL?(4 種)</h2><ul>
<li>Key-value store<br>ex: BigTable、Hadoop</li>
<li>Document store<br>ex: MongoDB</li>
<li>Graph<br>ex: Neo4J</li>
<li>列存儲(Wide Column Store/Column-Family)資料庫(記憶體資料庫是知名網站慣用快取工具)<br>ex: Memcached、Redis、Velocity</li>
</ul>
<p><a href="https://www.ithome.com.tw/news/92507" target="_blank" rel="noopener">快速認識 4 類主流 NoSQL 資料庫 | iThome</a></p>
<h2 id="簡單架設-MonogoDB"><a href="#簡單架設-MonogoDB" class="headerlink" title="簡單架設 MonogoDB"></a>簡單架設 MonogoDB</h2><h3 id="docker-架設"><a href="#docker-架設" class="headerlink" title="docker 架設"></a>docker 架設</h3><p><a href="https://hub.docker.com/_/mongo" target="_blank" rel="noopener">參考裡面 docker-compose.yml</a></p>
<h3 id="vagrant"><a href="#vagrant" class="headerlink" title="vagrant"></a>vagrant</h3><p>homestead 可以架設</p>
<p>或者比較單純<a href="https://app.vagrantup.com/benson/boxes/mongodb" target="_blank" rel="noopener">Vagrant box benson/mongodb - Vagrant Cloud</a> 或 <a href="https://github.com/bobthecow/vagrant-mongobox/issues/5" target="_blank" rel="noopener">Update to Mongo v3 · Issue #5 · bobthecow/vagrant-mongobox</a></p>
<h2 id="操作使用"><a href="#操作使用" class="headerlink" title="操作使用"></a>操作使用</h2><h3 id="local-config-admin-databases"><a href="#local-config-admin-databases" class="headerlink" title="local,config,admin databases"></a>local,config,admin databases</h3><p>預設安裝完會看到有三個 database<br><code>local</code>,<code>config</code>,<code>admin</code> 三個 database 建議不要去動他</p>
<blockquote>
<p>admin and local contain various settings local to the server, like users who are authenticated to connect. Under beginner usage, you shouldn’t need to worry about them at all. By default you connect to a database named test. To connect to a new database, just use databasename from the mongo command line, or mongo databasename from your OS shell.<br>use [database_name] and then show collections<br>The db object is your root handle to the currently-selected database on the mongo commmand line. The command line is really just a Javascript command line, and there are various mongodb-specific objects and functions exposed that let you do stuff. Try help() for a full listing.</p>
</blockquote>
<p><a href="https://stackoverflow.com/questions/3490272/some-beginners-questions-about-mongodb" target="_blank" rel="noopener">Some beginner’s questions about MongoDB - Stack Overflow</a><br><a href="http://www.mongoing.com/archives/2599" target="_blank" rel="noopener">MongoDB 管理：慎用 local、admin 数据库 | MongoDB 中文社区</a></p>
<h2 id="mysql-lt-gt-mongodb"><a href="#mysql-lt-gt-mongodb" class="headerlink" title="mysql &lt;=&gt; mongodb"></a>mysql &lt;=&gt; mongodb</h2><p>MySQL MongoDB<br>Table &lt;==&gt; Collection<br>Row &lt;=&gt; Document<br>Column &lt;=&gt; Field</p>
<p><a href="https://www.mongodb.com/compare/mongodb-mysql" target="_blank" rel="noopener">MongoDB and MySQL Compared | MongoDB</a></p>
<h2 id="操作使用-1"><a href="#操作使用-1" class="headerlink" title="操作使用"></a>操作使用</h2><h3 id="創建資料庫"><a href="#創建資料庫" class="headerlink" title="創建資料庫"></a>創建資料庫</h3><p><code>use DATABASE_NAME</code></p>
<p>如果資料庫不存在，則創建資料庫，否則切換到指定資料庫。</p>
<h3 id="刪除資料庫"><a href="#刪除資料庫" class="headerlink" title="刪除資料庫"></a>刪除資料庫</h3><p><code>db.dropDatabase()</code></p>
<p>刪除所在的 Database</p>
<h3 id="创建集合-Collection"><a href="#创建集合-Collection" class="headerlink" title="创建集合(Collection)"></a>创建集合(Collection)</h3><p><code>db.createCollection(name, options)</code></p>
<p><code>db.createCollection(&quot;mycol&quot;, { capped : true, autoIndexId : true, size : 6142800, max : 10000 }</code><br>創建固定集合 mycol，整個集合空間大小 6142800 KB, 文檔最大個數為 10000 個。</p>
<h3 id="插入文件-Document"><a href="#插入文件-Document" class="headerlink" title="插入文件(Document)"></a>插入文件(Document)</h3><p><code>db.COLLECTION_NAME.insert(document)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.col.insert(&#123;</span><br><span class="line">  title: <span class="string">"MongoDB 教程"</span>,</span><br><span class="line">  description: <span class="string">"MongoDB 是一個 Nosql 數據庫"</span>,</span><br><span class="line">  by: <span class="string">"菜鳥教程"</span>,</span><br><span class="line">  url: <span class="string">"http://www.runoob.com"</span>,</span><br><span class="line">  tags: [<span class="string">"mongodb"</span>, <span class="string">"database"</span>, <span class="string">"NoSQL"</span>],</span><br><span class="line">  likes: <span class="number">100</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="查詢集合"><a href="#查詢集合" class="headerlink" title="查詢集合"></a>查詢集合</h3><p><code>db.col.find()</code></p>
<h3 id="刪除文件"><a href="#刪除文件" class="headerlink" title="刪除文件"></a>刪除文件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.collection.remove(</span><br><span class="line">   &lt;query&gt;,</span><br><span class="line">   &lt;justOne&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><a href="http://www.runoob.com/mongodb/mongodb-remove.html" target="_blank" rel="noopener">MongoDB 刪除文檔 | 菜鳥教程</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">remove() 方法已經過時了，現在官方推薦使用 deleteOne() 和 deleteMany() 方法。</span><br><span class="line"></span><br><span class="line">如刪除集合下全部文檔：</span><br><span class="line"></span><br><span class="line">db.inventory.deleteMany(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">刪除 status 等於 A 的全部文檔：</span><br><span class="line"></span><br><span class="line">db.inventory.deleteMany(&#123; status : &quot;A&quot; &#125;)</span><br><span class="line"></span><br><span class="line">刪除 status 等於 D 的一個文檔：</span><br><span class="line"></span><br><span class="line">db.inventory.deleteOne( &#123; status: &quot;D&quot; &#125; )</span><br><span class="line"></span><br><span class="line">三國電視台</span><br><span class="line"></span><br><span class="line">   三國電視台</span><br><span class="line"></span><br><span class="line">  tre***3@126.com</span><br><span class="line">2年前 (2017-09-22)</span><br><span class="line"></span><br><span class="line">   sairre</span><br><span class="line"></span><br><span class="line">  jsa***e@163.com</span><br><span class="line"></span><br><span class="line">remove() 方法 並不會真正釋放空間。</span><br><span class="line"></span><br><span class="line">需要繼續執行 db.repairDatabase() 來回收磁盤空間。</span><br><span class="line"></span><br><span class="line">&gt; db.repairDatabase()</span><br><span class="line">或者</span><br><span class="line">&gt; db.runCommand(&#123; repairDatabase: 1 &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="修改文件"><a href="#修改文件" class="headerlink" title="修改文件"></a>修改文件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.collection.update(</span><br><span class="line">   &lt;query&gt;,</span><br><span class="line">   &lt;update&gt;,</span><br><span class="line">   &#123;</span><br><span class="line">     upsert: <span class="xml"><span class="tag">&lt;<span class="name">boolean</span>&gt;</span>,</span></span><br><span class="line">     multi: &lt;boolean&gt;,</span><br><span class="line">     writeConcern: &lt;document&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在3.2版本开始，MongoDB提供以下更新集合文档的方法：</span><br><span class="line"></span><br><span class="line">    db.collection.updateOne() 向指定集合更新单个文档</span><br><span class="line">    db.collection.updateMany() 向指定集合更新多个文档</span><br></pre></td></tr></table></figure>
<p>更多內容可看<a href="http://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="noopener">MongoDB 教程 | 菜鸟教程</a><br>由於裡面教學應該是 2.x 版<br>可以看評論裡面補充很多東西</p>
<h2 id="Robo-3T-操作-MongoDB"><a href="#Robo-3T-操作-MongoDB" class="headerlink" title="Robo 3T 操作 MongoDB"></a>Robo 3T 操作 MongoDB</h2><p><a href="https://www.cnblogs.com/tugenhua0707/p/9250673.html" target="_blank" rel="noopener">MongoDB 可视化工具–Robo 3T 使用教程 - 龙恩 0707 - 博客园</a><br><a href="https://adminmongo.markmoffat.com/" target="_blank" rel="noopener">adminMongo</a></p>
<h2 id="刪除資料-OR-篩選資料-的問題"><a href="#刪除資料-OR-篩選資料-的問題" class="headerlink" title="刪除資料 OR 篩選資料 的問題"></a>刪除資料 OR 篩選資料 的問題</h2><p><a href="https://kknews.cc/zh-tw/news/kyyva3q.html" target="_blank" rel="noopener">「乾貨」mongoDB 釋放磁碟占用 - 每日頭條</a><br>目前專案裡面放的資料好像不會去做刪除或者撈出來資料不會做篩選<br>不知道是不是非常耗效能關係??</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/monogodb/" rel="tag"># monogodb</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2019/06/29/PHP-陣列實用涵式小記/" rel="next" title="PHP 陣列實用函式小記">
                <i class="fa fa-chevron-left"></i> PHP 陣列實用函式小記
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2019/06/30/heroku-架設-PHP-Laravel-小記/" rel="prev" title="heroku 架設 PHP & Laravel  小記">
                heroku 架設 PHP & Laravel  小記 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



<div align="center">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-1439458814178865" data-ad-slot="2236653478"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">malagege</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">507</span>
                  <span class="site-state-item-name">文章</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">分類</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">413</span>
                  <span class="site-state-item-name">標籤</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/malagege" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#有哪幾種-NoSQL-4-種"><span class="nav-number">1.</span> <span class="nav-text">有哪幾種 NoSQL?(4 種)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#簡單架設-MonogoDB"><span class="nav-number">2.</span> <span class="nav-text">簡單架設 MonogoDB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#docker-架設"><span class="nav-number">2.1.</span> <span class="nav-text">docker 架設</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vagrant"><span class="nav-number">2.2.</span> <span class="nav-text">vagrant</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作使用"><span class="nav-number">3.</span> <span class="nav-text">操作使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#local-config-admin-databases"><span class="nav-number">3.1.</span> <span class="nav-text">local,config,admin databases</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mysql-lt-gt-mongodb"><span class="nav-number">4.</span> <span class="nav-text">mysql &lt;=&gt; mongodb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作使用-1"><span class="nav-number">5.</span> <span class="nav-text">操作使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#創建資料庫"><span class="nav-number">5.1.</span> <span class="nav-text">創建資料庫</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#刪除資料庫"><span class="nav-number">5.2.</span> <span class="nav-text">刪除資料庫</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建集合-Collection"><span class="nav-number">5.3.</span> <span class="nav-text">创建集合(Collection)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入文件-Document"><span class="nav-number">5.4.</span> <span class="nav-text">插入文件(Document)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查詢集合"><span class="nav-number">5.5.</span> <span class="nav-text">查詢集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#刪除文件"><span class="nav-number">5.6.</span> <span class="nav-text">刪除文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改文件"><span class="nav-number">5.7.</span> <span class="nav-text">修改文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Robo-3T-操作-MongoDB"><span class="nav-number">6.</span> <span class="nav-text">Robo 3T 操作 MongoDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#刪除資料-OR-篩選資料-的問題"><span class="nav-number">7.</span> <span class="nav-text">刪除資料 OR 篩選資料 的問題</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">malagege</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 強力驅動</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主題 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://malagege-blog.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://malagege.github.io/blog/2019/06/30/MonogoDB-操作使用小記/';
          this.page.identifier = '2019/06/30/MonogoDB-操作使用小記/';
          this.page.title = 'MonogoDB 操作使用小記';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://malagege-blog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
