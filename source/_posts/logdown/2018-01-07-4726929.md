---
layout: post
title: '更新系統flexget壞掉啦!!'
date: 2018-01-07 14:46
comments: true
categories: Linux
tags: [Linux,flexget]
---
想說flexget應該正常
結果執行flexget -v
```
找不到/bin/xxx/python2.6
```

<!--more-->

升級OS後python是2.7
想說直接升級flexget
```
sudo pip install --upgrade setuptools
sudo pip install --upgrade flexget
```
[FlexGet官方升級說明](https://flexget.com/Upgrade)

但是不成功...

```
sudo pip install --upgrade --force-reinstall flexget
```
[python - Can I force pip to reinstall the current version? - Stack Overflow](https://stackoverflow.com/questions/19548957/can-i-force-pip-to-reinstall-the-current-version)

還是安裝失敗 囧

```
sudo pip3 install --upgrade --force-reinstall flexget
```
pip3就可以了... 不知道為什麼
`.flexget/db-config.sqlit`要刪掉


執行`flexget --test execute`怎麼跑出錯誤`Transmissionrpc module version 0.11 or higher required`
```
sudo pip3 install  transmissionrpc
```



`flexget --test execute`跑出
```
2018-01-07 22:07 VERBOSE  manager                       Creating new database /home/pi/.flexget/test-config.sqlite - DO NOT INTERUPT ...
2018-01-07 22:08 CRITICAL manager                       [/templates/autoPass] The key `disable_builtins` is not valid here. Only known plugin names are valid keys.
2018-01-07 22:08 CRITICAL manager                       [/templates/olddownload] The key `disable_builtins` is not valid here. Only known plugin names are valid keys.
2018-01-07 22:08 CRITICAL manager                       [/templates/default] The key `disable_builtins` is not valid here. Only known plugin names are valid keys.
2018-01-07 22:08 CRITICAL manager
```


是`config.yml`裡設定disable_buildin關係
```
disable_builtins: [seen_info_hash]
```
先暫時移除
改寫法可能是下面這段
https://flexget.com/Plugins/disable

先分享我的config.yml
```
templates:
  default:
    transmission:
      host: localhost
      port: 9091
      username: username
      password: usernamepassword
      addpaused: no
      path: /mnt/extHDD/Download/Mikata/201710/{{task}}
    free_space:
      path: /mnt/extHDD/
      space: 1000
    clean_transmission:
      host: localhost
      port: 9091
      username: username
      password: usernamepassword
      finished_for: 4 days
      min_ratio: 1
    if:
      - "'季度全集' in category": reject
  olddownload:
    transmission:
      host: localhost
      port: 9091
      username: username
      password: usernamepassword
      addpaused: no
      path: /mnt/extHDD/Download/Mikata/201707/{{task}}
    free_space:
      path: /mnt/extHDD/
      space: 1000
    clean_transmission:
      host: localhost
      port: 9091
      username: username
      password: usernamepassword
      finished_for: 4 days
      min_ratio: 1
    if:
      - "'季度全集' in category": reject
  autoPass:
    transmission:
      host: localhost
      port: 9091
      username: username
      password: usernamepassword
      addpaused: yes
      path: /mnt/extHDD/Download/Mikata/201707/{{task}}
    if:
      - "'季度全集' in category": reject

tasks:
  Fate/Apocrypha:
    rss:
      url: https://share.dmhy.org/topics/rss/sort_id/2/rss.xml?keyword=Apocrypha+team_id%3A37+720+繁
      other_fields: [category]
    accept_all: yes
    template: default
```

參考來源：
[python - Can I force pip to reinstall the current version? - Stack Overflow](https://stackoverflow.com/questions/19548957/can-i-force-pip-to-reinstall-the-current-version)
[FlexGet](https://flexget.com/Plugins/disable)
[FlexGet](https://flexget.com/Upgrade)
[[SOLVED] Flexget can't see Transmissionrpc is installed - help - Forum - FlexGet](https://discuss.flexget.com/t/solved-flexget-cant-see-transmissionrpc-is-installed/2508)