---
layout: post
title: '更新系統vsftpd壞掉事情'
date: 2018-01-07 06:35
comments: true
categories: vsftpd
tags: [vsftpd]
---
上篇更新系統完
我遇到vsftpd沒辦法啟動
簡單記錄採雷筆記
<!--more-->


由於怕新版設定檔不太一樣
所以我就沒有保留舊的設定檔(當然我有先抓下來預備)

其怪怎麼無法啟動vsftpd

```sh
pi@raspberrypi  $ sudo dpkg --configure  vsftpd
設定 vsftpd (3.0.2-17+deb8u1) ...
vsftpd user (ftp) already exists, doing nothing.

vsftpd directory (/srv/ftp) already exists, doing nothing.
insserv: warning: script 'K02noip2' missing LSB tags and overrides
insserv: warning: script 'noip2' missing LSB tags and overrides
[warn] Starting FTP server: vsftpd[....] vsftpd failed - probably invalid config. ... (warning).
invoke-rc.d: initscript vsftpd, action "start" failed.
dpkg: error processing package vsftpd (--configure):
 子程序 已安裝的 post-installation script 傳回了錯誤退出狀態 1
處理時發生錯誤：
 vsftpd
 ```
 後來發現，/etc/init.d/vsftpd裡面腳本執行有問題
 我試著執行`sudo vsftpd`

 ```
 pi@raspberrypi /etc/apache2/sites-enabled $ sudo vsftpd
500 OOPS: socket
```

Google一下，發現沒有幾個人遇到這個問題

後來把/etc/vsftpd
設定改
`listen=YES`

之後又遇到
```
pi@raspberrypi $ sudo vsftpd
500 OOPS: run two copies of vsftpd for IPv4 and IPv6
```

把/etc/vsftpd
`#listen_ipv6=YES`或改成`listen_ipv6=NO`
就能正常運行

